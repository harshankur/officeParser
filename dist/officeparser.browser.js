#!/usr/bin/env node

// Shim for setImmediate
if (typeof setImmediate === 'undefined') {
  window.setImmediate = function(callback) {
    return setTimeout(callback, 0);
  };
}

"use strict";var officeParser=(()=>{var F3=Object.create;var xp=Object.defineProperty;var U3=Object.getOwnPropertyDescriptor;var j3=Object.getOwnPropertyNames;var $3=Object.getPrototypeOf,z3=Object.prototype.hasOwnProperty;var BT=r=>{throw TypeError(r)};var W3=(r,e,t)=>e in r?xp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var Jt=(r,e)=>()=>(r&&(e=r(r=0)),e);var ot=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Uo=(r,e)=>{for(var t in e)xp(r,t,{get:e[t],enumerable:!0})},MT=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of j3(e))!z3.call(r,i)&&i!==t&&xp(r,i,{get:()=>e[i],enumerable:!(n=U3(e,i))||n.enumerable});return r};var Su=(r,e,t)=>(t=r!=null?F3($3(r)):{},MT(e||!r||!r.__esModule?xp(t,"default",{value:r,enumerable:!0}):t,r)),Ir=r=>MT(xp({},"__esModule",{value:!0}),r);var Qe=(r,e,t)=>W3(r,typeof e!="symbol"?e+"":e,t),h_=(r,e,t)=>e.has(r)||BT("Cannot "+t);var l=(r,e,t)=>(h_(r,e,"read from private field"),t?t.call(r):e.get(r)),X=(r,e,t)=>e.has(r)?BT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),L=(r,e,t,n)=>(h_(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),se=(r,e,t)=>(h_(r,e,"access private method"),t);var tn=(r,e,t,n)=>({set _(i){L(r,e,i,t)},get _(){return l(r,e,n)}});var Ne=Jt(()=>{});var process={};Uo(process,{_debugEnd:()=>TC,_debugProcess:()=>SC,_events:()=>zC,_eventsCount:()=>WC,_exiting:()=>oC,_fatalExceptions:()=>_C,_getActiveHandles:()=>cC,_getActiveRequests:()=>uC,_kill:()=>hC,_linkedBinding:()=>iC,_maxListeners:()=>$C,_preload_modules:()=>FC,_rawDebug:()=>rC,_startProfilerIdleNotifier:()=>CC,_stopProfilerIdleNotifier:()=>RC,_tickCallback:()=>xC,abort:()=>NC,addListener:()=>qC,allowedNodeEnvironmentFlags:()=>bC,arch:()=>zT,argv:()=>HT,argv0:()=>MC,assert:()=>wC,binding:()=>KT,browser:()=>tC,chdir:()=>QT,config:()=>aC,cpuUsage:()=>y0,cwd:()=>JT,debugPort:()=>BC,default:()=>QC,dlopen:()=>lC,domain:()=>sC,emit:()=>XC,emitWarning:()=>XT,env:()=>qT,execArgv:()=>GT,execPath:()=>PC,exit:()=>mC,features:()=>vC,hasUncaughtExceptionCaptureCallback:()=>AC,hrtime:()=>m0,kill:()=>gC,listeners:()=>JC,memoryUsage:()=>pC,moduleLoadList:()=>nC,nextTick:()=>UT,off:()=>GC,on:()=>$o,once:()=>HC,openStdin:()=>yC,pid:()=>kC,platform:()=>WT,ppid:()=>LC,prependListener:()=>KC,prependOnceListener:()=>ZC,reallyExit:()=>fC,release:()=>eC,removeAllListeners:()=>YC,removeListener:()=>VC,resourceUsage:()=>dC,setSourceMapsEnabled:()=>UC,setUncaughtExceptionCaptureCallback:()=>EC,stderr:()=>IC,stdin:()=>OC,stdout:()=>DC,title:()=>$T,umask:()=>ZT,uptime:()=>jC,version:()=>VT,versions:()=>YT});function g_(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function q3(){!Mf||!Tu||(Mf=!1,Tu.length?jo=Tu.concat(jo):g0=-1,jo.length&&FT())}function FT(){if(!Mf){var r=setTimeout(q3,0);Mf=!0;for(var e=jo.length;e;){for(Tu=jo,jo=[];++g0<e;)Tu&&Tu[g0].run();g0=-1,e=jo.length}Tu=null,Mf=!1,clearTimeout(r)}}function UT(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];jo.push(new jT(r,e)),jo.length===1&&!Mf&&setTimeout(FT,0)}function jT(r,e){this.fun=r,this.array=e}function Nn(){}function iC(r){g_("_linkedBinding")}function lC(r){g_("dlopen")}function uC(){return[]}function cC(){return[]}function wC(r,e){if(!r)throw new Error(e||"assertion error")}function AC(){return!1}function jC(){return ol.now()/1e3}function m0(r){var e=Math.floor((Date.now()-ol.now())*.001),t=ol.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=p_)),[n,i]}function $o(){return QC}function JC(r){return[]}var jo,Mf,Tu,g0,$T,zT,WT,qT,HT,GT,VT,YT,XT,KT,ZT,JT,QT,eC,tC,rC,nC,sC,oC,aC,fC,hC,y0,dC,pC,gC,mC,yC,bC,vC,_C,EC,xC,SC,TC,CC,RC,DC,IC,OC,NC,kC,LC,PC,BC,MC,FC,UC,ol,d_,p_,$C,zC,WC,qC,HC,GC,VC,YC,XC,KC,ZC,QC,eR=Jt(()=>{Ne();Le();ke();jo=[],Mf=!1,g0=-1;jT.prototype.run=function(){this.fun.apply(null,this.array)};$T="browser",zT="x64",WT="browser",qT={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},HT=["/usr/bin/node"],GT=[],VT="v16.8.0",YT={},XT=function(r,e){console.warn((e?e+": ":"")+r)},KT=function(r){g_("binding")},ZT=function(r){return 0},JT=function(){return"/"},QT=function(r){},eC={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};tC=!0,rC=Nn,nC=[];sC={},oC=!1,aC={};fC=Nn,hC=Nn,y0=function(){return{}},dC=y0,pC=y0,gC=Nn,mC=Nn,yC=Nn,bC={};vC={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},_C=Nn,EC=Nn;xC=Nn,SC=Nn,TC=Nn,CC=Nn,RC=Nn,DC=void 0,IC=void 0,OC=void 0,NC=Nn,kC=2,LC=1,PC="/bin/usr/node",BC=9229,MC="node",FC=[],UC=Nn,ol={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};ol.now===void 0&&(d_=Date.now(),ol.timing&&ol.timing.navigationStart&&(d_=ol.timing.navigationStart),ol.now=()=>Date.now()-d_);p_=1e9;m0.bigint=function(r){var e=m0(r);return typeof BigInt>"u"?e[0]*p_+e[1]:BigInt(e[0]*p_)+BigInt(e[1])};$C=10,zC={},WC=0;qC=$o,HC=$o,GC=$o,VC=$o,YC=$o,XC=Nn,KC=$o,ZC=$o;QC={version:VT,versions:YT,arch:zT,platform:WT,browser:tC,release:eC,_rawDebug:rC,moduleLoadList:nC,binding:KT,_linkedBinding:iC,_events:zC,_eventsCount:WC,_maxListeners:$C,on:$o,addListener:qC,once:HC,off:GC,removeListener:VC,removeAllListeners:YC,emit:XC,prependListener:KC,prependOnceListener:ZC,listeners:JC,domain:sC,_exiting:oC,config:aC,dlopen:lC,uptime:jC,_getActiveRequests:uC,_getActiveHandles:cC,reallyExit:fC,_kill:hC,cpuUsage:y0,resourceUsage:dC,memoryUsage:pC,kill:gC,exit:mC,openStdin:yC,allowedNodeEnvironmentFlags:bC,assert:wC,features:vC,_fatalExceptions:_C,setUncaughtExceptionCaptureCallback:EC,hasUncaughtExceptionCaptureCallback:AC,emitWarning:XT,nextTick:UT,_tickCallback:xC,_debugProcess:SC,_debugEnd:TC,_startProfilerIdleNotifier:CC,_stopProfilerIdleNotifier:RC,stdout:DC,stdin:OC,stderr:IC,abort:NC,umask:ZT,chdir:QT,cwd:JT,env:qT,title:$T,argv:HT,execArgv:GT,pid:kC,ppid:LC,execPath:PC,debugPort:BC,hrtime:m0,argv0:MC,_preload_modules:FC,setSourceMapsEnabled:UC}});var ke=Jt(()=>{eR()});function H3(){if(tR)return Sp;tR=!0,Sp.byteLength=a,Sp.toByteArray=c,Sp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(g){var b=s(g),v=b[0],w=b[1];return(v+w)*3/4-w}function u(g,b,v){return(b+v)*3/4-v}function c(g){var b,v=s(g),w=v[0],y=v[1],_=new t(u(g,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[g.charCodeAt(A)]<<18|e[g.charCodeAt(A+1)]<<12|e[g.charCodeAt(A+2)]<<6|e[g.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[g.charCodeAt(A)]<<2|e[g.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[g.charCodeAt(A)]<<10|e[g.charCodeAt(A+1)]<<4|e[g.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(g[_]<<16&16711680)+(g[_+1]<<8&65280)+(g[_+2]&255),y.push(f(w));return y.join("")}function d(g){for(var b,v=g.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(g,E,E+_>S?S:E+_));return w===1?(b=g[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(g[v-2]<<8)+g[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Sp}function G3(){if(rR)return b0;rR=!0;return b0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,g=r[e+h];for(h+=d,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(g?-1:1)*s*Math.pow(2,o-n)},b0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=a&255,g+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+g]=s&255,g+=b,s/=256,c-=8);r[t+g-b]|=v*128},b0}function fn(){if(nR)return Cu;nR=!0;let r=H3(),e=G3(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Cu.Buffer=s,Cu.SlowBuffer=y,Cu.INSPECT_MAX_BYTES=50;let n=2147483647;Cu.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let x=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(x,p),x.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(x){if(x>n)throw new RangeError('The value "'+x+'" is invalid for option "size"');let p=new Uint8Array(x);return Object.setPrototypeOf(p,s.prototype),p}function s(x,p,m){if(typeof x=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return a(x,p,m)}s.poolSize=8192;function a(x,p,m){if(typeof x=="string")return h(x,p);if(ArrayBuffer.isView(x))return g(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Ie(x,ArrayBuffer)||x&&Ie(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(x,SharedArrayBuffer)||x&&Ie(x.buffer,SharedArrayBuffer)))return b(x,p,m);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let N=x.valueOf&&x.valueOf();if(N!=null&&N!==x)return s.from(N,p,m);let re=v(x);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return s.from(x[Symbol.toPrimitive]("string"),p,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}s.from=function(x,p,m){return a(x,p,m)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,p,m){return u(x),x<=0?o(x):p!==void 0?typeof m=="string"?o(x).fill(p,m):o(x).fill(p):o(x)}s.alloc=function(x,p,m){return c(x,p,m)};function f(x){return u(x),o(x<0?0:w(x)|0)}s.allocUnsafe=function(x){return f(x)},s.allocUnsafeSlow=function(x){return f(x)};function h(x,p){if((typeof p!="string"||p==="")&&(p="utf8"),!s.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let m=_(x,p)|0,N=o(m),re=N.write(x,p);return re!==m&&(N=N.slice(0,re)),N}function d(x){let p=x.length<0?0:w(x.length)|0,m=o(p);for(let N=0;N<p;N+=1)m[N]=x[N]&255;return m}function g(x){if(Ie(x,Uint8Array)){let p=new Uint8Array(x);return b(p.buffer,p.byteOffset,p.byteLength)}return d(x)}function b(x,p,m){if(p<0||x.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<p+(m||0))throw new RangeError('"length" is outside of buffer bounds');let N;return p===void 0&&m===void 0?N=new Uint8Array(x):m===void 0?N=new Uint8Array(x,p):N=new Uint8Array(x,p,m),Object.setPrototypeOf(N,s.prototype),N}function v(x){if(s.isBuffer(x)){let p=w(x.length)|0,m=o(p);return m.length===0||x.copy(m,0,0,p),m}if(x.length!==void 0)return typeof x.length!="number"||Te(x.length)?o(0):d(x);if(x.type==="Buffer"&&Array.isArray(x.data))return d(x.data)}function w(x){if(x>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),s.alloc(+x)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,m){if(Ie(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),Ie(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),!s.isBuffer(p)||!s.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===m)return 0;let N=p.length,re=m.length;for(let D=0,fe=Math.min(N,re);D<fe;++D)if(p[D]!==m[D]){N=p[D],re=m[D];break}return N<re?-1:re<N?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,m){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let N;if(m===void 0)for(m=0,N=0;N<p.length;++N)m+=p[N].length;let re=s.allocUnsafe(m),D=0;for(N=0;N<p.length;++N){let fe=p[N];if(Ie(fe,Uint8Array))D+fe.length>re.length?(s.isBuffer(fe)||(fe=s.from(fe)),fe.copy(re,D)):Uint8Array.prototype.set.call(re,fe,D);else if(s.isBuffer(fe))fe.copy(re,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=fe.length}return re};function _(x,p){if(s.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Ie(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);let m=x.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&m===0)return 0;let re=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Ce(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return _e(x).length;default:if(re)return N?-1:Ce(x).length;p=(""+p).toLowerCase(),re=!0}}s.byteLength=_;function E(x,p,m){let N=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,p>>>=0,m<=p))return"";for(x||(x="utf8");;)switch(x){case"hex":return O(this,p,m);case"utf8":case"utf-8":return V(this,p,m);case"ascii":return ve(this,p,m);case"latin1":case"binary":return z(this,p,m);case"base64":return U(this,p,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,p,m);default:if(N)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),N=!0}}s.prototype._isBuffer=!0;function S(x,p,m){let N=x[p];x[p]=x[m],x[m]=N}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<p;m+=2)S(this,m,m+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<p;m+=4)S(this,m,m+3),S(this,m+1,m+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<p;m+=8)S(this,m,m+7),S(this,m+1,m+6),S(this,m+2,m+5),S(this,m+3,m+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?V(this,0,p):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",m=Cu.INSPECT_MAX_BYTES;return p=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(p+=" ... "),"<Buffer "+p+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(p,m,N,re,D){if(Ie(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(m===void 0&&(m=0),N===void 0&&(N=p?p.length:0),re===void 0&&(re=0),D===void 0&&(D=this.length),m<0||N>p.length||re<0||D>this.length)throw new RangeError("out of range index");if(re>=D&&m>=N)return 0;if(re>=D)return-1;if(m>=N)return 1;if(m>>>=0,N>>>=0,re>>>=0,D>>>=0,this===p)return 0;let fe=D-re,be=N-m,Se=Math.min(fe,be),Y=this.slice(re,D),me=p.slice(m,N);for(let $=0;$<Se;++$)if(Y[$]!==me[$]){fe=Y[$],be=me[$];break}return fe<be?-1:be<fe?1:0};function A(x,p,m,N,re){if(x.length===0)return-1;if(typeof m=="string"?(N=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Te(m)&&(m=re?0:x.length-1),m<0&&(m=x.length+m),m>=x.length){if(re)return-1;m=x.length-1}else if(m<0)if(re)m=0;else return-1;if(typeof p=="string"&&(p=s.from(p,N)),s.isBuffer(p))return p.length===0?-1:B(x,p,m,N,re);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(x,p,m):Uint8Array.prototype.lastIndexOf.call(x,p,m):B(x,[p],m,N,re);throw new TypeError("val must be string, number or Buffer")}function B(x,p,m,N,re){let D=1,fe=x.length,be=p.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(x.length<2||p.length<2)return-1;D=2,fe/=2,be/=2,m/=2}function Se(me,$){return D===1?me[$]:me.readUInt16BE($*D)}let Y;if(re){let me=-1;for(Y=m;Y<fe;Y++)if(Se(x,Y)===Se(p,me===-1?0:Y-me)){if(me===-1&&(me=Y),Y-me+1===be)return me*D}else me!==-1&&(Y-=Y-me),me=-1}else for(m+be>fe&&(m=fe-be),Y=m;Y>=0;Y--){let me=!0;for(let $=0;$<be;$++)if(Se(x,Y+$)!==Se(p,$)){me=!1;break}if(me)return Y}return-1}s.prototype.includes=function(p,m,N){return this.indexOf(p,m,N)!==-1},s.prototype.indexOf=function(p,m,N){return A(this,p,m,N,!0)},s.prototype.lastIndexOf=function(p,m,N){return A(this,p,m,N,!1)};function T(x,p,m,N){m=Number(m)||0;let re=x.length-m;N?(N=Number(N),N>re&&(N=re)):N=re;let D=p.length;N>D/2&&(N=D/2);let fe;for(fe=0;fe<N;++fe){let be=parseInt(p.substr(fe*2,2),16);if(Te(be))return fe;x[m+fe]=be}return fe}function Z(x,p,m,N){return Oe(Ce(p,x.length-m),x,m,N)}function ie(x,p,m,N){return Oe(xe(p),x,m,N)}function G(x,p,m,N){return Oe(_e(p),x,m,N)}function ae(x,p,m,N){return Oe(he(p,x.length-m),x,m,N)}s.prototype.write=function(p,m,N,re){if(m===void 0)re="utf8",N=this.length,m=0;else if(N===void 0&&typeof m=="string")re=m,N=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(N)?(N=N>>>0,re===void 0&&(re="utf8")):(re=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let D=this.length-m;if((N===void 0||N>D)&&(N=D),p.length>0&&(N<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let fe=!1;for(;;)switch(re){case"hex":return T(this,p,m,N);case"utf8":case"utf-8":return Z(this,p,m,N);case"ascii":case"latin1":case"binary":return ie(this,p,m,N);case"base64":return G(this,p,m,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,p,m,N);default:if(fe)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),fe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(x,p,m){return p===0&&m===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(p,m))}function V(x,p,m){m=Math.min(x.length,m);let N=[],re=p;for(;re<m;){let D=x[re],fe=null,be=D>239?4:D>223?3:D>191?2:1;if(re+be<=m){let Se,Y,me,$;switch(be){case 1:D<128&&(fe=D);break;case 2:Se=x[re+1],(Se&192)===128&&($=(D&31)<<6|Se&63,$>127&&(fe=$));break;case 3:Se=x[re+1],Y=x[re+2],(Se&192)===128&&(Y&192)===128&&($=(D&15)<<12|(Se&63)<<6|Y&63,$>2047&&($<55296||$>57343)&&(fe=$));break;case 4:Se=x[re+1],Y=x[re+2],me=x[re+3],(Se&192)===128&&(Y&192)===128&&(me&192)===128&&($=(D&15)<<18|(Se&63)<<12|(Y&63)<<6|me&63,$>65535&&$<1114112&&(fe=$))}}fe===null?(fe=65533,be=1):fe>65535&&(fe-=65536,N.push(fe>>>10&1023|55296),fe=56320|fe&1023),N.push(fe),re+=be}return Ae(N)}let ue=4096;function Ae(x){let p=x.length;if(p<=ue)return String.fromCharCode.apply(String,x);let m="",N=0;for(;N<p;)m+=String.fromCharCode.apply(String,x.slice(N,N+=ue));return m}function ve(x,p,m){let N="";m=Math.min(x.length,m);for(let re=p;re<m;++re)N+=String.fromCharCode(x[re]&127);return N}function z(x,p,m){let N="";m=Math.min(x.length,m);for(let re=p;re<m;++re)N+=String.fromCharCode(x[re]);return N}function O(x,p,m){let N=x.length;(!p||p<0)&&(p=0),(!m||m<0||m>N)&&(m=N);let re="";for(let D=p;D<m;++D)re+=We[x[D]];return re}function oe(x,p,m){let N=x.slice(p,m),re="";for(let D=0;D<N.length-1;D+=2)re+=String.fromCharCode(N[D]+N[D+1]*256);return re}s.prototype.slice=function(p,m){let N=this.length;p=~~p,m=m===void 0?N:~~m,p<0?(p+=N,p<0&&(p=0)):p>N&&(p=N),m<0?(m+=N,m<0&&(m=0)):m>N&&(m=N),m<p&&(m=p);let re=this.subarray(p,m);return Object.setPrototypeOf(re,s.prototype),re};function q(x,p,m){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+p>m)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p],D=1,fe=0;for(;++fe<m&&(D*=256);)re+=this[p+fe]*D;return re},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p+--m],D=1;for(;m>0&&(D*=256);)re+=this[p+--m]*D;return re},s.prototype.readUint8=s.prototype.readUInt8=function(p,m){return p=p>>>0,m||q(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,m){return p=p>>>0,m||q(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,m){return p=p>>>0,m||q(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,m){return p=p>>>0,m||q(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,D=this[++p]+this[++p]*2**8+this[++p]*2**16+N*2**24;return BigInt(re)+(BigInt(D)<<BigInt(32))}),s.prototype.readBigUInt64BE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=m*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],D=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+N;return(BigInt(re)<<BigInt(32))+BigInt(D)}),s.prototype.readIntLE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p],D=1,fe=0;for(;++fe<m&&(D*=256);)re+=this[p+fe]*D;return D*=128,re>=D&&(re-=Math.pow(2,8*m)),re},s.prototype.readIntBE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=m,D=1,fe=this[p+--re];for(;re>0&&(D*=256);)fe+=this[p+--re]*D;return D*=128,fe>=D&&(fe-=Math.pow(2,8*m)),fe},s.prototype.readInt8=function(p,m){return p=p>>>0,m||q(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,m){p=p>>>0,m||q(p,2,this.length);let N=this[p]|this[p+1]<<8;return N&32768?N|4294901760:N},s.prototype.readInt16BE=function(p,m){p=p>>>0,m||q(p,2,this.length);let N=this[p+1]|this[p]<<8;return N&32768?N|4294901760:N},s.prototype.readInt32LE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(N<<24);return(BigInt(re)<<BigInt(32))+BigInt(m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=(m<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(re)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+N)}),s.prototype.readFloatLE=function(p,m){return p=p>>>0,m||q(p,4,this.length),e.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,m){return p=p>>>0,m||q(p,4,this.length),e.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,m){return p=p>>>0,m||q(p,8,this.length),e.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,m){return p=p>>>0,m||q(p,8,this.length),e.read(this,p,!1,52,8)};function M(x,p,m,N,re,D){if(!s.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>re||p<D)throw new RangeError('"value" argument is out of bounds');if(m+N>x.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,m,N,re){if(p=+p,m=m>>>0,N=N>>>0,!re){let be=Math.pow(2,8*N)-1;M(this,p,m,N,be,0)}let D=1,fe=0;for(this[m]=p&255;++fe<N&&(D*=256);)this[m+fe]=p/D&255;return m+N},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,m,N,re){if(p=+p,m=m>>>0,N=N>>>0,!re){let be=Math.pow(2,8*N)-1;M(this,p,m,N,be,0)}let D=N-1,fe=1;for(this[m+D]=p&255;--D>=0&&(fe*=256);)this[m+D]=p/fe&255;return m+N},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,1,255,0),this[m]=p&255,m+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,65535,0),this[m]=p&255,this[m+1]=p>>>8,m+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,65535,0),this[m]=p>>>8,this[m+1]=p&255,m+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,4294967295,0),this[m+3]=p>>>24,this[m+2]=p>>>16,this[m+1]=p>>>8,this[m]=p&255,m+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,4294967295,0),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4};function H(x,p,m,N,re){pe(p,N,re,x,m,7);let D=Number(p&BigInt(4294967295));x[m++]=D,D=D>>8,x[m++]=D,D=D>>8,x[m++]=D,D=D>>8,x[m++]=D;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return x[m++]=fe,fe=fe>>8,x[m++]=fe,fe=fe>>8,x[m++]=fe,fe=fe>>8,x[m++]=fe,m}function j(x,p,m,N,re){pe(p,N,re,x,m,7);let D=Number(p&BigInt(4294967295));x[m+7]=D,D=D>>8,x[m+6]=D,D=D>>8,x[m+5]=D,D=D>>8,x[m+4]=D;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return x[m+3]=fe,fe=fe>>8,x[m+2]=fe,fe=fe>>8,x[m+1]=fe,fe=fe>>8,x[m]=fe,m+8}s.prototype.writeBigUInt64LE=qe(function(p,m=0){return H(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=qe(function(p,m=0){return j(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,m,N,re){if(p=+p,m=m>>>0,!re){let Se=Math.pow(2,8*N-1);M(this,p,m,N,Se-1,-Se)}let D=0,fe=1,be=0;for(this[m]=p&255;++D<N&&(fe*=256);)p<0&&be===0&&this[m+D-1]!==0&&(be=1),this[m+D]=(p/fe>>0)-be&255;return m+N},s.prototype.writeIntBE=function(p,m,N,re){if(p=+p,m=m>>>0,!re){let Se=Math.pow(2,8*N-1);M(this,p,m,N,Se-1,-Se)}let D=N-1,fe=1,be=0;for(this[m+D]=p&255;--D>=0&&(fe*=256);)p<0&&be===0&&this[m+D+1]!==0&&(be=1),this[m+D]=(p/fe>>0)-be&255;return m+N},s.prototype.writeInt8=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,1,127,-128),p<0&&(p=255+p+1),this[m]=p&255,m+1},s.prototype.writeInt16LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,32767,-32768),this[m]=p&255,this[m+1]=p>>>8,m+2},s.prototype.writeInt16BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,32767,-32768),this[m]=p>>>8,this[m+1]=p&255,m+2},s.prototype.writeInt32LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,2147483647,-2147483648),this[m]=p&255,this[m+1]=p>>>8,this[m+2]=p>>>16,this[m+3]=p>>>24,m+4},s.prototype.writeInt32BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4},s.prototype.writeBigInt64LE=qe(function(p,m=0){return H(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=qe(function(p,m=0){return j(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(x,p,m,N,re,D){if(m+N>x.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function K(x,p,m,N,re){return p=+p,m=m>>>0,re||Q(x,p,m,4),e.write(x,p,m,N,23,4),m+4}s.prototype.writeFloatLE=function(p,m,N){return K(this,p,m,!0,N)},s.prototype.writeFloatBE=function(p,m,N){return K(this,p,m,!1,N)};function ee(x,p,m,N,re){return p=+p,m=m>>>0,re||Q(x,p,m,8),e.write(x,p,m,N,52,8),m+8}s.prototype.writeDoubleLE=function(p,m,N){return ee(this,p,m,!0,N)},s.prototype.writeDoubleBE=function(p,m,N){return ee(this,p,m,!1,N)},s.prototype.copy=function(p,m,N,re){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(N||(N=0),!re&&re!==0&&(re=this.length),m>=p.length&&(m=p.length),m||(m=0),re>0&&re<N&&(re=N),re===N||p.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),p.length-m<re-N&&(re=p.length-m+N);let D=re-N;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,N,re):Uint8Array.prototype.set.call(p,this.subarray(N,re),m),D},s.prototype.fill=function(p,m,N,re){if(typeof p=="string"){if(typeof m=="string"?(re=m,m=0,N=this.length):typeof N=="string"&&(re=N,N=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!s.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(p.length===1){let fe=p.charCodeAt(0);(re==="utf8"&&fe<128||re==="latin1")&&(p=fe)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(m<0||this.length<m||this.length<N)throw new RangeError("Out of range index");if(N<=m)return this;m=m>>>0,N=N===void 0?this.length:N>>>0,p||(p=0);let D;if(typeof p=="number")for(D=m;D<N;++D)this[D]=p;else{let fe=s.isBuffer(p)?p:s.from(p,re),be=fe.length;if(be===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(D=0;D<N-m;++D)this[D+m]=fe[D%be]}return this};let P={};function I(x,p,m){P[x]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}I("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),I("ERR_INVALID_ARG_TYPE",function(x,p){return`The "${x}" argument must be of type number. Received type ${typeof p}`},TypeError),I("ERR_OUT_OF_RANGE",function(x,p,m){let N=`The value of "${x}" is out of range.`,re=m;return Number.isInteger(m)&&Math.abs(m)>2**32?re=k(String(m)):typeof m=="bigint"&&(re=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(re=k(re)),re+="n"),N+=` It must be ${p}. Received ${re}`,N},RangeError);function k(x){let p="",m=x.length,N=x[0]==="-"?1:0;for(;m>=N+4;m-=3)p=`_${x.slice(m-3,m)}${p}`;return`${x.slice(0,m)}${p}`}function ne(x,p,m){F(p,"offset"),(x[p]===void 0||x[p+m]===void 0)&&R(p,x.length-(m+1))}function pe(x,p,m,N,re,D){if(x>m||x<p){let fe=typeof p=="bigint"?"n":"",be;throw p===0||p===BigInt(0)?be=`>= 0${fe} and < 2${fe} ** ${(D+1)*8}${fe}`:be=`>= -(2${fe} ** ${(D+1)*8-1}${fe}) and < 2 ** ${(D+1)*8-1}${fe}`,new P.ERR_OUT_OF_RANGE("value",be,x)}ne(N,re,D)}function F(x,p){if(typeof x!="number")throw new P.ERR_INVALID_ARG_TYPE(p,"number",x)}function R(x,p,m){throw Math.floor(x)!==x?(F(x,m),new P.ERR_OUT_OF_RANGE("offset","an integer",x)):p<0?new P.ERR_BUFFER_OUT_OF_BOUNDS:new P.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,x)}let te=/[^+/0-9A-Za-z-_]/g;function ge(x){if(x=x.split("=")[0],x=x.trim().replace(te,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Ce(x,p){p=p||1/0;let m,N=x.length,re=null,D=[];for(let fe=0;fe<N;++fe){if(m=x.charCodeAt(fe),m>55295&&m<57344){if(!re){if(m>56319){(p-=3)>-1&&D.push(239,191,189);continue}else if(fe+1===N){(p-=3)>-1&&D.push(239,191,189);continue}re=m;continue}if(m<56320){(p-=3)>-1&&D.push(239,191,189),re=m;continue}m=(re-55296<<10|m-56320)+65536}else re&&(p-=3)>-1&&D.push(239,191,189);if(re=null,m<128){if((p-=1)<0)break;D.push(m)}else if(m<2048){if((p-=2)<0)break;D.push(m>>6|192,m&63|128)}else if(m<65536){if((p-=3)<0)break;D.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((p-=4)<0)break;D.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return D}function xe(x){let p=[];for(let m=0;m<x.length;++m)p.push(x.charCodeAt(m)&255);return p}function he(x,p){let m,N,re,D=[];for(let fe=0;fe<x.length&&!((p-=2)<0);++fe)m=x.charCodeAt(fe),N=m>>8,re=m%256,D.push(re),D.push(N);return D}function _e(x){return r.toByteArray(ge(x))}function Oe(x,p,m,N){let re;for(re=0;re<N&&!(re+m>=p.length||re>=x.length);++re)p[re+m]=x[re];return re}function Ie(x,p){return x instanceof p||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===p.name}function Te(x){return x!==x}let We=(function(){let x="0123456789abcdef",p=new Array(256);for(let m=0;m<16;++m){let N=m*16;for(let re=0;re<16;++re)p[N+re]=x[m]+x[re]}return p})();function qe(x){return typeof BigInt>"u"?Ge:x}function Ge(){throw new Error("BigInt not supported")}return Cu}var Sp,tR,b0,rR,Cu,nR,Ff=Jt(()=>{Ne();Le();ke();Sp={},tR=!1;b0={},rR=!1;Cu={},nR=!1});var Uf={};Uo(Uf,{Buffer:()=>Buffer,INSPECT_MAX_BYTES:()=>V3,default:()=>al,kMaxLength:()=>Y3});var al,Buffer,V3,Y3,ll=Jt(()=>{Ne();Le();ke();Ff();al=fn();al.Buffer;al.SlowBuffer;al.INSPECT_MAX_BYTES;al.kMaxLength;Buffer=al.Buffer,V3=al.INSPECT_MAX_BYTES,Y3=al.kMaxLength});var Le=Jt(()=>{ll()});function v_(){throw new Error("setTimeout has not been defined")}function __(){throw new Error("clearTimeout has not been defined")}function bR(r){if(Wo===setTimeout)return setTimeout(r,0);if((Wo===v_||!Wo)&&setTimeout)return Wo=setTimeout,setTimeout(r,0);try{return Wo(r,0)}catch{try{return Wo.call(null,r,0)}catch{return Wo.call(this||$f,r,0)}}}function X3(){jf&&Du&&(jf=!1,Du.length?Ho=Du.concat(Ho):x0=-1,Ho.length&&wR())}function wR(){if(!jf){var r=bR(X3);jf=!0;for(var e=Ho.length;e;){for(Du=Ho,Ho=[];++x0<e;)Du&&Du[x0].run();x0=-1,e=Ho.length}Du=null,jf=!1,(function(t){if(qo===clearTimeout)return clearTimeout(t);if((qo===__||!qo)&&clearTimeout)return qo=clearTimeout,clearTimeout(t);try{qo(t)}catch{try{return qo.call(null,t)}catch{return qo.call(this||$f,t)}}})(r)}}function iR(r,e){(this||$f).fun=r,(this||$f).array=e}function zo(){}function Ou(r){return r.call.bind(r)}function Dp(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}function aR(r){return ri&&Ei?Ai(r)!==void 0:CR(r)||RR(r)||DR(r)||IR(r)||OR(r)||NR(r)||kR(r)||LR(r)||PR(r)||BR(r)||MR(r)}function CR(r){return ri&&Ei?Ai(r)==="Uint8Array":xr(r)==="[object Uint8Array]"||s6(r)&&r.buffer!==void 0}function RR(r){return ri&&Ei?Ai(r)==="Uint8ClampedArray":xr(r)==="[object Uint8ClampedArray]"}function DR(r){return ri&&Ei?Ai(r)==="Uint16Array":xr(r)==="[object Uint16Array]"}function IR(r){return ri&&Ei?Ai(r)==="Uint32Array":xr(r)==="[object Uint32Array]"}function OR(r){return ri&&Ei?Ai(r)==="Int8Array":xr(r)==="[object Int8Array]"}function NR(r){return ri&&Ei?Ai(r)==="Int16Array":xr(r)==="[object Int16Array]"}function kR(r){return ri&&Ei?Ai(r)==="Int32Array":xr(r)==="[object Int32Array]"}function LR(r){return ri&&Ei?Ai(r)==="Float32Array":xr(r)==="[object Float32Array]"}function PR(r){return ri&&Ei?Ai(r)==="Float64Array":xr(r)==="[object Float64Array]"}function BR(r){return ri&&Ei?Ai(r)==="BigInt64Array":xr(r)==="[object BigInt64Array]"}function MR(r){return ri&&Ei?Ai(r)==="BigUint64Array":xr(r)==="[object BigUint64Array]"}function w0(r){return xr(r)==="[object Map]"}function v0(r){return xr(r)==="[object Set]"}function _0(r){return xr(r)==="[object WeakMap]"}function m_(r){return xr(r)==="[object WeakSet]"}function T0(r){return xr(r)==="[object ArrayBuffer]"}function lR(r){return typeof ArrayBuffer<"u"&&(T0.working?T0(r):r instanceof ArrayBuffer)}function C0(r){return xr(r)==="[object DataView]"}function uR(r){return typeof DataView<"u"&&(C0.working?C0(r):r instanceof DataView)}function R0(r){return xr(r)==="[object SharedArrayBuffer]"}function cR(r){return typeof SharedArrayBuffer<"u"&&(R0.working?R0(r):r instanceof SharedArrayBuffer)}function fR(r){return Dp(r,u6)}function hR(r){return Dp(r,c6)}function dR(r){return Dp(r,f6)}function pR(r){return xR&&Dp(r,SR)}function gR(r){return A_&&Dp(r,TR)}function ul(r,e){var t={seen:[],stylize:p6};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),x_(e)?t.showHidden=e:e&&Ve._extend(t,e),Iu(t.showHidden)&&(t.showHidden=!1),Iu(t.depth)&&(t.depth=2),Iu(t.colors)&&(t.colors=!1),Iu(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=d6),D0(t,r,t.depth)}function d6(r,e){var t=ul.styles[e];return t?"\x1B["+ul.colors[t][0]+"m"+r+"\x1B["+ul.colors[t][1]+"m":r}function p6(r,e){return r}function D0(r,e,t){if(r.customInspect&&e&&S0(e.inspect)&&e.inspect!==Ve.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(t,r);return I0(n)||(n=D0(r,n,t)),n}var i=(function(d,g){if(Iu(g))return d.stylize("undefined","undefined");if(I0(g)){var b="'"+JSON.stringify(g).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(b,"string")}if(jR(g))return d.stylize(""+g,"number");if(x_(g))return d.stylize(""+g,"boolean");if(k0(g))return d.stylize("null","null")})(r,e);if(i)return i;var o=Object.keys(e),s=(function(d){var g={};return d.forEach((function(b,v){g[b]=!0})),g})(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),Rp(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return y_(e);if(o.length===0){if(S0(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Cp(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(O0(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Rp(e))return y_(e)}var u,c="",f=!1,h=["{","}"];return UR(e)&&(f=!0,h=["[","]"]),S0(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),Cp(e)&&(c=" "+RegExp.prototype.toString.call(e)),O0(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Rp(e)&&(c=" "+y_(e)),o.length!==0||f&&e.length!=0?t<0?Cp(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special"):(r.seen.push(e),u=f?(function(d,g,b,v,w){for(var y=[],_=0,E=g.length;_<E;++_)$R(g,String(_))?y.push(b_(d,g,b,v,String(_),!0)):y.push("");return w.forEach((function(S){S.match(/^\d+$/)||y.push(b_(d,g,b,v,S,!0))})),y})(r,e,t,s,o):o.map((function(d){return b_(r,e,t,s,d,f)})),r.seen.pop(),(function(d,g,b){var v=0;return d.reduce((function(w,y){return v++,y.indexOf(`
`)>=0&&v++,w+y.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?b[0]+(g===""?"":g+`
 `)+" "+d.join(`,
  `)+" "+b[1]:b[0]+g+" "+d.join(", ")+" "+b[1]})(u,c,h)):h[0]+c+h[1]}function y_(r){return"["+Error.prototype.toString.call(r)+"]"}function b_(r,e,t,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):u.set&&(a=r.stylize("[Setter]","special")),$R(n,i)||(s="["+i+"]"),a||(r.seen.indexOf(u.value)<0?(a=k0(t)?D0(r,u.value,null):D0(r,u.value,t-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(c){return"  "+c})).join(`
`).substr(2):`
`+a.split(`
`).map((function(c){return"   "+c})).join(`
`)):a=r.stylize("[Circular]","special")),Iu(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+a}function UR(r){return Array.isArray(r)}function x_(r){return typeof r=="boolean"}function k0(r){return r===null}function jR(r){return typeof r=="number"}function I0(r){return typeof r=="string"}function Iu(r){return r===void 0}function Cp(r){return zf(r)&&S_(r)==="[object RegExp]"}function zf(r){return typeof r=="object"&&r!==null}function O0(r){return zf(r)&&S_(r)==="[object Date]"}function Rp(r){return zf(r)&&(S_(r)==="[object Error]"||r instanceof Error)}function S0(r){return typeof r=="function"}function S_(r){return Object.prototype.toString.call(r)}function w_(r){return r<10?"0"+r.toString(10):r.toString(10)}function m6(){var r=new Date,e=[w_(r.getHours()),w_(r.getMinutes()),w_(r.getSeconds())].join(":");return[r.getDate(),g6[r.getMonth()],e].join(" ")}function $R(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function y6(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}var yR,Wo,qo,$f,$r,Du,Ho,jf,x0,lr,K3,E_,N0,vR,Z3,J3,Q3,e6,t6,_R,ER,sR,r6,n6,i6,AR,kt,s6,o6,a6,xR,A_,Ei,ri,l6,oR,Ai,xr,u6,c6,f6,SR,TR,Tp,Ve,Js,mR,h6,E0,FR,A0,g6,Ru,QV,cl=Jt(()=>{Ne();Le();ke();$f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,$r=yR={};(function(){try{Wo=typeof setTimeout=="function"?setTimeout:v_}catch{Wo=v_}try{qo=typeof clearTimeout=="function"?clearTimeout:__}catch{qo=__}})();Ho=[],jf=!1,x0=-1;$r.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ho.push(new iR(r,e)),Ho.length!==1||jf||bR(wR)},iR.prototype.run=function(){(this||$f).fun.apply(null,(this||$f).array)},$r.title="browser",$r.browser=!0,$r.env={},$r.argv=[],$r.version="",$r.versions={},$r.on=zo,$r.addListener=zo,$r.once=zo,$r.off=zo,$r.removeListener=zo,$r.removeAllListeners=zo,$r.emit=zo,$r.prependListener=zo,$r.prependOnceListener=zo,$r.listeners=function(r){return[]},$r.binding=function(r){throw new Error("process.binding is not supported")},$r.cwd=function(){return"/"},$r.chdir=function(r){throw new Error("process.chdir is not supported")},$r.umask=function(){return 0};lr=yR;lr.addListener;lr.argv;lr.binding;lr.browser;lr.chdir;lr.cwd;lr.emit;lr.env;lr.listeners;lr.nextTick;lr.off;lr.on;lr.once;lr.prependListener;lr.prependOnceListener;lr.removeAllListeners;lr.removeListener;lr.title;lr.umask;lr.version;lr.versions;K3=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",E_=Object.prototype.toString,N0=function(r){return!(K3&&r&&typeof r=="object"&&Symbol.toStringTag in r)&&E_.call(r)==="[object Arguments]"},vR=function(r){return!!N0(r)||r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&E_.call(r)!=="[object Array]"&&E_.call(r.callee)==="[object Function]"},Z3=(function(){return N0(arguments)})();N0.isLegacyArguments=vR;J3=Z3?N0:vR,Q3=Object.prototype.toString,e6=Function.prototype.toString,t6=/^\s*(?:function)?\*/,_R=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ER=Object.getPrototypeOf,sR=(function(){if(!_R)return!1;try{return Function("return function*() {}")()}catch{}})(),r6=sR?ER(sR):{},n6=function(r){return typeof r=="function"&&(!!t6.test(e6.call(r))||(_R?ER(r)===r6:Q3.call(r)==="[object GeneratorFunction]"))},i6=typeof Object.create=="function"?function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}},AR=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},kt={},s6=AR,o6=J3,a6=n6;xR=typeof BigInt<"u",A_=typeof Symbol<"u",Ei=A_&&Symbol.toStringTag!==void 0,ri=typeof Uint8Array<"u",l6=typeof ArrayBuffer<"u";ri&&Ei&&(oR=Object.getPrototypeOf(Uint8Array.prototype),Ai=Ou(Object.getOwnPropertyDescriptor(oR,Symbol.toStringTag).get));xr=Ou(Object.prototype.toString),u6=Ou(Number.prototype.valueOf),c6=Ou(String.prototype.valueOf),f6=Ou(Boolean.prototype.valueOf);xR&&(SR=Ou(BigInt.prototype.valueOf));A_&&(TR=Ou(Symbol.prototype.valueOf));kt.isArgumentsObject=o6,kt.isGeneratorFunction=a6,kt.isPromise=function(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"},kt.isArrayBufferView=function(r){return l6&&ArrayBuffer.isView?ArrayBuffer.isView(r):aR(r)||uR(r)},kt.isTypedArray=aR,kt.isUint8Array=CR,kt.isUint8ClampedArray=RR,kt.isUint16Array=DR,kt.isUint32Array=IR,kt.isInt8Array=OR,kt.isInt16Array=NR,kt.isInt32Array=kR,kt.isFloat32Array=LR,kt.isFloat64Array=PR,kt.isBigInt64Array=BR,kt.isBigUint64Array=MR,w0.working=typeof Map<"u"&&w0(new Map),kt.isMap=function(r){return typeof Map<"u"&&(w0.working?w0(r):r instanceof Map)},v0.working=typeof Set<"u"&&v0(new Set),kt.isSet=function(r){return typeof Set<"u"&&(v0.working?v0(r):r instanceof Set)},_0.working=typeof WeakMap<"u"&&_0(new WeakMap),kt.isWeakMap=function(r){return typeof WeakMap<"u"&&(_0.working?_0(r):r instanceof WeakMap)},m_.working=typeof WeakSet<"u"&&m_(new WeakSet),kt.isWeakSet=function(r){return m_(r)},T0.working=typeof ArrayBuffer<"u"&&T0(new ArrayBuffer),kt.isArrayBuffer=lR,C0.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&C0(new DataView(new ArrayBuffer(1),0,1)),kt.isDataView=uR,R0.working=typeof SharedArrayBuffer<"u"&&R0(new SharedArrayBuffer),kt.isSharedArrayBuffer=cR,kt.isAsyncFunction=function(r){return xr(r)==="[object AsyncFunction]"},kt.isMapIterator=function(r){return xr(r)==="[object Map Iterator]"},kt.isSetIterator=function(r){return xr(r)==="[object Set Iterator]"},kt.isGeneratorObject=function(r){return xr(r)==="[object Generator]"},kt.isWebAssemblyCompiledModule=function(r){return xr(r)==="[object WebAssembly.Module]"},kt.isNumberObject=fR,kt.isStringObject=hR,kt.isBooleanObject=dR,kt.isBigIntObject=pR,kt.isSymbolObject=gR,kt.isBoxedPrimitive=function(r){return fR(r)||hR(r)||dR(r)||pR(r)||gR(r)},kt.isAnyArrayBuffer=function(r){return ri&&(lR(r)||cR(r))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(r){Object.defineProperty(kt,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})}));Tp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,Ve={},Js=lr,mR=Object.getOwnPropertyDescriptors||function(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++)t[e[n]]=Object.getOwnPropertyDescriptor(r,e[n]);return t},h6=/%[sdj%]/g;Ve.format=function(r){if(!I0(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(ul(arguments[t]));return e.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(r).replace(h6,(function(a){if(a==="%%")return"%";if(t>=i)return a;switch(a){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return a}})),s=n[t];t<i;s=n[++t])k0(s)||!zf(s)?o+=" "+s:o+=" "+ul(s);return o},Ve.deprecate=function(r,e){if(Js!==void 0&&Js.noDeprecation===!0)return r;if(Js===void 0)return function(){return Ve.deprecate(r,e).apply(this||Tp,arguments)};var t=!1;return function(){if(!t){if(Js.throwDeprecation)throw new Error(e);Js.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this||Tp,arguments)}};E0={},FR=/^$/;Js.env.NODE_DEBUG&&(A0=Js.env.NODE_DEBUG,A0=A0.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),FR=new RegExp("^"+A0+"$","i"));Ve.debuglog=function(r){if(r=r.toUpperCase(),!E0[r])if(FR.test(r)){var e=Js.pid;E0[r]=function(){var t=Ve.format.apply(Ve,arguments);console.error("%s %d: %s",r,e,t)}}else E0[r]=function(){};return E0[r]},Ve.inspect=ul,ul.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ul.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Ve.types=kt,Ve.isArray=UR,Ve.isBoolean=x_,Ve.isNull=k0,Ve.isNullOrUndefined=function(r){return r==null},Ve.isNumber=jR,Ve.isString=I0,Ve.isSymbol=function(r){return typeof r=="symbol"},Ve.isUndefined=Iu,Ve.isRegExp=Cp,Ve.types.isRegExp=Cp,Ve.isObject=zf,Ve.isDate=O0,Ve.types.isDate=O0,Ve.isError=Rp,Ve.types.isNativeError=Rp,Ve.isFunction=S0,Ve.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},Ve.isBuffer=AR;g6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Ve.log=function(){console.log("%s - %s",m6(),Ve.format.apply(Ve,arguments))},Ve.inherits=i6,Ve._extend=function(r,e){if(!e||!zf(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};Ru=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Ve.promisify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');if(Ru&&r[Ru]){var e;if(typeof(e=r[Ru])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Ru,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var t,n,i=new Promise((function(a,u){t=a,n=u})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,u){a?n(a):t(u)}));try{r.apply(this||Tp,o)}catch(a){n(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Ru&&Object.defineProperty(e,Ru,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,mR(r))},Ve.promisify.custom=Ru,Ve.callbackify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this||Tp,s=function(){return i.apply(o,arguments)};r.apply(this||Tp,t).then((function(a){Js.nextTick(s.bind(null,null,a))}),(function(a){Js.nextTick(y6.bind(null,a,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,mR(r)),e};Ve._extend;Ve.callbackify;Ve.debuglog;Ve.deprecate;Ve.format;Ve.inherits;Ve.inspect;Ve.isArray;Ve.isBoolean;Ve.isBuffer;Ve.isDate;Ve.isError;Ve.isFunction;Ve.isNull;Ve.isNullOrUndefined;Ve.isNumber;Ve.isObject;Ve.isPrimitive;Ve.isRegExp;Ve.isString;Ve.isSymbol;Ve.isUndefined;Ve.log;Ve.promisify;Ve._extend;Ve.callbackify;Ve.debuglog;Ve.deprecate;Ve.format;Ve.inherits;Ve.inspect;Ve.isArray;Ve.isBoolean;Ve.isBuffer;Ve.isDate;Ve.isError;Ve.isFunction;Ve.isNull;Ve.isNullOrUndefined;Ve.isNumber;Ve.isObject;Ve.isPrimitive;Ve.isRegExp;Ve.isString;Ve.isSymbol;Ve.isUndefined;Ve.log;QV=Ve.promisify;Ve.types});function zR(r,e){if(r==null)throw new TypeError("Cannot convert first argument to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var u=o[s],c=Object.getOwnPropertyDescriptor(i,u);c!==void 0&&c.enumerable&&(t[u]=i[u])}}return t}function ND(){if(tD)return N_;function r(c){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function e(c,f){return!f||r(f)!=="object"&&typeof f!="function"?(function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h})(c):f}function t(c){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(c)}function n(c,f){return(n=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h})(c,f)}tD=!0;var i,o,s={};function a(c,f,h){h||(h=Error);var d=(function(g){function b(v,w,y){var _;return(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,b),(_=e(this,t(b).call(this,(function(E,S,A){return typeof f=="string"?f:f(E,S,A)})(v,w,y)))).code=c,_}return(function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),w&&n(v,w)})(b,g),b})(h);s[c]=d}function u(c,f){if(Array.isArray(c)){var h=c.length;return c=c.map((function(d){return String(d)})),h>2?"one of ".concat(f," ").concat(c.slice(0,h-1).join(", "),", or ")+c[h-1]:h===2?"one of ".concat(f," ").concat(c[0]," or ").concat(c[1]):"of ".concat(f," ").concat(c[0])}return"of ".concat(f," ").concat(String(c))}return a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",(function(c,f,h){var d,g,b;if(i===void 0&&(i=F_()),i(typeof c=="string","'name' must be a string"),typeof f=="string"&&(g="not ",f.substr(0,g.length)===g)?(d="must not be",f=f.replace(/^not /,"")):d="must be",(function(w,y,_){return(_===void 0||_>w.length)&&(_=w.length),w.substring(_-y.length,_)===y})(c," argument"))b="The ".concat(c," ").concat(d," ").concat(u(f,"type"));else{var v=(function(w,y,_){return typeof _!="number"&&(_=0),!(_+y.length>w.length)&&w.indexOf(y,_)!==-1})(c,".")?"property":"argument";b='The "'.concat(c,'" ').concat(v," ").concat(d," ").concat(u(f,"type"))}return b+=". Received type ".concat(r(h))}),TypeError),a("ERR_INVALID_ARG_VALUE",(function(c,f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";o===void 0&&(o=Ve);var d=o.inspect(f);return d.length>128&&(d="".concat(d.slice(0,128),"...")),"The argument '".concat(c,"' ").concat(h,". Received ").concat(d)}),TypeError),a("ERR_INVALID_RETURN_VALUE",(function(c,f,h){var d;return d=h&&h.constructor&&h.constructor.name?"instance of ".concat(h.constructor.name):"type ".concat(r(h)),"Expected ".concat(c,' to be returned from the "').concat(f,'"')+" function but got ".concat(d,".")}),TypeError),a("ERR_MISSING_ARGS",(function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];i===void 0&&(i=F_()),i(f.length>0,"At least one arg needs to be specified");var d="The ",g=f.length;switch(f=f.map((function(b){return'"'.concat(b,'"')})),g){case 1:d+="".concat(f[0]," argument");break;case 2:d+="".concat(f[0]," and ").concat(f[1]," arguments");break;default:d+=f.slice(0,g-1).join(", "),d+=", and ".concat(f[g-1]," arguments")}return"".concat(d," must be specified")}),TypeError),N_.codes=s,N_}function r8(){if(nD)return rD;nD=!0;var r=lr;function e(T,Z,ie){return Z in T?Object.defineProperty(T,Z,{value:ie,enumerable:!0,configurable:!0,writable:!0}):T[Z]=ie,T}function t(T,Z){for(var ie=0;ie<Z.length;ie++){var G=Z[ie];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(T,G.key,G)}}function n(T,Z){return!Z||f(Z)!=="object"&&typeof Z!="function"?i(T):Z}function i(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function o(T){var Z=typeof Map=="function"?new Map:void 0;return(o=function(ie){if(ie===null||(G=ie,Function.toString.call(G).indexOf("[native code]")===-1))return ie;var G;if(typeof ie!="function")throw new TypeError("Super expression must either be null or a function");if(Z!==void 0){if(Z.has(ie))return Z.get(ie);Z.set(ie,ae)}function ae(){return a(ie,arguments,c(this).constructor)}return ae.prototype=Object.create(ie.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),u(ae,ie)})(T)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function a(T,Z,ie){return(a=s()?Reflect.construct:function(G,ae,U){var V=[null];V.push.apply(V,ae);var ue=new(Function.bind.apply(G,V));return U&&u(ue,U.prototype),ue}).apply(null,arguments)}function u(T,Z){return(u=Object.setPrototypeOf||function(ie,G){return ie.__proto__=G,ie})(T,Z)}function c(T){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)})(T)}function f(T){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(T)}var h=Ve.inspect,d=ND().codes.ERR_INVALID_ARG_TYPE;function g(T,Z,ie){return(ie===void 0||ie>T.length)&&(ie=T.length),T.substring(ie-Z.length,ie)===Z}var b="",v="",w="",y="",_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function E(T){var Z=Object.keys(T),ie=Object.create(Object.getPrototypeOf(T));return Z.forEach((function(G){ie[G]=T[G]})),Object.defineProperty(ie,"message",{value:T.message}),ie}function S(T){return h(T,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(T,Z,ie){var G="",ae="",U=0,V="",ue=!1,Ae=S(T),ve=Ae.split(`
`),z=S(Z).split(`
`),O=0,oe="";if(ie==="strictEqual"&&f(T)==="object"&&f(Z)==="object"&&T!==null&&Z!==null&&(ie="strictEqualObject"),ve.length===1&&z.length===1&&ve[0]!==z[0]){var q=ve[0].length+z[0].length;if(q<=10){if(!(f(T)==="object"&&T!==null||f(Z)==="object"&&Z!==null||T===0&&Z===0))return"".concat(_[ie],`

`)+"".concat(ve[0]," !== ").concat(z[0],`
`)}else if(ie!=="strictEqualObject"&&q<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;ve[0][O]===z[0][O];)O++;O>2&&(oe=`
  `.concat((function(F,R){if(R=Math.floor(R),F.length==0||R==0)return"";var te=F.length*R;for(R=Math.floor(Math.log(R)/Math.log(2));R;)F+=F,R--;return F+=F.substring(0,te-F.length)})(" ",O),"^"),O=0)}}for(var M=ve[ve.length-1],H=z[z.length-1];M===H&&(O++<2?V=`
  `.concat(M).concat(V):G=M,ve.pop(),z.pop(),ve.length!==0&&z.length!==0);)M=ve[ve.length-1],H=z[z.length-1];var j=Math.max(ve.length,z.length);if(j===0){var Q=Ae.split(`
`);if(Q.length>30)for(Q[26]="".concat(b,"...").concat(y);Q.length>27;)Q.pop();return"".concat(_.notIdentical,`

`).concat(Q.join(`
`),`
`)}O>3&&(V=`
`.concat(b,"...").concat(y).concat(V),ue=!0),G!==""&&(V=`
  `.concat(G).concat(V),G="");var K=0,ee=_[ie]+`
`.concat(v,"+ actual").concat(y," ").concat(w,"- expected").concat(y),P=" ".concat(b,"...").concat(y," Lines skipped");for(O=0;O<j;O++){var I=O-U;if(ve.length<O+1)I>1&&O>2&&(I>4?(ae+=`
`.concat(b,"...").concat(y),ue=!0):I>3&&(ae+=`
  `.concat(z[O-2]),K++),ae+=`
  `.concat(z[O-1]),K++),U=O,G+=`
`.concat(w,"-").concat(y," ").concat(z[O]),K++;else if(z.length<O+1)I>1&&O>2&&(I>4?(ae+=`
`.concat(b,"...").concat(y),ue=!0):I>3&&(ae+=`
  `.concat(ve[O-2]),K++),ae+=`
  `.concat(ve[O-1]),K++),U=O,ae+=`
`.concat(v,"+").concat(y," ").concat(ve[O]),K++;else{var k=z[O],ne=ve[O],pe=ne!==k&&(!g(ne,",")||ne.slice(0,-1)!==k);pe&&g(k,",")&&k.slice(0,-1)===ne&&(pe=!1,ne+=","),pe?(I>1&&O>2&&(I>4?(ae+=`
`.concat(b,"...").concat(y),ue=!0):I>3&&(ae+=`
  `.concat(ve[O-2]),K++),ae+=`
  `.concat(ve[O-1]),K++),U=O,ae+=`
`.concat(v,"+").concat(y," ").concat(ne),G+=`
`.concat(w,"-").concat(y," ").concat(k),K+=2):(ae+=G,G="",I!==1&&O!==0||(ae+=`
  `.concat(ne),K++))}if(K>20&&O<j-2)return"".concat(ee).concat(P,`
`).concat(ae,`
`).concat(b,"...").concat(y).concat(G,`
`)+"".concat(b,"...").concat(y)}return"".concat(ee).concat(ue?P:"",`
`).concat(ae).concat(G).concat(V).concat(oe)}var B=(function(T){function Z(ae){var U;if((function(Q,K){if(!(Q instanceof K))throw new TypeError("Cannot call a class as a function")})(this,Z),f(ae)!=="object"||ae===null)throw new d("options","Object",ae);var V=ae.message,ue=ae.operator,Ae=ae.stackStartFn,ve=ae.actual,z=ae.expected,O=Error.stackTraceLimit;if(Error.stackTraceLimit=0,V!=null)U=n(this,c(Z).call(this,String(V)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&r.stderr.getColorDepth()!==1?(b="\x1B[34m",v="\x1B[32m",y="\x1B[39m",w="\x1B[31m"):(b="",v="",y="",w="")),f(ve)==="object"&&ve!==null&&f(z)==="object"&&z!==null&&"stack"in ve&&ve instanceof Error&&"stack"in z&&z instanceof Error&&(ve=E(ve),z=E(z)),ue==="deepStrictEqual"||ue==="strictEqual")U=n(this,c(Z).call(this,A(ve,z,ue)));else if(ue==="notDeepStrictEqual"||ue==="notStrictEqual"){var oe=_[ue],q=S(ve).split(`
`);if(ue==="notStrictEqual"&&f(ve)==="object"&&ve!==null&&(oe=_.notStrictEqualObject),q.length>30)for(q[26]="".concat(b,"...").concat(y);q.length>27;)q.pop();U=q.length===1?n(this,c(Z).call(this,"".concat(oe," ").concat(q[0]))):n(this,c(Z).call(this,"".concat(oe,`

`).concat(q.join(`
`),`
`)))}else{var M=S(ve),H="",j=_[ue];ue==="notDeepEqual"||ue==="notEqual"?(M="".concat(_[ue],`

`).concat(M)).length>1024&&(M="".concat(M.slice(0,1021),"...")):(H="".concat(S(z)),M.length>512&&(M="".concat(M.slice(0,509),"...")),H.length>512&&(H="".concat(H.slice(0,509),"...")),ue==="deepEqual"||ue==="equal"?M="".concat(j,`

`).concat(M,`

should equal

`):H=" ".concat(ue," ").concat(H)),U=n(this,c(Z).call(this,"".concat(M).concat(H)))}return Error.stackTraceLimit=O,U.generatedMessage=!V,Object.defineProperty(i(U),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),U.code="ERR_ASSERTION",U.actual=ve,U.expected=z,U.operator=ue,Error.captureStackTrace&&Error.captureStackTrace(i(U),Ae),U.stack,U.name="AssertionError",n(U)}var ie,G;return(function(ae,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(U&&U.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),U&&u(ae,U)})(Z,T),ie=Z,(G=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(ae,U){return h(this,(function(V){for(var ue=1;ue<arguments.length;ue++){var Ae=arguments[ue]!=null?arguments[ue]:{},ve=Object.keys(Ae);typeof Object.getOwnPropertySymbols=="function"&&(ve=ve.concat(Object.getOwnPropertySymbols(Ae).filter((function(z){return Object.getOwnPropertyDescriptor(Ae,z).enumerable})))),ve.forEach((function(z){e(V,z,Ae[z])}))}return V})({},U,{customInspect:!1,depth:0}))}}])&&t(ie.prototype,G),Z})(o(Error));return rD=B}function iD(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(i.push(u.value),!n||i.length!==n);o=!0);}catch(f){s=!0,a=f}finally{try{o||c.return==null||c.return()}finally{if(s)throw a}}return i})(r,e)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function Ts(r){return(Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function $_(r){return r.call.bind(r)}function f8(r){if(r.length===0||r.length>10)return!0;for(var e=0;e<r.length;e++){var t=r.charCodeAt(e);if(t<48||t>57)return!0}return r.length===10&&r>=Math.pow(2,32)}function M0(r){return Object.keys(r).filter(f8).concat(U0(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function pD(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}function ts(r,e,t,n){if(r===e)return r!==0||!t||oD(r,e);if(t){if(Ts(r)!=="object")return typeof r=="number"&&M_(r)&&M_(e);if(Ts(e)!=="object"||r===null||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1}else{if(r===null||Ts(r)!=="object")return(e===null||Ts(e)!=="object")&&r==e;if(e===null||Ts(e)!=="object")return!1}var i,o,s,a,u=aD(r);if(u!==aD(e))return!1;if(Array.isArray(r)){if(r.length!==e.length)return!1;var c=M0(r),f=M0(e);return c.length===f.length&&Np(r,e,t,n,1,c)}if(u==="[object Object]"&&(!P0(r)&&P0(e)||!B0(r)&&B0(e)))return!1;if(lD(r)){if(!lD(e)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(e))return!1}else if(uD(r)){if(!uD(e)||(s=r,a=e,!(n8?s.source===a.source&&s.flags===a.flags:RegExp.prototype.toString.call(s)===RegExp.prototype.toString.call(a))))return!1}else if(o8(r)||r instanceof Error){if(r.message!==e.message||r.name!==e.name)return!1}else{if(s8(r)){if(t||!u8(r)&&!c8(r)){if(!(function(g,b){return g.byteLength===b.byteLength&&pD(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),new Uint8Array(b.buffer,b.byteOffset,b.byteLength))===0})(r,e))return!1}else if(!(function(g,b){if(g.byteLength!==b.byteLength)return!1;for(var v=0;v<g.byteLength;v++)if(g[v]!==b[v])return!1;return!0})(r,e))return!1;var h=M0(r),d=M0(e);return h.length===d.length&&Np(r,e,t,n,0,h)}if(B0(r))return!(!B0(e)||r.size!==e.size)&&Np(r,e,t,n,2);if(P0(r))return!(!P0(e)||r.size!==e.size)&&Np(r,e,t,n,3);if(i8(r)){if(o=e,(i=r).byteLength!==o.byteLength||pD(new Uint8Array(i),new Uint8Array(o))!==0)return!1}else if(a8(r)&&!(function(g,b){return cD(g)?cD(b)&&oD(Number.prototype.valueOf.call(g),Number.prototype.valueOf.call(b)):fD(g)?fD(b)&&String.prototype.valueOf.call(g)===String.prototype.valueOf.call(b):hD(g)?hD(b)&&Boolean.prototype.valueOf.call(g)===Boolean.prototype.valueOf.call(b):dD(g)?dD(b)&&BigInt.prototype.valueOf.call(g)===BigInt.prototype.valueOf.call(b):l8(b)&&Symbol.prototype.valueOf.call(g)===Symbol.prototype.valueOf.call(b)})(r,e))return!1}return Np(r,e,t,n,0)}function gD(r,e){return e.filter((function(t){return j0(r,t)}))}function Np(r,e,t,n,i,o){if(arguments.length===5){o=Object.keys(r);var s=Object.keys(e);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!kp(e,o[a]))return!1;if(t&&arguments.length===5){var u=U0(r);if(u.length!==0){var c=0;for(a=0;a<u.length;a++){var f=u[a];if(j0(r,f)){if(!j0(e,f))return!1;o.push(f),c++}else if(j0(e,f))return!1}var h=U0(e);if(u.length!==h.length&&gD(e,h).length!==c)return!1}else{var d=U0(e);if(d.length!==0&&gD(e,d).length!==0)return!1}}if(o.length===0&&(i===0||i===1&&r.length===0||r.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var g=n.val1.get(r);if(g!==void 0){var b=n.val2.get(e);if(b!==void 0)return g===b}n.position++}n.val1.set(r,n.position),n.val2.set(e,n.position);var v=p8(r,e,t,o,n,i);return n.val1.delete(r),n.val2.delete(e),v}function mD(r,e,t,n){for(var i=$0(r),o=0;o<i.length;o++){var s=i[o];if(ts(e,s,t,n))return r.delete(s),!0}return!1}function kD(r){switch(Ts(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(M_(r))return!1}return!0}function h8(r,e,t){var n=kD(t);return n??(e.has(n)&&!r.has(n))}function d8(r,e,t,n,i){var o=kD(t);if(o!=null)return o;var s=e.get(o);return!(s===void 0&&!e.has(o)||!ts(n,s,!1,i))&&!r.has(o)&&ts(n,s,!1,i)}function yD(r,e,t,n,i,o){for(var s=$0(r),a=0;a<s.length;a++){var u=s[a];if(ts(t,u,i,o)&&ts(n,e.get(u),i,o))return r.delete(u),!0}return!1}function p8(r,e,t,n,i,o){var s=0;if(o===2){if(!(function(f,h,d,g){for(var b=null,v=$0(f),w=0;w<v.length;w++){var y=v[w];if(Ts(y)==="object"&&y!==null)b===null&&(b=new Set),b.add(y);else if(!h.has(y)){if(d||!h8(f,h,y))return!1;b===null&&(b=new Set),b.add(y)}}if(b!==null){for(var _=$0(h),E=0;E<_.length;E++){var S=_[E];if(Ts(S)==="object"&&S!==null){if(!mD(b,S,d,g))return!1}else if(!d&&!f.has(S)&&!mD(b,S,d,g))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===3){if(!(function(f,h,d,g){for(var b=null,v=sD(f),w=0;w<v.length;w++){var y=iD(v[w],2),_=y[0],E=y[1];if(Ts(_)==="object"&&_!==null)b===null&&(b=new Set),b.add(_);else{var S=h.get(_);if(S===void 0&&!h.has(_)||!ts(E,S,d,g)){if(d||!d8(f,h,_,E,g))return!1;b===null&&(b=new Set),b.add(_)}}}if(b!==null){for(var A=sD(h),B=0;B<A.length;B++){var T=iD(A[B],2),Z=(_=T[0],T[1]);if(Ts(_)==="object"&&_!==null){if(!yD(b,f,_,Z,d,g))return!1}else if(!(d||f.has(_)&&ts(f.get(_),Z,!1,g)||yD(b,f,_,Z,!1,g)))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===1)for(;s<r.length;s++){if(!kp(r,s)){if(kp(e,s))return!1;for(var a=Object.keys(r);s<a.length;s++){var u=a[s];if(!kp(e,u)||!ts(r[u],e[u],t,i))return!1}return a.length===Object.keys(e).length}if(!kp(e,s)||!ts(r[s],e[s],t,i))return!1}for(s=0;s<n.length;s++){var c=n[s];if(!ts(r[c],e[c],t,i))return!1}return!0}function F_(){if(wD)return k_;wD=!0;var r=lr;function e(z){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(z)}var t,n,i=ND().codes,o=i.ERR_AMBIGUOUS_ARGUMENT,s=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,u=i.ERR_INVALID_RETURN_VALUE,c=i.ERR_MISSING_ARGS,f=r8(),h=Ve.inspect,d=Ve.types,g=d.isPromise,b=d.isRegExp,v=Object.assign?Object.assign:b6.assign,w=Object.is?Object.is:DD;function y(){t=bD.isDeepEqual,n=bD.isDeepStrictEqual}var _=!1,E=k_=T,S={};function A(z){throw z.message instanceof Error?z.message:new f(z)}function B(z,O,oe,q){if(!oe){var M=!1;if(O===0)M=!0,q="No value argument passed to `assert.ok()`";else if(q instanceof Error)throw q;var H=new f({actual:oe,expected:!0,message:q,operator:"==",stackStartFn:z});throw H.generatedMessage=M,H}}function T(){for(var z=arguments.length,O=new Array(z),oe=0;oe<z;oe++)O[oe]=arguments[oe];B.apply(void 0,[T,O.length].concat(O))}E.fail=function z(O,oe,q,M,H){var j,Q=arguments.length;if(Q===0)j="Failed";else if(Q===1)q=O,O=void 0;else{if(_===!1){_=!0;var K=r.emitWarning?r.emitWarning:console.warn.bind(console);K("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}Q===2&&(M="!=")}if(q instanceof Error)throw q;var ee={actual:O,expected:oe,operator:M===void 0?"fail":M,stackStartFn:H||z};q!==void 0&&(ee.message=q);var P=new f(ee);throw j&&(P.message=j,P.generatedMessage=!0),P},E.AssertionError=f,E.ok=T,E.equal=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");O!=oe&&A({actual:O,expected:oe,message:q,operator:"==",stackStartFn:z})},E.notEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");O==oe&&A({actual:O,expected:oe,message:q,operator:"!=",stackStartFn:z})},E.deepEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(O,oe)||A({actual:O,expected:oe,message:q,operator:"deepEqual",stackStartFn:z})},E.notDeepEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(O,oe)&&A({actual:O,expected:oe,message:q,operator:"notDeepEqual",stackStartFn:z})},E.deepStrictEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(O,oe)||A({actual:O,expected:oe,message:q,operator:"deepStrictEqual",stackStartFn:z})},E.notDeepStrictEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(O,oe)&&A({actual:O,expected:oe,message:q,operator:"notDeepStrictEqual",stackStartFn:z})},E.strictEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");w(O,oe)||A({actual:O,expected:oe,message:q,operator:"strictEqual",stackStartFn:z})},E.notStrictEqual=function z(O,oe,q){if(arguments.length<2)throw new c("actual","expected");w(O,oe)&&A({actual:O,expected:oe,message:q,operator:"notStrictEqual",stackStartFn:z})};var Z=function z(O,oe,q){var M=this;(function(H,j){if(!(H instanceof j))throw new TypeError("Cannot call a class as a function")})(this,z),oe.forEach((function(H){H in O&&(q!==void 0&&typeof q[H]=="string"&&b(O[H])&&O[H].test(q[H])?M[H]=q[H]:M[H]=O[H])}))};function ie(z,O,oe,q,M,H){if(!(oe in z)||!n(z[oe],O[oe])){if(!q){var j=new Z(z,M),Q=new Z(O,M,z),K=new f({actual:j,expected:Q,operator:"deepStrictEqual",stackStartFn:H});throw K.actual=z,K.expected=O,K.operator=H.name,K}A({actual:z,expected:O,message:q,operator:H.name,stackStartFn:H})}}function G(z,O,oe,q){if(typeof O!="function"){if(b(O))return O.test(z);if(arguments.length===2)throw new s("expected",["Function","RegExp"],O);if(e(z)!=="object"||z===null){var M=new f({actual:z,expected:O,message:oe,operator:"deepStrictEqual",stackStartFn:q});throw M.operator=q.name,M}var H=Object.keys(O);if(O instanceof Error)H.push("name","message");else if(H.length===0)throw new a("error",O,"may not be an empty object");return t===void 0&&y(),H.forEach((function(j){typeof z[j]=="string"&&b(O[j])&&O[j].test(z[j])||ie(z,O,j,oe,H,q)})),!0}return O.prototype!==void 0&&z instanceof O||!Error.isPrototypeOf(O)&&O.call({},z)===!0}function ae(z){if(typeof z!="function")throw new s("fn","Function",z);try{z()}catch(O){return O}return S}function U(z){return g(z)||z!==null&&e(z)==="object"&&typeof z.then=="function"&&typeof z.catch=="function"}function V(z){return Promise.resolve().then((function(){var O;if(typeof z=="function"){if(!U(O=z()))throw new u("instance of Promise","promiseFn",O)}else{if(!U(z))throw new s("promiseFn",["Function","Promise"],z);O=z}return Promise.resolve().then((function(){return O})).then((function(){return S})).catch((function(oe){return oe}))}))}function ue(z,O,oe,q){if(typeof oe=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],oe);if(e(O)==="object"&&O!==null){if(O.message===oe)throw new o("error/message",'The error message "'.concat(O.message,'" is identical to the message.'))}else if(O===oe)throw new o("error/message",'The error "'.concat(O,'" is identical to the message.'));q=oe,oe=void 0}else if(oe!=null&&e(oe)!=="object"&&typeof oe!="function")throw new s("error",["Object","Error","Function","RegExp"],oe);if(O===S){var M="";oe&&oe.name&&(M+=" (".concat(oe.name,")")),M+=q?": ".concat(q):".";var H=z.name==="rejects"?"rejection":"exception";A({actual:void 0,expected:oe,operator:z.name,message:"Missing expected ".concat(H).concat(M),stackStartFn:z})}if(oe&&!G(O,oe,q,z))throw O}function Ae(z,O,oe,q){if(O!==S){if(typeof oe=="string"&&(q=oe,oe=void 0),!oe||G(O,oe)){var M=q?": ".concat(q):".",H=z.name==="doesNotReject"?"rejection":"exception";A({actual:O,expected:oe,operator:z.name,message:"Got unwanted ".concat(H).concat(M,`
`)+'Actual message: "'.concat(O&&O.message,'"'),stackStartFn:z})}throw O}}function ve(){for(var z=arguments.length,O=new Array(z),oe=0;oe<z;oe++)O[oe]=arguments[oe];B.apply(void 0,[ve,O.length].concat(O))}return E.throws=function z(O){for(var oe=arguments.length,q=new Array(oe>1?oe-1:0),M=1;M<oe;M++)q[M-1]=arguments[M];ue.apply(void 0,[z,ae(O)].concat(q))},E.rejects=function z(O){for(var oe=arguments.length,q=new Array(oe>1?oe-1:0),M=1;M<oe;M++)q[M-1]=arguments[M];return V(O).then((function(H){return ue.apply(void 0,[z,H].concat(q))}))},E.doesNotThrow=function z(O){for(var oe=arguments.length,q=new Array(oe>1?oe-1:0),M=1;M<oe;M++)q[M-1]=arguments[M];Ae.apply(void 0,[z,ae(O)].concat(q))},E.doesNotReject=function z(O){for(var oe=arguments.length,q=new Array(oe>1?oe-1:0),M=1;M<oe;M++)q[M-1]=arguments[M];return V(O).then((function(H){return Ae.apply(void 0,[z,H].concat(q))}))},E.ifError=function z(O){if(O!=null){var oe="ifError got unwanted exception: ";e(O)==="object"&&typeof O.message=="string"?O.message.length===0&&O.constructor?oe+=O.constructor.name:oe+=O.message:oe+=h(O);var q=new f({actual:O,expected:null,operator:"ifError",message:oe,stackStartFn:z}),M=O.stack;if(typeof M=="string"){var H=M.split(`
`);H.shift();for(var j=q.stack.split(`
`),Q=0;Q<H.length;Q++){var K=j.indexOf(H[Q]);if(K!==-1){j=j.slice(0,K);break}}q.stack="".concat(j.join(`
`),`
`).concat(H.join(`
`))}throw q}},E.strict=v(ve,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict,k_}var b6,vD,WR,_D,Ip,T_,qR,C_,HR,GR,Op,L0,VR,YR,w6,v6,_6,XR,F0,KR,E6,A6,x6,S6,T6,L_,ED,C6,AD,z0,R6,ZR,D6,I6,O6,R_,N6,k6,xD,Lp,Lu,D_,L6,Nu,ku,I_,O_,JR,P6,B6,M6,F6,U6,SD,QR,TD,j6,$6,z6,P_,B_,eD,W6,q6,H6,G6,V6,CD,Y6,RD,DD,U_,j_,X6,K6,Z6,J6,Q6,ID,e8,OD,t8,N_,tD,rD,nD,n8,$0,sD,oD,U0,M_,kp,j0,aD,Hn,i8,s8,lD,P0,uD,B0,o8,a8,cD,fD,hD,dD,l8,u8,c8,bD,k_,wD,pt,z_=Jt(()=>{Ne();Le();ke();cl();b6={assign:zR,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:zR})}},WR=Object.prototype.toString,_D=function(r){var e=WR.call(r),t=e==="[object Arguments]";return t||(t=e!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&WR.call(r.callee)==="[object Function]"),t};Object.keys||(Ip=Object.prototype.hasOwnProperty,T_=Object.prototype.toString,qR=_D,C_=Object.prototype.propertyIsEnumerable,HR=!C_.call({toString:null},"toString"),GR=C_.call((function(){}),"prototype"),Op=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L0=function(r){var e=r.constructor;return e&&e.prototype===r},VR={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},YR=(function(){if(typeof window>"u")return!1;for(var r in window)try{if(!VR["$"+r]&&Ip.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{L0(window[r])}catch{return!0}}catch{return!0}return!1})(),vD=function(r){var e=r!==null&&typeof r=="object",t=T_.call(r)==="[object Function]",n=qR(r),i=e&&T_.call(r)==="[object String]",o=[];if(!e&&!t&&!n)throw new TypeError("Object.keys called on a non-object");var s=GR&&t;if(i&&r.length>0&&!Ip.call(r,0))for(var a=0;a<r.length;++a)o.push(String(a));if(n&&r.length>0)for(var u=0;u<r.length;++u)o.push(String(u));else for(var c in r)s&&c==="prototype"||!Ip.call(r,c)||o.push(String(c));if(HR)for(var f=(function(d){if(typeof window>"u"||!YR)return L0(d);try{return L0(d)}catch{return!1}})(r),h=0;h<Op.length;++h)f&&Op[h]==="constructor"||!Ip.call(r,Op[h])||o.push(Op[h]);return o});w6=vD,v6=Array.prototype.slice,_6=_D,XR=Object.keys,F0=XR?function(r){return XR(r)}:w6,KR=Object.keys;F0.shim=function(){return Object.keys?(function(){var r=Object.keys(arguments);return r&&r.length===arguments.length})(1,2)||(Object.keys=function(r){return _6(r)?KR(v6.call(r)):KR(r)}):Object.keys=F0,Object.keys||F0};E6=F0,A6=E6,x6=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",S6=Object.prototype.toString,T6=Array.prototype.concat,L_=Object.defineProperty,ED=L_&&(function(){var r={};try{for(var e in L_(r,"x",{enumerable:!1,value:r}),r)return!1;return r.x===r}catch{return!1}})(),C6=function(r,e,t,n){var i;(!(e in r)||typeof(i=n)=="function"&&S6.call(i)==="[object Function]"&&n())&&(ED?L_(r,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[e]=t)},AD=function(r,e){var t=arguments.length>2?arguments[2]:{},n=A6(e);x6&&(n=T6.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)C6(r,n[i],e[n[i]],t[n[i]])};AD.supportsDescriptors=!!ED;z0=AD,R6=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;for(e in r[e]=42,r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var n=Object.getOwnPropertySymbols(r);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(r,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0},ZR=(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window).Symbol,D6=R6,I6=function(){return typeof ZR=="function"&&typeof Symbol=="function"&&typeof ZR("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&D6()},O6="Function.prototype.bind called on incompatible ",R_=Array.prototype.slice,N6=Object.prototype.toString,k6=function(r){var e=this;if(typeof e!="function"||N6.call(e)!=="[object Function]")throw new TypeError(O6+e);for(var t,n=R_.call(arguments,1),i=function(){if(this instanceof t){var c=e.apply(this,n.concat(R_.call(arguments)));return Object(c)===c?c:this}return e.apply(r,n.concat(R_.call(arguments)))},o=Math.max(0,e.length-n.length),s=[],a=0;a<o;a++)s.push("$"+a);if(t=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,t.prototype=new u,u.prototype=null}return t},xD=Function.prototype.bind||k6,Lp=TypeError,Lu=Object.getOwnPropertyDescriptor;if(Lu)try{Lu({},"")}catch{Lu=null}D_=function(){throw new Lp},L6=Lu?(function(){try{return arguments.callee,D_}catch{try{return Lu(arguments,"callee").get}catch{return D_}}})():D_,Nu=I6(),ku=Object.getPrototypeOf||function(r){return r.__proto__},I_=typeof Uint8Array>"u"?void 0:ku(Uint8Array),O_={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Nu?ku([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?void 0:DataView,"%DataViewPrototype%":typeof DataView>"u"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Nu?ku(ku([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%JSONParse%":typeof JSON=="object"?JSON.parse:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Nu?ku(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map>"u"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%PromisePrototype%":typeof Promise>"u"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?void 0:Promise.all,"%Promise_reject%":typeof Promise>"u"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?void 0:Promise.resolve,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Nu?ku(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set>"u"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Nu?ku(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Nu?Symbol:void 0,"%SymbolPrototype%":Nu?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":L6,"%TypedArray%":I_,"%TypedArrayPrototype%":I_?I_.prototype:void 0,"%TypeError%":Lp,"%TypeErrorPrototype%":Lp.prototype,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?void 0:WeakSet.prototype},JR=xD.call(Function.call,String.prototype.replace),P6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B6=/\\(\\)?/g,M6=function(r){var e=[];return JR(r,P6,(function(t,n,i,o){e[e.length]=i?JR(o,B6,"$1"):n||t})),e},F6=function(r,e){if(!(r in O_))throw new SyntaxError("intrinsic "+r+" does not exist!");if(O_[r]===void 0&&!e)throw new Lp("intrinsic "+r+" exists, but is not available. Please file an issue!");return O_[r]},U6=function(r,e){if(r.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var t=M6(r),n=F6("%"+(t.length>0?t[0]:"")+"%",e),i=1;i<t.length;i+=1)if(n!=null)if(Lu&&i+1>=t.length){var o=Lu(n,t[i]);if(!(t[i]in n))throw new Lp("base intrinsic for "+r+" exists, but the property is not available.");n=o?o.get||o.value:n[t[i]]}else n=n[t[i]];return n},QR=xD,TD=U6("%Function%"),j6=TD.apply,$6=TD.call;(SD=function(){return QR.apply($6,arguments)}).apply=function(){return QR.apply(j6,arguments)};z6=SD,eD=function(r){return r!=r},W6=(P_=function(r,e){return r===0&&e===0?1/r==1/e:r===e||!(!eD(r)||!eD(e))},P_),q6=(B_=function(){return typeof Object.is=="function"?Object.is:W6},B_),H6=z0,G6=z0,V6=P_,CD=B_,Y6=function(){var r=q6();return H6(Object,{is:r},{is:function(){return Object.is!==r}}),r},RD=z6(CD(),Object);G6(RD,{getPolyfill:CD,implementation:V6,shim:Y6});DD=RD;U_=function(r){return r!=r};X6=U_,K6=(j_=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:X6},z0),Z6=j_,J6=z0,Q6=U_,ID=j_,e8=function(){var r=Z6();return K6(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},OD=ID();J6(OD,{getPolyfill:ID,implementation:Q6,shim:e8});t8=OD,N_={},tD=!1;rD={},nD=!1;n8=/a/g.flags!==void 0,$0=function(r){var e=[];return r.forEach((function(t){return e.push(t)})),e},sD=function(r){var e=[];return r.forEach((function(t,n){return e.push([n,t])})),e},oD=Object.is?Object.is:DD,U0=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},M_=Number.isNaN?Number.isNaN:t8;kp=$_(Object.prototype.hasOwnProperty),j0=$_(Object.prototype.propertyIsEnumerable),aD=$_(Object.prototype.toString),Hn=Ve.types,i8=Hn.isAnyArrayBuffer,s8=Hn.isArrayBufferView,lD=Hn.isDate,P0=Hn.isMap,uD=Hn.isRegExp,B0=Hn.isSet,o8=Hn.isNativeError,a8=Hn.isBoxedPrimitive,cD=Hn.isNumberObject,fD=Hn.isStringObject,hD=Hn.isBooleanObject,dD=Hn.isBigIntObject,l8=Hn.isSymbolObject,u8=Hn.isFloat32Array,c8=Hn.isFloat64Array;bD={isDeepEqual:function(r,e){return ts(r,e,!1)},isDeepStrictEqual:function(r,e){return ts(r,e,!0)}},k_={},wD=!1;pt=F_();pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws});var W_,W0=Jt(()=>{Ne();Le();ke();cl();Ve._extend;Ve.callbackify;Ve.debuglog;Ve.deprecate;Ve.format;Ve.inherits;Ve.inspect;Ve.isArray;Ve.isBoolean;Ve.isBuffer;Ve.isDate;Ve.isError;Ve.isFunction;Ve.isNull;Ve.isNullOrUndefined;Ve.isNumber;Ve.isObject;Ve.isPrimitive;Ve.isRegExp;Ve.isString;Ve.isSymbol;Ve.isUndefined;Ve.log;W_=Ve.promisify;Ve.types;Ve.TextEncoder=globalThis.TextEncoder;Ve.TextDecoder=globalThis.TextDecoder});function g8(){if(LD)return q_;LD=!0;var r=q_={},e,t;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=i}catch{t=i}})();function o(v){if(e===setTimeout)return setTimeout(v,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(v,0);try{return e(v,0)}catch{try{return e.call(null,v,0)}catch{return e.call(this||Wf,v,0)}}}function s(v){if(t===clearTimeout)return clearTimeout(v);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(v);try{return t(v)}catch{try{return t.call(null,v)}catch{return t.call(this||Wf,v)}}}var a=[],u=!1,c,f=-1;function h(){!u||!c||(u=!1,c.length?a=c.concat(a):f=-1,a.length&&d())}function d(){if(!u){var v=o(h);u=!0;for(var w=a.length;w;){for(c=a,a=[];++f<w;)c&&c[f].run();f=-1,w=a.length}c=null,u=!1,s(v)}}r.nextTick=function(v){var w=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)w[y-1]=arguments[y];a.push(new g(v,w)),a.length===1&&!u&&o(d)};function g(v,w){(this||Wf).fun=v,(this||Wf).array=w}g.prototype.run=function(){(this||Wf).fun.apply(null,(this||Wf).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(v){return[]},r.binding=function(v){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(v){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},q_}var q_,LD,Wf,Gt,qf=Jt(()=>{Ne();Le();ke();q_={},LD=!1,Wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Gt=g8();Gt.platform="browser";Gt.addListener;Gt.argv;Gt.binding;Gt.browser;Gt.chdir;Gt.cwd;Gt.emit;Gt.env;Gt.listeners;Gt.nextTick;Gt.off;Gt.on;Gt.once;Gt.prependListener;Gt.prependOnceListener;Gt.removeAllListeners;Gt.removeListener;Gt.title;Gt.umask;Gt.version;Gt.versions});function m8(){if(PD)return H_;PD=!0;var r=Gt;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",u=0):(a=a.slice(0,g),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,g=d-h,b=f<g?f:g,v=-1,w=0;w<=b;++w){if(w===b){if(g>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,g=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else g===-1&&(f=!1,g=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=g))}return u===c?c=g:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var g=s.charCodeAt(d);if(g===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),g===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,g=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}g===-1&&(b=!1,g=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||g===-1||w===0||w===1&&h===g-1&&h===d+1?g!==-1&&(d===0&&c?a.base=a.name=s.slice(1,g):a.base=a.name=s.slice(d,g)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,g)):(a.name=s.slice(d,h),a.base=s.slice(d,g)),a.ext=s.slice(h,g)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,H_=i,H_}function Pu(r){throw new RangeError(v8[r])}function BD(r,e){let t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]);let i=(function(o,s){let a=[],u=o.length;for(;u--;)a[u]=s(o[u]);return a})((r=r.replace(w8,".")).split("."),e).join(".");return n+i}function HD(r){let e=[],t=0,n=r.length;for(;t<n;){let i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){let o=r.charCodeAt(t++);(64512&o)==56320?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),t--)}else e.push(i)}return e}function E8(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function rs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Bp(r,e,t){if(r&&Qs.isObject(r)&&r instanceof rs)return r;var n=new rs;return n.parse(r,e,t),n}function N8(){if(WD)return X_;WD=!0;var r=lr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",u=0):(a=a.slice(0,g),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,g=d-h,b=f<g?f:g,v=-1,w=0;w<=b;++w){if(w===b){if(g>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,g=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else g===-1&&(f=!1,g=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=g))}return u===c?c=g:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var g=s.charCodeAt(d);if(g===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),g===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,g=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}g===-1&&(b=!1,g=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||g===-1||w===0||w===1&&h===g-1&&h===d+1?g!==-1&&(d===0&&c?a.base=a.name=s.slice(1,g):a.base=a.name=s.slice(d,g)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,g)):(a.name=s.slice(d,h),a.base=s.slice(d,g)),a.ext=s.slice(h,g)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,X_=i,X_}function q8(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Z_?H8(r):G8(r)}function H8(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(F8,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<B8||n>M8||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function G8(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function V8(r){let e=qD.resolve(r),t=r.charCodeAt(r.length-1);(t===P8||Z_&&t===L8)&&e[e.length-1]!==qD.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(U8,"%25")),!Z_&&e.includes("\\")&&(e=e.replace(j8,"%5C")),e.includes(`
`)&&(e=e.replace($8,"%0A")),e.includes("\r")&&(e=e.replace(z8,"%0D")),e.includes("	")&&(e=e.replace(W8,"%09")),n.pathname=e,n}function s4(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return J_?o4(r):a4(r)}function o4(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Q8,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<Z8||n>J8||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function a4(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function l4(r){let e=rn.resolve(r),t=r.charCodeAt(r.length-1);(t===K8||J_&&t===X8)&&e[e.length-1]!==rn.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(e4,"%25")),!J_&&e.includes("\\")&&(e=e.replace(t4,"%5C")),e.includes(`
`)&&(e=e.replace(r4,"%0A")),e.includes("\r")&&(e=e.replace(n4,"%0D")),e.includes("	")&&(e=e.replace(i4,"%09")),n.pathname=e,n}var H_,PD,rn,Gf,y8,b8,w8,v8,eo,G_,MD,GD,FD,UD,_8,A8,Pp,x8,Go,Qt,S8,Qs,T8,C8,R8,D8,K_,jD,$D,zD,I8,O8,V_,Hf,Y_,X_,WD,qD,k8,L8,P8,B8,M8,Z_,F8,U8,j8,$8,z8,W8,Y8,X8,K8,Z8,J8,J_,Q8,e4,t4,r4,n4,i4,VD=Jt(()=>{Ne();Le();ke();cl();qf();H_={},PD=!1;rn=m8(),Gf=2147483647,y8=/^xn--/,b8=/[^\0-\x7E]/,w8=/[\x2E\u3002\uFF0E\uFF61]/g,v8={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},eo=Math.floor,G_=String.fromCharCode;MD=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},GD=function(r,e,t){let n=0;for(r=t?eo(r/700):r>>1,r+=eo(r/e);r>455;n+=36)r=eo(r/35);return eo(n+36*r/(r+38))},FD=function(r){let e=[],t=r.length,n=0,i=128,o=72,s=r.lastIndexOf("-");s<0&&(s=0);for(let u=0;u<s;++u)r.charCodeAt(u)>=128&&Pu("not-basic"),e.push(r.charCodeAt(u));for(let u=s>0?s+1:0;u<t;){let c=n;for(let h=1,d=36;;d+=36){u>=t&&Pu("invalid-input");let g=(a=r.charCodeAt(u++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(g>=36||g>eo((Gf-n)/h))&&Pu("overflow"),n+=g*h;let b=d<=o?1:d>=o+26?26:d-o;if(g<b)break;let v=36-b;h>eo(Gf/v)&&Pu("overflow"),h*=v}let f=e.length+1;o=GD(n-c,f,c==0),eo(n/f)>Gf-i&&Pu("overflow"),i+=eo(n/f),n%=f,e.splice(n++,0,i)}var a;return String.fromCodePoint(...e)},UD=function(r){let e=[],t=(r=HD(r)).length,n=128,i=0,o=72;for(let u of r)u<128&&e.push(G_(u));let s=e.length,a=s;for(s&&e.push("-");a<t;){let u=Gf;for(let f of r)f>=n&&f<u&&(u=f);let c=a+1;u-n>eo((Gf-i)/c)&&Pu("overflow"),i+=(u-n)*c,n=u;for(let f of r)if(f<n&&++i>Gf&&Pu("overflow"),f==n){let h=i;for(let d=36;;d+=36){let g=d<=o?1:d>=o+26?26:d-o;if(h<g)break;let b=h-g,v=36-g;e.push(G_(MD(g+b%v,0))),h=eo(b/v)}e.push(G_(MD(h,0))),o=GD(i,c,a==s),i=0,++a}++i,++n}return e.join("")},_8={version:"2.1.0",ucs2:{decode:HD,encode:r=>String.fromCodePoint(...r)},decode:FD,encode:UD,toASCII:function(r){return BD(r,(function(e){return b8.test(e)?"xn--"+UD(e):e}))},toUnicode:function(r){return BD(r,(function(e){return y8.test(e)?FD(e.slice(4).toLowerCase()):e}))}};A8=function(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,f,h,d,g=r[u].replace(o,"%20"),b=g.indexOf(t);b>=0?(c=g.substr(0,b),f=g.substr(b+1)):(c=g,f=""),h=decodeURIComponent(c),d=decodeURIComponent(f),E8(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},Pp=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},x8=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map((function(i){var o=encodeURIComponent(Pp(i))+t;return Array.isArray(r[i])?r[i].map((function(s){return o+encodeURIComponent(Pp(s))})).join(e):o+encodeURIComponent(Pp(r[i]))})).join(e):n?encodeURIComponent(Pp(n))+t+encodeURIComponent(Pp(r)):""},Go={};Go.decode=Go.parse=A8,Go.encode=Go.stringify=x8;Go.decode;Go.encode;Go.parse;Go.stringify;Qt={},S8=_8,Qs={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}};Qt.parse=Bp,Qt.resolve=function(r,e){return Bp(r,!1,!0).resolve(e)},Qt.resolveObject=function(r,e){return r?Bp(r,!1,!0).resolveObject(e):e},Qt.format=function(r){return Qs.isString(r)&&(r=Bp(r)),r instanceof rs?r.format():rs.prototype.format.call(r)},Qt.Url=rs;T8=/^([a-z0-9.+-]+:)/i,C8=/:[0-9]*$/,R8=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,D8=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),K_=["'"].concat(D8),jD=["%","/","?",";","#"].concat(K_),$D=["/","?","#"],zD=/^[+a-z0-9A-Z_-]{0,63}$/,I8=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O8={javascript:!0,"javascript:":!0},V_={javascript:!0,"javascript:":!0},Hf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Y_=Go;rs.prototype.parse=function(r,e,t){if(!Qs.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(i);o[0]=o[0].replace(/\\/g,"/");var s=r=o.join(i);if(s=s.trim(),!t&&r.split("#").length===1){var a=R8.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Y_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=T8.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(t||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";!f||u&&V_[u]||(s=s.substr(2),this.slashes=!0)}if(!V_[u]&&(f||u&&!Hf[u])){for(var h,d,g=-1,b=0;b<$D.length;b++)(v=s.indexOf($D[b]))!==-1&&(g===-1||v<g)&&(g=v);for((d=g===-1?s.lastIndexOf("@"):s.lastIndexOf("@",g))!==-1&&(h=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(h)),g=-1,b=0;b<jD.length;b++){var v;(v=s.indexOf(jD[b]))!==-1&&(g===-1||v<g)&&(g=v)}g===-1&&(g=s.length),this.host=s.slice(0,g),s=s.slice(g),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var y=this.hostname.split(/\./),_=(b=0,y.length);b<_;b++){var E=y[b];if(E&&!E.match(zD)){for(var S="",A=0,B=E.length;A<B;A++)E.charCodeAt(A)>127?S+="x":S+=E[A];if(!S.match(zD)){var T=y.slice(0,b),Z=y.slice(b+1),ie=E.match(I8);ie&&(T.push(ie[1]),Z.unshift(ie[2])),Z.length&&(s="/"+Z.join(".")+s),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=S8.toASCII(this.hostname));var G=this.port?":"+this.port:"",ae=this.hostname||"";this.host=ae+G,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!O8[c])for(b=0,_=K_.length;b<_;b++){var U=K_[b];if(s.indexOf(U)!==-1){var V=encodeURIComponent(U);V===U&&(V=escape(U)),s=s.split(U).join(V)}}var ue=s.indexOf("#");ue!==-1&&(this.hash=s.substr(ue),s=s.slice(0,ue));var Ae=s.indexOf("?");if(Ae!==-1?(this.search=s.substr(Ae),this.query=s.substr(Ae+1),e&&(this.query=Y_.parse(this.query)),s=s.slice(0,Ae)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Hf[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var ve=this.search||"";this.path=G+ve}return this.href=this.format(),this},rs.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Qs.isObject(this.query)&&Object.keys(this.query).length&&(o=Y_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Hf[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),e+i+(t=t.replace(/[?#]/g,(function(a){return encodeURIComponent(a)})))+(s=s.replace("#","%23"))+n},rs.prototype.resolve=function(r){return this.resolveObject(Bp(r,!1,!0)).format()},rs.prototype.resolveObject=function(r){if(Qs.isString(r)){var e=new rs;e.parse(r,!1,!0),r=e}for(var t=new rs,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return Hf[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Hf[r.protocol]){for(var c=Object.keys(r),f=0;f<c.length;f++){var h=c[f];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||V_[r.protocol])t.pathname=r.pathname;else{for(var d=(r.pathname||"").split("/");d.length&&!(r.host=d.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),t.pathname=d.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var g=t.pathname||"",b=t.search||"";t.path=g+b}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",w=r.host||r.pathname&&r.pathname.charAt(0)==="/",y=w||v||t.host&&r.pathname,_=y,E=t.pathname&&t.pathname.split("/")||[],S=(d=r.pathname&&r.pathname.split("/")||[],t.protocol&&!Hf[t.protocol]);if(S&&(t.hostname="",t.port=null,t.host&&(E[0]===""?E[0]=t.host:E.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(d[0]===""?d[0]=r.host:d.unshift(r.host)),r.host=null),y=y&&(d[0]===""||E[0]==="")),w)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),t.search=r.search,t.query=r.query;else if(!Qs.isNullOrUndefined(r.search))return S&&(t.hostname=t.host=E.shift(),(ie=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=ie.shift(),t.host=t.hostname=ie.shift())),t.search=r.search,t.query=r.query,Qs.isNull(t.pathname)&&Qs.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!E.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=E.slice(-1)[0],B=(t.host||r.host||E.length>1)&&(A==="."||A==="..")||A==="",T=0,Z=E.length;Z>=0;Z--)(A=E[Z])==="."?E.splice(Z,1):A===".."?(E.splice(Z,1),T++):T&&(E.splice(Z,1),T--);if(!y&&!_)for(;T--;T)E.unshift("..");!y||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),B&&E.join("/").substr(-1)!=="/"&&E.push("");var ie,G=E[0]===""||E[0]&&E[0].charAt(0)==="/";return S&&(t.hostname=t.host=G?"":E.length?E.shift():"",(ie=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=ie.shift(),t.host=t.hostname=ie.shift())),(y=y||t.host&&E.length)&&!G&&E.unshift(""),E.length?t.pathname=E.join("/"):(t.pathname=null,t.path=null),Qs.isNull(t.pathname)&&Qs.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},rs.prototype.parseHost=function(){var r=this.host,e=C8.exec(r);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;X_={},WD=!1;qD=N8(),k8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=V8;Qt.fileURLToPath=q8;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.URL;L8=92,P8=47,B8=97,M8=122,Z_=k8==="win32",F8=/\//g,U8=/%/g,j8=/\\/g,$8=/\n/g,z8=/\r/g,W8=/\t/g;Y8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=l4;Qt.fileURLToPath=s4;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.parse;Qt.URL;X8=92,K8=47,Z8=97,J8=122,J_=Y8==="win32",Q8=/\//g,e4=/%/g,t4=/\\/g,r4=/\n/g,n4=/\r/g,i4=/\t/g});function rE(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function u4(){!Vf||!Bu||(Vf=!1,Bu.length?Vo=Bu.concat(Vo):q0=-1,Vo.length&&YD())}function YD(){if(!Vf){var r=setTimeout(u4,0);Vf=!0;for(var e=Vo.length;e;){for(Bu=Vo,Vo=[];++q0<e;)Bu&&Bu[q0].run();q0=-1,e=Vo.length}Bu=null,Vf=!1,clearTimeout(r)}}function c4(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Vo.push(new XD(r,e)),Vo.length===1&&!Vf&&setTimeout(YD,0)}function XD(r,e){this.fun=r,this.array=e}function kn(){}function C4(r){rE("_linkedBinding")}function O4(r){rE("dlopen")}function N4(){return[]}function k4(){return[]}function z4(r,e){if(!r)throw new Error(e||"assertion error")}function G4(){return!1}function u5(){return fl.now()/1e3}function tE(r){var e=Math.floor((Date.now()-fl.now())*.001),t=fl.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=eE)),[n,i]}function hl(){return zr}function _5(r){return[]}var Vo,Vf,Bu,q0,f4,h4,d4,p4,g4,m4,y4,b4,w4,v4,_4,E4,A4,x4,S4,T4,R4,D4,I4,L4,P4,nE,B4,M4,F4,U4,j4,$4,W4,q4,H4,V4,Y4,X4,K4,Z4,J4,Q4,e5,t5,r5,n5,i5,s5,o5,a5,l5,fl,Q_,eE,c5,f5,h5,d5,p5,g5,m5,y5,b5,w5,v5,zr,Mu=Jt(()=>{Ne();Le();ke();Vo=[],Vf=!1,q0=-1;XD.prototype.run=function(){this.fun.apply(null,this.array)};f4="browser",h4="x64",d4="browser",p4={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},g4=["/usr/bin/node"],m4=[],y4="v16.8.0",b4={},w4=function(r,e){console.warn((e?e+": ":"")+r)},v4=function(r){rE("binding")},_4=function(r){return 0},E4=function(){return"/"},A4=function(r){},x4={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};S4=kn,T4=[];R4={},D4=!1,I4={};L4=kn,P4=kn,nE=function(){return{}},B4=nE,M4=nE,F4=kn,U4=kn,j4=kn,$4={};W4={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},q4=kn,H4=kn;V4=kn,Y4=kn,X4=kn,K4=kn,Z4=kn,J4=void 0,Q4=void 0,e5=void 0,t5=kn,r5=2,n5=1,i5="/bin/usr/node",s5=9229,o5="node",a5=[],l5=kn,fl={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};fl.now===void 0&&(Q_=Date.now(),fl.timing&&fl.timing.navigationStart&&(Q_=fl.timing.navigationStart),fl.now=()=>Date.now()-Q_);eE=1e9;tE.bigint=function(r){var e=tE(r);return typeof BigInt>"u"?e[0]*eE+e[1]:BigInt(e[0]*eE)+BigInt(e[1])};c5=10,f5={},h5=0;d5=hl,p5=hl,g5=hl,m5=hl,y5=hl,b5=kn,w5=hl,v5=hl;zr={version:y4,versions:b4,arch:h4,platform:d4,release:x4,_rawDebug:S4,moduleLoadList:T4,binding:v4,_linkedBinding:C4,_events:f5,_eventsCount:h5,_maxListeners:c5,on:hl,addListener:d5,once:p5,off:g5,removeListener:m5,removeAllListeners:y5,emit:b5,prependListener:w5,prependOnceListener:v5,listeners:_5,domain:R4,_exiting:D4,config:I4,dlopen:O4,uptime:u5,_getActiveRequests:N4,_getActiveHandles:k4,reallyExit:L4,_kill:P4,cpuUsage:nE,resourceUsage:B4,memoryUsage:M4,kill:F4,exit:U4,openStdin:j4,allowedNodeEnvironmentFlags:$4,assert:z4,features:W4,_fatalExceptions:q4,setUncaughtExceptionCaptureCallback:H4,hasUncaughtExceptionCaptureCallback:G4,emitWarning:w4,nextTick:c4,_tickCallback:V4,_debugProcess:Y4,_debugEnd:X4,_startProfilerIdleNotifier:K4,_stopProfilerIdleNotifier:Z4,stdout:J4,stdin:e5,stderr:Q4,abort:t5,umask:_4,chdir:A4,cwd:E4,env:p4,title:f4,argv:g4,execArgv:m4,pid:r5,ppid:n5,execPath:i5,debugPort:s5,hrtime:tE,argv0:o5,_preload_modules:a5,setSourceMapsEnabled:l5}});function er(){er.init.call(this)}function H0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function sI(r){return r._maxListeners===void 0?er.defaultMaxListeners:r._maxListeners}function QD(r,e,t,n){var i,o,s,a;if(H0(t),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=sI(r))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return r}function E5(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eI(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=E5.bind(n);return i.listener=t,n.wrapFn=i,i}function tI(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?(function(o){for(var s=new Array(o.length),a=0;a<s.length;++a)s[a]=o[a].listener||o[a];return s})(i):oI(i,i.length)}function rI(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function oI(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}var nI,iI,Yf,KD,ZD,JD,nn,Xf=Jt(()=>{Ne();Le();ke();Yf=typeof Reflect=="object"?Reflect:null,KD=Yf&&typeof Yf.apply=="function"?Yf.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};iI=Yf&&typeof Yf.ownKeys=="function"?Yf.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};ZD=Number.isNaN||function(r){return r!=r};nI=er,er.EventEmitter=er,er.prototype._events=void 0,er.prototype._eventsCount=0,er.prototype._maxListeners=void 0;JD=10;Object.defineProperty(er,"defaultMaxListeners",{enumerable:!0,get:function(){return JD},set:function(r){if(typeof r!="number"||r<0||ZD(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");JD=r}}),er.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},er.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||ZD(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},er.prototype.getMaxListeners=function(){return sI(this)},er.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(a===void 0)return!1;if(typeof a=="function")KD(a,this,e);else{var u=a.length,c=oI(a,u);for(t=0;t<u;++t)KD(c[t],this,e)}return!0},er.prototype.addListener=function(r,e){return QD(this,r,e,!1)},er.prototype.on=er.prototype.addListener,er.prototype.prependListener=function(r,e){return QD(this,r,e,!0)},er.prototype.once=function(r,e){return H0(e),this.on(r,eI(this,r,e)),this},er.prototype.prependOnceListener=function(r,e){return H0(e),this.prependListener(r,eI(this,r,e)),this},er.prototype.removeListener=function(r,e){var t,n,i,o,s;if(H0(e),(n=this._events)===void 0)return this;if((t=n[r])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;i===0?t.shift():(function(a,u){for(;u+1<a.length;u++)a[u]=a[u+1];a.pop()})(t,i),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,s||e)}return this},er.prototype.off=er.prototype.removeListener,er.prototype.removeAllListeners=function(r){var e,t,n;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var i,o=Object.keys(t);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[r])=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},er.prototype.listeners=function(r){return tI(this,r,!0)},er.prototype.rawListeners=function(r){return tI(this,r,!1)},er.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):rI.call(r,e)},er.prototype.listenerCount=rI,er.prototype.eventNames=function(){return this._eventsCount>0?iI(this._events):[]};nn=nI;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount});var G0=Jt(()=>{Ne();Le();ke();Xf();nn.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};nn.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}}});function uI(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function A5(r,e,t){for(var n,i,o=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(255&r[s+2]),o.push(Cs[(i=n)>>18&63]+Cs[i>>12&63]+Cs[i>>6&63]+Cs[63&i]);return o.join("")}function Yo(r){if(r>2147483647)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,Ke.prototype),e}function Ke(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return AE(r)}return FI(r,e,t)}function FI(r,e,t){if(typeof r=="string")return(function(o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!Ke.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|jI(o,s),u=Yo(a),c=u.write(o,s);return c!==a&&(u=u.slice(0,c)),u})(r,e);if(ArrayBuffer.isView(r))return iE(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Xo(r,ArrayBuffer)||r&&Xo(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xo(r,SharedArrayBuffer)||r&&Xo(r.buffer,SharedArrayBuffer)))return fI(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Ke.from(n,e,t);var i=(function(o){if(Ke.isBuffer(o)){var s=0|CE(o.length),a=Yo(s);return a.length===0||o.copy(a,0,0,s),a}if(o.length!==void 0)return typeof o.length!="number"||RE(o.length)?Yo(0):iE(o);if(o.type==="Buffer"&&Array.isArray(o.data))return iE(o.data)})(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Ke.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function UI(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function AE(r){return UI(r),Yo(r<0?0:0|CE(r))}function iE(r){for(var e=r.length<0?0:0|CE(r.length),t=Yo(e),n=0;n<e;n+=1)t[n]=255&r[n];return t}function fI(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=e===void 0&&t===void 0?new Uint8Array(r):t===void 0?new Uint8Array(r,e):new Uint8Array(r,e,t),Object.setPrototypeOf(n,Ke.prototype),n}function CE(r){if(r>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function jI(r,e){if(Ke.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Xo(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return xE(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return qI(r).length;default:if(i)return n?-1:xE(r).length;e=(""+e).toLowerCase(),i=!0}}function S5(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(e>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return L5(this,e,t);case"utf8":case"utf-8":return zI(this,e,t);case"ascii":return N5(this,e,t);case"latin1":case"binary":return k5(this,e,t);case"base64":return O5(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P5(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Uu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function hI(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),RE(t=+t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0){if(!i)return-1;t=0}if(typeof e=="string"&&(e=Ke.from(e,n)),Ke.isBuffer(e))return e.length===0?-1:dI(r,e,t,n,i);if(typeof e=="number")return e&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):dI(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function dI(r,e,t,n,i){var o,s=1,a=r.length,u=e.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,u/=2,t/=2}function c(g,b){return s===1?g[b]:g.readUInt16BE(b*s)}if(i){var f=-1;for(o=t;o<a;o++)if(c(r,o)===c(e,f===-1?0:o-f)){if(f===-1&&(f=o),o-f+1===u)return f*s}else f!==-1&&(o-=o-f),f=-1}else for(t+u>a&&(t=a-u),o=t;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(r,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function T5(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(RE(a))return s;r[t+s]=a}return s}function C5(r,e,t,n){return J0(xE(e,r.length-t),r,t,n)}function $I(r,e,t,n){return J0((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(e),r,t,n)}function R5(r,e,t,n){return $I(r,e,t,n)}function D5(r,e,t,n){return J0(qI(e),r,t,n)}function I5(r,e,t,n){return J0((function(i,o){for(var s,a,u,c=[],f=0;f<i.length&&!((o-=2)<0);++f)s=i.charCodeAt(f),a=s>>8,u=s%256,c.push(u),c.push(a);return c})(e,r.length-t),r,t,n)}function O5(r,e,t){return e===0&&t===r.length?EE.fromByteArray(r):EE.fromByteArray(r.slice(e,t))}function zI(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o,s,a,u,c=r[i],f=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=t)switch(h){case 1:c<128&&(f=c);break;case 2:(192&(o=r[i+1]))==128&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=r[i+1],s=r[i+2],(192&o)==128&&(192&s)==128&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=r[i+1],s=r[i+2],a=r[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}f===null?(f=65533,h=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return(function(d){var g=d.length;if(g<=4096)return String.fromCharCode.apply(String,d);for(var b="",v=0;v<g;)b+=String.fromCharCode.apply(String,d.slice(v,v+=4096));return b})(n)}function N5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(127&r[i]);return n}function k5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function L5(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=M5[r[o]];return i}function P5(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function hn(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function ni(r,e,t,n,i,o){if(!Ke.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function WI(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function pI(r,e,t,n,i){return e=+e,t>>>=0,i||WI(r,0,t,4),Kf.write(r,e,t,n,23,4),t+4}function gI(r,e,t,n,i){return e=+e,t>>>=0,i||WI(r,0,t,8),Kf.write(r,e,t,n,52,8),t+8}function xE(r,e){var t;e=e||1/0;for(var n=r.length,i=null,o=[],s=0;s<n;++s){if((t=r.charCodeAt(s))>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function qI(r){return EE.toByteArray((function(e){if((e=(e=e.split("=")[0]).trim().replace(B5,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(r))}function J0(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Xo(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function RE(r){return r!=r}function mI(r,e){for(var t in r)e[t]=r[t]}function ju(r,e,t){return to(r,e,t)}function Mp(r){var e;switch(this.encoding=(function(t){var n=(function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}})(t);if(typeof n!="string"&&(TE.isEncoding===yI||!yI(t)))throw new Error("Unknown encoding: "+t);return n||t})(r),this.encoding){case"utf16le":this.text=j5,this.end=$5,e=4;break;case"utf8":this.fillLast=U5,e=4;break;case"base64":this.text=z5,this.end=W5,e=3;break;default:return this.write=q5,this.end=H5,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=TE.allocUnsafe(e)}function sE(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function U5(r){var e=this.lastTotal-this.lastNeed,t=(function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}})(this,r);return t!==void 0?t:this.lastNeed<=r.length?(r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length,void 0)}function j5(r,e){if((r.length-e)%2==0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function $5(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function z5(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function W5(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function q5(r){return r.toString(this.encoding)}function H5(r){return r&&r.length?this.write(r):""}function G5(){if(bI)return Fp;bI=!0,Fp.byteLength=a,Fp.toByteArray=c,Fp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(g){var b=s(g),v=b[0],w=b[1];return(v+w)*3/4-w}function u(g,b,v){return(b+v)*3/4-v}function c(g){var b,v=s(g),w=v[0],y=v[1],_=new t(u(g,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[g.charCodeAt(A)]<<18|e[g.charCodeAt(A+1)]<<12|e[g.charCodeAt(A+2)]<<6|e[g.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[g.charCodeAt(A)]<<2|e[g.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[g.charCodeAt(A)]<<10|e[g.charCodeAt(A+1)]<<4|e[g.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function h(g,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(g[_]<<16&16711680)+(g[_+1]<<8&65280)+(g[_+2]&255),y.push(f(w));return y.join("")}function d(g){for(var b,v=g.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(g,E,E+_>S?S:E+_));return w===1?(b=g[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(g[v-2]<<8)+g[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Fp}function V5(){if(wI)return Y0;wI=!0;return Y0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,g=r[e+h];for(h+=d,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(g?-1:1)*s*Math.pow(2,o-n)},Y0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=a&255,g+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+g]=s&255,g+=b,s/=256,c-=8);r[t+g-b]|=v*128},Y0}function Y5(){if(vI)return $u;vI=!0;let r=G5(),e=V5(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$u.Buffer=s,$u.SlowBuffer=y,$u.INSPECT_MAX_BYTES=50;let n=2147483647;$u.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let x=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(x,p),x.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(x){if(x>n)throw new RangeError('The value "'+x+'" is invalid for option "size"');let p=new Uint8Array(x);return Object.setPrototypeOf(p,s.prototype),p}function s(x,p,m){if(typeof x=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return a(x,p,m)}s.poolSize=8192;function a(x,p,m){if(typeof x=="string")return h(x,p);if(ArrayBuffer.isView(x))return g(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Ie(x,ArrayBuffer)||x&&Ie(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ie(x,SharedArrayBuffer)||x&&Ie(x.buffer,SharedArrayBuffer)))return b(x,p,m);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let N=x.valueOf&&x.valueOf();if(N!=null&&N!==x)return s.from(N,p,m);let re=v(x);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return s.from(x[Symbol.toPrimitive]("string"),p,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}s.from=function(x,p,m){return a(x,p,m)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,p,m){return u(x),x<=0?o(x):p!==void 0?typeof m=="string"?o(x).fill(p,m):o(x).fill(p):o(x)}s.alloc=function(x,p,m){return c(x,p,m)};function f(x){return u(x),o(x<0?0:w(x)|0)}s.allocUnsafe=function(x){return f(x)},s.allocUnsafeSlow=function(x){return f(x)};function h(x,p){if((typeof p!="string"||p==="")&&(p="utf8"),!s.isEncoding(p))throw new TypeError("Unknown encoding: "+p);let m=_(x,p)|0,N=o(m),re=N.write(x,p);return re!==m&&(N=N.slice(0,re)),N}function d(x){let p=x.length<0?0:w(x.length)|0,m=o(p);for(let N=0;N<p;N+=1)m[N]=x[N]&255;return m}function g(x){if(Ie(x,Uint8Array)){let p=new Uint8Array(x);return b(p.buffer,p.byteOffset,p.byteLength)}return d(x)}function b(x,p,m){if(p<0||x.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<p+(m||0))throw new RangeError('"length" is outside of buffer bounds');let N;return p===void 0&&m===void 0?N=new Uint8Array(x):m===void 0?N=new Uint8Array(x,p):N=new Uint8Array(x,p,m),Object.setPrototypeOf(N,s.prototype),N}function v(x){if(s.isBuffer(x)){let p=w(x.length)|0,m=o(p);return m.length===0||x.copy(m,0,0,p),m}if(x.length!==void 0)return typeof x.length!="number"||Te(x.length)?o(0):d(x);if(x.type==="Buffer"&&Array.isArray(x.data))return d(x.data)}function w(x){if(x>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),s.alloc(+x)}s.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==s.prototype},s.compare=function(p,m){if(Ie(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),Ie(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),!s.isBuffer(p)||!s.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===m)return 0;let N=p.length,re=m.length;for(let D=0,fe=Math.min(N,re);D<fe;++D)if(p[D]!==m[D]){N=p[D],re=m[D];break}return N<re?-1:re<N?1:0},s.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(p,m){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return s.alloc(0);let N;if(m===void 0)for(m=0,N=0;N<p.length;++N)m+=p[N].length;let re=s.allocUnsafe(m),D=0;for(N=0;N<p.length;++N){let fe=p[N];if(Ie(fe,Uint8Array))D+fe.length>re.length?(s.isBuffer(fe)||(fe=s.from(fe)),fe.copy(re,D)):Uint8Array.prototype.set.call(re,fe,D);else if(s.isBuffer(fe))fe.copy(re,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=fe.length}return re};function _(x,p){if(s.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Ie(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);let m=x.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&m===0)return 0;let re=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return Ce(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return _e(x).length;default:if(re)return N?-1:Ce(x).length;p=(""+p).toLowerCase(),re=!0}}s.byteLength=_;function E(x,p,m){let N=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,p>>>=0,m<=p))return"";for(x||(x="utf8");;)switch(x){case"hex":return O(this,p,m);case"utf8":case"utf-8":return V(this,p,m);case"ascii":return ve(this,p,m);case"latin1":case"binary":return z(this,p,m);case"base64":return U(this,p,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,p,m);default:if(N)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),N=!0}}s.prototype._isBuffer=!0;function S(x,p,m){let N=x[p];x[p]=x[m],x[m]=N}s.prototype.swap16=function(){let p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<p;m+=2)S(this,m,m+1);return this},s.prototype.swap32=function(){let p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<p;m+=4)S(this,m,m+3),S(this,m+1,m+2);return this},s.prototype.swap64=function(){let p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<p;m+=8)S(this,m,m+7),S(this,m+1,m+6),S(this,m+2,m+5),S(this,m+3,m+4);return this},s.prototype.toString=function(){let p=this.length;return p===0?"":arguments.length===0?V(this,0,p):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(p){if(!s.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:s.compare(this,p)===0},s.prototype.inspect=function(){let p="",m=$u.INSPECT_MAX_BYTES;return p=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(p+=" ... "),"<Buffer "+p+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(p,m,N,re,D){if(Ie(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(m===void 0&&(m=0),N===void 0&&(N=p?p.length:0),re===void 0&&(re=0),D===void 0&&(D=this.length),m<0||N>p.length||re<0||D>this.length)throw new RangeError("out of range index");if(re>=D&&m>=N)return 0;if(re>=D)return-1;if(m>=N)return 1;if(m>>>=0,N>>>=0,re>>>=0,D>>>=0,this===p)return 0;let fe=D-re,be=N-m,Se=Math.min(fe,be),Y=this.slice(re,D),me=p.slice(m,N);for(let $=0;$<Se;++$)if(Y[$]!==me[$]){fe=Y[$],be=me[$];break}return fe<be?-1:be<fe?1:0};function A(x,p,m,N,re){if(x.length===0)return-1;if(typeof m=="string"?(N=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Te(m)&&(m=re?0:x.length-1),m<0&&(m=x.length+m),m>=x.length){if(re)return-1;m=x.length-1}else if(m<0)if(re)m=0;else return-1;if(typeof p=="string"&&(p=s.from(p,N)),s.isBuffer(p))return p.length===0?-1:B(x,p,m,N,re);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?re?Uint8Array.prototype.indexOf.call(x,p,m):Uint8Array.prototype.lastIndexOf.call(x,p,m):B(x,[p],m,N,re);throw new TypeError("val must be string, number or Buffer")}function B(x,p,m,N,re){let D=1,fe=x.length,be=p.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(x.length<2||p.length<2)return-1;D=2,fe/=2,be/=2,m/=2}function Se(me,$){return D===1?me[$]:me.readUInt16BE($*D)}let Y;if(re){let me=-1;for(Y=m;Y<fe;Y++)if(Se(x,Y)===Se(p,me===-1?0:Y-me)){if(me===-1&&(me=Y),Y-me+1===be)return me*D}else me!==-1&&(Y-=Y-me),me=-1}else for(m+be>fe&&(m=fe-be),Y=m;Y>=0;Y--){let me=!0;for(let $=0;$<be;$++)if(Se(x,Y+$)!==Se(p,$)){me=!1;break}if(me)return Y}return-1}s.prototype.includes=function(p,m,N){return this.indexOf(p,m,N)!==-1},s.prototype.indexOf=function(p,m,N){return A(this,p,m,N,!0)},s.prototype.lastIndexOf=function(p,m,N){return A(this,p,m,N,!1)};function T(x,p,m,N){m=Number(m)||0;let re=x.length-m;N?(N=Number(N),N>re&&(N=re)):N=re;let D=p.length;N>D/2&&(N=D/2);let fe;for(fe=0;fe<N;++fe){let be=parseInt(p.substr(fe*2,2),16);if(Te(be))return fe;x[m+fe]=be}return fe}function Z(x,p,m,N){return Oe(Ce(p,x.length-m),x,m,N)}function ie(x,p,m,N){return Oe(xe(p),x,m,N)}function G(x,p,m,N){return Oe(_e(p),x,m,N)}function ae(x,p,m,N){return Oe(he(p,x.length-m),x,m,N)}s.prototype.write=function(p,m,N,re){if(m===void 0)re="utf8",N=this.length,m=0;else if(N===void 0&&typeof m=="string")re=m,N=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(N)?(N=N>>>0,re===void 0&&(re="utf8")):(re=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let D=this.length-m;if((N===void 0||N>D)&&(N=D),p.length>0&&(N<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let fe=!1;for(;;)switch(re){case"hex":return T(this,p,m,N);case"utf8":case"utf-8":return Z(this,p,m,N);case"ascii":case"latin1":case"binary":return ie(this,p,m,N);case"base64":return G(this,p,m,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,p,m,N);default:if(fe)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),fe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(x,p,m){return p===0&&m===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(p,m))}function V(x,p,m){m=Math.min(x.length,m);let N=[],re=p;for(;re<m;){let D=x[re],fe=null,be=D>239?4:D>223?3:D>191?2:1;if(re+be<=m){let Se,Y,me,$;switch(be){case 1:D<128&&(fe=D);break;case 2:Se=x[re+1],(Se&192)===128&&($=(D&31)<<6|Se&63,$>127&&(fe=$));break;case 3:Se=x[re+1],Y=x[re+2],(Se&192)===128&&(Y&192)===128&&($=(D&15)<<12|(Se&63)<<6|Y&63,$>2047&&($<55296||$>57343)&&(fe=$));break;case 4:Se=x[re+1],Y=x[re+2],me=x[re+3],(Se&192)===128&&(Y&192)===128&&(me&192)===128&&($=(D&15)<<18|(Se&63)<<12|(Y&63)<<6|me&63,$>65535&&$<1114112&&(fe=$))}}fe===null?(fe=65533,be=1):fe>65535&&(fe-=65536,N.push(fe>>>10&1023|55296),fe=56320|fe&1023),N.push(fe),re+=be}return Ae(N)}let ue=4096;function Ae(x){let p=x.length;if(p<=ue)return String.fromCharCode.apply(String,x);let m="",N=0;for(;N<p;)m+=String.fromCharCode.apply(String,x.slice(N,N+=ue));return m}function ve(x,p,m){let N="";m=Math.min(x.length,m);for(let re=p;re<m;++re)N+=String.fromCharCode(x[re]&127);return N}function z(x,p,m){let N="";m=Math.min(x.length,m);for(let re=p;re<m;++re)N+=String.fromCharCode(x[re]);return N}function O(x,p,m){let N=x.length;(!p||p<0)&&(p=0),(!m||m<0||m>N)&&(m=N);let re="";for(let D=p;D<m;++D)re+=We[x[D]];return re}function oe(x,p,m){let N=x.slice(p,m),re="";for(let D=0;D<N.length-1;D+=2)re+=String.fromCharCode(N[D]+N[D+1]*256);return re}s.prototype.slice=function(p,m){let N=this.length;p=~~p,m=m===void 0?N:~~m,p<0?(p+=N,p<0&&(p=0)):p>N&&(p=N),m<0?(m+=N,m<0&&(m=0)):m>N&&(m=N),m<p&&(m=p);let re=this.subarray(p,m);return Object.setPrototypeOf(re,s.prototype),re};function q(x,p,m){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+p>m)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p],D=1,fe=0;for(;++fe<m&&(D*=256);)re+=this[p+fe]*D;return re},s.prototype.readUintBE=s.prototype.readUIntBE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p+--m],D=1;for(;m>0&&(D*=256);)re+=this[p+--m]*D;return re},s.prototype.readUint8=s.prototype.readUInt8=function(p,m){return p=p>>>0,m||q(p,1,this.length),this[p]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(p,m){return p=p>>>0,m||q(p,2,this.length),this[p]|this[p+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(p,m){return p=p>>>0,m||q(p,2,this.length),this[p]<<8|this[p+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(p,m){return p=p>>>0,m||q(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},s.prototype.readBigUInt64LE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,D=this[++p]+this[++p]*2**8+this[++p]*2**16+N*2**24;return BigInt(re)+(BigInt(D)<<BigInt(32))}),s.prototype.readBigUInt64BE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=m*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],D=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+N;return(BigInt(re)<<BigInt(32))+BigInt(D)}),s.prototype.readIntLE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=this[p],D=1,fe=0;for(;++fe<m&&(D*=256);)re+=this[p+fe]*D;return D*=128,re>=D&&(re-=Math.pow(2,8*m)),re},s.prototype.readIntBE=function(p,m,N){p=p>>>0,m=m>>>0,N||q(p,m,this.length);let re=m,D=1,fe=this[p+--re];for(;re>0&&(D*=256);)fe+=this[p+--re]*D;return D*=128,fe>=D&&(fe-=Math.pow(2,8*m)),fe},s.prototype.readInt8=function(p,m){return p=p>>>0,m||q(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},s.prototype.readInt16LE=function(p,m){p=p>>>0,m||q(p,2,this.length);let N=this[p]|this[p+1]<<8;return N&32768?N|4294901760:N},s.prototype.readInt16BE=function(p,m){p=p>>>0,m||q(p,2,this.length);let N=this[p+1]|this[p]<<8;return N&32768?N|4294901760:N},s.prototype.readInt32LE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},s.prototype.readInt32BE=function(p,m){return p=p>>>0,m||q(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},s.prototype.readBigInt64LE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(N<<24);return(BigInt(re)<<BigInt(32))+BigInt(m+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),s.prototype.readBigInt64BE=qe(function(p){p=p>>>0,F(p,"offset");let m=this[p],N=this[p+7];(m===void 0||N===void 0)&&R(p,this.length-8);let re=(m<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(re)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+N)}),s.prototype.readFloatLE=function(p,m){return p=p>>>0,m||q(p,4,this.length),e.read(this,p,!0,23,4)},s.prototype.readFloatBE=function(p,m){return p=p>>>0,m||q(p,4,this.length),e.read(this,p,!1,23,4)},s.prototype.readDoubleLE=function(p,m){return p=p>>>0,m||q(p,8,this.length),e.read(this,p,!0,52,8)},s.prototype.readDoubleBE=function(p,m){return p=p>>>0,m||q(p,8,this.length),e.read(this,p,!1,52,8)};function M(x,p,m,N,re,D){if(!s.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>re||p<D)throw new RangeError('"value" argument is out of bounds');if(m+N>x.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(p,m,N,re){if(p=+p,m=m>>>0,N=N>>>0,!re){let be=Math.pow(2,8*N)-1;M(this,p,m,N,be,0)}let D=1,fe=0;for(this[m]=p&255;++fe<N&&(D*=256);)this[m+fe]=p/D&255;return m+N},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(p,m,N,re){if(p=+p,m=m>>>0,N=N>>>0,!re){let be=Math.pow(2,8*N)-1;M(this,p,m,N,be,0)}let D=N-1,fe=1;for(this[m+D]=p&255;--D>=0&&(fe*=256);)this[m+D]=p/fe&255;return m+N},s.prototype.writeUint8=s.prototype.writeUInt8=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,1,255,0),this[m]=p&255,m+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,65535,0),this[m]=p&255,this[m+1]=p>>>8,m+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,65535,0),this[m]=p>>>8,this[m+1]=p&255,m+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,4294967295,0),this[m+3]=p>>>24,this[m+2]=p>>>16,this[m+1]=p>>>8,this[m]=p&255,m+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,4294967295,0),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4};function H(x,p,m,N,re){pe(p,N,re,x,m,7);let D=Number(p&BigInt(4294967295));x[m++]=D,D=D>>8,x[m++]=D,D=D>>8,x[m++]=D,D=D>>8,x[m++]=D;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return x[m++]=fe,fe=fe>>8,x[m++]=fe,fe=fe>>8,x[m++]=fe,fe=fe>>8,x[m++]=fe,m}function j(x,p,m,N,re){pe(p,N,re,x,m,7);let D=Number(p&BigInt(4294967295));x[m+7]=D,D=D>>8,x[m+6]=D,D=D>>8,x[m+5]=D,D=D>>8,x[m+4]=D;let fe=Number(p>>BigInt(32)&BigInt(4294967295));return x[m+3]=fe,fe=fe>>8,x[m+2]=fe,fe=fe>>8,x[m+1]=fe,fe=fe>>8,x[m]=fe,m+8}s.prototype.writeBigUInt64LE=qe(function(p,m=0){return H(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=qe(function(p,m=0){return j(this,p,m,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(p,m,N,re){if(p=+p,m=m>>>0,!re){let Se=Math.pow(2,8*N-1);M(this,p,m,N,Se-1,-Se)}let D=0,fe=1,be=0;for(this[m]=p&255;++D<N&&(fe*=256);)p<0&&be===0&&this[m+D-1]!==0&&(be=1),this[m+D]=(p/fe>>0)-be&255;return m+N},s.prototype.writeIntBE=function(p,m,N,re){if(p=+p,m=m>>>0,!re){let Se=Math.pow(2,8*N-1);M(this,p,m,N,Se-1,-Se)}let D=N-1,fe=1,be=0;for(this[m+D]=p&255;--D>=0&&(fe*=256);)p<0&&be===0&&this[m+D+1]!==0&&(be=1),this[m+D]=(p/fe>>0)-be&255;return m+N},s.prototype.writeInt8=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,1,127,-128),p<0&&(p=255+p+1),this[m]=p&255,m+1},s.prototype.writeInt16LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,32767,-32768),this[m]=p&255,this[m+1]=p>>>8,m+2},s.prototype.writeInt16BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,2,32767,-32768),this[m]=p>>>8,this[m+1]=p&255,m+2},s.prototype.writeInt32LE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,2147483647,-2147483648),this[m]=p&255,this[m+1]=p>>>8,this[m+2]=p>>>16,this[m+3]=p>>>24,m+4},s.prototype.writeInt32BE=function(p,m,N){return p=+p,m=m>>>0,N||M(this,p,m,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[m]=p>>>24,this[m+1]=p>>>16,this[m+2]=p>>>8,this[m+3]=p&255,m+4},s.prototype.writeBigInt64LE=qe(function(p,m=0){return H(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=qe(function(p,m=0){return j(this,p,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(x,p,m,N,re,D){if(m+N>x.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function K(x,p,m,N,re){return p=+p,m=m>>>0,re||Q(x,p,m,4),e.write(x,p,m,N,23,4),m+4}s.prototype.writeFloatLE=function(p,m,N){return K(this,p,m,!0,N)},s.prototype.writeFloatBE=function(p,m,N){return K(this,p,m,!1,N)};function ee(x,p,m,N,re){return p=+p,m=m>>>0,re||Q(x,p,m,8),e.write(x,p,m,N,52,8),m+8}s.prototype.writeDoubleLE=function(p,m,N){return ee(this,p,m,!0,N)},s.prototype.writeDoubleBE=function(p,m,N){return ee(this,p,m,!1,N)},s.prototype.copy=function(p,m,N,re){if(!s.isBuffer(p))throw new TypeError("argument should be a Buffer");if(N||(N=0),!re&&re!==0&&(re=this.length),m>=p.length&&(m=p.length),m||(m=0),re>0&&re<N&&(re=N),re===N||p.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),p.length-m<re-N&&(re=p.length-m+N);let D=re-N;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,N,re):Uint8Array.prototype.set.call(p,this.subarray(N,re),m),D},s.prototype.fill=function(p,m,N,re){if(typeof p=="string"){if(typeof m=="string"?(re=m,m=0,N=this.length):typeof N=="string"&&(re=N,N=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!s.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(p.length===1){let fe=p.charCodeAt(0);(re==="utf8"&&fe<128||re==="latin1")&&(p=fe)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(m<0||this.length<m||this.length<N)throw new RangeError("Out of range index");if(N<=m)return this;m=m>>>0,N=N===void 0?this.length:N>>>0,p||(p=0);let D;if(typeof p=="number")for(D=m;D<N;++D)this[D]=p;else{let fe=s.isBuffer(p)?p:s.from(p,re),be=fe.length;if(be===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(D=0;D<N-m;++D)this[D+m]=fe[D%be]}return this};let P={};function I(x,p,m){P[x]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}I("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),I("ERR_INVALID_ARG_TYPE",function(x,p){return`The "${x}" argument must be of type number. Received type ${typeof p}`},TypeError),I("ERR_OUT_OF_RANGE",function(x,p,m){let N=`The value of "${x}" is out of range.`,re=m;return Number.isInteger(m)&&Math.abs(m)>2**32?re=k(String(m)):typeof m=="bigint"&&(re=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(re=k(re)),re+="n"),N+=` It must be ${p}. Received ${re}`,N},RangeError);function k(x){let p="",m=x.length,N=x[0]==="-"?1:0;for(;m>=N+4;m-=3)p=`_${x.slice(m-3,m)}${p}`;return`${x.slice(0,m)}${p}`}function ne(x,p,m){F(p,"offset"),(x[p]===void 0||x[p+m]===void 0)&&R(p,x.length-(m+1))}function pe(x,p,m,N,re,D){if(x>m||x<p){let fe=typeof p=="bigint"?"n":"",be;throw p===0||p===BigInt(0)?be=`>= 0${fe} and < 2${fe} ** ${(D+1)*8}${fe}`:be=`>= -(2${fe} ** ${(D+1)*8-1}${fe}) and < 2 ** ${(D+1)*8-1}${fe}`,new P.ERR_OUT_OF_RANGE("value",be,x)}ne(N,re,D)}function F(x,p){if(typeof x!="number")throw new P.ERR_INVALID_ARG_TYPE(p,"number",x)}function R(x,p,m){throw Math.floor(x)!==x?(F(x,m),new P.ERR_OUT_OF_RANGE("offset","an integer",x)):p<0?new P.ERR_BUFFER_OUT_OF_BOUNDS:new P.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,x)}let te=/[^+/0-9A-Za-z-_]/g;function ge(x){if(x=x.split("=")[0],x=x.trim().replace(te,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Ce(x,p){p=p||1/0;let m,N=x.length,re=null,D=[];for(let fe=0;fe<N;++fe){if(m=x.charCodeAt(fe),m>55295&&m<57344){if(!re){if(m>56319){(p-=3)>-1&&D.push(239,191,189);continue}else if(fe+1===N){(p-=3)>-1&&D.push(239,191,189);continue}re=m;continue}if(m<56320){(p-=3)>-1&&D.push(239,191,189),re=m;continue}m=(re-55296<<10|m-56320)+65536}else re&&(p-=3)>-1&&D.push(239,191,189);if(re=null,m<128){if((p-=1)<0)break;D.push(m)}else if(m<2048){if((p-=2)<0)break;D.push(m>>6|192,m&63|128)}else if(m<65536){if((p-=3)<0)break;D.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((p-=4)<0)break;D.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return D}function xe(x){let p=[];for(let m=0;m<x.length;++m)p.push(x.charCodeAt(m)&255);return p}function he(x,p){let m,N,re,D=[];for(let fe=0;fe<x.length&&!((p-=2)<0);++fe)m=x.charCodeAt(fe),N=m>>8,re=m%256,D.push(re),D.push(N);return D}function _e(x){return r.toByteArray(ge(x))}function Oe(x,p,m,N){let re;for(re=0;re<N&&!(re+m>=p.length||re>=x.length);++re)p[re+m]=x[re];return re}function Ie(x,p){return x instanceof p||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===p.name}function Te(x){return x!==x}let We=(function(){let x="0123456789abcdef",p=new Array(256);for(let m=0;m<16;++m){let N=m*16;for(let re=0;re<16;++re)p[N+re]=x[m]+x[re]}return p})();function qe(x){return typeof BigInt>"u"?Ge:x}function Ge(){throw new Error("BigInt not supported")}return $u}function Wu(){return _I||(_I=!0,typeof Object.create=="function"?X0=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:X0=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),X0}function HI(){return EI||(EI=!0,oE=nn.EventEmitter),oE}function X5(){if(AI)return aE;AI=!0;function r(d,g){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);g&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(d,w).enumerable})),b.push.apply(b,v)}return b}function e(d){for(var g=1;g<arguments.length;g++){var b=arguments[g]!=null?arguments[g]:{};g%2?r(Object(b),!0).forEach(function(v){t(d,v,b[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):r(Object(b)).forEach(function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(b,v))})}return d}function t(d,g,b){return g in d?Object.defineProperty(d,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[g]=b,d}function n(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}function i(d,g){for(var b=0;b<g.length;b++){var v=g[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function o(d,g,b){return g&&i(d.prototype,g),d}var s=Zf,a=s.Buffer,u=Ve,c=u.inspect,f=c&&c.custom||"inspect";function h(d,g,b){a.prototype.copy.call(d,g,b)}return aE=(function(){function d(){n(this,d),this.head=null,this.tail=null,this.length=0}return o(d,[{key:"push",value:function(b){var v={data:b,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(b){var v={data:b,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var v=this.head,w=""+v.data;v=v.next;)w+=b+v.data;return w}},{key:"concat",value:function(b){if(this.length===0)return a.alloc(0);for(var v=a.allocUnsafe(b>>>0),w=this.head,y=0;w;)h(w.data,v,y),y+=w.data.length,w=w.next;return v}},{key:"consume",value:function(b,v){var w;return b<this.head.data.length?(w=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?w=this.shift():w=v?this._getString(b):this._getBuffer(b),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var v=this.head,w=1,y=v.data;for(b-=y.length;v=v.next;){var _=v.data,E=b>_.length?_.length:b;if(E===_.length?y+=_:y+=_.slice(0,b),b-=E,b===0){E===_.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(E));break}++w}return this.length-=w,y}},{key:"_getBuffer",value:function(b){var v=a.allocUnsafe(b),w=this.head,y=1;for(w.data.copy(v),b-=w.data.length;w=w.next;){var _=w.data,E=b>_.length?_.length:b;if(_.copy(v,v.length-b,0,E),b-=E,b===0){E===_.length?(++y,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=_.slice(E));break}++y}return this.length-=y,v}},{key:f,value:function(b,v){return c(this,e({},v,{depth:0,customInspect:!1}))}}]),d})(),aE}function GI(){if(xI)return lE;xI=!0;var r=Gt;function e(a,u){var c=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(u?u(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,a)):r.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(d){!u&&d?c._writableState?c._writableState.errorEmitted?r.nextTick(n,c):(c._writableState.errorEmitted=!0,r.nextTick(t,c,d)):r.nextTick(t,c,d):u?(r.nextTick(n,c),u(d)):r.nextTick(n,c)}),this)}function t(a,u){o(a,u),n(a)}function n(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(a,u){a.emit("error",u)}function s(a,u){var c=a._readableState,f=a._writableState;c&&c.autoDestroy||f&&f.autoDestroy?a.destroy(u):a.emit("error",u)}return lE={destroy:e,undestroy:i,errorOrDestroy:s},lE}function Jf(){if(SI)return uE;SI=!0;let r={};function e(s,a,u){u||(u=Error);function c(h,d,g){return typeof a=="string"?a:a(h,d,g)}class f extends u{constructor(d,g,b){super(c(d,g,b))}}f.prototype.name=u.name,f.prototype.code=s,r[s]=f}function t(s,a){if(Array.isArray(s)){let u=s.length;return s=s.map(c=>String(c)),u>2?`one of ${a} ${s.slice(0,u-1).join(", ")}, or `+s[u-1]:u===2?`one of ${a} ${s[0]} or ${s[1]}`:`of ${a} ${s[0]}`}else return`of ${a} ${String(s)}`}function n(s,a,u){return s.substr(0,a.length)===a}function i(s,a,u){return(u===void 0||u>s.length)&&(u=s.length),s.substring(u-a.length,u)===a}function o(s,a,u){return typeof u!="number"&&(u=0),u+a.length>s.length?!1:s.indexOf(a,u)!==-1}return e("ERR_INVALID_OPT_VALUE",function(s,a){return'The value "'+a+'" is invalid for option "'+s+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(s,a,u){let c;typeof a=="string"&&n(a,"not ")?(c="must not be",a=a.replace(/^not /,"")):c="must be";let f;if(i(s," argument"))f=`The ${s} ${c} ${t(a,"type")}`;else{let h=o(s,".")?"property":"argument";f=`The "${s}" ${h} ${c} ${t(a,"type")}`}return f+=`. Received type ${typeof u}`,f},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),uE.codes=r,uE}function VI(){if(TI)return cE;TI=!0;var r=Jf().codes.ERR_INVALID_OPT_VALUE;function e(n,i,o){return n.highWaterMark!=null?n.highWaterMark:i?n[o]:null}function t(n,i,o,s){var a=e(i,s,o);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var u=s?o:"highWaterMark";throw new r(u,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return cE={getHighWaterMark:t},cE}function K5(){if(CI)return fE;CI=!0,fE=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function o(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this||hE,arguments)}return o}function e(t){try{if(!hE.localStorage)return!1}catch{return!1}var n=hE.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return fE}function DE(){if(RI)return dE;RI=!0;var r=Gt;dE=ie;function e(P){var I=this;this.next=null,this.entry=null,this.finish=function(){ee(I,P)}}var t;ie.WritableState=T;var n={deprecate:K5()},i=HI(),o=Zf.Buffer,s=Z5.Uint8Array||function(){};function a(P){return o.from(P)}function u(P){return o.isBuffer(P)||P instanceof s}var c=GI(),f=VI(),h=f.getHighWaterMark,d=Jf().codes,g=d.ERR_INVALID_ARG_TYPE,b=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,w=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,E=d.ERR_STREAM_WRITE_AFTER_END,S=d.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;Wu()(ie,i);function B(){}function T(P,I,k){t=t||zu(),P=P||{},typeof k!="boolean"&&(k=I instanceof t),this.objectMode=!!P.objectMode,k&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=h(this,P,"writableHighWaterMark",k),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=P.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pe){z(I,pe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}T.prototype.getBuffer=function(){for(var I=this.bufferedRequest,k=[];I;)k.push(I),I=I.next;return k},(function(){try{Object.defineProperty(T.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Z=Function.prototype[Symbol.hasInstance],Object.defineProperty(ie,Symbol.hasInstance,{value:function(I){return Z.call(this,I)?!0:this!==ie?!1:I&&I._writableState instanceof T}})):Z=function(I){return I instanceof this};function ie(P){t=t||zu();var I=this instanceof t;if(!I&&!Z.call(ie,this))return new ie(P);this._writableState=new T(P,this,I),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),i.call(this)}ie.prototype.pipe=function(){A(this,new w)};function G(P,I){var k=new E;A(P,k),r.nextTick(I,k)}function ae(P,I,k,ne){var pe;return k===null?pe=new _:typeof k!="string"&&!I.objectMode&&(pe=new g("chunk",["string","Buffer"],k)),pe?(A(P,pe),r.nextTick(ne,pe),!1):!0}ie.prototype.write=function(P,I,k){var ne=this._writableState,pe=!1,F=!ne.objectMode&&u(P);return F&&!o.isBuffer(P)&&(P=a(P)),typeof I=="function"&&(k=I,I=null),F?I="buffer":I||(I=ne.defaultEncoding),typeof k!="function"&&(k=B),ne.ending?G(this,k):(F||ae(this,ne,P,k))&&(ne.pendingcb++,pe=V(this,ne,F,P,I,k)),pe},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.bufferProcessing&&P.bufferedRequest&&q(this,P))},ie.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new S(I);return this._writableState.defaultEncoding=I,this},Object.defineProperty(ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function U(P,I,k){return!P.objectMode&&P.decodeStrings!==!1&&typeof I=="string"&&(I=o.from(I,k)),I}Object.defineProperty(ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function V(P,I,k,ne,pe,F){if(!k){var R=U(I,ne,pe);ne!==R&&(k=!0,pe="buffer",ne=R)}var te=I.objectMode?1:ne.length;I.length+=te;var ge=I.length<I.highWaterMark;if(ge||(I.needDrain=!0),I.writing||I.corked){var Ce=I.lastBufferedRequest;I.lastBufferedRequest={chunk:ne,encoding:pe,isBuf:k,callback:F,next:null},Ce?Ce.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else ue(P,I,!1,te,ne,pe,F);return ge}function ue(P,I,k,ne,pe,F,R){I.writelen=ne,I.writecb=R,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new y("write")):k?P._writev(pe,I.onwrite):P._write(pe,F,I.onwrite),I.sync=!1}function Ae(P,I,k,ne,pe){--I.pendingcb,k?(r.nextTick(pe,ne),r.nextTick(Q,P,I),P._writableState.errorEmitted=!0,A(P,ne)):(pe(ne),P._writableState.errorEmitted=!0,A(P,ne),Q(P,I))}function ve(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}function z(P,I){var k=P._writableState,ne=k.sync,pe=k.writecb;if(typeof pe!="function")throw new v;if(ve(k),I)Ae(P,k,ne,I,pe);else{var F=M(k)||P.destroyed;!F&&!k.corked&&!k.bufferProcessing&&k.bufferedRequest&&q(P,k),ne?r.nextTick(O,P,k,F,pe):O(P,k,F,pe)}}function O(P,I,k,ne){k||oe(P,I),I.pendingcb--,ne(),Q(P,I)}function oe(P,I){I.length===0&&I.needDrain&&(I.needDrain=!1,P.emit("drain"))}function q(P,I){I.bufferProcessing=!0;var k=I.bufferedRequest;if(P._writev&&k&&k.next){var ne=I.bufferedRequestCount,pe=new Array(ne),F=I.corkedRequestsFree;F.entry=k;for(var R=0,te=!0;k;)pe[R]=k,k.isBuf||(te=!1),k=k.next,R+=1;pe.allBuffers=te,ue(P,I,!0,I.length,pe,"",F.finish),I.pendingcb++,I.lastBufferedRequest=null,F.next?(I.corkedRequestsFree=F.next,F.next=null):I.corkedRequestsFree=new e(I),I.bufferedRequestCount=0}else{for(;k;){var ge=k.chunk,Ce=k.encoding,xe=k.callback,he=I.objectMode?1:ge.length;if(ue(P,I,!1,he,ge,Ce,xe),k=k.next,I.bufferedRequestCount--,I.writing)break}k===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=k,I.bufferProcessing=!1}ie.prototype._write=function(P,I,k){k(new b("_write()"))},ie.prototype._writev=null,ie.prototype.end=function(P,I,k){var ne=this._writableState;return typeof P=="function"?(k=P,P=null,I=null):typeof I=="function"&&(k=I,I=null),P!=null&&this.write(P,I),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||K(this,ne,k),this},Object.defineProperty(ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function M(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function H(P,I){P._final(function(k){I.pendingcb--,k&&A(P,k),I.prefinished=!0,P.emit("prefinish"),Q(P,I)})}function j(P,I){!I.prefinished&&!I.finalCalled&&(typeof P._final=="function"&&!I.destroyed?(I.pendingcb++,I.finalCalled=!0,r.nextTick(H,P,I)):(I.prefinished=!0,P.emit("prefinish")))}function Q(P,I){var k=M(I);if(k&&(j(P,I),I.pendingcb===0&&(I.finished=!0,P.emit("finish"),I.autoDestroy))){var ne=P._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&P.destroy()}return k}function K(P,I,k){I.ending=!0,Q(P,I),k&&(I.finished?r.nextTick(k):P.once("finish",k)),I.ended=!0,P.writable=!1}function ee(P,I,k){var ne=P.entry;for(P.entry=null;ne;){var pe=ne.callback;I.pendingcb--,pe(k),ne=ne.next}I.corkedRequestsFree.next=P}return Object.defineProperty(ie.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(I){this._writableState&&(this._writableState.destroyed=I)}}),ie.prototype.destroy=c.destroy,ie.prototype._undestroy=c.undestroy,ie.prototype._destroy=function(P,I){I(P)},dE}function zu(){if(DI)return pE;DI=!0;var r=Gt,e=Object.keys||function(f){var h=[];for(var d in f)h.push(d);return h};pE=a;var t=IE(),n=DE();Wu()(a,t);for(var i=e(n.prototype),o=0;o<i.length;o++){var s=i[o];a.prototype[s]||(a.prototype[s]=n.prototype[s])}function a(f){if(!(this instanceof a))return new a(f);t.call(this,f),n.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||r.nextTick(c,this)}function c(f){f.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),pE}function Q0(){if(II)return gE;II=!0;var r=Jf().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];o.apply(this,u)}}}function t(){}function n(o){return o.setHeader&&typeof o.abort=="function"}function i(o,s,a){if(typeof s=="function")return i(o,null,s);s||(s={}),a=e(a||t);var u=s.readable||s.readable!==!1&&o.readable,c=s.writable||s.writable!==!1&&o.writable,f=function(){o.writable||d()},h=o._writableState&&o._writableState.finished,d=function(){c=!1,h=!0,u||a.call(o)},g=o._readableState&&o._readableState.endEmitted,b=function(){u=!1,g=!0,c||a.call(o)},v=function(E){a.call(o,E)},w=function(){var E;if(u&&!g)return(!o._readableState||!o._readableState.ended)&&(E=new r),a.call(o,E);if(c&&!h)return(!o._writableState||!o._writableState.ended)&&(E=new r),a.call(o,E)},y=function(){o.req.on("finish",d)};return n(o)?(o.on("complete",d),o.on("abort",w),o.req?y():o.on("request",y)):c&&!o._writableState&&(o.on("end",f),o.on("close",f)),o.on("end",b),o.on("finish",d),s.error!==!1&&o.on("error",v),o.on("close",w),function(){o.removeListener("complete",d),o.removeListener("abort",w),o.removeListener("request",y),o.req&&o.req.removeListener("finish",d),o.removeListener("end",f),o.removeListener("close",f),o.removeListener("finish",d),o.removeListener("end",b),o.removeListener("error",v),o.removeListener("close",w)}}return gE=i,gE}function J5(){if(OI)return mE;OI=!0;var r=Gt,e;function t(_,E,S){return E in _?Object.defineProperty(_,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[E]=S,_}var n=Q0(),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(_,E){return{value:_,done:E}}function d(_){var E=_[i];if(E!==null){var S=_[f].read();S!==null&&(_[u]=null,_[i]=null,_[o]=null,E(h(S,!1)))}}function g(_){r.nextTick(d,_)}function b(_,E){return function(S,A){_.then(function(){if(E[a]){S(h(void 0,!0));return}E[c](S,A)},A)}}var v=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((e={get stream(){return this[f]},next:function(){var E=this,S=this[s];if(S!==null)return Promise.reject(S);if(this[a])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(Z,ie){r.nextTick(function(){E[s]?ie(E[s]):Z(h(void 0,!0))})});var A=this[u],B;if(A)B=new Promise(b(A,this));else{var T=this[f].read();if(T!==null)return Promise.resolve(h(T,!1));B=new Promise(this[c])}return this[u]=B,B}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var E=this;return new Promise(function(S,A){E[f].destroy(null,function(B){if(B){A(B);return}S(h(void 0,!0))})})}),e),v),y=function(E){var S,A=Object.create(w,(S={},t(S,f,{value:E,writable:!0}),t(S,i,{value:null,writable:!0}),t(S,o,{value:null,writable:!0}),t(S,s,{value:null,writable:!0}),t(S,a,{value:E._readableState.endEmitted,writable:!0}),t(S,c,{value:function(T,Z){var ie=A[f].read();ie?(A[u]=null,A[i]=null,A[o]=null,T(h(ie,!1))):(A[i]=T,A[o]=Z)},writable:!0}),S));return A[u]=null,n(E,function(B){if(B&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"){var T=A[o];T!==null&&(A[u]=null,A[i]=null,A[o]=null,T(B)),A[s]=B;return}var Z=A[i];Z!==null&&(A[u]=null,A[i]=null,A[o]=null,Z(h(void 0,!0))),A[a]=!0}),E.on("readable",g.bind(null,A)),A};return mE=y,mE}function Q5(){return NI||(NI=!0,yE=function(){throw new Error("Readable.from is not available in the browser")}),yE}function IE(){if(kI)return bE;kI=!0;var r=Gt;bE=G;var e;G.ReadableState=ie,nn.EventEmitter;var t=function(R,te){return R.listeners(te).length},n=HI(),i=Zf.Buffer,o=eU.Uint8Array||function(){};function s(F){return i.from(F)}function a(F){return i.isBuffer(F)||F instanceof o}var u=Ve,c;u&&u.debuglog?c=u.debuglog("stream"):c=function(){};var f=X5(),h=GI(),d=VI(),g=d.getHighWaterMark,b=Jf().codes,v=b.ERR_INVALID_ARG_TYPE,w=b.ERR_STREAM_PUSH_AFTER_EOF,y=b.ERR_METHOD_NOT_IMPLEMENTED,_=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,S,A;Wu()(G,n);var B=h.errorOrDestroy,T=["error","close","destroy","pause","resume"];function Z(F,R,te){if(typeof F.prependListener=="function")return F.prependListener(R,te);!F._events||!F._events[R]?F.on(R,te):Array.isArray(F._events[R])?F._events[R].unshift(te):F._events[R]=[te,F._events[R]]}function ie(F,R,te){e=e||zu(),F=F||{},typeof te!="boolean"&&(te=R instanceof e),this.objectMode=!!F.objectMode,te&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=g(this,F,"readableHighWaterMark",te),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(E||(E=SE.StringDecoder),this.decoder=new E(F.encoding),this.encoding=F.encoding)}function G(F){if(e=e||zu(),!(this instanceof G))return new G(F);var R=this instanceof e;this._readableState=new ie(F,this,R),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),n.call(this)}Object.defineProperty(G.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),G.prototype.destroy=h.destroy,G.prototype._undestroy=h.undestroy,G.prototype._destroy=function(F,R){R(F)},G.prototype.push=function(F,R){var te=this._readableState,ge;return te.objectMode?ge=!0:typeof F=="string"&&(R=R||te.defaultEncoding,R!==te.encoding&&(F=i.from(F,R),R=""),ge=!0),ae(this,F,R,!1,ge)},G.prototype.unshift=function(F){return ae(this,F,null,!0,!1)};function ae(F,R,te,ge,Ce){c("readableAddChunk",R);var xe=F._readableState;if(R===null)xe.reading=!1,z(F,xe);else{var he;if(Ce||(he=V(xe,R)),he)B(F,he);else if(xe.objectMode||R&&R.length>0)if(typeof R!="string"&&!xe.objectMode&&Object.getPrototypeOf(R)!==i.prototype&&(R=s(R)),ge)xe.endEmitted?B(F,new _):U(F,xe,R,!0);else if(xe.ended)B(F,new w);else{if(xe.destroyed)return!1;xe.reading=!1,xe.decoder&&!te?(R=xe.decoder.write(R),xe.objectMode||R.length!==0?U(F,xe,R,!1):q(F,xe)):U(F,xe,R,!1)}else ge||(xe.reading=!1,q(F,xe))}return!xe.ended&&(xe.length<xe.highWaterMark||xe.length===0)}function U(F,R,te,ge){R.flowing&&R.length===0&&!R.sync?(R.awaitDrain=0,F.emit("data",te)):(R.length+=R.objectMode?1:te.length,ge?R.buffer.unshift(te):R.buffer.push(te),R.needReadable&&O(F)),q(F,R)}function V(F,R){var te;return!a(R)&&typeof R!="string"&&R!==void 0&&!F.objectMode&&(te=new v("chunk",["string","Buffer","Uint8Array"],R)),te}G.prototype.isPaused=function(){return this._readableState.flowing===!1},G.prototype.setEncoding=function(F){E||(E=SE.StringDecoder);var R=new E(F);this._readableState.decoder=R,this._readableState.encoding=this._readableState.decoder.encoding;for(var te=this._readableState.buffer.head,ge="";te!==null;)ge+=R.write(te.data),te=te.next;return this._readableState.buffer.clear(),ge!==""&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var ue=1073741824;function Ae(F){return F>=ue?F=ue:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function ve(F,R){return F<=0||R.length===0&&R.ended?0:R.objectMode?1:F!==F?R.flowing&&R.length?R.buffer.head.data.length:R.length:(F>R.highWaterMark&&(R.highWaterMark=Ae(F)),F<=R.length?F:R.ended?R.length:(R.needReadable=!0,0))}G.prototype.read=function(F){c("read",F),F=parseInt(F,10);var R=this._readableState,te=F;if(F!==0&&(R.emittedReadable=!1),F===0&&R.needReadable&&((R.highWaterMark!==0?R.length>=R.highWaterMark:R.length>0)||R.ended))return c("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?k(this):O(this),null;if(F=ve(F,R),F===0&&R.ended)return R.length===0&&k(this),null;var ge=R.needReadable;c("need readable",ge),(R.length===0||R.length-F<R.highWaterMark)&&(ge=!0,c("length less than watermark",ge)),R.ended||R.reading?(ge=!1,c("reading or ended",ge)):ge&&(c("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(F=ve(te,R)));var Ce;return F>0?Ce=I(F,R):Ce=null,Ce===null?(R.needReadable=R.length<=R.highWaterMark,F=0):(R.length-=F,R.awaitDrain=0),R.length===0&&(R.ended||(R.needReadable=!0),te!==F&&R.ended&&k(this)),Ce!==null&&this.emit("data",Ce),Ce};function z(F,R){if(c("onEofChunk"),!R.ended){if(R.decoder){var te=R.decoder.end();te&&te.length&&(R.buffer.push(te),R.length+=R.objectMode?1:te.length)}R.ended=!0,R.sync?O(F):(R.needReadable=!1,R.emittedReadable||(R.emittedReadable=!0,oe(F)))}}function O(F){var R=F._readableState;c("emitReadable",R.needReadable,R.emittedReadable),R.needReadable=!1,R.emittedReadable||(c("emitReadable",R.flowing),R.emittedReadable=!0,r.nextTick(oe,F))}function oe(F){var R=F._readableState;c("emitReadable_",R.destroyed,R.length,R.ended),!R.destroyed&&(R.length||R.ended)&&(F.emit("readable"),R.emittedReadable=!1),R.needReadable=!R.flowing&&!R.ended&&R.length<=R.highWaterMark,P(F)}function q(F,R){R.readingMore||(R.readingMore=!0,r.nextTick(M,F,R))}function M(F,R){for(;!R.reading&&!R.ended&&(R.length<R.highWaterMark||R.flowing&&R.length===0);){var te=R.length;if(c("maybeReadMore read 0"),F.read(0),te===R.length)break}R.readingMore=!1}G.prototype._read=function(F){B(this,new y("_read()"))},G.prototype.pipe=function(F,R){var te=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=F;break;case 1:ge.pipes=[ge.pipes,F];break;default:ge.pipes.push(F);break}ge.pipesCount+=1,c("pipe count=%d opts=%j",ge.pipesCount,R);var Ce=(!R||R.end!==!1)&&F!==r.stdout&&F!==r.stderr,xe=Ce?_e:p;ge.endEmitted?r.nextTick(xe):te.once("end",xe),F.on("unpipe",he);function he(m,N){c("onunpipe"),m===te&&N&&N.hasUnpiped===!1&&(N.hasUnpiped=!0,Te())}function _e(){c("onend"),F.end()}var Oe=H(te);F.on("drain",Oe);var Ie=!1;function Te(){c("cleanup"),F.removeListener("close",Ge),F.removeListener("finish",x),F.removeListener("drain",Oe),F.removeListener("error",qe),F.removeListener("unpipe",he),te.removeListener("end",_e),te.removeListener("end",p),te.removeListener("data",We),Ie=!0,ge.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&Oe()}te.on("data",We);function We(m){c("ondata");var N=F.write(m);c("dest.write",N),N===!1&&((ge.pipesCount===1&&ge.pipes===F||ge.pipesCount>1&&pe(ge.pipes,F)!==-1)&&!Ie&&(c("false write response, pause",ge.awaitDrain),ge.awaitDrain++),te.pause())}function qe(m){c("onerror",m),p(),F.removeListener("error",qe),t(F,"error")===0&&B(F,m)}Z(F,"error",qe);function Ge(){F.removeListener("finish",x),p()}F.once("close",Ge);function x(){c("onfinish"),F.removeListener("close",Ge),p()}F.once("finish",x);function p(){c("unpipe"),te.unpipe(F)}return F.emit("pipe",te),ge.flowing||(c("pipe resume"),te.resume()),F};function H(F){return function(){var te=F._readableState;c("pipeOnDrain",te.awaitDrain),te.awaitDrain&&te.awaitDrain--,te.awaitDrain===0&&t(F,"data")&&(te.flowing=!0,P(F))}}G.prototype.unpipe=function(F){var R=this._readableState,te={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return F&&F!==R.pipes?this:(F||(F=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,F&&F.emit("unpipe",this,te),this);if(!F){var ge=R.pipes,Ce=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var xe=0;xe<Ce;xe++)ge[xe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=pe(R.pipes,F);return he===-1?this:(R.pipes.splice(he,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),F.emit("unpipe",this,te),this)},G.prototype.on=function(F,R){var te=n.prototype.on.call(this,F,R),ge=this._readableState;return F==="data"?(ge.readableListening=this.listenerCount("readable")>0,ge.flowing!==!1&&this.resume()):F==="readable"&&!ge.endEmitted&&!ge.readableListening&&(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,c("on readable",ge.length,ge.reading),ge.length?O(this):ge.reading||r.nextTick(Q,this)),te},G.prototype.addListener=G.prototype.on,G.prototype.removeListener=function(F,R){var te=n.prototype.removeListener.call(this,F,R);return F==="readable"&&r.nextTick(j,this),te},G.prototype.removeAllListeners=function(F){var R=n.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&r.nextTick(j,this),R};function j(F){var R=F._readableState;R.readableListening=F.listenerCount("readable")>0,R.resumeScheduled&&!R.paused?R.flowing=!0:F.listenerCount("data")>0&&F.resume()}function Q(F){c("readable nexttick read 0"),F.read(0)}G.prototype.resume=function(){var F=this._readableState;return F.flowing||(c("resume"),F.flowing=!F.readableListening,K(this,F)),F.paused=!1,this};function K(F,R){R.resumeScheduled||(R.resumeScheduled=!0,r.nextTick(ee,F,R))}function ee(F,R){c("resume",R.reading),R.reading||F.read(0),R.resumeScheduled=!1,F.emit("resume"),P(F),R.flowing&&!R.reading&&F.read(0)}G.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function P(F){var R=F._readableState;for(c("flow",R.flowing);R.flowing&&F.read()!==null;);}G.prototype.wrap=function(F){var R=this,te=this._readableState,ge=!1;F.on("end",function(){if(c("wrapped end"),te.decoder&&!te.ended){var he=te.decoder.end();he&&he.length&&R.push(he)}R.push(null)}),F.on("data",function(he){if(c("wrapped data"),te.decoder&&(he=te.decoder.write(he)),!(te.objectMode&&he==null)&&!(!te.objectMode&&(!he||!he.length))){var _e=R.push(he);_e||(ge=!0,F.pause())}});for(var Ce in F)this[Ce]===void 0&&typeof F[Ce]=="function"&&(this[Ce]=(function(_e){return function(){return F[_e].apply(F,arguments)}})(Ce));for(var xe=0;xe<T.length;xe++)F.on(T[xe],this.emit.bind(this,T[xe]));return this._read=function(he){c("wrapped _read",he),ge&&(ge=!1,F.resume())},this},typeof Symbol=="function"&&(G.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=J5()),S(this)}),Object.defineProperty(G.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(G.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(G.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),G._fromList=I,Object.defineProperty(G.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function I(F,R){if(R.length===0)return null;var te;return R.objectMode?te=R.buffer.shift():!F||F>=R.length?(R.decoder?te=R.buffer.join(""):R.buffer.length===1?te=R.buffer.first():te=R.buffer.concat(R.length),R.buffer.clear()):te=R.buffer.consume(F,R.decoder),te}function k(F){var R=F._readableState;c("endReadable",R.endEmitted),R.endEmitted||(R.ended=!0,r.nextTick(ne,R,F))}function ne(F,R){if(c("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,R.readable=!1,R.emit("end"),F.autoDestroy)){var te=R._writableState;(!te||te.autoDestroy&&te.finished)&&R.destroy()}}typeof Symbol=="function"&&(G.from=function(F,R){return A===void 0&&(A=Q5()),A(G,F,R)});function pe(F,R){for(var te=0,ge=F.length;te<ge;te++)if(F[te]===R)return te;return-1}return bE}function OE(){if(LI)return wE;LI=!0,wE=a;var r=Jf().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,o=zu();Wu()(a,o);function s(f,h){var d=this._transformState;d.transforming=!1;var g=d.writecb;if(g===null)return this.emit("error",new t);d.writechunk=null,d.writecb=null,h!=null&&this.push(h),g(f);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);o.call(this,f),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",u)}function u(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,d){c(f,h,d)}):c(this,null,null)}a.prototype.push=function(f,h){return this._transformState.needTransform=!1,o.prototype.push.call(this,f,h)},a.prototype._transform=function(f,h,d){d(new e("_transform()"))},a.prototype._write=function(f,h,d){var g=this._transformState;if(g.writecb=d,g.writechunk=f,g.writeencoding=h,!g.transforming){var b=this._readableState;(g.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(f){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(f,h){o.prototype._destroy.call(this,f,function(d){h(d)})};function c(f,h,d){if(h)return f.emit("error",h);if(d!=null&&f.push(d),f._writableState.length)throw new i;if(f._transformState.transforming)throw new n;return f.push(null)}return wE}function YI(){if(PI)return vE;PI=!0,vE=e;var r=OE();Wu()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},vE}function XI(){if(BI)return _E;BI=!0;var r;function e(d){var g=!1;return function(){g||(g=!0,d.apply(void 0,arguments))}}var t=Jf().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function o(d){if(d)throw d}function s(d){return d.setHeader&&typeof d.abort=="function"}function a(d,g,b,v){v=e(v);var w=!1;d.on("close",function(){w=!0}),r===void 0&&(r=Q0()),r(d,{readable:g,writable:b},function(_){if(_)return v(_);w=!0,v()});var y=!1;return function(_){if(!w&&!y){if(y=!0,s(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();v(_||new i("pipe"))}}}function u(d){d()}function c(d,g){return d.pipe(g)}function f(d){return!d.length||typeof d[d.length-1]!="function"?o:d.pop()}function h(){for(var d=arguments.length,g=new Array(d),b=0;b<d;b++)g[b]=arguments[b];var v=f(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new n("streams");var w,y=g.map(function(_,E){var S=E<g.length-1,A=E>0;return a(_,S,A,function(B){w||(w=B),B&&y.forEach(u),!S&&(y.forEach(u),v(w))})});return g.reduce(c)}return _E=h,_E}var MI,Cs,xi,aI,V0,Fu,lI,x5,Ko,EE,Kf,cI,B5,M5,K0,Z0,to,F5,SE,TE,yI,Fp,bI,Y0,wI,$u,vI,Zf,X0,_I,oE,EI,aE,AI,lE,xI,uE,SI,cE,TI,fE,CI,hE,dE,RI,Z5,pE,DI,gE,II,mE,OI,yE,NI,bE,kI,eU,wE,LI,vE,PI,_E,BI,eb=Jt(()=>{Ne();Le();ke();Xf();cl();qf();for(MI={byteLength:function(r){var e=uI(r),t=e[0],n=e[1];return 3*(t+n)/4-n},toByteArray:function(r){var e,t,n=uI(r),i=n[0],o=n[1],s=new aI((function(c,f,h){return 3*(f+h)/4-h})(0,i,o)),a=0,u=o>0?i-4:i;for(t=0;t<u;t+=4)e=xi[r.charCodeAt(t)]<<18|xi[r.charCodeAt(t+1)]<<12|xi[r.charCodeAt(t+2)]<<6|xi[r.charCodeAt(t+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return o===2&&(e=xi[r.charCodeAt(t)]<<2|xi[r.charCodeAt(t+1)]>>4,s[a++]=255&e),o===1&&(e=xi[r.charCodeAt(t)]<<10|xi[r.charCodeAt(t+1)]<<4|xi[r.charCodeAt(t+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},fromByteArray:function(r){for(var e,t=r.length,n=t%3,i=[],o=0,s=t-n;o<s;o+=16383)i.push(A5(r,o,o+16383>s?s:o+16383));return n===1?(e=r[t-1],i.push(Cs[e>>2]+Cs[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Cs[e>>10]+Cs[e>>4&63]+Cs[e<<2&63]+"=")),i.join("")}},Cs=[],xi=[],aI=typeof Uint8Array<"u"?Uint8Array:Array,V0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fu=0,lI=V0.length;Fu<lI;++Fu)Cs[Fu]=V0[Fu],xi[V0.charCodeAt(Fu)]=Fu;xi[45]=62,xi[95]=63;x5={read:function(r,e,t,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,g=r[e+h];for(h+=d,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=256*o+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,n),o-=c}return(g?-1:1)*s*Math.pow(2,o-n)},write:function(r,e,t,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=255&a,g+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+g]=255&s,g+=b,s/=256,c-=8);r[t+g-b]|=128*v}},Ko={},EE=MI,Kf=x5,cI=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ko.Buffer=Ke,Ko.SlowBuffer=function(r){return+r!=r&&(r=0),Ke.alloc(+r)},Ko.INSPECT_MAX_BYTES=50;Ko.kMaxLength=2147483647,Ke.TYPED_ARRAY_SUPPORT=(function(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}})(),Ke.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Ke.prototype,"parent",{enumerable:!0,get:function(){if(Ke.isBuffer(this))return this.buffer}}),Object.defineProperty(Ke.prototype,"offset",{enumerable:!0,get:function(){if(Ke.isBuffer(this))return this.byteOffset}}),Ke.poolSize=8192,Ke.from=function(r,e,t){return FI(r,e,t)},Object.setPrototypeOf(Ke.prototype,Uint8Array.prototype),Object.setPrototypeOf(Ke,Uint8Array),Ke.alloc=function(r,e,t){return(function(n,i,o){return UI(n),n<=0?Yo(n):i!==void 0?typeof o=="string"?Yo(n).fill(i,o):Yo(n).fill(i):Yo(n)})(r,e,t)},Ke.allocUnsafe=function(r){return AE(r)},Ke.allocUnsafeSlow=function(r){return AE(r)},Ke.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==Ke.prototype},Ke.compare=function(r,e){if(Xo(r,Uint8Array)&&(r=Ke.from(r,r.offset,r.byteLength)),Xo(e,Uint8Array)&&(e=Ke.from(e,e.offset,e.byteLength)),!Ke.isBuffer(r)||!Ke.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0},Ke.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ke.concat=function(r,e){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return Ke.alloc(0);var t;if(e===void 0)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var n=Ke.allocUnsafe(e),i=0;for(t=0;t<r.length;++t){var o=r[t];if(Xo(o,Uint8Array)&&(o=Ke.from(o)),!Ke.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Ke.byteLength=jI,Ke.prototype._isBuffer=!0,Ke.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)Uu(this,e,e+1);return this},Ke.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)Uu(this,e,e+3),Uu(this,e+1,e+2);return this},Ke.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)Uu(this,e,e+7),Uu(this,e+1,e+6),Uu(this,e+2,e+5),Uu(this,e+3,e+4);return this},Ke.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?zI(this,0,r):S5.apply(this,arguments)},Ke.prototype.toLocaleString=Ke.prototype.toString,Ke.prototype.equals=function(r){if(!Ke.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||Ke.compare(this,r)===0},Ke.prototype.inspect=function(){var r="",e=Ko.INSPECT_MAX_BYTES;return r=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(r+=" ... "),"<Buffer "+r+">"},cI&&(Ke.prototype[cI]=Ke.prototype.inspect),Ke.prototype.compare=function(r,e,t,n,i){if(Xo(r,Uint8Array)&&(r=Ke.from(r,r.offset,r.byteLength)),!Ke.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(e===void 0&&(e=0),t===void 0&&(t=r?r.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),e<0||t>r.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=t)return 0;if(n>=i)return-1;if(e>=t)return 1;if(this===r)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(t>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=r.slice(e,t),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},Ke.prototype.includes=function(r,e,t){return this.indexOf(r,e,t)!==-1},Ke.prototype.indexOf=function(r,e,t){return hI(this,r,e,t,!0)},Ke.prototype.lastIndexOf=function(r,e,t){return hI(this,r,e,t,!1)},Ke.prototype.write=function(r,e,t,n){if(e===void 0)n="utf8",t=this.length,e=0;else if(t===void 0&&typeof e=="string")n=e,t=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(t)?(t>>>=0,n===void 0&&(n="utf8")):(n=t,t=void 0)}var i=this.length-e;if((t===void 0||t>i)&&(t=i),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return T5(this,r,e,t);case"utf8":case"utf-8":return C5(this,r,e,t);case"ascii":return $I(this,r,e,t);case"latin1":case"binary":return R5(this,r,e,t);case"base64":return D5(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I5(this,r,e,t);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Ke.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Ke.prototype.slice=function(r,e){var t=this.length;(r=~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),(e=e===void 0?t:~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),e<r&&(e=r);var n=this.subarray(r,e);return Object.setPrototypeOf(n,Ke.prototype),n},Ke.prototype.readUIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n},Ke.prototype.readUIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r+--e],i=1;e>0&&(i*=256);)n+=this[r+--e]*i;return n},Ke.prototype.readUInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),this[r]},Ke.prototype.readUInt16LE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]|this[r+1]<<8},Ke.prototype.readUInt16BE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]<<8|this[r+1]},Ke.prototype.readUInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},Ke.prototype.readUInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},Ke.prototype.readIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},Ke.prototype.readIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=e,i=1,o=this[r+--n];n>0&&(i*=256);)o+=this[r+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},Ke.prototype.readInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},Ke.prototype.readInt16LE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r]|this[r+1]<<8;return 32768&t?4294901760|t:t},Ke.prototype.readInt16BE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r+1]|this[r]<<8;return 32768&t?4294901760|t:t},Ke.prototype.readInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},Ke.prototype.readInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},Ke.prototype.readFloatLE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!0,23,4)},Ke.prototype.readFloatBE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!1,23,4)},Ke.prototype.readDoubleLE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!0,52,8)},Ke.prototype.readDoubleBE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!1,52,8)},Ke.prototype.writeUIntLE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=1,o=0;for(this[e]=255&r;++o<t&&(i*=256);)this[e+o]=r/i&255;return e+t},Ke.prototype.writeUIntBE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=t-1,o=1;for(this[e+i]=255&r;--i>=0&&(o*=256);)this[e+i]=r/o&255;return e+t},Ke.prototype.writeUInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,255,0),this[e]=255&r,e+1},Ke.prototype.writeUInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=255&r,this[e+1]=r>>>8,e+2},Ke.prototype.writeUInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=r>>>8,this[e+1]=255&r,e+2},Ke.prototype.writeUInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r,e+4},Ke.prototype.writeUInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Ke.prototype.writeIntLE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&r;++o<t&&(s*=256);)r<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Ke.prototype.writeIntBE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=t-1,s=1,a=0;for(this[e+o]=255&r;--o>=0&&(s*=256);)r<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Ke.prototype.writeInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,127,-128),r<0&&(r=255+r+1),this[e]=255&r,e+1},Ke.prototype.writeInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=255&r,this[e+1]=r>>>8,e+2},Ke.prototype.writeInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=r>>>8,this[e+1]=255&r,e+2},Ke.prototype.writeInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24,e+4},Ke.prototype.writeInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Ke.prototype.writeFloatLE=function(r,e,t){return pI(this,r,e,!0,t)},Ke.prototype.writeFloatBE=function(r,e,t){return pI(this,r,e,!1,t)},Ke.prototype.writeDoubleLE=function(r,e,t){return gI(this,r,e,!0,t)},Ke.prototype.writeDoubleBE=function(r,e,t){return gI(this,r,e,!1,t)},Ke.prototype.copy=function(r,e,t,n){if(!Ke.isBuffer(r))throw new TypeError("argument should be a Buffer");if(t||(t=0),n||n===0||(n=this.length),e>=r.length&&(e=r.length),e||(e=0),n>0&&n<t&&(n=t),n===t||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),r.length-e<n-t&&(n=r.length-e+t);var i=n-t;if(this===r&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,t,n);else if(this===r&&t<e&&e<n)for(var o=i-1;o>=0;--o)r[o+e]=this[o+t];else Uint8Array.prototype.set.call(r,this.subarray(t,n),e);return i},Ke.prototype.fill=function(r,e,t,n){if(typeof r=="string"){if(typeof e=="string"?(n=e,e=0,t=this.length):typeof t=="string"&&(n=t,t=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Ke.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(r.length===1){var i=r.charCodeAt(0);(n==="utf8"&&i<128||n==="latin1")&&(r=i)}}else typeof r=="number"?r&=255:typeof r=="boolean"&&(r=Number(r));if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;var o;if(e>>>=0,t=t===void 0?this.length:t>>>0,r||(r=0),typeof r=="number")for(o=e;o<t;++o)this[o]=r;else{var s=Ke.isBuffer(r)?r:Ke.from(r,n),a=s.length;if(a===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<t-e;++o)this[o+e]=s[o%a]}return this};B5=/[^+/0-9A-Za-z-_]/g;M5=(function(){for(var r=new Array(256),e=0;e<16;++e)for(var t=16*e,n=0;n<16;++n)r[t+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return r})();Ko.Buffer;Ko.INSPECT_MAX_BYTES;Ko.kMaxLength;K0={},Z0=Ko,to=Z0.Buffer;to.from&&to.alloc&&to.allocUnsafe&&to.allocUnsafeSlow?K0=Z0:(mI(Z0,K0),K0.Buffer=ju),ju.prototype=Object.create(to.prototype),mI(to,ju),ju.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return to(r,e,t)},ju.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=to(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n},ju.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return to(r)},ju.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Z0.SlowBuffer(r)};F5=K0,SE={},TE=F5.Buffer,yI=TE.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};SE.StringDecoder=Mp,Mp.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if((e=this.fillLast(r))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""},Mp.prototype.end=function(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e},Mp.prototype.text=function(r,e){var t=(function(i,o,s){var a=o.length-1;if(a<s)return 0;var u=sE(o[a]);return u>=0?(u>0&&(i.lastNeed=u-1),u):--a<s||u===-2?0:(u=sE(o[a]))>=0?(u>0&&(i.lastNeed=u-2),u):--a<s||u===-2?0:(u=sE(o[a]))>=0?(u>0&&(u===2?u=0:i.lastNeed=u-3),u):0})(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)},Mp.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};Fp={},bI=!1;Y0={},wI=!1;$u={},vI=!1;Zf=Y5();Zf.Buffer;Zf.INSPECT_MAX_BYTES;Zf.kMaxLength;X0={},_I=!1;oE={},EI=!1;aE={},AI=!1;lE={},xI=!1;uE={},SI=!1;cE={},TI=!1;fE={},CI=!1,hE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;dE={},RI=!1,Z5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pE={},DI=!1;gE={},II=!1;mE={},OI=!1;yE={},NI=!1;bE={},kI=!1,eU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;wE={},LI=!1;vE={},PI=!1;_E={},BI=!1});function tU(){if(KI)return NE;KI=!0,NE=t;var r=nn.EventEmitter,e=Wu();e(t,r),t.Readable=IE(),t.Writable=DE(),t.Duplex=zu(),t.Transform=OE(),t.PassThrough=YI(),t.finished=Q0(),t.pipeline=XI(),t.Stream=t;function t(){r.call(this||kE)}return t.prototype.pipe=function(n,i){var o=this||kE;function s(g){n.writable&&n.write(g)===!1&&o.pause&&o.pause()}o.on("data",s);function a(){o.readable&&o.resume&&o.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(o.on("end",c),o.on("close",f));var u=!1;function c(){u||(u=!0,n.end())}function f(){u||(u=!0,typeof n.destroy=="function"&&n.destroy())}function h(g){if(d(),r.listenerCount(this||kE,"error")===0)throw g}o.on("error",h),n.on("error",h);function d(){o.removeListener("data",s),n.removeListener("drain",a),o.removeListener("end",c),o.removeListener("close",f),o.removeListener("error",h),n.removeListener("error",h),o.removeListener("end",d),o.removeListener("close",d),n.removeListener("close",d)}return o.on("end",d),o.on("close",d),n.on("close",d),n.emit("pipe",o),n},NE}var NE,KI,kE,ii,ZI,LE=Jt(()=>{Ne();Le();ke();G0();eb();Xf();W0();cl();qf();NE={},KI=!1,kE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ii=tU(),ZI=ii.Readable;ZI.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new ZI(e).wrap(r)};ii.Writable;ii.Duplex;ii.Transform;ii.PassThrough;ii.finished;ii.pipeline;ii.Stream;W_(ii.finished),W_(ii.pipeline)});function rU(){if(JI)return PE;JI=!0;let r=2147483647,e=36,t=1,n=26,i=38,o=700,s=72,a=128,u="-",c=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=e-t,b=Math.floor,v=String.fromCharCode;function w(V){throw new RangeError(d[V])}function y(V,ue){let Ae=[],ve=V.length;for(;ve--;)Ae[ve]=ue(V[ve]);return Ae}function _(V,ue){let Ae=V.split("@"),ve="";Ae.length>1&&(ve=Ae[0]+"@",V=Ae[1]),V=V.replace(h,".");let z=V.split("."),O=y(z,ue).join(".");return ve+O}function E(V){let ue=[],Ae=0,ve=V.length;for(;Ae<ve;){let z=V.charCodeAt(Ae++);if(z>=55296&&z<=56319&&Ae<ve){let O=V.charCodeAt(Ae++);(O&64512)==56320?ue.push(((z&1023)<<10)+(O&1023)+65536):(ue.push(z),Ae--)}else ue.push(z)}return ue}let S=V=>String.fromCodePoint(...V),A=function(V){return V>=48&&V<58?26+(V-48):V>=65&&V<91?V-65:V>=97&&V<123?V-97:e},B=function(V,ue){return V+22+75*(V<26)-((ue!=0)<<5)},T=function(V,ue,Ae){let ve=0;for(V=Ae?b(V/o):V>>1,V+=b(V/ue);V>g*n>>1;ve+=e)V=b(V/g);return b(ve+(g+1)*V/(V+i))},Z=function(V){let ue=[],Ae=V.length,ve=0,z=a,O=s,oe=V.lastIndexOf(u);oe<0&&(oe=0);for(let q=0;q<oe;++q)V.charCodeAt(q)>=128&&w("not-basic"),ue.push(V.charCodeAt(q));for(let q=oe>0?oe+1:0;q<Ae;){let M=ve;for(let j=1,Q=e;;Q+=e){q>=Ae&&w("invalid-input");let K=A(V.charCodeAt(q++));K>=e&&w("invalid-input"),K>b((r-ve)/j)&&w("overflow"),ve+=K*j;let ee=Q<=O?t:Q>=O+n?n:Q-O;if(K<ee)break;let P=e-ee;j>b(r/P)&&w("overflow"),j*=P}let H=ue.length+1;O=T(ve-M,H,M==0),b(ve/H)>r-z&&w("overflow"),z+=b(ve/H),ve%=H,ue.splice(ve++,0,z)}return String.fromCodePoint(...ue)},ie=function(V){let ue=[];V=E(V);let Ae=V.length,ve=a,z=0,O=s;for(let M of V)M<128&&ue.push(v(M));let oe=ue.length,q=oe;for(oe&&ue.push(u);q<Ae;){let M=r;for(let j of V)j>=ve&&j<M&&(M=j);let H=q+1;M-ve>b((r-z)/H)&&w("overflow"),z+=(M-ve)*H,ve=M;for(let j of V)if(j<ve&&++z>r&&w("overflow"),j===ve){let Q=z;for(let K=e;;K+=e){let ee=K<=O?t:K>=O+n?n:K-O;if(Q<ee)break;let P=Q-ee,I=e-ee;ue.push(v(B(ee+P%I,0))),Q=b(P/I)}ue.push(v(B(Q,0))),O=T(z,H,q===oe),z=0,++q}++z,++ve}return ue.join("")};return PE={version:"2.3.1",ucs2:{decode:E,encode:S},decode:Z,encode:ie,toASCII:function(V){return _(V,function(ue){return f.test(ue)?"xn--"+ie(ue):ue})},toUnicode:function(V){return _(V,function(ue){return c.test(ue)?Z(ue.slice(4).toLowerCase()):ue})}},PE}var PE,JI,dl,eX,tX,rX,nX,iX,sX,BE=Jt(()=>{Ne();Le();ke();PE={},JI=!1;dl=rU(),eX=dl.decode,tX=dl.encode,rX=dl.toASCII,nX=dl.toUnicode,iX=dl.ucs2,sX=dl.version});function n2(){return QI||(QI=!0,ME=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),ME}function nU(){return eO||(eO=!0,FE=Error),FE}function iU(){return tO||(tO=!0,UE=EvalError),UE}function sU(){return rO||(rO=!0,jE=RangeError),jE}function oU(){return nO||(nO=!0,$E=ReferenceError),$E}function vO(){return iO||(iO=!0,zE=SyntaxError),zE}function Qf(){return sO||(sO=!0,WE=TypeError),WE}function aU(){return oO||(oO=!0,qE=URIError),qE}function lU(){if(aO)return HE;aO=!0;var r=typeof Symbol<"u"&&Symbol,e=n2();return HE=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},HE}function uU(){if(lO)return GE;lO=!0;var r={__proto__:null,foo:{}},e=Object;return GE=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},GE}function cU(){if(uO)return VE;uO=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(u,c){for(var f=[],h=0;h<u.length;h+=1)f[h]=u[h];for(var d=0;d<c.length;d+=1)f[d+u.length]=c[d];return f},o=function(u,c){for(var f=[],h=c,d=0;h<u.length;h+=1,d+=1)f[d]=u[h];return f},s=function(a,u){for(var c="",f=0;f<a.length;f+=1)c+=a[f],f+1<a.length&&(c+=u);return c};return VE=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var f=o(arguments,1),h,d=function(){if(this instanceof h){var y=c.apply(this,i(f,arguments));return Object(y)===y?y:this}return c.apply(u,i(f,arguments))},g=t(0,c.length-f.length),b=[],v=0;v<g;v++)b[v]="$"+v;if(h=Function("binder","return function ("+s(b,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var w=function(){};w.prototype=c.prototype,h.prototype=new w,w.prototype=null}return h},VE}function i2(){if(cO)return YE;cO=!0;var r=cU();return YE=Function.prototype.bind||r,YE}function fU(){if(fO)return XE;fO=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=i2();return XE=t.call(r,e),XE}function qu(){if(hO)return KE;hO=!0;var r,e=nU(),t=iU(),n=sU(),i=oU(),o=vO(),s=Qf(),a=aU(),u=Function,c=function(z){try{return u('"use strict"; return ('+z+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new s},d=f?(function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}})():h,g=lU()(),b=uU()(),v=Object.getPrototypeOf||(b?function(z){return z.__proto__}:null),w={},y=typeof Uint8Array>"u"||!v?r:v(Uint8Array),_={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!v?r:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!v?r:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(v)try{null.error}catch(z){var E=v(v(z));_["%Error.prototype%"]=E}var S=function z(O){var oe;if(O==="%AsyncFunction%")oe=c("async function () {}");else if(O==="%GeneratorFunction%")oe=c("function* () {}");else if(O==="%AsyncGeneratorFunction%")oe=c("async function* () {}");else if(O==="%AsyncGenerator%"){var q=z("%AsyncGeneratorFunction%");q&&(oe=q.prototype)}else if(O==="%AsyncIteratorPrototype%"){var M=z("%AsyncGenerator%");M&&v&&(oe=v(M.prototype))}return _[O]=oe,oe},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=i2(),T=fU(),Z=B.call(Function.call,Array.prototype.concat),ie=B.call(Function.apply,Array.prototype.splice),G=B.call(Function.call,String.prototype.replace),ae=B.call(Function.call,String.prototype.slice),U=B.call(Function.call,RegExp.prototype.exec),V=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ue=/\\(\\)?/g,Ae=function(O){var oe=ae(O,0,1),q=ae(O,-1);if(oe==="%"&&q!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(q==="%"&&oe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var M=[];return G(O,V,function(H,j,Q,K){M[M.length]=Q?G(K,ue,"$1"):j||H}),M},ve=function(O,oe){var q=O,M;if(T(A,q)&&(M=A[q],q="%"+M[0]+"%"),T(_,q)){var H=_[q];if(H===w&&(H=S(q)),typeof H>"u"&&!oe)throw new s("intrinsic "+O+" exists, but is not available. Please file an issue!");return{alias:M,name:q,value:H}}throw new o("intrinsic "+O+" does not exist!")};return KE=function(O,oe){if(typeof O!="string"||O.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof oe!="boolean")throw new s('"allowMissing" argument must be a boolean');if(U(/^%?[^%]*%?$/,O)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var q=Ae(O),M=q.length>0?q[0]:"",H=ve("%"+M+"%",oe),j=H.name,Q=H.value,K=!1,ee=H.alias;ee&&(M=ee[0],ie(q,Z([0,1],ee)));for(var P=1,I=!0;P<q.length;P+=1){var k=q[P],ne=ae(k,0,1),pe=ae(k,-1);if((ne==='"'||ne==="'"||ne==="`"||pe==='"'||pe==="'"||pe==="`")&&ne!==pe)throw new o("property names with quotes must have matching quotes");if((k==="constructor"||!I)&&(K=!0),M+="."+k,j="%"+M+"%",T(_,j))Q=_[j];else if(Q!=null){if(!(k in Q)){if(!oe)throw new s("base intrinsic for "+O+" exists, but the property is not available.");return}if(f&&P+1>=q.length){var F=f(Q,k);I=!!F,I&&"get"in F&&!("originalValue"in F.get)?Q=F.get:Q=Q[k]}else I=T(Q,k),Q=Q[k];I&&!K&&(_[j]=Q)}}return Q},KE}function s2(){if(dO)return ZE;dO=!0;var r=qu(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ZE=e,ZE}function tb(){if(pO)return JE;pO=!0;var r=qu(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return JE=e,JE}function hU(){if(gO)return QE;gO=!0;var r=s2(),e=vO(),t=Qf(),n=tb();return QE=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,d=!!n&&n(o,s);if(r)r(o,s,{configurable:f===null&&d?d.configurable:!f,enumerable:u===null&&d?d.enumerable:!u,value:a,writable:c===null&&d?d.writable:!c});else if(h||!u&&!c&&!f)o[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},QE}function dU(){if(mO)return e2;mO=!0;var r=s2(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},e2=e,e2}function pU(){if(yO)return t2;yO=!0;var r=qu(),e=hU(),t=dU()(),n=tb(),i=Qf(),o=r("%Math.floor%");return t2=function(a,u){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||o(u)!==u)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(h=!1)}return(f||h||!c)&&(t?e(a,"length",u,!0,!0):e(a,"length",u)),a},t2}function o2(){if(bO)return Up;bO=!0;var r=i2(),e=qu(),t=pU(),n=Qf(),i=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||r.call(o,i),a=s2(),u=e("%Math.max%");Up=function(h){if(typeof h!="function")throw new n("a function is required");var d=s(r,o,arguments);return t(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return s(r,i,arguments)};return a?a(Up,"apply",{value:c}):Up.apply=c,Up}function jp(){if(wO)return r2;wO=!0;var r=qu(),e=o2(),t=e(r("String.prototype.indexOf"));return r2=function(i,o){var s=r(i,!!o);return typeof s=="function"&&t(i,".prototype.")>-1?e(s):s},r2}var ME,QI,FE,eO,UE,tO,jE,rO,$E,nO,zE,iO,WE,sO,qE,oO,HE,aO,GE,lO,VE,uO,YE,cO,XE,fO,KE,hO,ZE,dO,JE,pO,QE,gO,e2,mO,t2,yO,Up,bO,r2,wO,$p=Jt(()=>{Ne();Le();ke();ME={},QI=!1;FE={},eO=!1;UE={},tO=!1;jE={},rO=!1;$E={},nO=!1;zE={},iO=!1;WE={},sO=!1;qE={},oO=!1;HE={},aO=!1;GE={},lO=!1;VE={},uO=!1;YE={},cO=!1;XE={},fO=!1;KE={},hO=!1;ZE={},dO=!1;JE={},pO=!1;QE={},gO=!1;e2={},mO=!1;t2={},yO=!1;Up={},bO=!1;r2={},wO=!1});function gU(){if(_O)return a2;_O=!0;var r=zr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var g=a.lastIndexOf("/");if(g!==a.length-1){g===-1?(a="",u=0):(a=a.slice(0,g),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,g=d-h,b=f<g?f:g,v=-1,w=0;w<=b;++w){if(w===b){if(g>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,g=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else g===-1&&(f=!1,g=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=g))}return u===c?c=g:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var g=s.charCodeAt(d);if(g===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),g===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,g=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}g===-1&&(b=!1,g=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||g===-1||w===0||w===1&&h===g-1&&h===d+1?g!==-1&&(d===0&&c?a.base=a.name=s.slice(1,g):a.base=a.name=s.slice(d,g)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,g)):(a.name=s.slice(d,h),a.base=s.slice(d,g)),a.ext=s.slice(h,g)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,a2=i,a2}var a2,_O,l2,u2=Jt(()=>{Ne();Le();ke();Mu();a2={},_O=!1;l2=gU()});function yU(){if(EO)return c2;EO=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&o&&typeof o.get=="function"?o.get:null,a=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,g=d?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,v=Object.prototype.toString,w=Function.prototype.toString,y=String.prototype.match,_=String.prototype.slice,E=String.prototype.replace,S=String.prototype.toUpperCase,A=String.prototype.toLowerCase,B=RegExp.prototype.test,T=Array.prototype.concat,Z=Array.prototype.join,ie=Array.prototype.slice,G=Math.floor,ae=typeof BigInt=="function"?BigInt.prototype.valueOf:null,U=Object.getOwnPropertySymbols,V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ue=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ae=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ue||!0)?Symbol.toStringTag:null,ve=Object.prototype.propertyIsEnumerable,z=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(be){return be.__proto__}:null);function O(be,Se){if(be===1/0||be===-1/0||be!==be||be&&be>-1e3&&be<1e3||B.call(/e/,Se))return Se;var Y=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof be=="number"){var me=be<0?-G(-be):G(be);if(me!==be){var $=String(me),Pe=_.call(Se,$.length+1);return E.call($,Y,"$&_")+"."+E.call(E.call(Pe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(Se,Y,"$&_")}var oe=mU,q=oe.custom,M=pe(q)?q:null;c2=function be(Se,Y,me,$){var Pe=Y||{};if(te(Pe,"quoteStyle")&&Pe.quoteStyle!=="single"&&Pe.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(te(Pe,"maxStringLength")&&(typeof Pe.maxStringLength=="number"?Pe.maxStringLength<0&&Pe.maxStringLength!==1/0:Pe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ze=te(Pe,"customInspect")?Pe.customInspect:!0;if(typeof ze!="boolean"&&ze!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(te(Pe,"indent")&&Pe.indent!==null&&Pe.indent!=="	"&&!(parseInt(Pe.indent,10)===Pe.indent&&Pe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(te(Pe,"numericSeparator")&&typeof Pe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var C=Pe.numericSeparator;if(typeof Se>"u")return"undefined";if(Se===null)return"null";if(typeof Se=="boolean")return Se?"true":"false";if(typeof Se=="string")return qe(Se,Pe);if(typeof Se=="number"){if(Se===0)return 1/0/Se>0?"0":"-0";var Fe=String(Se);return C?O(Se,Fe):Fe}if(typeof Se=="bigint"){var Ue=String(Se)+"n";return C?O(Se,Ue):Ue}var de=typeof Pe.depth>"u"?5:Pe.depth;if(typeof me>"u"&&(me=0),me>=de&&de>0&&typeof Se=="object")return Q(Se)?"[Array]":"[Object]";var De=re(Pe,me);if(typeof $>"u")$=[];else if(xe($,Se)>=0)return"[Circular]";function Me(Yt,Zr,Jr){if(Zr&&($=ie.call($),$.push(Zr)),Jr){var Qr={depth:Pe.depth};return te(Pe,"quoteStyle")&&(Qr.quoteStyle=Pe.quoteStyle),be(Yt,Qr,me+1,$)}return be(Yt,Pe,me+1,$)}if(typeof Se=="function"&&!ee(Se)){var tt=Ce(Se),ce=fe(Se,Me);return"[Function"+(tt?": "+tt:" (anonymous)")+"]"+(ce.length>0?" { "+Z.call(ce,", ")+" }":"")}if(pe(Se)){var we=ue?E.call(String(Se),/^(Symbol\(.*\))_[^)]*$/,"$1"):V.call(Se);return typeof Se=="object"&&!ue?x(we):we}if(We(Se)){for(var He="<"+A.call(String(Se.nodeName)),$e=Se.attributes||[],et=0;et<$e.length;et++)He+=" "+$e[et].name+"="+H(j($e[et].value),"double",Pe);return He+=">",Se.childNodes&&Se.childNodes.length&&(He+="..."),He+="</"+A.call(String(Se.nodeName))+">",He}if(Q(Se)){if(Se.length===0)return"[]";var dt=fe(Se,Me);return De&&!N(dt)?"["+D(dt,De)+"]":"[ "+Z.call(dt,", ")+" ]"}if(P(Se)){var Rt=fe(Se,Me);return!("cause"in Error.prototype)&&"cause"in Se&&!ve.call(Se,"cause")?"{ ["+String(Se)+"] "+Z.call(T.call("[cause]: "+Me(Se.cause),Rt),", ")+" }":Rt.length===0?"["+String(Se)+"]":"{ ["+String(Se)+"] "+Z.call(Rt,", ")+" }"}if(typeof Se=="object"&&ze){if(M&&typeof Se[M]=="function"&&oe)return oe(Se,{depth:de-me});if(ze!=="symbol"&&typeof Se.inspect=="function")return Se.inspect()}if(he(Se)){var Et=[];return n&&n.call(Se,function(Yt,Zr){Et.push(Me(Zr,Se,!0)+" => "+Me(Yt,Se))}),m("Map",t.call(Se),Et,De)}if(Ie(Se)){var ar=[];return a&&a.call(Se,function(Yt){ar.push(Me(Yt,Se))}),m("Set",s.call(Se),ar,De)}if(_e(Se))return p("WeakMap");if(Te(Se))return p("WeakSet");if(Oe(Se))return p("WeakRef");if(k(Se))return x(Me(Number(Se)));if(F(Se))return x(Me(ae.call(Se)));if(ne(Se))return x(b.call(Se));if(I(Se))return x(Me(String(Se)));if(typeof window<"u"&&Se===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Se===globalThis||typeof f2<"u"&&Se===f2)return"{ [object globalThis] }";if(!K(Se)&&!ee(Se)){var _i=fe(Se,Me),qn=z?z(Se)===Object.prototype:Se instanceof Object||Se.constructor===Object,Ht=Se instanceof Object?"":"null prototype",Dr=!qn&&Ae&&Object(Se)===Se&&Ae in Se?_.call(ge(Se),8,-1):Ht?"Object":"",yr=qn||typeof Se.constructor!="function"?"":Se.constructor.name?Se.constructor.name+" ":"",Wt=yr+(Dr||Ht?"["+Z.call(T.call([],Dr||[],Ht||[]),": ")+"] ":"");return _i.length===0?Wt+"{}":De?Wt+"{"+D(_i,De)+"}":Wt+"{ "+Z.call(_i,", ")+" }"}return String(Se)};function H(be,Se,Y){var me=(Y.quoteStyle||Se)==="double"?'"':"'";return me+be+me}function j(be){return E.call(String(be),/"/g,"&quot;")}function Q(be){return ge(be)==="[object Array]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function K(be){return ge(be)==="[object Date]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function ee(be){return ge(be)==="[object RegExp]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function P(be){return ge(be)==="[object Error]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function I(be){return ge(be)==="[object String]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function k(be){return ge(be)==="[object Number]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function ne(be){return ge(be)==="[object Boolean]"&&(!Ae||!(typeof be=="object"&&Ae in be))}function pe(be){if(ue)return be&&typeof be=="object"&&be instanceof Symbol;if(typeof be=="symbol")return!0;if(!be||typeof be!="object"||!V)return!1;try{return V.call(be),!0}catch{}return!1}function F(be){if(!be||typeof be!="object"||!ae)return!1;try{return ae.call(be),!0}catch{}return!1}var R=Object.prototype.hasOwnProperty||function(be){return be in(this||f2)};function te(be,Se){return R.call(be,Se)}function ge(be){return v.call(be)}function Ce(be){if(be.name)return be.name;var Se=y.call(w.call(be),/^function\s*([\w$]+)/);return Se?Se[1]:null}function xe(be,Se){if(be.indexOf)return be.indexOf(Se);for(var Y=0,me=be.length;Y<me;Y++)if(be[Y]===Se)return Y;return-1}function he(be){if(!t||!be||typeof be!="object")return!1;try{t.call(be);try{s.call(be)}catch{return!0}return be instanceof Map}catch{}return!1}function _e(be){if(!c||!be||typeof be!="object")return!1;try{c.call(be,c);try{h.call(be,h)}catch{return!0}return be instanceof WeakMap}catch{}return!1}function Oe(be){if(!g||!be||typeof be!="object")return!1;try{return g.call(be),!0}catch{}return!1}function Ie(be){if(!s||!be||typeof be!="object")return!1;try{s.call(be);try{t.call(be)}catch{return!0}return be instanceof Set}catch{}return!1}function Te(be){if(!h||!be||typeof be!="object")return!1;try{h.call(be,h);try{c.call(be,c)}catch{return!0}return be instanceof WeakSet}catch{}return!1}function We(be){return!be||typeof be!="object"?!1:typeof HTMLElement<"u"&&be instanceof HTMLElement?!0:typeof be.nodeName=="string"&&typeof be.getAttribute=="function"}function qe(be,Se){if(be.length>Se.maxStringLength){var Y=be.length-Se.maxStringLength,me="... "+Y+" more character"+(Y>1?"s":"");return qe(_.call(be,0,Se.maxStringLength),Se)+me}var $=E.call(E.call(be,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ge);return H($,"single",Se)}function Ge(be){var Se=be.charCodeAt(0),Y={8:"b",9:"t",10:"n",12:"f",13:"r"}[Se];return Y?"\\"+Y:"\\x"+(Se<16?"0":"")+S.call(Se.toString(16))}function x(be){return"Object("+be+")"}function p(be){return be+" { ? }"}function m(be,Se,Y,me){var $=me?D(Y,me):Z.call(Y,", ");return be+" ("+Se+") {"+$+"}"}function N(be){for(var Se=0;Se<be.length;Se++)if(xe(be[Se],`
`)>=0)return!1;return!0}function re(be,Se){var Y;if(be.indent==="	")Y="	";else if(typeof be.indent=="number"&&be.indent>0)Y=Z.call(Array(be.indent+1)," ");else return null;return{base:Y,prev:Z.call(Array(Se+1),Y)}}function D(be,Se){if(be.length===0)return"";var Y=`
`+Se.prev+Se.base;return Y+Z.call(be,","+Y)+`
`+Se.prev}function fe(be,Se){var Y=Q(be),me=[];if(Y){me.length=be.length;for(var $=0;$<be.length;$++)me[$]=te(be,$)?Se(be[$],be):""}var Pe=typeof U=="function"?U(be):[],ze;if(ue){ze={};for(var C=0;C<Pe.length;C++)ze["$"+Pe[C]]=Pe[C]}for(var Fe in be)te(be,Fe)&&(Y&&String(Number(Fe))===Fe&&Fe<be.length||ue&&ze["$"+Fe]instanceof Symbol||(B.call(/[^\w$]/,Fe)?me.push(Se(Fe,be)+": "+Se(be[Fe],be)):me.push(Fe+": "+Se(be[Fe],be))));if(typeof U=="function")for(var Ue=0;Ue<Pe.length;Ue++)ve.call(be,Pe[Ue])&&me.push("["+Se(Pe[Ue])+"]: "+Se(be[Pe[Ue]],be));return me}return c2}function bU(){if(AO)return h2;AO=!0;var r=qu(),e=jp(),t=yU(),n=Qf(),i=r("%WeakMap%",!0),o=r("%Map%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),f=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),d=function(w,y){for(var _=w,E;(E=_.next)!==null;_=E)if(E.key===y)return _.next=E.next,E.next=w.next,w.next=E,E},g=function(w,y){var _=d(w,y);return _&&_.value},b=function(w,y,_){var E=d(w,y);E?E.value=_:w.next={key:y,next:w.next,value:_}},v=function(w,y){return!!d(w,y)};return h2=function(){var y,_,E,S={assert:function(A){if(!S.has(A))throw new n("Side channel does not contain "+t(A))},get:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return s(y,A)}else if(o){if(_)return c(_,A)}else if(E)return g(E,A)},has:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return u(y,A)}else if(o){if(_)return h(_,A)}else if(E)return v(E,A);return!1},set:function(A,B){i&&A&&(typeof A=="object"||typeof A=="function")?(y||(y=new i),a(y,A,B)):o?(_||(_=new o),f(_,A,B)):(E||(E={key:{},next:null}),b(E,A,B))}};return S},h2}function w2(){if(xO)return d2;xO=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return d2={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},d2}function IO(){if(SO)return p2;SO=!0;var r=w2(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var w=[],y=0;y<256;++y)w.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return w})(),i=function(y){for(;y.length>1;){var _=y.pop(),E=_.obj[_.prop];if(t(E)){for(var S=[],A=0;A<E.length;++A)typeof E[A]<"u"&&S.push(E[A]);_.obj[_.prop]=S}}},o=function(y,_){for(var E=_&&_.plainObjects?Object.create(null):{},S=0;S<y.length;++S)typeof y[S]<"u"&&(E[S]=y[S]);return E},s=function w(y,_,E){if(!_)return y;if(typeof _!="object"){if(t(y))y.push(_);else if(y&&typeof y=="object")(E&&(E.plainObjects||E.allowPrototypes)||!e.call(Object.prototype,_))&&(y[_]=!0);else return[y,_];return y}if(!y||typeof y!="object")return[y].concat(_);var S=y;return t(y)&&!t(_)&&(S=o(y,E)),t(y)&&t(_)?(_.forEach(function(A,B){if(e.call(y,B)){var T=y[B];T&&typeof T=="object"&&A&&typeof A=="object"?y[B]=w(T,A,E):y.push(A)}else y[B]=A}),y):Object.keys(_).reduce(function(A,B){var T=_[B];return e.call(A,B)?A[B]=w(A[B],T,E):A[B]=T,A},S)},a=function(y,_){return Object.keys(_).reduce(function(E,S){return E[S]=_[S],E},y)},u=function(w,y,_){var E=w.replace(/\+/g," ");if(_==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},c=1024,f=function(y,_,E,S,A){if(y.length===0)return y;var B=y;if(typeof y=="symbol"?B=Symbol.prototype.toString.call(y):typeof y!="string"&&(B=String(y)),E==="iso-8859-1")return escape(B).replace(/%u[0-9a-f]{4}/gi,function(V){return"%26%23"+parseInt(V.slice(2),16)+"%3B"});for(var T="",Z=0;Z<B.length;Z+=c){for(var ie=B.length>=c?B.slice(Z,Z+c):B,G=[],ae=0;ae<ie.length;++ae){var U=ie.charCodeAt(ae);if(U===45||U===46||U===95||U===126||U>=48&&U<=57||U>=65&&U<=90||U>=97&&U<=122||A===r.RFC1738&&(U===40||U===41)){G[G.length]=ie.charAt(ae);continue}if(U<128){G[G.length]=n[U];continue}if(U<2048){G[G.length]=n[192|U>>6]+n[128|U&63];continue}if(U<55296||U>=57344){G[G.length]=n[224|U>>12]+n[128|U>>6&63]+n[128|U&63];continue}ae+=1,U=65536+((U&1023)<<10|ie.charCodeAt(ae)&1023),G[G.length]=n[240|U>>18]+n[128|U>>12&63]+n[128|U>>6&63]+n[128|U&63]}T+=G.join("")}return T},h=function(y){for(var _=[{obj:{o:y},prop:"o"}],E=[],S=0;S<_.length;++S)for(var A=_[S],B=A.obj[A.prop],T=Object.keys(B),Z=0;Z<T.length;++Z){var ie=T[Z],G=B[ie];typeof G=="object"&&G!==null&&E.indexOf(G)===-1&&(_.push({obj:B,prop:ie}),E.push(G))}return i(_),y},d=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},g=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},b=function(y,_){return[].concat(y,_)},v=function(y,_){if(t(y)){for(var E=[],S=0;S<y.length;S+=1)E.push(_(y[S]));return E}return _(y)};return p2={arrayToObject:o,assign:a,combine:b,compact:h,decode:u,encode:f,isBuffer:g,isRegExp:d,maybeMap:v,merge:s},p2}function wU(){if(TO)return g2;TO=!0;var r=bU(),e=IO(),t=w2(),n=Object.prototype.hasOwnProperty,i={brackets:function(w){return w+"[]"},comma:"comma",indices:function(w,y){return w+"["+y+"]"},repeat:function(w){return w}},o=Array.isArray,s=Array.prototype.push,a=function(v,w){s.apply(v,o(w)?w:[w])},u=Date.prototype.toISOString,c=t.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(w){return u.call(w)},skipNulls:!1,strictNullHandling:!1},h=function(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w=="symbol"||typeof w=="bigint"},d={},g=function v(w,y,_,E,S,A,B,T,Z,ie,G,ae,U,V,ue,Ae,ve,z){for(var O=w,oe=z,q=0,M=!1;(oe=oe.get(d))!==void 0&&!M;){var H=oe.get(w);if(q+=1,typeof H<"u"){if(H===q)throw new RangeError("Cyclic object value");M=!0}typeof oe.get(d)>"u"&&(q=0)}if(typeof ie=="function"?O=ie(y,O):O instanceof Date?O=U(O):_==="comma"&&o(O)&&(O=e.maybeMap(O,function(ge){return ge instanceof Date?U(ge):ge})),O===null){if(A)return Z&&!Ae?Z(y,f.encoder,ve,"key",V):y;O=""}if(h(O)||e.isBuffer(O)){if(Z){var j=Ae?y:Z(y,f.encoder,ve,"key",V);return[ue(j)+"="+ue(Z(O,f.encoder,ve,"value",V))]}return[ue(y)+"="+ue(String(O))]}var Q=[];if(typeof O>"u")return Q;var K;if(_==="comma"&&o(O))Ae&&Z&&(O=e.maybeMap(O,Z)),K=[{value:O.length>0?O.join(",")||null:void 0}];else if(o(ie))K=ie;else{var ee=Object.keys(O);K=G?ee.sort(G):ee}var P=T?y.replace(/\./g,"%2E"):y,I=E&&o(O)&&O.length===1?P+"[]":P;if(S&&o(O)&&O.length===0)return I+"[]";for(var k=0;k<K.length;++k){var ne=K[k],pe=typeof ne=="object"&&typeof ne.value<"u"?ne.value:O[ne];if(!(B&&pe===null)){var F=ae&&T?ne.replace(/\./g,"%2E"):ne,R=o(O)?typeof _=="function"?_(I,F):I:I+(ae?"."+F:"["+F+"]");z.set(w,q);var te=r();te.set(d,z),a(Q,v(pe,R,_,E,S,A,B,T,_==="comma"&&Ae&&o(O)?null:Z,ie,G,ae,U,V,ue,Ae,ve,te))}}return Q},b=function(w){if(!w)return f;if(typeof w.allowEmptyArrays<"u"&&typeof w.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof w.encodeDotInKeys<"u"&&typeof w.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(w.encoder!==null&&typeof w.encoder<"u"&&typeof w.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=w.charset||f.charset;if(typeof w.charset<"u"&&w.charset!=="utf-8"&&w.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _=t.default;if(typeof w.format<"u"){if(!n.call(t.formatters,w.format))throw new TypeError("Unknown format option provided.");_=w.format}var E=t.formatters[_],S=f.filter;(typeof w.filter=="function"||o(w.filter))&&(S=w.filter);var A;if(w.arrayFormat in i?A=w.arrayFormat:"indices"in w?A=w.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in w&&typeof w.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var B=typeof w.allowDots>"u"?w.encodeDotInKeys===!0?!0:f.allowDots:!!w.allowDots;return{addQueryPrefix:typeof w.addQueryPrefix=="boolean"?w.addQueryPrefix:f.addQueryPrefix,allowDots:B,allowEmptyArrays:typeof w.allowEmptyArrays=="boolean"?!!w.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:y,charsetSentinel:typeof w.charsetSentinel=="boolean"?w.charsetSentinel:f.charsetSentinel,commaRoundTrip:w.commaRoundTrip,delimiter:typeof w.delimiter>"u"?f.delimiter:w.delimiter,encode:typeof w.encode=="boolean"?w.encode:f.encode,encodeDotInKeys:typeof w.encodeDotInKeys=="boolean"?w.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof w.encoder=="function"?w.encoder:f.encoder,encodeValuesOnly:typeof w.encodeValuesOnly=="boolean"?w.encodeValuesOnly:f.encodeValuesOnly,filter:S,format:_,formatter:E,serializeDate:typeof w.serializeDate=="function"?w.serializeDate:f.serializeDate,skipNulls:typeof w.skipNulls=="boolean"?w.skipNulls:f.skipNulls,sort:typeof w.sort=="function"?w.sort:null,strictNullHandling:typeof w.strictNullHandling=="boolean"?w.strictNullHandling:f.strictNullHandling}};return g2=function(v,w){var y=v,_=b(w),E,S;typeof _.filter=="function"?(S=_.filter,y=S("",y)):o(_.filter)&&(S=_.filter,E=S);var A=[];if(typeof y!="object"||y===null)return"";var B=i[_.arrayFormat],T=B==="comma"&&_.commaRoundTrip;E||(E=Object.keys(y)),_.sort&&E.sort(_.sort);for(var Z=r(),ie=0;ie<E.length;++ie){var G=E[ie];_.skipNulls&&y[G]===null||a(A,g(y[G],G,B,T,_.allowEmptyArrays,_.strictNullHandling,_.skipNulls,_.encodeDotInKeys,_.encode?_.encoder:null,_.filter,_.sort,_.allowDots,_.serializeDate,_.format,_.formatter,_.encodeValuesOnly,_.charset,Z))}var ae=A.join(_.delimiter),U=_.addQueryPrefix===!0?"?":"";return _.charsetSentinel&&(_.charset==="iso-8859-1"?U+="utf8=%26%2310003%3B&":U+="utf8=%E2%9C%93&"),ae.length>0?U+ae:""},g2}function vU(){if(CO)return m2;CO=!0;var r=IO(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(d){return d.replace(/&#(\d+);/g,function(g,b){return String.fromCharCode(parseInt(b,10))})},o=function(d,g){return d&&typeof d=="string"&&g.comma&&d.indexOf(",")>-1?d.split(","):d},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",u=function(g,b){var v={__proto__:null},w=b.ignoreQueryPrefix?g.replace(/^\?/,""):g;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=b.parameterLimit===1/0?void 0:b.parameterLimit,_=w.split(b.delimiter,y),E=-1,S,A=b.charset;if(b.charsetSentinel)for(S=0;S<_.length;++S)_[S].indexOf("utf8=")===0&&(_[S]===a?A="utf-8":_[S]===s&&(A="iso-8859-1"),E=S,S=_.length);for(S=0;S<_.length;++S)if(S!==E){var B=_[S],T=B.indexOf("]="),Z=T===-1?B.indexOf("="):T+1,ie,G;Z===-1?(ie=b.decoder(B,n.decoder,A,"key"),G=b.strictNullHandling?null:""):(ie=b.decoder(B.slice(0,Z),n.decoder,A,"key"),G=r.maybeMap(o(B.slice(Z+1),b),function(U){return b.decoder(U,n.decoder,A,"value")})),G&&b.interpretNumericEntities&&A==="iso-8859-1"&&(G=i(G)),B.indexOf("[]=")>-1&&(G=t(G)?[G]:G);var ae=e.call(v,ie);ae&&b.duplicates==="combine"?v[ie]=r.combine(v[ie],G):(!ae||b.duplicates==="last")&&(v[ie]=G)}return v},c=function(d,g,b,v){for(var w=v?g:o(g,b),y=d.length-1;y>=0;--y){var _,E=d[y];if(E==="[]"&&b.parseArrays)_=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{_=b.plainObjects?Object.create(null):{};var S=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,A=b.decodeDotInKeys?S.replace(/%2E/g,"."):S,B=parseInt(A,10);!b.parseArrays&&A===""?_={0:w}:!isNaN(B)&&E!==A&&String(B)===A&&B>=0&&b.parseArrays&&B<=b.arrayLimit?(_=[],_[B]=w):A!=="__proto__"&&(_[A]=w)}w=_}return w},f=function(g,b,v,w){if(g){var y=v.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,_=/(\[[^[\]]*])/,E=/(\[[^[\]]*])/g,S=v.depth>0&&_.exec(y),A=S?y.slice(0,S.index):y,B=[];if(A){if(!v.plainObjects&&e.call(Object.prototype,A)&&!v.allowPrototypes)return;B.push(A)}for(var T=0;v.depth>0&&(S=E.exec(y))!==null&&T<v.depth;){if(T+=1,!v.plainObjects&&e.call(Object.prototype,S[1].slice(1,-1))&&!v.allowPrototypes)return;B.push(S[1])}if(S){if(v.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");B.push("["+y.slice(S.index)+"]")}return c(B,b,v,w)}},h=function(g){if(!g)return n;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=typeof g.charset>"u"?n.charset:g.charset,v=typeof g.duplicates>"u"?n.duplicates:g.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:n.allowDots:!!g.allowDots;return{allowDots:w,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:n.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:n.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:n.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:n.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:n.decoder,delimiter:typeof g.delimiter=="string"||r.isRegExp(g.delimiter)?g.delimiter:n.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:n.depth,duplicates:v,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:n.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:n.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:n.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:n.strictNullHandling}};return m2=function(d,g){var b=h(g);if(d===""||d===null||typeof d>"u")return b.plainObjects?Object.create(null):{};for(var v=typeof d=="string"?u(d,b):d,w=b.plainObjects?Object.create(null):{},y=Object.keys(v),_=0;_<y.length;++_){var E=y[_],S=f(E,v[E],b,typeof d=="string");w=r.merge(w,S,b)}return b.allowSparse===!0?w:r.compact(w)},m2}function _U(){if(RO)return y2;RO=!0;var r=wU(),e=vU(),t=w2();return y2={formats:t,parse:e,stringify:r},y2}function EU(){if(DO)return Hu;DO=!0;var r=dl;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),u=["%","/","?",";","#"].concat(a),c=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=_U();function y(A,B,T){if(A&&typeof A=="object"&&A instanceof e)return A;var Z=new e;return Z.parse(A,B,T),Z}e.prototype.parse=function(A,B,T){if(typeof A!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof A);var Z=A.indexOf("?"),ie=Z!==-1&&Z<A.indexOf("#")?"?":"#",G=A.split(ie),ae=/\\/g;G[0]=G[0].replace(ae,"/"),A=G.join(ie);var U=A;if(U=U.trim(),!T&&A.split("#").length===1){var V=i.exec(U);if(V)return this.path=U,this.href=U,this.pathname=V[1],V[2]?(this.search=V[2],B?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):B&&(this.search="",this.query={}),this}var ue=t.exec(U);if(ue){ue=ue[0];var Ae=ue.toLowerCase();this.protocol=Ae,U=U.substr(ue.length)}if(T||ue||U.match(/^\/\/[^@/]+@[^@/]+/)){var ve=U.substr(0,2)==="//";ve&&!(ue&&b[ue])&&(U=U.substr(2),this.slashes=!0)}if(!b[ue]&&(ve||ue&&!v[ue])){for(var z=-1,O=0;O<c.length;O++){var oe=U.indexOf(c[O]);oe!==-1&&(z===-1||oe<z)&&(z=oe)}var q,M;z===-1?M=U.lastIndexOf("@"):M=U.lastIndexOf("@",z),M!==-1&&(q=U.slice(0,M),U=U.slice(M+1),this.auth=decodeURIComponent(q)),z=-1;for(var O=0;O<u.length;O++){var oe=U.indexOf(u[O]);oe!==-1&&(z===-1||oe<z)&&(z=oe)}z===-1&&(z=U.length),this.host=U.slice(0,z),U=U.slice(z),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var j=this.hostname.split(/\./),O=0,Q=j.length;O<Q;O++){var K=j[O];if(K&&!K.match(h)){for(var ee="",P=0,I=K.length;P<I;P++)K.charCodeAt(P)>127?ee+="x":ee+=K[P];if(!ee.match(h)){var k=j.slice(0,O),ne=j.slice(O+1),pe=K.match(d);pe&&(k.push(pe[1]),ne.unshift(pe[2])),ne.length&&(U="/"+ne.join(".")+U),this.hostname=k.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+F,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),U[0]!=="/"&&(U="/"+U))}if(!g[Ae])for(var O=0,Q=a.length;O<Q;O++){var te=a[O];if(U.indexOf(te)!==-1){var ge=encodeURIComponent(te);ge===te&&(ge=escape(te)),U=U.split(te).join(ge)}}var Ce=U.indexOf("#");Ce!==-1&&(this.hash=U.substr(Ce),U=U.slice(0,Ce));var xe=U.indexOf("?");if(xe!==-1?(this.search=U.substr(xe),this.query=U.substr(xe+1),B&&(this.query=w.parse(this.query)),U=U.slice(0,xe)):B&&(this.search="",this.query={}),U&&(this.pathname=U),v[Ae]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",he=this.search||"";this.path=F+he}return this.href=this.format(),this};function _(A){return typeof A=="string"&&(A=y(A)),A instanceof e?A.format():e.prototype.format.call(A)}e.prototype.format=function(){var A=this.auth||"";A&&(A=encodeURIComponent(A),A=A.replace(/%3A/i,":"),A+="@");var B=this.protocol||"",T=this.pathname||"",Z=this.hash||"",ie=!1,G="";this.host?ie=A+this.host:this.hostname&&(ie=A+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ie+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(G=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ae=this.search||G&&"?"+G||"";return B&&B.substr(-1)!==":"&&(B+=":"),this.slashes||(!B||v[B])&&ie!==!1?(ie="//"+(ie||""),T&&T.charAt(0)!=="/"&&(T="/"+T)):ie||(ie=""),Z&&Z.charAt(0)!=="#"&&(Z="#"+Z),ae&&ae.charAt(0)!=="?"&&(ae="?"+ae),T=T.replace(/[?#]/g,function(U){return encodeURIComponent(U)}),ae=ae.replace("#","%23"),B+ie+T+ae+Z};function E(A,B){return y(A,!1,!0).resolve(B)}e.prototype.resolve=function(A){return this.resolveObject(y(A,!1,!0)).format()};function S(A,B){return A?y(A,!1,!0).resolveObject(B):B}return e.prototype.resolveObject=function(A){if(typeof A=="string"){var B=new e;B.parse(A,!1,!0),A=B}for(var T=new e,Z=Object.keys(this),ie=0;ie<Z.length;ie++){var G=Z[ie];T[G]=this[G]}if(T.hash=A.hash,A.href==="")return T.href=T.format(),T;if(A.slashes&&!A.protocol){for(var ae=Object.keys(A),U=0;U<ae.length;U++){var V=ae[U];V!=="protocol"&&(T[V]=A[V])}return v[T.protocol]&&T.hostname&&!T.pathname&&(T.pathname="/",T.path=T.pathname),T.href=T.format(),T}if(A.protocol&&A.protocol!==T.protocol){if(!v[A.protocol]){for(var ue=Object.keys(A),Ae=0;Ae<ue.length;Ae++){var ve=ue[Ae];T[ve]=A[ve]}return T.href=T.format(),T}if(T.protocol=A.protocol,!A.host&&!b[A.protocol]){for(var Q=(A.pathname||"").split("/");Q.length&&!(A.host=Q.shift()););A.host||(A.host=""),A.hostname||(A.hostname=""),Q[0]!==""&&Q.unshift(""),Q.length<2&&Q.unshift(""),T.pathname=Q.join("/")}else T.pathname=A.pathname;if(T.search=A.search,T.query=A.query,T.host=A.host||"",T.auth=A.auth,T.hostname=A.hostname||A.host,T.port=A.port,T.pathname||T.search){var z=T.pathname||"",O=T.search||"";T.path=z+O}return T.slashes=T.slashes||A.slashes,T.href=T.format(),T}var oe=T.pathname&&T.pathname.charAt(0)==="/",q=A.host||A.pathname&&A.pathname.charAt(0)==="/",M=q||oe||T.host&&A.pathname,H=M,j=T.pathname&&T.pathname.split("/")||[],Q=A.pathname&&A.pathname.split("/")||[],K=T.protocol&&!v[T.protocol];if(K&&(T.hostname="",T.port=null,T.host&&(j[0]===""?j[0]=T.host:j.unshift(T.host)),T.host="",A.protocol&&(A.hostname=null,A.port=null,A.host&&(Q[0]===""?Q[0]=A.host:Q.unshift(A.host)),A.host=null),M=M&&(Q[0]===""||j[0]==="")),q)T.host=A.host||A.host===""?A.host:T.host,T.hostname=A.hostname||A.hostname===""?A.hostname:T.hostname,T.search=A.search,T.query=A.query,j=Q;else if(Q.length)j||(j=[]),j.pop(),j=j.concat(Q),T.search=A.search,T.query=A.query;else if(A.search!=null){if(K){T.host=j.shift(),T.hostname=T.host;var ee=T.host&&T.host.indexOf("@")>0?T.host.split("@"):!1;ee&&(T.auth=ee.shift(),T.hostname=ee.shift(),T.host=T.hostname)}return T.search=A.search,T.query=A.query,(T.pathname!==null||T.search!==null)&&(T.path=(T.pathname?T.pathname:"")+(T.search?T.search:"")),T.href=T.format(),T}if(!j.length)return T.pathname=null,T.search?T.path="/"+T.search:T.path=null,T.href=T.format(),T;for(var P=j.slice(-1)[0],I=(T.host||A.host||j.length>1)&&(P==="."||P==="..")||P==="",k=0,ne=j.length;ne>=0;ne--)P=j[ne],P==="."?j.splice(ne,1):P===".."?(j.splice(ne,1),k++):k&&(j.splice(ne,1),k--);if(!M&&!H)for(;k--;k)j.unshift("..");M&&j[0]!==""&&(!j[0]||j[0].charAt(0)!=="/")&&j.unshift(""),I&&j.join("/").substr(-1)!=="/"&&j.push("");var pe=j[0]===""||j[0]&&j[0].charAt(0)==="/";if(K){T.hostname=pe?"":j.length?j.shift():"",T.host=T.hostname;var ee=T.host&&T.host.indexOf("@")>0?T.host.split("@"):!1;ee&&(T.auth=ee.shift(),T.hostname=ee.shift(),T.host=T.hostname)}return M=M||T.host&&j.length,M&&!pe&&j.unshift(""),j.length>0?T.pathname=j.join("/"):(T.pathname=null,T.path=null),(T.pathname!==null||T.search!==null)&&(T.path=(T.pathname?T.pathname:"")+(T.search?T.search:"")),T.auth=A.auth||T.auth,T.slashes=T.slashes||A.slashes,T.href=T.format(),T},e.prototype.parseHost=function(){var A=this.host,B=n.exec(A);B&&(B=B[0],B!==":"&&(this.port=B.substr(1)),A=A.substr(0,A.length-B.length)),A&&(this.hostname=A)},Hu.parse=y,Hu.resolve=E,Hu.resolveObject=S,Hu.format=_,Hu.Url=e,Hu}function v2(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return b2?LU(r):PU(r)}function LU(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(RU,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<TU||n>CU||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function PU(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function BU(r){let e=l2.resolve(r),t=r.charCodeAt(r.length-1);(t===SU||b2&&t===xU)&&e[e.length-1]!==l2.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(DU,"%25")),!b2&&e.includes("\\")&&(e=e.replace(IU,"%5C")),e.includes(`
`)&&(e=e.replace(OU,"%0A")),e.includes("\r")&&(e=e.replace(NU,"%0D")),e.includes("	")&&(e=e.replace(kU,"%09")),n.pathname=e,n}var mU,c2,EO,f2,h2,AO,d2,xO,p2,SO,g2,TO,m2,CO,y2,RO,Hu,DO,si,AU,AX,xX,SX,TX,CX,RX,xU,SU,TU,CU,b2,RU,DU,IU,OU,NU,kU,OO=Jt(()=>{Ne();Le();ke();BE();$p();u2();Mu();mU=Object.freeze(Object.create(null)),c2={},EO=!1,f2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;h2={},AO=!1;d2={},xO=!1;p2={},SO=!1;g2={},TO=!1;m2={},CO=!1;y2={},RO=!1;Hu={},DO=!1;si=EU();si.parse;si.resolve;si.resolveObject;si.format;si.Url;AU=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;si.URL=typeof URL<"u"?URL:null;si.pathToFileURL=BU;si.fileURLToPath=v2;AX=si.Url,xX=si.format,SX=si.resolve,TX=si.resolveObject,CX=si.parse,RX=si.URL,xU=92,SU=47,TU=97,CU=122,b2=AU==="win32",RU=/\//g,DU=/%/g,IU=/\\/g,OU=/\n/g,NU=/\r/g,kU=/\t/g});var Hp={};Uo(Hp,{Dir:()=>x$,Dirent:()=>S$,F_OK:()=>N$,FileReadStream:()=>D$,FileWriteStream:()=>I$,R_OK:()=>k$,ReadStream:()=>C$,Stats:()=>T$,W_OK:()=>L$,WriteStream:()=>R$,X_OK:()=>P$,_toUnixTimestamp:()=>O$,access:()=>QU,accessSync:()=>ej,appendFile:()=>ZU,appendFileSync:()=>JU,chmod:()=>nj,chmodSync:()=>ij,chown:()=>tj,chownSync:()=>rj,close:()=>sj,closeSync:()=>oj,constants:()=>B$,copyFile:()=>aj,copyFileSync:()=>lj,cp:()=>uj,cpSync:()=>cj,createReadStream:()=>fj,createWriteStream:()=>hj,default:()=>br,exists:()=>dj,existsSync:()=>sb,fchmod:()=>mj,fchmodSync:()=>yj,fchown:()=>pj,fchownSync:()=>gj,fdatasync:()=>bj,fdatasyncSync:()=>wj,fstat:()=>vj,fstatSync:()=>_j,fsync:()=>Ej,fsyncSync:()=>Aj,ftruncate:()=>xj,ftruncateSync:()=>Sj,futimes:()=>Tj,futimesSync:()=>Cj,lchmod:()=>Ij,lchmodSync:()=>Oj,lchown:()=>Rj,lchownSync:()=>Dj,link:()=>Nj,linkSync:()=>kj,lstat:()=>Lj,lstatSync:()=>x2,mkdir:()=>Pj,mkdirSync:()=>Bj,mkdtemp:()=>Mj,mkdtempSync:()=>Fj,open:()=>Uj,openSync:()=>jj,opendir:()=>$j,opendirSync:()=>zj,promises:()=>M$,read:()=>Hj,readFile:()=>Xj,readFileSync:()=>S2,readSync:()=>Gj,readdir:()=>Wj,readdirSync:()=>qj,readlink:()=>Kj,readlinkSync:()=>Zj,readv:()=>Vj,readvSync:()=>Yj,realpath:()=>Jj,realpathSync:()=>Qj,rename:()=>e$,renameSync:()=>t$,rm:()=>r$,rmSync:()=>n$,rmdir:()=>i$,rmdirSync:()=>s$,stat:()=>o$,statSync:()=>a$,symlink:()=>l$,symlinkSync:()=>u$,truncate:()=>c$,truncateSync:()=>f$,unlink:()=>d$,unlinkSync:()=>p$,unwatchFile:()=>h$,utimes:()=>g$,utimesSync:()=>m$,watch:()=>y$,watchFile:()=>b$,write:()=>v$,writeFile:()=>w$,writeFileSync:()=>rN,writeSync:()=>_$,writev:()=>E$,writevSync:()=>A$});function qp(){return NO||(NO=!0,Object.defineProperty(zp,"__esModule",{value:!0}),zp.constants=void 0,zp.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}),zp}function MU(){return kO||(kO=!0,typeof BigInt=="function"?rb.default=BigInt:rb.default=function(){throw new Error("BigInt is not supported in this environment.")}),rb}function _2(){if(LO)return eh;LO=!0,Object.defineProperty(eh,"__esModule",{value:!0}),eh.Stats=void 0;var r=qp(),e=MU(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){}return h.build=function(d,g){g===void 0&&(g=!1);var b=new h,v=d.uid,w=d.gid,y=d.atime,_=d.mtime,E=d.ctime,S=g?e.default:function(B){return B};b.uid=S(v),b.gid=S(w),b.rdev=S(0),b.blksize=S(4096),b.ino=S(d.ino),b.size=S(d.getSize()),b.blocks=S(1),b.atime=y,b.mtime=_,b.ctime=E,b.birthtime=E,b.atimeMs=S(y.getTime()),b.mtimeMs=S(_.getTime());var A=S(E.getTime());return b.ctimeMs=A,b.birthtimeMs=A,b.dev=S(0),b.mode=S(d.mode),b.nlink=S(d.nlink),b},h.prototype._checkModeProperty=function(d){return(Number(this.mode)&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return eh.Stats=f,eh.default=f,eh}function E2(){if(PO)return Rs;PO=!0;var r=Rs&&Rs.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var u=0,c=s.length,f;u<c;u++)(f||!(u in s))&&(f||(f=Array.prototype.slice.call(s,0,u)),f[u]=s[u]);return o.concat(f||Array.prototype.slice.call(s))};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.bufferFrom=Rs.bufferAllocUnsafe=Rs.Buffer=void 0;var e=fn();Object.defineProperty(Rs,"Buffer",{enumerable:!0,get:function(){return e.Buffer}});function t(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return new(e.Buffer.bind.apply(e.Buffer,r([void 0,o],s,!1)))}var n=e.Buffer.allocUnsafe||t;Rs.bufferAllocUnsafe=n;var i=e.Buffer.from||t;return Rs.bufferFrom=i,Rs}function XO(){if(BO)return sn;BO=!0;var r=sn&&sn.__extends||(function(){var b=function(v,w){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(y[E]=_[E])},b(v,w)};return function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");b(v,w);function y(){this.constructor=v}v.prototype=w===null?Object.create(w):(y.prototype=w.prototype,new y)}})();Object.defineProperty(sn,"__esModule",{value:!0}),sn.E=sn.AssertionError=sn.message=sn.RangeError=sn.TypeError=sn.Error=void 0;var e=pt,t=Ve,n=typeof Symbol>"u"?"_kCode":Symbol("code"),i={};function o(b){return(function(v){r(w,v);function w(y){for(var _=[],E=1;E<arguments.length;E++)_[E-1]=arguments[E];var S=v.call(this,u(y,_))||this;return S.code=y,S[n]=y,S.name="".concat(v.prototype.name," [").concat(S[n],"]"),S}return w})(b)}var s=typeof globalThis<"u"?globalThis:FU,a=(function(b){r(v,b);function v(w){var y=this;if(typeof w!="object"||w===null)throw new sn.TypeError("ERR_INVALID_ARG_TYPE","options","object");return w.message?y=b.call(this,w.message)||this:y=b.call(this,"".concat(t.inspect(w.actual).slice(0,128)," ")+"".concat(w.operator," ").concat(t.inspect(w.expected).slice(0,128)))||this,y.generatedMessage=!w.message,y.name="AssertionError [ERR_ASSERTION]",y.code="ERR_ASSERTION",y.actual=w.actual,y.expected=w.expected,y.operator=w.operator,sn.Error.captureStackTrace(y,w.stackStartFunction),y}return v})(s.Error);sn.AssertionError=a;function u(b,v){e.strictEqual(typeof b,"string");var w=i[b];e(w,"An invalid error message key was used: ".concat(b,"."));var y;if(typeof w=="function")y=w;else{if(y=t.format,v===void 0||v.length===0)return w;v.unshift(w)}return String(y.apply(null,v))}sn.message=u;function c(b,v){i[b]=typeof v=="function"?v:String(v)}sn.E=c,sn.Error=o(s.Error),sn.TypeError=o(s.TypeError),sn.RangeError=o(s.RangeError),c("ERR_ARG_NOT_ITERABLE","%s must be iterable"),c("ERR_ASSERTION","%s"),c("ERR_BUFFER_OUT_OF_BOUNDS",g),c("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),c("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),c("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),c("ERR_DNS_SET_SERVERS_FAILED",function(b,v){return'c-ares failed to set servers: "'.concat(b,'" [').concat(v,"]")}),c("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),c("ERR_ENCODING_NOT_SUPPORTED",function(b){return'The "'.concat(b,'" encoding is not supported')}),c("ERR_ENCODING_INVALID_ENCODED_DATA",function(b){return"The encoded data was not valid for encoding ".concat(b)}),c("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),c("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),c("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),c("ERR_INDEX_OUT_OF_RANGE","Index out of range"),c("ERR_INVALID_ARG_TYPE",f),c("ERR_INVALID_ARRAY_LENGTH",function(b,v,w){return e.strictEqual(typeof w,"number"),'The array "'.concat(b,'" (length ').concat(w,") must be of length ").concat(v,".")}),c("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),c("ERR_INVALID_CALLBACK","Callback must be a function"),c("ERR_INVALID_CHAR","Invalid character in %s"),c("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),c("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),c("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),c("ERR_INVALID_FILE_URL_PATH","File URL path %s"),c("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),c("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),c("ERR_INVALID_OPT_VALUE",function(b,v){return'The value "'.concat(String(v),'" is invalid for option "').concat(b,'"')}),c("ERR_INVALID_OPT_VALUE_ENCODING",function(b){return'The value "'.concat(String(b),'" is invalid for option "encoding"')}),c("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),c("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),c("ERR_INVALID_THIS",'Value of "this" must be of type %s'),c("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),c("ERR_INVALID_URL","Invalid URL: %s"),c("ERR_INVALID_URL_SCHEME",function(b){return"The URL must be ".concat(d(b,"scheme"))}),c("ERR_IPC_CHANNEL_CLOSED","Channel closed"),c("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),c("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),c("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),c("ERR_MISSING_ARGS",h),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),c("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),c("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),c("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),c("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),c("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),c("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),c("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),c("ERR_SOCKET_CANNOT_SEND","Unable to send data"),c("ERR_SOCKET_CLOSED","Socket is closed"),c("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),c("ERR_STDERR_CLOSE","process.stderr cannot be closed"),c("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),c("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),c("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),c("ERR_TLS_DH_PARAM_SIZE",function(b){return"DH parameter size ".concat(b," is less than 2048")}),c("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),c("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),c("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),c("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),c("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),c("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),c("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),c("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),c("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),c("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),c("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function f(b,v,w){e(b,"name is required");var y;v.includes("not ")?(y="must not be",v=v.split("not ")[1]):y="must be";var _;if(Array.isArray(b)){var E=b.map(function(A){return'"'.concat(A,'"')}).join(", ");_="The ".concat(E," arguments ").concat(y," ").concat(d(v,"type"))}else if(b.includes(" argument"))_="The ".concat(b," ").concat(y," ").concat(d(v,"type"));else{var S=b.includes(".")?"property":"argument";_='The "'.concat(b,'" ').concat(S," ").concat(y," ").concat(d(v,"type"))}return arguments.length>=3&&(_+=". Received type ".concat(w!==null?typeof w:"null")),_}function h(){for(var b=[],v=0;v<arguments.length;v++)b[v]=arguments[v];e(b.length>0,"At least one arg needs to be specified");var w="The ",y=b.length;switch(b=b.map(function(_){return'"'.concat(_,'"')}),y){case 1:w+="".concat(b[0]," argument");break;case 2:w+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:w+=b.slice(0,y-1).join(", "),w+=", and ".concat(b[y-1]," arguments");break}return"".concat(w," must be specified")}function d(b,v){if(e(b,"expected is required"),e(typeof v=="string","thing is required"),Array.isArray(b)){var w=b.length;return e(w>0,"At least one expected value needs to be specified"),b=b.map(function(y){return String(y)}),w>2?"one of ".concat(v," ").concat(b.slice(0,w-1).join(", "),", or ")+b[w-1]:w===2?"one of ".concat(v," ").concat(b[0]," or ").concat(b[1]):"of ".concat(v," ").concat(b[0])}else return"of ".concat(v," ").concat(String(b))}function g(b,v){return v?"Attempt to write outside buffer bounds":'"'.concat(b,'" is outside of buffer bounds')}return sn}function KO(){if(MO)return ro;MO=!0,Object.defineProperty(ro,"__esModule",{value:!0}),ro.strToEncoding=ro.assertEncoding=ro.ENCODING_UTF8=void 0;var r=E2(),e=XO();ro.ENCODING_UTF8="utf8";function t(i){if(i&&!r.Buffer.isEncoding(i))throw new e.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",i)}ro.assertEncoding=t;function n(i,o){return!o||o===ro.ENCODING_UTF8?i:o==="buffer"?new r.Buffer(i):new r.Buffer(i).toString(o)}return ro.strToEncoding=n,ro}function ZO(){if(FO)return th;FO=!0,Object.defineProperty(th,"__esModule",{value:!0}),th.Dirent=void 0;var r=qp(),e=KO(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){this.name="",this.mode=0}return h.build=function(d,g){var b=new h,v=d.getNode().mode;return b.name=(0,e.strToEncoding)(d.getName(),g),b.mode=v,b},h.prototype._checkModeProperty=function(d){return(this.mode&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return th.Dirent=f,th.default=f,th}function JO(){if(UO)return nb;UO=!0;var r=zr;Object.defineProperty(nb,"__esModule",{value:!0});var e;return typeof r.nextTick=="function"?e=r.nextTick.bind(typeof globalThis<"u"?globalThis:jO):e=setTimeout.bind(typeof globalThis<"u"?globalThis:jO),nb.default=e,nb}function QO(){if($O)return rh;$O=!0;var r=zr;Object.defineProperty(rh,"__esModule",{value:!0}),rh.createProcess=void 0;var e=function(){if(typeof r<"u")return r;try{return zr}catch{return}};function t(){var n=e()||{};return n.cwd||(n.cwd=function(){return"/"}),n.nextTick||(n.nextTick=JO().default),n.emitWarning||(n.emitWarning=function(i,o){console.warn("".concat(o).concat(o?": ":"").concat(i))}),n.env||(n.env={}),n}return rh.createProcess=t,rh.default=t(),rh}function UU(){if(zO)return oi;zO=!0;var r=oi&&oi.__extends||(function(){var w=function(y,_){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,S){E.__proto__=S}||function(E,S){for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(E[A]=S[A])},w(y,_)};return function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");w(y,_);function E(){this.constructor=y}y.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}})();Object.defineProperty(oi,"__esModule",{value:!0}),oi.File=oi.Link=oi.Node=oi.SEP=void 0;var e=QO(),t=E2(),n=qp(),i=nn,o=_2(),s=n.constants.S_IFMT,a=n.constants.S_IFDIR,u=n.constants.S_IFREG,c=n.constants.S_IFLNK,f=n.constants.O_APPEND,h=function(){var w,y;return(y=(w=e.default.getuid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0},d=function(){var w,y;return(y=(w=e.default.getgid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0};oi.SEP="/";var g=(function(w){r(y,w);function y(_,E){E===void 0&&(E=438);var S=w.call(this)||this;return S._uid=h(),S._gid=d(),S._atime=new Date,S._mtime=new Date,S._ctime=new Date,S._perm=438,S.mode=u,S._nlink=1,S._perm=E,S.mode|=E,S.ino=_,S}return Object.defineProperty(y.prototype,"ctime",{get:function(){return this._ctime},set:function(_){this._ctime=_},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"uid",{get:function(){return this._uid},set:function(_){this._uid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"gid",{get:function(){return this._gid},set:function(_){this._gid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"atime",{get:function(){return this._atime},set:function(_){this._atime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mtime",{get:function(){return this._mtime},set:function(_){this._mtime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"perm",{get:function(){return this._perm},set:function(_){this._perm=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nlink",{get:function(){return this._nlink},set:function(_){this._nlink=_,this.ctime=new Date},enumerable:!1,configurable:!0}),y.prototype.getString=function(_){return _===void 0&&(_="utf8"),this.atime=new Date,this.getBuffer().toString(_)},y.prototype.setString=function(_){this.buf=(0,t.bufferFrom)(_,"utf8"),this.touch()},y.prototype.getBuffer=function(){return this.atime=new Date,this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)},y.prototype.setBuffer=function(_){this.buf=(0,t.bufferFrom)(_),this.touch()},y.prototype.getSize=function(){return this.buf?this.buf.length:0},y.prototype.setModeProperty=function(_){this.mode=this.mode&~s|_},y.prototype.setIsFile=function(){this.setModeProperty(u)},y.prototype.setIsDirectory=function(){this.setModeProperty(a)},y.prototype.setIsSymlink=function(){this.setModeProperty(c)},y.prototype.isFile=function(){return(this.mode&s)===u},y.prototype.isDirectory=function(){return(this.mode&s)===a},y.prototype.isSymlink=function(){return(this.mode&s)===c},y.prototype.makeSymlink=function(_){this.symlink=_,this.setIsSymlink()},y.prototype.write=function(_,E,S,A){if(E===void 0&&(E=0),S===void 0&&(S=_.length),A===void 0&&(A=0),this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),A+S>this.buf.length){var B=(0,t.bufferAllocUnsafe)(A+S);this.buf.copy(B,0,0,this.buf.length),this.buf=B}return _.copy(this.buf,A,E,E+S),this.touch(),S},y.prototype.read=function(_,E,S,A){E===void 0&&(E=0),S===void 0&&(S=_.byteLength),A===void 0&&(A=0),this.atime=new Date,this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));var B=S;return B>_.byteLength&&(B=_.byteLength),B+A>this.buf.length&&(B=this.buf.length-A),this.buf.copy(_,E,A,A+B),B},y.prototype.truncate=function(_){if(_===void 0&&(_=0),!_)this.buf=(0,t.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),_<=this.buf.length)this.buf=this.buf.slice(0,_);else{var E=(0,t.bufferAllocUnsafe)(_);this.buf.copy(E),E.fill(0,this.buf.length),this.buf=E}this.touch()},y.prototype.chmod=function(_){this.perm=_,this.mode=this.mode&-512|_,this.touch()},y.prototype.chown=function(_,E){this.uid=_,this.gid=E,this.touch()},y.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},y.prototype.canRead=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&4||E===this.gid&&this.perm&32||_===this.uid&&this.perm&256)},y.prototype.canWrite=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&2||E===this.gid&&this.perm&16||_===this.uid&&this.perm&128)},y.prototype.del=function(){this.emit("delete",this)},y.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},y})(i.EventEmitter);oi.Node=g;var b=(function(w){r(y,w);function y(_,E,S){var A=w.call(this)||this;return A.children={},A._steps=[],A.ino=0,A.length=0,A.vol=_,A.parent=E,A.name=S,A.syncSteps(),A}return Object.defineProperty(y.prototype,"steps",{get:function(){return this._steps},set:function(_){this._steps=_;for(var E=0,S=Object.entries(this.children);E<S.length;E++){var A=S[E],B=A[0],T=A[1];B==="."||B===".."||T?.syncSteps()}},enumerable:!1,configurable:!0}),y.prototype.setNode=function(_){this.node=_,this.ino=_.ino},y.prototype.getNode=function(){return this.node},y.prototype.createChild=function(_,E){E===void 0&&(E=this.vol.createNode());var S=new y(this.vol,this,_);return S.setNode(E),E.isDirectory()&&(S.children["."]=S,S.getNode().nlink++),this.setChild(_,S),S},y.prototype.setChild=function(_,E){E===void 0&&(E=new y(this.vol,this,_)),this.children[_]=E,E.parent=this,this.length++;var S=E.getNode();return S.isDirectory()&&(E.children[".."]=this,this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",E,this),E},y.prototype.deleteChild=function(_){var E=_.getNode();E.isDirectory()&&(delete _.children[".."],this.getNode().nlink--),delete this.children[_.getName()],this.length--,this.getNode().mtime=new Date,this.emit("child:delete",_,this)},y.prototype.getChild=function(_){if(this.getNode().mtime=new Date,Object.hasOwnProperty.call(this.children,_))return this.children[_]},y.prototype.getPath=function(){return this.steps.join(oi.SEP)},y.prototype.getName=function(){return this.steps[this.steps.length-1]},y.prototype.walk=function(_,E,S){if(E===void 0&&(E=_.length),S===void 0&&(S=0),S>=_.length)return this;if(S>=E)return this;var A=_[S],B=this.getChild(A);return B?B.walk(_,E,S+1):null},y.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},y.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},y})(i.EventEmitter);oi.Link=b;var v=(function(){function w(y,_,E,S){this.position=0,this.link=y,this.node=_,this.flags=E,this.fd=S}return w.prototype.getString=function(y){return this.node.getString()},w.prototype.setString=function(y){this.node.setString(y)},w.prototype.getBuffer=function(){return this.node.getBuffer()},w.prototype.setBuffer=function(y){this.node.setBuffer(y)},w.prototype.getSize=function(){return this.node.getSize()},w.prototype.truncate=function(y){this.node.truncate(y)},w.prototype.seekTo=function(y){this.position=y},w.prototype.stats=function(){return o.default.build(this.node)},w.prototype.write=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.length),typeof S!="number"&&(S=this.position),this.flags&f&&(S=this.getSize());var A=this.node.write(y,_,E,S);return this.position=S+A,A},w.prototype.read=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.byteLength),typeof S!="number"&&(S=this.position);var A=this.node.read(y,_,E,S);return this.position=S+A,A},w.prototype.chmod=function(y){this.node.chmod(y)},w.prototype.chown=function(y,_){this.node.chown(y,_)},w})();return oi.File=v,oi}function $U(){if(WO)return ib;WO=!0,Object.defineProperty(ib,"__esModule",{value:!0});function r(e,t,n){var i=setTimeout.apply(typeof globalThis<"u"?globalThis:jU,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}return ib.default=r,ib}function zU(){if(qO)return pl;qO=!0;var r=pl&&pl.__spreadArray||function(i,o,s){if(s||arguments.length===2)for(var a=0,u=o.length,c;a<u;a++)(c||!(a in o))&&(c||(c=Array.prototype.slice.call(o,0,a)),c[a]=o[a]);return i.concat(c||Array.prototype.slice.call(o))};Object.defineProperty(pl,"__esModule",{value:!0}),pl.FileHandle=void 0;function e(i,o,s){return s===void 0&&(s=function(a){return a}),function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return new Promise(function(c,f){i[o].bind(i).apply(void 0,r(r([],a,!1),[function(h,d){return h?f(h):c(s(d))}],!1))})}}var t=(function(){function i(o,s){this.vol=o,this.fd=s}return i.prototype.appendFile=function(o,s){return e(this.vol,"appendFile")(this.fd,o,s)},i.prototype.chmod=function(o){return e(this.vol,"fchmod")(this.fd,o)},i.prototype.chown=function(o,s){return e(this.vol,"fchown")(this.fd,o,s)},i.prototype.close=function(){return e(this.vol,"close")(this.fd)},i.prototype.datasync=function(){return e(this.vol,"fdatasync")(this.fd)},i.prototype.read=function(o,s,a,u){return e(this.vol,"read",function(c){return{bytesRead:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.readFile=function(o){return e(this.vol,"readFile")(this.fd,o)},i.prototype.stat=function(o){return e(this.vol,"fstat")(this.fd,o)},i.prototype.sync=function(){return e(this.vol,"fsync")(this.fd)},i.prototype.truncate=function(o){return e(this.vol,"ftruncate")(this.fd,o)},i.prototype.utimes=function(o,s){return e(this.vol,"futimes")(this.fd,o,s)},i.prototype.write=function(o,s,a,u){return e(this.vol,"write",function(c){return{bytesWritten:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.writeFile=function(o,s){return e(this.vol,"writeFile")(this.fd,o,s)},i})();pl.FileHandle=t;function n(i){return typeof Promise>"u"?null:{FileHandle:t,access:function(o,s){return e(i,"access")(o,s)},appendFile:function(o,s,a){return e(i,"appendFile")(o instanceof t?o.fd:o,s,a)},chmod:function(o,s){return e(i,"chmod")(o,s)},chown:function(o,s,a){return e(i,"chown")(o,s,a)},copyFile:function(o,s,a){return e(i,"copyFile")(o,s,a)},lchmod:function(o,s){return e(i,"lchmod")(o,s)},lchown:function(o,s,a){return e(i,"lchown")(o,s,a)},link:function(o,s){return e(i,"link")(o,s)},lstat:function(o,s){return e(i,"lstat")(o,s)},mkdir:function(o,s){return e(i,"mkdir")(o,s)},mkdtemp:function(o,s){return e(i,"mkdtemp")(o,s)},open:function(o,s,a){return e(i,"open",function(u){return new t(i,u)})(o,s,a)},readdir:function(o,s){return e(i,"readdir")(o,s)},readFile:function(o,s){return e(i,"readFile")(o instanceof t?o.fd:o,s)},readlink:function(o,s){return e(i,"readlink")(o,s)},realpath:function(o,s){return e(i,"realpath")(o,s)},rename:function(o,s){return e(i,"rename")(o,s)},rmdir:function(o){return e(i,"rmdir")(o)},rm:function(o,s){return e(i,"rm")(o,s)},stat:function(o,s){return e(i,"stat")(o,s)},symlink:function(o,s,a){return e(i,"symlink")(o,s,a)},truncate:function(o,s){return e(i,"truncate")(o,s)},unlink:function(o){return e(i,"unlink")(o)},utimes:function(o,s,a){return e(i,"utimes")(o,s,a)},writeFile:function(o,s,a){return e(i,"writeFile")(o instanceof t?o.fd:o,s,a)}}}return pl.default=n,pl}function WU(){if(HO)return Wp;HO=!0;var r=zr;Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.correctPath=s,Wp.unixify=o;var e=r.platform==="win32";function t(a){var u=a.length-1;if(u<2)return a;for(;n(a,u);)u--;return a.substr(0,u+1)}function n(a,u){var c=a[u];return u>0&&(c==="/"||e&&c==="\\")}function i(a,u){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),u!==!1&&(a=t(a)),a}function o(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=i(a,u),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function s(a){return o(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Wp}function eN(){if(GO)return Ft;GO=!0;var r=Ft&&Ft.__extends||(function(){var ye=function(W,J){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(le,Ee){le.__proto__=Ee}||function(le,Ee){for(var Be in Ee)Object.prototype.hasOwnProperty.call(Ee,Be)&&(le[Be]=Ee[Be])},ye(W,J)};return function(W,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");ye(W,J);function le(){this.constructor=W}W.prototype=J===null?Object.create(J):(le.prototype=J.prototype,new le)}})(),e=Ft&&Ft.__spreadArray||function(ye,W,J){if(J||arguments.length===2)for(var le=0,Ee=W.length,Be;le<Ee;le++)(Be||!(le in W))&&(Be||(Be=Array.prototype.slice.call(W,0,le)),Be[le]=W[le]);return ye.concat(Be||Array.prototype.slice.call(W))};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.FSWatcher=Ft.StatWatcher=Ft.Volume=Ft.toUnixTimestamp=Ft.bufferToEncoding=Ft.dataToBuffer=Ft.dataToStr=Ft.pathToSteps=Ft.filenameToSteps=Ft.pathToFilename=Ft.flagsToNumber=Ft.FLAGS=void 0;var t=rn,n=UU(),i=_2(),o=ZO(),s=E2(),a=JO(),u=QO(),c=$U(),f=ii,h=qp(),d=nn,g=KO(),b=XO(),v=Ve,w=zU(),y=t.resolve,_=h.constants.O_RDONLY,E=h.constants.O_WRONLY,S=h.constants.O_RDWR,A=h.constants.O_CREAT,B=h.constants.O_EXCL,T=h.constants.O_TRUNC,Z=h.constants.O_APPEND,ie=h.constants.O_SYNC,G=h.constants.O_DIRECTORY,ae=h.constants.F_OK,U=h.constants.COPYFILE_EXCL,V=h.constants.COPYFILE_FICLONE_FORCE,ue=t.posix?t.posix:t,Ae=ue.sep,ve=ue.relative,z=ue.join,O=ue.dirname,oe=u.default.platform==="win32",q=128,M={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},H=function(ye){return"Expected options to be either an object or a string, but got ".concat(ye," instead")},j="ENOENT",Q="EBADF",K="EINVAL",ee="EPERM",P="EPROTO",I="EEXIST",k="ENOTDIR",ne="EMFILE",pe="EACCES",F="EISDIR",R="ENOTEMPTY",te="ENOSYS",ge="ERR_FS_EISDIR";function Ce(ye,W,J,le){W===void 0&&(W=""),J===void 0&&(J=""),le===void 0&&(le="");var Ee="";switch(J&&(Ee=" '".concat(J,"'")),le&&(Ee+=" -> '".concat(le,"'")),ye){case j:return"ENOENT: no such file or directory, ".concat(W).concat(Ee);case Q:return"EBADF: bad file descriptor, ".concat(W).concat(Ee);case K:return"EINVAL: invalid argument, ".concat(W).concat(Ee);case ee:return"EPERM: operation not permitted, ".concat(W).concat(Ee);case P:return"EPROTO: protocol error, ".concat(W).concat(Ee);case I:return"EEXIST: file already exists, ".concat(W).concat(Ee);case k:return"ENOTDIR: not a directory, ".concat(W).concat(Ee);case F:return"EISDIR: illegal operation on a directory, ".concat(W).concat(Ee);case pe:return"EACCES: permission denied, ".concat(W).concat(Ee);case R:return"ENOTEMPTY: directory not empty, ".concat(W).concat(Ee);case ne:return"EMFILE: too many open files, ".concat(W).concat(Ee);case te:return"ENOSYS: function not implemented, ".concat(W).concat(Ee);case ge:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(W," returned EISDIR (is a directory) ").concat(J);default:return"".concat(ye,": error occurred, ").concat(W).concat(Ee)}}function xe(ye,W,J,le,Ee){W===void 0&&(W=""),J===void 0&&(J=""),le===void 0&&(le=""),Ee===void 0&&(Ee=Error);var Be=new Ee(Ce(ye,W,J,le));return Be.code=ye,J&&(Be.path=J),Be}var he;(function(ye){ye[ye.r=_]="r",ye[ye["r+"]=S]="r+",ye[ye.rs=_|ie]="rs",ye[ye.sr=ye.rs]="sr",ye[ye["rs+"]=S|ie]="rs+",ye[ye["sr+"]=ye["rs+"]]="sr+",ye[ye.w=E|A|T]="w",ye[ye.wx=E|A|T|B]="wx",ye[ye.xw=ye.wx]="xw",ye[ye["w+"]=S|A|T]="w+",ye[ye["wx+"]=S|A|T|B]="wx+",ye[ye["xw+"]=ye["wx+"]]="xw+",ye[ye.a=E|Z|A]="a",ye[ye.ax=E|Z|A|B]="ax",ye[ye.xa=ye.ax]="xa",ye[ye["a+"]=S|Z|A]="a+",ye[ye["ax+"]=S|Z|A|B]="ax+",ye[ye["xa+"]=ye["ax+"]]="xa+"})(he=Ft.FLAGS||(Ft.FLAGS={}));function _e(ye){if(typeof ye=="number")return ye;if(typeof ye=="string"){var W=he[ye];if(typeof W<"u")return W}throw new b.TypeError("ERR_INVALID_OPT_VALUE","flags",ye)}Ft.flagsToNumber=_e;function Oe(ye,W){var J;if(W){var le=typeof W;switch(le){case"string":J=Object.assign({},ye,{encoding:W});break;case"object":J=Object.assign({},ye,W);break;default:throw TypeError(H(le))}}else return ye;return J.encoding!=="buffer"&&(0,g.assertEncoding)(J.encoding),J}function Ie(ye){return function(W){return Oe(ye,W)}}function Te(ye){if(typeof ye!="function")throw TypeError(M.CB);return ye}function We(ye){return function(W,J){return typeof W=="function"?[ye(),W]:[ye(W),Te(J)]}}var qe={encoding:"utf8"},Ge=Ie(qe),x=We(Ge),p={flag:"r"},m=Ie(p),N={encoding:"utf8",mode:438,flag:he[he.w]},re=Ie(N),D={encoding:"utf8",mode:438,flag:he[he.a]},fe=Ie(D),be=We(fe),Se=qe,Y=Ie(Se),me=We(Y),$={mode:511,recursive:!1},Pe=function(ye){return typeof ye=="number"?Object.assign({},$,{mode:ye}):Object.assign({},$,ye)},ze={recursive:!1},C=function(ye){return Object.assign({},ze,ye)},Fe=Ie(qe),Ue=We(Fe),de={encoding:"utf8",withFileTypes:!1},De=Ie(de),Me=We(De),tt={bigint:!1},ce=function(ye){return ye===void 0&&(ye={}),Object.assign({},tt,ye)},we=function(ye,W){return typeof ye=="function"?[ce(),ye]:[ce(ye),Te(W)]};function He(ye){if(ye.hostname!=="")throw new b.TypeError("ERR_INVALID_FILE_URL_HOST",u.default.platform);for(var W=ye.pathname,J=0;J<W.length;J++)if(W[J]==="%"){var le=W.codePointAt(J+2)|32;if(W[J+1]==="2"&&le===102)throw new b.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(W)}function $e(ye){if(typeof ye!="string"&&!s.Buffer.isBuffer(ye)){try{if(!(ye instanceof Qt.URL))throw new TypeError(M.PATH_STR)}catch{throw new TypeError(M.PATH_STR)}ye=He(ye)}var W=String(ye);return Dr(W),W}Ft.pathToFilename=$e;var et=function(ye,W){return W===void 0&&(W=u.default.cwd()),y(W,ye)};if(oe){var dt=et,Rt=WU().unixify;et=function(ye,W){return Rt(dt(ye,W))}}function Et(ye,W){var J=et(ye,W),le=J.substring(1);return le?le.split(Ae):[]}Ft.filenameToSteps=Et;function ar(ye){return Et($e(ye))}Ft.pathToSteps=ar;function _i(ye,W){return W===void 0&&(W=g.ENCODING_UTF8),s.Buffer.isBuffer(ye)?ye.toString(W):ye instanceof Uint8Array?(0,s.bufferFrom)(ye).toString(W):String(ye)}Ft.dataToStr=_i;function qn(ye,W){return W===void 0&&(W=g.ENCODING_UTF8),s.Buffer.isBuffer(ye)?ye:ye instanceof Uint8Array?(0,s.bufferFrom)(ye):(0,s.bufferFrom)(String(ye),W)}Ft.dataToBuffer=qn;function Ht(ye,W){return!W||W==="buffer"?ye:ye.toString(W)}Ft.bufferToEncoding=Ht;function Dr(ye,W){if((""+ye).indexOf("\0")!==-1){var J=new Error("Path must be a string without null bytes");throw J.code=j,J}return!0}function yr(ye,W){if(typeof ye=="number")return ye;if(typeof ye=="string")return parseInt(ye,8);if(W)return Wt(W)}function Wt(ye,W){var J=yr(ye,W);if(typeof J!="number"||isNaN(J))throw new TypeError(M.MODE_INT);return J}function Yt(ye){return ye>>>0===ye}function Zr(ye){if(!Yt(ye))throw TypeError(M.FD)}function Jr(ye){if(typeof ye=="string"&&+ye==ye)return+ye;if(ye instanceof Date)return ye.getTime()/1e3;if(isFinite(ye))return ye<0?Date.now()/1e3:ye;throw new Error("Cannot parse time: "+ye)}Ft.toUnixTimestamp=Jr;function Qr(ye){if(typeof ye!="number")throw TypeError(M.UID)}function Bf(ye){if(typeof ye!="number")throw TypeError(M.GID)}function L3(ye){var W={};function J(le,Ee){for(var Be in Ee){var je=Ee[Be],Xe=z(le,Be);typeof je=="string"?W[Xe]=je:typeof je=="object"&&je!==null&&Object.keys(je).length>0?J(Xe,je):W[Xe]=null}}return J("",ye),W}var P3=(function(){function ye(W){W===void 0&&(W={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,w.default)(this),this.statWatchers={},this.props=Object.assign({Node:n.Node,Link:n.Link,File:n.File},W);var J=this.createLink();J.setNode(this.createNode(!0));var le=this;this.StatWatcher=(function(je){r(Xe,je);function Xe(){return je.call(this,le)||this}return Xe})(NT);var Ee=Ks;this.ReadStream=(function(je){r(Xe,je);function Xe(){for(var nt=[],at=0;at<arguments.length;at++)nt[at]=arguments[at];return je.apply(this,e([le],nt,!1))||this}return Xe})(Ee);var Be=Qi;this.WriteStream=(function(je){r(Xe,je);function Xe(){for(var nt=[],at=0;at<arguments.length;at++)nt[at]=arguments[at];return je.apply(this,e([le],nt,!1))||this}return Xe})(Be),this.FSWatcher=(function(je){r(Xe,je);function Xe(){return je.call(this,le)||this}return Xe})(LT),J.setChild(".",J),J.getNode().nlink++,J.setChild("..",J),J.getNode().nlink++,this.root=J}return ye.fromJSON=function(W,J){var le=new ye;return le.fromJSON(W,J),le},ye.fromNestedJSON=function(W,J){var le=new ye;return le.fromNestedJSON(W,J),le},Object.defineProperty(ye.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),ye.prototype.createLink=function(W,J,le,Ee){if(le===void 0&&(le=!1),!W)return new this.props.Link(this,null,"");if(!J)throw new Error("createLink: name cannot be empty");return W.createChild(J,this.createNode(le,Ee))},ye.prototype.deleteLink=function(W){var J=W.parent;return J?(J.deleteChild(W),!0):!1},ye.prototype.newInoNumber=function(){var W=this.releasedInos.pop();return W||(this.ino=(this.ino+1)%4294967295,this.ino)},ye.prototype.newFdNumber=function(){var W=this.releasedFds.pop();return typeof W=="number"?W:ye.fd--},ye.prototype.createNode=function(W,J){W===void 0&&(W=!1);var le=new this.props.Node(this.newInoNumber(),J);return W&&le.setIsDirectory(),this.inodes[le.ino]=le,le},ye.prototype.getNode=function(W){return this.inodes[W]},ye.prototype.deleteNode=function(W){W.del(),delete this.inodes[W.ino],this.releasedInos.push(W.ino)},ye.prototype.genRndStr=function(){var W=(Math.random()+1).toString(36).substring(2,8);return W.length===6?W:this.genRndStr()},ye.prototype.getLink=function(W){return this.root.walk(W)},ye.prototype.getLinkOrThrow=function(W,J){var le=Et(W),Ee=this.getLink(le);if(!Ee)throw xe(j,J,W);return Ee},ye.prototype.getResolvedLink=function(W){for(var J=typeof W=="string"?Et(W):W,le=this.root,Ee=0;Ee<J.length;){var Be=J[Ee];if(le=le.getChild(Be),!le)return null;var je=le.getNode();if(je.isSymlink()){J=je.symlink.concat(J.slice(Ee+1)),le=this.root,Ee=0;continue}Ee++}return le},ye.prototype.getResolvedLinkOrThrow=function(W,J){var le=this.getResolvedLink(W);if(!le)throw xe(j,J,W);return le},ye.prototype.resolveSymlinks=function(W){return this.getResolvedLink(W.steps.slice(1))},ye.prototype.getLinkAsDirOrThrow=function(W,J){var le=this.getLinkOrThrow(W,J);if(!le.getNode().isDirectory())throw xe(k,J,W);return le},ye.prototype.getLinkParent=function(W){return this.root.walk(W,W.length-1)},ye.prototype.getLinkParentAsDirOrThrow=function(W,J){var le=W instanceof Array?W:Et(W),Ee=this.getLinkParent(le);if(!Ee)throw xe(j,J,Ae+le.join(Ae));if(!Ee.getNode().isDirectory())throw xe(k,J,Ae+le.join(Ae));return Ee},ye.prototype.getFileByFd=function(W){return this.fds[String(W)]},ye.prototype.getFileByFdOrThrow=function(W,J){if(!Yt(W))throw TypeError(M.FD);var le=this.getFileByFd(W);if(!le)throw xe(Q,J);return le},ye.prototype.wrapAsync=function(W,J,le){var Ee=this;Te(le),(0,a.default)(function(){var Be;try{Be=W.apply(Ee,J)}catch(je){le(je);return}le(null,Be)})},ye.prototype._toJSON=function(W,J,le){var Ee;W===void 0&&(W=this.root),J===void 0&&(J={});var Be=!0,je=W.children;W.getNode().isFile()&&(je=(Ee={},Ee[W.getName()]=W.parent.getChild(W.getName()),Ee),W=W.parent);for(var Xe in je)if(!(Xe==="."||Xe==="..")){Be=!1;var nt=W.getChild(Xe);if(!nt)throw new Error("_toJSON: unexpected undefined");var at=nt.getNode();if(at.isFile()){var yt=nt.getPath();le&&(yt=ve(le,yt)),J[yt]=at.getString()}else at.isDirectory()&&this._toJSON(nt,J,le)}var Lt=W.getPath();return le&&(Lt=ve(le,Lt)),Lt&&Be&&(J[Lt]=null),J},ye.prototype.toJSON=function(W,J,le){J===void 0&&(J={}),le===void 0&&(le=!1);var Ee=[];if(W){W instanceof Array||(W=[W]);for(var Be=0,je=W;Be<je.length;Be++){var Xe=je[Be],nt=$e(Xe),at=this.getResolvedLink(nt);at&&Ee.push(at)}}else Ee.push(this.root);if(!Ee.length)return J;for(var yt=0,Lt=Ee;yt<Lt.length;yt++){var at=Lt[yt];this._toJSON(at,J,le?at.getPath():"")}return J},ye.prototype.fromJSON=function(W,J){J===void 0&&(J=u.default.cwd());for(var le in W){var Ee=W[le];if(le=et(le,J),typeof Ee=="string"){var Be=O(le);this.mkdirpBase(Be,511),this.writeFileSync(le,Ee)}else this.mkdirpBase(le,511)}},ye.prototype.fromNestedJSON=function(W,J){this.fromJSON(L3(W),J)},ye.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},ye.prototype.mountSync=function(W,J){this.fromJSON(J,W)},ye.prototype.openLink=function(W,J,le){if(le===void 0&&(le=!0),this.openFiles>=this.maxFiles)throw xe(ne,"open",W.getPath());var Ee=W;if(le&&(Ee=this.resolveSymlinks(W)),!Ee)throw xe(j,"open",W.getPath());var Be=Ee.getNode();if(Be.isDirectory()){if((J&(_|S|E))!==_)throw xe(F,"open",W.getPath())}else if(J&G)throw xe(k,"open",W.getPath());if(!(J&E)&&!Be.canRead())throw xe(pe,"open",W.getPath());var je=new this.props.File(W,Be,J,this.newFdNumber());return this.fds[je.fd]=je,this.openFiles++,J&T&&je.truncate(),je},ye.prototype.openFile=function(W,J,le,Ee){Ee===void 0&&(Ee=!0);var Be=Et(W),je=Ee?this.getResolvedLink(Be):this.getLink(Be);if(je&&J&B)throw xe(I,"open",W);if(!je&&J&A){var Xe=this.getResolvedLink(Be.slice(0,Be.length-1));if(!Xe)throw xe(j,"open",Ae+Be.join(Ae));J&A&&typeof le=="number"&&(je=this.createLink(Xe,Be[Be.length-1],!1,le))}if(je)return this.openLink(je,J,Ee);throw xe(j,"open",W)},ye.prototype.openBase=function(W,J,le,Ee){Ee===void 0&&(Ee=!0);var Be=this.openFile(W,J,le,Ee);if(!Be)throw xe(j,"open",W);return Be.fd},ye.prototype.openSync=function(W,J,le){le===void 0&&(le=438);var Ee=Wt(le),Be=$e(W),je=_e(J);return this.openBase(Be,je,Ee)},ye.prototype.open=function(W,J,le,Ee){var Be=le,je=Ee;typeof le=="function"&&(Be=438,je=le),Be=Be||438;var Xe=Wt(Be),nt=$e(W),at=_e(J);this.wrapAsync(this.openBase,[nt,at,Xe],je)},ye.prototype.closeFile=function(W){this.fds[W.fd]&&(this.openFiles--,delete this.fds[W.fd],this.releasedFds.push(W.fd))},ye.prototype.closeSync=function(W){Zr(W);var J=this.getFileByFdOrThrow(W,"close");this.closeFile(J)},ye.prototype.close=function(W,J){Zr(W),this.wrapAsync(this.closeSync,[W],J)},ye.prototype.openFileOrGetById=function(W,J,le){if(typeof W=="number"){var Ee=this.fds[W];if(!Ee)throw xe(j);return Ee}else return this.openFile($e(W),J,le)},ye.prototype.readBase=function(W,J,le,Ee,Be){var je=this.getFileByFdOrThrow(W);return je.read(J,Number(le),Number(Ee),Be)},ye.prototype.readSync=function(W,J,le,Ee,Be){return Zr(W),this.readBase(W,J,le,Ee,Be)},ye.prototype.read=function(W,J,le,Ee,Be,je){var Xe=this;if(Te(je),Ee===0)return u.default.nextTick(function(){je&&je(null,0,J)});(0,a.default)(function(){try{var nt=Xe.readBase(W,J,le,Ee,Be);je(null,nt,J)}catch(at){je(at)}})},ye.prototype.readFileBase=function(W,J,le){var Ee,Be=typeof W=="number",je=Be&&Yt(W),Xe;if(je)Xe=W;else{var nt=$e(W),at=Et(nt),yt=this.getResolvedLink(at);if(yt){var Lt=yt.getNode();if(Lt.isDirectory())throw xe(F,"open",yt.getPath())}Xe=this.openSync(W,J)}try{Ee=Ht(this.getFileByFdOrThrow(Xe).getBuffer(),le)}finally{je||this.closeSync(Xe)}return Ee},ye.prototype.readFileSync=function(W,J){var le=m(J),Ee=_e(le.flag);return this.readFileBase(W,Ee,le.encoding)},ye.prototype.readFile=function(W,J,le){var Ee=We(m)(J,le),Be=Ee[0],je=Ee[1],Xe=_e(Be.flag);this.wrapAsync(this.readFileBase,[W,Xe,Be.encoding],je)},ye.prototype.writeBase=function(W,J,le,Ee,Be){var je=this.getFileByFdOrThrow(W,"write");return je.write(J,le,Ee,Be)},ye.prototype.writeSync=function(W,J,le,Ee,Be){Zr(W);var je,Xe,nt,at,yt=typeof J!="string";yt?(Xe=(le||0)|0,nt=Ee,at=Be):(at=le,je=Ee);var Lt=qn(J,je);return yt?typeof nt>"u"&&(nt=Lt.length):(Xe=0,nt=Lt.length),this.writeBase(W,Lt,Xe,nt,at)},ye.prototype.write=function(W,J,le,Ee,Be,je){var Xe=this;Zr(W);var nt,at,yt,Lt,en,Eu=typeof J,Zs=typeof le,sl=typeof Ee,Au=typeof Be;Eu!=="string"?Zs==="function"?en=le:sl==="function"?(nt=le|0,en=Ee):Au==="function"?(nt=le|0,at=Ee,en=Be):(nt=le|0,at=Ee,yt=Be,en=je):Zs==="function"?en=le:sl==="function"?(yt=le,en=Ee):Au==="function"&&(yt=le,Lt=Ee,en=Be);var jr=qn(J,Lt);Eu!=="string"?typeof at>"u"&&(at=jr.length):(nt=0,at=jr.length);var es=Te(en);(0,a.default)(function(){try{var Ss=Xe.writeBase(W,jr,nt,at,yt);Eu!=="string"?es(null,Ss,jr):es(null,Ss,J)}catch(d0){es(d0)}})},ye.prototype.writeFileBase=function(W,J,le,Ee){var Be=typeof W=="number",je;Be?je=W:je=this.openBase($e(W),le,Ee);var Xe=0,nt=J.length,at=le&Z?void 0:0;try{for(;nt>0;){var yt=this.writeSync(je,J,Xe,nt,at);Xe+=yt,nt-=yt,at!==void 0&&(at+=yt)}}finally{Be||this.closeSync(je)}},ye.prototype.writeFileSync=function(W,J,le){var Ee=re(le),Be=_e(Ee.flag),je=Wt(Ee.mode),Xe=qn(J,Ee.encoding);this.writeFileBase(W,Xe,Be,je)},ye.prototype.writeFile=function(W,J,le,Ee){var Be=le,je=Ee;typeof le=="function"&&(Be=N,je=le);var Xe=Te(je),nt=re(Be),at=_e(nt.flag),yt=Wt(nt.mode),Lt=qn(J,nt.encoding);this.wrapAsync(this.writeFileBase,[W,Lt,at,yt],Xe)},ye.prototype.linkBase=function(W,J){var le=Et(W),Ee=this.getLink(le);if(!Ee)throw xe(j,"link",W,J);var Be=Et(J),je=this.getLinkParent(Be);if(!je)throw xe(j,"link",W,J);var Xe=Be[Be.length-1];if(je.getChild(Xe))throw xe(I,"link",W,J);var nt=Ee.getNode();nt.nlink++,je.createChild(Xe,nt)},ye.prototype.copyFileBase=function(W,J,le){var Ee=this.readFileSync(W);if(le&U&&this.existsSync(J))throw xe(I,"copyFile",W,J);if(le&V)throw xe(te,"copyFile",W,J);this.writeFileBase(J,Ee,he.w,438)},ye.prototype.copyFileSync=function(W,J,le){var Ee=$e(W),Be=$e(J);return this.copyFileBase(Ee,Be,(le||0)|0)},ye.prototype.copyFile=function(W,J,le,Ee){var Be=$e(W),je=$e(J),Xe,nt;typeof le=="function"?(Xe=0,nt=le):(Xe=le,nt=Ee),Te(nt),this.wrapAsync(this.copyFileBase,[Be,je,Xe],nt)},ye.prototype.linkSync=function(W,J){var le=$e(W),Ee=$e(J);this.linkBase(le,Ee)},ye.prototype.link=function(W,J,le){var Ee=$e(W),Be=$e(J);this.wrapAsync(this.linkBase,[Ee,Be],le)},ye.prototype.unlinkBase=function(W){var J=Et(W),le=this.getLink(J);if(!le)throw xe(j,"unlink",W);if(le.length)throw Error("Dir not empty...");this.deleteLink(le);var Ee=le.getNode();Ee.nlink--,Ee.nlink<=0&&this.deleteNode(Ee)},ye.prototype.unlinkSync=function(W){var J=$e(W);this.unlinkBase(J)},ye.prototype.unlink=function(W,J){var le=$e(W);this.wrapAsync(this.unlinkBase,[le],J)},ye.prototype.symlinkBase=function(W,J){var le=Et(J),Ee=this.getLinkParent(le);if(!Ee)throw xe(j,"symlink",W,J);var Be=le[le.length-1];if(Ee.getChild(Be))throw xe(I,"symlink",W,J);var je=Ee.createChild(Be);return je.getNode().makeSymlink(Et(W)),je},ye.prototype.symlinkSync=function(W,J,le){var Ee=$e(W),Be=$e(J);this.symlinkBase(Ee,Be)},ye.prototype.symlink=function(W,J,le,Ee){var Be=Te(typeof le=="function"?le:Ee),je=$e(W),Xe=$e(J);this.wrapAsync(this.symlinkBase,[je,Xe],Be)},ye.prototype.realpathBase=function(W,J){var le=Et(W),Ee=this.getResolvedLink(le);if(!Ee)throw xe(j,"realpath",W);return(0,g.strToEncoding)(Ee.getPath()||"/",J)},ye.prototype.realpathSync=function(W,J){return this.realpathBase($e(W),Y(J).encoding)},ye.prototype.realpath=function(W,J,le){var Ee=me(J,le),Be=Ee[0],je=Ee[1],Xe=$e(W);this.wrapAsync(this.realpathBase,[Xe,Be.encoding],je)},ye.prototype.lstatBase=function(W,J,le){J===void 0&&(J=!1),le===void 0&&(le=!1);var Ee=this.getLink(Et(W));if(Ee)return i.default.build(Ee.getNode(),J);if(le)throw xe(j,"lstat",W)},ye.prototype.lstatSync=function(W,J){var le=ce(J),Ee=le.throwIfNoEntry,Be=Ee===void 0?!0:Ee,je=le.bigint,Xe=je===void 0?!1:je;return this.lstatBase($e(W),Xe,Be)},ye.prototype.lstat=function(W,J,le){var Ee=we(J,le),Be=Ee[0],je=Be.throwIfNoEntry,Xe=je===void 0?!0:je,nt=Be.bigint,at=nt===void 0?!1:nt,yt=Ee[1];this.wrapAsync(this.lstatBase,[$e(W),at,Xe],yt)},ye.prototype.statBase=function(W,J,le){J===void 0&&(J=!1),le===void 0&&(le=!0);var Ee=this.getResolvedLink(Et(W));if(Ee)return i.default.build(Ee.getNode(),J);if(le)throw xe(j,"stat",W)},ye.prototype.statSync=function(W,J){var le=ce(J),Ee=le.bigint,Be=Ee===void 0?!0:Ee,je=le.throwIfNoEntry,Xe=je===void 0?!0:je;return this.statBase($e(W),Be,Xe)},ye.prototype.stat=function(W,J,le){var Ee=we(J,le),Be=Ee[0],je=Be.bigint,Xe=je===void 0?!1:je,nt=Be.throwIfNoEntry,at=nt===void 0?!0:nt,yt=Ee[1];this.wrapAsync(this.statBase,[$e(W),Xe,at],yt)},ye.prototype.fstatBase=function(W,J){J===void 0&&(J=!1);var le=this.getFileByFd(W);if(!le)throw xe(Q,"fstat");return i.default.build(le.node,J)},ye.prototype.fstatSync=function(W,J){return this.fstatBase(W,ce(J).bigint)},ye.prototype.fstat=function(W,J,le){var Ee=we(J,le),Be=Ee[0],je=Ee[1];this.wrapAsync(this.fstatBase,[W,Be.bigint],je)},ye.prototype.renameBase=function(W,J){var le=this.getLink(Et(W));if(!le)throw xe(j,"rename",W,J);var Ee=Et(J),Be=this.getLinkParent(Ee);if(!Be)throw xe(j,"rename",W,J);var je=le.parent;je&&je.deleteChild(le);var Xe=Ee[Ee.length-1];le.name=Xe,le.steps=e(e([],Be.steps,!0),[Xe],!1),Be.setChild(le.getName(),le)},ye.prototype.renameSync=function(W,J){var le=$e(W),Ee=$e(J);this.renameBase(le,Ee)},ye.prototype.rename=function(W,J,le){var Ee=$e(W),Be=$e(J);this.wrapAsync(this.renameBase,[Ee,Be],le)},ye.prototype.existsBase=function(W){return!!this.statBase(W)},ye.prototype.existsSync=function(W){try{return this.existsBase($e(W))}catch{return!1}},ye.prototype.exists=function(W,J){var le=this,Ee=$e(W);if(typeof J!="function")throw Error(M.CB);(0,a.default)(function(){try{J(le.existsBase(Ee))}catch{J(!1)}})},ye.prototype.accessBase=function(W,J){this.getLinkOrThrow(W,"access")},ye.prototype.accessSync=function(W,J){J===void 0&&(J=ae);var le=$e(W);J=J|0,this.accessBase(le,J)},ye.prototype.access=function(W,J,le){var Ee=ae,Be;typeof J!="function"?(Ee=J|0,Be=Te(le)):Be=J;var je=$e(W);this.wrapAsync(this.accessBase,[je,Ee],Be)},ye.prototype.appendFileSync=function(W,J,le){le===void 0&&(le=D);var Ee=fe(le);(!Ee.flag||Yt(W))&&(Ee.flag="a"),this.writeFileSync(W,J,Ee)},ye.prototype.appendFile=function(W,J,le,Ee){var Be=be(le,Ee),je=Be[0],Xe=Be[1];(!je.flag||Yt(W))&&(je.flag="a"),this.writeFile(W,J,je,Xe)},ye.prototype.readdirBase=function(W,J){var le=Et(W),Ee=this.getResolvedLink(le);if(!Ee)throw xe(j,"readdir",W);var Be=Ee.getNode();if(!Be.isDirectory())throw xe(k,"scandir",W);if(J.withFileTypes){var je=[];for(var Xe in Ee.children){var nt=Ee.getChild(Xe);!nt||Xe==="."||Xe===".."||je.push(o.default.build(nt,J.encoding))}return!oe&&J.encoding!=="buffer"&&je.sort(function(Lt,en){return Lt.name<en.name?-1:Lt.name>en.name?1:0}),je}var at=[];for(var yt in Ee.children)yt==="."||yt===".."||at.push((0,g.strToEncoding)(yt,J.encoding));return!oe&&J.encoding!=="buffer"&&at.sort(),at},ye.prototype.readdirSync=function(W,J){var le=De(J),Ee=$e(W);return this.readdirBase(Ee,le)},ye.prototype.readdir=function(W,J,le){var Ee=Me(J,le),Be=Ee[0],je=Ee[1],Xe=$e(W);this.wrapAsync(this.readdirBase,[Xe,Be],je)},ye.prototype.readlinkBase=function(W,J){var le=this.getLinkOrThrow(W,"readlink"),Ee=le.getNode();if(!Ee.isSymlink())throw xe(K,"readlink",W);var Be=Ae+Ee.symlink.join(Ae);return(0,g.strToEncoding)(Be,J)},ye.prototype.readlinkSync=function(W,J){var le=Ge(J),Ee=$e(W);return this.readlinkBase(Ee,le.encoding)},ye.prototype.readlink=function(W,J,le){var Ee=x(J,le),Be=Ee[0],je=Ee[1],Xe=$e(W);this.wrapAsync(this.readlinkBase,[Xe,Be.encoding],je)},ye.prototype.fsyncBase=function(W){this.getFileByFdOrThrow(W,"fsync")},ye.prototype.fsyncSync=function(W){this.fsyncBase(W)},ye.prototype.fsync=function(W,J){this.wrapAsync(this.fsyncBase,[W],J)},ye.prototype.fdatasyncBase=function(W){this.getFileByFdOrThrow(W,"fdatasync")},ye.prototype.fdatasyncSync=function(W){this.fdatasyncBase(W)},ye.prototype.fdatasync=function(W,J){this.wrapAsync(this.fdatasyncBase,[W],J)},ye.prototype.ftruncateBase=function(W,J){var le=this.getFileByFdOrThrow(W,"ftruncate");le.truncate(J)},ye.prototype.ftruncateSync=function(W,J){this.ftruncateBase(W,J)},ye.prototype.ftruncate=function(W,J,le){var Ee=typeof J=="number"?J:0,Be=Te(typeof J=="number"?le:J);this.wrapAsync(this.ftruncateBase,[W,Ee],Be)},ye.prototype.truncateBase=function(W,J){var le=this.openSync(W,"r+");try{this.ftruncateSync(le,J)}finally{this.closeSync(le)}},ye.prototype.truncateSync=function(W,J){if(Yt(W))return this.ftruncateSync(W,J);this.truncateBase(W,J)},ye.prototype.truncate=function(W,J,le){var Ee=typeof J=="number"?J:0,Be=Te(typeof J=="number"?le:J);if(Yt(W))return this.ftruncate(W,Ee,Be);this.wrapAsync(this.truncateBase,[W,Ee],Be)},ye.prototype.futimesBase=function(W,J,le){var Ee=this.getFileByFdOrThrow(W,"futimes"),Be=Ee.node;Be.atime=new Date(J*1e3),Be.mtime=new Date(le*1e3)},ye.prototype.futimesSync=function(W,J,le){this.futimesBase(W,Jr(J),Jr(le))},ye.prototype.futimes=function(W,J,le,Ee){this.wrapAsync(this.futimesBase,[W,Jr(J),Jr(le)],Ee)},ye.prototype.utimesBase=function(W,J,le){var Ee=this.openSync(W,"r");try{this.futimesBase(Ee,J,le)}finally{this.closeSync(Ee)}},ye.prototype.utimesSync=function(W,J,le){this.utimesBase($e(W),Jr(J),Jr(le))},ye.prototype.utimes=function(W,J,le,Ee){this.wrapAsync(this.utimesBase,[$e(W),Jr(J),Jr(le)],Ee)},ye.prototype.mkdirBase=function(W,J){var le=Et(W);if(!le.length)throw xe(I,"mkdir",W);var Ee=this.getLinkParentAsDirOrThrow(W,"mkdir"),Be=le[le.length-1];if(Ee.getChild(Be))throw xe(I,"mkdir",W);Ee.createChild(Be,this.createNode(!0,J))},ye.prototype.mkdirpBase=function(W,J){for(var le=et(W),Ee=le.substring(1),Be=Ee?Ee.split(Ae):[],je=this.root,Xe=!1,nt=0;nt<Be.length;nt++){var at=Be[nt];if(!je.getNode().isDirectory())throw xe(k,"mkdir",je.getPath());var yt=je.getChild(at);if(yt)if(yt.getNode().isDirectory())je=yt;else throw xe(k,"mkdir",yt.getPath());else je=je.createChild(at,this.createNode(!0,J)),Xe=!0}return Xe?le:void 0},ye.prototype.mkdirSync=function(W,J){var le=Pe(J),Ee=Wt(le.mode,511),Be=$e(W);if(le.recursive)return this.mkdirpBase(Be,Ee);this.mkdirBase(Be,Ee)},ye.prototype.mkdir=function(W,J,le){var Ee=Pe(J),Be=Te(typeof J=="function"?J:le),je=Wt(Ee.mode,511),Xe=$e(W);Ee.recursive?this.wrapAsync(this.mkdirpBase,[Xe,je],Be):this.wrapAsync(this.mkdirBase,[Xe,je],Be)},ye.prototype.mkdirpSync=function(W,J){return this.mkdirSync(W,{mode:J,recursive:!0})},ye.prototype.mkdirp=function(W,J,le){var Ee=typeof J=="function"?void 0:J,Be=Te(typeof J=="function"?J:le);this.mkdir(W,{mode:Ee,recursive:!0},Be)},ye.prototype.mkdtempBase=function(W,J,le){le===void 0&&(le=5);var Ee=W+this.genRndStr();try{return this.mkdirBase(Ee,511),(0,g.strToEncoding)(Ee,J)}catch(Be){if(Be.code===I){if(le>1)return this.mkdtempBase(W,J,le-1);throw Error("Could not create temp dir.")}else throw Be}},ye.prototype.mkdtempSync=function(W,J){var le=Ge(J).encoding;if(!W||typeof W!="string")throw new TypeError("filename prefix is required");return Dr(W),this.mkdtempBase(W,le)},ye.prototype.mkdtemp=function(W,J,le){var Ee=x(J,le),Be=Ee[0].encoding,je=Ee[1];if(!W||typeof W!="string")throw new TypeError("filename prefix is required");Dr(W)&&this.wrapAsync(this.mkdtempBase,[W,Be],je)},ye.prototype.rmdirBase=function(W,J){var le=C(J),Ee=this.getLinkAsDirOrThrow(W,"rmdir");if(Ee.length&&!le.recursive)throw xe(R,"rmdir",W);this.deleteLink(Ee)},ye.prototype.rmdirSync=function(W,J){this.rmdirBase($e(W),J)},ye.prototype.rmdir=function(W,J,le){var Ee=C(J),Be=Te(typeof J=="function"?J:le);this.wrapAsync(this.rmdirBase,[$e(W),Ee],Be)},ye.prototype.rmBase=function(W,J){J===void 0&&(J={});var le=this.getResolvedLink(W);if(!le){if(!J.force)throw xe(j,"stat",W);return}if(le.getNode().isDirectory()&&!J.recursive)throw xe(ge,"rm",W);this.deleteLink(le)},ye.prototype.rmSync=function(W,J){this.rmBase($e(W),J)},ye.prototype.rm=function(W,J,le){var Ee=Ue(J,le),Be=Ee[0],je=Ee[1];this.wrapAsync(this.rmBase,[$e(W),Be],je)},ye.prototype.fchmodBase=function(W,J){var le=this.getFileByFdOrThrow(W,"fchmod");le.chmod(J)},ye.prototype.fchmodSync=function(W,J){this.fchmodBase(W,Wt(J))},ye.prototype.fchmod=function(W,J,le){this.wrapAsync(this.fchmodBase,[W,Wt(J)],le)},ye.prototype.chmodBase=function(W,J){var le=this.openSync(W,"r");try{this.fchmodBase(le,J)}finally{this.closeSync(le)}},ye.prototype.chmodSync=function(W,J){var le=Wt(J),Ee=$e(W);this.chmodBase(Ee,le)},ye.prototype.chmod=function(W,J,le){var Ee=Wt(J),Be=$e(W);this.wrapAsync(this.chmodBase,[Be,Ee],le)},ye.prototype.lchmodBase=function(W,J){var le=this.openBase(W,S,0,!1);try{this.fchmodBase(le,J)}finally{this.closeSync(le)}},ye.prototype.lchmodSync=function(W,J){var le=Wt(J),Ee=$e(W);this.lchmodBase(Ee,le)},ye.prototype.lchmod=function(W,J,le){var Ee=Wt(J),Be=$e(W);this.wrapAsync(this.lchmodBase,[Be,Ee],le)},ye.prototype.fchownBase=function(W,J,le){this.getFileByFdOrThrow(W,"fchown").chown(J,le)},ye.prototype.fchownSync=function(W,J,le){Qr(J),Bf(le),this.fchownBase(W,J,le)},ye.prototype.fchown=function(W,J,le,Ee){Qr(J),Bf(le),this.wrapAsync(this.fchownBase,[W,J,le],Ee)},ye.prototype.chownBase=function(W,J,le){var Ee=this.getResolvedLinkOrThrow(W,"chown"),Be=Ee.getNode();Be.chown(J,le)},ye.prototype.chownSync=function(W,J,le){Qr(J),Bf(le),this.chownBase($e(W),J,le)},ye.prototype.chown=function(W,J,le,Ee){Qr(J),Bf(le),this.wrapAsync(this.chownBase,[$e(W),J,le],Ee)},ye.prototype.lchownBase=function(W,J,le){this.getLinkOrThrow(W,"lchown").getNode().chown(J,le)},ye.prototype.lchownSync=function(W,J,le){Qr(J),Bf(le),this.lchownBase($e(W),J,le)},ye.prototype.lchown=function(W,J,le,Ee){Qr(J),Bf(le),this.wrapAsync(this.lchownBase,[$e(W),J,le],Ee)},ye.prototype.watchFile=function(W,J,le){var Ee=$e(W),Be=J,je=le;if(typeof Be=="function"&&(je=J,Be=null),typeof je!="function")throw Error('"watchFile()" requires a listener function');var Xe=5007,nt=!0;Be&&typeof Be=="object"&&(typeof Be.interval=="number"&&(Xe=Be.interval),typeof Be.persistent=="boolean"&&(nt=Be.persistent));var at=this.statWatchers[Ee];return at||(at=new this.StatWatcher,at.start(Ee,nt,Xe),this.statWatchers[Ee]=at),at.addListener("change",je),at},ye.prototype.unwatchFile=function(W,J){var le=$e(W),Ee=this.statWatchers[le];Ee&&(typeof J=="function"?Ee.removeListener("change",J):Ee.removeAllListeners("change"),Ee.listenerCount("change")===0&&(Ee.stop(),delete this.statWatchers[le]))},ye.prototype.createReadStream=function(W,J){return new this.ReadStream(W,J)},ye.prototype.createWriteStream=function(W,J){return new this.WriteStream(W,J)},ye.prototype.watch=function(W,J,le){var Ee=$e(W),Be=J;typeof J=="function"&&(le=J,Be=null);var je=Ge(Be),Xe=je.persistent,nt=je.recursive,at=je.encoding;Xe===void 0&&(Xe=!0),nt===void 0&&(nt=!1);var yt=new this.FSWatcher;return yt.start(Ee,Xe,nt,at),le&&yt.addListener("change",le),yt},ye.fd=2147483647,ye})();Ft.Volume=P3;function B3(ye){ye.emit("stop")}var NT=(function(ye){r(W,ye);function W(J){var le=ye.call(this)||this;return le.onInterval=function(){try{var Ee=le.vol.statSync(le.filename);le.hasChanged(Ee)&&(le.emit("change",Ee,le.prev),le.prev=Ee)}finally{le.loop()}},le.vol=J,le}return W.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},W.prototype.hasChanged=function(J){return J.mtimeMs>this.prev.mtimeMs||J.nlink!==this.prev.nlink},W.prototype.start=function(J,le,Ee){le===void 0&&(le=!0),Ee===void 0&&(Ee=5007),this.filename=$e(J),this.setTimeout=le?setTimeout.bind(typeof globalThis<"u"?globalThis:qU):c.default,this.interval=Ee,this.prev=this.vol.statSync(this.filename),this.loop()},W.prototype.stop=function(){clearTimeout(this.timeoutRef),u.default.nextTick(B3,this)},W})(d.EventEmitter);Ft.StatWatcher=NT;var Ji;function M3(ye){Ji=(0,s.bufferAllocUnsafe)(ye),Ji.used=0}v.inherits(Ks,f.Readable),Ft.ReadStream=Ks;function Ks(ye,W,J){if(!(this instanceof Ks))return new Ks(ye,W,J);if(this._vol=ye,J=Object.assign({},Oe(J,{})),J.highWaterMark===void 0&&(J.highWaterMark=64*1024),f.Readable.call(this,J),this.path=$e(W),this.fd=J.fd===void 0?null:J.fd,this.flags=J.flags===void 0?"r":J.flags,this.mode=J.mode===void 0?438:J.mode,this.start=J.start,this.end=J.end,this.autoClose=J.autoClose===void 0?!0:J.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}Ks.prototype.open=function(){var ye=this;this._vol.open(this.path,this.flags,this.mode,function(W,J){if(W){ye.autoClose&&ye.destroy&&ye.destroy(),ye.emit("error",W);return}ye.fd=J,ye.emit("open",J),ye.read()})},Ks.prototype._read=function(ye){if(typeof this.fd!="number")return this.once("open",function(){this._read(ye)});if(this.destroyed)return;(!Ji||Ji.length-Ji.used<q)&&M3(this._readableState.highWaterMark);var W=Ji,J=Math.min(Ji.length-Ji.used,ye),le=Ji.used;if(this.pos!==void 0&&(J=Math.min(this.end-this.pos+1,J)),J<=0)return this.push(null);var Ee=this;this._vol.read(this.fd,Ji,Ji.used,J,this.pos,Be),this.pos!==void 0&&(this.pos+=J),Ji.used+=J;function Be(je,Xe){if(je)Ee.autoClose&&Ee.destroy&&Ee.destroy(),Ee.emit("error",je);else{var nt=null;Xe>0&&(Ee.bytesRead+=Xe,nt=W.slice(le,le+Xe)),Ee.push(nt)}}},Ks.prototype._destroy=function(ye,W){this.close(function(J){W(ye||J)})},Ks.prototype.close=function(ye){var W=this,J;if(ye&&this.once("close",ye),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",kT);return}return u.default.nextTick(function(){return W.emit("close")})}typeof((J=this._readableState)===null||J===void 0?void 0:J.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(le){le?W.emit("error",le):W.emit("close")}),this.fd=null};function kT(ye){this.close()}v.inherits(Qi,f.Writable),Ft.WriteStream=Qi;function Qi(ye,W,J){if(!(this instanceof Qi))return new Qi(ye,W,J);if(this._vol=ye,J=Object.assign({},Oe(J,{})),f.Writable.call(this,J),this.path=$e(W),this.fd=J.fd===void 0?null:J.fd,this.flags=J.flags===void 0?"w":J.flags,this.mode=J.mode===void 0?438:J.mode,this.start=J.start,this.autoClose=J.autoClose===void 0?!0:!!J.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}J.encoding&&this.setDefaultEncoding(J.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}Qi.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(ye,W){if(ye){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",ye);return}this.fd=W,this.emit("open",W)}.bind(this))},Qi.prototype._write=function(ye,W,J){if(!(ye instanceof s.Buffer||ye instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(ye,W,J)});var le=this;this._vol.write(this.fd,ye,0,ye.length,this.pos,function(Ee,Be){if(Ee)return le.autoClose&&le.destroy&&le.destroy(),J(Ee);le.bytesWritten+=Be,J()}),this.pos!==void 0&&(this.pos+=ye.length)},Qi.prototype._writev=function(ye,W){if(typeof this.fd!="number")return this.once("open",function(){this._writev(ye,W)});for(var J=this,le=ye.length,Ee=new Array(le),Be=0,je=0;je<le;je++){var Xe=ye[je].chunk;Ee[je]=Xe,Be+=Xe.length}var nt=s.Buffer.concat(Ee);this._vol.write(this.fd,nt,0,nt.length,this.pos,function(at,yt){if(at)return J.destroy&&J.destroy(),W(at);J.bytesWritten+=yt,W()}),this.pos!==void 0&&(this.pos+=Be)},Qi.prototype.close=function(ye){var W=this,J;if(ye&&this.once("close",ye),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",kT);return}return u.default.nextTick(function(){return W.emit("close")})}typeof((J=this._writableState)===null||J===void 0?void 0:J.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(le){le?W.emit("error",le):W.emit("close")}),this.fd=null},Qi.prototype._destroy=Ks.prototype._destroy,Qi.prototype.destroySoon=Qi.prototype.end;var LT=(function(ye){r(W,ye);function W(J){var le=ye.call(this)||this;return le._filename="",le._filenameEncoded="",le._recursive=!1,le._encoding=g.ENCODING_UTF8,le._listenerRemovers=new Map,le._onParentChild=function(Ee){Ee.getName()===le._getName()&&le._emit("rename")},le._emit=function(Ee){le.emit("change",Ee,le._filenameEncoded)},le._persist=function(){le._timer=setTimeout(le._persist,1e6)},le._vol=J,le}return W.prototype._getName=function(){return this._steps[this._steps.length-1]},W.prototype.start=function(J,le,Ee,Be){var je=this;le===void 0&&(le=!0),Ee===void 0&&(Ee=!1),Be===void 0&&(Be=g.ENCODING_UTF8),this._filename=$e(J),this._steps=Et(this._filename),this._filenameEncoded=(0,g.strToEncoding)(this._filename),this._recursive=Ee,this._encoding=Be;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(Lt){var Xe=new Error("watch ".concat(this._filename," ").concat(Lt.code));throw Xe.code=Lt.code,Xe.errno=Lt.code,Xe}var nt=function(Lt){var en,Eu=Lt.getPath(),Zs=Lt.getNode(),sl=function(){var jr=ve(je._filename,Eu);return jr||(jr=je._getName()),je.emit("change","change",jr)};Zs.on("change",sl);var Au=(en=je._listenerRemovers.get(Zs.ino))!==null&&en!==void 0?en:[];Au.push(function(){return Zs.removeListener("change",sl)}),je._listenerRemovers.set(Zs.ino,Au)},at=function(Lt){var en,Eu=Lt.getNode(),Zs=function(jr){je.emit("change","rename",ve(je._filename,jr.getPath())),setTimeout(function(){nt(jr),at(jr)})},sl=function(jr){var es=function(Ss){var d0=Ss.getNode().ino,PT=je._listenerRemovers.get(d0);PT&&(PT.forEach(function(p0){return p0()}),je._listenerRemovers.delete(d0)),Object.values(Ss.children).forEach(function(p0){p0&&es(p0)})};es(jr),je.emit("change","rename",ve(je._filename,jr.getPath()))};Object.entries(Lt.children).forEach(function(jr){var es=jr[0],Ss=jr[1];Ss&&es!=="."&&es!==".."&&nt(Ss)}),Lt.on("child:add",Zs),Lt.on("child:delete",sl);var Au=(en=je._listenerRemovers.get(Eu.ino))!==null&&en!==void 0?en:[];Au.push(function(){Lt.removeListener("child:add",Zs),Lt.removeListener("child:delete",sl)}),Ee&&Object.entries(Lt.children).forEach(function(jr){var es=jr[0],Ss=jr[1];Ss&&es!=="."&&es!==".."&&at(Ss)})};nt(this._link),at(this._link);var yt=this._link.parent;yt&&(yt.setMaxListeners(yt.getMaxListeners()+1),yt.on("child:delete",this._onParentChild)),le&&this._persist()},W.prototype.close=function(){clearTimeout(this._timer),this._listenerRemovers.forEach(function(le){le.forEach(function(Ee){return Ee()})}),this._listenerRemovers.clear();var J=this._link.parent;J&&J.removeListener("child:delete",this._onParentChild)},W})(d.EventEmitter);return Ft.FSWatcher=LT,Ft}function HU(){return VO||(VO=!0,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.fsSyncMethods=Zo.fsProps=Zo.fsAsyncMethods=void 0,Zo.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],Zo.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","rmSync","createReadStream","createWriteStream"],Zo.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","rm","watchFile","unwatchFile","watch"]),Zo}function GU(){if(YO)return dn;YO=!0;var r=dn&&dn.__assign||function(){return r=Object.assign||function(g){for(var b,v=1,w=arguments.length;v<w;v++){b=arguments[v];for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(g[y]=b[y])}return g},r.apply(this,arguments)};Object.defineProperty(dn,"__esModule",{value:!0}),dn.fs=dn.createFsFromVolume=dn.vol=dn.Volume=void 0;var e=_2(),t=ZO(),n=eN(),i=HU(),o=i.fsSyncMethods,s=i.fsAsyncMethods,a=qp(),u=a.constants.F_OK,c=a.constants.R_OK,f=a.constants.W_OK,h=a.constants.X_OK;dn.Volume=n.Volume,dn.vol=new n.Volume;function d(g){for(var b={F_OK:u,R_OK:c,W_OK:f,X_OK:h,constants:a.constants,Stats:e.default,Dirent:t.default},v=0,w=o;v<w.length;v++){var y=w[v];typeof g[y]=="function"&&(b[y]=g[y].bind(g))}for(var _=0,E=s;_<E.length;_++){var y=E[_];typeof g[y]=="function"&&(b[y]=g[y].bind(g))}return b.StatWatcher=g.StatWatcher,b.FSWatcher=g.FSWatcher,b.WriteStream=g.WriteStream,b.ReadStream=g.ReadStream,b.promises=g.promises,b._toUnixTimestamp=n.toUnixTimestamp,b}return dn.createFsFromVolume=d,dn.fs=d(dn.vol),dn=r(r({},dn),dn.fs),dn.semantic=!0,dn}function Si(r){throw new Error(`Node.js fs ${r} is not supported by JSPM core in the browser`)}function tN(r,e,t){let n=0,i=new TextDecoder;Jo.watch(r,"utf8",()=>{let{size:o}=Jo.fstatSync(e),s=Buffer.alloc(o-n);Jo.readSync(e,s,0,s.length,n),n=o,t(i.decode(s,{stream:!0}))})}function A2(r,e){if(r.protocol==="file:")return v2(r);if(r.protocol==="https:"||r.protocol==="http:"){let t="\\\\url\\"+r.href.replaceAll(/\//g,"\\\\");if(sb(t))return t;if(e)throw new Error(`Cannot sync request URL ${r} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{let n=await fetch(r);if(!n.ok)throw new Error(`Unable to fetch ${r.href}, ${n.status}`);let i=await n.arrayBuffer();return rN(t,Buffer.from(i)),t})()}throw new Error("URL "+r+" not supported in JSPM FS implementation.")}function YU(r){return function(e,...t){return e instanceof URL?r(A2(e,!0),...t):r(e,...t)}}function XU(r){return async function(e,...t){return e instanceof URL?r(await A2(e),...t):r(e,...t)}}function KU(r){return function(e,...t){let n=t[t.length-1];e instanceof URL&&typeof n=="function"?A2(e).then(i=>{r(i,...t)},n):r(e,...t)}}var zp,NO,rb,kO,eh,LO,Rs,PO,sn,BO,FU,ro,MO,th,FO,nb,UO,jO,rh,$O,oi,zO,ib,WO,jU,pl,qO,Wp,HO,Ft,GO,qU,Zo,VO,dn,YO,Gu,Gn,Jo,VU,br,ZU,JU,QU,ej,tj,rj,nj,ij,sj,oj,aj,lj,uj,cj,fj,hj,dj,sb,pj,gj,mj,yj,bj,wj,vj,_j,Ej,Aj,xj,Sj,Tj,Cj,Rj,Dj,Ij,Oj,Nj,kj,Lj,x2,Pj,Bj,Mj,Fj,Uj,jj,$j,zj,Wj,qj,Hj,Gj,Vj,Yj,Xj,S2,Kj,Zj,Jj,Qj,e$,t$,r$,n$,i$,s$,o$,a$,l$,u$,c$,f$,h$,d$,p$,g$,m$,y$,b$,w$,rN,v$,_$,E$,A$,x$,S$,T$,C$,R$,D$,I$,O$,N$,k$,L$,P$,B$,M$,Gp=Jt(()=>{Ne();Le();ke();Ff();z_();W0();cl();VD();qf();Mu();G0();Xf();LE();ll();OO();eb();BE();$p();u2();zp={},NO=!1;rb={},kO=!1;eh={},LO=!1;Rs={},PO=!1;sn={},BO=!1,FU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ro={},MO=!1;th={},FO=!1;rn._makeLong;rn.basename;rn.delimiter;rn.dirname;rn.extname;rn.format;rn.isAbsolute;rn.join;rn.normalize;rn.parse;rn.posix;rn.relative;rn.resolve;rn.sep;rn.win32;nb={},UO=!1,jO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;rh={},$O=!1;oi={},zO=!1;ib={},WO=!1,jU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pl={},qO=!1;Wp={},HO=!1;Ft={},GO=!1,qU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Zo={},VO=!1;dn={},YO=!1;Gu=GU();Gu.__esModule;Gu.fs;Gu.createFsFromVolume;Gu.vol;Gu.Volume;Gu.semantic;Gn=eN();Gn.__esModule;Gn.FSWatcher;Gn.StatWatcher;Gn.Volume;Gn.toUnixTimestamp;Gn.bufferToEncoding;Gn.dataToBuffer;Gn.dataToStr;Gn.pathToSteps;Gn.filenameToSteps;Gn.pathToFilename;Gn.flagsToNumber;Gn.FLAGS;Gn.ReadStream;Gn.WriteStream;({vol:Jo,createFsFromVolume:VU}=Gu);Jo.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},"/tmp":{}});Jo.releasedFds=[2,1,0];Jo.openSync("/dev/stdin","w");Jo.openSync("/dev/stdout","r");Jo.openSync("/dev/stderr","r");tN("/dev/stdout",1,console.log);tN("/dev/stderr",2,console.error);br=VU(Jo);br.opendir=()=>Si("opendir");br.opendirSync=()=>Si("opendirSync");br.promises.opendir=()=>Si("promises.opendir");br.cp=()=>Si("cp");br.cpSync=()=>Si("cpSync");br.promises.cp=()=>Si("promises.cp");br.readv=()=>Si("readv");br.readvSync=()=>Si("readvSync");br.rm=()=>Si("rm");br.rmSync=()=>Si("rmSync");br.promises.rm=()=>Si("promises.rm");br.Dir=()=>Si("Dir");br.promises.watch=()=>Si("promises.watch");br.FileReadStream=br.ReadStream;br.FileWriteStream=br.WriteStream;br.promises.readFile=XU(br.promises.readFile);br.readFile=KU(br.readFile);br.readFileSync=YU(br.readFileSync);({appendFile:ZU,appendFileSync:JU,access:QU,accessSync:ej,chown:tj,chownSync:rj,chmod:nj,chmodSync:ij,close:sj,closeSync:oj,copyFile:aj,copyFileSync:lj,cp:uj,cpSync:cj,createReadStream:fj,createWriteStream:hj,exists:dj,existsSync:sb,fchown:pj,fchownSync:gj,fchmod:mj,fchmodSync:yj,fdatasync:bj,fdatasyncSync:wj,fstat:vj,fstatSync:_j,fsync:Ej,fsyncSync:Aj,ftruncate:xj,ftruncateSync:Sj,futimes:Tj,futimesSync:Cj,lchown:Rj,lchownSync:Dj,lchmod:Ij,lchmodSync:Oj,link:Nj,linkSync:kj,lstat:Lj,lstatSync:x2,mkdir:Pj,mkdirSync:Bj,mkdtemp:Mj,mkdtempSync:Fj,open:Uj,openSync:jj,opendir:$j,opendirSync:zj,readdir:Wj,readdirSync:qj,read:Hj,readSync:Gj,readv:Vj,readvSync:Yj,readFile:Xj,readFileSync:S2,readlink:Kj,readlinkSync:Zj,realpath:Jj,realpathSync:Qj,rename:e$,renameSync:t$,rm:r$,rmSync:n$,rmdir:i$,rmdirSync:s$,stat:o$,statSync:a$,symlink:l$,symlinkSync:u$,truncate:c$,truncateSync:f$,unwatchFile:h$,unlink:d$,unlinkSync:p$,utimes:g$,utimesSync:m$,watch:y$,watchFile:b$,writeFile:w$,writeFileSync:rN,write:v$,writeSync:_$,writev:E$,writevSync:A$,Dir:x$,Dirent:S$,Stats:T$,ReadStream:C$,WriteStream:R$,FileReadStream:D$,FileWriteStream:I$,_toUnixTimestamp:O$,constants:{F_OK:N$,R_OK:k$,W_OK:L$,X_OK:P$},constants:B$,promises:M$}=br)});var T2=ot(Vr=>{"use strict";Ne();Le();ke();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.readFile=Vr.writeFileSync=Vr.writeFile=Vr.read=Vr.open=Vr.close=Vr.stat=Vr.createReadStream=Vr.pathExists=void 0;var Qo=(Gp(),Ir(Hp));Vr.pathExists=Qo.existsSync;Vr.createReadStream=Qo.createReadStream;async function F$(r){return new Promise((e,t)=>{Qo.stat(r,(n,i)=>{n?t(n):e(i)})})}Vr.stat=F$;async function U$(r){return new Promise((e,t)=>{Qo.close(r,n=>{n?t(n):e()})})}Vr.close=U$;async function j$(r,e){return new Promise((t,n)=>{Qo.open(r,e,(i,o)=>{i?n(i):t(o)})})}Vr.open=j$;async function $$(r,e,t,n,i){return new Promise((o,s)=>{Qo.read(r,e,t,n,i,(a,u,c)=>{a?s(a):o({bytesRead:u,buffer:c})})})}Vr.read=$$;async function z$(r,e){return new Promise((t,n)=>{Qo.writeFile(r,e,i=>{i?n(i):t()})})}Vr.writeFile=z$;function W$(r,e){Qo.writeFileSync(r,e)}Vr.writeFileSync=W$;async function q$(r){return new Promise((e,t)=>{Qo.readFile(r,(n,i)=>{n?t(n):e(i)})})}Vr.readFile=q$});var ob=ot(Vu=>{"use strict";Ne();Le();ke();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.EndOfStreamError=Vu.defaultMessages=void 0;Vu.defaultMessages="End-Of-Stream";var C2=class extends Error{constructor(){super(Vu.defaultMessages)}};Vu.EndOfStreamError=C2});var nN=ot(ab=>{"use strict";Ne();Le();ke();Object.defineProperty(ab,"__esModule",{value:!0});ab.Deferred=void 0;var R2=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((e,t)=>{this.reject=t,this.resolve=e})}};ab.Deferred=R2});var sN=ot(nh=>{"use strict";Ne();Le();ke();Object.defineProperty(nh,"__esModule",{value:!0});nh.StreamReader=nh.EndOfStreamError=void 0;var iN=ob(),H$=nN(),G$=ob();Object.defineProperty(nh,"EndOfStreamError",{enumerable:!0,get:function(){return G$.EndOfStreamError}});var V$=1*1024*1024,D2=class{constructor(e){if(this.s=e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!e.read||!e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new iN.EndOfStreamError)),this.s.once("error",t=>this.reject(t)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(e,t,n){let i=await this.read(e,t,n);return this.peekQueue.push(e.subarray(t,t+i)),i}async read(e,t,n){if(n===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new iN.EndOfStreamError;let i=n,o=0;for(;this.peekQueue.length>0&&i>0;){let s=this.peekQueue.pop();if(!s)throw new Error("peekData should be defined");let a=Math.min(s.length,i);e.set(s.subarray(0,a),t+o),o+=a,i-=a,a<s.length&&this.peekQueue.push(s.subarray(a))}for(;i>0&&!this.endOfStream;){let s=Math.min(i,V$),a=await this.readFromStream(e,t+o,s);if(o+=a,a<s)break;i-=a}return o}async readFromStream(e,t,n){let i=this.s.read(n);if(i)return e.set(i,t),i.length;{let o={buffer:e,offset:t,length:n,deferred:new H$.Deferred};return this.deferred=o.deferred,this.s.once("readable",()=>{this.readDeferred(o)}),o.deferred.promise}}readDeferred(e){let t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(e)})}reject(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}};nh.StreamReader=D2});var sh=ot(ih=>{"use strict";Ne();Le();ke();Object.defineProperty(ih,"__esModule",{value:!0});ih.StreamReader=ih.EndOfStreamError=void 0;var Y$=ob();Object.defineProperty(ih,"EndOfStreamError",{enumerable:!0,get:function(){return Y$.EndOfStreamError}});var X$=sN();Object.defineProperty(ih,"StreamReader",{enumerable:!0,get:function(){return X$.StreamReader}})});var cb=ot(ub=>{"use strict";Ne();Le();ke();Object.defineProperty(ub,"__esModule",{value:!0});ub.AbstractTokenizer=void 0;var lb=sh(),I2=class{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}async readToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.readBuffer(n,{position:t})<e.len)throw new lb.EndOfStreamError;return e.get(n,0)}async peekToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.peekBuffer(n,{position:t})<e.len)throw new lb.EndOfStreamError;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new lb.EndOfStreamError;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new lb.EndOfStreamError;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){}normalizeOptions(e,t){if(t&&t.position!==void 0&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:t.mayBeLess===!0,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}};ub.AbstractTokenizer=I2});var oN=ot(hb=>{"use strict";Ne();Le();ke();Object.defineProperty(hb,"__esModule",{value:!0});hb.ReadStreamTokenizer=void 0;var K$=cb(),fb=sh(),Z$=256e3,O2=class extends K$.AbstractTokenizer{constructor(e,t){super(t),this.streamReader=new fb.StreamReader(e)}async getFileInfo(){return this.fileInfo}async readBuffer(e,t){let n=this.normalizeOptions(e,t),i=n.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,t);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;let o=await this.streamReader.read(e,n.offset,n.length);if(this.position+=o,(!t||!t.mayBeLess)&&o<n.length)throw new fb.EndOfStreamError;return o}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=0;if(n.position){let o=n.position-this.position;if(o>0){let s=new Uint8Array(n.length+o);return i=await this.peekBuffer(s,{mayBeLess:n.mayBeLess}),e.set(s.subarray(o),n.offset),i-o}else if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{i=await this.streamReader.peek(e,n.offset,n.length)}catch(o){if(t&&t.mayBeLess&&o instanceof fb.EndOfStreamError)return 0;throw o}if(!n.mayBeLess&&i<n.length)throw new fb.EndOfStreamError}return i}async ignore(e){let t=Math.min(Z$,e),n=new Uint8Array(t),i=0;for(;i<e;){let o=e-i,s=await this.readBuffer(n,{length:Math.min(t,o)});if(s<0)return s;i+=s}return i}};hb.ReadStreamTokenizer=O2});var aN=ot(db=>{"use strict";Ne();Le();ke();Object.defineProperty(db,"__esModule",{value:!0});db.BufferTokenizer=void 0;var J$=sh(),Q$=cb(),N2=class extends Q$.AbstractTokenizer{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,t){if(t&&t.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}let n=await this.peekBuffer(e,t);return this.position+=n,n}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&i<n.length)throw new J$.EndOfStreamError;return e.set(this.uint8Array.subarray(n.position,n.position+i),n.offset),i}async close(){}};db.BufferTokenizer=N2});var pb=ot(gl=>{"use strict";Ne();Le();ke();Object.defineProperty(gl,"__esModule",{value:!0});gl.fromBuffer=gl.fromStream=gl.EndOfStreamError=void 0;var e9=oN(),t9=aN(),r9=sh();Object.defineProperty(gl,"EndOfStreamError",{enumerable:!0,get:function(){return r9.EndOfStreamError}});function n9(r,e){return e=e||{},new e9.ReadStreamTokenizer(r,e)}gl.fromStream=n9;function i9(r,e){return new t9.BufferTokenizer(r,e)}gl.fromBuffer=i9});var uN=ot(oh=>{"use strict";Ne();Le();ke();Object.defineProperty(oh,"__esModule",{value:!0});oh.fromFile=oh.FileTokenizer=void 0;var s9=cb(),lN=sh(),Vp=T2(),gb=class extends s9.AbstractTokenizer{constructor(e,t){super(t),this.fd=e}async readBuffer(e,t){let n=this.normalizeOptions(e,t);this.position=n.position;let i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(this.position+=i.bytesRead,i.bytesRead<n.length&&(!t||!t.mayBeLess))throw new lN.EndOfStreamError;return i.bytesRead}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(!n.mayBeLess&&i.bytesRead<n.length)throw new lN.EndOfStreamError;return i.bytesRead}async close(){return Vp.close(this.fd)}};oh.FileTokenizer=gb;async function o9(r){let e=await Vp.stat(r);if(!e.isFile)throw new Error(`File not a file: ${r}`);let t=await Vp.open(r,"r");return new gb(t,{path:r,size:e.size})}oh.fromFile=o9});var fN=ot(no=>{"use strict";Ne();Le();ke();Object.defineProperty(no,"__esModule",{value:!0});no.fromStream=no.fromBuffer=no.EndOfStreamError=no.fromFile=void 0;var a9=T2(),l9=pb(),u9=uN();Object.defineProperty(no,"fromFile",{enumerable:!0,get:function(){return u9.fromFile}});var cN=pb();Object.defineProperty(no,"EndOfStreamError",{enumerable:!0,get:function(){return cN.EndOfStreamError}});Object.defineProperty(no,"fromBuffer",{enumerable:!0,get:function(){return cN.fromBuffer}});async function c9(r,e){if(e=e||{},r.path){let t=await a9.stat(r.path);e.path=r.path,e.size=t.size}return l9.fromStream(r,e)}no.fromStream=c9});var hN=ot(k2=>{Ne();Le();ke();k2.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,g=r[e+h];for(h+=d,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(g?-1:1)*s*Math.pow(2,o-n)};k2.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=a&255,g+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+g]=s&255,g+=b,s/=256,c-=8);r[t+g-b]|=v*128}});var dN=ot(ct=>{"use strict";Ne();Le();ke();Object.defineProperty(ct,"__esModule",{value:!0});ct.AnsiStringType=ct.StringType=ct.BufferType=ct.Uint8ArrayType=ct.IgnoreType=ct.Float80_LE=ct.Float80_BE=ct.Float64_LE=ct.Float64_BE=ct.Float32_LE=ct.Float32_BE=ct.Float16_LE=ct.Float16_BE=ct.INT64_BE=ct.UINT64_BE=ct.INT64_LE=ct.UINT64_LE=ct.INT32_LE=ct.INT32_BE=ct.INT24_BE=ct.INT24_LE=ct.INT16_LE=ct.INT16_BE=ct.INT8=ct.UINT32_BE=ct.UINT32_LE=ct.UINT24_BE=ct.UINT24_LE=ct.UINT16_BE=ct.UINT16_LE=ct.UINT8=void 0;var ml=hN();function xt(r){return new DataView(r.buffer,r.byteOffset)}ct.UINT8={len:1,get(r,e){return xt(r).getUint8(e)},put(r,e,t){return xt(r).setUint8(e,t),e+1}};ct.UINT16_LE={len:2,get(r,e){return xt(r).getUint16(e,!0)},put(r,e,t){return xt(r).setUint16(e,t,!0),e+2}};ct.UINT16_BE={len:2,get(r,e){return xt(r).getUint16(e)},put(r,e,t){return xt(r).setUint16(e,t),e+2}};ct.UINT24_LE={len:3,get(r,e){let t=xt(r);return t.getUint8(e)+(t.getUint16(e+1,!0)<<8)},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.UINT24_BE={len:3,get(r,e){let t=xt(r);return(t.getUint16(e)<<8)+t.getUint8(e+2)},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.UINT32_LE={len:4,get(r,e){return xt(r).getUint32(e,!0)},put(r,e,t){return xt(r).setUint32(e,t,!0),e+4}};ct.UINT32_BE={len:4,get(r,e){return xt(r).getUint32(e)},put(r,e,t){return xt(r).setUint32(e,t),e+4}};ct.INT8={len:1,get(r,e){return xt(r).getInt8(e)},put(r,e,t){return xt(r).setInt8(e,t),e+1}};ct.INT16_BE={len:2,get(r,e){return xt(r).getInt16(e)},put(r,e,t){return xt(r).setInt16(e,t),e+2}};ct.INT16_LE={len:2,get(r,e){return xt(r).getInt16(e,!0)},put(r,e,t){return xt(r).setInt16(e,t,!0),e+2}};ct.INT24_LE={len:3,get(r,e){let t=ct.UINT24_LE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.INT24_BE={len:3,get(r,e){let t=ct.UINT24_BE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.INT32_BE={len:4,get(r,e){return xt(r).getInt32(e)},put(r,e,t){return xt(r).setInt32(e,t),e+4}};ct.INT32_LE={len:4,get(r,e){return xt(r).getInt32(e,!0)},put(r,e,t){return xt(r).setInt32(e,t,!0),e+4}};ct.UINT64_LE={len:8,get(r,e){return xt(r).getBigUint64(e,!0)},put(r,e,t){return xt(r).setBigUint64(e,t,!0),e+8}};ct.INT64_LE={len:8,get(r,e){return xt(r).getBigInt64(e,!0)},put(r,e,t){return xt(r).setBigInt64(e,t,!0),e+8}};ct.UINT64_BE={len:8,get(r,e){return xt(r).getBigUint64(e)},put(r,e,t){return xt(r).setBigUint64(e,t),e+8}};ct.INT64_BE={len:8,get(r,e){return xt(r).getBigInt64(e)},put(r,e,t){return xt(r).setBigInt64(e,t),e+8}};ct.Float16_BE={len:2,get(r,e){return ml.read(r,e,!1,10,this.len)},put(r,e,t){return ml.write(r,t,e,!1,10,this.len),e+this.len}};ct.Float16_LE={len:2,get(r,e){return ml.read(r,e,!0,10,this.len)},put(r,e,t){return ml.write(r,t,e,!0,10,this.len),e+this.len}};ct.Float32_BE={len:4,get(r,e){return xt(r).getFloat32(e)},put(r,e,t){return xt(r).setFloat32(e,t),e+4}};ct.Float32_LE={len:4,get(r,e){return xt(r).getFloat32(e,!0)},put(r,e,t){return xt(r).setFloat32(e,t,!0),e+4}};ct.Float64_BE={len:8,get(r,e){return xt(r).getFloat64(e)},put(r,e,t){return xt(r).setFloat64(e,t),e+8}};ct.Float64_LE={len:8,get(r,e){return xt(r).getFloat64(e,!0)},put(r,e,t){return xt(r).setFloat64(e,t,!0),e+8}};ct.Float80_BE={len:10,get(r,e){return ml.read(r,e,!1,63,this.len)},put(r,e,t){return ml.write(r,t,e,!1,63,this.len),e+this.len}};ct.Float80_LE={len:10,get(r,e){return ml.read(r,e,!0,63,this.len)},put(r,e,t){return ml.write(r,t,e,!0,63,this.len),e+this.len}};var L2=class{constructor(e){this.len=e}get(e,t){}};ct.IgnoreType=L2;var P2=class{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}};ct.Uint8ArrayType=P2;var B2=class{constructor(e){this.len=e}get(e,t){return Buffer.from(e.subarray(t,t+this.len))}};ct.BufferType=B2;var M2=class{constructor(e,t){this.len=e,this.encoding=t}get(e,t){return Buffer.from(e).toString(this.encoding,t,t+this.len)}};ct.StringType=M2;var mb=class r{constructor(e){this.len=e}static decode(e,t,n){let i="";for(let o=t;o<n;++o)i+=r.codePointToString(r.singleByteDecoder(e[o]));return i}static inRange(e,t,n){return t<=e&&e<=n}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}static singleByteDecoder(e){if(r.inRange(e,0,127))return e;let t=r.windows1252[e-128];if(t===null)throw Error("invaliding encoding");return t}get(e,t=0){return r.decode(e,t,t+this.len)}};ct.AnsiStringType=mb;mb.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]});var pN=ot(yb=>{"use strict";Ne();Le();ke();yb.stringToBytes=r=>[...r].map(e=>e.charCodeAt(0));yb.tarHeaderChecksumMatches=(r,e=0)=>{let t=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(t))return!1;let n=256;for(let i=e;i<e+148;i++)n+=r[i];for(let i=e+156;i<e+512;i++)n+=r[i];return t===n};yb.uint32SyncSafeToken={get:(r,e)=>r[e+3]&127|r[e+2]<<7|r[e+1]<<14|r[e]<<21,len:4}});var mN=ot((eZ,gN)=>{"use strict";Ne();Le();ke();gN.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}});var yN=ot((exports,module)=>{"use strict";Ne();Le();ke();var Token=dN(),strtok3=pb(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=pN(),supported=mN(),minimumBytes=4100;async function fromStream(r){let e=await strtok3.fromStream(r);try{return await fromTokenizer(e)}finally{await e.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);let e=r instanceof Buffer?r:Buffer.from(r);if(!(e&&e.length>1))return;let t=strtok3.fromBuffer(e);return fromTokenizer(t)}function _check(r,e,t){t={offset:0,...t};for(let[n,i]of e.entries())if(t.mask){if(i!==(t.mask[n]&r[n+t.offset]))return!1}else if(i!==r[n+t.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(e){if(!(e instanceof strtok3.EndOfStreamError))throw e}}async function _fromTokenizer(r){let e=Buffer.alloc(minimumBytes),t=12,n=(o,s)=>_check(e,o,s),i=(o,s)=>n(stringToBytes(o),s);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(e,{length:t,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return await r.peekBuffer(e,{length:24,mayBeLess:!0}),i("PS-Adobe-",{offset:2})&&i(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(i("ID3")){await r.ignore(6);let o=await r.readToken(uint32SyncSafeToken);return r.position+o>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(o),fromTokenizer(r))}if(i("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((e[0]===67||e[0]===70)&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(i("FLIF"))return{ext:"flif",mime:"image/flif"};if(i("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(i("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(i("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(i("FORM"))return{ext:"aif",mime:"audio/aiff"};if(i("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(e,{length:30});let o={compressedSize:e.readUInt32LE(18),uncompressedSize:e.readUInt32LE(22),filenameLength:e.readUInt16LE(26),extraFieldLength:e.readUInt16LE(28)};if(o.filename=await r.readToken(new Token.StringType(o.filenameLength,"utf-8")),await r.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize)switch(await r.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(o.compressedSize===0){let s=-1;for(;s<0&&r.position<r.fileInfo.size;)await r.peekBuffer(e,{mayBeLess:!0}),s=e.indexOf("504B0304",0,"hex"),await r.ignore(s>=0?s:e.length)}else await r.ignore(o.compressedSize)}}catch(o){if(!(o instanceof strtok3.EndOfStreamError))throw o}return{ext:"zip",mime:"application/zip"}}if(i("OggS")){await r.ignore(28);let o=Buffer.alloc(8);return await r.readBuffer(o),_check(o,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(o,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(o,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(o,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(o,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(o,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(e[2]===3||e[2]===5||e[2]===7)&&(e[3]===4||e[3]===6||e[3]===8))return{ext:"zip",mime:"application/zip"};if(i("ftyp",{offset:4})&&(e[8]&96)!==0){let o=e.toString("binary",8,12).replace("\0"," ").trim();switch(o){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return o.startsWith("3g")?o.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(i("MThd"))return{ext:"mid",mime:"audio/midi"};if(i("wOFF")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(i("wOF2")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(i("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(i("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(i("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(i("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(i("%PDF")){await r.ignore(1350);let o=10*1024*1024,s=Buffer.alloc(Math.min(o,r.fileInfo.size));return await r.readBuffer(s,{mayBeLess:!0}),s.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return i("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(e=Buffer.alloc(24),await r.peekBuffer(e),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(i("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){async function o(){let f=await r.peekNumber(Token.UINT8),h=128,d=0;for(;(f&h)===0&&h!==0;)++d,h>>=1;let g=Buffer.alloc(d+1);return await r.readBuffer(g),g}async function s(){let f=await o(),h=await o();h[0]^=128>>h.length-1;let d=Math.min(6,h.length);return{id:f.readUIntBE(0,f.length),len:h.readUIntBE(h.length-d,d)}}async function a(f,h){for(;h>0;){let d=await s();if(d.id===17026)return r.readToken(new Token.StringType(d.len,"utf-8"));await r.ignore(d.len),--h}}let u=await s();switch(await a(1,u.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(i("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(i("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(i("MSCF")||i("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(i("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(i("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(i("IMPM"))return{ext:"it",mime:"audio/x-it"};if(i("-lh0-",{offset:2})||i("-lh1-",{offset:2})||i("-lh2-",{offset:2})||i("-lh3-",{offset:2})||i("-lh4-",{offset:2})||i("-lh5-",{offset:2})||i("-lh6-",{offset:2})||i("-lh7-",{offset:2})||i("-lzs-",{offset:2})||i("-lz4-",{offset:2})||i("-lz5-",{offset:2})||i("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(i("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(e[6]===0||e[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(i("solid "))return{ext:"stl",mime:"model/stl"};if(i("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(i("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(n([137,80,78,71,13,10,26,10])){await r.ignore(8);async function o(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{let s=await o();if(s.length<0)return;switch(s.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(s.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(i("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){async function o(){let s=Buffer.alloc(16);return await r.readBuffer(s),{id:s,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){let s=await o(),a=s.size-24;if(_check(s.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let u=Buffer.alloc(16);if(a-=await r.readBuffer(u),_check(u,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(u,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(n([255,10])||n([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(e,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),i("BEGIN:")){if(i("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(i("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(i("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(i("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(i("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&e.length>=16){let o=e.readUInt32LE(12);if(o>12&&e.length>=o+16)try{let s=e.slice(16,o+16).toString();if(JSON.parse(s).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(i("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(e,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(e))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(i("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(e.length>=2&&n([255,224],{offset:0,mask:[255,224]})){if(n([16],{offset:1,mask:[22]}))return n([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(n([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}var stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{let r=new stream.PassThrough,e;stream.pipeline?e=stream.pipeline(readableStream,r,()=>{}):e=readableStream.pipe(r);let t=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{let n=await fromBuffer(t);r.fileType=n}catch(n){reject(n)}resolve(e)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});module.exports=fileType});var wN=ot((aZ,bN)=>{"use strict";Ne();Le();ke();var f9=fN(),bb=yN();async function h9(r){let e=await f9.fromFile(r);try{return await bb.fromTokenizer(e)}finally{await e.close()}}var wb={fromFile:h9};Object.assign(wb,bb);Object.defineProperty(wb,"extensions",{get(){return bb.extensions}});Object.defineProperty(wb,"mimeTypes",{get(){return bb.mimeTypes}});bN.exports=wb});var Yp=ot(ah=>{"use strict";Ne();Le();ke();function d9(r,e,t){if(t===void 0&&(t=Array.prototype),r&&typeof t.find=="function")return t.find.call(r,e);for(var n=0;n<r.length;n++)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];if(e.call(void 0,i,n,r))return i}}function F2(r,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(r):r}function p9(r,e){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}var vN=F2({HTML:"text/html",isHTML:function(r){return r===vN.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),_N=F2({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===_N.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ah.assign=p9;ah.find=d9;ah.freeze=F2;ah.MIME_TYPE=vN;ah.NAMESPACE=_N});var X2=ot(yl=>{Ne();Le();ke();var DN=Yp(),io=DN.find,Xp=DN.NAMESPACE;function g9(r){return r!==""}function m9(r){return r?r.split(/[\t\n\f\r ]+/).filter(g9):[]}function y9(r,e){return r.hasOwnProperty(e)||(r[e]=!0),r}function EN(r){if(!r)return[];var e=m9(r);return Object.keys(e.reduce(y9,{}))}function b9(r){return function(e){return r&&r.indexOf(e)!==-1}}function Zp(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function li(r,e){var t=r.prototype;if(!(t instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,Zp(t,i),r.prototype=t=i}t.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),t.constructor=r)}var ui={},Ds=ui.ELEMENT_NODE=1,uh=ui.ATTRIBUTE_NODE=2,vb=ui.TEXT_NODE=3,IN=ui.CDATA_SECTION_NODE=4,ON=ui.ENTITY_REFERENCE_NODE=5,w9=ui.ENTITY_NODE=6,NN=ui.PROCESSING_INSTRUCTION_NODE=7,kN=ui.COMMENT_NODE=8,LN=ui.DOCUMENT_NODE=9,PN=ui.DOCUMENT_TYPE_NODE=10,ta=ui.DOCUMENT_FRAGMENT_NODE=11,v9=ui.NOTATION_NODE=12,Ln={},pn={},gZ=Ln.INDEX_SIZE_ERR=(pn[1]="Index size error",1),mZ=Ln.DOMSTRING_SIZE_ERR=(pn[2]="DOMString size error",2),ai=Ln.HIERARCHY_REQUEST_ERR=(pn[3]="Hierarchy request error",3),yZ=Ln.WRONG_DOCUMENT_ERR=(pn[4]="Wrong document",4),bZ=Ln.INVALID_CHARACTER_ERR=(pn[5]="Invalid character",5),wZ=Ln.NO_DATA_ALLOWED_ERR=(pn[6]="No data allowed",6),vZ=Ln.NO_MODIFICATION_ALLOWED_ERR=(pn[7]="No modification allowed",7),BN=Ln.NOT_FOUND_ERR=(pn[8]="Not found",8),_Z=Ln.NOT_SUPPORTED_ERR=(pn[9]="Not supported",9),AN=Ln.INUSE_ATTRIBUTE_ERR=(pn[10]="Attribute in use",10),EZ=Ln.INVALID_STATE_ERR=(pn[11]="Invalid state",11),AZ=Ln.SYNTAX_ERR=(pn[12]="Syntax error",12),xZ=Ln.INVALID_MODIFICATION_ERR=(pn[13]="Invalid modification",13),SZ=Ln.NAMESPACE_ERR=(pn[14]="Invalid namespace",14),TZ=Ln.INVALID_ACCESS_ERR=(pn[15]="Invalid access",15);function Wr(r,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,pn[r]),this.message=pn[r],Error.captureStackTrace&&Error.captureStackTrace(this,Wr);return t.code=r,e&&(this.message=this.message+": "+e),t}Wr.prototype=Error.prototype;Zp(Ln,Wr);function ea(){}ea.prototype={length:0,item:function(r){return r>=0&&r<this.length?this[r]:null},toString:function(r,e){for(var t=[],n=0;n<this.length;n++)lh(this[n],t,r,e);return t.join("")},filter:function(r){return Array.prototype.filter.call(this,r)},indexOf:function(r){return Array.prototype.indexOf.call(this,r)}};function ch(r,e){this._node=r,this._refresh=e,$2(this)}function $2(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!==e){var t=r._refresh(r._node);if(YN(r,"length",t.length),!r.$$length||t.length<r.$$length)for(var n=t.length;n in r;n++)Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];Zp(t,r),r._inc=e}}ch.prototype.item=function(r){return $2(this),this[r]||null};li(ch,ea);function _b(){}function MN(r,e){for(var t=r.length;t--;)if(r[t]===e)return t}function xN(r,e,t,n){if(n?e[MN(e,n)]=t:e[e.length++]=t,r){t.ownerElement=r;var i=r.ownerDocument;i&&(n&&jN(i,r,n),_9(i,r,t))}}function SN(r,e,t){var n=MN(e,t);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,r){var o=r.ownerDocument;o&&(jN(o,r,t),t.ownerElement=null)}}else throw new Wr(BN,new Error(r.tagName+"@"+t))}_b.prototype={length:0,item:ea.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==r)return t}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new Wr(AN);var t=this.getNamedItem(r.nodeName);return xN(this._ownerElement,this,r,t),t},setNamedItemNS:function(r){var e=r.ownerElement,t;if(e&&e!=this._ownerElement)throw new Wr(AN);return t=this.getNamedItemNS(r.namespaceURI,r.localName),xN(this._ownerElement,this,r,t),t},removeNamedItem:function(r){var e=this.getNamedItem(r);return SN(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var t=this.getNamedItemNS(r,e);return SN(this._ownerElement,this,t),t},getNamedItemNS:function(r,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function FN(){}FN.prototype={hasFeature:function(r,e){return!0},createDocument:function(r,e,t){var n=new Jp;if(n.implementation=this,n.childNodes=new ea,n.doctype=t||null,t&&n.appendChild(t),e){var i=n.createElementNS(r,e);n.appendChild(i)}return n},createDocumentType:function(r,e,t){var n=new xb;return n.name=r,n.nodeName=r,n.publicId=e||"",n.systemId=t||"",n}};function Xt(){}Xt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return Eb(this,r,e)},replaceChild:function(r,e){Eb(this,r,e,zN),e&&this.removeChild(e)},removeChild:function(r){return $N(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return j2(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==vb&&r.nodeType==vb?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===r)return n}e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function UN(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}Zp(ui,Xt);Zp(ui,Xt.prototype);function Kp(r,e){if(e(r))return!0;if(r=r.firstChild)do if(Kp(r,e))return!0;while(r=r.nextSibling)}function Jp(){this.ownerDocument=this}function _9(r,e,t){r&&r._inc++;var n=t.namespaceURI;n===Xp.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function jN(r,e,t,n){r&&r._inc++;var i=t.namespaceURI;i===Xp.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function z2(r,e,t){if(r&&r._inc){r._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var i=e.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o,delete n[n.length]}}}function $N(r,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:r.firstChild=n,n?n.previousSibling=t:r.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,z2(r.ownerDocument,r),e}function E9(r){return r&&(r.nodeType===Xt.DOCUMENT_NODE||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.ELEMENT_NODE)}function A9(r){return r&&(so(r)||W2(r)||ra(r)||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.COMMENT_NODE||r.nodeType===Xt.PROCESSING_INSTRUCTION_NODE)}function ra(r){return r&&r.nodeType===Xt.DOCUMENT_TYPE_NODE}function so(r){return r&&r.nodeType===Xt.ELEMENT_NODE}function W2(r){return r&&r.nodeType===Xt.TEXT_NODE}function TN(r,e){var t=r.childNodes||[];if(io(t,so)||ra(e))return!1;var n=io(t,ra);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function CN(r,e){var t=r.childNodes||[];function n(o){return so(o)&&o!==e}if(io(t,n))return!1;var i=io(t,ra);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function x9(r,e,t){if(!E9(r))throw new Wr(ai,"Unexpected parent node type "+r.nodeType);if(t&&t.parentNode!==r)throw new Wr(BN,"child not in parent");if(!A9(e)||ra(e)&&r.nodeType!==Xt.DOCUMENT_NODE)throw new Wr(ai,"Unexpected node type "+e.nodeType+" for parent node type "+r.nodeType)}function S9(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(so);if(o.length>1||io(i,W2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!TN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(so(e)&&!TN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(ra(e)){if(io(n,ra))throw new Wr(ai,"Only one doctype is allowed");var s=io(n,so);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element");if(!t&&s)throw new Wr(ai,"Doctype can not be appended since element is present")}}function zN(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(so);if(o.length>1||io(i,W2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!CN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(so(e)&&!CN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(ra(e)){let u=function(c){return ra(c)&&c!==t};var a=u;if(io(n,u))throw new Wr(ai,"Only one doctype is allowed");var s=io(n,so);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element")}}function Eb(r,e,t,n){x9(r,e,t),r.nodeType===Xt.DOCUMENT_NODE&&(n||S9)(r,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===ta){var o=e.firstChild;if(o==null)return e;var s=e.lastChild}else o=s=e;var a=t?t.previousSibling:r.lastChild;o.previousSibling=a,s.nextSibling=t,a?a.nextSibling=o:r.firstChild=o,t==null?r.lastChild=s:t.previousSibling=s;do o.parentNode=r;while(o!==s&&(o=o.nextSibling));return z2(r.ownerDocument||r,r),e.nodeType==ta&&(e.firstChild=e.lastChild=null),e}function T9(r,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=r,e.previousSibling=r.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:r.firstChild=e,r.lastChild=e,z2(r.ownerDocument,r,e),e}Jp.prototype={nodeName:"#document",nodeType:LN,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==ta){for(var t=r.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return r}return Eb(this,r,e),r.ownerDocument=this,this.documentElement===null&&r.nodeType===Ds&&(this.documentElement=r),r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),$N(this,r)},replaceChild:function(r,e){Eb(this,r,e,zN),r.ownerDocument=this,e&&this.removeChild(e),so(r)&&(this.documentElement=r)},importNode:function(r,e){return VN(this,r,e)},getElementById:function(r){var e=null;return Kp(this.documentElement,function(t){if(t.nodeType==Ds&&t.getAttribute("id")==r)return e=t,!0}),e},getElementsByClassName:function(r){var e=EN(r);return new ch(this,function(t){var n=[];return e.length>0&&Kp(t.documentElement,function(i){if(i!==t&&i.nodeType===Ds){var o=i.getAttribute("class");if(o){var s=r===o;if(!s){var a=EN(o);s=e.every(b9(a))}s&&n.push(i)}}}),n})},createElement:function(r){var e=new Yu;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.localName=r,e.childNodes=new ea;var t=e.attributes=new _b;return t._ownerElement=e,e},createDocumentFragment:function(){var r=new Sb;return r.ownerDocument=this,r.childNodes=new ea,r},createTextNode:function(r){var e=new q2;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new H2;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new G2;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var t=new Y2;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=r,t.nodeValue=t.data=e,t},createAttribute:function(r){var e=new Ab;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new V2;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var t=new Yu,n=e.split(":"),i=t.attributes=new _b;return t.childNodes=new ea,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=r,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(r,e){var t=new Ab,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=r,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};li(Jp,Xt);function Yu(){this._nsMap={}}Yu.prototype={nodeType:Ds,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var t=this.ownerDocument.createAttribute(r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===ta?this.insertBefore(r,null):T9(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);return t&&t.value||""},setAttributeNS:function(r,e,t){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new ch(this,function(e){var t=[];return Kp(e,function(n){n!==e&&n.nodeType==Ds&&(r==="*"||n.tagName==r)&&t.push(n)}),t})},getElementsByTagNameNS:function(r,e){return new ch(this,function(t){var n=[];return Kp(t,function(i){i!==t&&i.nodeType===Ds&&(r==="*"||i.namespaceURI===r)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Jp.prototype.getElementsByTagName=Yu.prototype.getElementsByTagName;Jp.prototype.getElementsByTagNameNS=Yu.prototype.getElementsByTagNameNS;li(Yu,Xt);function Ab(){}Ab.prototype.nodeType=uh;li(Ab,Xt);function Qp(){}Qp.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(pn[ai])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,t){var n=this.data.substring(0,r),i=this.data.substring(r+e);t=n+t+i,this.nodeValue=this.data=t,this.length=t.length}};li(Qp,Xt);function q2(){}q2.prototype={nodeName:"#text",nodeType:vb,splitText:function(r){var e=this.data,t=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};li(q2,Qp);function H2(){}H2.prototype={nodeName:"#comment",nodeType:kN};li(H2,Qp);function G2(){}G2.prototype={nodeName:"#cdata-section",nodeType:IN};li(G2,Qp);function xb(){}xb.prototype.nodeType=PN;li(xb,Xt);function WN(){}WN.prototype.nodeType=v9;li(WN,Xt);function qN(){}qN.prototype.nodeType=w9;li(qN,Xt);function V2(){}V2.prototype.nodeType=ON;li(V2,Xt);function Sb(){}Sb.prototype.nodeName="#document-fragment";Sb.prototype.nodeType=ta;li(Sb,Xt);function Y2(){}Y2.prototype.nodeType=NN;li(Y2,Xt);function HN(){}HN.prototype.serializeToString=function(r,e,t){return GN.call(r,e,t)};Xt.prototype.toString=GN;function GN(r,e){var t=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&i==null){var i=n.lookupPrefix(o);if(i==null)var s=[{namespace:o,prefix:null}]}return lh(this,t,r,e,s),t.join("")}function RN(r,e,t){var n=r.prefix||"",i=r.namespaceURI;if(!i||n==="xml"&&i===Xp.XML||i===Xp.XMLNS)return!1;for(var o=t.length;o--;){var s=t[o];if(s.prefix===n)return s.namespace!==i}return!0}function U2(r,e,t){r.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,UN),'"')}function lh(r,e,t,n,i){if(i||(i=[]),n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case Ds:var o=r.attributes,s=o.length,y=r.firstChild,a=r.tagName;t=Xp.isHTML(r.namespaceURI)||t;var u=a;if(!t&&!r.prefix&&r.namespaceURI){for(var c,f=0;f<o.length;f++)if(o.item(f).name==="xmlns"){c=o.item(f).value;break}if(!c)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.prefix===""&&d.namespace===r.namespaceURI){c=d.namespace;break}}if(c!==r.namespaceURI)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.namespace===r.namespaceURI){d.prefix&&(u=d.prefix+":"+a);break}}}e.push("<",u);for(var g=0;g<s;g++){var b=o.item(g);b.prefix=="xmlns"?i.push({prefix:b.localName,namespace:b.value}):b.nodeName=="xmlns"&&i.push({prefix:"",namespace:b.value})}for(var g=0;g<s;g++){var b=o.item(g);if(RN(b,t,i)){var v=b.prefix||"",w=b.namespaceURI;U2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}lh(b,e,t,n,i)}if(a===u&&RN(r,t,i)){var v=r.prefix||"",w=r.namespaceURI;U2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}if(y||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),t&&/^script$/i.test(a))for(;y;)y.data?e.push(y.data):lh(y,e,t,n,i.slice()),y=y.nextSibling;else for(;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;e.push("</",u,">")}else e.push("/>");return;case LN:case ta:for(var y=r.firstChild;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;return;case uh:return U2(e,r.name,r.value);case vb:return e.push(r.data.replace(/[<&>]/g,UN));case IN:return e.push("<![CDATA[",r.data,"]]>");case kN:return e.push("<!--",r.data,"-->");case PN:var _=r.publicId,E=r.systemId;if(e.push("<!DOCTYPE ",r.name),_)e.push(" PUBLIC ",_),E&&E!="."&&e.push(" ",E),e.push(">");else if(E&&E!=".")e.push(" SYSTEM ",E,">");else{var S=r.internalSubset;S&&e.push(" [",S,"]"),e.push(">")}return;case NN:return e.push("<?",r.target," ",r.data,"?>");case ON:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function VN(r,e,t){var n;switch(e.nodeType){case Ds:n=e.cloneNode(!1),n.ownerDocument=r;case ta:break;case uh:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,t)for(var i=e.firstChild;i;)n.appendChild(VN(r,i,t)),i=i.nextSibling;return n}function j2(r,e,t){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];typeof o!="object"&&o!=n[i]&&(n[i]=o)}switch(e.childNodes&&(n.childNodes=new ea),n.ownerDocument=r,n.nodeType){case Ds:var s=e.attributes,a=n.attributes=new _b,u=s.length;a._ownerElement=n;for(var c=0;c<u;c++)n.setAttributeNode(j2(r,s.item(c),!0));break;case uh:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild(j2(r,f,t)),f=f.nextSibling;return n}function YN(r,e,t){r[e]=t}try{if(Object.defineProperty){let r=function(e){switch(e.nodeType){case Ds:case ta:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(r(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};C9=r,Object.defineProperty(ch.prototype,"length",{get:function(){return $2(this),this.$$length}}),Object.defineProperty(Xt.prototype,"textContent",{get:function(){return r(this)},set:function(e){switch(this.nodeType){case Ds:case ta:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),YN=function(e,t,n){e["$$"+t]=n}}}catch{}var C9;yl.DocumentType=xb;yl.DOMException=Wr;yl.DOMImplementation=FN;yl.Element=Yu;yl.Node=Xt;yl.NodeList=ea;yl.XMLSerializer=HN});var KN=ot(eg=>{"use strict";Ne();Le();ke();var XN=Yp().freeze;eg.XML_ENTITIES=XN({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});eg.HTML_ENTITIES=XN({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});eg.entityMap=eg.HTML_ENTITIES});var ik=ot(Z2=>{Ne();Le();ke();var ig=Yp().NAMESPACE,K2=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ZN=new RegExp("[\\-\\.0-9"+K2.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),JN=new RegExp("^"+K2.source+ZN.source+"*(?::"+K2.source+ZN.source+"*)?$"),tg=0,bl=1,fh=2,rg=3,hh=4,dh=5,ng=6,Tb=7;function ph(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ph)}ph.prototype=new Error;ph.prototype.name=ph.name;function tk(){}tk.prototype={parse:function(r,e,t){var n=this.domBuilder;n.startDocument(),rk(e,e={}),R9(r,e,t,n,this.errorHandler),n.endDocument()}};function R9(r,e,t,n,i){function o(ve){if(ve>65535){ve-=65536;var z=55296+(ve>>10),O=56320+(ve&1023);return String.fromCharCode(z,O)}else return String.fromCharCode(ve)}function s(ve){var z=ve.slice(1,-1);return Object.hasOwnProperty.call(t,z)?t[z]:z.charAt(0)==="#"?o(parseInt(z.substr(1).replace("x","0x"))):(i.error("entity not found:"+ve),ve)}function a(ve){if(ve>v){var z=r.substring(v,ve).replace(/&#?\w+;/g,s);d&&u(v),n.characters(z,0,ve-v),v=ve}}function u(ve,z){for(;ve>=f&&(z=h.exec(r));)c=z.index,f=c+z[0].length,d.lineNumber++;d.columnNumber=ve-c+1}for(var c=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,g=[{currentNSMap:e}],b={},v=0;;){try{var w=r.indexOf("<",v);if(w<0){if(!r.substr(v).match(/^\s*$/)){var y=n.doc,_=y.createTextNode(r.substr(v));y.appendChild(_),n.currentElement=_}return}switch(w>v&&a(w),r.charAt(w+1)){case"/":var ae=r.indexOf(">",w+3),E=r.substring(w+2,ae).replace(/[ \t\n\r]+$/g,""),S=g.pop();ae<0?(E=r.substring(w+2).replace(/[\s<].*/,""),i.error("end tag name: "+E+" is not complete:"+S.tagName),ae=w+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),i.error("end tag name: "+E+" maybe not complete"),ae=w+1+E.length);var A=S.localNSMap,B=S.tagName==E,T=B||S.tagName&&S.tagName.toLowerCase()==E.toLowerCase();if(T){if(n.endElement(S.uri,S.localName,E),A)for(var Z in A)Object.prototype.hasOwnProperty.call(A,Z)&&n.endPrefixMapping(Z);B||i.fatalError("end tag name: "+E+" is not match the current start tagName:"+S.tagName)}else g.push(S);ae++;break;case"?":d&&u(w),ae=k9(r,w,n);break;case"!":d&&u(w),ae=N9(r,w,n,i);break;default:d&&u(w);var ie=new nk,G=g[g.length-1].currentNSMap,ae=D9(r,w,ie,G,s,i),U=ie.length;if(!ie.closed&&O9(r,ae,ie.tagName,b)&&(ie.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),d&&U){for(var V=QN(d,{}),ue=0;ue<U;ue++){var Ae=ie[ue];u(Ae.offset),Ae.locator=QN(d,{})}n.locator=V,ek(ie,n,G)&&g.push(ie),n.locator=d}else ek(ie,n,G)&&g.push(ie);ig.isHTML(ie.uri)&&!ie.closed?ae=I9(r,ae,ie.tagName,s,n):ae++}}catch(ve){if(ve instanceof ph)throw ve;i.error("element parse error: "+ve),ae=-1}ae>v?v=ae:a(Math.max(w,v)+1)}}function QN(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function D9(r,e,t,n,i,o){function s(g,b,v){t.attributeNames.hasOwnProperty(g)&&o.fatalError("Attribute "+g+" redefined"),t.addValue(g,b.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),v)}for(var a,u,c=++e,f=tg;;){var h=r.charAt(c);switch(h){case"=":if(f===bl)a=r.slice(e,c),f=rg;else if(f===fh)f=rg;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===rg||f===bl)if(f===bl&&(o.warning('attribute value must after "="'),a=r.slice(e,c)),e=c+1,c=r.indexOf(h,e),c>0)u=r.slice(e,c),s(a,u,e-1),f=dh;else throw new Error("attribute value no end '"+h+"' match");else if(f==hh)u=r.slice(e,c),s(a,u,e),o.warning('attribute "'+a+'" missed start quot('+h+")!!"),e=c+1,f=dh;else throw new Error('attribute value must after "="');break;case"/":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Tb:f=Tb,t.closed=!0;case hh:case bl:break;case fh:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),f==tg&&t.setTagName(r.slice(e,c)),c;case">":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Tb:break;case hh:case bl:u=r.slice(e,c),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case fh:f===fh&&(u=a),f==hh?(o.warning('attribute "'+u+'" missed quot(")!'),s(a,u,e)):((!ig.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case rg:throw new Error("attribute value missed!!")}return c;case"\x80":h=" ";default:if(h<=" ")switch(f){case tg:t.setTagName(r.slice(e,c)),f=ng;break;case bl:a=r.slice(e,c),f=fh;break;case hh:var u=r.slice(e,c);o.warning('attribute "'+u+'" missed quot(")!!'),s(a,u,e);case dh:f=ng;break}else switch(f){case fh:var d=t.tagName;(!ig.isHTML(n[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,e),e=c,f=bl;break;case dh:o.warning('attribute space is required"'+a+'"!!');case ng:f=bl,e=c;break;case rg:f=hh,e=c;break;case Tb:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function ek(r,e,t){for(var n=r.tagName,i=null,h=r.length;h--;){var o=r[h],s=o.qName,a=o.value,d=s.indexOf(":");if(d>0)var u=o.prefix=s.slice(0,d),c=s.slice(d+1),f=u==="xmlns"&&c;else c=s,u=null,f=s==="xmlns"&&"";o.localName=c,f!==!1&&(i==null&&(i={},rk(t,t={})),t[f]=i[f]=a,o.uri=ig.XMLNS,e.startPrefixMapping(f,a))}for(var h=r.length;h--;){o=r[h];var u=o.prefix;u&&(u==="xml"&&(o.uri=ig.XML),u!=="xmlns"&&(o.uri=t[u||""]))}var d=n.indexOf(":");d>0?(u=r.prefix=n.slice(0,d),c=r.localName=n.slice(d+1)):(u=null,c=r.localName=n);var g=r.uri=t[u||""];if(e.startElement(g,c,n,r),r.closed){if(e.endElement(g,c,n),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return r.currentNSMap=t,r.localNSMap=i,!0}function I9(r,e,t,n,i){if(/^(?:script|textarea)$/i.test(t)){var o=r.indexOf("</"+t+">",e),s=r.substring(e+1,o);if(/[&<]/.test(s))return/^script$/i.test(t)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return e+1}function O9(r,e,t,n){var i=n[t];return i==null&&(i=r.lastIndexOf("</"+t+">"),i<e&&(i=r.lastIndexOf("</"+t)),n[t]=i),i<e}function rk(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function N9(r,e,t,n){var i=r.charAt(e+2);switch(i){case"-":if(r.charAt(e+3)==="-"){var o=r.indexOf("-->",e+4);return o>e?(t.comment(r,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var o=r.indexOf("]]>",e+9);return t.startCDATA(),t.characters(r,e+9,o-e-9),t.endCDATA(),o+3}var s=L9(r,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],c=!1,f=!1;a>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],f=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var h=s[a-1];return t.startDTD(u,c,f),t.endDTD(),h.index+h[0].length}}return-1}function k9(r,e,t){var n=r.indexOf("?>",e);if(n){var i=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var o=i[0].length;return t.processingInstruction(i[1],i[2]),n+2}else return-1}return-1}function nk(){this.attributeNames={}}nk.prototype={setTagName:function(r){if(!JN.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,t){if(!JN.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:t}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function L9(r,e){var t,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(r);t=i.exec(r);)if(n.push(t),t[1])return n}Z2.XMLReader=tk;Z2.ParseError=ph});var fk=ot(Rb=>{Ne();Le();ke();var P9=Yp(),B9=X2(),sk=KN(),lk=ik(),M9=B9.DOMImplementation,ok=P9.NAMESPACE,F9=lk.ParseError,U9=lk.XMLReader;function uk(r){return r.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ck(r){this.options=r||{locator:{}}}ck.prototype.parseFromString=function(r,e){var t=this.options,n=new U9,i=t.domBuilder||new sg,o=t.errorHandler,s=t.locator,a=t.xmlns||{},u=/\/x?html?$/.test(e),c=u?sk.HTML_ENTITIES:sk.XML_ENTITIES;s&&i.setDocumentLocator(s),n.errorHandler=j9(o,i,s),n.domBuilder=t.domBuilder||i,u&&(a[""]=ok.HTML),a.xml=a.xml||ok.XML;var f=t.normalizeLineEndings||uk;return r&&typeof r=="string"?n.parse(f(r),a,c):n.errorHandler.error("invalid doc source"),i.doc};function j9(r,e,t){if(!r){if(e instanceof sg)return e;r=e}var n={},i=r instanceof Function;t=t||{};function o(s){var a=r[s];!a&&i&&(a=r.length==2?function(u){r(s,u)}:r),n[s]=a&&function(u){a("[xmldom "+s+"]	"+u+J2(t))}||function(){}}return o("warning"),o("error"),o("fatalError"),n}function sg(){this.cdata=!1}function gh(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}sg.prototype={startDocument:function(){this.doc=new M9().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,t,n){var i=this.doc,o=i.createElementNS(r,t||e),s=n.length;Cb(this,o),this.currentElement=o,this.locator&&gh(this.locator,o);for(var a=0;a<s;a++){var r=n.getURI(a),u=n.getValue(a),t=n.getQName(a),c=i.createAttributeNS(r,t);this.locator&&gh(n.getLocator(a),c),c.value=c.nodeValue=u,o.setAttributeNode(c)}},endElement:function(r,e,t){var n=this.currentElement,i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var t=this.doc.createProcessingInstruction(r,e);this.locator&&gh(this.locator,t),Cb(this,t)},ignorableWhitespace:function(r,e,t){},characters:function(r,e,t){if(r=ak.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&gh(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,t){r=ak.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&gh(this.locator,n),Cb(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(r,e,t);this.locator&&gh(this.locator,i),Cb(this,i),this.doc.doctype=i}},warning:function(r){console.warn("[xmldom warning]	"+r,J2(this.locator))},error:function(r){console.error("[xmldom error]	"+r,J2(this.locator))},fatalError:function(r){throw new F9(r,this.locator)}};function J2(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function ak(r,e,t){return typeof r=="string"?r.substr(e,t):r.length>=e+t||e?new java.lang.String(r,e,t)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){sg.prototype[r]=function(){return null}});function Cb(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}Rb.__DOMHandler=sg;Rb.normalizeLineEndings=uk;Rb.DOMParser=ck});var Ib=ot(Db=>{Ne();Le();ke();var hk=X2();Db.DOMImplementation=hk.DOMImplementation;Db.XMLSerializer=hk.XMLSerializer;Db.DOMParser=fk().DOMParser});var mk=ot((cJ,e1)=>{Ne();Le();ke();var Q2=(function(r){"use strict";var e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(z,O,oe){z[O]=oe.value},i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(z,O,oe){return Object.defineProperty(z,O,{value:oe,enumerable:!0,configurable:!0,writable:!0}),z[O]}try{c({},"")}catch{c=function(O,oe,q){return O[oe]=q}}function f(z,O,oe,q){var M=O&&O.prototype instanceof y?O:y,H=Object.create(M.prototype),j=new ue(q||[]);return n(H,"_invoke",{value:G(z,oe,j)}),H}r.wrap=f;function h(z,O,oe){try{return{type:"normal",arg:z.call(O,oe)}}catch(q){return{type:"throw",arg:q}}}var d="suspendedStart",g="suspendedYield",b="executing",v="completed",w={};function y(){}function _(){}function E(){}var S={};c(S,s,function(){return this});var A=Object.getPrototypeOf,B=A&&A(A(Ae([])));B&&B!==e&&t.call(B,s)&&(S=B);var T=E.prototype=y.prototype=Object.create(S);_.prototype=E,n(T,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,u,"GeneratorFunction");function Z(z){["next","throw","return"].forEach(function(O){c(z,O,function(oe){return this._invoke(O,oe)})})}r.isGeneratorFunction=function(z){var O=typeof z=="function"&&z.constructor;return O?O===_||(O.displayName||O.name)==="GeneratorFunction":!1},r.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,E):(z.__proto__=E,c(z,u,"GeneratorFunction")),z.prototype=Object.create(T),z},r.awrap=function(z){return{__await:z}};function ie(z,O){function oe(H,j,Q,K){var ee=h(z[H],z,j);if(ee.type==="throw")K(ee.arg);else{var P=ee.arg,I=P.value;return I&&typeof I=="object"&&t.call(I,"__await")?O.resolve(I.__await).then(function(k){oe("next",k,Q,K)},function(k){oe("throw",k,Q,K)}):O.resolve(I).then(function(k){P.value=k,Q(P)},function(k){return oe("throw",k,Q,K)})}}var q;function M(H,j){function Q(){return new O(function(K,ee){oe(H,j,K,ee)})}return q=q?q.then(Q,Q):Q()}n(this,"_invoke",{value:M})}Z(ie.prototype),c(ie.prototype,a,function(){return this}),r.AsyncIterator=ie,r.async=function(z,O,oe,q,M){M===void 0&&(M=Promise);var H=new ie(f(z,O,oe,q),M);return r.isGeneratorFunction(O)?H:H.next().then(function(j){return j.done?j.value:H.next()})};function G(z,O,oe){var q=d;return function(H,j){if(q===b)throw new Error("Generator is already running");if(q===v){if(H==="throw")throw j;return ve()}for(oe.method=H,oe.arg=j;;){var Q=oe.delegate;if(Q){var K=ae(Q,oe);if(K){if(K===w)continue;return K}}if(oe.method==="next")oe.sent=oe._sent=oe.arg;else if(oe.method==="throw"){if(q===d)throw q=v,oe.arg;oe.dispatchException(oe.arg)}else oe.method==="return"&&oe.abrupt("return",oe.arg);q=b;var ee=h(z,O,oe);if(ee.type==="normal"){if(q=oe.done?v:g,ee.arg===w)continue;return{value:ee.arg,done:oe.done}}else ee.type==="throw"&&(q=v,oe.method="throw",oe.arg=ee.arg)}}}function ae(z,O){var oe=O.method,q=z.iterator[oe];if(q===i)return O.delegate=null,oe==="throw"&&z.iterator.return&&(O.method="return",O.arg=i,ae(z,O),O.method==="throw")||oe!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+oe+"' method")),w;var M=h(q,z.iterator,O.arg);if(M.type==="throw")return O.method="throw",O.arg=M.arg,O.delegate=null,w;var H=M.arg;if(!H)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,w;if(H.done)O[z.resultName]=H.value,O.next=z.nextLoc,O.method!=="return"&&(O.method="next",O.arg=i);else return H;return O.delegate=null,w}Z(T),c(T,u,"Generator"),c(T,s,function(){return this}),c(T,"toString",function(){return"[object Generator]"});function U(z){var O={tryLoc:z[0]};1 in z&&(O.catchLoc=z[1]),2 in z&&(O.finallyLoc=z[2],O.afterLoc=z[3]),this.tryEntries.push(O)}function V(z){var O=z.completion||{};O.type="normal",delete O.arg,z.completion=O}function ue(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(U,this),this.reset(!0)}r.keys=function(z){var O=Object(z),oe=[];for(var q in O)oe.push(q);return oe.reverse(),function M(){for(;oe.length;){var H=oe.pop();if(H in O)return M.value=H,M.done=!1,M}return M.done=!0,M}};function Ae(z){if(z){var O=z[s];if(O)return O.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var oe=-1,q=function M(){for(;++oe<z.length;)if(t.call(z,oe))return M.value=z[oe],M.done=!1,M;return M.value=i,M.done=!0,M};return q.next=q}}return{next:ve}}r.values=Ae;function ve(){return{value:i,done:!0}}return ue.prototype={constructor:ue,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(V),!z)for(var O in this)O.charAt(0)==="t"&&t.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=i)},stop:function(){this.done=!0;var z=this.tryEntries[0],O=z.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var O=this;function oe(K,ee){return H.type="throw",H.arg=z,O.next=K,ee&&(O.method="next",O.arg=i),!!ee}for(var q=this.tryEntries.length-1;q>=0;--q){var M=this.tryEntries[q],H=M.completion;if(M.tryLoc==="root")return oe("end");if(M.tryLoc<=this.prev){var j=t.call(M,"catchLoc"),Q=t.call(M,"finallyLoc");if(j&&Q){if(this.prev<M.catchLoc)return oe(M.catchLoc,!0);if(this.prev<M.finallyLoc)return oe(M.finallyLoc)}else if(j){if(this.prev<M.catchLoc)return oe(M.catchLoc,!0)}else if(Q){if(this.prev<M.finallyLoc)return oe(M.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(z,O){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var q=this.tryEntries[oe];if(q.tryLoc<=this.prev&&t.call(q,"finallyLoc")&&this.prev<q.finallyLoc){var M=q;break}}M&&(z==="break"||z==="continue")&&M.tryLoc<=O&&O<=M.finallyLoc&&(M=null);var H=M?M.completion:{};return H.type=z,H.arg=O,M?(this.method="next",this.next=M.finallyLoc,w):this.complete(H)},complete:function(z,O){if(z.type==="throw")throw z.arg;return z.type==="break"||z.type==="continue"?this.next=z.arg:z.type==="return"?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):z.type==="normal"&&O&&(this.next=O),w},finish:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var oe=this.tryEntries[O];if(oe.finallyLoc===z)return this.complete(oe.completion,oe.afterLoc),V(oe),w}},catch:function(z){for(var O=this.tryEntries.length-1;O>=0;--O){var oe=this.tryEntries[O];if(oe.tryLoc===z){var q=oe.completion;if(q.type==="throw"){var M=q.arg;V(oe)}return M}}throw new Error("illegal catch attempt")},delegateYield:function(z,O,oe){return this.delegate={iterator:Ae(z),resultName:O,nextLoc:oe},this.method==="next"&&(this.arg=i),w}},r})(typeof e1=="object"?e1.exports:{});try{regeneratorRuntime=Q2}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Q2:Function("r","regeneratorRuntime = r")(Q2)}});var Ob=ot((pJ,yk)=>{"use strict";Ne();Le();ke();yk.exports=(r,e)=>`${r}-${e}-${Math.random().toString(16).slice(3,8)}`});var t1=ot((bJ,wk)=>{"use strict";Ne();Le();ke();var V9=Ob(),bk=0;wk.exports=({id:r,action:e,payload:t={}})=>{let n=r;return typeof n>"u"&&(n=V9("Job",bk),bk+=1),{id:n,action:e,payload:t}}});var Nb=ot(og=>{"use strict";Ne();Le();ke();var r1=!1;og.logging=r1;og.setLogging=r=>{r1=r};og.log=(...r)=>r1?console.log.apply(og,r):null});var Ak=ot((_k,Ek)=>{"use strict";Ne();Le();ke();var Y9=t1(),{log:kb}=Nb(),X9=Ob(),vk=0;Ek.exports=()=>{let r=X9("Scheduler",vk),e={},t={},n=[];vk+=1;let i=()=>n.length,o=()=>Object.keys(e).length,s=()=>{if(n.length!==0){let h=Object.keys(e);for(let d=0;d<h.length;d+=1)if(typeof t[h[d]]>"u"){n[0](e[h[d]]);break}}},a=(h,d)=>new Promise((g,b)=>{let v=Y9({action:h,payload:d});n.push(async w=>{n.shift(),t[w.id]=v;try{g(await w[h].apply(_k,[...d,v.id]))}catch(y){b(y)}finally{delete t[w.id],s()}}),kb(`[${r}]: Add ${v.id} to JobQueue`),kb(`[${r}]: JobQueue length=${n.length}`),s()});return{addWorker:h=>(e[h.id]=h,kb(`[${r}]: Add ${h.id}`),kb(`[${r}]: Number of workers=${o()}`),s(),h.id),addJob:async(h,...d)=>{if(o()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return a(h,d)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),n=[]},getQueueLen:i,getNumWorkers:o}}});var Sk=ot((DJ,xk)=>{"use strict";Ne();Le();ke();xk.exports=r=>{let e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof xu=="function"&&(e.type="node"),typeof r>"u"?e:e[r]}});var Ck=ot((LJ,Tk)=>{"use strict";Ne();Le();ke();var K9=Sk()("type")==="browser",Z9=K9?r=>new URL(r,window.location.href).href:r=>r;Tk.exports=r=>{let e={...r};return["corePath","workerPath","langPath"].forEach(t=>{r[t]&&(e[t]=Z9(e[t]))}),e}});var n1=ot((FJ,Rk)=>{"use strict";Ne();Le();ke();Rk.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}});var Dk=ot((zJ,J9)=>{J9.exports={name:"tesseract.js",version:"6.0.1",description:"Pure Javascript Multilingual OCR",main:"src/index.js",type:"commonjs",types:"src/index.d.ts",unpkg:"dist/tesseract.min.js",jsdelivr:"dist/tesseract.min.js",scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser:{"./src/worker/node/index.js":"./src/worker/browser/index.js"},author:"",contributors:["jeromewu"],license:"Apache-2.0",devDependencies:{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},dependencies:{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},overrides:{"@rollup/pluginutils":"^5.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js",collective:{type:"opencollective",url:"https://opencollective.com/tesseractjs"}}});var Ok=ot((WJ,Ik)=>{"use strict";Ne();Le();ke();Ik.exports={workerBlobURL:!0,logger:()=>{}}});var kk=ot((VJ,Nk)=>{"use strict";Ne();Le();ke();var Q9=Dk().version,e7=Ok();Nk.exports={...e7,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Q9}/dist/worker.min.js`}});var Pk=ot((ZJ,Lk)=>{"use strict";Ne();Le();ke();Lk.exports=({workerPath:r,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){let n=new Blob([`importScripts("${r}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(r);return t}});var Mk=ot((tQ,Bk)=>{"use strict";Ne();Le();ke();Bk.exports=r=>{r.terminate()}});var Uk=ot((sQ,Fk)=>{"use strict";Ne();Le();ke();Fk.exports=(r,e)=>{r.onmessage=({data:t})=>{e(t)}}});var $k=ot((uQ,jk)=>{"use strict";Ne();Le();ke();jk.exports=async(r,e)=>{r.postMessage(e)}});var Wk=ot((dQ,zk)=>{"use strict";Ne();Le();ke();var i1=r=>new Promise((e,t)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:i}}})=>{t(Error(`File could not be read! Code=${i}`))},n.readAsArrayBuffer(r)}),s1=async r=>{let e=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?e=atob(r.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(e=await s1(r.src)),r.tagName==="VIDEO"&&(e=await s1(r.poster)),r.tagName==="CANVAS"&&await new Promise(t=>{r.toBlob(async n=>{e=await i1(n),t()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){let t=await r.convertToBlob();e=await i1(t)}else(r instanceof File||r instanceof Blob)&&(e=await i1(r));return new Uint8Array(e)};zk.exports=s1});var Hk=ot((yQ,qk)=>{"use strict";Ne();Le();ke();var t7=kk(),r7=Pk(),n7=Mk(),i7=Uk(),s7=$k(),o7=Wk();qk.exports={defaultOptions:t7,spawnWorker:r7,terminateWorker:n7,onMessage:i7,send:s7,loadImage:o7}});var o1=ot((_Q,Xk)=>{"use strict";Ne();Le();ke();var a7=Ck(),oo=t1(),{log:Gk}=Nb(),l7=Ob(),Ku=n1(),{defaultOptions:u7,spawnWorker:c7,terminateWorker:f7,onMessage:h7,loadImage:Vk,send:d7}=Hk(),Yk=0;Xk.exports=async(r="eng",e=Ku.LSTM_ONLY,t={},n={})=>{let i=l7("Worker",Yk),{logger:o,errorHandler:s,...a}=a7({...u7,...t}),u={},c=typeof r=="string"?r.split("+"):r,f=e,h=n,d=[Ku.DEFAULT,Ku.LSTM_ONLY].includes(e)&&!a.legacyCore,g,b,v=new Promise((z,O)=>{b=z,g=O}),w=z=>{g(z.message)},y=c7(a);y.onerror=w,Yk+=1;let _=({id:z,action:O,payload:oe})=>new Promise((q,M)=>{Gk(`[${i}]: Start ${z}, action=${O}`);let H=`${O}-${z}`;u[H]={resolve:q,reject:M},d7(y,{workerId:i,jobId:z,action:O,payload:oe})}),E=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),S=z=>_(oo({id:z,action:"load",payload:{options:{lstmOnly:d,corePath:a.corePath,logging:a.logging}}})),A=(z,O,oe)=>_(oo({id:oe,action:"FS",payload:{method:"writeFile",args:[z,O]}})),B=(z,O)=>_(oo({id:O,action:"FS",payload:{method:"readFile",args:[z,{encoding:"utf8"}]}})),T=(z,O)=>_(oo({id:O,action:"FS",payload:{method:"unlink",args:[z]}})),Z=(z,O,oe)=>_(oo({id:oe,action:"FS",payload:{method:z,args:O}})),ie=(z,O)=>_(oo({id:O,action:"loadLanguage",payload:{langs:z,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Ku.DEFAULT,Ku.LSTM_ONLY].includes(f)&&!a.legacyLang}}})),G=(z,O,oe,q)=>_(oo({id:q,action:"initialize",payload:{langs:z,oem:O,config:oe}})),ae=(z="eng",O,oe,q)=>{if(d&&[Ku.TESSERACT_ONLY,Ku.TESSERACT_LSTM_COMBINED].includes(O))throw Error("Legacy model requested but code missing.");let M=O||f;f=M;let H=oe||h;h=H;let Q=(typeof z=="string"?z.split("+"):z).filter(K=>!c.includes(K));return c.push(...Q),Q.length>0?ie(Q,q).then(()=>G(z,M,H,q)):G(z,M,H,q)},U=(z={},O)=>_(oo({id:O,action:"setParameters",payload:{params:z}})),V=async(z,O={},oe={text:!0},q)=>_(oo({id:q,action:"recognize",payload:{image:await Vk(z),options:O,output:oe}})),ue=async(z,O)=>{if(d)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(oo({id:O,action:"detect",payload:{image:await Vk(z)}}))},Ae=async()=>(y!==null&&(f7(y),y=null),Promise.resolve());h7(y,({workerId:z,jobId:O,status:oe,action:q,data:M})=>{let H=`${q}-${O}`;if(oe==="resolve")Gk(`[${z}]: Complete ${O}`),u[H].resolve({jobId:O,data:M}),delete u[H];else if(oe==="reject")if(u[H].reject(M),delete u[H],q==="load"&&g(M),s)s(M);else throw Error(M);else oe==="progress"&&o({...M,userJobId:O})});let ve={id:i,worker:y,load:E,writeText:A,readText:B,removeFile:T,FS:Z,reinitialize:ae,setParameters:U,recognize:V,detect:ue,terminate:Ae};return S().then(()=>ie(r)).then(()=>G(r,e,n)).then(()=>b(ve)).catch(()=>{}),v}});var Jk=ot((SQ,Zk)=>{"use strict";Ne();Le();ke();var Kk=o1(),p7=async(r,e,t)=>{let n=await Kk(e,1,t);return n.recognize(r).finally(async()=>{await n.terminate()})},g7=async(r,e)=>{let t=await Kk("osd",0,e);return t.detect(r).finally(async()=>{await t.terminate()})};Zk.exports={recognize:p7,detect:g7}});var eL=ot((DQ,Qk)=>{"use strict";Ne();Le();ke();Qk.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}});var rL=ot((kQ,tL)=>{"use strict";Ne();Le();ke();tL.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}});var iL=ot((MQ,nL)=>{"use strict";Ne();Le();ke();mk();var m7=Ak(),y7=o1(),b7=Jk(),w7=eL(),v7=n1(),_7=rL(),{setLogging:E7}=Nb();nL.exports={languages:w7,OEM:v7,PSM:_7,createScheduler:m7,createWorker:y7,setLogging:E7,...b7}});var _L={};Uo(_L,{Deflate:()=>k7,DeflateRaw:()=>L7,Gunzip:()=>P7,Gzip:()=>B7,Inflate:()=>M7,InflateRaw:()=>F7,Unzip:()=>U7,Z_BEST_COMPRESSION:()=>j7,Z_BEST_SPEED:()=>$7,Z_BINARY:()=>z7,Z_BLOCK:()=>W7,Z_BUF_ERROR:()=>q7,Z_DATA_ERROR:()=>H7,Z_DEFAULT_CHUNK:()=>G7,Z_DEFAULT_COMPRESSION:()=>V7,Z_DEFAULT_LEVEL:()=>Y7,Z_DEFAULT_MEMLEVEL:()=>X7,Z_DEFAULT_STRATEGY:()=>K7,Z_DEFAULT_WINDOWBITS:()=>Z7,Z_DEFLATED:()=>J7,Z_ERRNO:()=>Q7,Z_FILTERED:()=>ez,Z_FINISH:()=>tz,Z_FIXED:()=>rz,Z_FULL_FLUSH:()=>nz,Z_HUFFMAN_ONLY:()=>iz,Z_MAX_CHUNK:()=>sz,Z_MAX_LEVEL:()=>oz,Z_MAX_MEMLEVEL:()=>az,Z_MAX_WINDOWBITS:()=>lz,Z_MIN_CHUNK:()=>uz,Z_MIN_LEVEL:()=>cz,Z_MIN_MEMLEVEL:()=>fz,Z_MIN_WINDOWBITS:()=>hz,Z_NEED_DICT:()=>dz,Z_NO_COMPRESSION:()=>pz,Z_NO_FLUSH:()=>gz,Z_OK:()=>mz,Z_PARTIAL_FLUSH:()=>yz,Z_RLE:()=>bz,Z_STREAM_END:()=>wz,Z_STREAM_ERROR:()=>vz,Z_SYNC_FLUSH:()=>_z,Z_TEXT:()=>Ez,Z_TREES:()=>Az,Z_UNKNOWN:()=>xz,Zlib:()=>Sz,codes:()=>Tz,createDeflate:()=>Cz,createDeflateRaw:()=>Rz,createGunzip:()=>Dz,createGzip:()=>Iz,createInflate:()=>Oz,createInflateRaw:()=>Nz,createUnzip:()=>kz,default:()=>Ze,deflate:()=>Lz,deflateRaw:()=>Pz,deflateRawSync:()=>Bz,deflateSync:()=>Mz,gunzip:()=>Fz,gunzipSync:()=>Uz,gzip:()=>jz,gzipSync:()=>$z,inflate:()=>zz,inflateRaw:()=>Wz,inflateRawSync:()=>qz,inflateSync:()=>Hz,unzip:()=>Gz,unzipSync:()=>Vz});function A7(){if(oL)return a1;oL=!0;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return a1=r,a1}function Lb(){if(aL)return Pn;aL=!0;var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function e(i,o){return Object.prototype.hasOwnProperty.call(i,o)}Pn.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var a in s)e(s,a)&&(i[a]=s[a])}}return i},Pn.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var t={arraySet:function(i,o,s,a,u){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+a),u);return}for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){var o,s,a,u,c,f;for(a=0,o=0,s=i.length;o<s;o++)a+=i[o].length;for(f=new Uint8Array(a),u=0,o=0,s=i.length;o<s;o++)c=i[o],f.set(c,u),u+=c.length;return f}},n={arraySet:function(i,o,s,a,u){for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){return[].concat.apply([],i)}};return Pn.setTyped=function(i){i?(Pn.Buf8=Uint8Array,Pn.Buf16=Uint16Array,Pn.Buf32=Int32Array,Pn.assign(Pn,t)):(Pn.Buf8=Array,Pn.Buf16=Array,Pn.Buf32=Array,Pn.assign(Pn,n))},Pn.setTyped(r),Pn}function x7(){if(lL)return Zu;lL=!0;var r=Lb(),e=4,t=0,n=1,i=2;function o(D){for(var fe=D.length;--fe>=0;)D[fe]=0}var s=0,a=1,u=2,c=3,f=258,h=29,d=256,g=d+1+h,b=30,v=19,w=2*g+1,y=15,_=16,E=7,S=256,A=16,B=17,T=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=512,V=new Array((g+2)*2);o(V);var ue=new Array(b*2);o(ue);var Ae=new Array(U);o(Ae);var ve=new Array(f-c+1);o(ve);var z=new Array(h);o(z);var O=new Array(b);o(O);function oe(D,fe,be,Se,Y){this.static_tree=D,this.extra_bits=fe,this.extra_base=be,this.elems=Se,this.max_length=Y,this.has_stree=D&&D.length}var q,M,H;function j(D,fe){this.dyn_tree=D,this.max_code=0,this.stat_desc=fe}function Q(D){return D<256?Ae[D]:Ae[256+(D>>>7)]}function K(D,fe){D.pending_buf[D.pending++]=fe&255,D.pending_buf[D.pending++]=fe>>>8&255}function ee(D,fe,be){D.bi_valid>_-be?(D.bi_buf|=fe<<D.bi_valid&65535,K(D,D.bi_buf),D.bi_buf=fe>>_-D.bi_valid,D.bi_valid+=be-_):(D.bi_buf|=fe<<D.bi_valid&65535,D.bi_valid+=be)}function P(D,fe,be){ee(D,be[fe*2],be[fe*2+1])}function I(D,fe){var be=0;do be|=D&1,D>>>=1,be<<=1;while(--fe>0);return be>>>1}function k(D){D.bi_valid===16?(K(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function ne(D,fe){var be=fe.dyn_tree,Se=fe.max_code,Y=fe.stat_desc.static_tree,me=fe.stat_desc.has_stree,$=fe.stat_desc.extra_bits,Pe=fe.stat_desc.extra_base,ze=fe.stat_desc.max_length,C,Fe,Ue,de,De,Me,tt=0;for(de=0;de<=y;de++)D.bl_count[de]=0;for(be[D.heap[D.heap_max]*2+1]=0,C=D.heap_max+1;C<w;C++)Fe=D.heap[C],de=be[be[Fe*2+1]*2+1]+1,de>ze&&(de=ze,tt++),be[Fe*2+1]=de,!(Fe>Se)&&(D.bl_count[de]++,De=0,Fe>=Pe&&(De=$[Fe-Pe]),Me=be[Fe*2],D.opt_len+=Me*(de+De),me&&(D.static_len+=Me*(Y[Fe*2+1]+De)));if(tt!==0){do{for(de=ze-1;D.bl_count[de]===0;)de--;D.bl_count[de]--,D.bl_count[de+1]+=2,D.bl_count[ze]--,tt-=2}while(tt>0);for(de=ze;de!==0;de--)for(Fe=D.bl_count[de];Fe!==0;)Ue=D.heap[--C],!(Ue>Se)&&(be[Ue*2+1]!==de&&(D.opt_len+=(de-be[Ue*2+1])*be[Ue*2],be[Ue*2+1]=de),Fe--)}}function pe(D,fe,be){var Se=new Array(y+1),Y=0,me,$;for(me=1;me<=y;me++)Se[me]=Y=Y+be[me-1]<<1;for($=0;$<=fe;$++){var Pe=D[$*2+1];Pe!==0&&(D[$*2]=I(Se[Pe]++,Pe))}}function F(){var D,fe,be,Se,Y,me=new Array(y+1);for(be=0,Se=0;Se<h-1;Se++)for(z[Se]=be,D=0;D<1<<Z[Se];D++)ve[be++]=Se;for(ve[be-1]=Se,Y=0,Se=0;Se<16;Se++)for(O[Se]=Y,D=0;D<1<<ie[Se];D++)Ae[Y++]=Se;for(Y>>=7;Se<b;Se++)for(O[Se]=Y<<7,D=0;D<1<<ie[Se]-7;D++)Ae[256+Y++]=Se;for(fe=0;fe<=y;fe++)me[fe]=0;for(D=0;D<=143;)V[D*2+1]=8,D++,me[8]++;for(;D<=255;)V[D*2+1]=9,D++,me[9]++;for(;D<=279;)V[D*2+1]=7,D++,me[7]++;for(;D<=287;)V[D*2+1]=8,D++,me[8]++;for(pe(V,g+1,me),D=0;D<b;D++)ue[D*2+1]=5,ue[D*2]=I(D,5);q=new oe(V,Z,d+1,g,y),M=new oe(ue,ie,0,b,y),H=new oe(new Array(0),G,0,v,E)}function R(D){var fe;for(fe=0;fe<g;fe++)D.dyn_ltree[fe*2]=0;for(fe=0;fe<b;fe++)D.dyn_dtree[fe*2]=0;for(fe=0;fe<v;fe++)D.bl_tree[fe*2]=0;D.dyn_ltree[S*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function te(D){D.bi_valid>8?K(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ge(D,fe,be,Se){te(D),K(D,be),K(D,~be),r.arraySet(D.pending_buf,D.window,fe,be,D.pending),D.pending+=be}function Ce(D,fe,be,Se){var Y=fe*2,me=be*2;return D[Y]<D[me]||D[Y]===D[me]&&Se[fe]<=Se[be]}function xe(D,fe,be){for(var Se=D.heap[be],Y=be<<1;Y<=D.heap_len&&(Y<D.heap_len&&Ce(fe,D.heap[Y+1],D.heap[Y],D.depth)&&Y++,!Ce(fe,Se,D.heap[Y],D.depth));)D.heap[be]=D.heap[Y],be=Y,Y<<=1;D.heap[be]=Se}function he(D,fe,be){var Se,Y,me=0,$,Pe;if(D.last_lit!==0)do Se=D.pending_buf[D.d_buf+me*2]<<8|D.pending_buf[D.d_buf+me*2+1],Y=D.pending_buf[D.l_buf+me],me++,Se===0?P(D,Y,fe):($=ve[Y],P(D,$+d+1,fe),Pe=Z[$],Pe!==0&&(Y-=z[$],ee(D,Y,Pe)),Se--,$=Q(Se),P(D,$,be),Pe=ie[$],Pe!==0&&(Se-=O[$],ee(D,Se,Pe)));while(me<D.last_lit);P(D,S,fe)}function _e(D,fe){var be=fe.dyn_tree,Se=fe.stat_desc.static_tree,Y=fe.stat_desc.has_stree,me=fe.stat_desc.elems,$,Pe,ze=-1,C;for(D.heap_len=0,D.heap_max=w,$=0;$<me;$++)be[$*2]!==0?(D.heap[++D.heap_len]=ze=$,D.depth[$]=0):be[$*2+1]=0;for(;D.heap_len<2;)C=D.heap[++D.heap_len]=ze<2?++ze:0,be[C*2]=1,D.depth[C]=0,D.opt_len--,Y&&(D.static_len-=Se[C*2+1]);for(fe.max_code=ze,$=D.heap_len>>1;$>=1;$--)xe(D,be,$);C=me;do $=D.heap[1],D.heap[1]=D.heap[D.heap_len--],xe(D,be,1),Pe=D.heap[1],D.heap[--D.heap_max]=$,D.heap[--D.heap_max]=Pe,be[C*2]=be[$*2]+be[Pe*2],D.depth[C]=(D.depth[$]>=D.depth[Pe]?D.depth[$]:D.depth[Pe])+1,be[$*2+1]=be[Pe*2+1]=C,D.heap[1]=C++,xe(D,be,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],ne(D,fe),pe(be,ze,D.bl_count)}function Oe(D,fe,be){var Se,Y=-1,me,$=fe[1],Pe=0,ze=7,C=4;for($===0&&(ze=138,C=3),fe[(be+1)*2+1]=65535,Se=0;Se<=be;Se++)me=$,$=fe[(Se+1)*2+1],!(++Pe<ze&&me===$)&&(Pe<C?D.bl_tree[me*2]+=Pe:me!==0?(me!==Y&&D.bl_tree[me*2]++,D.bl_tree[A*2]++):Pe<=10?D.bl_tree[B*2]++:D.bl_tree[T*2]++,Pe=0,Y=me,$===0?(ze=138,C=3):me===$?(ze=6,C=3):(ze=7,C=4))}function Ie(D,fe,be){var Se,Y=-1,me,$=fe[1],Pe=0,ze=7,C=4;for($===0&&(ze=138,C=3),Se=0;Se<=be;Se++)if(me=$,$=fe[(Se+1)*2+1],!(++Pe<ze&&me===$)){if(Pe<C)do P(D,me,D.bl_tree);while(--Pe!==0);else me!==0?(me!==Y&&(P(D,me,D.bl_tree),Pe--),P(D,A,D.bl_tree),ee(D,Pe-3,2)):Pe<=10?(P(D,B,D.bl_tree),ee(D,Pe-3,3)):(P(D,T,D.bl_tree),ee(D,Pe-11,7));Pe=0,Y=me,$===0?(ze=138,C=3):me===$?(ze=6,C=3):(ze=7,C=4)}}function Te(D){var fe;for(Oe(D,D.dyn_ltree,D.l_desc.max_code),Oe(D,D.dyn_dtree,D.d_desc.max_code),_e(D,D.bl_desc),fe=v-1;fe>=3&&D.bl_tree[ae[fe]*2+1]===0;fe--);return D.opt_len+=3*(fe+1)+5+5+4,fe}function We(D,fe,be,Se){var Y;for(ee(D,fe-257,5),ee(D,be-1,5),ee(D,Se-4,4),Y=0;Y<Se;Y++)ee(D,D.bl_tree[ae[Y]*2+1],3);Ie(D,D.dyn_ltree,fe-1),Ie(D,D.dyn_dtree,be-1)}function qe(D){var fe=4093624447,be;for(be=0;be<=31;be++,fe>>>=1)if(fe&1&&D.dyn_ltree[be*2]!==0)return t;if(D.dyn_ltree[18]!==0||D.dyn_ltree[20]!==0||D.dyn_ltree[26]!==0)return n;for(be=32;be<d;be++)if(D.dyn_ltree[be*2]!==0)return n;return t}var Ge=!1;function x(D){Ge||(F(),Ge=!0),D.l_desc=new j(D.dyn_ltree,q),D.d_desc=new j(D.dyn_dtree,M),D.bl_desc=new j(D.bl_tree,H),D.bi_buf=0,D.bi_valid=0,R(D)}function p(D,fe,be,Se){ee(D,(s<<1)+(Se?1:0),3),ge(D,fe,be)}function m(D){ee(D,a<<1,3),P(D,S,V),k(D)}function N(D,fe,be,Se){var Y,me,$=0;D.level>0?(D.strm.data_type===i&&(D.strm.data_type=qe(D)),_e(D,D.l_desc),_e(D,D.d_desc),$=Te(D),Y=D.opt_len+3+7>>>3,me=D.static_len+3+7>>>3,me<=Y&&(Y=me)):Y=me=be+5,be+4<=Y&&fe!==-1?p(D,fe,be,Se):D.strategy===e||me===Y?(ee(D,(a<<1)+(Se?1:0),3),he(D,V,ue)):(ee(D,(u<<1)+(Se?1:0),3),We(D,D.l_desc.max_code+1,D.d_desc.max_code+1,$+1),he(D,D.dyn_ltree,D.dyn_dtree)),R(D),Se&&te(D)}function re(D,fe,be){return D.pending_buf[D.d_buf+D.last_lit*2]=fe>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=fe&255,D.pending_buf[D.l_buf+D.last_lit]=be&255,D.last_lit++,fe===0?D.dyn_ltree[be*2]++:(D.matches++,fe--,D.dyn_ltree[(ve[be]+d+1)*2]++,D.dyn_dtree[Q(fe)*2]++),D.last_lit===D.lit_bufsize-1}return Zu._tr_init=x,Zu._tr_stored_block=p,Zu._tr_flush_block=N,Zu._tr_tally=re,Zu._tr_align=m,Zu}function wL(){if(uL)return l1;uL=!0;function r(e,t,n,i){for(var o=e&65535|0,s=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do o=o+t[i++]|0,s=s+o|0;while(--a);o%=65521,s%=65521}return o|s<<16|0}return l1=r,l1}function vL(){if(cL)return u1;cL=!0;function r(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i}var e=r();function t(n,i,o,s){var a=e,u=s+o;n^=-1;for(var c=s;c<u;c++)n=n>>>8^a[(n^i[c])&255];return n^-1}return u1=t,u1}function S7(){return fL||(fL=!0,c1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),c1}function T7(){if(hL)return Os;hL=!0;var r=Lb(),e=x7(),t=wL(),n=vL(),i=S7(),o=0,s=1,a=3,u=4,c=5,f=0,h=1,d=-2,g=-3,b=-5,v=-1,w=1,y=2,_=3,E=4,S=0,A=2,B=8,T=9,Z=15,ie=8,G=29,ae=256,U=ae+1+G,V=30,ue=19,Ae=2*U+1,ve=15,z=3,O=258,oe=O+z+1,q=32,M=42,H=69,j=73,Q=91,K=103,ee=113,P=666,I=1,k=2,ne=3,pe=4,F=3;function R(C,Fe){return C.msg=i[Fe],Fe}function te(C){return(C<<1)-(C>4?9:0)}function ge(C){for(var Fe=C.length;--Fe>=0;)C[Fe]=0}function Ce(C){var Fe=C.state,Ue=Fe.pending;Ue>C.avail_out&&(Ue=C.avail_out),Ue!==0&&(r.arraySet(C.output,Fe.pending_buf,Fe.pending_out,Ue,C.next_out),C.next_out+=Ue,Fe.pending_out+=Ue,C.total_out+=Ue,C.avail_out-=Ue,Fe.pending-=Ue,Fe.pending===0&&(Fe.pending_out=0))}function xe(C,Fe){e._tr_flush_block(C,C.block_start>=0?C.block_start:-1,C.strstart-C.block_start,Fe),C.block_start=C.strstart,Ce(C.strm)}function he(C,Fe){C.pending_buf[C.pending++]=Fe}function _e(C,Fe){C.pending_buf[C.pending++]=Fe>>>8&255,C.pending_buf[C.pending++]=Fe&255}function Oe(C,Fe,Ue,de){var De=C.avail_in;return De>de&&(De=de),De===0?0:(C.avail_in-=De,r.arraySet(Fe,C.input,C.next_in,De,Ue),C.state.wrap===1?C.adler=t(C.adler,Fe,De,Ue):C.state.wrap===2&&(C.adler=n(C.adler,Fe,De,Ue)),C.next_in+=De,C.total_in+=De,De)}function Ie(C,Fe){var Ue=C.max_chain_length,de=C.strstart,De,Me,tt=C.prev_length,ce=C.nice_match,we=C.strstart>C.w_size-oe?C.strstart-(C.w_size-oe):0,He=C.window,$e=C.w_mask,et=C.prev,dt=C.strstart+O,Rt=He[de+tt-1],Et=He[de+tt];C.prev_length>=C.good_match&&(Ue>>=2),ce>C.lookahead&&(ce=C.lookahead);do if(De=Fe,!(He[De+tt]!==Et||He[De+tt-1]!==Rt||He[De]!==He[de]||He[++De]!==He[de+1])){de+=2,De++;do;while(He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&He[++de]===He[++De]&&de<dt);if(Me=O-(dt-de),de=dt-O,Me>tt){if(C.match_start=Fe,tt=Me,Me>=ce)break;Rt=He[de+tt-1],Et=He[de+tt]}}while((Fe=et[Fe&$e])>we&&--Ue!==0);return tt<=C.lookahead?tt:C.lookahead}function Te(C){var Fe=C.w_size,Ue,de,De,Me,tt;do{if(Me=C.window_size-C.lookahead-C.strstart,C.strstart>=Fe+(Fe-oe)){r.arraySet(C.window,C.window,Fe,Fe,0),C.match_start-=Fe,C.strstart-=Fe,C.block_start-=Fe,de=C.hash_size,Ue=de;do De=C.head[--Ue],C.head[Ue]=De>=Fe?De-Fe:0;while(--de);de=Fe,Ue=de;do De=C.prev[--Ue],C.prev[Ue]=De>=Fe?De-Fe:0;while(--de);Me+=Fe}if(C.strm.avail_in===0)break;if(de=Oe(C.strm,C.window,C.strstart+C.lookahead,Me),C.lookahead+=de,C.lookahead+C.insert>=z)for(tt=C.strstart-C.insert,C.ins_h=C.window[tt],C.ins_h=(C.ins_h<<C.hash_shift^C.window[tt+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[tt+z-1])&C.hash_mask,C.prev[tt&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=tt,tt++,C.insert--,!(C.lookahead+C.insert<z)););}while(C.lookahead<oe&&C.strm.avail_in!==0)}function We(C,Fe){var Ue=65535;for(Ue>C.pending_buf_size-5&&(Ue=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Te(C),C.lookahead===0&&Fe===o)return I;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var de=C.block_start+Ue;if((C.strstart===0||C.strstart>=de)&&(C.lookahead=C.strstart-de,C.strstart=de,xe(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-oe&&(xe(C,!1),C.strm.avail_out===0))return I}return C.insert=0,Fe===u?(xe(C,!0),C.strm.avail_out===0?ne:pe):(C.strstart>C.block_start&&(xe(C,!1),C.strm.avail_out===0),I)}function qe(C,Fe){for(var Ue,de;;){if(C.lookahead<oe){if(Te(C),C.lookahead<oe&&Fe===o)return I;if(C.lookahead===0)break}if(Ue=0,C.lookahead>=z&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+z-1])&C.hash_mask,Ue=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),Ue!==0&&C.strstart-Ue<=C.w_size-oe&&(C.match_length=Ie(C,Ue)),C.match_length>=z)if(de=e._tr_tally(C,C.strstart-C.match_start,C.match_length-z),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=z){C.match_length--;do C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+z-1])&C.hash_mask,Ue=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart;while(--C.match_length!==0);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else de=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(de&&(xe(C,!1),C.strm.avail_out===0))return I}return C.insert=C.strstart<z-1?C.strstart:z-1,Fe===u?(xe(C,!0),C.strm.avail_out===0?ne:pe):C.last_lit&&(xe(C,!1),C.strm.avail_out===0)?I:k}function Ge(C,Fe){for(var Ue,de,De;;){if(C.lookahead<oe){if(Te(C),C.lookahead<oe&&Fe===o)return I;if(C.lookahead===0)break}if(Ue=0,C.lookahead>=z&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+z-1])&C.hash_mask,Ue=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=z-1,Ue!==0&&C.prev_length<C.max_lazy_match&&C.strstart-Ue<=C.w_size-oe&&(C.match_length=Ie(C,Ue),C.match_length<=5&&(C.strategy===w||C.match_length===z&&C.strstart-C.match_start>4096)&&(C.match_length=z-1)),C.prev_length>=z&&C.match_length<=C.prev_length){De=C.strstart+C.lookahead-z,de=e._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-z),C.lookahead-=C.prev_length-1,C.prev_length-=2;do++C.strstart<=De&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+z-1])&C.hash_mask,Ue=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart);while(--C.prev_length!==0);if(C.match_available=0,C.match_length=z-1,C.strstart++,de&&(xe(C,!1),C.strm.avail_out===0))return I}else if(C.match_available){if(de=e._tr_tally(C,0,C.window[C.strstart-1]),de&&xe(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return I}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(de=e._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<z-1?C.strstart:z-1,Fe===u?(xe(C,!0),C.strm.avail_out===0?ne:pe):C.last_lit&&(xe(C,!1),C.strm.avail_out===0)?I:k}function x(C,Fe){for(var Ue,de,De,Me,tt=C.window;;){if(C.lookahead<=O){if(Te(C),C.lookahead<=O&&Fe===o)return I;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=z&&C.strstart>0&&(De=C.strstart-1,de=tt[De],de===tt[++De]&&de===tt[++De]&&de===tt[++De])){Me=C.strstart+O;do;while(de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&de===tt[++De]&&De<Me);C.match_length=O-(Me-De),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=z?(Ue=e._tr_tally(C,1,C.match_length-z),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(Ue=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),Ue&&(xe(C,!1),C.strm.avail_out===0))return I}return C.insert=0,Fe===u?(xe(C,!0),C.strm.avail_out===0?ne:pe):C.last_lit&&(xe(C,!1),C.strm.avail_out===0)?I:k}function p(C,Fe){for(var Ue;;){if(C.lookahead===0&&(Te(C),C.lookahead===0)){if(Fe===o)return I;break}if(C.match_length=0,Ue=e._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,Ue&&(xe(C,!1),C.strm.avail_out===0))return I}return C.insert=0,Fe===u?(xe(C,!0),C.strm.avail_out===0?ne:pe):C.last_lit&&(xe(C,!1),C.strm.avail_out===0)?I:k}function m(C,Fe,Ue,de,De){this.good_length=C,this.max_lazy=Fe,this.nice_length=Ue,this.max_chain=de,this.func=De}var N;N=[new m(0,0,0,0,We),new m(4,4,8,4,qe),new m(4,5,16,8,qe),new m(4,6,32,32,qe),new m(4,4,16,16,Ge),new m(8,16,32,32,Ge),new m(8,16,128,128,Ge),new m(8,32,128,256,Ge),new m(32,128,258,1024,Ge),new m(32,258,258,4096,Ge)];function re(C){C.window_size=2*C.w_size,ge(C.head),C.max_lazy_match=N[C.level].max_lazy,C.good_match=N[C.level].good_length,C.nice_match=N[C.level].nice_length,C.max_chain_length=N[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=z-1,C.match_available=0,C.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(Ae*2),this.dyn_dtree=new r.Buf16((2*V+1)*2),this.bl_tree=new r.Buf16((2*ue+1)*2),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(ve+1),this.heap=new r.Buf16(2*U+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*U+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(C){var Fe;return!C||!C.state?R(C,d):(C.total_in=C.total_out=0,C.data_type=A,Fe=C.state,Fe.pending=0,Fe.pending_out=0,Fe.wrap<0&&(Fe.wrap=-Fe.wrap),Fe.status=Fe.wrap?M:ee,C.adler=Fe.wrap===2?0:1,Fe.last_flush=o,e._tr_init(Fe),f)}function be(C){var Fe=fe(C);return Fe===f&&re(C.state),Fe}function Se(C,Fe){return!C||!C.state||C.state.wrap!==2?d:(C.state.gzhead=Fe,f)}function Y(C,Fe,Ue,de,De,Me){if(!C)return d;var tt=1;if(Fe===v&&(Fe=6),de<0?(tt=0,de=-de):de>15&&(tt=2,de-=16),De<1||De>T||Ue!==B||de<8||de>15||Fe<0||Fe>9||Me<0||Me>E)return R(C,d);de===8&&(de=9);var ce=new D;return C.state=ce,ce.strm=C,ce.wrap=tt,ce.gzhead=null,ce.w_bits=de,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=De+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+z-1)/z),ce.window=new r.Buf8(ce.w_size*2),ce.head=new r.Buf16(ce.hash_size),ce.prev=new r.Buf16(ce.w_size),ce.lit_bufsize=1<<De+6,ce.pending_buf_size=ce.lit_bufsize*4,ce.pending_buf=new r.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=Fe,ce.strategy=Me,ce.method=Ue,be(C)}function me(C,Fe){return Y(C,Fe,B,Z,ie,S)}function $(C,Fe){var Ue,de,De,Me;if(!C||!C.state||Fe>c||Fe<0)return C?R(C,d):d;if(de=C.state,!C.output||!C.input&&C.avail_in!==0||de.status===P&&Fe!==u)return R(C,C.avail_out===0?b:d);if(de.strm=C,Ue=de.last_flush,de.last_flush=Fe,de.status===M)if(de.wrap===2)C.adler=0,he(de,31),he(de,139),he(de,8),de.gzhead?(he(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),he(de,de.gzhead.time&255),he(de,de.gzhead.time>>8&255),he(de,de.gzhead.time>>16&255),he(de,de.gzhead.time>>24&255),he(de,de.level===9?2:de.strategy>=y||de.level<2?4:0),he(de,de.gzhead.os&255),de.gzhead.extra&&de.gzhead.extra.length&&(he(de,de.gzhead.extra.length&255),he(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(C.adler=n(C.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=H):(he(de,0),he(de,0),he(de,0),he(de,0),he(de,0),he(de,de.level===9?2:de.strategy>=y||de.level<2?4:0),he(de,F),de.status=ee);else{var tt=B+(de.w_bits-8<<4)<<8,ce=-1;de.strategy>=y||de.level<2?ce=0:de.level<6?ce=1:de.level===6?ce=2:ce=3,tt|=ce<<6,de.strstart!==0&&(tt|=q),tt+=31-tt%31,de.status=ee,_e(de,tt),de.strstart!==0&&(_e(de,C.adler>>>16),_e(de,C.adler&65535)),C.adler=1}if(de.status===H)if(de.gzhead.extra){for(De=de.pending;de.gzindex<(de.gzhead.extra.length&65535)&&!(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),Ce(C),De=de.pending,de.pending===de.pending_buf_size));)he(de,de.gzhead.extra[de.gzindex]&255),de.gzindex++;de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=j)}else de.status=j;if(de.status===j)if(de.gzhead.name){De=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),Ce(C),De=de.pending,de.pending===de.pending_buf_size)){Me=1;break}de.gzindex<de.gzhead.name.length?Me=de.gzhead.name.charCodeAt(de.gzindex++)&255:Me=0,he(de,Me)}while(Me!==0);de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),Me===0&&(de.gzindex=0,de.status=Q)}else de.status=Q;if(de.status===Q)if(de.gzhead.comment){De=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),Ce(C),De=de.pending,de.pending===de.pending_buf_size)){Me=1;break}de.gzindex<de.gzhead.comment.length?Me=de.gzhead.comment.charCodeAt(de.gzindex++)&255:Me=0,he(de,Me)}while(Me!==0);de.gzhead.hcrc&&de.pending>De&&(C.adler=n(C.adler,de.pending_buf,de.pending-De,De)),Me===0&&(de.status=K)}else de.status=K;if(de.status===K&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&Ce(C),de.pending+2<=de.pending_buf_size&&(he(de,C.adler&255),he(de,C.adler>>8&255),C.adler=0,de.status=ee)):de.status=ee),de.pending!==0){if(Ce(C),C.avail_out===0)return de.last_flush=-1,f}else if(C.avail_in===0&&te(Fe)<=te(Ue)&&Fe!==u)return R(C,b);if(de.status===P&&C.avail_in!==0)return R(C,b);if(C.avail_in!==0||de.lookahead!==0||Fe!==o&&de.status!==P){var we=de.strategy===y?p(de,Fe):de.strategy===_?x(de,Fe):N[de.level].func(de,Fe);if((we===ne||we===pe)&&(de.status=P),we===I||we===ne)return C.avail_out===0&&(de.last_flush=-1),f;if(we===k&&(Fe===s?e._tr_align(de):Fe!==c&&(e._tr_stored_block(de,0,0,!1),Fe===a&&(ge(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),Ce(C),C.avail_out===0))return de.last_flush=-1,f}return Fe!==u?f:de.wrap<=0?h:(de.wrap===2?(he(de,C.adler&255),he(de,C.adler>>8&255),he(de,C.adler>>16&255),he(de,C.adler>>24&255),he(de,C.total_in&255),he(de,C.total_in>>8&255),he(de,C.total_in>>16&255),he(de,C.total_in>>24&255)):(_e(de,C.adler>>>16),_e(de,C.adler&65535)),Ce(C),de.wrap>0&&(de.wrap=-de.wrap),de.pending!==0?f:h)}function Pe(C){var Fe;return!C||!C.state?d:(Fe=C.state.status,Fe!==M&&Fe!==H&&Fe!==j&&Fe!==Q&&Fe!==K&&Fe!==ee&&Fe!==P?R(C,d):(C.state=null,Fe===ee?R(C,g):f))}function ze(C,Fe){var Ue=Fe.length,de,De,Me,tt,ce,we,He,$e;if(!C||!C.state||(de=C.state,tt=de.wrap,tt===2||tt===1&&de.status!==M||de.lookahead))return d;for(tt===1&&(C.adler=t(C.adler,Fe,Ue,0)),de.wrap=0,Ue>=de.w_size&&(tt===0&&(ge(de.head),de.strstart=0,de.block_start=0,de.insert=0),$e=new r.Buf8(de.w_size),r.arraySet($e,Fe,Ue-de.w_size,de.w_size,0),Fe=$e,Ue=de.w_size),ce=C.avail_in,we=C.next_in,He=C.input,C.avail_in=Ue,C.next_in=0,C.input=Fe,Te(de);de.lookahead>=z;){De=de.strstart,Me=de.lookahead-(z-1);do de.ins_h=(de.ins_h<<de.hash_shift^de.window[De+z-1])&de.hash_mask,de.prev[De&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=De,De++;while(--Me);de.strstart=De,de.lookahead=z-1,Te(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=z-1,de.match_available=0,C.next_in=we,C.input=He,C.avail_in=ce,de.wrap=tt,f}return Os.deflateInit=me,Os.deflateInit2=Y,Os.deflateReset=be,Os.deflateResetKeep=fe,Os.deflateSetHeader=Se,Os.deflate=$,Os.deflateEnd=Pe,Os.deflateSetDictionary=ze,Os.deflateInfo="pako deflate (from Nodeca project)",Os}function C7(){if(dL)return f1;dL=!0;var r=30,e=12;return f1=function(n,i){var o,s,a,u,c,f,h,d,g,b,v,w,y,_,E,S,A,B,T,Z,ie,G,ae,U,V;o=n.state,s=n.next_in,U=n.input,a=s+(n.avail_in-5),u=n.next_out,V=n.output,c=u-(i-n.avail_out),f=u+(n.avail_out-257),h=o.dmax,d=o.wsize,g=o.whave,b=o.wnext,v=o.window,w=o.hold,y=o.bits,_=o.lencode,E=o.distcode,S=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{y<15&&(w+=U[s++]<<y,y+=8,w+=U[s++]<<y,y+=8),B=_[w&S];t:for(;;){if(T=B>>>24,w>>>=T,y-=T,T=B>>>16&255,T===0)V[u++]=B&65535;else if(T&16){Z=B&65535,T&=15,T&&(y<T&&(w+=U[s++]<<y,y+=8),Z+=w&(1<<T)-1,w>>>=T,y-=T),y<15&&(w+=U[s++]<<y,y+=8,w+=U[s++]<<y,y+=8),B=E[w&A];r:for(;;){if(T=B>>>24,w>>>=T,y-=T,T=B>>>16&255,T&16){if(ie=B&65535,T&=15,y<T&&(w+=U[s++]<<y,y+=8,y<T&&(w+=U[s++]<<y,y+=8)),ie+=w&(1<<T)-1,ie>h){n.msg="invalid distance too far back",o.mode=r;break e}if(w>>>=T,y-=T,T=u-c,ie>T){if(T=ie-T,T>g&&o.sane){n.msg="invalid distance too far back",o.mode=r;break e}if(G=0,ae=v,b===0){if(G+=d-T,T<Z){Z-=T;do V[u++]=v[G++];while(--T);G=u-ie,ae=V}}else if(b<T){if(G+=d+b-T,T-=b,T<Z){Z-=T;do V[u++]=v[G++];while(--T);if(G=0,b<Z){T=b,Z-=T;do V[u++]=v[G++];while(--T);G=u-ie,ae=V}}}else if(G+=b-T,T<Z){Z-=T;do V[u++]=v[G++];while(--T);G=u-ie,ae=V}for(;Z>2;)V[u++]=ae[G++],V[u++]=ae[G++],V[u++]=ae[G++],Z-=3;Z&&(V[u++]=ae[G++],Z>1&&(V[u++]=ae[G++]))}else{G=u-ie;do V[u++]=V[G++],V[u++]=V[G++],V[u++]=V[G++],Z-=3;while(Z>2);Z&&(V[u++]=V[G++],Z>1&&(V[u++]=V[G++]))}}else if((T&64)===0){B=E[(B&65535)+(w&(1<<T)-1)];continue r}else{n.msg="invalid distance code",o.mode=r;break e}break}}else if((T&64)===0){B=_[(B&65535)+(w&(1<<T)-1)];continue t}else if(T&32){o.mode=e;break e}else{n.msg="invalid literal/length code",o.mode=r;break e}break}}while(s<a&&u<f);Z=y>>3,s-=Z,y-=Z<<3,w&=(1<<y)-1,n.next_in=s,n.next_out=u,n.avail_in=s<a?5+(a-s):5-(s-a),n.avail_out=u<f?257+(f-u):257-(u-f),o.hold=w,o.bits=y},f1}function R7(){if(pL)return h1;pL=!0;var r=Lb(),e=15,t=852,n=592,i=0,o=1,s=2,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return h1=function(d,g,b,v,w,y,_,E){var S=E.bits,A=0,B=0,T=0,Z=0,ie=0,G=0,ae=0,U=0,V=0,ue=0,Ae,ve,z,O,oe,q=null,M=0,H,j=new r.Buf16(e+1),Q=new r.Buf16(e+1),K=null,ee=0,P,I,k;for(A=0;A<=e;A++)j[A]=0;for(B=0;B<v;B++)j[g[b+B]]++;for(ie=S,Z=e;Z>=1&&j[Z]===0;Z--);if(ie>Z&&(ie=Z),Z===0)return w[y++]=1<<24|64<<16|0,w[y++]=1<<24|64<<16|0,E.bits=1,0;for(T=1;T<Z&&j[T]===0;T++);for(ie<T&&(ie=T),U=1,A=1;A<=e;A++)if(U<<=1,U-=j[A],U<0)return-1;if(U>0&&(d===i||Z!==1))return-1;for(Q[1]=0,A=1;A<e;A++)Q[A+1]=Q[A]+j[A];for(B=0;B<v;B++)g[b+B]!==0&&(_[Q[g[b+B]]++]=B);if(d===i?(q=K=_,H=19):d===o?(q=a,M-=257,K=u,ee-=257,H=256):(q=c,K=f,H=-1),ue=0,B=0,A=T,oe=y,G=ie,ae=0,z=-1,V=1<<ie,O=V-1,d===o&&V>t||d===s&&V>n)return 1;for(;;){P=A-ae,_[B]<H?(I=0,k=_[B]):_[B]>H?(I=K[ee+_[B]],k=q[M+_[B]]):(I=96,k=0),Ae=1<<A-ae,ve=1<<G,T=ve;do ve-=Ae,w[oe+(ue>>ae)+ve]=P<<24|I<<16|k|0;while(ve!==0);for(Ae=1<<A-1;ue&Ae;)Ae>>=1;if(Ae!==0?(ue&=Ae-1,ue+=Ae):ue=0,B++,--j[A]===0){if(A===Z)break;A=g[b+_[B]]}if(A>ie&&(ue&O)!==z){for(ae===0&&(ae=ie),oe+=T,G=A-ae,U=1<<G;G+ae<Z&&(U-=j[G+ae],!(U<=0));)G++,U<<=1;if(V+=1<<G,d===o&&V>t||d===s&&V>n)return 1;z=ue&O,w[z]=ie<<24|G<<16|oe-y|0}}return ue!==0&&(w[oe+ue]=A-ae<<24|64<<16|0),E.bits=ie,0},h1}function D7(){if(gL)return is;gL=!0;var r=Lb(),e=wL(),t=vL(),n=C7(),i=R7(),o=0,s=1,a=2,u=4,c=5,f=6,h=0,d=1,g=2,b=-2,v=-3,w=-4,y=-5,_=8,E=1,S=2,A=3,B=4,T=5,Z=6,ie=7,G=8,ae=9,U=10,V=11,ue=12,Ae=13,ve=14,z=15,O=16,oe=17,q=18,M=19,H=20,j=21,Q=22,K=23,ee=24,P=25,I=26,k=27,ne=28,pe=29,F=30,R=31,te=32,ge=852,Ce=592,xe=15,he=xe;function _e(Y){return(Y>>>24&255)+(Y>>>8&65280)+((Y&65280)<<8)+((Y&255)<<24)}function Oe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ie(Y){var me;return!Y||!Y.state?b:(me=Y.state,Y.total_in=Y.total_out=me.total=0,Y.msg="",me.wrap&&(Y.adler=me.wrap&1),me.mode=E,me.last=0,me.havedict=0,me.dmax=32768,me.head=null,me.hold=0,me.bits=0,me.lencode=me.lendyn=new r.Buf32(ge),me.distcode=me.distdyn=new r.Buf32(Ce),me.sane=1,me.back=-1,h)}function Te(Y){var me;return!Y||!Y.state?b:(me=Y.state,me.wsize=0,me.whave=0,me.wnext=0,Ie(Y))}function We(Y,me){var $,Pe;return!Y||!Y.state||(Pe=Y.state,me<0?($=0,me=-me):($=(me>>4)+1,me<48&&(me&=15)),me&&(me<8||me>15))?b:(Pe.window!==null&&Pe.wbits!==me&&(Pe.window=null),Pe.wrap=$,Pe.wbits=me,Te(Y))}function qe(Y,me){var $,Pe;return Y?(Pe=new Oe,Y.state=Pe,Pe.window=null,$=We(Y,me),$!==h&&(Y.state=null),$):b}function Ge(Y){return qe(Y,he)}var x=!0,p,m;function N(Y){if(x){var me;for(p=new r.Buf32(512),m=new r.Buf32(32),me=0;me<144;)Y.lens[me++]=8;for(;me<256;)Y.lens[me++]=9;for(;me<280;)Y.lens[me++]=7;for(;me<288;)Y.lens[me++]=8;for(i(s,Y.lens,0,288,p,0,Y.work,{bits:9}),me=0;me<32;)Y.lens[me++]=5;i(a,Y.lens,0,32,m,0,Y.work,{bits:5}),x=!1}Y.lencode=p,Y.lenbits=9,Y.distcode=m,Y.distbits=5}function re(Y,me,$,Pe){var ze,C=Y.state;return C.window===null&&(C.wsize=1<<C.wbits,C.wnext=0,C.whave=0,C.window=new r.Buf8(C.wsize)),Pe>=C.wsize?(r.arraySet(C.window,me,$-C.wsize,C.wsize,0),C.wnext=0,C.whave=C.wsize):(ze=C.wsize-C.wnext,ze>Pe&&(ze=Pe),r.arraySet(C.window,me,$-Pe,ze,C.wnext),Pe-=ze,Pe?(r.arraySet(C.window,me,$-Pe,Pe,0),C.wnext=Pe,C.whave=C.wsize):(C.wnext+=ze,C.wnext===C.wsize&&(C.wnext=0),C.whave<C.wsize&&(C.whave+=ze))),0}function D(Y,me){var $,Pe,ze,C,Fe,Ue,de,De,Me,tt,ce,we,He,$e,et=0,dt,Rt,Et,ar,_i,qn,Ht,Dr,yr=new r.Buf8(4),Wt,Yt,Zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return b;$=Y.state,$.mode===ue&&($.mode=Ae),Fe=Y.next_out,ze=Y.output,de=Y.avail_out,C=Y.next_in,Pe=Y.input,Ue=Y.avail_in,De=$.hold,Me=$.bits,tt=Ue,ce=de,Dr=h;e:for(;;)switch($.mode){case E:if($.wrap===0){$.mode=Ae;break}for(;Me<16;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if($.wrap&2&&De===35615){$.check=0,yr[0]=De&255,yr[1]=De>>>8&255,$.check=t($.check,yr,2,0),De=0,Me=0,$.mode=S;break}if($.flags=0,$.head&&($.head.done=!1),!($.wrap&1)||(((De&255)<<8)+(De>>8))%31){Y.msg="incorrect header check",$.mode=F;break}if((De&15)!==_){Y.msg="unknown compression method",$.mode=F;break}if(De>>>=4,Me-=4,Ht=(De&15)+8,$.wbits===0)$.wbits=Ht;else if(Ht>$.wbits){Y.msg="invalid window size",$.mode=F;break}$.dmax=1<<Ht,Y.adler=$.check=1,$.mode=De&512?U:ue,De=0,Me=0;break;case S:for(;Me<16;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if($.flags=De,($.flags&255)!==_){Y.msg="unknown compression method",$.mode=F;break}if($.flags&57344){Y.msg="unknown header flags set",$.mode=F;break}$.head&&($.head.text=De>>8&1),$.flags&512&&(yr[0]=De&255,yr[1]=De>>>8&255,$.check=t($.check,yr,2,0)),De=0,Me=0,$.mode=A;case A:for(;Me<32;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.head&&($.head.time=De),$.flags&512&&(yr[0]=De&255,yr[1]=De>>>8&255,yr[2]=De>>>16&255,yr[3]=De>>>24&255,$.check=t($.check,yr,4,0)),De=0,Me=0,$.mode=B;case B:for(;Me<16;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.head&&($.head.xflags=De&255,$.head.os=De>>8),$.flags&512&&(yr[0]=De&255,yr[1]=De>>>8&255,$.check=t($.check,yr,2,0)),De=0,Me=0,$.mode=T;case T:if($.flags&1024){for(;Me<16;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.length=De,$.head&&($.head.extra_len=De),$.flags&512&&(yr[0]=De&255,yr[1]=De>>>8&255,$.check=t($.check,yr,2,0)),De=0,Me=0}else $.head&&($.head.extra=null);$.mode=Z;case Z:if($.flags&1024&&(we=$.length,we>Ue&&(we=Ue),we&&($.head&&(Ht=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),r.arraySet($.head.extra,Pe,C,we,Ht)),$.flags&512&&($.check=t($.check,Pe,we,C)),Ue-=we,C+=we,$.length-=we),$.length))break e;$.length=0,$.mode=ie;case ie:if($.flags&2048){if(Ue===0)break e;we=0;do Ht=Pe[C+we++],$.head&&Ht&&$.length<65536&&($.head.name+=String.fromCharCode(Ht));while(Ht&&we<Ue);if($.flags&512&&($.check=t($.check,Pe,we,C)),Ue-=we,C+=we,Ht)break e}else $.head&&($.head.name=null);$.length=0,$.mode=G;case G:if($.flags&4096){if(Ue===0)break e;we=0;do Ht=Pe[C+we++],$.head&&Ht&&$.length<65536&&($.head.comment+=String.fromCharCode(Ht));while(Ht&&we<Ue);if($.flags&512&&($.check=t($.check,Pe,we,C)),Ue-=we,C+=we,Ht)break e}else $.head&&($.head.comment=null);$.mode=ae;case ae:if($.flags&512){for(;Me<16;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if(De!==($.check&65535)){Y.msg="header crc mismatch",$.mode=F;break}De=0,Me=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),Y.adler=$.check=0,$.mode=ue;break;case U:for(;Me<32;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}Y.adler=$.check=_e(De),De=0,Me=0,$.mode=V;case V:if($.havedict===0)return Y.next_out=Fe,Y.avail_out=de,Y.next_in=C,Y.avail_in=Ue,$.hold=De,$.bits=Me,g;Y.adler=$.check=1,$.mode=ue;case ue:if(me===c||me===f)break e;case Ae:if($.last){De>>>=Me&7,Me-=Me&7,$.mode=k;break}for(;Me<3;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}switch($.last=De&1,De>>>=1,Me-=1,De&3){case 0:$.mode=ve;break;case 1:if(N($),$.mode=H,me===f){De>>>=2,Me-=2;break e}break;case 2:$.mode=oe;break;case 3:Y.msg="invalid block type",$.mode=F}De>>>=2,Me-=2;break;case ve:for(De>>>=Me&7,Me-=Me&7;Me<32;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if((De&65535)!==(De>>>16^65535)){Y.msg="invalid stored block lengths",$.mode=F;break}if($.length=De&65535,De=0,Me=0,$.mode=z,me===f)break e;case z:$.mode=O;case O:if(we=$.length,we){if(we>Ue&&(we=Ue),we>de&&(we=de),we===0)break e;r.arraySet(ze,Pe,C,we,Fe),Ue-=we,C+=we,de-=we,Fe+=we,$.length-=we;break}$.mode=ue;break;case oe:for(;Me<14;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if($.nlen=(De&31)+257,De>>>=5,Me-=5,$.ndist=(De&31)+1,De>>>=5,Me-=5,$.ncode=(De&15)+4,De>>>=4,Me-=4,$.nlen>286||$.ndist>30){Y.msg="too many length or distance symbols",$.mode=F;break}$.have=0,$.mode=q;case q:for(;$.have<$.ncode;){for(;Me<3;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.lens[Zr[$.have++]]=De&7,De>>>=3,Me-=3}for(;$.have<19;)$.lens[Zr[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,Wt={bits:$.lenbits},Dr=i(o,$.lens,0,19,$.lencode,0,$.work,Wt),$.lenbits=Wt.bits,Dr){Y.msg="invalid code lengths set",$.mode=F;break}$.have=0,$.mode=M;case M:for(;$.have<$.nlen+$.ndist;){for(;et=$.lencode[De&(1<<$.lenbits)-1],dt=et>>>24,Rt=et>>>16&255,Et=et&65535,!(dt<=Me);){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if(Et<16)De>>>=dt,Me-=dt,$.lens[$.have++]=Et;else{if(Et===16){for(Yt=dt+2;Me<Yt;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if(De>>>=dt,Me-=dt,$.have===0){Y.msg="invalid bit length repeat",$.mode=F;break}Ht=$.lens[$.have-1],we=3+(De&3),De>>>=2,Me-=2}else if(Et===17){for(Yt=dt+3;Me<Yt;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}De>>>=dt,Me-=dt,Ht=0,we=3+(De&7),De>>>=3,Me-=3}else{for(Yt=dt+7;Me<Yt;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}De>>>=dt,Me-=dt,Ht=0,we=11+(De&127),De>>>=7,Me-=7}if($.have+we>$.nlen+$.ndist){Y.msg="invalid bit length repeat",$.mode=F;break}for(;we--;)$.lens[$.have++]=Ht}}if($.mode===F)break;if($.lens[256]===0){Y.msg="invalid code -- missing end-of-block",$.mode=F;break}if($.lenbits=9,Wt={bits:$.lenbits},Dr=i(s,$.lens,0,$.nlen,$.lencode,0,$.work,Wt),$.lenbits=Wt.bits,Dr){Y.msg="invalid literal/lengths set",$.mode=F;break}if($.distbits=6,$.distcode=$.distdyn,Wt={bits:$.distbits},Dr=i(a,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,Wt),$.distbits=Wt.bits,Dr){Y.msg="invalid distances set",$.mode=F;break}if($.mode=H,me===f)break e;case H:$.mode=j;case j:if(Ue>=6&&de>=258){Y.next_out=Fe,Y.avail_out=de,Y.next_in=C,Y.avail_in=Ue,$.hold=De,$.bits=Me,n(Y,ce),Fe=Y.next_out,ze=Y.output,de=Y.avail_out,C=Y.next_in,Pe=Y.input,Ue=Y.avail_in,De=$.hold,Me=$.bits,$.mode===ue&&($.back=-1);break}for($.back=0;et=$.lencode[De&(1<<$.lenbits)-1],dt=et>>>24,Rt=et>>>16&255,Et=et&65535,!(dt<=Me);){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if(Rt&&(Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;et=$.lencode[qn+((De&(1<<ar+_i)-1)>>ar)],dt=et>>>24,Rt=et>>>16&255,Et=et&65535,!(ar+dt<=Me);){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}De>>>=ar,Me-=ar,$.back+=ar}if(De>>>=dt,Me-=dt,$.back+=dt,$.length=Et,Rt===0){$.mode=I;break}if(Rt&32){$.back=-1,$.mode=ue;break}if(Rt&64){Y.msg="invalid literal/length code",$.mode=F;break}$.extra=Rt&15,$.mode=Q;case Q:if($.extra){for(Yt=$.extra;Me<Yt;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.length+=De&(1<<$.extra)-1,De>>>=$.extra,Me-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=K;case K:for(;et=$.distcode[De&(1<<$.distbits)-1],dt=et>>>24,Rt=et>>>16&255,Et=et&65535,!(dt<=Me);){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if((Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;et=$.distcode[qn+((De&(1<<ar+_i)-1)>>ar)],dt=et>>>24,Rt=et>>>16&255,Et=et&65535,!(ar+dt<=Me);){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}De>>>=ar,Me-=ar,$.back+=ar}if(De>>>=dt,Me-=dt,$.back+=dt,Rt&64){Y.msg="invalid distance code",$.mode=F;break}$.offset=Et,$.extra=Rt&15,$.mode=ee;case ee:if($.extra){for(Yt=$.extra;Me<Yt;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}$.offset+=De&(1<<$.extra)-1,De>>>=$.extra,Me-=$.extra,$.back+=$.extra}if($.offset>$.dmax){Y.msg="invalid distance too far back",$.mode=F;break}$.mode=P;case P:if(de===0)break e;if(we=ce-de,$.offset>we){if(we=$.offset-we,we>$.whave&&$.sane){Y.msg="invalid distance too far back",$.mode=F;break}we>$.wnext?(we-=$.wnext,He=$.wsize-we):He=$.wnext-we,we>$.length&&(we=$.length),$e=$.window}else $e=ze,He=Fe-$.offset,we=$.length;we>de&&(we=de),de-=we,$.length-=we;do ze[Fe++]=$e[He++];while(--we);$.length===0&&($.mode=j);break;case I:if(de===0)break e;ze[Fe++]=$.length,de--,$.mode=j;break;case k:if($.wrap){for(;Me<32;){if(Ue===0)break e;Ue--,De|=Pe[C++]<<Me,Me+=8}if(ce-=de,Y.total_out+=ce,$.total+=ce,ce&&(Y.adler=$.check=$.flags?t($.check,ze,ce,Fe-ce):e($.check,ze,ce,Fe-ce)),ce=de,($.flags?De:_e(De))!==$.check){Y.msg="incorrect data check",$.mode=F;break}De=0,Me=0}$.mode=ne;case ne:if($.wrap&&$.flags){for(;Me<32;){if(Ue===0)break e;Ue--,De+=Pe[C++]<<Me,Me+=8}if(De!==($.total&4294967295)){Y.msg="incorrect length check",$.mode=F;break}De=0,Me=0}$.mode=pe;case pe:Dr=d;break e;case F:Dr=v;break e;case R:return w;case te:default:return b}return Y.next_out=Fe,Y.avail_out=de,Y.next_in=C,Y.avail_in=Ue,$.hold=De,$.bits=Me,($.wsize||ce!==Y.avail_out&&$.mode<F&&($.mode<k||me!==u))&&re(Y,Y.output,Y.next_out,ce-Y.avail_out),tt-=Y.avail_in,ce-=Y.avail_out,Y.total_in+=tt,Y.total_out+=ce,$.total+=ce,$.wrap&&ce&&(Y.adler=$.check=$.flags?t($.check,ze,ce,Y.next_out-ce):e($.check,ze,ce,Y.next_out-ce)),Y.data_type=$.bits+($.last?64:0)+($.mode===ue?128:0)+($.mode===H||$.mode===z?256:0),(tt===0&&ce===0||me===u)&&Dr===h&&(Dr=y),Dr}function fe(Y){if(!Y||!Y.state)return b;var me=Y.state;return me.window&&(me.window=null),Y.state=null,h}function be(Y,me){var $;return!Y||!Y.state||($=Y.state,($.wrap&2)===0)?b:($.head=me,me.done=!1,h)}function Se(Y,me){var $=me.length,Pe,ze,C;return!Y||!Y.state||(Pe=Y.state,Pe.wrap!==0&&Pe.mode!==V)?b:Pe.mode===V&&(ze=1,ze=e(ze,me,$,0),ze!==Pe.check)?v:(C=re(Y,me,$,$),C?(Pe.mode=R,w):(Pe.havedict=1,h))}return is.inflateReset=Te,is.inflateReset2=We,is.inflateResetKeep=Ie,is.inflateInit=Ge,is.inflateInit2=qe,is.inflate=D,is.inflateEnd=fe,is.inflateGetHeader=be,is.inflateSetDictionary=Se,is.inflateInfo="pako inflate (from Nodeca project)",is}function I7(){return mL||(mL=!0,d1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),d1}function O7(){if(yL)return rt;yL=!0;var r=fn().Buffer,e=zr,t=pt,n=A7(),i=T7(),o=D7(),s=I7();for(var a in s)rt[a]=s[a];rt.NONE=0,rt.DEFLATE=1,rt.INFLATE=2,rt.GZIP=3,rt.GUNZIP=4,rt.DEFLATERAW=5,rt.INFLATERAW=6,rt.UNZIP=7;var u=31,c=139;function f(h){if(typeof h!="number"||h<rt.DEFLATE||h>rt.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=h,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}return f.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,t(this.init_done,"close before init"),t(this.mode<=rt.UNZIP),this.mode===rt.DEFLATE||this.mode===rt.GZIP||this.mode===rt.DEFLATERAW?i.deflateEnd(this.strm):(this.mode===rt.INFLATE||this.mode===rt.GUNZIP||this.mode===rt.INFLATERAW||this.mode===rt.UNZIP)&&o.inflateEnd(this.strm),this.mode=rt.NONE,this.dictionary=null},f.prototype.write=function(h,d,g,b,v,w,y){return this._write(!0,h,d,g,b,v,w,y)},f.prototype.writeSync=function(h,d,g,b,v,w,y){return this._write(!1,h,d,g,b,v,w,y)},f.prototype._write=function(h,d,g,b,v,w,y,_){if(t.equal(arguments.length,8),t(this.init_done,"write before init"),t(this.mode!==rt.NONE,"already finalized"),t.equal(!1,this.write_in_progress,"write already in progress"),t.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,t.equal(!1,d===void 0,"must provide flush value"),this.write_in_progress=!0,d!==rt.Z_NO_FLUSH&&d!==rt.Z_PARTIAL_FLUSH&&d!==rt.Z_SYNC_FLUSH&&d!==rt.Z_FULL_FLUSH&&d!==rt.Z_FINISH&&d!==rt.Z_BLOCK)throw new Error("Invalid flush value");if(g==null&&(g=r.alloc(0),v=0,b=0),this.strm.avail_in=v,this.strm.input=g,this.strm.next_in=b,this.strm.avail_out=_,this.strm.output=w,this.strm.next_out=y,this.flush=d,!h)return this._process(),this._checkError()?this._afterSync():void 0;var E=this;return e.nextTick(function(){E._process(),E._after()}),this},f.prototype._afterSync=function(){var h=this.strm.avail_out,d=this.strm.avail_in;return this.write_in_progress=!1,[d,h]},f.prototype._process=function(){var h=null;switch(this.mode){case rt.DEFLATE:case rt.GZIP:case rt.DEFLATERAW:this.err=i.deflate(this.strm,this.flush);break;case rt.UNZIP:switch(this.strm.avail_in>0&&(h=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(h===null)break;if(this.strm.input[h]===u){if(this.gzip_id_bytes_read=1,h++,this.strm.avail_in===1)break}else{this.mode=rt.INFLATE;break}case 1:if(h===null)break;this.strm.input[h]===c?(this.gzip_id_bytes_read=2,this.mode=rt.GUNZIP):this.mode=rt.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case rt.INFLATE:case rt.GUNZIP:case rt.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===rt.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===rt.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===rt.Z_DATA_ERROR&&(this.err=rt.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===rt.GUNZIP&&this.err===rt.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},f.prototype._checkError=function(){switch(this.err){case rt.Z_OK:case rt.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===rt.Z_FINISH)return this._error("unexpected end of file"),!1;break;case rt.Z_STREAM_END:break;case rt.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},f.prototype._after=function(){if(this._checkError()){var h=this.strm.avail_out,d=this.strm.avail_in;this.write_in_progress=!1,this.callback(d,h),this.pending_close&&this.close()}},f.prototype._error=function(h){this.strm.msg&&(h=this.strm.msg),this.onerror(h,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},f.prototype.init=function(h,d,g,b,v){t(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),t(h>=8&&h<=15,"invalid windowBits"),t(d>=-1&&d<=9,"invalid compression level"),t(g>=1&&g<=9,"invalid memlevel"),t(b===rt.Z_FILTERED||b===rt.Z_HUFFMAN_ONLY||b===rt.Z_RLE||b===rt.Z_FIXED||b===rt.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(d,h,g,b,v),this._setDictionary()},f.prototype.params=function(){throw new Error("deflateParams Not supported")},f.prototype.reset=function(){this._reset(),this._setDictionary()},f.prototype._init=function(h,d,g,b,v){switch(this.level=h,this.windowBits=d,this.memLevel=g,this.strategy=b,this.flush=rt.Z_NO_FLUSH,this.err=rt.Z_OK,(this.mode===rt.GZIP||this.mode===rt.GUNZIP)&&(this.windowBits+=16),this.mode===rt.UNZIP&&(this.windowBits+=32),(this.mode===rt.DEFLATERAW||this.mode===rt.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case rt.DEFLATE:case rt.GZIP:case rt.DEFLATERAW:this.err=i.deflateInit2(this.strm,this.level,rt.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case rt.INFLATE:case rt.GUNZIP:case rt.INFLATERAW:case rt.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==rt.Z_OK&&this._error("Init error"),this.dictionary=v,this.write_in_progress=!1,this.init_done=!0},f.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=rt.Z_OK,this.mode){case rt.DEFLATE:case rt.DEFLATERAW:this.err=i.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==rt.Z_OK&&this._error("Failed to set dictionary")}},f.prototype._reset=function(){switch(this.err=rt.Z_OK,this.mode){case rt.DEFLATE:case rt.DEFLATERAW:case rt.GZIP:this.err=i.deflateReset(this.strm);break;case rt.INFLATE:case rt.INFLATERAW:case rt.GUNZIP:this.err=o.inflateReset(this.strm);break}this.err!==rt.Z_OK&&this._error("Failed to reset stream")},rt.Zlib=f,rt}function N7(){if(bL)return ht;bL=!0;var r=zr,e=fn().Buffer,t=ii.Transform,n=O7(),i=Ve,o=pt.ok,s=fn().kMaxLength,a="Cannot create final Buffer. It would be larger than 0x"+s.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16*1024,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(n),c=0;c<u.length;c++){var f=u[c];f.match(/^Z/)&&Object.defineProperty(ht,f,{enumerable:!0,value:n[f],writable:!1})}for(var h={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},d=Object.keys(h),g=0;g<d.length;g++){var b=d[g];h[h[b]]=b}Object.defineProperty(ht,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),ht.Deflate=y,ht.Inflate=_,ht.Gzip=E,ht.Gunzip=S,ht.DeflateRaw=A,ht.InflateRaw=B,ht.Unzip=T,ht.createDeflate=function(U){return new y(U)},ht.createInflate=function(U){return new _(U)},ht.createDeflateRaw=function(U){return new A(U)},ht.createInflateRaw=function(U){return new B(U)},ht.createGzip=function(U){return new E(U)},ht.createGunzip=function(U){return new S(U)},ht.createUnzip=function(U){return new T(U)},ht.deflate=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new y(V),U,ue)},ht.deflateSync=function(U,V){return w(new y(V),U)},ht.gzip=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new E(V),U,ue)},ht.gzipSync=function(U,V){return w(new E(V),U)},ht.deflateRaw=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new A(V),U,ue)},ht.deflateRawSync=function(U,V){return w(new A(V),U)},ht.unzip=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new T(V),U,ue)},ht.unzipSync=function(U,V){return w(new T(V),U)},ht.inflate=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new _(V),U,ue)},ht.inflateSync=function(U,V){return w(new _(V),U)},ht.gunzip=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new S(V),U,ue)},ht.gunzipSync=function(U,V){return w(new S(V),U)},ht.inflateRaw=function(U,V,ue){return typeof V=="function"&&(ue=V,V={}),v(new B(V),U,ue)},ht.inflateRawSync=function(U,V){return w(new B(V),U)};function v(U,V,ue){var Ae=[],ve=0;U.on("error",O),U.on("end",oe),U.end(V),z();function z(){for(var q;(q=U.read())!==null;)Ae.push(q),ve+=q.length;U.once("readable",z)}function O(q){U.removeListener("end",oe),U.removeListener("readable",z),ue(q)}function oe(){var q,M=null;ve>=s?M=new RangeError(a):q=e.concat(Ae,ve),Ae=[],U.close(),ue(M,q)}}function w(U,V){if(typeof V=="string"&&(V=e.from(V)),!e.isBuffer(V))throw new TypeError("Not a string or buffer");var ue=U._finishFlushFlag;return U._processChunk(V,ue)}function y(U){if(!(this instanceof y))return new y(U);ie.call(this,U,n.DEFLATE)}function _(U){if(!(this instanceof _))return new _(U);ie.call(this,U,n.INFLATE)}function E(U){if(!(this instanceof E))return new E(U);ie.call(this,U,n.GZIP)}function S(U){if(!(this instanceof S))return new S(U);ie.call(this,U,n.GUNZIP)}function A(U){if(!(this instanceof A))return new A(U);ie.call(this,U,n.DEFLATERAW)}function B(U){if(!(this instanceof B))return new B(U);ie.call(this,U,n.INFLATERAW)}function T(U){if(!(this instanceof T))return new T(U);ie.call(this,U,n.UNZIP)}function Z(U){return U===n.Z_NO_FLUSH||U===n.Z_PARTIAL_FLUSH||U===n.Z_SYNC_FLUSH||U===n.Z_FULL_FLUSH||U===n.Z_FINISH||U===n.Z_BLOCK}function ie(U,V){var ue=this;if(this._opts=U=U||{},this._chunkSize=U.chunkSize||ht.Z_DEFAULT_CHUNK,t.call(this,U),U.flush&&!Z(U.flush))throw new Error("Invalid flush flag: "+U.flush);if(U.finishFlush&&!Z(U.finishFlush))throw new Error("Invalid flush flag: "+U.finishFlush);if(this._flushFlag=U.flush||n.Z_NO_FLUSH,this._finishFlushFlag=typeof U.finishFlush<"u"?U.finishFlush:n.Z_FINISH,U.chunkSize&&(U.chunkSize<ht.Z_MIN_CHUNK||U.chunkSize>ht.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+U.chunkSize);if(U.windowBits&&(U.windowBits<ht.Z_MIN_WINDOWBITS||U.windowBits>ht.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+U.windowBits);if(U.level&&(U.level<ht.Z_MIN_LEVEL||U.level>ht.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+U.level);if(U.memLevel&&(U.memLevel<ht.Z_MIN_MEMLEVEL||U.memLevel>ht.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+U.memLevel);if(U.strategy&&U.strategy!=ht.Z_FILTERED&&U.strategy!=ht.Z_HUFFMAN_ONLY&&U.strategy!=ht.Z_RLE&&U.strategy!=ht.Z_FIXED&&U.strategy!=ht.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+U.strategy);if(U.dictionary&&!e.isBuffer(U.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(V);var Ae=this;this._hadError=!1,this._handle.onerror=function(O,oe){G(Ae),Ae._hadError=!0;var q=new Error(O);q.errno=oe,q.code=ht.codes[oe],Ae.emit("error",q)};var ve=ht.Z_DEFAULT_COMPRESSION;typeof U.level=="number"&&(ve=U.level);var z=ht.Z_DEFAULT_STRATEGY;typeof U.strategy=="number"&&(z=U.strategy),this._handle.init(U.windowBits||ht.Z_DEFAULT_WINDOWBITS,ve,U.memLevel||ht.Z_DEFAULT_MEMLEVEL,z,U.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=ve,this._strategy=z,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!ue._handle},configurable:!0,enumerable:!0})}i.inherits(ie,t),ie.prototype.params=function(U,V,ue){if(U<ht.Z_MIN_LEVEL||U>ht.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+U);if(V!=ht.Z_FILTERED&&V!=ht.Z_HUFFMAN_ONLY&&V!=ht.Z_RLE&&V!=ht.Z_FIXED&&V!=ht.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+V);if(this._level!==U||this._strategy!==V){var Ae=this;this.flush(n.Z_SYNC_FLUSH,function(){o(Ae._handle,"zlib binding closed"),Ae._handle.params(U,V),Ae._hadError||(Ae._level=U,Ae._strategy=V,ue&&ue())})}else r.nextTick(ue)},ie.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},ie.prototype._flush=function(U){this._transform(e.alloc(0),"",U)},ie.prototype.flush=function(U,V){var ue=this,Ae=this._writableState;(typeof U=="function"||U===void 0&&!V)&&(V=U,U=n.Z_FULL_FLUSH),Ae.ended?V&&r.nextTick(V):Ae.ending?V&&this.once("end",V):Ae.needDrain?V&&this.once("drain",function(){return ue.flush(U,V)}):(this._flushFlag=U,this.write(e.alloc(0),"",V))},ie.prototype.close=function(U){G(this,U),r.nextTick(ae,this)};function G(U,V){V&&r.nextTick(V),U._handle&&(U._handle.close(),U._handle=null)}function ae(U){U.emit("close")}return ie.prototype._transform=function(U,V,ue){var Ae,ve=this._writableState,z=ve.ending||ve.ended,O=z&&(!U||ve.length===U.length);if(U!==null&&!e.isBuffer(U))return ue(new Error("invalid input"));if(!this._handle)return ue(new Error("zlib binding closed"));O?Ae=this._finishFlushFlag:(Ae=this._flushFlag,U.length>=ve.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),this._processChunk(U,Ae,ue)},ie.prototype._processChunk=function(U,V,ue){var Ae=U&&U.length,ve=this._chunkSize-this._offset,z=0,O=this,oe=typeof ue=="function";if(!oe){var q=[],M=0,H;this.on("error",function(P){H=P}),o(this._handle,"zlib binding closed");do var j=this._handle.writeSync(V,U,z,Ae,this._buffer,this._offset,ve);while(!this._hadError&&ee(j[0],j[1]));if(this._hadError)throw H;if(M>=s)throw G(this),new RangeError(a);var Q=e.concat(q,M);return G(this),Q}o(this._handle,"zlib binding closed");var K=this._handle.write(V,U,z,Ae,this._buffer,this._offset,ve);K.buffer=U,K.callback=ee;function ee(P,I){if(this&&(this.buffer=null,this.callback=null),!O._hadError){var k=ve-I;if(o(k>=0,"have should not go down"),k>0){var ne=O._buffer.slice(O._offset,O._offset+k);O._offset+=k,oe?O.push(ne):(q.push(ne),M+=ne.length)}if((I===0||O._offset>=O._chunkSize)&&(ve=O._chunkSize,O._offset=0,O._buffer=e.allocUnsafe(O._chunkSize)),I===0){if(z+=Ae-P,Ae=P,!oe)return!0;var pe=O._handle.write(V,U,z,Ae,O._buffer,O._offset,O._chunkSize);pe.callback=ee,pe.buffer=U;return}if(!oe)return!1;ue()}}},i.inherits(y,ie),i.inherits(_,ie),i.inherits(E,ie),i.inherits(S,ie),i.inherits(A,ie),i.inherits(B,ie),i.inherits(T,ie),ht}var a1,oL,Pn,aL,Zu,lL,l1,uL,u1,cL,c1,fL,Os,hL,f1,dL,h1,pL,is,gL,d1,mL,rt,yL,ht,bL,Ze,k7,L7,P7,B7,M7,F7,U7,j7,$7,z7,W7,q7,H7,G7,V7,Y7,X7,K7,Z7,J7,Q7,ez,tz,rz,nz,iz,sz,oz,az,lz,uz,cz,fz,hz,dz,pz,gz,mz,yz,bz,wz,vz,_z,Ez,Az,xz,Sz,Tz,Cz,Rz,Dz,Iz,Oz,Nz,kz,Lz,Pz,Bz,Mz,Fz,Uz,jz,$z,zz,Wz,qz,Hz,Gz,Vz,EL=Jt(()=>{Ne();Le();ke();Ff();LE();z_();Mu();W0();cl();G0();Xf();eb();qf();a1={},oL=!1;Pn={},aL=!1;Zu={},lL=!1;l1={},uL=!1;u1={},cL=!1;c1={},fL=!1;Os={},hL=!1;f1={},dL=!1;h1={},pL=!1;is={},gL=!1;d1={},mL=!1;rt={},yL=!1;ht={},bL=!1;Ze=N7();Ze.codes;Ze.Deflate;Ze.Inflate;Ze.Gzip;Ze.Gunzip;Ze.DeflateRaw;Ze.InflateRaw;Ze.Unzip;Ze.createDeflate;Ze.createInflate;Ze.createDeflateRaw;Ze.createInflateRaw;Ze.createGzip;Ze.createGunzip;Ze.createUnzip;Ze.deflate;Ze.deflateSync;Ze.gzip;Ze.gzipSync;Ze.deflateRaw;Ze.deflateRawSync;Ze.unzip;Ze.unzipSync;Ze.inflate;Ze.inflateSync;Ze.gunzip;Ze.gunzipSync;Ze.inflateRaw;Ze.inflateRawSync;k7=Ze.Deflate,L7=Ze.DeflateRaw,P7=Ze.Gunzip,B7=Ze.Gzip,M7=Ze.Inflate,F7=Ze.InflateRaw,U7=Ze.Unzip,j7=Ze.Z_BEST_COMPRESSION,$7=Ze.Z_BEST_SPEED,z7=Ze.Z_BINARY,W7=Ze.Z_BLOCK,q7=Ze.Z_BUF_ERROR,H7=Ze.Z_DATA_ERROR,G7=Ze.Z_DEFAULT_CHUNK,V7=Ze.Z_DEFAULT_COMPRESSION,Y7=Ze.Z_DEFAULT_LEVEL,X7=Ze.Z_DEFAULT_MEMLEVEL,K7=Ze.Z_DEFAULT_STRATEGY,Z7=Ze.Z_DEFAULT_WINDOWBITS,J7=Ze.Z_DEFLATED,Q7=Ze.Z_ERRNO,ez=Ze.Z_FILTERED,tz=Ze.Z_FINISH,rz=Ze.Z_FIXED,nz=Ze.Z_FULL_FLUSH,iz=Ze.Z_HUFFMAN_ONLY,sz=Ze.Z_MAX_CHUNK,oz=Ze.Z_MAX_LEVEL,az=Ze.Z_MAX_MEMLEVEL,lz=Ze.Z_MAX_WINDOWBITS,uz=Ze.Z_MIN_CHUNK,cz=Ze.Z_MIN_LEVEL,fz=Ze.Z_MIN_MEMLEVEL,hz=Ze.Z_MIN_WINDOWBITS,dz=Ze.Z_NEED_DICT,pz=Ze.Z_NO_COMPRESSION,gz=Ze.Z_NO_FLUSH,mz=Ze.Z_OK,yz=Ze.Z_PARTIAL_FLUSH,bz=Ze.Z_RLE,wz=Ze.Z_STREAM_END,vz=Ze.Z_STREAM_ERROR,_z=Ze.Z_SYNC_FLUSH,Ez=Ze.Z_TEXT,Az=Ze.Z_TREES,xz=Ze.Z_UNKNOWN,Sz=Ze.Zlib,Tz=Ze.codes,Cz=Ze.createDeflate,Rz=Ze.createDeflateRaw,Dz=Ze.createGunzip,Iz=Ze.createGzip,Oz=Ze.createInflate,Nz=Ze.createInflateRaw,kz=Ze.createUnzip,Lz=Ze.deflate,Pz=Ze.deflateRaw,Bz=Ze.deflateRawSync,Mz=Ze.deflateSync,Fz=Ze.gunzip,Uz=Ze.gunzipSync,jz=Ze.gzip,$z=Ze.gzipSync,zz=Ze.inflate,Wz=Ze.inflateRaw,qz=Ze.inflateRawSync,Hz=Ze.inflateSync,Gz=Ze.unzip,Vz=Ze.unzipSync});function xL(){return AL||(AL=!0,typeof Object.create=="function"?Pb=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Pb=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Pb}var Pb,AL,p1=Jt(()=>{Ne();Le();ke();Pb={},AL=!1});var lg={};Uo(lg,{TextDecoder:()=>OW,TextEncoder:()=>IW,_extend:()=>oW,callbackify:()=>aW,debuglog:()=>lW,default:()=>gt,deprecate:()=>uW,format:()=>cW,inherits:()=>fW,inspect:()=>hW,isArray:()=>dW,isBoolean:()=>pW,isBuffer:()=>gW,isDate:()=>mW,isError:()=>yW,isFunction:()=>bW,isNull:()=>wW,isNullOrUndefined:()=>vW,isNumber:()=>_W,isObject:()=>EW,isPrimitive:()=>AW,isRegExp:()=>xW,isString:()=>SW,isSymbol:()=>TW,isUndefined:()=>CW,log:()=>RW,promisify:()=>Bb,types:()=>DW});function S1(){if(SL)return g1;SL=!0;var r=n2();return g1=function(){return r()&&!!Symbol.toStringTag},g1}function Yz(){if(TL)return m1;TL=!0;var r=S1()(),e=jp(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},o=(function(){return n(arguments)})();return n.isLegacyArguments=i,m1=o?n:i,m1}function Xz(){if(CL)return y1;CL=!0;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=S1()(),i=Object.getPrototypeOf,o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},s;return y1=function(u){if(typeof u!="function")return!1;if(t.test(e.call(u)))return!0;if(!n){var c=r.call(u);return c==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var f=o();s=f?i(f):!1}return i(u)===s},y1}function Kz(){if(RL)return b1;RL=!0;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(_){_!==n&&(e=null)}else e=null;var i=/^\s*class\b/,o=function(E){try{var S=r.call(E);return i.test(S)}catch{return!1}},s=function(E){try{return o(E)?!1:(r.call(E),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",c="[object Function]",f="[object GeneratorFunction]",h="[object HTMLAllCollection]",d="[object HTML document.all class]",g="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),w=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(w=function(E){if((v||!E)&&(typeof E>"u"||typeof E=="object"))try{var S=a.call(E);return(S===h||S===d||S===g||S===u)&&E("")==null}catch{}return!1})}return b1=e?function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;try{e(E,null,t)}catch(S){if(S!==n)return!1}return!o(E)&&s(E)}:function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;if(b)return s(E);if(o(E))return!1;var S=a.call(E);return S!==c&&S!==f&&!/^\[object HTML/.test(S)?!1:s(E)},b1}function Zz(){if(DL)return w1;DL=!0;var r=Kz(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(u,c,f){for(var h=0,d=u.length;h<d;h++)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},i=function(u,c,f){for(var h=0,d=u.length;h<d;h++)f==null?c(u.charAt(h),h,u):c.call(f,u.charAt(h),h,u)},o=function(u,c,f){for(var h in u)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},s=function(u,c,f){if(!r(c))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=f),e.call(u)==="[object Array]"?n(u,c,h):typeof u=="string"?i(u,c,h):o(u,c,h)};return w1=s,w1}function Jz(){return IL||(IL=!0,v1=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),v1}function eW(){if(OL)return _1;OL=!0;var r=Jz(),e=typeof globalThis>"u"?Qz:globalThis;return _1=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},_1}function ML(){if(NL)return E1;NL=!0;var r=Zz(),e=eW(),t=o2(),n=jp(),i=tb(),o=n("Object.prototype.toString"),s=S1()(),a=typeof globalThis>"u"?tW:globalThis,u=e(),c=n("String.prototype.slice"),f=Object.getPrototypeOf,h=n("Array.prototype.indexOf",!0)||function(w,y){for(var _=0;_<w.length;_+=1)if(w[_]===y)return _;return-1},d={__proto__:null};s&&i&&f?r(u,function(v){var w=new a[v];if(Symbol.toStringTag in w){var y=f(w),_=i(y,Symbol.toStringTag);if(!_){var E=f(y);_=i(E,Symbol.toStringTag)}d["$"+v]=t(_.get)}}):r(u,function(v){var w=new a[v],y=w.slice||w.set;y&&(d["$"+v]=t(y))});var g=function(w){var y=!1;return r(d,function(_,E){if(!y)try{"$"+_(w)===E&&(y=c(E,1))}catch{}}),y},b=function(w){var y=!1;return r(d,function(_,E){if(!y)try{_(w),y=c(E,1)}catch{}}),y};return E1=function(w){if(!w||typeof w!="object")return!1;if(!s){var y=c(o(w),8,-1);return h(u,y)>-1?y:y!=="Object"?!1:b(w)}return i?g(w):null},E1}function rW(){if(kL)return A1;kL=!0;var r=ML();return A1=function(t){return!!r(t)},A1}function nW(){if(LL)return Dt;LL=!0;var r=Yz(),e=Xz(),t=ML(),n=rW();function i(he){return he.call.bind(he)}var o=typeof BigInt<"u",s=typeof Symbol<"u",a=i(Object.prototype.toString),u=i(Number.prototype.valueOf),c=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(o)var h=i(BigInt.prototype.valueOf);if(s)var d=i(Symbol.prototype.valueOf);function g(he,_e){if(typeof he!="object")return!1;try{return _e(he),!0}catch{return!1}}Dt.isArgumentsObject=r,Dt.isGeneratorFunction=e,Dt.isTypedArray=n;function b(he){return typeof Promise<"u"&&he instanceof Promise||he!==null&&typeof he=="object"&&typeof he.then=="function"&&typeof he.catch=="function"}Dt.isPromise=b;function v(he){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(he):n(he)||H(he)}Dt.isArrayBufferView=v;function w(he){return t(he)==="Uint8Array"}Dt.isUint8Array=w;function y(he){return t(he)==="Uint8ClampedArray"}Dt.isUint8ClampedArray=y;function _(he){return t(he)==="Uint16Array"}Dt.isUint16Array=_;function E(he){return t(he)==="Uint32Array"}Dt.isUint32Array=E;function S(he){return t(he)==="Int8Array"}Dt.isInt8Array=S;function A(he){return t(he)==="Int16Array"}Dt.isInt16Array=A;function B(he){return t(he)==="Int32Array"}Dt.isInt32Array=B;function T(he){return t(he)==="Float32Array"}Dt.isFloat32Array=T;function Z(he){return t(he)==="Float64Array"}Dt.isFloat64Array=Z;function ie(he){return t(he)==="BigInt64Array"}Dt.isBigInt64Array=ie;function G(he){return t(he)==="BigUint64Array"}Dt.isBigUint64Array=G;function ae(he){return a(he)==="[object Map]"}ae.working=typeof Map<"u"&&ae(new Map);function U(he){return typeof Map>"u"?!1:ae.working?ae(he):he instanceof Map}Dt.isMap=U;function V(he){return a(he)==="[object Set]"}V.working=typeof Set<"u"&&V(new Set);function ue(he){return typeof Set>"u"?!1:V.working?V(he):he instanceof Set}Dt.isSet=ue;function Ae(he){return a(he)==="[object WeakMap]"}Ae.working=typeof WeakMap<"u"&&Ae(new WeakMap);function ve(he){return typeof WeakMap>"u"?!1:Ae.working?Ae(he):he instanceof WeakMap}Dt.isWeakMap=ve;function z(he){return a(he)==="[object WeakSet]"}z.working=typeof WeakSet<"u"&&z(new WeakSet);function O(he){return z(he)}Dt.isWeakSet=O;function oe(he){return a(he)==="[object ArrayBuffer]"}oe.working=typeof ArrayBuffer<"u"&&oe(new ArrayBuffer);function q(he){return typeof ArrayBuffer>"u"?!1:oe.working?oe(he):he instanceof ArrayBuffer}Dt.isArrayBuffer=q;function M(he){return a(he)==="[object DataView]"}M.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&M(new DataView(new ArrayBuffer(1),0,1));function H(he){return typeof DataView>"u"?!1:M.working?M(he):he instanceof DataView}Dt.isDataView=H;var j=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(he){return a(he)==="[object SharedArrayBuffer]"}function K(he){return typeof j>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new j)),Q.working?Q(he):he instanceof j)}Dt.isSharedArrayBuffer=K;function ee(he){return a(he)==="[object AsyncFunction]"}Dt.isAsyncFunction=ee;function P(he){return a(he)==="[object Map Iterator]"}Dt.isMapIterator=P;function I(he){return a(he)==="[object Set Iterator]"}Dt.isSetIterator=I;function k(he){return a(he)==="[object Generator]"}Dt.isGeneratorObject=k;function ne(he){return a(he)==="[object WebAssembly.Module]"}Dt.isWebAssemblyCompiledModule=ne;function pe(he){return g(he,u)}Dt.isNumberObject=pe;function F(he){return g(he,c)}Dt.isStringObject=F;function R(he){return g(he,f)}Dt.isBooleanObject=R;function te(he){return o&&g(he,h)}Dt.isBigIntObject=te;function ge(he){return s&&g(he,d)}Dt.isSymbolObject=ge;function Ce(he){return pe(he)||F(he)||R(he)||te(he)||ge(he)}Dt.isBoxedPrimitive=Ce;function xe(he){return typeof Uint8Array<"u"&&(q(he)||K(he))}return Dt.isAnyArrayBuffer=xe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(he){Object.defineProperty(Dt,he,{enumerable:!1,value:function(){throw new Error(he+" is not supported in userland")}})}),Dt}function iW(){return PL||(PL=!0,x1=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),x1}function sW(){if(BL)return It;BL=!0;var r=zr,e=Object.getOwnPropertyDescriptors||function(j){for(var Q=Object.keys(j),K={},ee=0;ee<Q.length;ee++)K[Q[ee]]=Object.getOwnPropertyDescriptor(j,Q[ee]);return K},t=/%[sdj%]/g;It.format=function(H){if(!A(H)){for(var j=[],Q=0;Q<arguments.length;Q++)j.push(s(arguments[Q]));return j.join(" ")}for(var Q=1,K=arguments,ee=K.length,P=String(H).replace(t,function(k){if(k==="%%")return"%";if(Q>=ee)return k;switch(k){case"%s":return String(K[Q++]);case"%d":return Number(K[Q++]);case"%j":try{return JSON.stringify(K[Q++])}catch{return"[Circular]"}default:return k}}),I=K[Q];Q<ee;I=K[++Q])_(I)||!ie(I)?P+=" "+I:P+=" "+s(I);return P},It.deprecate=function(H,j){if(typeof r<"u"&&r.noDeprecation===!0)return H;if(typeof r>"u")return function(){return It.deprecate(H,j).apply(this||ag,arguments)};var Q=!1;function K(){if(!Q){if(r.throwDeprecation)throw new Error(j);r.traceDeprecation?console.trace(j):console.error(j),Q=!0}return H.apply(this||ag,arguments)}return K};var n={},i=/^$/;if(r.env.NODE_DEBUG){var o=r.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}It.debuglog=function(H){if(H=H.toUpperCase(),!n[H])if(i.test(H)){var j=r.pid;n[H]=function(){var Q=It.format.apply(It,arguments);console.error("%s %d: %s",H,j,Q)}}else n[H]=function(){};return n[H]};function s(H,j){var Q={seen:[],stylize:u};return arguments.length>=3&&(Q.depth=arguments[2]),arguments.length>=4&&(Q.colors=arguments[3]),y(j)?Q.showHidden=j:j&&It._extend(Q,j),T(Q.showHidden)&&(Q.showHidden=!1),T(Q.depth)&&(Q.depth=2),T(Q.colors)&&(Q.colors=!1),T(Q.customInspect)&&(Q.customInspect=!0),Q.colors&&(Q.stylize=a),f(Q,H,Q.depth)}It.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(H,j){var Q=s.styles[j];return Q?"\x1B["+s.colors[Q][0]+"m"+H+"\x1B["+s.colors[Q][1]+"m":H}function u(H,j){return H}function c(H){var j={};return H.forEach(function(Q,K){j[Q]=!0}),j}function f(H,j,Q){if(H.customInspect&&j&&U(j.inspect)&&j.inspect!==It.inspect&&!(j.constructor&&j.constructor.prototype===j)){var K=j.inspect(Q,H);return A(K)||(K=f(H,K,Q)),K}var ee=h(H,j);if(ee)return ee;var P=Object.keys(j),I=c(P);if(H.showHidden&&(P=Object.getOwnPropertyNames(j)),ae(j)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return d(j);if(P.length===0){if(U(j)){var k=j.name?": "+j.name:"";return H.stylize("[Function"+k+"]","special")}if(Z(j))return H.stylize(RegExp.prototype.toString.call(j),"regexp");if(G(j))return H.stylize(Date.prototype.toString.call(j),"date");if(ae(j))return d(j)}var ne="",pe=!1,F=["{","}"];if(w(j)&&(pe=!0,F=["[","]"]),U(j)){var R=j.name?": "+j.name:"";ne=" [Function"+R+"]"}if(Z(j)&&(ne=" "+RegExp.prototype.toString.call(j)),G(j)&&(ne=" "+Date.prototype.toUTCString.call(j)),ae(j)&&(ne=" "+d(j)),P.length===0&&(!pe||j.length==0))return F[0]+ne+F[1];if(Q<0)return Z(j)?H.stylize(RegExp.prototype.toString.call(j),"regexp"):H.stylize("[Object]","special");H.seen.push(j);var te;return pe?te=g(H,j,Q,I,P):te=P.map(function(ge){return b(H,j,Q,I,ge,pe)}),H.seen.pop(),v(te,ne,F)}function h(H,j){if(T(j))return H.stylize("undefined","undefined");if(A(j)){var Q="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(Q,"string")}if(S(j))return H.stylize(""+j,"number");if(y(j))return H.stylize(""+j,"boolean");if(_(j))return H.stylize("null","null")}function d(H){return"["+Error.prototype.toString.call(H)+"]"}function g(H,j,Q,K,ee){for(var P=[],I=0,k=j.length;I<k;++I)O(j,String(I))?P.push(b(H,j,Q,K,String(I),!0)):P.push("");return ee.forEach(function(ne){ne.match(/^\d+$/)||P.push(b(H,j,Q,K,ne,!0))}),P}function b(H,j,Q,K,ee,P){var I,k,ne;if(ne=Object.getOwnPropertyDescriptor(j,ee)||{value:j[ee]},ne.get?ne.set?k=H.stylize("[Getter/Setter]","special"):k=H.stylize("[Getter]","special"):ne.set&&(k=H.stylize("[Setter]","special")),O(K,ee)||(I="["+ee+"]"),k||(H.seen.indexOf(ne.value)<0?(_(Q)?k=f(H,ne.value,null):k=f(H,ne.value,Q-1),k.indexOf(`
`)>-1&&(P?k=k.split(`
`).map(function(pe){return"  "+pe}).join(`
`).slice(2):k=`
`+k.split(`
`).map(function(pe){return"   "+pe}).join(`
`))):k=H.stylize("[Circular]","special")),T(I)){if(P&&ee.match(/^\d+$/))return k;I=JSON.stringify(""+ee),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.slice(1,-1),I=H.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=H.stylize(I,"string"))}return I+": "+k}function v(H,j,Q){var K=H.reduce(function(ee,P){return P.indexOf(`
`)>=0,ee+P.replace(/\u001b\[\d\d?m/g,"").length+1},0);return K>60?Q[0]+(j===""?"":j+`
 `)+" "+H.join(`,
  `)+" "+Q[1]:Q[0]+j+" "+H.join(", ")+" "+Q[1]}It.types=nW();function w(H){return Array.isArray(H)}It.isArray=w;function y(H){return typeof H=="boolean"}It.isBoolean=y;function _(H){return H===null}It.isNull=_;function E(H){return H==null}It.isNullOrUndefined=E;function S(H){return typeof H=="number"}It.isNumber=S;function A(H){return typeof H=="string"}It.isString=A;function B(H){return typeof H=="symbol"}It.isSymbol=B;function T(H){return H===void 0}It.isUndefined=T;function Z(H){return ie(H)&&ue(H)==="[object RegExp]"}It.isRegExp=Z,It.types.isRegExp=Z;function ie(H){return typeof H=="object"&&H!==null}It.isObject=ie;function G(H){return ie(H)&&ue(H)==="[object Date]"}It.isDate=G,It.types.isDate=G;function ae(H){return ie(H)&&(ue(H)==="[object Error]"||H instanceof Error)}It.isError=ae,It.types.isNativeError=ae;function U(H){return typeof H=="function"}It.isFunction=U;function V(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}It.isPrimitive=V,It.isBuffer=iW();function ue(H){return Object.prototype.toString.call(H)}function Ae(H){return H<10?"0"+H.toString(10):H.toString(10)}var ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var H=new Date,j=[Ae(H.getHours()),Ae(H.getMinutes()),Ae(H.getSeconds())].join(":");return[H.getDate(),ve[H.getMonth()],j].join(" ")}It.log=function(){console.log("%s - %s",z(),It.format.apply(It,arguments))},It.inherits=xL(),It._extend=function(H,j){if(!j||!ie(j))return H;for(var Q=Object.keys(j),K=Q.length;K--;)H[Q[K]]=j[Q[K]];return H};function O(H,j){return Object.prototype.hasOwnProperty.call(H,j)}var oe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;It.promisify=function(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');if(oe&&j[oe]){if(Q=j[oe],typeof Q!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Q,oe,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Q}function Q(){for(var K,ee,P=new Promise(function(ne,pe){K=ne,ee=pe}),I=[],k=0;k<arguments.length;k++)I.push(arguments[k]);I.push(function(ne,pe){ne?ee(ne):K(pe)});try{j.apply(this||ag,I)}catch(ne){ee(ne)}return P}return Object.setPrototypeOf(Q,Object.getPrototypeOf(j)),oe&&Object.defineProperty(Q,oe,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Q,e(j))},It.promisify.custom=oe;function q(H,j){if(!H){var Q=new Error("Promise was rejected with a falsy value");Q.reason=H,H=Q}return j(H)}function M(H){if(typeof H!="function")throw new TypeError('The "original" argument must be of type Function');function j(){for(var Q=[],K=0;K<arguments.length;K++)Q.push(arguments[K]);var ee=Q.pop();if(typeof ee!="function")throw new TypeError("The last argument must be of type Function");var P=this||ag,I=function(){return ee.apply(P,arguments)};H.apply(this||ag,Q).then(function(k){r.nextTick(I.bind(null,null,k))},function(k){r.nextTick(q.bind(null,k,I))})}return Object.setPrototypeOf(j,Object.getPrototypeOf(H)),Object.defineProperties(j,e(H)),j}return It.callbackify=M,It}var g1,SL,m1,TL,y1,CL,b1,RL,w1,DL,v1,IL,_1,OL,Qz,E1,NL,tW,A1,kL,Dt,LL,x1,PL,It,BL,ag,gt,oW,aW,lW,uW,cW,fW,hW,dW,pW,gW,mW,yW,bW,wW,vW,_W,EW,AW,xW,SW,TW,CW,RW,Bb,DW,IW,OW,yh=Jt(()=>{Ne();Le();ke();$p();p1();Mu();g1={},SL=!1;m1={},TL=!1;y1={},CL=!1;b1={},RL=!1;w1={},DL=!1;v1={},IL=!1;_1={},OL=!1,Qz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;E1={},NL=!1,tW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;A1={},kL=!1;Dt={},LL=!1;x1={},PL=!1;It={},BL=!1,ag=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;gt=sW();gt.format;gt.deprecate;gt.debuglog;gt.inspect;gt.types;gt.isArray;gt.isBoolean;gt.isNull;gt.isNullOrUndefined;gt.isNumber;gt.isString;gt.isSymbol;gt.isUndefined;gt.isRegExp;gt.isObject;gt.isDate;gt.isError;gt.isFunction;gt.isPrimitive;gt.isBuffer;gt.log;gt.inherits;gt._extend;gt.promisify;gt.callbackify;oW=gt._extend,aW=gt.callbackify,lW=gt.debuglog,uW=gt.deprecate,cW=gt.format,fW=gt.inherits,hW=gt.inspect,dW=gt.isArray,pW=gt.isBoolean,gW=gt.isBuffer,mW=gt.isDate,yW=gt.isError,bW=gt.isFunction,wW=gt.isNull,vW=gt.isNullOrUndefined,_W=gt.isNumber,EW=gt.isObject,AW=gt.isPrimitive,xW=gt.isRegExp,SW=gt.isString,TW=gt.isSymbol,CW=gt.isUndefined,RW=gt.log,Bb=gt.promisify,DW=gt.types,IW=gt.TextEncoder=globalThis.TextEncoder,OW=gt.TextDecoder=globalThis.TextDecoder});var ug={};Uo(ug,{EventEmitter:()=>kW,default:()=>ao,defaultMaxListeners:()=>LW,init:()=>PW,listenerCount:()=>BW,on:()=>MW,once:()=>FW});function NW(){if(FL)return Mb;FL=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,B,T){return Function.prototype.apply.call(A,B,T)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:t=function(A){return Object.getOwnPropertyNames(A)};function n(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}Mb=o,Mb.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(A){for(var B=[],T=1;T<arguments.length;T++)B.push(arguments[T]);var Z=A==="error",ie=this._events;if(ie!==void 0)Z=Z&&ie.error===void 0;else if(!Z)return!1;if(Z){var G;if(B.length>0&&(G=B[0]),G instanceof Error)throw G;var ae=new Error("Unhandled error."+(G?" ("+G.message+")":""));throw ae.context=G,ae}var U=ie[A];if(U===void 0)return!1;if(typeof U=="function")e(U,this,B);else for(var V=U.length,ue=b(U,V),T=0;T<V;++T)e(ue[T],this,B);return!0};function c(S,A,B,T){var Z,ie,G;if(a(B),ie=S._events,ie===void 0?(ie=S._events=Object.create(null),S._eventsCount=0):(ie.newListener!==void 0&&(S.emit("newListener",A,B.listener?B.listener:B),ie=S._events),G=ie[A]),G===void 0)G=ie[A]=B,++S._eventsCount;else if(typeof G=="function"?G=ie[A]=T?[B,G]:[G,B]:T?G.unshift(B):G.push(B),Z=u(S),Z>0&&G.length>Z&&!G.warned){G.warned=!0;var ae=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");ae.name="MaxListenersExceededWarning",ae.emitter=S,ae.type=A,ae.count=G.length,n(ae)}return S}o.prototype.addListener=function(A,B){return c(this,A,B,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,B){return c(this,A,B,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(S,A,B){var T={fired:!1,wrapFn:void 0,target:S,type:A,listener:B},Z=f.bind(T);return Z.listener=B,T.wrapFn=Z,Z}o.prototype.once=function(A,B){return a(B),this.on(A,h(this,A,B)),this},o.prototype.prependOnceListener=function(A,B){return a(B),this.prependListener(A,h(this,A,B)),this},o.prototype.removeListener=function(A,B){var T,Z,ie,G,ae;if(a(B),Z=this._events,Z===void 0)return this;if(T=Z[A],T===void 0)return this;if(T===B||T.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete Z[A],Z.removeListener&&this.emit("removeListener",A,T.listener||B));else if(typeof T!="function"){for(ie=-1,G=T.length-1;G>=0;G--)if(T[G]===B||T[G].listener===B){ae=T[G].listener,ie=G;break}if(ie<0)return this;ie===0?T.shift():v(T,ie),T.length===1&&(Z[A]=T[0]),Z.removeListener!==void 0&&this.emit("removeListener",A,ae||B)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var B,T,Z;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[A]),this;if(arguments.length===0){var ie=Object.keys(T),G;for(Z=0;Z<ie.length;++Z)G=ie[Z],G!=="removeListener"&&this.removeAllListeners(G);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=T[A],typeof B=="function")this.removeListener(A,B);else if(B!==void 0)for(Z=B.length-1;Z>=0;Z--)this.removeListener(A,B[Z]);return this};function d(S,A,B){var T=S._events;if(T===void 0)return[];var Z=T[A];return Z===void 0?[]:typeof Z=="function"?B?[Z.listener||Z]:[Z]:B?w(Z):b(Z,Z.length)}o.prototype.listeners=function(A){return d(this,A,!0)},o.prototype.rawListeners=function(A){return d(this,A,!1)},o.listenerCount=function(S,A){return typeof S.listenerCount=="function"?S.listenerCount(A):g.call(S,A)},o.prototype.listenerCount=g;function g(S){var A=this._events;if(A!==void 0){var B=A[S];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(S,A){for(var B=new Array(A),T=0;T<A;++T)B[T]=S[T];return B}function v(S,A){for(;A+1<S.length;A++)S[A]=S[A+1];S.pop()}function w(S){for(var A=new Array(S.length),B=0;B<A.length;++B)A[B]=S[B].listener||S[B];return A}function y(S,A){return new Promise(function(B,T){function Z(G){S.removeListener(A,ie),T(G)}function ie(){typeof S.removeListener=="function"&&S.removeListener("error",Z),B([].slice.call(arguments))}E(S,A,ie,{once:!0}),A!=="error"&&_(S,Z,{once:!0})})}function _(S,A,B){typeof S.on=="function"&&E(S,"error",A,B)}function E(S,A,B,T){if(typeof S.on=="function")T.once?S.once(A,B):S.on(A,B);else if(typeof S.addEventListener=="function")S.addEventListener(A,function Z(ie){T.once&&S.removeEventListener(A,Z),B(ie)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Mb}var Mb,FL,ao,kW,LW,PW,BW,MW,FW,bh=Jt(()=>{Ne();Le();ke();Mb={},FL=!1;ao=NW();ao.once;ao.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};ao.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}};({EventEmitter:kW,defaultMaxListeners:LW,init:PW,listenerCount:BW,on:MW,once:FW}=ao)});function UW(){if(UL)return cg;UL=!0;var r=fn(),e=r.Buffer;function t(i,o){for(var s in i)o[s]=i[s]}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?cg=r:(t(r,cg),cg.Buffer=n);function n(i,o,s){return e(i,o,s)}return n.prototype=Object.create(e.prototype),t(e,n),n.from=function(i,o,s){if(typeof i=="number")throw new TypeError("Argument must not be a number");return e(i,o,s)},n.alloc=function(i,o,s){if(typeof i!="number")throw new TypeError("Argument must be a number");var a=e(i);return o!==void 0?typeof s=="string"?a.fill(o,s):a.fill(o):a.fill(0),a},n.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return e(i)},n.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(i)},cg}function jW(){if(jL)return T1;jL=!0;var r=UW().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function n(y){var _=t(y);if(typeof _!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return _||y}T1.StringDecoder=i;function i(y){this.encoding=n(y);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=d,_=4;break;case"utf8":this.fillLast=u,_=4;break;case"base64":this.text=g,this.end=b,_=3;break;default:this.write=v,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(_)}i.prototype.write=function(y){if(y.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?_?_+this.text(y,E):this.text(y,E):_||""},i.prototype.end=f,i.prototype.text=c,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,_,E){var S=_.length-1;if(S<E)return 0;var A=o(_[S]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(y.lastNeed=A-2),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,_,E){if((_[0]&192)!==128)return y.lastNeed=0,"\uFFFD";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"\uFFFD";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,"\uFFFD"}}function u(y){var _=this.lastTotal-this.lastNeed,E=a(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function c(y,_){var E=s(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=E;var S=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,S),y.toString("utf8",_,S)}function f(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"\uFFFD":_}function h(y,_){if((y.length-_)%2===0){var E=y.toString("utf16le",_);if(E){var S=E.charCodeAt(E.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function d(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function g(y,_){var E=(y.length-_)%3;return E===0?y.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-E))}function b(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(y){return y.toString(this.encoding)}function w(y){return y&&y.length?this.write(y):""}return T1}var cg,UL,T1,jL,Fb,bee,$L=Jt(()=>{Ne();Le();ke();Ff();cg={},UL=!1;T1={},jL=!1;Fb=jW();Fb.StringDecoder;bee=Fb.StringDecoder});var gg={};Uo(gg,{Duplex:()=>GW,PassThrough:()=>YW,Readable:()=>G1,Stream:()=>ZW,Transform:()=>VW,Writable:()=>HW,default:()=>ur,finished:()=>XW,pipeline:()=>KW,promises:()=>JW});function Nr(){return zL||(zL=!0,C1={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,e){return r.includes(e)},ArrayPrototypeIndexOf(r,e){return r.indexOf(e)},ArrayPrototypeJoin(r,e){return r.join(e)},ArrayPrototypeMap(r,e){return r.map(e)},ArrayPrototypePop(r,e){return r.pop(e)},ArrayPrototypePush(r,e){return r.push(e)},ArrayPrototypeSlice(r,e,t){return r.slice(e,t)},Error,FunctionPrototypeCall(r,e,...t){return r.call(e,...t)},FunctionPrototypeSymbolHasInstance(r,e){return Function.prototype[Symbol.hasInstance].call(r,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,e){return Object.defineProperties(r,e)},ObjectDefineProperty(r,e,t){return Object.defineProperty(r,e,t)},ObjectGetOwnPropertyDescriptor(r,e){return Object.getOwnPropertyDescriptor(r,e)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,e){return Object.setPrototypeOf(r,e)},Promise,PromisePrototypeCatch(r,e){return r.catch(e)},PromisePrototypeThen(r,e,t){return r.then(e,t)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,e){return r.test(e)},SafeSet:Set,String,StringPrototypeSlice(r,e,t){return r.slice(e,t)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,e,t){return r.set(e,t)},Boolean,Uint8Array}),C1}function dg(){if(WL)return fg;WL=!0;let{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return fg=r,fg.AbortSignal=e,fg.default=r,fg}function Vn(){if(qL)return Ub;qL=!0;let r=fn(),{kResistStopPropagation:e,SymbolDispose:t}=Nr(),n=globalThis.AbortSignal||dg().AbortSignal,i=globalThis.AbortController||dg().AbortController,o=Object.getPrototypeOf(async function(){}).constructor,s=globalThis.Blob||r.Blob,a=typeof s<"u"?function(d){return d instanceof s}:function(d){return!1},u=(h,d)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE(d,"AbortSignal",h)},c=(h,d)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE(d,"Function",h)};class f extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let g="";for(let b=0;b<d.length;b++)g+=`    ${d[b].stack}
`;super(g),this.name="AggregateError",this.errors=d}}return Ub={AggregateError:f,kEmptyObject:Object.freeze({}),once(h){let d=!1;return function(...g){d||(d=!0,h.apply(this,g))}},createDeferredPromise:function(){let h,d;return{promise:new Promise((b,v)=>{h=b,d=v}),resolve:h,reject:d}},promisify(h){return new Promise((d,g)=>{h((b,...v)=>b?g(b):d(...v))})},debuglog(){return function(){}},format(h,...d){return h.replace(/%([sdifj])/g,function(...[g,b]){let v=d.shift();return b==="f"?v.toFixed(6):b==="j"?JSON.stringify(v):b==="s"&&typeof v=="object"?`${v.constructor!==Object?v.constructor.name:""} {}`.trim():v.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}},types:{isAsyncFunction(h){return h instanceof o},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:a,deprecate(h,d){return h},addAbortListener:ao.addAbortListener||function(d,g){if(d===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",d);u(d,"signal"),c(g,"listener");let b;return d.aborted?queueMicrotask(()=>g()):(d.addEventListener("abort",g,{__proto__:null,once:!0,[e]:!0}),b=()=>{d.removeEventListener("abort",g)}),{__proto__:null,[t](){var v;(v=b)===null||v===void 0||v()}}},AbortSignalAny:n.any||function(d){if(d.length===1)return d[0];let g=new i,b=()=>g.abort();return d.forEach(v=>{u(v,"signals"),v.addEventListener("abort",b,{once:!0})}),g.signal.addEventListener("abort",()=>{d.forEach(v=>v.removeEventListener("abort",b))},{once:!0}),g.signal}},Ub.promisify.custom=Symbol.for("nodejs.util.promisify.custom"),Ub}function fi(){if(HL)return R1;HL=!0;let{format:r,inspect:e,AggregateError:t}=Vn(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",u={};function c(w,y){if(!w)throw new u.ERR_INTERNAL_ASSERTION(y)}function f(w){let y="",_=w.length,E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)y=`_${w.slice(_-3,_)}${y}`;return`${w.slice(0,_)}${y}`}function h(w,y,_){if(typeof y=="function")return c(y.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${y.length}).`),y(..._);let E=(y.match(/%[dfijoOs]/g)||[]).length;return c(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?y:r(y,..._)}function d(w,y,_){_||(_=Error);class E extends _{constructor(...A){super(h(w,y,A))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[i]=!0,u[w]=E}function g(w){let y=a+w.name;return Object.defineProperty(w,"name",{value:y}),w}function b(w,y){if(w&&y&&w!==y){if(Array.isArray(y.errors))return y.errors.push(w),y;let _=new n([y,w],y.message);return _.code=y.code,_}return w||y}class v extends Error{constructor(y="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(y,_),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(w,y,_)=>{c(typeof w=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";let S=[],A=[],B=[];for(let Z of y)c(typeof Z=="string","All expected entries have to be of type string"),o.includes(Z)?S.push(Z.toLowerCase()):s.test(Z)?A.push(Z):(c(Z!=="object",'The value "object" should be written as "Object"'),B.push(Z));if(A.length>0){let Z=S.indexOf("object");Z!==-1&&(S.splice(S,Z,1),A.push("Object"))}if(S.length>0){switch(S.length){case 1:E+=`of type ${S[0]}`;break;case 2:E+=`one of type ${S[0]} or ${S[1]}`;break;default:{let Z=S.pop();E+=`one of type ${S.join(", ")}, or ${Z}`}}(A.length>0||B.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{let Z=A.pop();E+=`an instance of ${A.join(", ")}, or ${Z}`}}B.length>0&&(E+=" or ")}switch(B.length){case 0:break;case 1:B[0].toLowerCase()!==B[0]&&(E+="an "),E+=`${B[0]}`;break;case 2:E+=`one of ${B[0]} or ${B[1]}`;break;default:{let Z=B.pop();E+=`one of ${B.join(", ")}, or ${Z}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var T;if((T=_.constructor)!==null&&T!==void 0&&T.name)E+=`. Received an instance of ${_.constructor.name}`;else{let Z=e(_,{depth:-1});E+=`. Received ${Z}`}}else{let Z=e(_,{colors:!1});Z.length>25&&(Z=`${Z.slice(0,25)}...`),E+=`. Received type ${typeof _} (${Z})`}return E},TypeError),d("ERR_INVALID_ARG_VALUE",(w,y,_="is invalid")=>{let E=e(y);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(w,y,_)=>{var E;let S=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${y}" function but got ${S}.`},TypeError),d("ERR_MISSING_ARGS",(...w)=>{c(w.length>0,"At least one arg needs to be specified");let y,_=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:y+=`The ${w[0]} argument`;break;case 2:y+=`The ${w[0]} and ${w[1]} arguments`;break;default:{let E=w.pop();y+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${y} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(w,y,_)=>{c(y,'Missing "range" argument');let E;return Number.isInteger(_)&&Math.abs(_)>2**32?E=f(String(_)):typeof _=="bigint"?(E=String(_),(_>2n**32n||_<-(2n**32n))&&(E=f(E)),E+="n"):E=e(_),`The value of "${w}" is out of range. It must be ${y}. Received ${E}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),R1={AbortError:v,aggregateTwoErrors:g(b),hideStackFrames:g,codes:u},R1}function pg(){if(GL)return D1;GL=!0;let{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:d,StringPrototypeTrim:g}=Nr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=fi(),{normalizeEncoding:S}=Vn(),{isAsyncFunction:A,isArrayBufferView:B}=Vn().types,T={};function Z(_e){return _e===(_e|0)}function ie(_e){return _e===_e>>>0}let G=/^[0-7]+$/,ae="must be a 32-bit unsigned integer or an octal string";function U(_e,Oe,Ie){if(typeof _e>"u"&&(_e=Ie),typeof _e=="string"){if(f(G,_e)===null)throw new y(Oe,_e,ae);_e=u(_e,8)}return Ae(_e,Oe),_e}let V=b((_e,Oe,Ie=a,Te=s)=>{if(typeof _e!="number")throw new w(Oe,"number",_e);if(!i(_e))throw new _(Oe,"an integer",_e);if(_e<Ie||_e>Te)throw new _(Oe,`>= ${Ie} && <= ${Te}`,_e)}),ue=b((_e,Oe,Ie=-2147483648,Te=2147483647)=>{if(typeof _e!="number")throw new w(Oe,"number",_e);if(!i(_e))throw new _(Oe,"an integer",_e);if(_e<Ie||_e>Te)throw new _(Oe,`>= ${Ie} && <= ${Te}`,_e)}),Ae=b((_e,Oe,Ie=!1)=>{if(typeof _e!="number")throw new w(Oe,"number",_e);if(!i(_e))throw new _(Oe,"an integer",_e);let Te=Ie?1:0,We=4294967295;if(_e<Te||_e>We)throw new _(Oe,`>= ${Te} && <= ${We}`,_e)});function ve(_e,Oe){if(typeof _e!="string")throw new w(Oe,"string",_e)}function z(_e,Oe,Ie=void 0,Te){if(typeof _e!="number")throw new w(Oe,"number",_e);if(Ie!=null&&_e<Ie||Te!=null&&_e>Te||(Ie!=null||Te!=null)&&o(_e))throw new _(Oe,`${Ie!=null?`>= ${Ie}`:""}${Ie!=null&&Te!=null?" && ":""}${Te!=null?`<= ${Te}`:""}`,_e)}let O=b((_e,Oe,Ie)=>{if(!e(Ie,_e)){let We="must be one of: "+t(n(Ie,qe=>typeof qe=="string"?`'${qe}'`:h(qe)),", ");throw new y(Oe,_e,We)}});function oe(_e,Oe){if(typeof _e!="boolean")throw new w(Oe,"boolean",_e)}function q(_e,Oe,Ie){return _e==null||!c(_e,Oe)?Ie:_e[Oe]}let M=b((_e,Oe,Ie=null)=>{let Te=q(Ie,"allowArray",!1),We=q(Ie,"allowFunction",!1);if(!q(Ie,"nullable",!1)&&_e===null||!Te&&r(_e)||typeof _e!="object"&&(!We||typeof _e!="function"))throw new w(Oe,"Object",_e)}),H=b((_e,Oe)=>{if(_e!=null&&typeof _e!="object"&&typeof _e!="function")throw new w(Oe,"a dictionary",_e)}),j=b((_e,Oe,Ie=0)=>{if(!r(_e))throw new w(Oe,"Array",_e);if(_e.length<Ie){let Te=`must be longer than ${Ie}`;throw new y(Oe,_e,Te)}});function Q(_e,Oe){j(_e,Oe);for(let Ie=0;Ie<_e.length;Ie++)ve(_e[Ie],`${Oe}[${Ie}]`)}function K(_e,Oe){j(_e,Oe);for(let Ie=0;Ie<_e.length;Ie++)oe(_e[Ie],`${Oe}[${Ie}]`)}function ee(_e,Oe){j(_e,Oe);for(let Ie=0;Ie<_e.length;Ie++){let Te=_e[Ie],We=`${Oe}[${Ie}]`;if(Te==null)throw new w(We,"AbortSignal",Te);pe(Te,We)}}function P(_e,Oe="signal"){if(ve(_e,Oe),T[_e]===void 0)throw T[d(_e)]!==void 0?new E(_e+" (signals must use all capital letters)"):new E(_e)}let I=b((_e,Oe="buffer")=>{if(!B(_e))throw new w(Oe,["Buffer","TypedArray","DataView"],_e)});function k(_e,Oe){let Ie=S(Oe),Te=_e.length;if(Ie==="hex"&&Te%2!==0)throw new y("encoding",Oe,`is invalid for data of length ${Te}`)}function ne(_e,Oe="Port",Ie=!0){if(typeof _e!="number"&&typeof _e!="string"||typeof _e=="string"&&g(_e).length===0||+_e!==+_e>>>0||_e>65535||_e===0&&!Ie)throw new v(Oe,_e,Ie);return _e|0}let pe=b((_e,Oe)=>{if(_e!==void 0&&(_e===null||typeof _e!="object"||!("aborted"in _e)))throw new w(Oe,"AbortSignal",_e)}),F=b((_e,Oe)=>{if(typeof _e!="function")throw new w(Oe,"Function",_e)}),R=b((_e,Oe)=>{if(typeof _e!="function"||A(_e))throw new w(Oe,"Function",_e)}),te=b((_e,Oe)=>{if(_e!==void 0)throw new w(Oe,"undefined",_e)});function ge(_e,Oe,Ie){if(!e(Ie,_e))throw new w(Oe,`('${t(Ie,"|")}')`,_e)}let Ce=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function xe(_e,Oe){if(typeof _e>"u"||!f(Ce,_e))throw new y(Oe,_e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function he(_e){if(typeof _e=="string")return xe(_e,"hints"),_e;if(r(_e)){let Oe=_e.length,Ie="";if(Oe===0)return Ie;for(let Te=0;Te<Oe;Te++){let We=_e[Te];xe(We,"hints"),Ie+=We,Te!==Oe-1&&(Ie+=", ")}return Ie}throw new y("hints",_e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return D1={isInt32:Z,isUint32:ie,parseFileMode:U,validateArray:j,validateStringArray:Q,validateBooleanArray:K,validateAbortSignalArray:ee,validateBoolean:oe,validateBuffer:I,validateDictionary:H,validateEncoding:k,validateFunction:F,validateInt32:ue,validateInteger:V,validateNumber:z,validateObject:M,validateOneOf:O,validatePlainFunction:R,validatePort:ne,validateSignalName:P,validateString:ve,validateUint32:Ae,validateUndefined:te,validateUnion:ge,validateAbortSignal:pe,validateLinkHeaderValue:he},D1}function oa(){if(VL)return I1;VL=!0;let{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Nr(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),o=t("nodejs.stream.readable"),s=t("nodejs.stream.writable"),a=t("nodejs.stream.disturbed"),u=t("nodejs.webstream.isClosedPromise"),c=t("nodejs.webstream.controllerErrorFunction");function f(q,M=!1){var H;return!!(q&&typeof q.pipe=="function"&&typeof q.on=="function"&&(!M||typeof q.pause=="function"&&typeof q.resume=="function")&&(!q._writableState||((H=q._readableState)===null||H===void 0?void 0:H.readable)!==!1)&&(!q._writableState||q._readableState))}function h(q){var M;return!!(q&&typeof q.write=="function"&&typeof q.on=="function"&&(!q._readableState||((M=q._writableState)===null||M===void 0?void 0:M.writable)!==!1))}function d(q){return!!(q&&typeof q.pipe=="function"&&q._readableState&&typeof q.on=="function"&&typeof q.write=="function")}function g(q){return q&&(q._readableState||q._writableState||typeof q.write=="function"&&typeof q.on=="function"||typeof q.pipe=="function"&&typeof q.on=="function")}function b(q){return!!(q&&!g(q)&&typeof q.pipeThrough=="function"&&typeof q.getReader=="function"&&typeof q.cancel=="function")}function v(q){return!!(q&&!g(q)&&typeof q.getWriter=="function"&&typeof q.abort=="function")}function w(q){return!!(q&&!g(q)&&typeof q.readable=="object"&&typeof q.writable=="object")}function y(q){return b(q)||v(q)||w(q)}function _(q,M){return q==null?!1:M===!0?typeof q[r]=="function":M===!1?typeof q[e]=="function":typeof q[r]=="function"||typeof q[e]=="function"}function E(q){if(!g(q))return null;let M=q._writableState,H=q._readableState,j=M||H;return!!(q.destroyed||q[n]||j!=null&&j.destroyed)}function S(q){if(!h(q))return null;if(q.writableEnded===!0)return!0;let M=q._writableState;return M!=null&&M.errored?!1:typeof M?.ended!="boolean"?null:M.ended}function A(q,M){if(!h(q))return null;if(q.writableFinished===!0)return!0;let H=q._writableState;return H!=null&&H.errored?!1:typeof H?.finished!="boolean"?null:!!(H.finished||M===!1&&H.ended===!0&&H.length===0)}function B(q){if(!f(q))return null;if(q.readableEnded===!0)return!0;let M=q._readableState;return!M||M.errored?!1:typeof M?.ended!="boolean"?null:M.ended}function T(q,M){if(!f(q))return null;let H=q._readableState;return H!=null&&H.errored?!1:typeof H?.endEmitted!="boolean"?null:!!(H.endEmitted||M===!1&&H.ended===!0&&H.length===0)}function Z(q){return q&&q[o]!=null?q[o]:typeof q?.readable!="boolean"?null:E(q)?!1:f(q)&&q.readable&&!T(q)}function ie(q){return q&&q[s]!=null?q[s]:typeof q?.writable!="boolean"?null:E(q)?!1:h(q)&&q.writable&&!S(q)}function G(q,M){return g(q)?E(q)?!0:!(M?.readable!==!1&&Z(q)||M?.writable!==!1&&ie(q)):null}function ae(q){var M,H;return g(q)?q.writableErrored?q.writableErrored:(M=(H=q._writableState)===null||H===void 0?void 0:H.errored)!==null&&M!==void 0?M:null:null}function U(q){var M,H;return g(q)?q.readableErrored?q.readableErrored:(M=(H=q._readableState)===null||H===void 0?void 0:H.errored)!==null&&M!==void 0?M:null:null}function V(q){if(!g(q))return null;if(typeof q.closed=="boolean")return q.closed;let M=q._writableState,H=q._readableState;return typeof M?.closed=="boolean"||typeof H?.closed=="boolean"?M?.closed||H?.closed:typeof q._closed=="boolean"&&ue(q)?q._closed:null}function ue(q){return typeof q._closed=="boolean"&&typeof q._defaultKeepAlive=="boolean"&&typeof q._removedConnection=="boolean"&&typeof q._removedContLen=="boolean"}function Ae(q){return typeof q._sent100=="boolean"&&ue(q)}function ve(q){var M;return typeof q._consuming=="boolean"&&typeof q._dumped=="boolean"&&((M=q.req)===null||M===void 0?void 0:M.upgradeOrConnect)===void 0}function z(q){if(!g(q))return null;let M=q._writableState,H=q._readableState,j=M||H;return!j&&Ae(q)||!!(j&&j.autoDestroy&&j.emitClose&&j.closed===!1)}function O(q){var M;return!!(q&&((M=q[a])!==null&&M!==void 0?M:q.readableDidRead||q.readableAborted))}function oe(q){var M,H,j,Q,K,ee,P,I,k,ne;return!!(q&&((M=(H=(j=(Q=(K=(ee=q[i])!==null&&ee!==void 0?ee:q.readableErrored)!==null&&K!==void 0?K:q.writableErrored)!==null&&Q!==void 0?Q:(P=q._readableState)===null||P===void 0?void 0:P.errorEmitted)!==null&&j!==void 0?j:(I=q._writableState)===null||I===void 0?void 0:I.errorEmitted)!==null&&H!==void 0?H:(k=q._readableState)===null||k===void 0?void 0:k.errored)!==null&&M!==void 0?M:!((ne=q._writableState)===null||ne===void 0)&&ne.errored))}return I1={isDestroyed:E,kIsDestroyed:n,isDisturbed:O,kIsDisturbed:a,isErrored:oe,kIsErrored:i,isReadable:Z,kIsReadable:o,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:s,isClosed:V,isDuplexNodeStream:d,isFinished:G,isIterable:_,isReadableNodeStream:f,isReadableStream:b,isReadableEnded:B,isReadableFinished:T,isReadableErrored:U,isNodeStream:g,isWebStream:y,isWritable:ie,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:S,isWritableFinished:A,isWritableErrored:ae,isServerRequest:ve,isServerResponse:Ae,willEmitClose:z,isTransformStream:w},I1}function vl(){if(YL)return jb;YL=!0;let r=zr,{AbortError:e,codes:t}=fi(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:o,once:s}=Vn(),{validateAbortSignal:a,validateFunction:u,validateObject:c,validateBoolean:f}=pg(),{Promise:h,PromisePrototypeThen:d,SymbolDispose:g}=Nr(),{isClosed:b,isReadable:v,isReadableNodeStream:w,isReadableStream:y,isReadableFinished:_,isReadableErrored:E,isWritable:S,isWritableNodeStream:A,isWritableStream:B,isWritableFinished:T,isWritableErrored:Z,isNodeStream:ie,willEmitClose:G,kIsClosedPromise:ae}=oa(),U;function V(O){return O.setHeader&&typeof O.abort=="function"}let ue=()=>{};function Ae(O,oe,q){var M,H;if(arguments.length===2?(q=oe,oe=o):oe==null?oe=o:c(oe,"options"),u(q,"callback"),a(oe.signal,"options.signal"),q=s(q),y(O)||B(O))return ve(O,oe,q);if(!ie(O))throw new n("stream",["ReadableStream","WritableStream","Stream"],O);let j=(M=oe.readable)!==null&&M!==void 0?M:w(O),Q=(H=oe.writable)!==null&&H!==void 0?H:A(O),K=O._writableState,ee=O._readableState,P=()=>{O.writable||ne()},I=G(O)&&w(O)===j&&A(O)===Q,k=T(O,!1),ne=()=>{k=!0,O.destroyed&&(I=!1),!(I&&(!O.readable||j))&&(!j||pe)&&q.call(O)},pe=_(O,!1),F=()=>{pe=!0,O.destroyed&&(I=!1),!(I&&(!O.writable||Q))&&(!Q||k)&&q.call(O)},R=_e=>{q.call(O,_e)},te=b(O),ge=()=>{te=!0;let _e=Z(O)||E(O);if(_e&&typeof _e!="boolean")return q.call(O,_e);if(j&&!pe&&w(O,!0)&&!_(O,!1))return q.call(O,new i);if(Q&&!k&&!T(O,!1))return q.call(O,new i);q.call(O)},Ce=()=>{te=!0;let _e=Z(O)||E(O);if(_e&&typeof _e!="boolean")return q.call(O,_e);q.call(O)},xe=()=>{O.req.on("finish",ne)};V(O)?(O.on("complete",ne),I||O.on("abort",ge),O.req?xe():O.on("request",xe)):Q&&!K&&(O.on("end",P),O.on("close",P)),!I&&typeof O.aborted=="boolean"&&O.on("aborted",ge),O.on("end",F),O.on("finish",ne),oe.error!==!1&&O.on("error",R),O.on("close",ge),te?r.nextTick(ge):K!=null&&K.errorEmitted||ee!=null&&ee.errorEmitted?I||r.nextTick(Ce):(!j&&(!I||v(O))&&(k||S(O)===!1)||!Q&&(!I||S(O))&&(pe||v(O)===!1)||ee&&O.req&&O.aborted)&&r.nextTick(Ce);let he=()=>{q=ue,O.removeListener("aborted",ge),O.removeListener("complete",ne),O.removeListener("abort",ge),O.removeListener("request",xe),O.req&&O.req.removeListener("finish",ne),O.removeListener("end",P),O.removeListener("close",P),O.removeListener("finish",ne),O.removeListener("end",F),O.removeListener("error",R),O.removeListener("close",ge)};if(oe.signal&&!te){let _e=()=>{let Oe=q;he(),Oe.call(O,new e(void 0,{cause:oe.signal.reason}))};if(oe.signal.aborted)r.nextTick(_e);else{U=U||Vn().addAbortListener;let Oe=U(oe.signal,_e),Ie=q;q=s((...Te)=>{Oe[g](),Ie.apply(O,Te)})}}return he}function ve(O,oe,q){let M=!1,H=ue;if(oe.signal)if(H=()=>{M=!0,q.call(O,new e(void 0,{cause:oe.signal.reason}))},oe.signal.aborted)r.nextTick(H);else{U=U||Vn().addAbortListener;let Q=U(oe.signal,H),K=q;q=s((...ee)=>{Q[g](),K.apply(O,ee)})}let j=(...Q)=>{M||r.nextTick(()=>q.apply(O,Q))};return d(O[ae].promise,j,j),ue}function z(O,oe){var q;let M=!1;return oe===null&&(oe=o),(q=oe)!==null&&q!==void 0&&q.cleanup&&(f(oe.cleanup,"cleanup"),M=oe.cleanup),new h((H,j)=>{let Q=Ae(O,oe,K=>{M&&Q(),K?j(K):H()})})}return jb=Ae,jb.finished=z,jb}function wh(){if(XL)return O1;XL=!0;let r=zr,{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=fi(),{Symbol:i}=Nr(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:u}=oa(),c=i("kDestroy"),f=i("kConstruct");function h(G,ae,U){G&&(G.stack,ae&&!ae.errored&&(ae.errored=G),U&&!U.errored&&(U.errored=G))}function d(G,ae){let U=this._readableState,V=this._writableState,ue=V||U;return V!=null&&V.destroyed||U!=null&&U.destroyed?(typeof ae=="function"&&ae(),this):(h(G,V,U),V&&(V.destroyed=!0),U&&(U.destroyed=!0),ue.constructed?g(this,G,ae):this.once(c,function(Ae){g(this,e(Ae,G),ae)}),this)}function g(G,ae,U){let V=!1;function ue(Ae){if(V)return;V=!0;let ve=G._readableState,z=G._writableState;h(Ae,z,ve),z&&(z.closed=!0),ve&&(ve.closed=!0),typeof U=="function"&&U(Ae),Ae?r.nextTick(b,G,Ae):r.nextTick(v,G)}try{G._destroy(ae||null,ue)}catch(Ae){ue(Ae)}}function b(G,ae){w(G,ae),v(G)}function v(G){let ae=G._readableState,U=G._writableState;U&&(U.closeEmitted=!0),ae&&(ae.closeEmitted=!0),(U!=null&&U.emitClose||ae!=null&&ae.emitClose)&&G.emit("close")}function w(G,ae){let U=G._readableState,V=G._writableState;V!=null&&V.errorEmitted||U!=null&&U.errorEmitted||(V&&(V.errorEmitted=!0),U&&(U.errorEmitted=!0),G.emit("error",ae))}function y(){let G=this._readableState,ae=this._writableState;G&&(G.constructed=!0,G.closed=!1,G.closeEmitted=!1,G.destroyed=!1,G.errored=null,G.errorEmitted=!1,G.reading=!1,G.ended=G.readable===!1,G.endEmitted=G.readable===!1),ae&&(ae.constructed=!0,ae.destroyed=!1,ae.closed=!1,ae.closeEmitted=!1,ae.errored=null,ae.errorEmitted=!1,ae.finalCalled=!1,ae.prefinished=!1,ae.ended=ae.writable===!1,ae.ending=ae.writable===!1,ae.finished=ae.writable===!1)}function _(G,ae,U){let V=G._readableState,ue=G._writableState;if(ue!=null&&ue.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||ue!=null&&ue.autoDestroy?G.destroy(ae):ae&&(ae.stack,ue&&!ue.errored&&(ue.errored=ae),V&&!V.errored&&(V.errored=ae),U?r.nextTick(w,G,ae):w(G,ae))}function E(G,ae){if(typeof G._construct!="function")return;let U=G._readableState,V=G._writableState;U&&(U.constructed=!1),V&&(V.constructed=!1),G.once(f,ae),!(G.listenerCount(f)>1)&&r.nextTick(S,G)}function S(G){let ae=!1;function U(V){if(ae){_(G,V??new t);return}ae=!0;let ue=G._readableState,Ae=G._writableState,ve=Ae||ue;ue&&(ue.constructed=!0),Ae&&(Ae.constructed=!0),ve.destroyed?G.emit(c,V):V?_(G,V,!0):r.nextTick(A,G)}try{G._construct(V=>{r.nextTick(U,V)})}catch(V){r.nextTick(U,V)}}function A(G){G.emit(f)}function B(G){return G?.setHeader&&typeof G.abort=="function"}function T(G){G.emit("close")}function Z(G,ae){G.emit("error",ae),r.nextTick(T,G)}function ie(G,ae){!G||s(G)||(!ae&&!a(G)&&(ae=new n),u(G)?(G.socket=null,G.destroy(ae)):B(G)?G.abort():B(G.req)?G.req.abort():typeof G.destroy=="function"?G.destroy(ae):typeof G.close=="function"?G.close():ae?r.nextTick(Z,G,ae):r.nextTick(T,G),G.destroyed||(G[o]=!0))}return O1={construct:E,destroyer:ie,destroy:d,undestroy:y,errorOrDestroy:_},O1}function V1(){if(KL)return N1;KL=!0;let{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Nr(),{EventEmitter:t}=ao;function n(o){t.call(this,o)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(o,s){let a=this;function u(v){o.writable&&o.write(v)===!1&&a.pause&&a.pause()}a.on("data",u);function c(){a.readable&&a.resume&&a.resume()}o.on("drain",c),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",h),a.on("close",d));let f=!1;function h(){f||(f=!0,o.end())}function d(){f||(f=!0,typeof o.destroy=="function"&&o.destroy())}function g(v){b(),t.listenerCount(this,"error")===0&&this.emit("error",v)}i(a,"error",g),i(o,"error",g);function b(){a.removeListener("data",u),o.removeListener("drain",c),a.removeListener("end",h),a.removeListener("close",d),a.removeListener("error",g),o.removeListener("error",g),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):r(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return N1={Stream:n,prependListener:i},N1}function zb(){if(ZL)return hg;ZL=!0;let{SymbolDispose:r}=Nr(),{AbortError:e,codes:t}=fi(),{isNodeStream:n,isWebStream:i,kControllerErrorFunction:o}=oa(),s=vl(),{ERR_INVALID_ARG_TYPE:a}=t,u,c=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new a(h,"AbortSignal",f)};return hg.addAbortSignal=function(h,d){if(c(h,"signal"),!n(d)&&!i(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return hg.addAbortSignalNoValidate(h,d)},hg.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;let d=n(h)?()=>{h.destroy(new e(void 0,{cause:f.reason}))}:()=>{h[o](new e(void 0,{cause:f.reason}))};if(f.aborted)d();else{u=u||Vn().addAbortListener;let g=u(f,d);s(h,g[r])}return h},hg}function $W(){if(JL)return k1;JL=!0;let{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Nr(),{Buffer:i}=fn(),{inspect:o}=Vn();return k1=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let u={data:a,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(a){let u={data:a,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=a+u.data;return c}concat(a){if(this.length===0)return i.alloc(0);let u=i.allocUnsafe(a>>>0),c=this.head,f=0;for(;c;)t(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(a,u){let c=this.head.data;if(a<c.length){let f=c.slice(0,a);return this.head.data=c.slice(a),f}return a===c.length?this.shift():u?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[e](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let u="",c=this.head,f=0;do{let h=c.data;if(a>h.length)u+=h,a-=h.length;else{a===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=r(h,0,a),this.head=c,c.data=r(h,a));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(a){let u=i.allocUnsafe(a),c=a,f=this.head,h=0;do{let d=f.data;if(a>d.length)t(u,d,c-a),a-=d.length;else{a===d.length?(t(u,d,c-a),++h,f.next?this.head=f.next:this.head=this.tail=null):(t(u,new n(d.buffer,d.byteOffset,a),c-a),this.head=f,f.data=d.slice(a));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](a,u){return o(this,{...u,depth:0,customInspect:!1})}},k1}function Wb(){if(QL)return L1;QL=!0;let{MathFloor:r,NumberIsInteger:e}=Nr(),{validateInteger:t}=pg(),{ERR_INVALID_ARG_VALUE:n}=fi().codes,i=16*1024,o=16;function s(f,h,d){return f.highWaterMark!=null?f.highWaterMark:h?f[d]:null}function a(f){return f?o:i}function u(f,h){t(h,"value",0),f?o=h:i=h}function c(f,h,d,g){let b=s(h,g,d);if(b!=null){if(!e(b)||b<0){let v=g?`options.${d}`:"options.highWaterMark";throw new n(v,b)}return r(b)}return a(f.objectMode)}return L1={getHighWaterMark:c,getDefaultHighWaterMark:a,setDefaultHighWaterMark:u},L1}function pP(){if(eP)return P1;eP=!0;let r=zr,{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Nr(),{Buffer:i}=fn(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=fi().codes;function a(u,c,f){let h;if(typeof c=="string"||c instanceof i)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let d;if(c&&c[t])d=!0,h=c[t]();else if(c&&c[n])d=!1,h=c[n]();else throw new o("iterable",["Iterable"],c);let g=new u({objectMode:!0,highWaterMark:1,...f}),b=!1;g._read=function(){b||(b=!0,w())},g._destroy=function(y,_){e(v(y),()=>r.nextTick(_,y),E=>r.nextTick(_,E||y))};async function v(y){let _=y!=null,E=typeof h.throw=="function";if(_&&E){let{value:S,done:A}=await h.throw(y);if(await S,A)return}if(typeof h.return=="function"){let{value:S}=await h.return();await S}}async function w(){for(;;){try{let{value:y,done:_}=d?await h.next():h.next();if(_)g.push(null);else{let E=y&&typeof y.then=="function"?await y:y;if(E===null)throw b=!1,new s;if(g.push(E))continue;b=!1}}catch(y){g.destroy(y)}break}}return g}return P1=a,P1}function qb(){if(tP)return B1;tP=!0;let r=zr,{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:d}=Nr();B1=Te,Te.ReadableState=Ie;let{EventEmitter:g}=ao,{Stream:b,prependListener:v}=V1(),{Buffer:w}=fn(),{addAbortSignal:y}=zb(),_=vl(),E=Vn().debuglog("stream",ce=>{E=ce}),S=$W(),A=wh(),{getHighWaterMark:B,getDefaultHighWaterMark:T}=Wb(),{aggregateTwoErrors:Z,codes:{ERR_INVALID_ARG_TYPE:ie,ERR_METHOD_NOT_IMPLEMENTED:G,ERR_OUT_OF_RANGE:ae,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:ue}=fi(),{validateObject:Ae}=pg(),ve=d("kPaused"),{StringDecoder:z}=Fb,O=pP();a(Te.prototype,b.prototype),a(Te,b);let oe=()=>{},{errorOrDestroy:q}=A,M=1,H=2,j=4,Q=8,K=16,ee=32,P=64,I=128,k=256,ne=512,pe=1024,F=2048,R=4096,te=8192,ge=16384,Ce=32768,xe=65536,he=1<<17,_e=1<<18;function Oe(ce){return{enumerable:!1,get(){return((this||Ye).state&ce)!==0},set(we){we?(this||Ye).state|=ce:(this||Ye).state&=~ce}}}o(Ie.prototype,{objectMode:Oe(M),ended:Oe(H),endEmitted:Oe(j),reading:Oe(Q),constructed:Oe(K),sync:Oe(ee),needReadable:Oe(P),emittedReadable:Oe(I),readableListening:Oe(k),resumeScheduled:Oe(ne),errorEmitted:Oe(pe),emitClose:Oe(F),autoDestroy:Oe(R),destroyed:Oe(te),closed:Oe(ge),closeEmitted:Oe(Ce),multiAwaitDrain:Oe(xe),readingMore:Oe(he),dataEmitted:Oe(_e)});function Ie(ce,we,He){typeof He!="boolean"&&(He=we instanceof sa()),(this||Ye).state=F|R|K|ee,ce&&ce.objectMode&&((this||Ye).state|=M),He&&ce&&ce.readableObjectMode&&((this||Ye).state|=M),(this||Ye).highWaterMark=ce?B(this||Ye,ce,"readableHighWaterMark",He):T(!1),(this||Ye).buffer=new S,(this||Ye).length=0,(this||Ye).pipes=[],(this||Ye).flowing=null,(this||Ye)[ve]=null,ce&&ce.emitClose===!1&&((this||Ye).state&=~F),ce&&ce.autoDestroy===!1&&((this||Ye).state&=~R),(this||Ye).errored=null,(this||Ye).defaultEncoding=ce&&ce.defaultEncoding||"utf8",(this||Ye).awaitDrainWriters=null,(this||Ye).decoder=null,(this||Ye).encoding=null,ce&&ce.encoding&&((this||Ye).decoder=new z(ce.encoding),(this||Ye).encoding=ce.encoding)}function Te(ce){if(!((this||Ye)instanceof Te))return new Te(ce);let we=(this||Ye)instanceof sa();(this||Ye)._readableState=new Ie(ce,this||Ye,we),ce&&(typeof ce.read=="function"&&((this||Ye)._read=ce.read),typeof ce.destroy=="function"&&((this||Ye)._destroy=ce.destroy),typeof ce.construct=="function"&&((this||Ye)._construct=ce.construct),ce.signal&&!we&&y(ce.signal,this||Ye)),b.call(this||Ye,ce),A.construct(this||Ye,()=>{(this||Ye)._readableState.needReadable&&D(this||Ye,(this||Ye)._readableState)})}Te.prototype.destroy=A.destroy,Te.prototype._undestroy=A.undestroy,Te.prototype._destroy=function(ce,we){we(ce)},Te.prototype[g.captureRejectionSymbol]=function(ce){this.destroy(ce)},Te.prototype[f]=function(){let ce;return(this||Ye).destroyed||(ce=(this||Ye).readableEnded?null:new ue,this.destroy(ce)),new u((we,He)=>_(this||Ye,$e=>$e&&$e!==ce?He($e):we(null)))},Te.prototype.push=function(ce,we){return We(this||Ye,ce,we,!1)},Te.prototype.unshift=function(ce,we){return We(this||Ye,ce,we,!0)};function We(ce,we,He,$e){E("readableAddChunk",we);let et=ce._readableState,dt;if((et.state&M)===0&&(typeof we=="string"?(He=He||et.defaultEncoding,et.encoding!==He&&($e&&et.encoding?we=w.from(we,He).toString(et.encoding):(we=w.from(we,He),He=""))):we instanceof w?He="":b._isUint8Array(we)?(we=b._uint8ArrayToBuffer(we),He=""):we!=null&&(dt=new ie("chunk",["string","Buffer","Uint8Array"],we))),dt)q(ce,dt);else if(we===null)et.state&=~Q,m(ce,et);else if((et.state&M)!==0||we&&we.length>0)if($e)if((et.state&j)!==0)q(ce,new V);else{if(et.destroyed||et.errored)return!1;qe(ce,et,we,!0)}else if(et.ended)q(ce,new U);else{if(et.destroyed||et.errored)return!1;et.state&=~Q,et.decoder&&!He?(we=et.decoder.write(we),et.objectMode||we.length!==0?qe(ce,et,we,!1):D(ce,et)):qe(ce,et,we,!1)}else $e||(et.state&=~Q,D(ce,et));return!et.ended&&(et.length<et.highWaterMark||et.length===0)}function qe(ce,we,He,$e){we.flowing&&we.length===0&&!we.sync&&ce.listenerCount("data")>0?((we.state&xe)!==0?we.awaitDrainWriters.clear():we.awaitDrainWriters=null,we.dataEmitted=!0,ce.emit("data",He)):(we.length+=we.objectMode?1:He.length,$e?we.buffer.unshift(He):we.buffer.push(He),(we.state&P)!==0&&N(ce)),D(ce,we)}Te.prototype.isPaused=function(){let ce=(this||Ye)._readableState;return ce[ve]===!0||ce.flowing===!1},Te.prototype.setEncoding=function(ce){let we=new z(ce);(this||Ye)._readableState.decoder=we,(this||Ye)._readableState.encoding=(this||Ye)._readableState.decoder.encoding;let He=(this||Ye)._readableState.buffer,$e="";for(let et of He)$e+=we.write(et);return He.clear(),$e!==""&&He.push($e),(this||Ye)._readableState.length=$e.length,this||Ye};let Ge=1073741824;function x(ce){if(ce>Ge)throw new ae("size","<= 1GiB",ce);return ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++,ce}function p(ce,we){return ce<=0||we.length===0&&we.ended?0:(we.state&M)!==0?1:n(ce)?we.flowing&&we.length?we.buffer.first().length:we.length:ce<=we.length?ce:we.ended?we.length:0}Te.prototype.read=function(ce){E("read",ce),ce===void 0?ce=NaN:t(ce)||(ce=i(ce,10));let we=(this||Ye)._readableState,He=ce;if(ce>we.highWaterMark&&(we.highWaterMark=x(ce)),ce!==0&&(we.state&=~I),ce===0&&we.needReadable&&((we.highWaterMark!==0?we.length>=we.highWaterMark:we.length>0)||we.ended))return E("read: emitReadable",we.length,we.ended),we.length===0&&we.ended?Ue(this||Ye):N(this||Ye),null;if(ce=p(ce,we),ce===0&&we.ended)return we.length===0&&Ue(this||Ye),null;let $e=(we.state&P)!==0;if(E("need readable",$e),(we.length===0||we.length-ce<we.highWaterMark)&&($e=!0,E("length less than watermark",$e)),we.ended||we.reading||we.destroyed||we.errored||!we.constructed)$e=!1,E("reading, ended or constructing",$e);else if($e){E("do read"),we.state|=Q|ee,we.length===0&&(we.state|=P);try{this._read(we.highWaterMark)}catch(dt){q(this||Ye,dt)}we.state&=~ee,we.reading||(ce=p(He,we))}let et;return ce>0?et=Fe(ce,we):et=null,et===null?(we.needReadable=we.length<=we.highWaterMark,ce=0):(we.length-=ce,we.multiAwaitDrain?we.awaitDrainWriters.clear():we.awaitDrainWriters=null),we.length===0&&(we.ended||(we.needReadable=!0),He!==ce&&we.ended&&Ue(this||Ye)),et!==null&&!we.errorEmitted&&!we.closeEmitted&&(we.dataEmitted=!0,this.emit("data",et)),et};function m(ce,we){if(E("onEofChunk"),!we.ended){if(we.decoder){let He=we.decoder.end();He&&He.length&&(we.buffer.push(He),we.length+=we.objectMode?1:He.length)}we.ended=!0,we.sync?N(ce):(we.needReadable=!1,we.emittedReadable=!0,re(ce))}}function N(ce){let we=ce._readableState;E("emitReadable",we.needReadable,we.emittedReadable),we.needReadable=!1,we.emittedReadable||(E("emitReadable",we.flowing),we.emittedReadable=!0,r.nextTick(re,ce))}function re(ce){let we=ce._readableState;E("emitReadable_",we.destroyed,we.length,we.ended),!we.destroyed&&!we.errored&&(we.length||we.ended)&&(ce.emit("readable"),we.emittedReadable=!1),we.needReadable=!we.flowing&&!we.ended&&we.length<=we.highWaterMark,Pe(ce)}function D(ce,we){!we.readingMore&&we.constructed&&(we.readingMore=!0,r.nextTick(fe,ce,we))}function fe(ce,we){for(;!we.reading&&!we.ended&&(we.length<we.highWaterMark||we.flowing&&we.length===0);){let He=we.length;if(E("maybeReadMore read 0"),ce.read(0),He===we.length)break}we.readingMore=!1}Te.prototype._read=function(ce){throw new G("_read()")},Te.prototype.pipe=function(ce,we){let He=this||Ye,$e=(this||Ye)._readableState;$e.pipes.length===1&&($e.multiAwaitDrain||($e.multiAwaitDrain=!0,$e.awaitDrainWriters=new c($e.awaitDrainWriters?[$e.awaitDrainWriters]:[]))),$e.pipes.push(ce),E("pipe count=%d opts=%j",$e.pipes.length,we);let dt=(!we||we.end!==!1)&&ce!==r.stdout&&ce!==r.stderr?Et:Zr;$e.endEmitted?r.nextTick(dt):He.once("end",dt),ce.on("unpipe",Rt);function Rt(Jr,Qr){E("onunpipe"),Jr===He&&Qr&&Qr.hasUnpiped===!1&&(Qr.hasUnpiped=!0,qn())}function Et(){E("onend"),ce.end()}let ar,_i=!1;function qn(){E("cleanup"),ce.removeListener("close",Wt),ce.removeListener("finish",Yt),ar&&ce.removeListener("drain",ar),ce.removeListener("error",yr),ce.removeListener("unpipe",Rt),He.removeListener("end",Et),He.removeListener("end",Zr),He.removeListener("data",Dr),_i=!0,ar&&$e.awaitDrainWriters&&(!ce._writableState||ce._writableState.needDrain)&&ar()}function Ht(){_i||($e.pipes.length===1&&$e.pipes[0]===ce?(E("false write response, pause",0),$e.awaitDrainWriters=ce,$e.multiAwaitDrain=!1):$e.pipes.length>1&&$e.pipes.includes(ce)&&(E("false write response, pause",$e.awaitDrainWriters.size),$e.awaitDrainWriters.add(ce)),He.pause()),ar||(ar=be(He,ce),ce.on("drain",ar))}He.on("data",Dr);function Dr(Jr){E("ondata");let Qr=ce.write(Jr);E("dest.write",Qr),Qr===!1&&Ht()}function yr(Jr){if(E("onerror",Jr),Zr(),ce.removeListener("error",yr),ce.listenerCount("error")===0){let Qr=ce._writableState||ce._readableState;Qr&&!Qr.errorEmitted?q(ce,Jr):ce.emit("error",Jr)}}v(ce,"error",yr);function Wt(){ce.removeListener("finish",Yt),Zr()}ce.once("close",Wt);function Yt(){E("onfinish"),ce.removeListener("close",Wt),Zr()}ce.once("finish",Yt);function Zr(){E("unpipe"),He.unpipe(ce)}return ce.emit("pipe",He),ce.writableNeedDrain===!0?Ht():$e.flowing||(E("pipe resume"),He.resume()),ce};function be(ce,we){return function(){let $e=ce._readableState;$e.awaitDrainWriters===we?(E("pipeOnDrain",1),$e.awaitDrainWriters=null):$e.multiAwaitDrain&&(E("pipeOnDrain",$e.awaitDrainWriters.size),$e.awaitDrainWriters.delete(we)),(!$e.awaitDrainWriters||$e.awaitDrainWriters.size===0)&&ce.listenerCount("data")&&ce.resume()}}Te.prototype.unpipe=function(ce){let we=(this||Ye)._readableState,He={hasUnpiped:!1};if(we.pipes.length===0)return this||Ye;if(!ce){let et=we.pipes;we.pipes=[],this.pause();for(let dt=0;dt<et.length;dt++)et[dt].emit("unpipe",this||Ye,{hasUnpiped:!1});return this||Ye}let $e=e(we.pipes,ce);return $e===-1?this||Ye:(we.pipes.splice($e,1),we.pipes.length===0&&this.pause(),ce.emit("unpipe",this||Ye,He),this||Ye)},Te.prototype.on=function(ce,we){let He=b.prototype.on.call(this||Ye,ce,we),$e=(this||Ye)._readableState;return ce==="data"?($e.readableListening=this.listenerCount("readable")>0,$e.flowing!==!1&&this.resume()):ce==="readable"&&!$e.endEmitted&&!$e.readableListening&&($e.readableListening=$e.needReadable=!0,$e.flowing=!1,$e.emittedReadable=!1,E("on readable",$e.length,$e.reading),$e.length?N(this||Ye):$e.reading||r.nextTick(Y,this||Ye)),He},Te.prototype.addListener=Te.prototype.on,Te.prototype.removeListener=function(ce,we){let He=b.prototype.removeListener.call(this||Ye,ce,we);return ce==="readable"&&r.nextTick(Se,this||Ye),He},Te.prototype.off=Te.prototype.removeListener,Te.prototype.removeAllListeners=function(ce){let we=b.prototype.removeAllListeners.apply(this||Ye,arguments);return(ce==="readable"||ce===void 0)&&r.nextTick(Se,this||Ye),we};function Se(ce){let we=ce._readableState;we.readableListening=ce.listenerCount("readable")>0,we.resumeScheduled&&we[ve]===!1?we.flowing=!0:ce.listenerCount("data")>0?ce.resume():we.readableListening||(we.flowing=null)}function Y(ce){E("readable nexttick read 0"),ce.read(0)}Te.prototype.resume=function(){let ce=(this||Ye)._readableState;return ce.flowing||(E("resume"),ce.flowing=!ce.readableListening,me(this||Ye,ce)),ce[ve]=!1,this||Ye};function me(ce,we){we.resumeScheduled||(we.resumeScheduled=!0,r.nextTick($,ce,we))}function $(ce,we){E("resume",we.reading),we.reading||ce.read(0),we.resumeScheduled=!1,ce.emit("resume"),Pe(ce),we.flowing&&!we.reading&&ce.read(0)}Te.prototype.pause=function(){return E("call pause flowing=%j",(this||Ye)._readableState.flowing),(this||Ye)._readableState.flowing!==!1&&(E("pause"),(this||Ye)._readableState.flowing=!1,this.emit("pause")),(this||Ye)._readableState[ve]=!0,this||Ye};function Pe(ce){let we=ce._readableState;for(E("flow",we.flowing);we.flowing&&ce.read()!==null;);}Te.prototype.wrap=function(ce){let we=!1;ce.on("data",$e=>{!this.push($e)&&ce.pause&&(we=!0,ce.pause())}),ce.on("end",()=>{this.push(null)}),ce.on("error",$e=>{q(this||Ye,$e)}),ce.on("close",()=>{this.destroy()}),ce.on("destroy",()=>{this.destroy()}),(this||Ye)._read=()=>{we&&ce.resume&&(we=!1,ce.resume())};let He=s(ce);for(let $e=1;$e<He.length;$e++){let et=He[$e];(this||Ye)[et]===void 0&&typeof ce[et]=="function"&&((this||Ye)[et]=ce[et].bind(ce))}return this||Ye},Te.prototype[h]=function(){return ze(this||Ye)},Te.prototype.iterator=function(ce){return ce!==void 0&&Ae(ce,"options"),ze(this||Ye,ce)};function ze(ce,we){typeof ce.read!="function"&&(ce=Te.wrap(ce,{objectMode:!0}));let He=C(ce,we);return He.stream=ce,He}async function*C(ce,we){let He=oe;function $e(Rt){(this||Ye)===ce?(He(),He=oe):He=Rt}ce.on("readable",$e);let et,dt=_(ce,{writable:!1},Rt=>{et=Rt?Z(et,Rt):null,He(),He=oe});try{for(;;){let Rt=ce.destroyed?null:ce.read();if(Rt!==null)yield Rt;else{if(et)throw et;if(et===null)return;await new u($e)}}}catch(Rt){throw et=Z(et,Rt),et}finally{(et||we?.destroyOnReturn!==!1)&&(et===void 0||ce._readableState.autoDestroy)?A.destroyer(ce,null):(ce.off("readable",$e),dt())}}o(Te.prototype,{readable:{__proto__:null,get(){let ce=(this||Ye)._readableState;return!!ce&&ce.readable!==!1&&!ce.destroyed&&!ce.errorEmitted&&!ce.endEmitted},set(ce){(this||Ye)._readableState&&((this||Ye)._readableState.readable=!!ce)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return(this||Ye)._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||Ye)._readableState.readable!==!1&&((this||Ye)._readableState.destroyed||(this||Ye)._readableState.errored)&&!(this||Ye)._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return(this||Ye)._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return(this||Ye)._readableState&&(this||Ye)._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return(this||Ye)._readableState.flowing},set:function(ce){(this||Ye)._readableState&&((this||Ye)._readableState.flowing=ce)}},readableLength:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState?(this||Ye)._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState?(this||Ye)._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState?(this||Ye)._readableState.errored:null}},closed:{__proto__:null,get(){return(this||Ye)._readableState?(this||Ye)._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState?(this||Ye)._readableState.destroyed:!1},set(ce){(this||Ye)._readableState&&((this||Ye)._readableState.destroyed=ce)}},readableEnded:{__proto__:null,enumerable:!1,get(){return(this||Ye)._readableState?(this||Ye)._readableState.endEmitted:!1}}}),o(Ie.prototype,{pipesCount:{__proto__:null,get(){return(this||Ye).pipes.length}},paused:{__proto__:null,get(){return(this||Ye)[ve]!==!1},set(ce){(this||Ye)[ve]=!!ce}}}),Te._fromList=Fe;function Fe(ce,we){if(we.length===0)return null;let He;return we.objectMode?He=we.buffer.shift():!ce||ce>=we.length?(we.decoder?He=we.buffer.join(""):we.buffer.length===1?He=we.buffer.first():He=we.buffer.concat(we.length),we.buffer.clear()):He=we.buffer.consume(ce,we.decoder),He}function Ue(ce){let we=ce._readableState;E("endReadable",we.endEmitted),we.endEmitted||(we.ended=!0,r.nextTick(de,we,ce))}function de(ce,we){if(E("endReadableNT",ce.endEmitted,ce.length),!ce.errored&&!ce.closeEmitted&&!ce.endEmitted&&ce.length===0){if(ce.endEmitted=!0,we.emit("end"),we.writable&&we.allowHalfOpen===!1)r.nextTick(De,we);else if(ce.autoDestroy){let He=we._writableState;(!He||He.autoDestroy&&(He.finished||He.writable===!1))&&we.destroy()}}}function De(ce){ce.writable&&!ce.writableEnded&&!ce.destroyed&&ce.end()}Te.from=function(ce,we){return O(Te,ce,we)};let Me;function tt(){return Me===void 0&&(Me={}),Me}return Te.fromWeb=function(ce,we){return tt().newStreamReadableFromReadableStream(ce,we)},Te.toWeb=function(ce,we){return tt().newReadableStreamFromStreamReadable(ce,we)},Te.wrap=function(ce,we){var He,$e;return new Te({objectMode:(He=($e=ce.readableObjectMode)!==null&&$e!==void 0?$e:ce.objectMode)!==null&&He!==void 0?He:!0,...we,destroy(et,dt){A.destroyer(ce,et),dt(et)}}).wrap(ce)},B1}function Y1(){if(rP)return M1;rP=!0;let r=zr,{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:u,SymbolHasInstance:c}=Nr();M1=Ae,Ae.WritableState=V;let{EventEmitter:f}=ao,h=V1().Stream,{Buffer:d}=fn(),g=wh(),{addAbortSignal:b}=zb(),{getHighWaterMark:v,getDefaultHighWaterMark:w}=Wb(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:B,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:Z,ERR_UNKNOWN_ENCODING:ie}=fi().codes,{errorOrDestroy:G}=g;s(Ae.prototype,h.prototype),s(Ae,h);function ae(){}let U=u("kOnFinished");function V(R,te,ge){typeof ge!="boolean"&&(ge=te instanceof sa()),(this||Je).objectMode=!!(R&&R.objectMode),ge&&((this||Je).objectMode=(this||Je).objectMode||!!(R&&R.writableObjectMode)),(this||Je).highWaterMark=R?v(this||Je,R,"writableHighWaterMark",ge):w(!1),(this||Je).finalCalled=!1,(this||Je).needDrain=!1,(this||Je).ending=!1,(this||Je).ended=!1,(this||Je).finished=!1,(this||Je).destroyed=!1;let Ce=!!(R&&R.decodeStrings===!1);(this||Je).decodeStrings=!Ce,(this||Je).defaultEncoding=R&&R.defaultEncoding||"utf8",(this||Je).length=0,(this||Je).writing=!1,(this||Je).corked=0,(this||Je).sync=!0,(this||Je).bufferProcessing=!1,(this||Je).onwrite=q.bind(void 0,te),(this||Je).writecb=null,(this||Je).writelen=0,(this||Je).afterWriteTickInfo=null,ue(this||Je),(this||Je).pendingcb=0,(this||Je).constructed=!0,(this||Je).prefinished=!1,(this||Je).errorEmitted=!1,(this||Je).emitClose=!R||R.emitClose!==!1,(this||Je).autoDestroy=!R||R.autoDestroy!==!1,(this||Je).errored=null,(this||Je).closed=!1,(this||Je).closeEmitted=!1,(this||Je)[U]=[]}function ue(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}V.prototype.getBuffer=function(){return e((this||Je).buffered,(this||Je).bufferedIndex)},i(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return(this||Je).buffered.length-(this||Je).bufferedIndex}});function Ae(R){let te=(this||Je)instanceof sa();if(!te&&!n(Ae,this||Je))return new Ae(R);(this||Je)._writableState=new V(R,this||Je,te),R&&(typeof R.write=="function"&&((this||Je)._write=R.write),typeof R.writev=="function"&&((this||Je)._writev=R.writev),typeof R.destroy=="function"&&((this||Je)._destroy=R.destroy),typeof R.final=="function"&&((this||Je)._final=R.final),typeof R.construct=="function"&&((this||Je)._construct=R.construct),R.signal&&b(R.signal,this||Je)),h.call(this||Je,R),g.construct(this||Je,()=>{let ge=(this||Je)._writableState;ge.writing||Q(this||Je,ge),I(this||Je,ge)})}i(Ae,c,{__proto__:null,value:function(R){return n(this||Je,R)?!0:(this||Je)!==Ae?!1:R&&R._writableState instanceof V}}),Ae.prototype.pipe=function(){G(this||Je,new S)};function ve(R,te,ge,Ce){let xe=R._writableState;if(typeof ge=="function")Ce=ge,ge=xe.defaultEncoding;else{if(!ge)ge=xe.defaultEncoding;else if(ge!=="buffer"&&!d.isEncoding(ge))throw new ie(ge);typeof Ce!="function"&&(Ce=ae)}if(te===null)throw new T;if(!xe.objectMode)if(typeof te=="string")xe.decodeStrings!==!1&&(te=d.from(te,ge),ge="buffer");else if(te instanceof d)ge="buffer";else if(h._isUint8Array(te))te=h._uint8ArrayToBuffer(te),ge="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],te);let he;return xe.ending?he=new Z:xe.destroyed&&(he=new A("write")),he?(r.nextTick(Ce,he),G(R,he,!0),he):(xe.pendingcb++,z(R,xe,te,ge,Ce))}Ae.prototype.write=function(R,te,ge){return ve(this||Je,R,te,ge)===!0},Ae.prototype.cork=function(){(this||Je)._writableState.corked++},Ae.prototype.uncork=function(){let R=(this||Je)._writableState;R.corked&&(R.corked--,R.writing||Q(this||Je,R))},Ae.prototype.setDefaultEncoding=function(te){if(typeof te=="string"&&(te=a(te)),!d.isEncoding(te))throw new ie(te);return(this||Je)._writableState.defaultEncoding=te,this||Je};function z(R,te,ge,Ce,xe){let he=te.objectMode?1:ge.length;te.length+=he;let _e=te.length<te.highWaterMark;return _e||(te.needDrain=!0),te.writing||te.corked||te.errored||!te.constructed?(te.buffered.push({chunk:ge,encoding:Ce,callback:xe}),te.allBuffers&&Ce!=="buffer"&&(te.allBuffers=!1),te.allNoop&&xe!==ae&&(te.allNoop=!1)):(te.writelen=he,te.writecb=xe,te.writing=!0,te.sync=!0,R._write(ge,Ce,te.onwrite),te.sync=!1),_e&&!te.errored&&!te.destroyed}function O(R,te,ge,Ce,xe,he,_e){te.writelen=Ce,te.writecb=_e,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new A("write")):ge?R._writev(xe,te.onwrite):R._write(xe,he,te.onwrite),te.sync=!1}function oe(R,te,ge,Ce){--te.pendingcb,Ce(ge),j(te),G(R,ge)}function q(R,te){let ge=R._writableState,Ce=ge.sync,xe=ge.writecb;if(typeof xe!="function"){G(R,new E);return}ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0,te?(te.stack,ge.errored||(ge.errored=te),R._readableState&&!R._readableState.errored&&(R._readableState.errored=te),Ce?r.nextTick(oe,R,ge,te,xe):oe(R,ge,te,xe)):(ge.buffered.length>ge.bufferedIndex&&Q(R,ge),Ce?ge.afterWriteTickInfo!==null&&ge.afterWriteTickInfo.cb===xe?ge.afterWriteTickInfo.count++:(ge.afterWriteTickInfo={count:1,cb:xe,stream:R,state:ge},r.nextTick(M,ge.afterWriteTickInfo)):H(R,ge,1,xe))}function M({stream:R,state:te,count:ge,cb:Ce}){return te.afterWriteTickInfo=null,H(R,te,ge,Ce)}function H(R,te,ge,Ce){for(!te.ending&&!R.destroyed&&te.length===0&&te.needDrain&&(te.needDrain=!1,R.emit("drain"));ge-- >0;)te.pendingcb--,Ce();te.destroyed&&j(te),I(R,te)}function j(R){if(R.writing)return;for(let xe=R.bufferedIndex;xe<R.buffered.length;++xe){var te;let{chunk:he,callback:_e}=R.buffered[xe],Oe=R.objectMode?1:he.length;R.length-=Oe,_e((te=R.errored)!==null&&te!==void 0?te:new A("write"))}let ge=R[U].splice(0);for(let xe=0;xe<ge.length;xe++){var Ce;ge[xe]((Ce=R.errored)!==null&&Ce!==void 0?Ce:new A("end"))}ue(R)}function Q(R,te){if(te.corked||te.bufferProcessing||te.destroyed||!te.constructed)return;let{buffered:ge,bufferedIndex:Ce,objectMode:xe}=te,he=ge.length-Ce;if(!he)return;let _e=Ce;if(te.bufferProcessing=!0,he>1&&R._writev){te.pendingcb-=he-1;let Oe=te.allNoop?ae:Te=>{for(let We=_e;We<ge.length;++We)ge[We].callback(Te)},Ie=te.allNoop&&_e===0?ge:e(ge,_e);Ie.allBuffers=te.allBuffers,O(R,te,!0,te.length,Ie,"",Oe),ue(te)}else{do{let{chunk:Oe,encoding:Ie,callback:Te}=ge[_e];ge[_e++]=null;let We=xe?1:Oe.length;O(R,te,!1,We,Oe,Ie,Te)}while(_e<ge.length&&!te.writing);_e===ge.length?ue(te):_e>256?(ge.splice(0,_e),te.bufferedIndex=0):te.bufferedIndex=_e}te.bufferProcessing=!1}Ae.prototype._write=function(R,te,ge){if((this||Je)._writev)this._writev([{chunk:R,encoding:te}],ge);else throw new _("_write()")},Ae.prototype._writev=null,Ae.prototype.end=function(R,te,ge){let Ce=(this||Je)._writableState;typeof R=="function"?(ge=R,R=null,te=null):typeof te=="function"&&(ge=te,te=null);let xe;if(R!=null){let he=ve(this||Je,R,te);he instanceof t&&(xe=he)}return Ce.corked&&(Ce.corked=1,this.uncork()),xe||(!Ce.errored&&!Ce.ending?(Ce.ending=!0,I(this||Je,Ce,!0),Ce.ended=!0):Ce.finished?xe=new B("end"):Ce.destroyed&&(xe=new A("end"))),typeof ge=="function"&&(xe||Ce.finished?r.nextTick(ge,xe):Ce[U].push(ge)),this||Je};function K(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function ee(R,te){let ge=!1;function Ce(xe){if(ge){G(R,xe??E());return}if(ge=!0,te.pendingcb--,xe){let he=te[U].splice(0);for(let _e=0;_e<he.length;_e++)he[_e](xe);G(R,xe,te.sync)}else K(te)&&(te.prefinished=!0,R.emit("prefinish"),te.pendingcb++,r.nextTick(k,R,te))}te.sync=!0,te.pendingcb++;try{R._final(Ce)}catch(xe){Ce(xe)}te.sync=!1}function P(R,te){!te.prefinished&&!te.finalCalled&&(typeof R._final=="function"&&!te.destroyed?(te.finalCalled=!0,ee(R,te)):(te.prefinished=!0,R.emit("prefinish")))}function I(R,te,ge){K(te)&&(P(R,te),te.pendingcb===0&&(ge?(te.pendingcb++,r.nextTick((Ce,xe)=>{K(xe)?k(Ce,xe):xe.pendingcb--},R,te)):K(te)&&(te.pendingcb++,k(R,te))))}function k(R,te){te.pendingcb--,te.finished=!0;let ge=te[U].splice(0);for(let Ce=0;Ce<ge.length;Ce++)ge[Ce]();if(R.emit("finish"),te.autoDestroy){let Ce=R._readableState;(!Ce||Ce.autoDestroy&&(Ce.endEmitted||Ce.readable===!1))&&R.destroy()}}o(Ae.prototype,{closed:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.closed:!1}},destroyed:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.destroyed:!1},set(R){(this||Je)._writableState&&((this||Je)._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=(this||Je)._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){(this||Je)._writableState&&((this||Je)._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return(this||Je)._writableState&&(this||Je)._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=(this||Je)._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return(this||Je)._writableState&&(this||Je)._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return(this||Je)._writableState?(this||Je)._writableState.corked:0}},writableLength:{__proto__:null,get(){return(this||Je)._writableState&&(this||Je)._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return(this||Je)._writableState?(this||Je)._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||Je)._writableState.writable!==!1&&((this||Je)._writableState.destroyed||(this||Je)._writableState.errored)&&!(this||Je)._writableState.finished)}}});let ne=g.destroy;Ae.prototype.destroy=function(R,te){let ge=(this||Je)._writableState;return!ge.destroyed&&(ge.bufferedIndex<ge.buffered.length||ge[U].length)&&r.nextTick(j,ge),ne.call(this||Je,R,te),this||Je},Ae.prototype._undestroy=g.undestroy,Ae.prototype._destroy=function(R,te){te(R)},Ae.prototype[f.captureRejectionSymbol]=function(R){this.destroy(R)};let pe;function F(){return pe===void 0&&(pe={}),pe}return Ae.fromWeb=function(R,te){return F().newStreamWritableFromWritableStream(R,te)},Ae.toWeb=function(R){return F().newWritableStreamFromStreamWritable(R)},M1}function zW(){if(nP)return F1;nP=!0;let r=zr,e=fn(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=oa(),h=vl(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:b}}=fi(),{destroyer:v}=wh(),w=sa(),y=qb(),_=Y1(),{createDeferredPromise:E}=Vn(),S=pP(),A=globalThis.Blob||e.Blob,B=typeof A<"u"?function(V){return V instanceof A}:function(V){return!1},T=globalThis.AbortController||dg().AbortController,{FunctionPrototypeCall:Z}=Nr();class ie extends w{constructor(V){super(V),V?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),V?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}F1=function U(V,ue){if(u(V))return V;if(s(V))return ae({readable:V});if(a(V))return ae({writable:V});if(o(V))return ae({writable:!1,readable:!1});if(c(V))return ae({readable:y.fromWeb(V)});if(f(V))return ae({writable:_.fromWeb(V)});if(typeof V=="function"){let{value:ve,write:z,final:O,destroy:oe}=G(V);if(i(ve))return S(ie,ve,{objectMode:!0,write:z,final:O,destroy:oe});let q=ve?.then;if(typeof q=="function"){let M,H=Z(q,ve,j=>{if(j!=null)throw new b("nully","body",j)},j=>{v(M,j)});return M=new ie({objectMode:!0,readable:!1,write:z,final(j){O(async()=>{try{await H,r.nextTick(j,null)}catch(Q){r.nextTick(j,Q)}})},destroy:oe})}throw new b("Iterable, AsyncIterable or AsyncFunction",ue,ve)}if(B(V))return U(V.arrayBuffer());if(i(V))return S(ie,V,{objectMode:!0,writable:!1});if(c(V?.readable)&&f(V?.writable))return ie.fromWeb(V);if(typeof V?.writable=="object"||typeof V?.readable=="object"){let ve=V!=null&&V.readable?s(V?.readable)?V?.readable:U(V.readable):void 0,z=V!=null&&V.writable?a(V?.writable)?V?.writable:U(V.writable):void 0;return ae({readable:ve,writable:z})}let Ae=V?.then;if(typeof Ae=="function"){let ve;return Z(Ae,V,z=>{z!=null&&ve.push(z),ve.push(null)},z=>{v(ve,z)}),ve=new ie({objectMode:!0,writable:!1,read(){}})}throw new g(ue,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function G(U){let{promise:V,resolve:ue}=E(),Ae=new T,ve=Ae.signal;return{value:U((async function*(){for(;;){let O=V;V=null;let{chunk:oe,done:q,cb:M}=await O;if(r.nextTick(M),q)return;if(ve.aborted)throw new d(void 0,{cause:ve.reason});({promise:V,resolve:ue}=E()),yield oe}})(),{signal:ve}),write(O,oe,q){let M=ue;ue=null,M({chunk:O,done:!1,cb:q})},final(O){let oe=ue;ue=null,oe({done:!0,cb:O})},destroy(O,oe){Ae.abort(),oe(O)}}}function ae(U){let V=U.readable&&typeof U.readable.read!="function"?y.wrap(U.readable):U.readable,ue=U.writable,Ae=!!t(V),ve=!!n(ue),z,O,oe,q,M;function H(j){let Q=q;q=null,Q?Q(j):j&&M.destroy(j)}return M=new ie({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(ue!=null&&ue.writableObjectMode),readable:Ae,writable:ve}),ve&&(h(ue,j=>{ve=!1,j&&v(V,j),H(j)}),M._write=function(j,Q,K){ue.write(j,Q)?K():z=K},M._final=function(j){ue.end(),O=j},ue.on("drain",function(){if(z){let j=z;z=null,j()}}),ue.on("finish",function(){if(O){let j=O;O=null,j()}})),Ae&&(h(V,j=>{Ae=!1,j&&v(V,j),H(j)}),V.on("readable",function(){if(oe){let j=oe;oe=null,j()}}),V.on("end",function(){M.push(null)}),M._read=function(){for(;;){let j=V.read();if(j===null){oe=M._read;return}if(!M.push(j))return}}),M._destroy=function(j,Q){!j&&q!==null&&(j=new d),oe=null,z=null,O=null,q===null?Q(j):(q=Q,v(ue,j),v(V,j))},M}return F1}function sa(){if(iP)return U1;iP=!0;let{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Nr();U1=s;let i=qb(),o=Y1();n(s.prototype,i.prototype),n(s,i);{let f=t(o.prototype);for(let h=0;h<f.length;h++){let d=f[h];s.prototype[d]||(s.prototype[d]=o.prototype[d])}}function s(f){if(!(this instanceof s))return new s(f);i.call(this,f),o.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(s.prototype,{writable:{__proto__:null,...e(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(o.prototype,"writableLength")},writableFinished:{__proto__:null,...e(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let a;function u(){return a===void 0&&(a={}),a}s.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},s.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return s.from=function(f){return c||(c=zW()),c(f,"body")},U1}function gP(){if(sP)return j1;sP=!0;let{ObjectSetPrototypeOf:r,Symbol:e}=Nr();j1=s;let{ERR_METHOD_NOT_IMPLEMENTED:t}=fi().codes,n=sa(),{getHighWaterMark:i}=Wb();r(s.prototype,n.prototype),r(s,n);let o=e("kCallback");function s(c){if(!(this instanceof s))return new s(c);let f=c?i(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),n.call(this,c),this._readableState.sync=!1,this[o]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function a(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(c,f,h){throw new t("_transform()")},s.prototype._write=function(c,f,h){let d=this._readableState,g=this._writableState,b=d.length;this._transform(c,f,(v,w)=>{if(v){h(v);return}w!=null&&this.push(w),g.ended||b===d.length||d.length<d.highWaterMark?h():this[o]=h})},s.prototype._read=function(){if(this[o]){let c=this[o];this[o]=null,c()}},j1}function mP(){if(oP)return $1;oP=!0;let{ObjectSetPrototypeOf:r}=Nr();$1=t;let e=gP();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,o){o(null,n)},$1}function X1(){if(aP)return z1;aP=!0;let r=zr,{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=Nr(),o=vl(),{once:s}=Vn(),a=wh(),u=sa(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:v}=fi(),{validateFunction:w,validateAbortSignal:y}=pg(),{isIterable:_,isReadable:E,isReadableNodeStream:S,isNodeStream:A,isTransformStream:B,isWebStream:T,isReadableStream:Z,isReadableFinished:ie}=oa(),G=globalThis.AbortController||dg().AbortController,ae,U,V;function ue(j,Q,K){let ee=!1;j.on("close",()=>{ee=!0});let P=o(j,{readable:Q,writable:K},I=>{ee=!I});return{destroy:I=>{ee||(ee=!0,a.destroyer(j,I||new g("pipe")))},cleanup:P}}function Ae(j){return w(j[j.length-1],"streams[stream.length - 1]"),j.pop()}function ve(j){if(_(j))return j;if(S(j))return z(j);throw new f("val",["Readable","Iterable","AsyncIterable"],j)}async function*z(j){U||(U=qb()),yield*U.prototype[n].call(j)}async function O(j,Q,K,{end:ee}){let P,I=null,k=F=>{if(F&&(P=F),I){let R=I;I=null,R()}},ne=()=>new t((F,R)=>{P?R(P):I=()=>{P?R(P):F()}});Q.on("drain",k);let pe=o(Q,{readable:!1},k);try{Q.writableNeedDrain&&await ne();for await(let F of j)Q.write(F)||await ne();ee&&(Q.end(),await ne()),K()}catch(F){K(P!==F?c(P,F):F)}finally{pe(),Q.off("drain",k)}}async function oe(j,Q,K,{end:ee}){B(Q)&&(Q=Q.writable);let P=Q.getWriter();try{for await(let I of j)await P.ready,P.write(I).catch(()=>{});await P.ready,ee&&await P.close(),K()}catch(I){try{await P.abort(I),K(I)}catch(k){K(k)}}}function q(...j){return M(j,s(Ae(j)))}function M(j,Q,K){if(j.length===1&&e(j[0])&&(j=j[0]),j.length<2)throw new d("streams");let ee=new G,P=ee.signal,I=K?.signal,k=[];y(I,"options.signal");function ne(){xe(new v)}V=V||Vn().addAbortListener;let pe;I&&(pe=V(I,ne));let F,R,te=[],ge=0;function Ce(Ie){xe(Ie,--ge===0)}function xe(Ie,Te){var We;if(Ie&&(!F||F.code==="ERR_STREAM_PREMATURE_CLOSE")&&(F=Ie),!(!F&&!Te)){for(;te.length;)te.shift()(F);(We=pe)===null||We===void 0||We[i](),ee.abort(),Te&&(F||k.forEach(qe=>qe()),r.nextTick(Q,F,R))}}let he;for(let Ie=0;Ie<j.length;Ie++){let Te=j[Ie],We=Ie<j.length-1,qe=Ie>0,Ge=We||K?.end!==!1,x=Ie===j.length-1;if(A(Te)){let p=function(m){m&&m.name!=="AbortError"&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ce(m)};if(Ge){let{destroy:m,cleanup:N}=ue(Te,We,qe);te.push(m),E(Te)&&x&&k.push(N)}Te.on("error",p),E(Te)&&x&&k.push(()=>{Te.removeListener("error",p)})}if(Ie===0)if(typeof Te=="function"){if(he=Te({signal:P}),!_(he))throw new h("Iterable, AsyncIterable or Stream","source",he)}else _(Te)||S(Te)||B(Te)?he=Te:he=u.from(Te);else if(typeof Te=="function"){if(B(he)){var _e;he=ve((_e=he)===null||_e===void 0?void 0:_e.readable)}else he=ve(he);if(he=Te(he,{signal:P}),We){if(!_(he,!0))throw new h("AsyncIterable",`transform[${Ie-1}]`,he)}else{var Oe;ae||(ae=mP());let p=new ae({objectMode:!0}),m=(Oe=he)===null||Oe===void 0?void 0:Oe.then;if(typeof m=="function")ge++,m.call(he,D=>{R=D,D!=null&&p.write(D),Ge&&p.end(),r.nextTick(Ce)},D=>{p.destroy(D),r.nextTick(Ce,D)});else if(_(he,!0))ge++,O(he,p,Ce,{end:Ge});else if(Z(he)||B(he)){let D=he.readable||he;ge++,O(D,p,Ce,{end:Ge})}else throw new h("AsyncIterable or Promise","destination",he);he=p;let{destroy:N,cleanup:re}=ue(he,!1,!0);te.push(N),x&&k.push(re)}}else if(A(Te)){if(S(he)){ge+=2;let p=H(he,Te,Ce,{end:Ge});E(Te)&&x&&k.push(p)}else if(B(he)||Z(he)){let p=he.readable||he;ge++,O(p,Te,Ce,{end:Ge})}else if(_(he))ge++,O(he,Te,Ce,{end:Ge});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],he);he=Te}else if(T(Te)){if(S(he))ge++,oe(ve(he),Te,Ce,{end:Ge});else if(Z(he)||_(he))ge++,oe(he,Te,Ce,{end:Ge});else if(B(he))ge++,oe(he.readable,Te,Ce,{end:Ge});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],he);he=Te}else he=u.from(Te)}return(P!=null&&P.aborted||I!=null&&I.aborted)&&r.nextTick(ne),he}function H(j,Q,K,{end:ee}){let P=!1;if(Q.on("close",()=>{P||K(new b)}),j.pipe(Q,{end:!1}),ee){let I=function(){P=!0,Q.end()};ie(j)?r.nextTick(I):j.once("end",I)}else K();return o(j,{readable:!0,writable:!1},I=>{let k=j._readableState;I&&I.code==="ERR_STREAM_PREMATURE_CLOSE"&&k&&k.ended&&!k.errored&&!k.errorEmitted?j.once("end",K).once("error",K):K(I)}),o(Q,{readable:!1,writable:!0},K)}return z1={pipelineImpl:M,pipeline:q},z1}function yP(){if(lP)return W1;lP=!0;let{pipeline:r}=X1(),e=sa(),{destroyer:t}=wh(),{isNodeStream:n,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:u,isReadableStream:c}=oa(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:d}}=fi(),g=vl();return W1=function(...v){if(v.length===0)throw new d("streams");if(v.length===1)return e.from(v[0]);let w=[...v];if(typeof v[0]=="function"&&(v[0]=e.from(v[0])),typeof v[v.length-1]=="function"){let ae=v.length-1;v[ae]=e.from(v[ae])}for(let ae=0;ae<v.length;++ae)if(!(!n(v[ae])&&!s(v[ae]))){if(ae<v.length-1&&!(i(v[ae])||c(v[ae])||a(v[ae])))throw new h(`streams[${ae}]`,w[ae],"must be readable");if(ae>0&&!(o(v[ae])||u(v[ae])||a(v[ae])))throw new h(`streams[${ae}]`,w[ae],"must be writable")}let y,_,E,S,A;function B(ae){let U=S;S=null,U?U(ae):ae?A.destroy(ae):!G&&!ie&&A.destroy()}let T=v[0],Z=r(v,B),ie=!!(o(T)||u(T)||a(T)),G=!!(i(Z)||c(Z)||a(Z));if(A=new e({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writable:ie,readable:G}),ie){if(n(T))A._write=function(U,V,ue){T.write(U,V)?ue():y=ue},A._final=function(U){T.end(),_=U},T.on("drain",function(){if(y){let U=y;y=null,U()}});else if(s(T)){let V=(a(T)?T.writable:T).getWriter();A._write=async function(ue,Ae,ve){try{await V.ready,V.write(ue).catch(()=>{}),ve()}catch(z){ve(z)}},A._final=async function(ue){try{await V.ready,V.close().catch(()=>{}),_=ue}catch(Ae){ue(Ae)}}}let ae=a(Z)?Z.readable:Z;g(ae,()=>{if(_){let U=_;_=null,U()}})}if(G){if(n(Z))Z.on("readable",function(){if(E){let ae=E;E=null,ae()}}),Z.on("end",function(){A.push(null)}),A._read=function(){for(;;){let ae=Z.read();if(ae===null){E=A._read;return}if(!A.push(ae))return}};else if(s(Z)){let U=(a(Z)?Z.readable:Z).getReader();A._read=async function(){for(;;)try{let{value:V,done:ue}=await U.read();if(!A.push(V))return;if(ue){A.push(null);return}}catch{return}}}}return A._destroy=function(ae,U){!ae&&S!==null&&(ae=new f),E=null,y=null,_=null,S===null?U(ae):(S=U,n(Z)&&t(Z,ae))},A},W1}function WW(){if(uP)return $b;uP=!0;let r=globalThis.AbortController||dg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:o}=fi(),{validateAbortSignal:s,validateInteger:a,validateObject:u}=pg(),c=Nr().Symbol("kWeak"),f=Nr().Symbol("kResistStopPropagation"),{finished:h}=vl(),d=yP(),{addAbortSignalNoValidate:g}=zb(),{isWritable:b,isNodeStream:v}=oa(),{deprecate:w}=Vn(),{ArrayPrototypePush:y,Boolean:_,MathFloor:E,Number:S,NumberIsNaN:A,Promise:B,PromiseReject:T,PromiseResolve:Z,PromisePrototypeThen:ie,Symbol:G}=Nr(),ae=G("kEmpty"),U=G("kEof");function V(I,k){if(k!=null&&u(k,"options"),k?.signal!=null&&s(k.signal,"options.signal"),v(I)&&!b(I))throw new e("stream",I,"must be writable");let ne=d(this,I);return k!=null&&k.signal&&g(k.signal,ne),ne}function ue(I,k){if(typeof I!="function")throw new t("fn",["Function","AsyncFunction"],I);k!=null&&u(k,"options"),k?.signal!=null&&s(k.signal,"options.signal");let ne=1;k?.concurrency!=null&&(ne=E(k.concurrency));let pe=ne-1;return k?.highWaterMark!=null&&(pe=E(k.highWaterMark)),a(ne,"options.concurrency",1),a(pe,"options.highWaterMark",0),pe+=ne,async function*(){let R=Vn().AbortSignalAny([k?.signal].filter(_)),te=this,ge=[],Ce={signal:R},xe,he,_e=!1,Oe=0;function Ie(){_e=!0,Te()}function Te(){Oe-=1,We()}function We(){he&&!_e&&Oe<ne&&ge.length<pe&&(he(),he=null)}async function qe(){try{for await(let Ge of te){if(_e)return;if(R.aborted)throw new o;try{if(Ge=I(Ge,Ce),Ge===ae)continue;Ge=Z(Ge)}catch(x){Ge=T(x)}Oe+=1,ie(Ge,Te,Ie),ge.push(Ge),xe&&(xe(),xe=null),!_e&&(ge.length>=pe||Oe>=ne)&&await new B(x=>{he=x})}ge.push(U)}catch(Ge){let x=T(Ge);ie(x,Te,Ie),ge.push(x)}finally{_e=!0,xe&&(xe(),xe=null)}}qe();try{for(;;){for(;ge.length>0;){let Ge=await ge[0];if(Ge===U)return;if(R.aborted)throw new o;Ge!==ae&&(yield Ge),ge.shift(),We()}await new B(Ge=>{xe=Ge})}}finally{_e=!0,he&&(he(),he=null)}}.call(this)}function Ae(I=void 0){return I!=null&&u(I,"options"),I?.signal!=null&&s(I.signal,"options.signal"),async function*(){let ne=0;for await(let F of this){var pe;if(I!=null&&(pe=I.signal)!==null&&pe!==void 0&&pe.aborted)throw new o({cause:I.signal.reason});yield[ne++,F]}}.call(this)}async function ve(I,k=void 0){for await(let ne of q.call(this,I,k))return!0;return!1}async function z(I,k=void 0){if(typeof I!="function")throw new t("fn",["Function","AsyncFunction"],I);return!await ve.call(this,async(...ne)=>!await I(...ne),k)}async function O(I,k){for await(let ne of q.call(this,I,k))return ne}async function oe(I,k){if(typeof I!="function")throw new t("fn",["Function","AsyncFunction"],I);async function ne(pe,F){return await I(pe,F),ae}for await(let pe of ue.call(this,ne,k));}function q(I,k){if(typeof I!="function")throw new t("fn",["Function","AsyncFunction"],I);async function ne(pe,F){return await I(pe,F)?pe:ae}return ue.call(this,ne,k)}class M extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function H(I,k,ne){var pe;if(typeof I!="function")throw new t("reducer",["Function","AsyncFunction"],I);ne!=null&&u(ne,"options"),ne?.signal!=null&&s(ne.signal,"options.signal");let F=arguments.length>1;if(ne!=null&&(pe=ne.signal)!==null&&pe!==void 0&&pe.aborted){let xe=new o(void 0,{cause:ne.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(xe)),xe}let R=new r,te=R.signal;if(ne!=null&&ne.signal){let xe={once:!0,[c]:this,[f]:!0};ne.signal.addEventListener("abort",()=>R.abort(),xe)}let ge=!1;try{for await(let xe of this){var Ce;if(ge=!0,ne!=null&&(Ce=ne.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new o;F?k=await I(k,xe,{signal:te}):(k=xe,F=!0)}if(!ge&&!F)throw new M}finally{R.abort()}return k}async function j(I){I!=null&&u(I,"options"),I?.signal!=null&&s(I.signal,"options.signal");let k=[];for await(let pe of this){var ne;if(I!=null&&(ne=I.signal)!==null&&ne!==void 0&&ne.aborted)throw new o(void 0,{cause:I.signal.reason});y(k,pe)}return k}function Q(I,k){let ne=ue.call(this,I,k);return async function*(){for await(let F of ne)yield*F}.call(this)}function K(I){if(I=S(I),A(I))return 0;if(I<0)throw new i("number",">= 0",I);return I}function ee(I,k=void 0){return k!=null&&u(k,"options"),k?.signal!=null&&s(k.signal,"options.signal"),I=K(I),async function*(){var pe;if(k!=null&&(pe=k.signal)!==null&&pe!==void 0&&pe.aborted)throw new o;for await(let R of this){var F;if(k!=null&&(F=k.signal)!==null&&F!==void 0&&F.aborted)throw new o;I--<=0&&(yield R)}}.call(this)}function P(I,k=void 0){return k!=null&&u(k,"options"),k?.signal!=null&&s(k.signal,"options.signal"),I=K(I),async function*(){var pe;if(k!=null&&(pe=k.signal)!==null&&pe!==void 0&&pe.aborted)throw new o;for await(let R of this){var F;if(k!=null&&(F=k.signal)!==null&&F!==void 0&&F.aborted)throw new o;if(I-- >0&&(yield R),I<=0)return}}.call(this)}return $b.streamReturningOperators={asIndexedPairs:w(Ae,"readable.asIndexedPairs will be removed in a future version."),drop:ee,filter:q,flatMap:Q,map:ue,take:P,compose:V},$b.promiseReturningOperators={every:z,forEach:oe,reduce:H,toArray:j,some:ve,find:O},$b}function bP(){if(cP)return q1;cP=!0;let{ArrayPrototypePop:r,Promise:e}=Nr(),{isIterable:t,isNodeStream:n,isWebStream:i}=oa(),{pipelineImpl:o}=X1(),{finished:s}=vl();wP();function a(...u){return new e((c,f)=>{let h,d,g=u[u.length-1];if(g&&typeof g=="object"&&!n(g)&&!t(g)&&!i(g)){let b=r(u);h=b.signal,d=b.end}o(u,(b,v)=>{b?f(b):c(v)},{signal:h,end:d})})}return q1={finished:s,pipeline:a},q1}function wP(){if(fP)return H1;fP=!0;let{Buffer:r}=fn(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Nr(),{promisify:{custom:i}}=Vn(),{streamReturningOperators:o,promiseReturningOperators:s}=WW(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=fi(),u=yP(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Wb(),{pipeline:h}=X1(),{destroyer:d}=wh(),g=vl(),b=bP(),v=oa(),w=H1=V1().Stream;w.isDestroyed=v.isDestroyed,w.isDisturbed=v.isDisturbed,w.isErrored=v.isErrored,w.isReadable=v.isReadable,w.isWritable=v.isWritable,w.Readable=qb();for(let _ of t(o)){let S=function(...A){if(new.target)throw a();return w.Readable.from(n(E,this||hP,A))},E=o[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let _ of t(s)){let S=function(...A){if(new.target)throw a();return n(E,this||hP,A)},E=s[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}w.Writable=Y1(),w.Duplex=sa(),w.Transform=gP(),w.PassThrough=mP(),w.pipeline=h;let{addAbortSignal:y}=zb();return w.addAbortSignal=y,w.finished=g,w.destroy=d,w.compose=u,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=f,e(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),e(h,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),e(g,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),w.Stream=w,w._isUint8Array=function(E){return E instanceof Uint8Array},w._uint8ArrayToBuffer=function(E){return r.from(E.buffer,E.byteOffset,E.byteLength)},H1}function qW(){if(dP)return Or;dP=!0;let r=wP(),e=bP(),t=r.Readable.destroy;return Or=r.Readable,Or._uint8ArrayToBuffer=r._uint8ArrayToBuffer,Or._isUint8Array=r._isUint8Array,Or.isDisturbed=r.isDisturbed,Or.isErrored=r.isErrored,Or.isReadable=r.isReadable,Or.Readable=r.Readable,Or.Writable=r.Writable,Or.Duplex=r.Duplex,Or.Transform=r.Transform,Or.PassThrough=r.PassThrough,Or.addAbortSignal=r.addAbortSignal,Or.finished=r.finished,Or.destroy=r.destroy,Or.destroy=t,Or.pipeline=r.pipeline,Or.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Or.Stream=r.Stream,Or.default=Or,Or}var C1,zL,fg,WL,Ub,qL,R1,HL,D1,GL,I1,VL,jb,YL,O1,XL,N1,KL,hg,ZL,k1,JL,L1,QL,P1,eP,B1,tP,Ye,M1,rP,Je,F1,nP,U1,iP,j1,sP,$1,oP,z1,aP,W1,lP,$b,uP,q1,cP,H1,fP,hP,Or,dP,ur,G1,HW,GW,VW,YW,XW,KW,ZW,JW,mg=Jt(()=>{Ne();Le();ke();Ff();bh();Mu();$L();yh();$p();p1();C1={},zL=!1;fg={},WL=!1;Ub={},qL=!1;R1={},HL=!1;D1={},GL=!1;I1={},VL=!1;jb={},YL=!1;O1={},XL=!1;N1={},KL=!1;hg={},ZL=!1;k1={},JL=!1;L1={},QL=!1;P1={},eP=!1;B1={},tP=!1,Ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;M1={},rP=!1,Je=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;F1={},nP=!1;U1={},iP=!1;j1={},sP=!1;$1={},oP=!1;z1={},aP=!1;W1={},lP=!1;$b={},uP=!1;q1={},cP=!1;H1={},fP=!1,hP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Or={},dP=!1;ur=qW();ur._uint8ArrayToBuffer;ur._isUint8Array;ur.isDisturbed;ur.isErrored;ur.isReadable;ur.Readable;ur.Writable;ur.Duplex;ur.Transform;ur.PassThrough;ur.addAbortSignal;ur.finished;ur.destroy;ur.pipeline;ur.compose;ur.Stream;G1=ur.Readable;G1.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new G1(e).wrap(r)};HW=ur.Writable,GW=ur.Duplex,VW=ur.Transform,YW=ur.PassThrough,XW=ur.finished,KW=ur.pipeline,ZW=ur.Stream,JW={finished:Bb(ur.finished),pipeline:Bb(ur.pipeline)}});var AP=ot((Lee,EP)=>{Ne();Le();ke();EP.exports=Hb;function Hb(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Hb.prototype.go=function(r){this.pending<this.max?_P(this,r):this.waiting.push(r)};Hb.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};Hb.prototype.hold=function(){return vP(this)};function vP(r){r.pending+=1;var e=!1;return t;function t(i){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||i,r.pending-=1,r.waiting.length>0&&r.pending<r.max)_P(r,r.waiting.shift());else if(r.pending===0){var o=r.listeners;r.listeners=[],o.forEach(n)}}function n(i){i(r.error)}}function _P(r,e){e(vP(r))}});var SP=ot(bg=>{Ne();Le();ke();var yg=(Gp(),Ir(Hp)),Gb=(yh(),Ir(lg)),K1=(mg(),Ir(gg)),xP=K1.Readable,Z1=K1.Writable,QW=K1.PassThrough,eq=AP(),Vb=(bh(),Ir(ug)).EventEmitter;bg.createFromBuffer=tq;bg.createFromFd=rq;bg.BufferSlicer=la;bg.FdSlicer=aa;Gb.inherits(aa,Vb);function aa(r,e){e=e||{},Vb.call(this),this.fd=r,this.pend=new eq,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}aa.prototype.read=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.read(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.write=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.write(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.createReadStream=function(r){return new Yb(this,r)};aa.prototype.createWriteStream=function(r){return new Xb(this,r)};aa.prototype.ref=function(){this.refCount+=1};aa.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&yg.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};Gb.inherits(Yb,xP);function Yb(r,e){e=e||{},xP.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Yb.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(t);yg.read(e.context.fd,i,0,t,e.pos,function(o,s){o?e.destroy(o):s===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=s,e.push(i.slice(0,s))),n()})})}};Yb.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};Gb.inherits(Xb,Z1);function Xb(r,e){e=e||{},Z1.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Xb.prototype._write=function(r,e,t){var n=this;if(!n.destroyed){if(n.pos+r.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),t(i);return}n.context.pend.go(function(o){if(n.destroyed)return o();yg.write(n.context.fd,r,0,r.length,n.pos,function(s,a){s?(n.destroy(),o(),t(s)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),o(),t())})})}};Xb.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Gb.inherits(la,Vb);function la(r,e){Vb.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}la.prototype.read=function(r,e,t,n,i){if(!(0<=e&&e<=r.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+r.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+t>r.length&&(t=r.length-e),n+t>this.buffer.length&&(t=this.buffer.length-n),t<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(r,e,n,n+t),setImmediate(function(){i(null,t)})};la.prototype.write=function(r,e,t,n,i){r.copy(this.buffer,n,e,e+t),setImmediate(function(){i(null,t,r)})};la.prototype.createReadStream=function(r){r=r||{};var e=new QW(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=t.length){n<t.length&&e.write(t.slice(n,t.length));break}e.write(t.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};la.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new Z1(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(n,i,o){if(!t.destroyed){var s=t.pos+n.length;if(s>t.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",t.destroyed=!0,o(a);return}n.copy(e.buffer,t.pos,0,n.length),t.bytesWritten+=n.length,t.pos=s,t.emit("progress"),o()}},t.destroy=function(){t.destroyed=!0},t};la.prototype.ref=function(){this.refCount+=1};la.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function tq(r,e){return new la(r,e)}function rq(r,e){return new aa(r,e)}});var RP=ot((zee,CP)=>{Ne();Le();ke();var _l=(ll(),Ir(Uf)).Buffer,J1=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(J1=new Int32Array(J1));function TP(r){if(_l.isBuffer(r))return r;var e=typeof _l.alloc=="function"&&typeof _l.from=="function";if(typeof r=="number")return e?_l.alloc(r):new _l(r);if(typeof r=="string")return e?_l.from(r):new _l(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function nq(r){var e=TP(4);return e.writeInt32BE(r,0),e}function Q1(r,e){r=TP(r),_l.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<r.length;n++)t=J1[(t^r[n])&255]^t>>>8;return t^-1}function eA(){return nq(Q1.apply(null,arguments))}eA.signed=function(){return Q1.apply(null,arguments)};eA.unsigned=function(){return Q1.apply(null,arguments)>>>0};CP.exports=eA});var FP=ot(Ti=>{Ne();Le();ke();var tA=(Gp(),Ir(Hp)),iq=(EL(),Ir(_L)),DP=SP(),sq=RP(),Jb=(yh(),Ir(lg)),Qb=(bh(),Ir(ug)).EventEmitter,IP=(mg(),Ir(gg)).Transform,nA=(mg(),Ir(gg)).PassThrough,oq=(mg(),Ir(gg)).Writable;Ti.open=aq;Ti.fromFd=OP;Ti.fromBuffer=lq;Ti.fromRandomAccessReader=iA;Ti.dosDateTimeToDate=LP;Ti.getFileNameLowLevel=PP;Ti.validateFileName=BP;Ti.parseExtraFields=MP;Ti.ZipFile=uo;Ti.Entry=wg;Ti.LocalFileHeader=kP;Ti.RandomAccessReader=El;function aq(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Zb),tA.open(r,"r",function(n,i){if(n)return t(n);OP(i,e,function(o,s){o&&tA.close(i,Zb),t(o,s)})})}function OP(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Zb),tA.fstat(r,function(n,i){if(n)return t(n);var o=DP.createFromFd(r,{autoClose:!0});iA(o,i.size,e,t)})}function lq(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=DP.createFromBuffer(r,{maxChunkSize:65536});iA(n,r.length,e,t)}function iA(r,e,t,n){typeof t=="function"&&(n=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var i=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),n==null&&(n=Zb),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var o=22,s=20,a=65535,u=Math.min(s+o+a,e),c=ua(u),f=e-c.length;_h(r,c,0,u,f,function(h){if(h)return n(h);for(var d=u-o;d>=0;d-=1)if(c.readUInt32LE(d)===101010256){var g=c.subarray(d),b=g.readUInt16LE(4),v=g.readUInt16LE(10),w=g.readUInt32LE(16),y=g.readUInt16LE(20),_=g.length-o;if(y!==_)return n(new Error("Invalid comment length. Expected: "+_+". Found: "+y+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var E=i?Kb(g.subarray(22),!1):g.subarray(22);if(d-s>=0&&c.readUInt32LE(d-s)===117853008){var S=c.subarray(d-s,d-s+s),A=vh(S,8),B=ua(56);return _h(r,B,0,B.length,A,function(T){return T?n(T):B.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(b=B.readUInt32LE(16),b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):(v=vh(B,32),w=vh(B,48),n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))))})}return b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}Jb.inherits(uo,Qb);function uo(r,e,t,n,i,o,s,a,u,c){var f=this;Qb.call(f),f.reader=r,f.reader.on("error",function(h){NP(f,h)}),f.reader.once("close",function(){f.emit("close")}),f.readEntryCursor=e,f.fileSize=t,f.entryCount=n,f.comment=i,f.entriesRead=0,f.autoClose=!!o,f.lazyEntries=!!s,f.decodeStrings=!!a,f.validateEntrySizes=!!u,f.strictFileNames=!!c,f.isOpen=!0,f.emittedError=!1,f.lazyEntries||f._readEntry()}uo.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function lo(r,e){r.autoClose&&r.close(),NP(r,e)}function NP(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}uo.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};uo.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=ua(46);_h(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return lo(r,t);if(!r.emittedError){var n=new wg,i=e.readUInt32LE(0);if(i!==33639248)return lo(r,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return lo(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=ua(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),_h(r.reader,e,0,e.length,r.readEntryCursor,function(o){if(o)return lo(r,o);if(!r.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var s=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,s),n.fileCommentRaw=e.subarray(s,s+n.fileCommentLength);try{n.extraFields=MP(n.extraFieldRaw)}catch(v){return lo(r,v)}if(r.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=Kb(n.fileCommentRaw,a),n.fileName=PP(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,r.strictFileNames);var u=BP(n.fileName);if(u!=null)return lo(r,new Error(u))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1;for(var c=0;c<n.extraFields.length;c++){var f=n.extraFields[c];if(f.id===1){var h=f.data,d=0;if(n.uncompressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=vh(h,d),d+=8}if(n.compressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=vh(h,d),d+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=vh(h,d),d+=8}break}}if(r.validateEntrySizes&&n.compressionMethod===0){var g=n.uncompressedSize;if(n.isEncrypted()&&(g+=12),n.compressedSize!==g){var b="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return lo(r,new Error(b))}}r.emit("entry",n),r.lazyEntries||r._readEntry()}})}})}};uo.prototype.openReadStream=function(r,e,t){var n=this,i=0,o=r.compressedSize;if(t==null&&(t=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(o=e.end,o<0)throw new Error("options.end < 0");if(o>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));var s;if(r.compressionMethod===0)s=!1;else if(r.compressionMethod===8)s=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));n.readLocalFileHeader(r,{minimal:!0},function(a,u){if(a)return t(a);n.openReadStreamLowLevel(u.fileDataStart,r.compressedSize,i,o,s,r.uncompressedSize,t)})};uo.prototype.openReadStreamLowLevel=function(r,e,t,n,i,o,s){var a=this,u=r+e,c=a.reader.createReadStream({start:r+t,end:r+n}),f=c;if(i){var h=!1,d=iq.createInflateRaw();c.on("error",function(g){setImmediate(function(){h||d.emit("error",g)})}),c.pipe(d),a.validateEntrySizes?(f=new vg(o),d.on("error",function(g){setImmediate(function(){h||f.emit("error",g)})}),d.pipe(f)):f=d,rA(f,function(){h=!0,d!==f&&d.unpipe(f),c.unpipe(d),c.destroy()})}s(null,f)};uo.prototype.readLocalFileHeader=function(r,e,t){var n=this;t==null&&(t=e,e=null),e==null&&(e={}),n.reader.ref();var i=ua(30);_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader,function(o){try{if(o)return t(o);var s=i.readUInt32LE(0);if(s!==67324752)return t(new Error("invalid local file header signature: 0x"+s.toString(16)));var a=i.readUInt16LE(26),u=i.readUInt16LE(28),c=r.relativeOffsetOfLocalHeader+30+a+u;if(c+r.compressedSize>n.fileSize)return t(new Error("file data overflows file bounds: "+c+" + "+r.compressedSize+" > "+n.fileSize));if(e.minimal)return t(null,{fileDataStart:c});var f=new kP;f.fileDataStart=c,f.versionNeededToExtract=i.readUInt16LE(4),f.generalPurposeBitFlag=i.readUInt16LE(6),f.compressionMethod=i.readUInt16LE(8),f.lastModFileTime=i.readUInt16LE(10),f.lastModFileDate=i.readUInt16LE(12),f.crc32=i.readUInt32LE(14),f.compressedSize=i.readUInt32LE(18),f.uncompressedSize=i.readUInt32LE(22),f.fileNameLength=a,f.extraFieldLength=u,i=ua(a+u),n.reader.ref(),_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader+30,function(h){try{return h?t(h):(f.fileName=i.subarray(0,a),f.extraField=i.subarray(a),t(null,f))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function wg(){}wg.prototype.getLastModDate=function(){return LP(this.lastModFileDate,this.lastModFileTime)};wg.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};wg.prototype.isCompressed=function(){return this.compressionMethod===8};function kP(){}function LP(r,e){var t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,s=(e&31)*2,a=e>>5&63,u=e>>11&31;return new Date(i,n,t,u,a,s,o)}function PP(r,e,t,n){for(var i=null,o=0;o<t.length;o++){var s=t[o];if(s.id===28789){if(s.data.length<6||s.data.readUInt8(0)!==1)continue;var a=s.data.readUInt32LE(1);if(sq.unsigned(e)!==a)continue;i=Kb(s.data.subarray(5),!0);break}}if(i==null){var u=(r&2048)!==0;i=Kb(e,u)}return n||(i=i.replace(/\\/g,"/")),i}function BP(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function MP(r){for(var e=[],t=0;t<r.length-3;){var n=r.readUInt16LE(t+0),i=r.readUInt16LE(t+2),o=t+4,s=o+i;if(s>r.length)throw new Error("extra field length exceeds extra field buffer size");var a=r.subarray(o,s);e.push({id:n,data:a}),t=s}return e}function _h(r,e,t,n,i,o){if(n===0)return setImmediate(function(){o(null,ua(0))});r.read(e,t,n,i,function(s,a){if(s)return o(s);if(a<n)return o(new Error("unexpected EOF"));o()})}Jb.inherits(vg,IP);function vg(r){IP.call(this),this.actualByteCount=0,this.expectedByteCount=r}vg.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(n))}t(null,r)};vg.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};Jb.inherits(El,Qb);function El(){Qb.call(this),this.refCount=0}El.prototype.ref=function(){this.refCount+=1};El.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};El.prototype.createReadStream=function(r){r==null&&(r={});var e=r.start,t=r.end;if(e===t){var n=new nA;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,t),o=!1,s=new ew(this);i.on("error",function(u){setImmediate(function(){o||s.emit("error",u)})}),rA(s,function(){i.unpipe(s),s.unref(),i.destroy()});var a=new vg(t-e);return s.on("error",function(u){setImmediate(function(){o||a.emit("error",u)})}),rA(a,function(){o=!0,s.unpipe(a),s.destroy()}),i.pipe(s).pipe(a)};El.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};El.prototype.read=function(r,e,t,n,i){var o=this.createReadStream({start:n,end:n+t}),s=new oq,a=0;s._write=function(u,c,f){u.copy(r,e+a,0,u.length),a+=u.length,f()},s.on("finish",i),o.on("error",function(u){i(u)}),o.pipe(s)};El.prototype.close=function(r){setImmediate(r)};Jb.inherits(ew,nA);function ew(r){nA.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}ew.prototype._flush=function(r){this.unref(),r()};ew.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var uq="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Kb(r,e){if(e)return r.toString("utf8");for(var t="",n=0;n<r.length;n++)t+=uq[r[n]];return t}function vh(r,e){var t=r.readUInt32LE(e),n=r.readUInt32LE(e+4);return n*4294967296+t}var ua;typeof Buffer.allocUnsafe=="function"?ua=function(r){return Buffer.allocUnsafe(r)}:ua=function(r){return new Buffer(r)};function rA(r,e){typeof r.destroy=="function"?r._destroy=function(t,n){e(),n?.(t)}:r.destroy=e}function Zb(r){if(r)throw r}});var sA=ot((Kee,UP)=>{Ne();Le();ke();UP.exports=(bh(),Ir(ug)).EventEmitter});var HP=ot((ete,qP)=>{"use strict";Ne();Le();ke();function jP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function $P(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(t),!0).forEach(function(n){cq(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cq(r,e,t){return e=WP(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fq(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function zP(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,WP(n.key),n)}}function hq(r,e,t){return e&&zP(r.prototype,e),t&&zP(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function WP(r){var e=dq(r,"string");return typeof e=="symbol"?e:String(e)}function dq(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var pq=(ll(),Ir(Uf)),tw=pq.Buffer,gq=(yh(),Ir(lg)),oA=gq.inspect,mq=oA&&oA.custom||"inspect";function yq(r,e,t){tw.prototype.copy.call(r,e,t)}qP.exports=(function(){function r(){fq(this,r),this.head=null,this.tail=null,this.length=0}return hq(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return tw.alloc(0);for(var n=tw.allocUnsafe(t>>>0),i=this.head,o=0;i;)yq(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?o+=s:o+=s.slice(0,t),t-=a,t===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=tw.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),t-=a,t===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:mq,value:function(t,n){return oA(this,$P($P({},n),{},{depth:0,customInspect:!1}))}}]),r})()});var lA=ot((ite,VP)=>{"use strict";Ne();Le();ke();function bq(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(aA,this,r)):process.nextTick(aA,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?process.nextTick(rw,t):(t._writableState.errorEmitted=!0,process.nextTick(GP,t,o)):process.nextTick(GP,t,o):e?(process.nextTick(rw,t),e(o)):process.nextTick(rw,t)}),this)}function GP(r,e){aA(r,e),rw(r)}function rw(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function wq(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function aA(r,e){r.emit("error",e)}function vq(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}VP.exports={destroy:bq,undestroy:wq,errorOrDestroy:vq}});var Ju=ot((lte,KP)=>{"use strict";Ne();Le();ke();function _q(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var XP={};function ss(r,e,t){t||(t=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=(function(o){_q(s,o);function s(a,u,c){return o.call(this,n(a,u,c))||this}return s})(t);i.prototype.name=t.name,i.prototype.code=r,XP[r]=i}function YP(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function Eq(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Aq(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function xq(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}ss("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);ss("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&Eq(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Aq(r," argument"))i="The ".concat(r," ").concat(n," ").concat(YP(e,"type"));else{var o=xq(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(YP(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);ss("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ss("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});ss("ERR_STREAM_PREMATURE_CLOSE","Premature close");ss("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});ss("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ss("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ss("ERR_STREAM_WRITE_AFTER_END","write after end");ss("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ss("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);ss("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");KP.exports.codes=XP});var uA=ot((hte,ZP)=>{"use strict";Ne();Le();ke();var Sq=Ju().codes.ERR_INVALID_OPT_VALUE;function Tq(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Cq(r,e,t,n){var i=Tq(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Sq(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}ZP.exports={getHighWaterMark:Cq}});var Qu=ot((mte,cA)=>{Ne();Le();ke();typeof Object.create=="function"?cA.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:cA.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var QP=ot((vte,JP)=>{Ne();Le();ke();JP.exports=Rq;function Rq(r,e){if(fA("noDeprecation"))return r;var t=!1;function n(){if(!t){if(fA("throwDeprecation"))throw new Error(e);fA("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function fA(r){try{if(!window.localStorage)return!1}catch{return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var pA=ot((xte,sB)=>{"use strict";Ne();Le();ke();sB.exports=kr;function tB(r){var e=this;this.next=null,this.entry=null,this.finish=function(){tH(e,r)}}var Eh;kr.WritableState=Eg;var Dq={deprecate:QP()},rB=sA(),iw=(ll(),Ir(Uf)).Buffer,Iq=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Oq(r){return iw.from(r)}function Nq(r){return iw.isBuffer(r)||r instanceof Iq}var dA=lA(),kq=uA(),Lq=kq.getHighWaterMark,Al=Ju().codes,Pq=Al.ERR_INVALID_ARG_TYPE,Bq=Al.ERR_METHOD_NOT_IMPLEMENTED,Mq=Al.ERR_MULTIPLE_CALLBACK,Fq=Al.ERR_STREAM_CANNOT_PIPE,Uq=Al.ERR_STREAM_DESTROYED,jq=Al.ERR_STREAM_NULL_VALUES,$q=Al.ERR_STREAM_WRITE_AFTER_END,zq=Al.ERR_UNKNOWN_ENCODING,Ah=dA.errorOrDestroy;Qu()(kr,rB);function Wq(){}function Eg(r,e,t){Eh=Eh||ec(),r=r||{},typeof t!="boolean"&&(t=e instanceof Eh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=Lq(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Kq(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new tB(this)}Eg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Eg.prototype,"buffer",{get:Dq.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var nw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(nw=Function.prototype[Symbol.hasInstance],Object.defineProperty(kr,Symbol.hasInstance,{value:function(e){return nw.call(this,e)?!0:this!==kr?!1:e&&e._writableState instanceof Eg}})):nw=function(e){return e instanceof this};function kr(r){Eh=Eh||ec();var e=this instanceof Eh;if(!e&&!nw.call(kr,this))return new kr(r);this._writableState=new Eg(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),rB.call(this)}kr.prototype.pipe=function(){Ah(this,new Fq)};function qq(r,e){var t=new $q;Ah(r,t),process.nextTick(e,t)}function Hq(r,e,t,n){var i;return t===null?i=new jq:typeof t!="string"&&!e.objectMode&&(i=new Pq("chunk",["string","Buffer"],t)),i?(Ah(r,i),process.nextTick(n,i),!1):!0}kr.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&Nq(r);return o&&!iw.isBuffer(r)&&(r=Oq(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Wq),n.ending?qq(this,t):(o||Hq(this,n,r,t))&&(n.pendingcb++,i=Vq(this,n,o,r,e,t)),i};kr.prototype.cork=function(){this._writableState.corked++};kr.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&nB(this,r))};kr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zq(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(kr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Gq(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=iw.from(e,t)),e}Object.defineProperty(kr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Vq(r,e,t,n,i,o){if(!t){var s=Gq(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else hA(r,e,!1,a,n,i,o);return u}function hA(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Uq("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function Yq(r,e,t,n,i){--e.pendingcb,t?(process.nextTick(i,n),process.nextTick(_g,r,e),r._writableState.errorEmitted=!0,Ah(r,n)):(i(n),r._writableState.errorEmitted=!0,Ah(r,n),_g(r,e))}function Xq(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function Kq(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Mq;if(Xq(t),e)Yq(r,t,n,e,i);else{var o=iB(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&nB(r,t),n?process.nextTick(eB,r,t,o,i):eB(r,t,o,i)}}function eB(r,e,t,n){t||Zq(r,e),e.pendingcb--,n(),_g(r,e)}function Zq(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function nB(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,a=!0;t;)i[s]=t,t.isBuf||(a=!1),t=t.next,s+=1;i.allBuffers=a,hA(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new tB(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,f=t.callback,h=e.objectMode?1:u.length;if(hA(r,e,!1,h,u,c,f),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}kr.prototype._write=function(r,e,t){t(new Bq("_write()"))};kr.prototype._writev=null;kr.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||eH(this,n,t),this};Object.defineProperty(kr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function iB(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function Jq(r,e){r._final(function(t){e.pendingcb--,t&&Ah(r,t),e.prefinished=!0,r.emit("prefinish"),_g(r,e)})}function Qq(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Jq,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function _g(r,e){var t=iB(e);if(t&&(Qq(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function eH(r,e,t){e.ending=!0,_g(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function tH(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(kr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});kr.prototype.destroy=dA.destroy;kr.prototype._undestroy=dA.undestroy;kr.prototype._destroy=function(r,e){e(r)}});var ec=ot((Rte,aB)=>{"use strict";Ne();Le();ke();var rH=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};aB.exports=co;var oB=yA(),mA=pA();Qu()(co,oB);for(gA=rH(mA.prototype),sw=0;sw<gA.length;sw++)ow=gA[sw],co.prototype[ow]||(co.prototype[ow]=mA.prototype[ow]);var gA,ow,sw;function co(r){if(!(this instanceof co))return new co(r);oB.call(this,r),mA.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nH)))}Object.defineProperty(co.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(co.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(co.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nH(){this._writableState.ended||process.nextTick(iH,this)}function iH(r){r.end()}Object.defineProperty(co.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var cB=ot((bA,uB)=>{Ne();Le();ke();var aw=(ll(),Ir(Uf)),ca=aw.Buffer;function lB(r,e){for(var t in r)e[t]=r[t]}ca.from&&ca.alloc&&ca.allocUnsafe&&ca.allocUnsafeSlow?uB.exports=aw:(lB(aw,bA),bA.Buffer=xh);function xh(r,e,t){return ca(r,e,t)}lB(ca,xh);xh.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ca(r,e,t)};xh.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ca(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};xh.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ca(r)};xh.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return aw.SlowBuffer(r)}});var _A=ot(hB=>{"use strict";Ne();Le();ke();var vA=cB().Buffer,fB=vA.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function sH(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function oH(r){var e=sH(r);if(typeof e!="string"&&(vA.isEncoding===fB||!fB(r)))throw new Error("Unknown encoding: "+r);return e||r}hB.StringDecoder=Ag;function Ag(r){this.encoding=oH(r);var e;switch(this.encoding){case"utf16le":this.text=hH,this.end=dH,e=4;break;case"utf8":this.fillLast=uH,e=4;break;case"base64":this.text=pH,this.end=gH,e=3;break;default:this.write=mH,this.end=yH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=vA.allocUnsafe(e)}Ag.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Ag.prototype.end=fH;Ag.prototype.text=cH;Ag.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function wA(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function aH(r,e,t){var n=e.length-1;if(n<t)return 0;var i=wA(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=wA(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=wA(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function lH(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function uH(r){var e=this.lastTotal-this.lastNeed,t=lH(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function cH(r,e){var t=aH(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function fH(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function hH(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function dH(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function pH(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function gH(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function mH(r){return r.toString(this.encoding)}function yH(r){return r&&r.length?this.write(r):""}});var lw=ot((Ute,gB)=>{"use strict";Ne();Le();ke();var dB=Ju().codes.ERR_STREAM_PREMATURE_CLOSE;function bH(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function wH(){}function vH(r){return r.setHeader&&typeof r.abort=="function"}function pB(r,e,t){if(typeof e=="function")return pB(r,null,e);e||(e={}),t=bH(t||wH);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||a()},s=r._writableState&&r._writableState.finished,a=function(){i=!1,s=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,c=function(){n=!1,u=!0,i||t.call(r)},f=function(b){t.call(r,b)},h=function(){var b;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(b=new dB),t.call(r,b);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(b=new dB),t.call(r,b)},d=function(){r.req.on("finish",a)};return vH(r)?(r.on("complete",a),r.on("abort",h),r.req?d():r.on("request",d)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",c),r.on("finish",a),e.error!==!1&&r.on("error",f),r.on("close",h),function(){r.removeListener("complete",a),r.removeListener("abort",h),r.removeListener("request",d),r.req&&r.req.removeListener("finish",a),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",a),r.removeListener("end",c),r.removeListener("error",f),r.removeListener("close",h)}}gB.exports=pB});var yB=ot((Wte,mB)=>{"use strict";Ne();Le();ke();var uw;function xl(r,e,t){return e=_H(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _H(r){var e=EH(r,"string");return typeof e=="symbol"?e:String(e)}function EH(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var AH=lw(),Sl=Symbol("lastResolve"),tc=Symbol("lastReject"),xg=Symbol("error"),cw=Symbol("ended"),rc=Symbol("lastPromise"),EA=Symbol("handlePromise"),nc=Symbol("stream");function Tl(r,e){return{value:r,done:e}}function xH(r){var e=r[Sl];if(e!==null){var t=r[nc].read();t!==null&&(r[rc]=null,r[Sl]=null,r[tc]=null,e(Tl(t,!1)))}}function SH(r){process.nextTick(xH,r)}function TH(r,e){return function(t,n){r.then(function(){if(e[cw]){t(Tl(void 0,!0));return}e[EA](t,n)},n)}}var CH=Object.getPrototypeOf(function(){}),RH=Object.setPrototypeOf((uw={get stream(){return this[nc]},next:function(){var e=this,t=this[xg];if(t!==null)return Promise.reject(t);if(this[cw])return Promise.resolve(Tl(void 0,!0));if(this[nc].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[xg]?a(e[xg]):s(Tl(void 0,!0))})});var n=this[rc],i;if(n)i=new Promise(TH(n,this));else{var o=this[nc].read();if(o!==null)return Promise.resolve(Tl(o,!1));i=new Promise(this[EA])}return this[rc]=i,i}},xl(uw,Symbol.asyncIterator,function(){return this}),xl(uw,"return",function(){var e=this;return new Promise(function(t,n){e[nc].destroy(null,function(i){if(i){n(i);return}t(Tl(void 0,!0))})})}),uw),CH),DH=function(e){var t,n=Object.create(RH,(t={},xl(t,nc,{value:e,writable:!0}),xl(t,Sl,{value:null,writable:!0}),xl(t,tc,{value:null,writable:!0}),xl(t,xg,{value:null,writable:!0}),xl(t,cw,{value:e._readableState.endEmitted,writable:!0}),xl(t,EA,{value:function(o,s){var a=n[nc].read();a?(n[rc]=null,n[Sl]=null,n[tc]=null,o(Tl(a,!1))):(n[Sl]=o,n[tc]=s)},writable:!0}),t));return n[rc]=null,AH(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[tc];o!==null&&(n[rc]=null,n[Sl]=null,n[tc]=null,o(i)),n[xg]=i;return}var s=n[Sl];s!==null&&(n[rc]=null,n[Sl]=null,n[tc]=null,s(Tl(void 0,!0))),n[cw]=!0}),e.on("readable",SH.bind(null,n)),n};mB.exports=DH});var wB=ot((Vte,bB)=>{Ne();Le();ke();bB.exports=function(){throw new Error("Readable.from is not available in the browser")}});var yA=ot((Jte,DB)=>{"use strict";Ne();Le();ke();DB.exports=jt;var Sh;jt.ReadableState=AB;var Zte=(bh(),Ir(ug)).EventEmitter,EB=function(e,t){return e.listeners(t).length},Tg=sA(),fw=(ll(),Ir(Uf)).Buffer,IH=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function OH(r){return fw.from(r)}function NH(r){return fw.isBuffer(r)||r instanceof IH}var AA=(yh(),Ir(lg)),Ot;AA&&AA.debuglog?Ot=AA.debuglog("stream"):Ot=function(){};var kH=HP(),IA=lA(),LH=uA(),PH=LH.getHighWaterMark,hw=Ju().codes,BH=hw.ERR_INVALID_ARG_TYPE,MH=hw.ERR_STREAM_PUSH_AFTER_EOF,FH=hw.ERR_METHOD_NOT_IMPLEMENTED,UH=hw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Th,xA,SA;Qu()(jt,Tg);var Sg=IA.errorOrDestroy,TA=["error","close","destroy","pause","resume"];function jH(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function AB(r,e,t){Sh=Sh||ec(),r=r||{},typeof t!="boolean"&&(t=e instanceof Sh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=PH(this,r,"readableHighWaterMark",t),this.buffer=new kH,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Th||(Th=_A().StringDecoder),this.decoder=new Th(r.encoding),this.encoding=r.encoding)}function jt(r){if(Sh=Sh||ec(),!(this instanceof jt))return new jt(r);var e=this instanceof Sh;this._readableState=new AB(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Tg.call(this)}Object.defineProperty(jt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});jt.prototype.destroy=IA.destroy;jt.prototype._undestroy=IA.undestroy;jt.prototype._destroy=function(r,e){e(r)};jt.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=fw.from(r,e),e=""),n=!0),xB(this,r,e,!1,n)};jt.prototype.unshift=function(r){return xB(this,r,null,!0,!1)};function xB(r,e,t,n,i){Ot("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,WH(r,o);else{var s;if(i||(s=$H(o,e)),s)Sg(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==fw.prototype&&(e=OH(e)),n)o.endEmitted?Sg(r,new UH):CA(r,o,e,!0);else if(o.ended)Sg(r,new MH);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?CA(r,o,e,!1):DA(r,o)):CA(r,o,e,!1)}else n||(o.reading=!1,DA(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function CA(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&dw(r)),DA(r,e)}function $H(r,e){var t;return!NH(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new BH("chunk",["string","Buffer","Uint8Array"],e)),t}jt.prototype.isPaused=function(){return this._readableState.flowing===!1};jt.prototype.setEncoding=function(r){Th||(Th=_A().StringDecoder);var e=new Th(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var vB=1073741824;function zH(r){return r>=vB?r=vB:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function _B(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=zH(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}jt.prototype.read=function(r){Ot("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ot("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?RA(this):dw(this),null;if(r=_B(r,e),r===0&&e.ended)return e.length===0&&RA(this),null;var n=e.needReadable;Ot("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,Ot("length less than watermark",n)),e.ended||e.reading?(n=!1,Ot("reading or ended",n)):n&&(Ot("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=_B(t,e)));var i;return r>0?i=CB(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&RA(this)),i!==null&&this.emit("data",i),i};function WH(r,e){if(Ot("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?dw(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,SB(r)))}}function dw(r){var e=r._readableState;Ot("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ot("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(SB,r))}function SB(r){var e=r._readableState;Ot("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,OA(r)}function DA(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(qH,r,e))}function qH(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(Ot("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}jt.prototype._read=function(r){Sg(this,new FH("_read()"))};jt.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,Ot("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,o=i?a:v;n.endEmitted?process.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(w,y){Ot("onunpipe"),w===t&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,f())}function a(){Ot("onend"),r.end()}var u=HH(t);r.on("drain",u);var c=!1;function f(){Ot("cleanup"),r.removeListener("close",g),r.removeListener("finish",b),r.removeListener("drain",u),r.removeListener("error",d),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",v),t.removeListener("data",h),c=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",h);function h(w){Ot("ondata");var y=r.write(w);Ot("dest.write",y),y===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&RB(n.pipes,r)!==-1)&&!c&&(Ot("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function d(w){Ot("onerror",w),v(),r.removeListener("error",d),EB(r,"error")===0&&Sg(r,w)}jH(r,"error",d);function g(){r.removeListener("finish",b),v()}r.once("close",g);function b(){Ot("onfinish"),r.removeListener("close",g),v()}r.once("finish",b);function v(){Ot("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(Ot("pipe resume"),t.resume()),r};function HH(r){return function(){var t=r._readableState;Ot("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&EB(r,"data")&&(t.flowing=!0,OA(r))}}jt.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=RB(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};jt.prototype.on=function(r,e){var t=Tg.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ot("on readable",n.length,n.reading),n.length?dw(this):n.reading||process.nextTick(GH,this)),t};jt.prototype.addListener=jt.prototype.on;jt.prototype.removeListener=function(r,e){var t=Tg.prototype.removeListener.call(this,r,e);return r==="readable"&&process.nextTick(TB,this),t};jt.prototype.removeAllListeners=function(r){var e=Tg.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process.nextTick(TB,this),e};function TB(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function GH(r){Ot("readable nexttick read 0"),r.read(0)}jt.prototype.resume=function(){var r=this._readableState;return r.flowing||(Ot("resume"),r.flowing=!r.readableListening,VH(this,r)),r.paused=!1,this};function VH(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(YH,r,e))}function YH(r,e){Ot("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),OA(r),e.flowing&&!e.reading&&r.read(0)}jt.prototype.pause=function(){return Ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function OA(r){var e=r._readableState;for(Ot("flow",e.flowing);e.flowing&&r.read()!==null;);}jt.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(Ot("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(Ot("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=(function(a){return function(){return r[a].apply(r,arguments)}})(i));for(var o=0;o<TA.length;o++)r.on(TA[o],this.emit.bind(this,TA[o]));return this._read=function(s){Ot("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(jt.prototype[Symbol.asyncIterator]=function(){return xA===void 0&&(xA=yB()),xA(this)});Object.defineProperty(jt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(jt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(jt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});jt._fromList=CB;Object.defineProperty(jt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function CB(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function RA(r){var e=r._readableState;Ot("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(XH,e,r))}function XH(r,e){if(Ot("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(jt.from=function(r,e){return SA===void 0&&(SA=wB()),SA(jt,r,e)});function RB(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var NA=ot((rre,OB)=>{"use strict";Ne();Le();ke();OB.exports=fa;var pw=Ju().codes,KH=pw.ERR_METHOD_NOT_IMPLEMENTED,ZH=pw.ERR_MULTIPLE_CALLBACK,JH=pw.ERR_TRANSFORM_ALREADY_TRANSFORMING,QH=pw.ERR_TRANSFORM_WITH_LENGTH_0,gw=ec();Qu()(fa,gw);function eG(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new ZH);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function fa(r){if(!(this instanceof fa))return new fa(r);gw.call(this,r),this._transformState={afterTransform:eG.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",tG)}function tG(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){IB(r,e,t)}):IB(this,null,null)}fa.prototype.push=function(r,e){return this._transformState.needTransform=!1,gw.prototype.push.call(this,r,e)};fa.prototype._transform=function(r,e,t){t(new KH("_transform()"))};fa.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};fa.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};fa.prototype._destroy=function(r,e){gw.prototype._destroy.call(this,r,function(t){e(t)})};function IB(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new QH;if(r._transformState.transforming)throw new JH;return r.push(null)}});var LB=ot((ore,kB)=>{"use strict";Ne();Le();ke();kB.exports=Cg;var NB=NA();Qu()(Cg,NB);function Cg(r){if(!(this instanceof Cg))return new Cg(r);NB.call(this,r)}Cg.prototype._transform=function(r,e,t){t(null,r)}});var UB=ot((cre,FB)=>{"use strict";Ne();Le();ke();var kA;function rG(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var MB=Ju().codes,nG=MB.ERR_MISSING_ARGS,iG=MB.ERR_STREAM_DESTROYED;function PB(r){if(r)throw r}function sG(r){return r.setHeader&&typeof r.abort=="function"}function oG(r,e,t,n){n=rG(n);var i=!1;r.on("close",function(){i=!0}),kA===void 0&&(kA=lw()),kA(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,sG(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new iG("pipe"))}}}function BB(r){r()}function aG(r,e){return r.pipe(e)}function lG(r){return!r.length||typeof r[r.length-1]!="function"?PB:r.pop()}function uG(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=lG(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new nG("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return oG(s,u,c,function(f){i||(i=f),f&&o.forEach(BB),!u&&(o.forEach(BB),n(i))})});return e.reduce(aG)}FB.exports=uG});var $B=ot((os,jB)=>{Ne();Le();ke();os=jB.exports=yA();os.Stream=os;os.Readable=os;os.Writable=pA();os.Duplex=ec();os.Transform=NA();os.PassThrough=LB();os.finished=lw();os.pipeline=UB()});var WB=ot((yre,zB)=>{Ne();Le();ke();var cG=Object.prototype.toString,LA=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function fG(r){return cG.call(r).slice(8,-1)==="ArrayBuffer"}function hG(r,e,t){e>>>=0;var n=r.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return LA?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function dG(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return LA?Buffer.from(r,e):new Buffer(r,e)}function pG(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return fG(r)?hG(r,e,t):typeof r=="string"?dG(r,e):LA?Buffer.from(r):new Buffer(r)}zB.exports=pG});var XB=ot(bt=>{Ne();Le();ke();var qB=void 0,gG=1e5,vr=(function(){var r=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(t){return r.call(t).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,n){return n in t},HasOwnProperty:function(t,n){return e.call(t,n)},IsCallable:function(t){return typeof t=="function"},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}})(),mG=Math.LN2,yG=Math.abs,mw=Math.floor,bG=Math.log,wG=Math.min,Ns=Math.pow,vG=Math.round;function PA(r){if(HB&&Ch){var e=HB(r),t;for(t=0;t<e.length;t+=1)Ch(r,e[t],{value:r[e[t]],writable:!1,enumerable:!1,configurable:!1})}}var Ch;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?Ch=Object.defineProperty:Ch=function(r,e,t){if(!r===Object(r))throw new TypeError("Object.defineProperty called on non-object");return vr.HasProperty(t,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(r,e,t.get),vr.HasProperty(t,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(r,e,t.set),vr.HasProperty(t,"value")&&(r[e]=t.value),r};var HB=Object.getOwnPropertyNames||function(r){if(r!==Object(r))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],t;for(t in r)vr.HasOwnProperty(r,t)&&e.push(t);return e};function _G(r){if(!Ch)return;if(r.length>gG)throw new RangeError("Array too large for polyfill");function e(n){Ch(r,n,{get:function(){return r._getter(n)},set:function(i){r._setter(n,i)},enumerable:!0,configurable:!1})}var t;for(t=0;t<r.length;t+=1)e(t)}function BA(r,e){var t=32-e;return r<<t>>t}function MA(r,e){var t=32-e;return r<<t>>>t}function EG(r){return[r&255]}function AG(r){return BA(r[0],8)}function xG(r){return[r&255]}function GB(r){return MA(r[0],8)}function SG(r){return r=vG(Number(r)),[r<0?0:r>255?255:r&255]}function TG(r){return[r>>8&255,r&255]}function CG(r){return BA(r[0]<<8|r[1],16)}function RG(r){return[r>>8&255,r&255]}function DG(r){return MA(r[0]<<8|r[1],16)}function IG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function OG(r){return BA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function NG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function kG(r){return MA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function VB(r,e,t){var n=(1<<e-1)-1,i,o,s,a,u,c,f,h;function d(g){var b=mw(g),v=g-b;return v<.5?b:v>.5||b%2?b+1:b}for(r!==r?(o=(1<<e)-1,s=Ns(2,t-1),i=0):r===1/0||r===-1/0?(o=(1<<e)-1,s=0,i=r<0?1:0):r===0?(o=0,s=0,i=1/r===-1/0?1:0):(i=r<0,r=yG(r),r>=Ns(2,1-n)?(o=wG(mw(bG(r)/mG),1023),s=d(r/Ns(2,o)*Ns(2,t)),s/Ns(2,t)>=2&&(o=o+1,s=1),o>n?(o=(1<<e)-1,s=0):(o=o+n,s=s-Ns(2,t))):(o=0,s=d(r/Ns(2,1-n-t)))),c=[],u=t;u;u-=1)c.push(s%2?1:0),s=mw(s/2);for(u=e;u;u-=1)c.push(o%2?1:0),o=mw(o/2);for(c.push(i?1:0),c.reverse(),f=c.join(""),h=[];f.length;)h.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return h}function YB(r,e,t){var n=[],i,o,s,a,u,c,f,h;for(i=r.length;i;i-=1)for(s=r[i-1],o=8;o;o-=1)n.push(s%2?1:0),s=s>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,f=parseInt(a.substring(1,1+e),2),h=parseInt(a.substring(1+e),2),f===(1<<e)-1?h!==0?NaN:c*(1/0):f>0?c*Ns(2,f-u)*(1+h/Ns(2,t)):h!==0?c*Ns(2,-(u-1))*(h/Ns(2,t)):c<0?-0:0}function LG(r){return YB(r,11,52)}function PG(r){return VB(r,11,52)}function BG(r){return YB(r,8,23)}function MG(r){return VB(r,8,23)}(function(){var r=function(g){if(g=vr.ToInt32(g),g<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=g,this._bytes=[],this._bytes.length=g;var b;for(b=0;b<this.byteLength;b+=1)this._bytes[b]=0;PA(this)};bt.ArrayBuffer=bt.ArrayBuffer||r;var e=function(){};function t(d,g,b){var v;return v=function(w,y,_){var E,S,A,B;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=vr.ToInt32(arguments[0]),_<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===v)for(E=arguments[0],this.length=E.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)this._setter(A,E._getter(A));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer"))for(S=arguments[0],this.length=vr.ToUint32(S.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)B=S[A],this._setter(A,Number(B));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=w,this.byteOffset=vr.ToUint32(y),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=vr.ToUint32(_),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=v,PA(this),_G(this)},v.prototype=new e,v.prototype.BYTES_PER_ELEMENT=d,v.prototype._pack=g,v.prototype._unpack=b,v.BYTES_PER_ELEMENT=d,v.prototype._getter=function(w){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return qB;var y=[],_,E;for(_=0,E=this.byteOffset+w*this.BYTES_PER_ELEMENT;_<this.BYTES_PER_ELEMENT;_+=1,E+=1)y.push(this.buffer._bytes[E]);return this._unpack(y)},v.prototype.get=v.prototype._getter,v.prototype._setter=function(w,y){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return qB;var _=this._pack(y),E,S;for(E=0,S=this.byteOffset+w*this.BYTES_PER_ELEMENT;E<this.BYTES_PER_ELEMENT;E+=1,S+=1)this.buffer._bytes[S]=_[E]},v.prototype.set=function(w,y){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var _,E,S,A,B,T,Z,ie,G,ae;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(_=arguments[0],S=vr.ToUint32(arguments[1]),S+_.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(ie=this.byteOffset+S*this.BYTES_PER_ELEMENT,G=_.length*this.BYTES_PER_ELEMENT,_.buffer===this.buffer){for(ae=[],B=0,T=_.byteOffset;B<G;B+=1,T+=1)ae[B]=_.buffer._bytes[T];for(B=0,Z=ie;B<G;B+=1,Z+=1)this.buffer._bytes[Z]=ae[B]}else for(B=0,T=_.byteOffset,Z=ie;B<G;B+=1,T+=1,Z+=1)this.buffer._bytes[Z]=_.buffer._bytes[T]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(E=arguments[0],A=vr.ToUint32(E.length),S=vr.ToUint32(arguments[1]),S+A>this.length)throw new RangeError("Offset plus length of array is out of range");for(B=0;B<A;B+=1)T=E[B],this._setter(S+B,Number(T))}else throw new TypeError("Unexpected argument type(s)")},v.prototype.subarray=function(w,y){function _(S,A,B){return S<A?A:S>B?B:S}w=vr.ToInt32(w),y=vr.ToInt32(y),arguments.length<1&&(w=0),arguments.length<2&&(y=this.length),w<0&&(w=this.length+w),y<0&&(y=this.length+y),w=_(w,0,this.length),y=_(y,0,this.length);var E=y-w;return E<0&&(E=0),new this.constructor(this.buffer,this.byteOffset+w*this.BYTES_PER_ELEMENT,E)},v}var n=t(1,EG,AG),i=t(1,xG,GB),o=t(1,SG,GB),s=t(2,TG,CG),a=t(2,RG,DG),u=t(4,IG,OG),c=t(4,NG,kG),f=t(4,MG,BG),h=t(8,PG,LG);bt.Int8Array=bt.Int8Array||n,bt.Uint8Array=bt.Uint8Array||i,bt.Uint8ClampedArray=bt.Uint8ClampedArray||o,bt.Int16Array=bt.Int16Array||s,bt.Uint16Array=bt.Uint16Array||a,bt.Int32Array=bt.Int32Array||u,bt.Uint32Array=bt.Uint32Array||c,bt.Float32Array=bt.Float32Array||f,bt.Float64Array=bt.Float64Array||h})();(function(){function r(o,s){return vr.IsCallable(o.get)?o.get(s):o[s]}var e=(function(){var o=new bt.Uint16Array([4660]),s=new bt.Uint8Array(o.buffer);return r(s,0)===18})(),t=function(s,a,u){if(arguments.length===0)s=new bt.ArrayBuffer(0);else if(!(s instanceof bt.ArrayBuffer||vr.Class(s)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=s||new bt.ArrayBuffer(0),this.byteOffset=vr.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=vr.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");PA(this)};function n(o){return function(s,a){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");s+=this.byteOffset;var u=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),c=[],f;for(f=0;f<o.BYTES_PER_ELEMENT;f+=1)c.push(r(u,f));return!!a==!!e&&c.reverse(),r(new o(new bt.Uint8Array(c).buffer),0)}}t.prototype.getUint8=n(bt.Uint8Array),t.prototype.getInt8=n(bt.Int8Array),t.prototype.getUint16=n(bt.Uint16Array),t.prototype.getInt16=n(bt.Int16Array),t.prototype.getUint32=n(bt.Uint32Array),t.prototype.getInt32=n(bt.Int32Array),t.prototype.getFloat32=n(bt.Float32Array),t.prototype.getFloat64=n(bt.Float64Array);function i(o){return function(s,a,u){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new o([a]),f=new bt.Uint8Array(c.buffer),h=[],d,g;for(d=0;d<o.BYTES_PER_ELEMENT;d+=1)h.push(r(f,d));!!u==!!e&&h.reverse(),g=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),g.set(h)}}t.prototype.setUint8=i(bt.Uint8Array),t.prototype.setInt8=i(bt.Int8Array),t.prototype.setUint16=i(bt.Uint16Array),t.prototype.setInt16=i(bt.Int16Array),t.prototype.setUint32=i(bt.Uint32Array),t.prototype.setInt32=i(bt.Int32Array),t.prototype.setFloat32=i(bt.Float32Array),t.prototype.setFloat64=i(bt.Float64Array),bt.DataView=bt.DataView||t})()});var QB=ot((Sre,JB)=>{Ne();Le();ke();var KB=$B().Writable,FG=Qu(),Rg=WB();typeof Uint8Array>"u"?yw=XB().Uint8Array:yw=Uint8Array;var yw;function ic(r,e){if(!(this instanceof ic))return new ic(r,e);typeof r=="function"&&(e=r,r={}),r||(r={});var t=r.encoding,n=!1;t?(t=String(t).toLowerCase(),(t==="u8"||t==="uint8")&&(t="uint8array")):n=!0,KB.call(this,{objectMode:!0}),this.encoding=t,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}JB.exports=ic;FG(ic,KB);ic.prototype._write=function(r,e,t){this.body.push(r),t()};ic.prototype.inferEncoding=function(r){var e=r===void 0?this.body[0]:r;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};ic.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?zG(this.body):this.encoding==="string"?jG(this.body):this.encoding==="buffer"?$G(this.body):this.encoding==="uint8array"?WG(this.body):this.body)};function UG(r){return/Array\]$/.test(Object.prototype.toString.call(r))}function ZB(r){return typeof r=="string"||UG(r)||r&&typeof r.subarray=="function"}function jG(r){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):ZB(i)?e.push(Rg(i)):e.push(Rg(String(i)))}return Buffer.isBuffer(r[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function $G(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];Buffer.isBuffer(n)?e.push(n):ZB(n)?e.push(Rg(n)):e.push(Rg(String(n)))}return Buffer.concat(e)}function zG(r){for(var e=[],t=0;t<r.length;t++)e.push.apply(e,r[t]);return e}function WG(r){for(var e=0,t=0;t<r.length;t++)typeof r[t]=="string"&&(r[t]=Rg(r[t])),e+=r[t].length;for(var n=new yw(e),t=0,i=0;t<r.length;t++)for(var o=r[t],s=0;s<o.length;s++)n[i++]=o[s];return n}});var x3={};Uo(x3,{AbortException:()=>Ys,AnnotationEditorLayer:()=>$v,AnnotationEditorParamsType:()=>Bt,AnnotationEditorType:()=>vt,AnnotationEditorUIManager:()=>vu,AnnotationLayer:()=>Lv,AnnotationMode:()=>Za,AnnotationType:()=>qr,CSSConstants:()=>cv,ColorPicker:()=>hm,DOMSVGFactory:()=>Of,DrawLayer:()=>zv,FeatureTest:()=>Ur,GlobalWorkerOptions:()=>_s,ImageKind:()=>tm,InvalidPDFException:()=>bp,MathClamp:()=>Wn,OPS:()=>yp,OutputScale:()=>Mo,PDFDataRangeTransport:()=>fm,PDFDateString:()=>Rf,PDFWorker:()=>_p,PasswordResponses:()=>xM,PermissionFlag:()=>AM,PixelsPerInch:()=>tl,RenderingCancelledException:()=>wp,ResponseException:()=>Df,SignatureExtractor:()=>Es,SupportedImageMimeTypes:()=>uv,TextLayer:()=>vp,TouchManager:()=>lm,Util:()=>st,VerbosityLevel:()=>u0,XfaLayer:()=>om,applyOpacity:()=>OM,build:()=>OF,createValidAbsoluteUrl:()=>vT,fetchData:()=>Ep,findContrastColor:()=>NM,getDocument:()=>CF,getFilenameFromUrl:()=>RM,getPdfFilenameFromUrl:()=>DM,getRGB:()=>Ap,getUuid:()=>ET,getXfaPageViewport:()=>IM,isDataScheme:()=>f0,isPdfFile:()=>c_,isValidExplicitDest:()=>hF,noContextMenu:()=>Zi,normalizeUnicode:()=>TM,renderRichText:()=>AT,setLayerDimensions:()=>wu,shadow:()=>wt,stopEvent:()=>Cr,updateUrlHash:()=>_T,version:()=>IF});function HG(r){Number.isInteger(r)&&(l_=r)}function GG(){return l_}function u_(r){l_>=u0.INFOS&&console.info(`Info: ${r}`)}function _t(r){l_>=u0.WARNINGS&&console.warn(`Warning: ${r}`)}function dr(r){throw new Error(r)}function Mt(r,e){r||dr(e)}function VG(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function vT(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=ZG(r)}catch{}let n=e?URL.parse(r,e):URL.parse(r);return VG(n)?n:null}function _T(r,e,t=!1){let n=URL.parse(r);return n?(n.hash=e,n.href):t&&vT(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function wt(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}function SM(r){(typeof r!="object"||r?.length===void 0)&&dr("Invalid argument for bytesToString");let e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);let n=[];for(let i=0;i<e;i+=t){let o=Math.min(i+t,e),s=r.subarray(i,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function c0(r){typeof r!="string"&&dr("Invalid argument for stringToBytes");let e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function YG(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function XG(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function KG(){try{return new Function(""),!0}catch{return!1}}function ZG(r){return decodeURIComponent(escape(r))}function TM(r){return UA||(UA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,iM=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(UA,(e,t,n)=>t?t.normalize("NFKC"):iM.get(n))}function ET(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);return crypto.getRandomValues(r),SM(r)}function JG(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;let[n,i,...o]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;let s=o.length,a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let u of o)if(!(typeof u=="number"||a&&u===null))return!1;return!0}function Wn(r,e,t){return Math.min(Math.max(r,e),t)}function CM(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(SM(r))}function QG(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):c0(atob(r))}async function Ep(r,e="text"){if(Lg(r,document.baseURI)){let t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}function f0(r){let e=r.length,t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function c_(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function RM(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function DM(r,e="document.pdf"){if(typeof r!="string")return e;if(f0(r))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;let i=a=>{try{let u=decodeURIComponent(a);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:a):u}catch{return a}},o=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(o.test(s))return i(s);if(n.searchParams.size>0){let a=Array.from(n.searchParams.values()).reverse();for(let c of a)if(o.test(c))return i(c);let u=Array.from(n.searchParams.keys()).reverse();for(let c of u)if(o.test(c))return i(c)}if(n.hash){let u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return i(u[0])}return e}function Lg(r,e){let t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function Zi(r){r.preventDefault()}function Cr(r){r.preventDefault(),r.stopPropagation()}function eV(r){console.log("Deprecated API usage: "+r)}function IM(r,{scale:e=1,rotation:t=0}){let{width:n,height:i}=r.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new am({viewBox:o,userUnit:1,scale:e,rotation:t})}function Ap(r){if(r.startsWith("#")){let e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_t(`Not a valid color format: "${r}"`),[0,0,0])}function tV(r){let e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(let t of r.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;r.set(t,Ap(n))}e.remove()}function Tr(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform();return[e,t,n,i,o,s]}function fo(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform().invertSelf();return[e,t,n,i,o,s]}function wu(r,e,t=!1,n=!0){if(e instanceof am){let{pageWidth:i,pageHeight:o}=e.rawDims,{style:s}=r,a=Ur.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${o}px`,f=a?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(s.width=f,s.height=h):(s.width=h,s.height=f)}n&&r.setAttribute("data-main-rotation",e.rotation)}function OM(r,e,t,n){n=Math.min(Math.max(n??1,0),1);let i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function sM(r,e){let t=r[0]/255,n=r[1]/255,i=r[2]/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=(o+s)/2;if(o===s)e[0]=e[1]=0;else{let u=o-s;switch(e[1]=a<.5?u/(o+s):u/(2-o-s),o){case t:e[0]=((n-i)/u+(n<i?6:0))*60;break;case n:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-n)/u+4)*60;break}}e[2]=a}function XA(r,e){let t=r[0],n=r[1],i=r[2],o=(1-Math.abs(2*i-1))*n,s=o*(1-Math.abs(t/60%2-1)),a=i-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 1:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 2:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 3:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 4:e[0]=s+a,e[1]=a,e[2]=o+a;break;case 5:case 6:e[0]=o+a,e[1]=a,e[2]=s+a;break}}function oM(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function aM(r,e,t){XA(r,t),t.map(oM);let n=.2126*t[0]+.7152*t[1]+.0722*t[2];XA(e,t),t.map(oM);let i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}function NM(r,e){let t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776,n=lM.get(t);if(n)return n;let i=new Float32Array(9),o=i.subarray(0,3),s=i.subarray(3,6);sM(r,s);let a=i.subarray(6,9);sM(e,a);let u=a[2]<.5,c=u?12:4.5;if(s[2]=u?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),aM(s,a,o)<c){let f,h;u?(f=s[2],h=1):(f=0,h=s[2]);let d=.005;for(;h-f>d;){let g=s[2]=(f+h)/2;u===aM(s,a,o)<c?f=g:h=g}s[2]=u?h:f}return XA(s,o),n=st.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),lM.set(t,n),n}function AT({html:r,dir:e,className:t},n){let i=document.createDocumentFragment();if(typeof r=="string"){let o=document.createElement("p");o.dir=e||"auto";let s=r.split(/(?:\r\n?|\n)/);for(let a=0,u=s.length;a<u;++a){let c=s[a];o.append(document.createTextNode(c)),a<u-1&&o.append(document.createElement("br"))}i.append(o)}else om.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function kM(r){let e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case Dg.moveTo:e.moveTo(r[t++],r[t++]);break;case Dg.lineTo:e.lineTo(r[t++],r[t++]);break;case Dg.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Dg.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Dg.closePath:e.closePath();break;default:_t(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}function UM(r,e,t){for(let n of t)e.addEventListener(n,r[n].bind(r))}function rV(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Qn)return r;let e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nV(r){if(Qn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return c0(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bw(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}function cM(){}function hi(r){if(r instanceof Ys||r instanceof bp||r instanceof av||r instanceof Df||r instanceof rm)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ys(r.message);case"InvalidPDFException":return new bp(r.message);case"PasswordException":return new av(r.message,r.code);case"ResponseException":return new Df(r.message,r.status,r.missing);case"UnknownErrorException":return new rm(r.message,r.details)}return new rm(r.message,r.toString())}async function xT(r){let t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}function vw(r,e,t,n,i,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],o)}function Mx(r,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}function jA(r,e,t,n,i,o,s,a){let u=e.coords,c=e.colors,f=r.data,h=r.width*4,d;u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d),u[n+1]>u[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d);let g=(u[t]+e.offsetX)*e.scaleX,b=(u[t+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,y=(u[i]+e.offsetX)*e.scaleX,_=(u[i+1]+e.offsetY)*e.scaleY;if(b>=_)return;let E=c[o],S=c[o+1],A=c[o+2],B=c[s],T=c[s+1],Z=c[s+2],ie=c[a],G=c[a+1],ae=c[a+2],U=Math.round(b),V=Math.round(_),ue,Ae,ve,z,O,oe,q,M;for(let H=U;H<=V;H++){if(H<w){let P=H<b?0:(b-H)/(b-w);ue=g-(g-v)*P,Ae=E-(E-B)*P,ve=S-(S-T)*P,z=A-(A-Z)*P}else{let P;H>_?P=1:w===_?P=0:P=(w-H)/(w-_),ue=v-(v-y)*P,Ae=B-(B-ie)*P,ve=T-(T-G)*P,z=Z-(Z-ae)*P}let j;H<b?j=0:H>_?j=1:j=(b-H)/(b-_),O=g-(g-y)*j,oe=E-(E-ie)*j,q=S-(S-G)*j,M=A-(A-ae)*j;let Q=Math.round(Math.min(ue,O)),K=Math.round(Math.max(ue,O)),ee=h*H+Q*4;for(let P=Q;P<=K;P++)j=(ue-P)/(ue-O),j<0?j=0:j>1&&(j=1),f[ee++]=Ae-(Ae-oe)*j|0,f[ee++]=ve-(ve-q)*j|0,f[ee++]=z-(z-M)*j|0,f[ee++]=255}}function sV(r,e,t){let n=e.coords,i=e.colors,o,s;switch(e.type){case HA.LATTICE:let a=e.verticesPerRow,u=Math.floor(n.length/a)-1,c=a-1;for(o=0;o<u;o++){let f=o*a;for(let h=0;h<c;h++,f++)jA(r,t,n[f],n[f+1],n[f+a],i[f],i[f+1],i[f+a]),jA(r,t,n[f+a+1],n[f+1],n[f+a],i[f+a+1],i[f+1],i[f+a])}break;case HA.TRIANGLES:for(o=0,s=n.length;o<s;o+=3)jA(r,t,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}function oV(r){switch(r[0]){case"RadialAxial":return new Fx(r);case"Mesh":return new Ux(r);case"Dummy":return new jx}throw new Error(`Unknown IR type: ${r[0]}`)}function aV({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let a=Ur.isLittleEndian?4278190080:255,[u,c]=s?[o,a]:[a,o],f=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let g=0;for(let b=0;b<i;b++){for(let w=e+f;e<w;e++){let y=e<d?r[e]:255;t[g++]=y&128?c:u,t[g++]=y&64?c:u,t[g++]=y&32?c:u,t[g++]=y&16?c:u,t[g++]=y&8?c:u,t[g++]=y&4?c:u,t[g++]=y&2?c:u,t[g++]=y&1?c:u}if(h===0)continue;let v=e<d?r[e++]:255;for(let w=0;w<h;w++)t[g++]=v&1<<7-w?c:u}return{srcPos:e,destPos:g}}function uV(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,o,s,a){e.transform(t,n,i,o,s,a),this.__originalTransform(t,n,i,o,s,a)},r.setTransform=function(t,n,i,o,s,a){e.setTransform(t,n,i,o,s,a),this.__originalSetTransform(t,n,i,o,s,a)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,o,s,a){e.bezierCurveTo(t,n,i,o,s,a),this.__originalBezierCurveTo(t,n,i,o,s,a)},r.rect=function(t,n,i,o){e.rect(t,n,i,o),this.__originalRect(t,n,i,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}function Ew(r,e,t,n,i,o,s,a,u,c){let[f,h,d,g,b,v]=Tr(r);if(h===0&&d===0){let _=s*f+b,E=Math.round(_),S=a*g+v,A=Math.round(S),B=(s+u)*f+b,T=Math.abs(Math.round(B)-E)||1,Z=(a+c)*g+v,ie=Math.abs(Math.round(Z)-A)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(g),E,A),r.drawImage(e,t,n,i,o,0,0,T,ie),r.setTransform(f,h,d,g,b,v),[T,ie]}if(f===0&&g===0){let _=a*d+b,E=Math.round(_),S=s*h+v,A=Math.round(S),B=(a+c)*d+b,T=Math.abs(Math.round(B)-E)||1,Z=(s+u)*h+v,ie=Math.abs(Math.round(Z)-A)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,E,A),r.drawImage(e,t,n,i,o,0,0,ie,T),r.setTransform(f,h,d,g,b,v),[ie,T]}r.drawImage(e,t,n,i,o,s,a,u,c);let w=Math.hypot(f,h),y=Math.hypot(d,g);return[w*u,y*c]}function yM(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c,f=e.data,h=a.data,d,g,b,v;if(e.kind===tm.GRAYSCALE_1BPP){let w=f.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),_=y.length,E=n+7>>3,S=4294967295,A=Ur.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(b=d<o?vi:i,c=0,g=0;g<b;g++){let B=w-u,T=0,Z=B>E?n:B*8-7,ie=Z&-8,G=0,ae=0;for(;T<ie;T+=8)ae=f[u++],y[c++]=ae&128?S:A,y[c++]=ae&64?S:A,y[c++]=ae&32?S:A,y[c++]=ae&16?S:A,y[c++]=ae&8?S:A,y[c++]=ae&4?S:A,y[c++]=ae&2?S:A,y[c++]=ae&1?S:A;for(;T<Z;T++)G===0&&(ae=f[u++],G=128),y[c++]=ae&G?S:A,G>>=1}for(;c<_;)y[c++]=0;r.putImageData(a,0,d*vi)}}else if(e.kind===tm.RGBA_32BPP){for(g=0,v=n*vi*4,d=0;d<o;d++)h.set(f.subarray(u,u+v)),u+=v,r.putImageData(a,0,g),g+=vi;d<s&&(v=n*i*4,h.set(f.subarray(u,u+v)),r.putImageData(a,0,g))}else if(e.kind===tm.RGB_24BPP)for(b=vi,v=n*b,d=0;d<s;d++){for(d>=o&&(b=i,v=n*b),c=0,g=v;g--;)h[c++]=f[u++],h[c++]=f[u++],h[c++]=f[u++],h[c++]=255;r.putImageData(a,0,d*vi)}else throw new Error(`bad image kind: ${e.kind}`)}function bM(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c=e.data,f=a.data;for(let h=0;h<s;h++){let d=h<o?vi:i;({srcPos:u}=aV({src:c,srcPos:u,dest:f,width:n,height:d,nonBlackColor:0})),r.putImageData(a,0,h*vi)}}function Ig(r,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Aw(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);let{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function wM(r,e){if(e)return!0;st.singularValueDecompose2dScale(r,Yi);let t=Math.fround(Mo.pixelRatio*tl.PDF_TO_CSS_UNITS);return Yi[0]<=t&&Yi[1]<=t}function dV(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let f=a(t);return f=unescape(f),f=u(f),f=c(f),o(f)}if(t=s(r),t){let f=c(t);return o(f)}if(t=n("filename","i").exec(r),t){t=t[1];let f=a(t);return f=c(f),o(f)}function n(f,h){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(f,h){if(f){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let d=new TextDecoder(f,{fatal:!0}),g=c0(h);h=d.decode(g),e=!1}catch{}}return h}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function s(f){let h=[],d,g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=g.exec(f))!==null;){let[,v,w,y]=d;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[w,y]}let b=[];for(let v=0;v<h.length&&v in h;++v){let[w,y]=h[v];y=a(y),w&&(y=unescape(y),v===0&&(y=u(y))),b.push(y)}return b.join("")}function a(f){if(f.startsWith('"')){let h=f.slice(1).split('\\"');for(let d=0;d<h.length;++d){let g=h[d].indexOf('"');g!==-1&&(h[d]=h[d].slice(0,g),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}f=h.join('"')}return f}function u(f){let h=f.indexOf("'");if(h===-1)return f;let d=f.slice(0,h),b=f.slice(h+1).replace(/^[^']*'/,"");return i(d,b)}function c(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,g,b){if(g==="q"||g==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(d,b);try{b=atob(b)}catch{}return i(d,b)})}return""}function yF(r,e){let t=new Headers;if(!r||!e||typeof e!="object")return t;for(let n in e){let i=e[n];i!==void 0&&t.append(n,i)}return t}function f_(r){return URL.parse(r)?.origin??null}function bF({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){let i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function wF(r){let e=r.get("Content-Disposition");if(e){let t=dV(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(c_(t))return t}return null}function h0(r,e){return new Df(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function vF(r){return r===200||r===206}function _F(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EF(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}function pV(r){let e=r.response;return typeof e!="string"?e:c0(e).buffer}function mV(r){if(gV.test(r))return new URL(r);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}function CF(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let e=new hS,{docId:t}=e,n=r.url?rV(r.url):null,i=r.data?nV(r.data):null,o=r.httpHeaders||null,s=r.withCredentials===!0,a=r.password??null,u=r.range instanceof fm?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16,f=r.worker instanceof _p?r.worker:null,h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!f0(r.docBaseUrl)?r.docBaseUrl:null,g=bw(r.cMapUrl),b=r.cMapPacked!==!1,v=r.CMapReaderFactory||(Qn?Ix:bv),w=bw(r.iccUrl),y=bw(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Qn?Ox:_v),E=bw(r.wasmUrl),S=r.WasmFactory||(Qn?Nx:Av),A=r.stopAtErrors!==!0,B=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,T=r.isEvalSupported!==!1,Z=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Qn,ie=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Qn&&(Ur.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,ae=typeof r.disableFontFace=="boolean"?r.disableFontFace:Qn,U=r.fontExtraProperties===!0,V=r.enableXfa===!0,ue=r.ownerDocument||globalThis.document,Ae=r.disableRange===!0,ve=r.disableStream===!0,z=r.disableAutoFetch===!0,O=r.pdfBug===!0,oe=r.CanvasFactory||(Qn?Dx:xx),q=r.FilterFactory||(Qn?Rx:Sx),M=r.enableHWA===!0,H=r.useWasm!==!1,j=u?u.length:r.length??NaN,Q=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Qn&&!ae,K=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===bv&&_===_v&&S===Av&&g&&y&&E&&Lg(g,document.baseURI)&&Lg(y,document.baseURI)&&Lg(E,document.baseURI)),ee=null;HG(h);let P={canvasFactory:new oe({ownerDocument:ue,enableHWA:M}),filterFactory:new q({docId:t,ownerDocument:ue}),cMapReaderFactory:K?null:new v({baseUrl:g,isCompressed:b}),standardFontDataFactory:K?null:new _({baseUrl:y}),wasmFactory:K?null:new S({baseUrl:E})};f||(f=_p.create({verbosity:h,port:_s.workerPort}),e._worker=f);let I={docId:t,apiVersion:"5.4.530",data:i,password:a,disableAutoFetch:z,rangeChunkSize:c,length:j,docBaseUrl:d,enableXfa:V,evaluatorOptions:{maxImageSize:B,disableFontFace:ae,ignoreErrors:A,isEvalSupported:T,isOffscreenCanvasSupported:Z,isImageDecoderSupported:ie,canvasMaxAreaInBytes:G,fontExtraProperties:U,useSystemFonts:Q,useWasm:H,useWorkerFetch:K,cMapUrl:g,iccUrl:w,standardFontDataUrl:y,wasmUrl:E}},k={ownerDocument:ue,pdfBug:O,styleElement:ee,loadingParams:{disableAutoFetch:z,enableXfa:V}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let ne=f.messageHandler.sendWithPromise("GetDocRequest",I,i?[i.buffer]:null),pe;if(u)pe=new Kx(u,{disableRange:Ae,disableStream:ve});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let F=Lg(n)?Qx:Qn?oS:nS;pe=new F({url:n,length:j,httpHeaders:o,withCredentials:s,rangeChunkSize:c,disableRange:Ae,disableStream:ve})}return ne.then(F=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let R=new fc(t,F,f.port),te=new gS(R,e,pe,k,P,M);e._transport=te,R.send("Ready",null)})}).catch(e._capability.reject),e}function EM(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Ng(r){return Math.max(0,Math.min(255,255*r))}var Tw,Qn,qA,Cw,qG,Qre,Vi,Za,im,vt,Bt,AM,HA,on,tm,qr,Dh,u0,yp,Dg,xM,l_,Lf,av,rm,bp,Df,GA,Ys,Ur,FA,Ja,Rw,VA,st,UA,iM,Mh,sm,om,ha,lc,tl,am,wp,lv,wm,Rf,Mo,uv,YA,cv,lM,Dl,Il,us,cs,vm,Ol,Hh,Gh,_m,Wv,LM,On,PM,BM,Ih,Pg,ga,KA,Em,hc,ya,nl,MM,FM,JA,ZA,dc,pc,Vh,gc,tr,Mn,qv,QA,Yh,Am,Fn,Xh,Dw,ST,ex,Hr,Nl,xm,Sr,tx,Hv,jM,If,Gv,rx,Kh,Ri,Zh,Lr,ln,Jh,fs,Qh,hs,Un,kl,Ll,ed,Pl,go,ds,mc,Sm,Tm,td,Cm,mo,Bl,rd,Ml,yo,Vv,Fl,nd,Rm,Ul,yc,id,jl,Dm,Xr,Kt,ba,$l,zl,Im,sd,Om,Wl,bo,wa,Nm,km,ps,it,Iw,nx,$M,zM,Bg,WM,qM,HM,ix,GM,VM,YM,XM,Yn,da,KM,ZM,sx,JM,Mg,ox,jh,vu,gn,wo,Ps,od,vo,Di,ad,_o,pi,va,bc,Eo,ql,Vs,Fg,Ow,Xn,fv,xn,gs,wc,gr,Lm,vc,Bs,_c,Ec,Ac,Pm,ax,Fh,ld,xc,Bm,Mm,Fm,Um,jm,_a,Sc,Ea,Tc,Aa,_u,QM,eF,tF,TT,lm,Cc,Ms,Er,cr,xa,ud,Hl,$m,Sn,Rc,Sa,ms,Gl,zm,Dc,Ii,Wm,Ic,Ta,Ao,cd,fd,ys,Oc,qm,Yv,mt,lx,Hm,ux,Nw,rF,nF,cx,kw,fx,iF,sF,oF,hx,aF,dx,lF,uF,cF,px,Ug,At,mr,gx,uM,as,ho,hv,mx,Nc,kc,Ca,Tn,Xv,fF,um,Gm,dv,hd,yx,rr,bx,dd,pd,Vm,gd,Lw,$h,pv,Vl,xo,Lc,Pc,jg,zh,gv,md,yd,bd,wd,Oi,So,Ym,nr,Fr,ks,Pw,$g,St,wx,Xm,Km,Zm,Jm,Qm,ey,ty,ry,pr,vx,vd,_x,Ex,iV,hF,Ra,Kv,Ax,ww,Yr,_d,xs,dF,pF,gF,Bw,fc,ny,mv,xx,yv,bv,wv,Bc,Ed,Da,Ia,jn,Mc,Fc,ut,Bn,zg,Oh,Mw,Nh,mF,Tx,kh,Wg,qg,Cx,Hg,Sx,vv,_v,Ev,Av,Rx,Dx,Ix,Ox,Nx,Rh,fM,hM,kx,Ad,Yl,Lx,_w,gi,mi,Uc,Fs,jc,Oa,Zt,ir,Na,yi,iy,xd,$c,zc,ka,$n,To,sy,Bx,Px,fr,Pr,Us,Sd,Td,CT,xv,ls,Dn,cm,Fx,Ux,jx,dM,Zv,$x,pM,gM,lV,mM,vi,$A,Yi,Uh,zx,Sv,cV,fV,hV,vM,Xs,Wx,qx,Hx,RT,qh,oy,ay,_s,Cd,ly,Gx,Lh,uy,cy,fy,Rd,Vx,Xl,sr,Dd,Id,hy,Xx,Yx,Kx,Zx,Jx,Qx,eS,tS,zA,WA,rS,nS,iS,sS,gV,oS,aS,lS,Og,Ni,dy,uS,Tv,yV,_M,Kl,ki,py,gy,Wc,La,my,yy,qc,by,Od,Zl,Nd,wy,kd,Hc,vy,_y,Ld,Gc,Ey,Pd,Bd,il,AF,xF,cS,Ki,Fw,fS,SF,TF,An,vp,bV,Jv,Qv,hS,Vc,Ay,xy,Sy,Ty,fm,dS,Pa,Yc,Gg,pS,Jl,js,Ba,Xc,e_,Kc,Zc,ei,Uw,RF,DF,Vg,Md,jw,_r,_p,Ma,Co,Fd,Ud,Fa,Jc,Yg,gS,Ql,mS,eu,Qc,uc,yS,IF,OF,Li,ef,jd,un,Cy,$d,Ua,Ry,tu,$s,Dy,or,bS,wS,vS,sc,NF,Rl,di,hm,Ro,Iy,zd,Oy,cc,Cv,Rv,_S,Of,wV,Nf,vV,nm,tf,Wd,bs,Ny,ES,DT,Rr,AS,Xi,oc,kF,LF,dm,xS,rl,SS,TS,CS,Dv,RS,DS,ky,IS,pm,Pi,ru,t_,r_,qd,Hd,Br,Do,nu,rf,Gd,Vd,Io,Bi,ja,$a,Mr,za,iu,Ly,Wa,Yd,nf,su,mn,ou,Ct,$w,NS,kS,LS,zw,PS,PF,BF,MF,FF,Ww,qw,BS,OS,Iv,Py,MS,By,FS,My,US,Fy,Ov,jS,$S,Uy,sf,jy,zS,gm,Nv,WS,qS,HS,kv,$y,zy,VS,GS,of,af,Xd,au,Wy,lf,Mi,qy,Qa,Hw,YS,IT,Lv,xw,Fi,Hy,uf,Ui,Kr,UF,jF,$F,Gw,el,Vw,Yw,zF,KS,WF,wr,XS,lt,ji,zs,Kd,Zd,Oo,Nt,cf,ff,Gy,Vy,Jd,Qd,lu,Yy,n_,i_,cn,Xg,qF,HF,GF,VF,YF,XF,ma,Pv,ep,hf,qa,Xy,$i,Ky,Gr,s_,KF,Bv,Zy,Jy,Qy,uu,Ws,ti,ZF,Xw,JF,QF,ZS,mm,e0,tp,JS,ym,QS,rp,t0,Ha,df,r0,bi,n0,i0,pf,zi,Wi,Cn,np,ip,zn,sp,ws,s0,Tt,eT,Kw,e3,t3,r3,tT,ac,As,Ph,n3,Zw,Jw,i3,s3,o3,a3,l3,qt,Mv,gf,Fv,qi,op,yn,mf,yf,$t,rT,nT,iT,Kg,u3,Qw,Zg,Bh,Pt,Uv,No,bn,wn,bf,ap,Kn,Rn,vs,wf,vf,_f,lp,ev,sT,Zn,o0,a0,Hi,ko,Lo,up,cp,Ef,In,pa,c3,f3,h3,kf,jv,o_,d3,Wh,oT,bm,Sw,kg,Af,Vt,aT,qs,p3,g3,lT,tv,m3,y3,b3,uT,cT,w3,Es,fT,hT,cu,Po,fu,xf,Ci,dT,Ar,vn,hu,Ga,du,fp,Va,Sf,Bo,Gi,hp,zt,Qg,em,rv,nv,iv,pT,sv,v3,Jg,Tf,dp,pu,gu,Ya,wi,mu,pp,gp,Hs,Xa,_n,Ka,yu,mp,ft,bu,hr,gT,_3,po,mT,yT,ov,Ls,$v,Gs,Jn,Cf,l0,a_,E3,Fo,bT,A3,wT,an,zv,S3=Jt(()=>{Ne();Le();ke();Tw={};Tw.d=(r,e)=>{for(var t in e)Tw.o(e,t)&&!Tw.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};Tw.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);Qn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qA=[.001,0,0,.001,0,0],Cw=1.35,qG=.35,Qre=qG/Cw,Vi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},im="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},AM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},HA={TRIANGLES:1,LATTICE:2,PATCH:3},on={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Dh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},u0={ERRORS:0,WARNINGS:1,INFOS:5},yp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Dg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},xM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},l_=u0.WARNINGS;Lf=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})(),av=class extends Lf{constructor(e,t){super(e,"PasswordException"),this.code=t}},rm=class extends Lf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},bp=class extends Lf{constructor(e){super(e,"InvalidPDFException")}},Df=class extends Lf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}},GA=class extends Lf{constructor(e){super(e,"FormatError")}},Ys=class extends Lf{constructor(e){super(e,"AbortException")}};Ur=class{static get isLittleEndian(){return wt(this,"isLittleEndian",XG())}static get isEvalSupported(){return wt(this,"isEvalSupported",KG())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return wt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return wt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){let{platform:e,userAgent:t}=navigator;return wt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},FA=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),st=class{static makeHexColor(e,t,n){return`#${FA[e]}${FA[t]}${FA[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){let i=e[n],o=e[n+1];e[n]=i*t[0]+o*t[2]+t[4],e[n+1]=i*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5];for(let f=0;f<6;f+=2){let h=e[n+f],d=e[n+f+1];e[n+f]=h*i+d*s+u,e[n+f+1]=h*o+d*a+c}}static applyInverseTransform(e,t){let n=e[0],i=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5],f=e[0],h=e[1],d=e[2],g=e[3],b=i*f+u,v=b,w=i*d+u,y=w,_=a*h+c,E=_,S=a*g+c,A=S;if(o!==0||s!==0){let B=o*f,T=o*d,Z=s*h,ie=s*g;b+=Z,y+=Z,w+=ie,v+=ie,_+=B,A+=B,S+=T,E+=T}n[0]=Math.min(n[0],b,w,v,y),n[1]=Math.min(n[1],_,S,E,A),n[2]=Math.max(n[2],b,w,v,y),n[3]=Math.max(n[3],_,S,E,A)}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){let n=e[0],i=e[1],o=e[2],s=e[3],a=n**2+i**2,u=n*o+i*s,c=o**2+s**2,f=(a+c)/2,h=Math.sqrt(f**2-(a*c-u**2));t[0]=Math.sqrt(f+h||1),t[1]=Math.sqrt(f-h||1)}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;let o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>s?null:[n,o,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,i),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,i)}static bezierBoundingBox(e,t,n,i,o,s,a,u,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,u),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,u),se(this,Ja,VA).call(this,e,n,o,a,t,i,s,u,3*(-e+3*(n-o)+a),6*(e-2*n+o),3*(n-e),c),se(this,Ja,VA).call(this,e,n,o,a,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),c)}};Ja=new WeakSet,Rw=function(e,t,n,i,o,s,a,u,c,f){if(c<=0||c>=1)return;let h=1-c,d=c*c,g=d*c,b=h*(h*(h*e+3*c*t)+3*d*n)+g*i,v=h*(h*(h*o+3*c*s)+3*d*a)+g*u;f[0]=Math.min(f[0],b),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],b),f[3]=Math.max(f[3],v)},VA=function(e,t,n,i,o,s,a,u,c,f,h,d){if(Math.abs(c)<1e-12){Math.abs(f)>=1e-12&&se(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,-h/f,d);return}let g=f**2-4*h*c;if(g<0)return;let b=Math.sqrt(g),v=2*c;se(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,(-f+b)/v,d),se(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,(-f-b)/v,d)},X(st,Ja);UA=null,iM=null;Mh="pdfjs_internal_id_";typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});sm=class r{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function i(o){if(!o)return;let s=null,a=o.name;if(a==="#text")s=o.value;else if(r.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&t.push({str:s}),!!o.children)for(let u of o.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},om=class{static setupStorage(e,t,n,i,o){let s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(let a of n.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{let u=a.target.options,c=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:o}){let{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(let[u,c]of Object.entries(s))if(c!=null)switch(u){case"class":c.length&&e.setAttribute(u,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,c)}a&&o.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,o=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:o,linkService:n});let a=o!=="richText",u=e.div;if(u.append(s),e.viewport){let h=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=h}a&&u.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let h=document.createTextNode(i.value);s.append(h),a&&sm.shouldBuildText(i.name)&&c.push(h)}return{textDivs:c}}let f=[[i,-1,s]];for(;f.length>0;){let[h,d,g]=f.at(-1);if(d+1===h.children.length){f.pop();continue}let b=h.children[++f.at(-1)[1]];if(b===null)continue;let{name:v}=b;if(v==="#text"){let y=document.createTextNode(b.value);c.push(y),g.append(y);continue}let w=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(w),b.attributes&&this.setAttributes({html:w,element:b,storage:t,intent:o,linkService:n}),b.children?.length>0)f.push([b,-1,w]);else if(b.value){let y=document.createTextNode(b.value);a&&sm.shouldBuildText(v)&&c.push(y),w.append(y)}}for(let h of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},ha="http://www.w3.org/2000/svg",lc=class lc{};Qe(lc,"CSS",96),Qe(lc,"PDF",72),Qe(lc,"PDF_TO_CSS_UNITS",lc.CSS/lc.PDF);tl=lc;am=class r{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=s,n*=t;let u=(e[2]+e[0])/2,c=(e[3]+e[1])/2,f,h,d,g;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,h=0,d=0,g=1;break;case 90:f=0,h=1,d=1,g=0;break;case 270:f=0,h=-1,d=-1,g=0;break;case 0:f=1,h=0,d=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,g=-g);let b,v,w,y;f===0?(b=Math.abs(c-e[1])*n+o,v=Math.abs(u-e[0])*n+s,w=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(b=Math.abs(u-e[0])*n+o,v=Math.abs(c-e[1])*n+s,w=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[f*n,h*n,d*n,g*n,b-f*n*u-d*n*c,v-h*n*u-g*n*c],this.width=w,this.height=y}get rawDims(){let e=this.viewBox;return wt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){let n=[e,t];return st.applyTransform(n,this.transform),n}convertToViewportRectangle(e){let t=[e[0],e[1]];st.applyTransform(t,this.transform);let n=[e[2],e[3]];return st.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){let n=[e,t];return st.applyInverseTransform(n,this.transform),n}},wp=class extends Lf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};lv=class{constructor(){Qe(this,"started",Object.create(null));Qe(this,"times",[])}time(e){e in this.started&&_t(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_t(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:i,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-i}ms
`);return e.join("")}};Rf=class{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,wm)||L(this,wm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=l(this,wm).exec(e);if(!t)return null;let n=parseInt(t[1],10),i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;let c=t[7]||"Z",f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=f,a+=h):c==="+"&&(s-=f,a-=h),new Date(Date.UTC(n,i,o,s,a,u))}};wm=new WeakMap,X(Rf,wm);Mo=class r{constructor(){let{pixelRatio:e}=r;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,o=-1){let s=1/0,a=1/0,u=1/0;n=r.capPixels(n,o),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(a=i/e,u=i/t);let c=Math.min(s,a,u);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){let n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}},uv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],YA=class{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},cv=class{static get commentForegroundColor(){let e=document.createElement("span");e.classList.add("comment","sidebar");let{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);let{color:n}=window.getComputedStyle(e);return e.remove(),wt(this,"commentForegroundColor",Ap(n))}};lM=new Map;ga=class ga{constructor(e){X(this,On);X(this,Dl,null);X(this,Il,null);X(this,us);X(this,cs,null);X(this,vm,null);X(this,Ol,null);X(this,Hh,null);X(this,Gh,null);L(this,us,e),l(ga,_m)||L(ga,_m,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){let e=L(this,Dl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=l(this,us)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Zi,{signal:t}),e.addEventListener("pointerdown",se(ga,Wv,LM),{signal:t}));let n=L(this,cs,document.createElement("div"));n.className="buttons",e.append(n);let i=l(this,us).toolbarPosition;if(i){let{style:o}=e,s=l(this,us)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,Dl)}hide(){l(this,Dl).classList.add("hidden"),l(this,Il)?.hideDropdown()}show(){l(this,Dl).classList.remove("hidden"),l(this,vm)?.shown(),l(this,Ol)?.shown()}addDeleteButton(){let{editorType:e,_uiManager:t}=l(this,us),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(ga,_m)[e]),se(this,On,Ih).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,cs).append(n)}async addAltText(e){let t=await e.render();se(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg)),L(this,vm,e)}addComment(e,t=null){if(l(this,Ol))return;let n=e.renderForToolbar();if(!n)return;se(this,On,Ih).call(this,n);let i=L(this,Hh,l(this,On,Pg));t?(l(this,cs).insertBefore(n,t),l(this,cs).insertBefore(i,t)):l(this,cs).append(n,i),L(this,Ol,e),e.toolbar=this}addColorPicker(e){if(l(this,Il))return;L(this,Il,e);let t=e.renderButton();se(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg))}async addEditSignatureButton(e){let t=L(this,Gh,await e.renderEditButton(l(this,us)));se(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg))}removeButton(e){e==="comment"&&(l(this,Ol)?.removeToolbarCommentButton(),L(this,Ol,null),l(this,Hh)?.remove(),L(this,Hh,null))}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;let i=l(this,cs).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){l(this,Gh)&&(l(this,Gh).title=e)}remove(){l(this,Dl).remove(),l(this,Il)?.destroy(),L(this,Il,null)}};Dl=new WeakMap,Il=new WeakMap,us=new WeakMap,cs=new WeakMap,vm=new WeakMap,Ol=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,_m=new WeakMap,Wv=new WeakSet,LM=function(e){e.stopPropagation()},On=new WeakSet,PM=function(e){l(this,us)._focusEventsAllowed=!1,Cr(e)},BM=function(e){l(this,us)._focusEventsAllowed=!0,Cr(e)},Ih=function(e){let t=l(this,us)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",se(this,On,PM).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",se(this,On,BM).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Zi,{signal:t}),!0)},Pg=function(){let e=document.createElement("div");return e.className="divider",e},X(ga,Wv),X(ga,_m,null);KA=ga,ZA=class{constructor(e){X(this,nl);X(this,Em,null);X(this,hc,null);X(this,ya);L(this,ya,e)}show(e,t,n){let[i,o]=se(this,nl,FM).call(this,t,n),{style:s}=l(this,hc)||L(this,hc,se(this,nl,MM).call(this));e.append(l(this,hc)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,hc).remove()}};Em=new WeakMap,hc=new WeakMap,ya=new WeakMap,nl=new WeakSet,MM=function(){let e=L(this,hc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");let t=l(this,ya)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Zi,{signal:t});let n=L(this,Em,document.createElement("div"));return n.className="buttons",e.append(n),l(this,ya).hasCommentManager()&&se(this,nl,JA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,ya).commentSelection("floating_button")}),se(this,nl,JA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,ya).highlightSelection("floating_button")}),e},FM=function(e,t){let n=0,i=0;for(let o of e){let s=o.y+o.height;if(s<n)continue;let a=o.x+(t?o.width:0);if(s>n){i=a,n=s;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]},JA=function(e,t,n,i){let o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);let s=document.createElement("span");o.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);let a=l(this,ya)._signal;a instanceof AbortSignal&&!a.aborted&&(o.addEventListener("contextmenu",Zi,{signal:a}),o.addEventListener("click",i,{signal:a})),l(this,Em).append(o)};tr=class tr{static initializeAndAddPointerId(e){(l(tr,pc)||L(tr,pc,new Set)).add(e)}static setPointer(e,t){l(tr,dc)||L(tr,dc,t),l(tr,gc)??L(tr,gc,e)}static setTimeStamp(e){L(tr,Vh,e)}static isSamePointerId(e){return l(tr,dc)===e}static isSamePointerIdOrRemove(e){return l(tr,dc)===e?!0:(l(tr,pc)?.delete(e),!1)}static isSamePointerType(e){return l(tr,gc)===e}static isInitializedAndDifferentPointerType(e){return l(tr,gc)!==null&&!tr.isSamePointerType(e)}static isSameTimeStamp(e){return l(tr,Vh)===e}static isUsingMultiplePointers(){return l(tr,pc)?.size>=1}static clearPointerType(){L(tr,gc,null)}static clearPointerIds(){L(tr,dc,NaN),L(tr,pc,null)}static clearTimeStamp(){L(tr,Vh,NaN)}};dc=new WeakMap,pc=new WeakMap,Vh=new WeakMap,gc=new WeakMap,X(tr,dc,NaN),X(tr,pc,null),X(tr,Vh,NaN),X(tr,gc,null);Mn=tr,QA=class{constructor(){X(this,qv,0)}get id(){return`${im}${tn(this,qv)._++}`}};qv=new WeakMap;ST=class ST{constructor(){X(this,Xh);X(this,Yh,ET());X(this,Am,0);X(this,Fn,null)}static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;let o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async getFromFile(e){let{lastModified:t,name:n,size:i,type:o}=e;return se(this,Xh,Dw).call(this,`${t}_${n}_${i}_${o}`,e)}async getFromUrl(e){return se(this,Xh,Dw).call(this,e,e)}async getFromBlob(e,t){let n=await t;return se(this,Xh,Dw).call(this,e,n)}async getFromId(e){l(this,Fn)||L(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Fn)||L(this,Fn,new Map);let n=l(this,Fn).get(e);if(n?.bitmap)return n.refCounter+=1,n;let i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Yh)}_${tn(this,Am)._++}`,refCounter:1,isSvg:!1},l(this,Fn).set(e,n),l(this,Fn).set(n.id,n),n}getSvgUrl(e){let t=l(this,Fn).get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){l(this,Fn)||L(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Yh)}_`)}};Yh=new WeakMap,Am=new WeakMap,Fn=new WeakMap,Xh=new WeakSet,Dw=async function(e,t){l(this,Fn)||L(this,Fn,new Map);let n=l(this,Fn).get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Yh)}_${tn(this,Am)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await Ep(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){let o=ST._isSVGFittingCanvas,s=new FileReader,a=new Image,u=new Promise((c,f)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},s.onload=async()=>{let h=n.svgUrl=s.result;a.src=await o?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=s.onerror=f});s.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){_t(i),n=null}return l(this,Fn).set(e,n),n&&l(this,Fn).set(n.id,n),n};ex=ST,tx=class{constructor(e=128){X(this,Hr,[]);X(this,Nl,!1);X(this,xm);X(this,Sr,-1);L(this,xm,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(i&&e(),l(this,Nl))return;let u={cmd:e,undo:t,post:n,type:o};if(l(this,Sr)===-1){l(this,Hr).length>0&&(l(this,Hr).length=0),L(this,Sr,0),l(this,Hr).push(u);return}if(s&&l(this,Hr)[l(this,Sr)].type===o){a&&(u.undo=l(this,Hr)[l(this,Sr)].undo),l(this,Hr)[l(this,Sr)]=u;return}let c=l(this,Sr)+1;c===l(this,xm)?l(this,Hr).splice(0,1):(L(this,Sr,c),c<l(this,Hr).length&&l(this,Hr).splice(c)),l(this,Hr).push(u)}undo(){if(l(this,Sr)===-1)return;L(this,Nl,!0);let{undo:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),L(this,Nl,!1),L(this,Sr,l(this,Sr)-1)}redo(){if(l(this,Sr)<l(this,Hr).length-1){L(this,Sr,l(this,Sr)+1),L(this,Nl,!0);let{cmd:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),L(this,Nl,!1)}}hasSomethingToUndo(){return l(this,Sr)!==-1}hasSomethingToRedo(){return l(this,Sr)<l(this,Hr).length-1}cleanType(e){if(l(this,Sr)!==-1){for(let t=l(this,Sr);t>=0;t--)if(l(this,Hr)[t].type!==e){l(this,Hr).splice(t+1,l(this,Sr)-t),L(this,Sr,t);return}l(this,Hr).length=0,L(this,Sr,-1)}}destroy(){L(this,Hr,null)}};Hr=new WeakMap,Nl=new WeakMap,xm=new WeakMap,Sr=new WeakMap;If=class{constructor(e){X(this,Hv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=Ur.platform;for(let[n,i,o={}]of e)for(let s of n){let a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(se(this,Hv,jM).call(this,t));if(!n)return;let{callback:i,options:{bubbles:o=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),o||Cr(t))}};Hv=new WeakSet,jM=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t};Gv=class Gv{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return tV(e),wt(this,"_colors",e)}convert(e){let t=Ap(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,i]of this._colors)if(i.every((o,s)=>o===t[s]))return Gv._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?st.makeHexColor(...t):e}};Qe(Gv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));rx=Gv,jh=class jh{constructor(e,t,n,i,o,s,a,u,c,f,h,d,g,b,v,w){X(this,it);X(this,Kh,new AbortController);X(this,Ri,null);X(this,Zh,null);X(this,Lr,new Map);X(this,ln,new Map);X(this,Jh,null);X(this,fs,null);X(this,Qh,null);X(this,hs,new tx);X(this,Un,null);X(this,kl,null);X(this,Ll,null);X(this,ed,0);X(this,Pl,new Set);X(this,go,null);X(this,ds,null);X(this,mc,new Set);Qe(this,"_editorUndoBar",null);X(this,Sm,!1);X(this,Tm,!1);X(this,td,!1);X(this,Cm,null);X(this,mo,null);X(this,Bl,null);X(this,rd,null);X(this,Ml,!1);X(this,yo,null);X(this,Vv,new QA);X(this,Fl,!1);X(this,nd,!1);X(this,Rm,!1);X(this,Ul,null);X(this,yc,null);X(this,id,null);X(this,jl,null);X(this,Dm,null);X(this,Xr,vt.NONE);X(this,Kt,new Set);X(this,ba,null);X(this,$l,null);X(this,zl,null);X(this,Im,null);X(this,sd,null);X(this,Om,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});X(this,Wl,[0,0]);X(this,bo,null);X(this,wa,null);X(this,Nm,null);X(this,km,null);X(this,ps,null);let y=this._signal=l(this,Kh).signal;L(this,wa,e),L(this,Nm,t),L(this,km,n),L(this,Jh,i),L(this,Un,o),L(this,$l,s),L(this,sd,u),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:y}),window.addEventListener("pointerdown",()=>{L(this,nd,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{L(this,nd,!1)},{capture:!0,signal:y}),se(this,it,WM).call(this),se(this,it,XM).call(this),se(this,it,ix).call(this),L(this,fs,u.annotationStorage),L(this,Cm,u.filterFactory),L(this,zl,c),L(this,rd,f||null),L(this,Sm,h),L(this,Tm,d),L(this,td,g),L(this,Dm,b||null),this.viewParameters={realScale:tl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1,o?.setSidebarUiManager(this)}static get _keyboardManager(){let e=jh.prototype,t=s=>l(s,wa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:a})=>{if(a instanceof HTMLInputElement){let{type:u}=a;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){l(this,ps)?.resolve(),L(this,ps,null),l(this,Kh)?.abort(),L(this,Kh,null),this._signal=null;for(let e of l(this,ln).values())e.destroy();l(this,ln).clear(),l(this,Lr).clear(),l(this,mc).clear(),l(this,jl)?.clear(),L(this,Ri,null),l(this,Kt).clear(),l(this,hs).destroy(),l(this,Jh)?.destroy(),l(this,Un)?.destroy(),l(this,$l)?.destroy(),l(this,yo)?.hide(),L(this,yo,null),l(this,id)?.destroy(),L(this,id,null),L(this,Zh,null),l(this,mo)&&(clearTimeout(l(this,mo)),L(this,mo,null)),l(this,bo)&&(clearTimeout(l(this,bo)),L(this,bo,null)),this._editorUndoBar?.destroy(),L(this,sd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Dm)}get useNewAltTextFlow(){return l(this,Tm)}get useNewAltTextWhenAddingImage(){return l(this,td)}get hcmFilter(){return wt(this,"hcmFilter",l(this,zl)?l(this,Cm).addHCMFilter(l(this,zl).foreground,l(this,zl).background):"none")}get direction(){return wt(this,"direction",getComputedStyle(l(this,wa)).direction)}get _highlightColors(){return wt(this,"_highlightColors",l(this,rd)?new Map(l(this,rd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return wt(this,"highlightColors",null);let t=new Map,n=!!l(this,zl);for(let[i,o]of e){let s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),o);continue}!n&&!s&&t.set(i,o)}return wt(this,"highlightColors",t)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,Ll,e)}setMainHighlightColorPicker(e){L(this,id,e)}editAltText(e,t=!1){l(this,Jh)?.editAltText(this,e,t)}hasCommentManager(){return!!l(this,Un)}editComment(e,t,n,i){l(this,Un)?.showDialog(this,e,t,n,i)}selectComment(e,t){l(this,ln).get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){l(this,Un)?.updateComment(e.getData())}updatePopupColor(e){l(this,Un)?.updatePopupColor(e)}removeComment(e){l(this,Un)?.removeComments([e.uid])}toggleComment(e,t,n=void 0){l(this,Un)?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&l(this,Un)?.makeCommentColor(e,t)||null}getCommentDialogElement(){return l(this,Un)?.dialogElement||null}async waitForEditorsRendered(e){if(l(this,ln).has(e-1))return;let{resolve:t,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){l(this,$l)?.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,$l)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&L(this,td,t)}onPageChanging({pageNumber:e}){L(this,ed,e-1)}focusMainContainer(){l(this,wa).focus()}findParent(e,t){for(let n of l(this,ln).values()){let{x:i,y:o,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=o&&t<=o+a)return n}return null}disableUserSelect(e=!1){l(this,Nm).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,mc).add(e)}removeShouldRescale(e){l(this,mc).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*tl.PDF_TO_CSS_UNITS;for(let t of l(this,mc))t.onScaleChanging();l(this,Ll)?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a}=n,u=n.toString(),f=se(this,it,Iw).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(f);if(!h)return;n.empty();let d=se(this,it,nx).call(this,f),g=l(this,Xr)===vt.NONE,b=()=>{let v=d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a,text:u});g&&this.showAllEditors("highlight",!0,!0),t&&v?.editComment()};if(g){this.switchToMode(vt.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,fs))return null;let t=`${im}${e}`,n=l(this,fs).getRawValue(t);return n&&l(this,fs).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&l(this,fs)&&!l(this,fs).has(e.id)&&l(this,fs).setValue(e.id,e)}a11yAlert(e,t=null){let n=l(this,km);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Ml)&&(L(this,Ml,!1),se(this,it,Bg).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of l(this,Kt))if(t.div.contains(e)){L(this,yc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,yc))return;let[e,t]=l(this,yc);L(this,yc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){se(this,it,ix).call(this),this.setEditingState(!0)}removeEditListeners(){se(this,it,GM).call(this),this.setEditingState(!1)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let n of l(this,ds))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let n of l(this,ds))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),l(this,Ri)?.commitOrRemove(),!this.hasSelection)return;let t=[];for(let n of l(this,Kt)){let i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let o of t.items)for(let s of l(this,ds))if(s.isHandlingMimeForPasting(o.type)){s.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){_t(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let i=this.currentLayer;try{let o=[];for(let u of n){let c=await i.deserialize(u);if(!c)return;o.push(c)}let s=()=>{for(let u of o)se(this,it,sx).call(this,u);se(this,it,ox).call(this,o)},a=()=>{for(let u of o)u.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(o){_t(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Xr)!==vt.NONE&&!this.isEditorHandlingKeyboard&&jh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Ml)&&(L(this,Ml,!1),se(this,it,Bg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(se(this,it,qM).call(this),se(this,it,VM).call(this),se(this,it,Yn).call(this,{isEditing:l(this,Xr)!==vt.NONE,isEmpty:se(this,it,Mg).call(this),hasSomethingToUndo:l(this,hs).hasSomethingToUndo(),hasSomethingToRedo:l(this,hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(se(this,it,HM).call(this),se(this,it,YM).call(this),se(this,it,Yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ds)){L(this,ds,e);for(let t of l(this,ds))se(this,it,da).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Vv).id}get currentLayer(){return l(this,ln).get(l(this,ed))}getLayer(e){return l(this,ln).get(e)}get currentPageIndex(){return l(this,ed)}addLayer(e){l(this,ln).set(e.pageIndex,e),l(this,Fl)?e.enable():e.disable()}removeLayer(e){l(this,ln).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,o=!1,s=!1){if(l(this,Xr)!==e&&!(l(this,ps)&&(await l(this,ps).promise,!l(this,ps)))){if(L(this,ps,Promise.withResolvers()),l(this,Ll)?.commitOrRemove(),l(this,Xr)===vt.POPUP&&l(this,Un)?.hideSidebar(),l(this,Un)?.destroyPopup(),L(this,Xr,e),e===vt.NONE){this.setEditingState(!1),se(this,it,ZM).call(this);for(let a of l(this,Lr).values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),l(this,ps).resolve();return}for(let a of l(this,Lr).values())a.addStandaloneCommentButton();e===vt.SIGNATURE&&await l(this,$l)?.loadSignatures(),n&&Mn.clearPointerType(),this.setEditingState(!0),await se(this,it,KM).call(this),this.unselectAll();for(let a of l(this,ln).values())a.updateMode(e);if(e===vt.POPUP){l(this,Zh)||L(this,Zh,await l(this,sd).getAnnotationsByType(new Set(l(this,ds).map(c=>c._editorType))));let a=new Set,u=[];for(let c of l(this,Lr).values()){let{annotationElementId:f,hasComment:h,deleted:d}=c;f&&a.add(f),h&&!d&&u.push(c.getData())}for(let c of l(this,Zh)){let{id:f,popupRef:h,contentsObj:d}=c;h&&d?.str&&!a.has(f)&&!l(this,Pl).has(f)&&u.push(c)}l(this,Un)?.showSidebar(u)}if(!t){i&&this.addNewEditorFromKeyboard(),l(this,ps).resolve();return}for(let a of l(this,Lr).values())a.uid===t?(this.setSelected(a),s?a.editComment():o?a.enterInEditMode():a.focus()):a.unselect();l(this,ps).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Xr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,ds)){switch(e){case Bt.CREATE:this.currentLayer.addNewEditor(t);return;case Bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Im)||L(this,Im,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(let n of l(this,Kt))n.updateParams(e,t);else for(let n of l(this,ds))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(let o of l(this,Lr).values())o.editorType===e&&o.show(t);(l(this,Im)?.get(Bt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&se(this,it,da).call(this,[[Bt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Rm)!==e){L(this,Rm,e);for(let t of l(this,ln).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(let t of l(this,Lr).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,Lr).get(e)}addEditor(e){l(this,Lr).set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(l(this,mo)&&clearTimeout(l(this,mo)),L(this,mo,setTimeout(()=>{this.focusMainContainer(),L(this,mo,null)},0))),l(this,Lr).delete(e.id),e.annotationElementId&&l(this,jl)?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!l(this,Pl).has(e.annotationElementId))&&l(this,fs)?.remove(e.id)}addDeletedAnnotationElement(e){l(this,Pl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Pl).has(e)}removeDeletedAnnotationElement(e){l(this,Pl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Ri)!==e&&(L(this,Ri,e),e&&se(this,it,da).call(this,e.propertiesToUpdate))}updateUI(e){l(this,it,JM)===e&&se(this,it,da).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){se(this,it,da).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Kt).has(e)){l(this,Kt).delete(e),e.unselect(),se(this,it,Yn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Kt).add(e),e.select(),se(this,it,da).call(this,e.propertiesToUpdate),se(this,it,Yn).call(this,{hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),l(this,Ll)?.commitOrRemove();for(let t of l(this,Kt))t!==e&&t.unselect();l(this,Kt).clear(),l(this,Kt).add(e),e.select(),se(this,it,da).call(this,e.propertiesToUpdate),se(this,it,Yn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Kt).has(e)}get firstSelectedEditor(){return l(this,Kt).values().next().value}unselect(e){e.unselect(),l(this,Kt).delete(e),se(this,it,Yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Kt).size!==0}get isEnterHandled(){return l(this,Kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,hs).undo(),se(this,it,Yn).call(this,{hasSomethingToUndo:l(this,hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:se(this,it,Mg).call(this)}),this._editorUndoBar?.hide()}redo(){l(this,hs).redo(),se(this,it,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,hs).hasSomethingToRedo(),isEmpty:se(this,it,Mg).call(this)})}addCommands(e){l(this,hs).add(e),se(this,it,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:se(this,it,Mg).call(this)})}cleanUndoStack(e){l(this,hs).cleanType(e)}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let t=e?[e]:[...l(this,Kt)],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(let o of t)o.remove()},i=()=>{for(let o of t)se(this,it,sx).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){l(this,Ri)?.commitOrRemove()}hasSomethingToControl(){return l(this,Ri)||this.hasSelection}selectAll(){for(let e of l(this,Kt))e.commit();se(this,it,ox).call(this,l(this,Lr).values())}unselectAll(){if(!(l(this,Ri)&&(l(this,Ri).commitOrRemove(),l(this,Xr)!==vt.NONE))&&!l(this,Ll)?.commitOrRemove()&&this.hasSelection){for(let e of l(this,Kt))e.unselect();l(this,Kt).clear(),se(this,it,Yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Wl)[0]+=e,l(this,Wl)[1]+=t;let[i,o]=l(this,Wl),s=[...l(this,Kt)],a=1e3;l(this,bo)&&clearTimeout(l(this,bo)),L(this,bo,setTimeout(()=>{L(this,bo,null),l(this,Wl)[0]=l(this,Wl)[1]=0,this.addCommands({cmd:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(i,o),u.translationDone())},undo:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(-i,-o),u.translationDone())},mustExec:!1})},a));for(let u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,go,new Map);for(let e of l(this,Kt))l(this,go).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,go))return!1;this.disableUserSelect(!1);let e=l(this,go);L(this,go,null);let t=!1;for(let[{x:i,y:o,pageIndex:s},a]of e)a.newX=i,a.newY=o,a.newPageIndex=s,t||(t=i!==a.savedX||o!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;let n=(i,o,s,a)=>{if(l(this,Lr).has(i.id)){let u=l(this,ln).get(a);u?i._setParentAndPosition(u,o,s):(i.pageIndex=a,i.x=o,i.y=s)}};return this.addCommands({cmd:()=>{for(let[i,{newX:o,newY:s,newPageIndex:a}]of e)n(i,o,s,a)},undo:()=>{for(let[i,{savedX:o,savedY:s,savedPageIndex:a}]of e)n(i,o,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,go))for(let n of l(this,go).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||l(this,Kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Ri)===e}getActive(){return l(this,Ri)}getMode(){return l(this,Xr)}isEditingMode(){return l(this,Xr)!==vt.NONE}get imageManager(){return wt(this,"imageManager",new ex)}getSelectionBoxes(e){if(!e)return null;let t=document.getSelection();for(let c=0,f=t.rangeCount;c<f;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;let{x:n,y:i,width:o,height:s}=e.getBoundingClientRect(),a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,f,h,d)=>({x:(f-i)/s,y:1-(c+h-n)/o,width:d/s,height:h/o});break;case"180":a=(c,f,h,d)=>({x:1-(c+h-n)/o,y:1-(f+d-i)/s,width:h/o,height:d/s});break;case"270":a=(c,f,h,d)=>({x:1-(f+d-i)/s,y:(c-n)/o,width:d/s,height:h/o});break;default:a=(c,f,h,d)=>({x:(c-n)/o,y:(f-i)/s,width:h/o,height:d/s});break}let u=[];for(let c=0,f=t.rangeCount;c<f;c++){let h=t.getRangeAt(c);if(!h.collapsed)for(let{x:d,y:g,width:b,height:v}of h.getClientRects())b===0||v===0||u.push(a(d,g,b,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Qh)||L(this,Qh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){l(this,Qh)?.delete(e)}renderAnnotationElement(e){let t=l(this,Qh)?.get(e.data.id);if(!t)return;let n=l(this,fs).getRawValue(t);n&&(l(this,Xr)===vt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){let i=l(this,jl)?.get(e);i&&(i.setCanvas(t,n),l(this,jl).delete(e))}addMissingCanvas(e,t){(l(this,jl)||L(this,jl,new Map)).set(e,t)}};Kh=new WeakMap,Ri=new WeakMap,Zh=new WeakMap,Lr=new WeakMap,ln=new WeakMap,Jh=new WeakMap,fs=new WeakMap,Qh=new WeakMap,hs=new WeakMap,Un=new WeakMap,kl=new WeakMap,Ll=new WeakMap,ed=new WeakMap,Pl=new WeakMap,go=new WeakMap,ds=new WeakMap,mc=new WeakMap,Sm=new WeakMap,Tm=new WeakMap,td=new WeakMap,Cm=new WeakMap,mo=new WeakMap,Bl=new WeakMap,rd=new WeakMap,Ml=new WeakMap,yo=new WeakMap,Vv=new WeakMap,Fl=new WeakMap,nd=new WeakMap,Rm=new WeakMap,Ul=new WeakMap,yc=new WeakMap,id=new WeakMap,jl=new WeakMap,Dm=new WeakMap,Xr=new WeakMap,Kt=new WeakMap,ba=new WeakMap,$l=new WeakMap,zl=new WeakMap,Im=new WeakMap,sd=new WeakMap,Om=new WeakMap,Wl=new WeakMap,bo=new WeakMap,wa=new WeakMap,Nm=new WeakMap,km=new WeakMap,ps=new WeakMap,it=new WeakSet,Iw=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},nx=function(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let n of l(this,ln).values())if(n.hasTextLayer(e))return n;return null},$M=function(){let e=document.getSelection();if(!e||e.isCollapsed)return;let n=se(this,it,Iw).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,yo)||L(this,yo,new ZA(this)),l(this,yo).show(n,i,this.direction==="ltr"))},zM=function(){let e=document.getSelection();if(!e||e.isCollapsed){l(this,ba)&&(l(this,yo)?.hide(),L(this,ba,null),se(this,it,Yn).call(this,{hasSelectedText:!1}));return}let{anchorNode:t}=e;if(t===l(this,ba))return;let i=se(this,it,Iw).call(this,e).closest(".textLayer");if(!i){l(this,ba)&&(l(this,yo)?.hide(),L(this,ba,null),se(this,it,Yn).call(this,{hasSelectedText:!1}));return}if(l(this,yo)?.hide(),L(this,ba,t),se(this,it,Yn).call(this,{hasSelectedText:!0}),!(l(this,Xr)!==vt.HIGHLIGHT&&l(this,Xr)!==vt.NONE)&&(l(this,Xr)===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Ml,this.isShiftKeyDown),!this.isShiftKeyDown)){let o=l(this,Xr)===vt.HIGHLIGHT?se(this,it,nx).call(this,i):null;if(o?.toggleDrawing(),l(this,nd)){let s=new AbortController,a=this.combinedSignal(s),u=c=>{c.type==="pointerup"&&c.button!==0||(s.abort(),o?.toggleDrawing(!0),c.type==="pointerup"&&se(this,it,Bg).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}else o?.toggleDrawing(!0),se(this,it,Bg).call(this,"main_toolbar")}},Bg=function(e=""){l(this,Xr)===vt.HIGHLIGHT?this.highlightSelection(e):l(this,Sm)&&se(this,it,$M).call(this)},WM=function(){document.addEventListener("selectionchange",se(this,it,zM).bind(this),{signal:this._signal})},qM=function(){if(l(this,Bl))return;L(this,Bl,new AbortController);let e=this.combinedSignal(l(this,Bl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},HM=function(){l(this,Bl)?.abort(),L(this,Bl,null)},ix=function(){if(l(this,Ul))return;L(this,Ul,new AbortController);let e=this.combinedSignal(l(this,Ul));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},GM=function(){l(this,Ul)?.abort(),L(this,Ul,null)},VM=function(){if(l(this,kl))return;L(this,kl,new AbortController);let e=this.combinedSignal(l(this,kl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},YM=function(){l(this,kl)?.abort(),L(this,kl,null)},XM=function(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Yn=function(e){Object.entries(e).some(([n,i])=>l(this,Om)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Om),e)}),l(this,Xr)===vt.HIGHLIGHT&&e.hasSelectedEditor===!1&&se(this,it,da).call(this,[[Bt.HIGHLIGHT_FREE,!0]]))},da=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},KM=async function(){if(!l(this,Fl)){L(this,Fl,!0);let e=[];for(let t of l(this,ln).values())e.push(t.enable());await Promise.all(e);for(let t of l(this,Lr).values())t.enable()}},ZM=function(){if(this.unselectAll(),l(this,Fl)){L(this,Fl,!1);for(let e of l(this,ln).values())e.disable();for(let e of l(this,Lr).values())e.disable()}},sx=function(e){let t=l(this,ln).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},JM=function(){let e=null;for(e of l(this,Kt));return e},Mg=function(){if(l(this,Lr).size===0)return!0;if(l(this,Lr).size===1)for(let e of l(this,Lr).values())return e.isEmpty();return!1},ox=function(e){for(let t of l(this,Kt))t.unselect();l(this,Kt).clear();for(let t of e)t.isEmpty()||(l(this,Kt).add(t),t.select());se(this,it,Yn).call(this,{hasSelectedEditor:this.hasSelection})},Qe(jh,"TRANSLATE_SMALL",1),Qe(jh,"TRANSLATE_BIG",10);vu=jh,Xn=class Xn{constructor(e){X(this,Vs);X(this,gn,null);X(this,wo,!1);X(this,Ps,null);X(this,od,null);X(this,vo,null);X(this,Di,null);X(this,ad,!1);X(this,_o,null);X(this,pi,null);X(this,va,null);X(this,bc,null);X(this,Eo,!1);L(this,pi,e),L(this,Eo,e._uiManager.useNewAltTextFlow),l(Xn,ql)||L(Xn,ql,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Xn._l10n??(Xn._l10n=e)}async render(){let e=L(this,Ps,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=L(this,od,document.createElement("span"));e.append(t),l(this,Eo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Xn,ql).missing),t.setAttribute("data-l10n-id",l(Xn,ql)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=l(this,pi)._uiManager._signal;e.addEventListener("contextmenu",Zi,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),l(this,pi)._uiManager.editAltText(l(this,pi)),l(this,Eo)&&l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Vs,Fg)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(L(this,ad,!0),i(o))},{signal:n}),await se(this,Vs,Ow).call(this),e}finish(){l(this,Ps)&&(l(this,Ps).focus({focusVisible:l(this,ad)}),L(this,ad,!1))}isEmpty(){return l(this,Eo)?l(this,gn)===null:!l(this,gn)&&!l(this,wo)}hasData(){return l(this,Eo)?l(this,gn)!==null||!!l(this,va):this.isEmpty()}get guessedText(){return l(this,va)}async setGuessedText(e){l(this,gn)===null&&(L(this,va,e),L(this,bc,await Xn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),se(this,Vs,Ow).call(this))}toggleAltTextBadge(e=!1){if(!l(this,Eo)||l(this,gn)){l(this,_o)?.remove(),L(this,_o,null);return}if(!l(this,_o)){let t=L(this,_o,document.createElement("div"));t.className="noAltTextBadge",l(this,pi).div.append(t)}l(this,_o).classList.toggle("hidden",!e)}serialize(e){let t=l(this,gn);return!e&&l(this,va)===t&&(t=l(this,bc)),{altText:t,decorative:l(this,wo),guessedText:l(this,va),textWithDisclaimer:l(this,bc)}}get data(){return{altText:l(this,gn),decorative:l(this,wo)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(L(this,va,n),L(this,bc,i)),!(l(this,gn)===e&&l(this,wo)===t)&&(o||(L(this,gn,e),L(this,wo,t)),se(this,Vs,Ow).call(this))}toggle(e=!1){l(this,Ps)&&(!e&&l(this,Di)&&(clearTimeout(l(this,Di)),L(this,Di,null)),l(this,Ps).disabled=!e)}shown(){l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Vs,Fg)}})}destroy(){l(this,Ps)?.remove(),L(this,Ps,null),L(this,od,null),L(this,vo,null),l(this,_o)?.remove(),L(this,_o,null)}};gn=new WeakMap,wo=new WeakMap,Ps=new WeakMap,od=new WeakMap,vo=new WeakMap,Di=new WeakMap,ad=new WeakMap,_o=new WeakMap,pi=new WeakMap,va=new WeakMap,bc=new WeakMap,Eo=new WeakMap,ql=new WeakMap,Vs=new WeakSet,Fg=function(){return l(this,gn)&&"added"||l(this,gn)===null&&this.guessedText&&"review"||"missing"},Ow=async function(){let e=l(this,Ps);if(!e)return;if(l(this,Eo)){if(e.classList.toggle("done",!!l(this,gn)),e.setAttribute("data-l10n-id",l(Xn,ql)[l(this,Vs,Fg)]),l(this,od)?.setAttribute("data-l10n-id",l(Xn,ql)[`${l(this,Vs,Fg)}-label`]),!l(this,gn)){l(this,vo)?.remove();return}}else{if(!l(this,gn)&&!l(this,wo)){e.classList.remove("done"),l(this,vo)?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,vo);if(!t){L(this,vo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,pi).id}`;let i=100,o=l(this,pi)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Di)),L(this,Di,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,Di,setTimeout(()=>{L(this,Di,null),l(this,vo).classList.add("show"),l(this,pi)._reportTelemetry({action:"alt_text_tooltip"})},i))},{signal:o}),e.addEventListener("mouseleave",()=>{l(this,Di)&&(clearTimeout(l(this,Di)),L(this,Di,null)),l(this,vo)?.classList.remove("show")},{signal:o})}l(this,wo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,gn)),t.parentNode||e.append(t),l(this,pi).getElementForAltText()?.setAttribute("aria-describedby",t.id)},X(Xn,ql,null),Qe(Xn,"_l10n",null);fv=Xn,Fh=class{constructor(e){X(this,Pm);X(this,xn,null);X(this,gs,null);X(this,wc,!1);X(this,gr,null);X(this,Lm,null);X(this,vc,null);X(this,Bs,null);X(this,_c,null);X(this,Ec,!1);X(this,Ac,null);L(this,gr,e)}renderForToolbar(){let e=L(this,gs,document.createElement("button"));return e.className="comment",se(this,Pm,ax).call(this,e,!1)}renderForStandalone(){let e=L(this,xn,document.createElement("button"));e.className="annotationCommentButton";let t=l(this,gr).commentButtonPosition;if(t){let{style:n}=e;n.insetInlineEnd=`calc(${100*(l(this,gr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;let i=l(this,gr).commentButtonColor;i&&(n.backgroundColor=i)}return se(this,Pm,ax).call(this,e,!0)}focusButton(){setTimeout(()=>{(l(this,xn)??l(this,gs))?.focus()},0)}onUpdatedColor(){if(!l(this,xn))return;let e=l(this,gr).commentButtonColor;e&&(l(this,xn).style.backgroundColor=e),l(this,gr)._uiManager.updatePopupColor(l(this,gr))}get commentButtonWidth(){return(l(this,xn)?.getBoundingClientRect().width??0)/l(this,gr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Ac))return l(this,Ac);if(!l(this,xn))return null;let{x:e,y:t,height:n}=l(this,xn).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,gr).parent.boundingClientRect;return[(e-i)/s,(t+n-o)/a]}set commentPopupPositionInLayer(e){L(this,Ac,e)}hasDefaultPopupPosition(){return l(this,Ac)===null}removeStandaloneCommentButton(){l(this,xn)?.remove(),L(this,xn,null)}removeToolbarCommentButton(){l(this,gs)?.remove(),L(this,gs,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,xn)&&(l(this,xn).classList.toggle("selected",e),l(this,xn).ariaExpanded=t)}edit(e){let t=this.commentPopupPositionInLayer,n,i;if(t)[n,i]=t;else{[n,i]=l(this,gr).commentButtonPosition;let{width:f,height:h,x:d,y:g}=l(this,gr);n=d+n*f,i=g+i*h}let o=l(this,gr).parent.boundingClientRect,{x:s,y:a,width:u,height:c}=o;l(this,gr)._uiManager.editComment(l(this,gr),s+n*u,a+i*c,{...e,parentDimensions:o})}finish(){l(this,gs)&&(l(this,gs).focus({focusVisible:l(this,wc)}),L(this,wc,!1))}isDeleted(){return l(this,Ec)||l(this,Bs)===""}isEmpty(){return l(this,Bs)===null}hasBeenEdited(){return this.isDeleted()||l(this,Bs)!==l(this,Lm)}serialize(){return this.data}get data(){return{text:l(this,Bs),richText:l(this,vc),date:l(this,_c),deleted:this.isDeleted()}}set data(e){if(e!==l(this,Bs)&&L(this,vc,null),e===null){L(this,Bs,""),L(this,Ec,!0);return}L(this,Bs,e),L(this,_c,new Date),L(this,Ec,!1)}setInitialText(e,t=null){L(this,Lm,e),this.data=e,L(this,_c,null),L(this,vc,t)}shown(){}destroy(){l(this,gs)?.remove(),L(this,gs,null),l(this,xn)?.remove(),L(this,xn,null),L(this,Bs,""),L(this,vc,null),L(this,_c,null),L(this,gr,null),L(this,wc,!1),L(this,Ec,!1)}};xn=new WeakMap,gs=new WeakMap,wc=new WeakMap,gr=new WeakMap,Lm=new WeakMap,vc=new WeakMap,Bs=new WeakMap,_c=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,Pm=new WeakSet,ax=function(e,t){if(!l(this,gr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,gr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));let n=l(this,gr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Zi,{signal:n}),t&&(e.addEventListener("focusin",o=>{l(this,gr)._focusEventsAllowed=!1,Cr(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{l(this,gr)._focusEventsAllowed=!0,Cr(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),e===l(this,gs)?this.edit():l(this,gr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(L(this,wc,!0),i(o))},{signal:n}),e.addEventListener("pointerenter",()=>{l(this,gr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{l(this,gr).toggleComment(!1,!1)},{signal:n}),e};TT=class TT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){X(this,_u);X(this,ld);X(this,xc,!1);X(this,Bm,null);X(this,Mm);X(this,Fm);X(this,Um);X(this,jm);X(this,_a,null);X(this,Sc);X(this,Ea,null);X(this,Tc);X(this,Aa,null);L(this,ld,e),L(this,Bm,n),L(this,Mm,t),L(this,Fm,i),L(this,Um,o),L(this,jm,s),L(this,Tc,new AbortController),L(this,Sc,AbortSignal.any([a,l(this,Tc).signal])),e.addEventListener("touchstart",se(this,_u,QM).bind(this),{passive:!1,signal:l(this,Sc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Mo.pixelRatio}destroy(){l(this,Tc)?.abort(),L(this,Tc,null),l(this,_a)?.abort(),L(this,_a,null)}};ld=new WeakMap,xc=new WeakMap,Bm=new WeakMap,Mm=new WeakMap,Fm=new WeakMap,Um=new WeakMap,jm=new WeakMap,_a=new WeakMap,Sc=new WeakMap,Ea=new WeakMap,Tc=new WeakMap,Aa=new WeakMap,_u=new WeakSet,QM=function(e){var i,o,s;if((i=l(this,Mm))!=null&&i.call(this))return;if(e.touches.length===1){if(l(this,_a))return;let a=L(this,_a,new AbortController),u=AbortSignal.any([l(this,Sc),a.signal]),c=l(this,ld),f={capture:!0,signal:u,passive:!1},h=d=>{d.pointerType==="touch"&&(l(this,_a)?.abort(),L(this,_a,null))};c.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Cr(d),h(d))},f),c.addEventListener("pointerup",h,f),c.addEventListener("pointercancel",h,f);return}if(!l(this,Aa)){L(this,Aa,new AbortController);let a=AbortSignal.any([l(this,Sc),l(this,Aa).signal]),u=l(this,ld),c={signal:a,capture:!1,passive:!1};u.addEventListener("touchmove",se(this,_u,eF).bind(this),c);let f=se(this,_u,tF).bind(this);u.addEventListener("touchend",f,c),u.addEventListener("touchcancel",f,c),c.capture=!0,u.addEventListener("pointerdown",Cr,c),u.addEventListener("pointermove",Cr,c),u.addEventListener("pointercancel",Cr,c),u.addEventListener("pointerup",Cr,c),(o=l(this,Fm))==null||o.call(this)}if(Cr(e),e.touches.length!==2||(s=l(this,Bm))!=null&&s.call(this)){L(this,Ea,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),L(this,Ea,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},eF=function(e){var S;if(!l(this,Ea)||e.touches.length!==2)return;Cr(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);let{screenX:i,screenY:o}=t,{screenX:s,screenY:a}=n,u=l(this,Ea),{touch0X:c,touch0Y:f,touch1X:h,touch1Y:d}=u,g=h-c,b=d-f,v=s-i,w=a-o,y=Math.hypot(v,w)||1,_=Math.hypot(g,b)||1;if(!l(this,xc)&&Math.abs(_-y)<=TT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=o,u.touch1X=s,u.touch1Y=a,!l(this,xc)){L(this,xc,!0);return}let E=[(i+s)/2,(o+a)/2];(S=l(this,Um))==null||S.call(this,E,_,y)},tF=function(e){var t;e.touches.length>=2||(l(this,Aa)&&(l(this,Aa).abort(),L(this,Aa,null),(t=l(this,jm))==null||t.call(this)),l(this,Ea)&&(Cr(e),L(this,Ea,null),L(this,xc,!1)))};lm=TT,At=class At{constructor(e){X(this,mt);X(this,Cc,null);X(this,Ms,null);X(this,Er,null);X(this,cr,null);X(this,xa,null);X(this,ud,!1);X(this,Hl,null);X(this,$m,"");X(this,Sn,null);X(this,Rc,null);X(this,Sa,null);X(this,ms,null);X(this,Gl,null);X(this,zm,"");X(this,Dc,!1);X(this,Ii,null);X(this,Wm,!1);X(this,Ic,!1);X(this,Ta,!1);X(this,Ao,null);X(this,cd,0);X(this,fd,0);X(this,ys,null);X(this,Oc,null);Qe(this,"isSelected",!1);Qe(this,"_isCopy",!1);Qe(this,"_editToolbar",null);Qe(this,"_initialOptions",Object.create(null));Qe(this,"_initialData",null);Qe(this,"_isVisible",!0);Qe(this,"_uiManager",null);Qe(this,"_focusEventsAllowed",!0);X(this,qm,!1);X(this,Yv,At._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;let{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,s];let[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){let e=At.prototype._resizeWithKeyboard,t=vu.TRANSLATE_SMALL,n=vu.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],At.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new gx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(At._l10n??(At._l10n=e),At._l10nResizer||(At._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),At._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,qm)}set _isDraggable(e){L(this,qm,e),this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Yv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(se(this,mt,Ug).call(this),l(this,ms)?.remove(),L(this,ms,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Dc)?L(this,Dc,!1):this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){let[o,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/o,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){let[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){se(this,mt,lx).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ii)||L(this,Ii,[this.x,this.y,this.width,this.height]),se(this,mt,lx).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,Ii)||L(this,Ii,[this.x,this.y,this.width,this.height]);let{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[u,c]=this.getBaseTranslation();s+=u,a+=c;let{style:f}=n;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,Ii)&&(l(this,Ii)[0]!==this.x||l(this,Ii)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Ii)&&(l(this,Ii)[2]!==this.width||l(this,Ii)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=At,i=n/e,o=n/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,i]}=this,{x:o,y:s,width:a,height:u}=this;if(a*=n,u*=i,o*=n,s*=i,this._mustFixPosition)switch(e){case 0:o=Wn(o,0,n-a),s=Wn(s,0,i-u);break;case 90:o=Wn(o,0,n-u),s=Wn(s,a,i);break;case 180:o=Wn(o,a,n),s=Wn(s,u,i);break;case 270:o=Wn(o,u,n),s=Wn(s,0,i-a);break}this.x=o/=n,this.y=s/=i;let[c,f]=this.getBaseTranslation();o+=c,s+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return se(n=At,Hm,ux).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return se(n=At,Hm,ux).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){let{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){l(this,Er)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Ic))return this._editToolbar;this._editToolbar=new KA(this),this.div.append(this._editToolbar.render());let{toolbarButtons:e}=this;if(e)for(let[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,l(this,Er)?.destroy()}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Er)||(fv.initialize(At._l10n),L(this,Er,new fv(this)),l(this,Cc)&&(l(this,Er).data=l(this,Cc),L(this,Cc,null))),l(this,Er)}get altTextData(){return l(this,Er)?.data}set altTextData(e){l(this,Er)&&(l(this,Er).data=e)}get guessedAltText(){return l(this,Er)?.guessedText}async setGuessedAltText(e){await l(this,Er)?.setGuessedText(e)}serializeAltText(e){return l(this,Er)?.serialize(e)}hasAltText(){return!!l(this,Er)&&!l(this,Er).isEmpty()}hasAltTextData(){return l(this,Er)?.hasData()??!1}focusCommentButton(){l(this,cr)?.focusButton()}addCommentButton(){return this.canAddComment?l(this,cr)||L(this,cr,new Fh(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,xa)){this._uiManager.isEditingMode()&&l(this,xa).classList.remove("hidden");return}this.hasComment&&(L(this,xa,l(this,cr).renderForStandalone()),this.div.append(l(this,xa)))}}removeStandaloneCommentButton(){l(this,cr).removeStandaloneCommentButton(),L(this,xa,null)}hideStandaloneCommentButton(){l(this,xa)?.classList.add("hidden")}get comment(){let{data:{richText:e,text:t,date:n,deleted:i}}=l(this,cr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,cr)||L(this,cr,new Fh(this)),l(this,cr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(l(this,cr)||L(this,cr,new Fh(this)),l(this,cr).setInitialText(e,n),!this.annotationElementId))return;let i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return l(this,cr)?.hasBeenEdited()}get hasDeletedComment(){return l(this,cr)?.isDeleted()}get hasComment(){return!!l(this,cr)&&!l(this,cr).isEmpty()&&!l(this,cr).isDeleted()}async editComment(e){l(this,cr)||L(this,cr,new Fh(this)),l(this,cr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,cr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){let[,,,i]=e.rect,[o]=this.pageDimensions,[s]=this.pageTranslation,a=s+o+1,u=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,u,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,cr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,ud)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),se(this,mt,dx).call(this);let[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);let[i,o]=this.getInitialTranslation();return this.translate(i,o),UM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Oc)||L(this,Oc,new lm({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:se(this,mt,iF).bind(this),onPinching:se(this,mt,sF).bind(this),onPinchEnd:se(this,mt,oF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}pointerdown(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,Dc,!0),this._isDraggable){se(this,mt,aF).call(this,e);return}se(this,mt,hx).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Ao)&&clearTimeout(l(this,Ao)),L(this,Ao,setTimeout(()=>{L(this,Ao,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let i=this.parentScale,[o,s]=this.pageDimensions,[a,u]=this.pageTranslation,c=e/i,f=t/i,h=this.x*o,d=this.y*s,g=this.width*o,b=this.height*s;switch(n){case 0:return[h+c+a,s-d-f-b+u,h+c+g+a,s-d-f+u];case 90:return[h+f+a,s-d+c+u,h+f+b+a,s-d+c+g+u];case 180:return[h-c-g+a,s-d+f+u,h-c+a,s-d+f+b+u];case 270:return[h-f-b+a,s-d-c-g+u,h-f+a,s-d-c+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,i,o,s]=e,a=o-n,u=s-i;switch(this.rotation){case 0:return[n,t-s,a,u];case 90:return[n,t-i,u,a];case 180:return[o,t-i,a,u];case 270:return[o,t-s,u,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&At._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){l(this,cr)?.onUpdatedColor()}getData(){let{comment:{text:e,color:t,date:n,opacity:i,deleted:o,richText:s},uid:a,pageIndex:u,creationDate:c,modificationDate:f}=this;return{id:a,pageIndex:u,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:c,modificationDate:n||f,popupRef:!o,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),L(this,Ic,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),L(this,Ic,!1),!0):!1}isInEditMode(){return l(this,Ic)}shouldGetKeyboardEvents(){return l(this,Ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return t<s&&i>0&&e<o&&n>0}rebuild(){se(this,mt,dx).call(this)}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){let i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,L(i,Cc,e.accessibilityData),i._isCopy=e.isCopy||!1;let[o,s]=i.pageDimensions,[a,u,c,f]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/o,i.y=u/s,i.width=c/o,i.height=f/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(l(this,Gl)?.abort(),L(this,Gl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Ao)&&(clearTimeout(l(this,Ao)),L(this,Ao,null)),se(this,mt,Ug).call(this),this.removeEditToolbar(),l(this,ys)){for(let e of l(this,ys).values())clearTimeout(e);L(this,ys,null)}this.parent=null,l(this,Oc)?.destroy(),L(this,Oc,null),l(this,ms)?.remove(),L(this,ms,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(se(this,mt,rF).call(this),l(this,Sn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[e,t]}=this,[n,i,o,s]=this.getPDFRect();return[At._round(n+(o-n)*e),At._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,cr).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,cr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,cr).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,cr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,cr)?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=l(this,Sn).children;if(!l(this,Ms)){L(this,Ms,Array.from(t));let s=se(this,mt,lF).bind(this),a=se(this,mt,uF).bind(this),u=this._uiManager._signal;for(let c of l(this,Ms)){let f=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:u}),c.addEventListener("blur",a,{signal:u}),c.addEventListener("focus",se(this,mt,cF).bind(this,f),{signal:u}),c.setAttribute("data-l10n-id",At._l10nResizer[f])}}let n=l(this,Ms)[0],i=0;for(let s of t){if(s===n)break;i++}let o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ms).length/4);if(o!==i){if(o<i)for(let a=0;a<i-o;a++)l(this,Sn).append(l(this,Sn).firstElementChild);else if(o>i)for(let a=0;a<o-i;a++)l(this,Sn).firstElementChild.before(l(this,Sn).lastElementChild);let s=0;for(let a of t){let c=l(this,Ms)[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",At._l10nResizer[c])}}se(this,mt,px).call(this,0),L(this,Ta,!0),l(this,Sn).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ta)&&se(this,mt,fx).call(this,l(this,zm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){se(this,mt,Ug).call(this),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),l(this,Er)?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,l(this,Sn)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),l(this,Er)?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Wm)}set isEditing(e){L(this,Wm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ys)||L(this,ys,new Map);let{action:n}=e,i=l(this,ys).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,ys).delete(n),l(this,ys).size===0&&L(this,ys,null)},At._telemetryTimeout),l(this,ys).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,ud,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,ud,!0)}updateFakeAnnotationElement(e){if(!l(this,ms)&&!this.deleted){L(this,ms,e.addFakeAnnotation(this));return}if(this.deleted){l(this,ms).remove(),L(this,ms,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,ms).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Cc=new WeakMap,Ms=new WeakMap,Er=new WeakMap,cr=new WeakMap,xa=new WeakMap,ud=new WeakMap,Hl=new WeakMap,$m=new WeakMap,Sn=new WeakMap,Rc=new WeakMap,Sa=new WeakMap,ms=new WeakMap,Gl=new WeakMap,zm=new WeakMap,Dc=new WeakMap,Ii=new WeakMap,Wm=new WeakMap,Ic=new WeakMap,Ta=new WeakMap,Ao=new WeakMap,cd=new WeakMap,fd=new WeakMap,ys=new WeakMap,Oc=new WeakMap,qm=new WeakMap,Yv=new WeakMap,mt=new WeakSet,lx=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Hm=new WeakSet,ux=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Nw=function(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},rF=function(){if(l(this,Sn))return;L(this,Sn,document.createElement("div")),l(this,Sn).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let i=document.createElement("div");l(this,Sn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",se(this,mt,nF).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Zi,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,Sn))},nF=function(e,t){t.preventDefault();let{isMac:n}=Ur.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,Er)?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,L(this,Rc,[t.screenX,t.screenY]);let o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",se(this,mt,fx).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Cr,{passive:!1,signal:s}),window.addEventListener("contextmenu",Zi,{signal:s}),L(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let a=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let c=()=>{o.abort(),this.parent.togglePointerEvents(!0),l(this,Er)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=u,se(this,mt,kw).call(this)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},cx=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},kw=function(){if(!l(this,Sa))return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=l(this,Sa);L(this,Sa,null);let o=this.x,s=this.y,a=this.width,u=this.height;o===e&&s===t&&a===n&&u===i||this.addCommands({cmd:se(this,mt,cx).bind(this,o,s,a,u),undo:se(this,mt,cx).bind(this,e,t,n,i),mustExec:!0})},fx=function(e,t){let[n,i]=this.parentDimensions,o=this.x,s=this.y,a=this.width,u=this.height,c=At.MIN_SIZE/n,f=At.MIN_SIZE/i,h=se(this,mt,Nw).call(this,this.rotation),d=(ve,z)=>[h[0]*ve+h[2]*z,h[1]*ve+h[3]*z],g=se(this,mt,Nw).call(this,360-this.rotation),b=(ve,z)=>[g[0]*ve+g[2]*z,g[1]*ve+g[3]*z],v,w,y=!1,_=!1;switch(e){case"topLeft":y=!0,v=(ve,z)=>[0,0],w=(ve,z)=>[ve,z];break;case"topMiddle":v=(ve,z)=>[ve/2,0],w=(ve,z)=>[ve/2,z];break;case"topRight":y=!0,v=(ve,z)=>[ve,0],w=(ve,z)=>[0,z];break;case"middleRight":_=!0,v=(ve,z)=>[ve,z/2],w=(ve,z)=>[0,z/2];break;case"bottomRight":y=!0,v=(ve,z)=>[ve,z],w=(ve,z)=>[0,0];break;case"bottomMiddle":v=(ve,z)=>[ve/2,z],w=(ve,z)=>[ve/2,0];break;case"bottomLeft":y=!0,v=(ve,z)=>[0,z],w=(ve,z)=>[ve,0];break;case"middleLeft":_=!0,v=(ve,z)=>[0,z/2],w=(ve,z)=>[ve,z/2];break}let E=v(a,u),S=w(a,u),A=d(...S),B=At._round(o+A[0]),T=At._round(s+A[1]),Z=1,ie=1,G,ae;if(t.fromKeyboard)({deltaX:G,deltaY:ae}=t);else{let{screenX:ve,screenY:z}=t,[O,oe]=l(this,Rc);[G,ae]=this.screenToPageTranslation(ve-O,z-oe),l(this,Rc)[0]=ve,l(this,Rc)[1]=z}if([G,ae]=b(G/n,ae/i),y){let ve=Math.hypot(a,u);Z=ie=Math.max(Math.min(Math.hypot(S[0]-E[0]-G,S[1]-E[1]-ae)/ve,1/a,1/u),c/a,f/u)}else _?Z=Wn(Math.abs(S[0]-E[0]-G),c,1)/a:ie=Wn(Math.abs(S[1]-E[1]-ae),f,1)/u;let U=At._round(a*Z),V=At._round(u*ie);A=d(...w(U,V));let ue=B-A[0],Ae=T-A[1];l(this,Ii)||L(this,Ii,[this.x,this.y,this.width,this.height]),this.width=U,this.height=V,this.x=ue,this.y=Ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iF=function(){L(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),l(this,Er)?.toggle(!1),this.parent.togglePointerEvents(!1)},sF=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;let s=se(this,mt,Nw).call(this,this.rotation),a=(B,T)=>[s[0]*B+s[2]*T,s[1]*B+s[3]*T],[u,c]=this.parentDimensions,f=this.x,h=this.y,d=this.width,g=this.height,b=At.MIN_SIZE/u,v=At.MIN_SIZE/c;o=Math.max(Math.min(o,1/d,1/g),b/d,v/g);let w=At._round(d*o),y=At._round(g*o);if(w===d&&y===g)return;l(this,Ii)||L(this,Ii,[f,h,d,g]);let _=a(d/2,g/2),E=At._round(f+_[0]),S=At._round(h+_[1]),A=a(w/2,y/2);this.x=E-A[0],this.y=S-A[1],this.width=w,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},oF=function(){l(this,Er)?.toggle(!0),this.parent.togglePointerEvents(!0),se(this,mt,kw).call(this)},hx=function(e){let{isMac:t}=Ur.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},aF=function(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,i=new AbortController,o=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:o},a=c=>{i.abort(),L(this,Hl,null),L(this,Dc,!1),this._uiManager.endDragSession()||se(this,mt,hx).call(this,c),n&&this._onStopDragging()};t&&(L(this,cd,e.clientX),L(this,fd,e.clientY),L(this,Hl,e.pointerId),L(this,$m,e.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:f,clientY:h,pointerId:d}=c;if(d!==l(this,Hl)){Cr(c);return}let[g,b]=this.screenToPageTranslation(f-l(this,cd),h-l(this,fd));L(this,cd,f),L(this,fd,h),this._uiManager.dragSelectedEditors(g,b)},s),window.addEventListener("touchmove",Cr,s),window.addEventListener("pointerdown",c=>{c.pointerType===l(this,$m)&&(l(this,Oc)||c.isPrimary)&&a(c),Cr(c)},s));let u=c=>{if(!l(this,Hl)||l(this,Hl)===c.pointerId){a(c);return}Cr(c)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},dx=function(){if(l(this,Gl)||!this.div)return;L(this,Gl,new AbortController);let e=this._uiManager.combinedSignal(l(this,Gl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},lF=function(e){At._resizerKeyboardManager.exec(this,e)},uF=function(e){l(this,Ta)&&e.relatedTarget?.parentNode!==l(this,Sn)&&se(this,mt,Ug).call(this)},cF=function(e){L(this,zm,l(this,Ta)?e:"")},px=function(e){if(l(this,Ms))for(let t of l(this,Ms))t.tabIndex=e},Ug=function(){L(this,Ta,!1),se(this,mt,px).call(this,-1),se(this,mt,kw).call(this)},X(At,Hm),Qe(At,"_l10n",null),Qe(At,"_l10nResizer",null),Qe(At,"_borderLineWidth",-1),Qe(At,"_colorManager",new rx),Qe(At,"_zIndex",1),Qe(At,"_telemetryTimeout",1e3);mr=At,gx=class extends mr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},uM=3285377520,as=4294901760,ho=65535,hv=class{constructor(e){this.h1=e?e&4294967295:uM,this.h2=e?e&4294967295:uM}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){let y=e.charCodeAt(v);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=n>>2,o=n-i*4,s=new Uint32Array(t.buffer,0,i),a=0,u=0,c=this.h1,f=this.h2,h=3432918353,d=461845907,g=h&ho,b=d&ho;for(let v=0;v<i;v++)v&1?(a=s[v],a=a*h&as|a*g&ho,a=a<<15|a>>>17,a=a*d&as|a*b&ho,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(u=s[v],u=u*h&as|u*g&ho,u=u<<15|u>>>17,u=u*d&as|u*b&ho,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(a=0,o){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&as|a*g&ho,a=a<<15|a>>>17,a=a*d&as|a*b&ho,i&1?c^=a:f^=a}this.h1=c,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&as|e*36045&ho,t=t*4283543511&as|((t<<16|e>>>16)*2950163797&as)>>>16,e^=t>>>1,e=e*444984403&as|e*60499&ho,t=t*3301882366&as|((t<<16|e>>>16)*3120437893&as)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},mx=Object.freeze({map:null,hash:"",transfer:void 0}),um=class{constructor(){X(this,Xv);X(this,Nc,!1);X(this,kc,null);X(this,Ca,null);X(this,Tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=l(this,Tn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,Tn).get(e)}remove(e){let t=l(this,Tn).get(e);if(t!==void 0&&(t instanceof mr&&l(this,Ca).delete(t.annotationElementId),l(this,Tn).delete(e),l(this,Tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let n of l(this,Tn).values())if(n instanceof mr)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=l(this,Tn).get(e),i=!1;if(n!==void 0)for(let[o,s]of Object.entries(t))n[o]!==s&&(i=!0,n[o]=s);else i=!0,l(this,Tn).set(e,t);i&&se(this,Xv,fF).call(this),t instanceof mr&&((l(this,Ca)||L(this,Ca,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,Tn).has(e)}get size(){return l(this,Tn).size}resetModified(){l(this,Nc)&&(L(this,Nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dv(this)}get serializable(){if(l(this,Tn).size===0)return mx;let e=new Map,t=new hv,n=[],i=Object.create(null),o=!1;for(let[s,a]of l(this,Tn)){let u=a instanceof mr?a.serialize(!1,i):a;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),o||(o=!!u.bitmap))}if(o)for(let s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:mx}get editorStats(){let e=null,t=new Map,n=0,i=0;for(let o of l(this,Tn).values()){if(!(o instanceof mr)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);let s=o.telemetryFinalData;if(!s)continue;let{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(o).constructor),e||(e=Object.create(null));let u=e[a]||(e[a]=new Map);for(let[c,f]of Object.entries(s)){if(c==="type")continue;let h=u.get(c);h||(h=new Map,u.set(c,h));let d=h.get(f)??0;h.set(f,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(let[o,s]of t)e[o]=s.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){L(this,kc,null)}updateEditor(e,t){let n=l(this,Ca)?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return l(this,Ca)?.get(e)||null}get modifiedIds(){if(l(this,kc))return l(this,kc);let e=[];if(l(this,Ca))for(let t of l(this,Ca).values())t.serialize()&&e.push(t.annotationElementId);return L(this,kc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,Tn).entries()}};Nc=new WeakMap,kc=new WeakMap,Ca=new WeakMap,Tn=new WeakMap,Xv=new WeakSet,fF=function(){l(this,Nc)||(L(this,Nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};dv=class extends um{constructor(t){super();X(this,Gm);let{map:n,hash:i,transfer:o}=t.serializable,s=structuredClone(n,o?{transfer:o}:null);L(this,Gm,{map:s,hash:i,transfer:o})}get print(){dr("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Gm)}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}};Gm=new WeakMap;yx=class{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){X(this,hd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,hd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||l(this,hd).has(e.loadedName))){if(Mt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:i,src:o,style:s}=e,a=new FontFace(i,o,s);this.addNativeFontFace(a);try{await a.load(),l(this,hd).add(i),n?.(e)}catch{_t(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw _t(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{let i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Qn||Ur.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Mt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){let o=n.shift();setTimeout(o.callback,0)}}let{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,A){return S.charCodeAt(A)<<24|S.charCodeAt(A+1)<<16|S.charCodeAt(A+2)<<8|S.charCodeAt(A+3)&255}function i(S,A,B,T){let Z=S.substring(0,A),ie=S.substring(A+B);return Z+T+ie}let o,s,a=this._document.createElement("canvas");a.width=1,a.height=1;let u=a.getContext("2d"),c=0;function f(S,A){if(++c>30){_t("Load test font never loaded."),A();return}if(u.font="30px "+S,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(f.bind(null,S,A))}let h=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=i(d,976,h.length,h);let b=16,v=1482184792,w=n(d,b);for(o=0,s=h.length-3;o<s;o+=4)w=w-v+n(h,o)|0;o<h.length&&(w=w-v+n(h+"XXX",o)|0),d=i(d,b,4,YG(w));let y=`url(data:font/opentype;base64,${btoa(d)});`,_=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(_);let E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(let S of[e.loadedName,h]){let A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=S,E.append(A)}this._document.body.append(E),f(h,()=>{E.remove(),t.complete()})}};hd=new WeakMap;bx=class{constructor(e,t=null,n,i){X(this,rr);this.compiledGlyphs=Object.create(null),L(this,rr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${CM(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t,i;try{i=e.get(n)}catch(s){_t(`getPathGenerator - ignoring character: "${s}".`)}let o=kM(i?.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return l(this,rr).black}get bold(){return l(this,rr).bold}get disableFontFace(){return l(this,rr).disableFontFace??!1}set disableFontFace(e){wt(this,"disableFontFace",!!e)}get fontExtraProperties(){return l(this,rr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,rr).isInvalidPDFjsFont}get isType3Font(){return l(this,rr).isType3Font}get italic(){return l(this,rr).italic}get missingFile(){return l(this,rr).missingFile}get remeasure(){return l(this,rr).remeasure}get vertical(){return l(this,rr).vertical}get ascent(){return l(this,rr).ascent}get defaultWidth(){return l(this,rr).defaultWidth}get descent(){return l(this,rr).descent}get bbox(){return l(this,rr).bbox}set bbox(e){wt(this,"bbox",e)}get fontMatrix(){return l(this,rr).fontMatrix}get fallbackName(){return l(this,rr).fallbackName}get loadedName(){return l(this,rr).loadedName}get mimetype(){return l(this,rr).mimetype}get name(){return l(this,rr).name}get data(){return l(this,rr).data}clearData(){l(this,rr).clearData()}get cssFontInfo(){return l(this,rr).cssFontInfo}get systemFontInfo(){return l(this,rr).systemFontInfo}get defaultVMetrics(){return l(this,rr).defaultVMetrics}};rr=new WeakMap;$h=class $h{constructor(e){X(this,gd);X(this,dd);X(this,pd);X(this,Vm);L(this,dd,e),L(this,pd,new DataView(l(this,dd))),L(this,Vm,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let c of $h.strings){let f=t.encode(e[c]);n[c]=f,i+=4+f.length}let o=new ArrayBuffer(i),s=new Uint8Array(o),a=new DataView(o),u=0;for(let c of $h.strings){let f=n[c],h=f.length;a.setUint32(u,h),s.set(f,u+4),u+=4+h}return Mt(u===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return se(this,gd,Lw).call(this,0)}get fontWeight(){return se(this,gd,Lw).call(this,1)}get italicAngle(){return se(this,gd,Lw).call(this,2)}};dd=new WeakMap,pd=new WeakMap,Vm=new WeakMap,gd=new WeakSet,Lw=function(e){Mt(e<$h.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=l(this,pd).getUint32(t)+4;let n=l(this,pd).getUint32(t);return l(this,Vm).decode(new Uint8Array(l(this,dd),t+4,n))},Qe($h,"strings",["fontFamily","fontWeight","italicAngle"]);pv=$h,zh=class zh{constructor(e){X(this,Pc);X(this,Vl);X(this,xo);X(this,Lc);L(this,Vl,e),L(this,xo,new DataView(l(this,Vl))),L(this,Lc,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let d of zh.strings){let g=t.encode(e[d]);n[d]=g,i+=4+g.length}i+=4;let o,s,a=1+i;e.style&&(o=t.encode(e.style.style),s=t.encode(e.style.weight),a+=4+o.length+4+s.length);let u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0;f.setUint8(h++,e.guessFallback?1:0),f.setUint32(h,0),h+=4,i=0;for(let d of zh.strings){let g=n[d],b=g.length;i+=4+b,f.setUint32(h,b),c.set(g,h+4),h+=4+b}return f.setUint32(h-i-4,i),e.style&&(f.setUint32(h,o.length),c.set(o,h+4),h+=4+o.length,f.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length),Mt(h<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(h)}get guessFallback(){return l(this,xo).getUint8(0)!==0}get css(){return se(this,Pc,jg).call(this,0)}get loadedName(){return se(this,Pc,jg).call(this,1)}get baseFontName(){return se(this,Pc,jg).call(this,2)}get src(){return se(this,Pc,jg).call(this,3)}get style(){let e=1;e+=4+l(this,xo).getUint32(e);let t=l(this,xo).getUint32(e),n=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,t));e+=4+t;let i=l(this,xo).getUint32(e),o=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,i));return{style:n,weight:o}}};Vl=new WeakMap,xo=new WeakMap,Lc=new WeakMap,Pc=new WeakSet,jg=function(e){Mt(e<zh.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=l(this,xo).getUint32(t)+4;let n=l(this,xo).getUint32(t);return l(this,Lc).decode(new Uint8Array(l(this,Vl),t+4,n))},Qe(zh,"strings",["css","loadedName","baseFontName","src"]);gv=zh,St=class St{constructor({data:e,extra:t}){X(this,Fr);X(this,So);X(this,Ym);X(this,nr);L(this,So,e),L(this,Ym,new TextDecoder),L(this,nr,new DataView(l(this,So))),t&&Object.assign(this,t)}get black(){return se(this,Fr,ks).call(this,0)}get bold(){return se(this,Fr,ks).call(this,1)}get disableFontFace(){return se(this,Fr,ks).call(this,2)}get fontExtraProperties(){return se(this,Fr,ks).call(this,3)}get isInvalidPDFjsFont(){return se(this,Fr,ks).call(this,4)}get isType3Font(){return se(this,Fr,ks).call(this,5)}get italic(){return se(this,Fr,ks).call(this,6)}get missingFile(){return se(this,Fr,ks).call(this,7)}get remeasure(){return se(this,Fr,ks).call(this,8)}get vertical(){return se(this,Fr,ks).call(this,9)}get ascent(){return se(this,Fr,Pw).call(this,0)}get defaultWidth(){return se(this,Fr,Pw).call(this,1)}get descent(){return se(this,Fr,Pw).call(this,2)}get bbox(){let e=l(St,yd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<4;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=l(St,bd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<6;i++)n.push(l(this,nr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=l(St,wd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<3;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return se(this,Fr,$g).call(this,0)}get loadedName(){return se(this,Fr,$g).call(this,1)}get mimetype(){return se(this,Fr,$g).call(this,2)}get name(){return se(this,Fr,$g).call(this,3)}get data(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);if(o!==0)return new Uint8Array(l(this,So),e+4,o)}clearData(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);new Uint8Array(l(this,So),e+4,o).fill(0),l(this,nr).setUint32(e,0)}get cssFontInfo(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);if(i===0)return null;let o=new Uint8Array(i);return o.set(new Uint8Array(l(this,So),e+4,i)),new pv(o.buffer)}get systemFontInfo(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);if(n===0)return null;let i=new Uint8Array(n);return i.set(new Uint8Array(l(this,So),e+4,n)),new gv(i.buffer)}static write(e){let t=e.systemFontInfo?gv.write(e.systemFontInfo):null,n=e.cssFontInfo?pv.write(e.cssFontInfo):null,i=new TextEncoder,o={},s=0;for(let v of St.strings)o[v]=i.encode(e[v]),s+=4+o[v].length;let a=l(St,Oi)+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0,d=St.bools.length,g=0,b=0;for(let v=0;v<d;v++){let w=e[St.bools[v]];g|=(w===void 0?0:w?2:1)<<b,b+=2,(b===8||v===d-1)&&(f.setUint8(h++,g),g=0,b=0)}Mt(h===l(St,md),"FontInfo.write: Boolean properties offset mismatch");for(let v of St.numbers)f.setFloat64(h,e[v]),h+=8;if(Mt(h===l(St,yd),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(h++,4);for(let v of e.bbox)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=8;if(Mt(h===l(St,bd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(h++,6);for(let v of e.fontMatrix)f.setFloat64(h,v,!0),h+=8}else f.setUint8(h++,0),h+=48;if(Mt(h===l(St,wd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(h++,1);for(let v of e.defaultVMetrics)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=6;Mt(h===l(St,Oi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(l(St,Oi),0),h+=4;for(let v of St.strings){let w=o[v],y=w.length;f.setUint32(h,y),c.set(w,h+4),h+=4+y}if(f.setUint32(l(St,Oi),h-l(St,Oi)-4),!t)f.setUint32(h,0),h+=4;else{let v=t.byteLength;f.setUint32(h,v),Mt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),h+4),h+=4+v}if(!n)f.setUint32(h,0),h+=4;else{let v=n.byteLength;f.setUint32(h,v),Mt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(n),h+4),h+=4+v}return e.data===void 0?(f.setUint32(h,0),h+=4):(f.setUint32(h,e.data.length),c.set(e.data,h+4),h+=4+e.data.length),Mt(h<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(h)}};md=new WeakMap,yd=new WeakMap,bd=new WeakMap,wd=new WeakMap,Oi=new WeakMap,So=new WeakMap,Ym=new WeakMap,nr=new WeakMap,Fr=new WeakSet,ks=function(e){Mt(e<St.bools.length,"Invalid boolean index");let t=Math.floor(e/4),n=e*2%8,i=l(this,nr).getUint8(t)>>n&3;return i===0?void 0:i===2},Pw=function(e){return Mt(e<St.numbers.length,"Invalid number index"),l(this,nr).getFloat64(l(St,md)+e*8)},$g=function(e){Mt(e<St.strings.length,"Invalid string index");let t=l(St,Oi)+4;for(let o=0;o<e;o++)t+=l(this,nr).getUint32(t)+4;let n=l(this,nr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,So),t+4,n)),l(this,Ym).decode(i)},Qe(St,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Qe(St,"numbers",["ascent","defaultWidth","descent"]),Qe(St,"strings",["fallbackName","loadedName","mimetype","name"]),X(St,md,Math.ceil(St.bools.length*2/8)),X(St,yd,l(St,md)+St.numbers.length*8),X(St,bd,l(St,yd)+1+8),X(St,wd,l(St,bd)+1+48),X(St,Oi,l(St,wd)+1+6);wx=St,pr=class pr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],o=[],s=[],a=[],u=null,c=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],s=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,u=e[1],i=e[2],o=e[3],a=e[4]||[],n=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}let f=Math.floor(i.length/2),h=Math.floor(o.length/3),d=s.length,g=a.length,b=0;for(let A of a)b+=1,b=Math.ceil(b/4)*4,b+=4+A.coords.length*4,b+=4+A.colors.length*4,A.verticesPerRow!==void 0&&(b+=4);let v=20+f*8+h*3+d*8+(n?16:0)+(c?3:0)+b,w=new ArrayBuffer(v),y=new DataView(w),_=new Uint8Array(w);y.setUint8(l(pr,Xm),t),y.setUint8(l(pr,Km),n?1:0),y.setUint8(l(pr,Zm),c?1:0),y.setUint8(l(pr,Jm),u),y.setUint32(l(pr,Qm),f,!0),y.setUint32(l(pr,ey),h,!0),y.setUint32(l(pr,ty),d,!0),y.setUint32(l(pr,ry),g,!0);let E=20;new Float32Array(w,E,f*2).set(i),E+=f*8,_.set(o,E),E+=h*3;for(let[A,B]of s)y.setFloat32(E,A,!0),E+=4,y.setUint32(E,parseInt(B.slice(1),16),!0),E+=4;if(n)for(let A of n)y.setFloat32(E,A,!0),E+=4;c&&(_.set(c,E),E+=3);for(let A=0;A<a.length;A++){let B=a[A];y.setUint8(E,B.type),E+=1,E=Math.ceil(E/4)*4,y.setUint32(E,B.coords.length,!0),E+=4,new Int32Array(w,E,B.coords.length).set(B.coords),E+=B.coords.length*4,y.setUint32(E,B.colors.length,!0),E+=4,new Int32Array(w,E,B.colors.length).set(B.colors),E+=B.colors.length*4,B.verticesPerRow!==void 0&&(y.setUint32(E,B.verticesPerRow,!0),E+=4)}return w}getIR(){let e=this.view,t=this.data[l(pr,Xm)],n=!!this.data[l(pr,Km)],i=!!this.data[l(pr,Zm)],o=e.getUint32(l(pr,Qm),!0),s=e.getUint32(l(pr,ey),!0),a=e.getUint32(l(pr,ty),!0),u=e.getUint32(l(pr,ry),!0),c=20,f=new Float32Array(this.buffer,c,o*2);c+=o*8;let h=new Uint8Array(this.buffer,c,s*3);c+=s*3;let d=[];for(let w=0;w<a;++w){let y=e.getFloat32(c,!0);c+=4;let _=e.getUint32(c,!0);c+=4,d.push([y,`#${_.toString(16).padStart(6,"0")}`])}let g=null;if(n){g=[];for(let w=0;w<4;++w)g.push(e.getFloat32(c,!0)),c+=4}let b=null;i&&(b=new Uint8Array(this.buffer,c,3),c+=3);let v=[];for(let w=0;w<u;++w){let y=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;let _=e.getUint32(c,!0);c+=4;let E=new Int32Array(this.buffer,c,_);c+=_*4;let S=e.getUint32(c,!0);c+=4;let A=new Int32Array(this.buffer,c,S);c+=S*4;let B={type:y,coords:E,colors:A};y===HA.LATTICE&&(B.verticesPerRow=e.getUint32(c,!0),c+=4),v.push(B)}if(t===1)return["RadialAxial","axial",g,d,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",g,d,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){let w=this.data[l(pr,Jm)],y=null;if(f.length>0){let _=f[0],E=f[0],S=f[1],A=f[1];for(let B=0;B<f.length;B+=2){let T=f[B],Z=f[B+1];_=_>T?T:_,S=S>Z?Z:S,E=E<T?T:E,A=A<Z?Z:A}y=[_,S,E,A]}return["Mesh",w,f,h,v,y,g,b]}throw new Error(`Unsupported pattern kind: ${t}`)}};Xm=new WeakMap,Km=new WeakMap,Zm=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,ey=new WeakMap,ty=new WeakMap,ry=new WeakMap,X(pr,Xm,0),X(pr,Km,1),X(pr,Zm,2),X(pr,Jm,3),X(pr,Qm,4),X(pr,ey,8),X(pr,ty,12),X(pr,ry,16);vx=pr,_x=class{constructor(e){X(this,vd);L(this,vd,e)}static write(e){let t,n;return Ur.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return Ur.isFloat16ArraySupported?new Float16Array(l(this,vd)):new Float32Array(l(this,vd))}};vd=new WeakMap;Ex=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,iV=r=>typeof r=="object"&&typeof r?.name=="string",hF=JG.bind(null,Ex,iV),Ax=class{constructor(){X(this,Ra,new Map);X(this,Kv,Promise.resolve())}postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};l(this,Kv).then(()=>{for(let[i]of l(this,Ra))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){let{signal:o}=n;if(o.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}l(this,Ra).set(t,i)}removeEventListener(e,t){l(this,Ra).get(t)?.(),l(this,Ra).delete(t)}terminate(){for(let[,e]of l(this,Ra))e?.();l(this,Ra).clear()}};Ra=new WeakMap,Kv=new WeakMap;ww={DATA:1,ERROR:2},Yr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};fc=class{constructor(e,t,n){X(this,xs);X(this,_d,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",se(this,xs,dF).bind(this),{signal:l(this,_d).signal})}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,n,i){let o=this.streamId++,s=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:c=>{let f=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:a,action:e,streamId:o,data:t,desiredSize:c.desiredSize},i),f.promise},pull:c=>{let f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,u.postMessage({sourceName:s,targetName:a,stream:Yr.PULL,streamId:o,desiredSize:c.desiredSize}),f.promise},cancel:c=>{Mt(c instanceof Error,"cancel must have a valid reason");let f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:s,targetName:a,stream:Yr.CANCEL,streamId:o,reason:hi(c)}),f.promise}},n)}destroy(){l(this,_d)?.abort(),L(this,_d,null)}};_d=new WeakMap,xs=new WeakSet,dF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){se(this,xs,gF).call(this,e);return}if(e.callback){let n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===ww.DATA)i.resolve(e.data);else if(e.callback===ww.ERROR)i.reject(hi(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(s){o.postMessage({sourceName:n,targetName:i,callback:ww.DATA,callbackId:e.callbackId,data:s})},function(s){o.postMessage({sourceName:n,targetName:i,callback:ww.ERROR,callbackId:e.callbackId,reason:hi(s)})});return}if(e.streamId){se(this,xs,pF).call(this,e);return}t(e.data)},pF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this,a=this.actionHandler[e.action],u={enqueue(c,f=1,h){if(this.isCancelled)return;let d=this.desiredSize;this.desiredSize-=f,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:Yr.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(c){Mt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.ERROR,streamId:t,reason:hi(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(a,e.data,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,reason:hi(c)})})},gF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Yr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(hi(e.reason));break;case Yr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(hi(e.reason));break;case Yr.PULL:if(!a){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||cM).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,reason:hi(c)})});break;case Yr.ENQUEUE:if(Mt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Yr.CLOSE:if(Mt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),se(this,xs,Bw).call(this,s,t);break;case Yr.ERROR:Mt(s,"error should have stream controller"),s.controller.error(hi(e.reason)),se(this,xs,Bw).call(this,s,t);break;case Yr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(hi(e.reason)),se(this,xs,Bw).call(this,s,t);break;case Yr.CANCEL:if(!a)break;let u=hi(e.reason);Promise.try(a.onCancel||cM,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,reason:hi(c)})}),a.sinkCapability.reject(u),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Bw=async function(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]};mv=class{constructor({enableHWA:e=!1}){X(this,ny,!1);L(this,ny,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,ny)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){dr("Abstract method `_createCanvas` called.")}};ny=new WeakMap;xx=class extends mv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},yv=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},bv=class extends yv{async _fetch(e){let t=await Ep(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):c0(t)}},wv=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,o){return"none"}destroy(e=!1){}},Sx=class extends wv{constructor({docId:t,ownerDocument:n=globalThis.document}){super();X(this,ut);X(this,Bc);X(this,Ed);X(this,Da);X(this,Ia);X(this,jn);X(this,Mc);X(this,Fc,0);L(this,Ia,t),L(this,jn,n)}addFilter(t){if(!t)return"none";let n=l(this,ut,Bn).get(t);if(n)return n;let[i,o,s]=se(this,ut,Mw).call(this,t),a=t.length===1?i:`${i}${o}${s}`;if(n=l(this,ut,Bn).get(a),n)return l(this,ut,Bn).set(t,n),n;let u=`g_${l(this,Ia)}_transfer_map_${tn(this,Fc)._++}`,c=se(this,ut,Nh).call(this,u);l(this,ut,Bn).set(t,c),l(this,ut,Bn).set(a,c);let f=se(this,ut,kh).call(this,u);return se(this,ut,qg).call(this,i,o,s,f),c}addHCMFilter(t,n){let i=`${t}-${n}`,o="base",s=l(this,ut,zg).get(o);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},l(this,ut,zg).set(o,s)),!t||!n))return s.url;let a=se(this,ut,Hg).call(this,t);t=st.makeHexColor(...a);let u=se(this,ut,Hg).call(this,n);if(n=st.makeHexColor(...u),l(this,ut,Oh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return s.url;let c=new Array(256);for(let b=0;b<=255;b++){let v=b/255;c[b]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}let f=c.join(","),h=`g_${l(this,Ia)}_hcm_filter`,d=s.filter=se(this,ut,kh).call(this,h);se(this,ut,qg).call(this,f,f,f,d),se(this,ut,Tx).call(this,d);let g=(b,v)=>{let w=a[b]/255,y=u[b]/255,_=new Array(v+1);for(let E=0;E<=v;E++)_[E]=w+E/v*(y-w);return _.join(",")};return se(this,ut,qg).call(this,g(0,5),g(1,5),g(2,5),d),s.url=se(this,ut,Nh).call(this,h),s.url}addAlphaFilter(t){let n=l(this,ut,Bn).get(t);if(n)return n;let[i]=se(this,ut,Mw).call(this,[t]),o=`alpha_${i}`;if(n=l(this,ut,Bn).get(o),n)return l(this,ut,Bn).set(t,n),n;let s=`g_${l(this,Ia)}_alpha_map_${tn(this,Fc)._++}`,a=se(this,ut,Nh).call(this,s);l(this,ut,Bn).set(t,a),l(this,ut,Bn).set(o,a);let u=se(this,ut,kh).call(this,s);return se(this,ut,Cx).call(this,i,u),a}addLuminosityFilter(t){let n=l(this,ut,Bn).get(t||"luminosity");if(n)return n;let i,o;if(t?([i]=se(this,ut,Mw).call(this,[t]),o=`luminosity_${i}`):o="luminosity",n=l(this,ut,Bn).get(o),n)return l(this,ut,Bn).set(t,n),n;let s=`g_${l(this,Ia)}_luminosity_map_${tn(this,Fc)._++}`,a=se(this,ut,Nh).call(this,s);l(this,ut,Bn).set(t,a),l(this,ut,Bn).set(o,a);let u=se(this,ut,kh).call(this,s);return se(this,ut,mF).call(this,u),t&&se(this,ut,Cx).call(this,i,u),a}addHighlightHCMFilter(t,n,i,o,s){let a=`${n}-${i}-${o}-${s}`,u=l(this,ut,zg).get(t);if(u?.key===a||(u?(u.filter?.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},l(this,ut,zg).set(t,u)),!n||!i))return u.url;let[c,f]=[n,i].map(se(this,ut,Hg).bind(this)),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[g,b]=[o,s].map(se(this,ut,Hg).bind(this));d<h&&([h,d,g,b]=[d,h,b,g]),l(this,ut,Oh).style.color="";let v=(_,E,S)=>{let A=new Array(256),B=(d-h)/S,T=_/255,Z=(E-_)/(255*S),ie=0;for(let G=0;G<=S;G++){let ae=Math.round(h+G*B),U=T+G*Z;for(let V=ie;V<=ae;V++)A[V]=U;ie=ae+1}for(let G=ie;G<256;G++)A[G]=A[ie-1];return A.join(",")},w=`g_${l(this,Ia)}_hcm_${t}_filter`,y=u.filter=se(this,ut,kh).call(this,w);return se(this,ut,Tx).call(this,y),se(this,ut,qg).call(this,v(g[0],b[0],5),v(g[1],b[1],5),v(g[2],b[2],5),y),u.url=se(this,ut,Nh).call(this,w),u.url}destroy(t=!1){t&&l(this,Mc)?.size||(l(this,Da)?.parentNode.parentNode.remove(),L(this,Da,null),l(this,Ed)?.clear(),L(this,Ed,null),l(this,Mc)?.clear(),L(this,Mc,null),L(this,Fc,0))}};Bc=new WeakMap,Ed=new WeakMap,Da=new WeakMap,Ia=new WeakMap,jn=new WeakMap,Mc=new WeakMap,Fc=new WeakMap,ut=new WeakSet,Bn=function(){return l(this,Ed)||L(this,Ed,new Map)},zg=function(){return l(this,Mc)||L(this,Mc,new Map)},Oh=function(){if(!l(this,Da)){let t=l(this,jn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;let i=l(this,jn).createElementNS(ha,"svg");i.setAttribute("width",0),i.setAttribute("height",0),L(this,Da,l(this,jn).createElementNS(ha,"defs")),t.append(i),i.append(l(this,Da)),l(this,jn).body.append(t)}return l(this,Da)},Mw=function(t){if(t.length===1){let c=t[0],f=new Array(256);for(let d=0;d<256;d++)f[d]=c[d]/255;let h=f.join(",");return[h,h,h]}let[n,i,o]=t,s=new Array(256),a=new Array(256),u=new Array(256);for(let c=0;c<256;c++)s[c]=n[c]/255,a[c]=i[c]/255,u[c]=o[c]/255;return[s.join(","),a.join(","),u.join(",")]},Nh=function(t){if(l(this,Bc)===void 0){L(this,Bc,"");let n=l(this,jn).URL;n!==l(this,jn).baseURI&&(f0(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,Bc,_T(n,"")))}return`url(${l(this,Bc)}#${t})`},mF=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Tx=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},kh=function(t){let n=l(this,jn).createElementNS(ha,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,ut,Oh).append(n),n},Wg=function(t,n,i){let o=l(this,jn).createElementNS(ha,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),t.append(o)},qg=function(t,n,i,o){let s=l(this,jn).createElementNS(ha,"feComponentTransfer");o.append(s),se(this,ut,Wg).call(this,s,"feFuncR",t),se(this,ut,Wg).call(this,s,"feFuncG",n),se(this,ut,Wg).call(this,s,"feFuncB",i)},Cx=function(t,n){let i=l(this,jn).createElementNS(ha,"feComponentTransfer");n.append(i),se(this,ut,Wg).call(this,i,"feFuncA",t)},Hg=function(t){return l(this,ut,Oh).style.color=t,Ap(getComputedStyle(l(this,ut,Oh)).getPropertyValue("color"))};vv=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},_v=class extends vv{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}},Ev=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},Av=class extends Ev{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}};Qn&&_t("Please use the `legacy` build in Node.js environments.");Rx=class extends wv{},Dx=class extends mv{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("")("@napi-rs/canvas").createCanvas(e,t)}},Ix=class extends yv{async _fetch(e){return xT(e)}},Ox=class extends vv{async _fetch(e){return xT(e)}},Nx=class extends Ev{async _fetch(e){return xT(e)}},Rh="__forcedDependency",{floor:fM,ceil:hM}=Math;kx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],Lx=class{constructor(e,t){X(this,Ad);X(this,Yl);L(this,Ad,e),L(this,Yl,t)}get length(){return l(this,Ad).length}isEmpty(e){return l(this,Ad)[e]===kx}minX(e){return l(this,Yl)[e*4+0]/256}minY(e){return l(this,Yl)[e*4+1]/256}maxX(e){return(l(this,Yl)[e*4+2]+1)/256}maxY(e){return(l(this,Yl)[e*4+3]+1)/256}};Ad=new WeakMap,Yl=new WeakMap;_w=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t},Px=class{constructor(e,t,n=!1){X(this,sy);X(this,gi,{__proto__:null});X(this,mi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Rh]:[]});X(this,Uc,new Map);X(this,Fs,[]);X(this,jc,[]);X(this,Oa,[[1,0,0,1,0,0]]);X(this,Zt,[-1/0,-1/0,1/0,1/0]);X(this,ir,new Float64Array([1/0,1/0,-1/0,-1/0]));X(this,Na,-1);X(this,yi,new Set);X(this,iy,new Map);X(this,xd,new Map);X(this,$c);X(this,zc);X(this,ka);X(this,$n);X(this,To);L(this,$c,e.width),L(this,zc,e.height),se(this,sy,Bx).call(this,t),n&&L(this,To,new Map)}growOperationsCount(e){e>=l(this,$n).length&&se(this,sy,Bx).call(this,e,l(this,$n))}save(e){return L(this,gi,{__proto__:l(this,gi)}),L(this,mi,{__proto__:l(this,mi),transform:{__proto__:l(this,mi).transform},moveText:{__proto__:l(this,mi).moveText},sameLineText:{__proto__:l(this,mi).sameLineText},[Rh]:{__proto__:l(this,mi)[Rh]}}),L(this,Zt,{__proto__:l(this,Zt)}),l(this,Fs).push(e),this}restore(e){let t=Object.getPrototypeOf(l(this,gi));if(t===null)return this;L(this,gi,t),L(this,mi,Object.getPrototypeOf(l(this,mi))),L(this,Zt,Object.getPrototypeOf(l(this,Zt)));let n=l(this,Fs).pop();return n!==void 0&&(_w(l(this,To),e)?.dependencies.add(n),l(this,$n)[e]=l(this,$n)[n]),this}recordOpenMarker(e){return l(this,Fs).push(e),this}getOpenMarker(){return l(this,Fs).length===0?null:l(this,Fs).at(-1)}recordCloseMarker(e){let t=l(this,Fs).pop();return t!==void 0&&(_w(l(this,To),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}beginMarkedContent(e){return l(this,jc).push(e),this}endMarkedContent(e){let t=l(this,jc).pop();return t!==void 0&&(_w(l(this,To),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}pushBaseTransform(e){return l(this,Oa).push(st.multiplyByDOMMatrix(l(this,Oa).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,Oa).length>1&&l(this,Oa).pop(),this}recordSimpleData(e,t){return l(this,gi)[e]=t,this}recordIncrementalData(e,t){return l(this,mi)[e].push(t),this}resetIncrementalData(e,t){return l(this,mi)[e].length=0,this}recordNamedData(e,t){return l(this,Uc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){l(this,gi)[e]=l(this,Uc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Rh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(let t of e)t in l(this,gi)&&this.recordFutureForcedDependency(t,l(this,gi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let e of l(this,yi))this.recordFutureForcedDependency(Rh,e);return this}resetBBox(e){return l(this,Na)!==e&&(L(this,Na,e),l(this,ir)[0]=1/0,l(this,ir)[1]=1/0,l(this,ir)[2]=-1/0,l(this,ir)[3]=-1/0),this}recordClipBox(e,t,n,i,o,s){let a=st.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([n,o,i,s],a,u);let c=st.intersect(l(this,Zt),u);return c?(l(this,Zt)[0]=c[0],l(this,Zt)[1]=c[1],l(this,Zt)[2]=c[2],l(this,Zt)[3]=c[3]):(l(this,Zt)[0]=l(this,Zt)[1]=1/0,l(this,Zt)[2]=l(this,Zt)[3]=-1/0),this}recordBBox(e,t,n,i,o,s){let a=l(this,Zt);if(a[0]===1/0)return this;let u=st.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform());if(a[0]===-1/0)return st.axialAlignedBoundingBox([n,o,i,s],u,l(this,ir)),this;let c=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([n,o,i,s],u,c),l(this,ir)[0]=Math.min(l(this,ir)[0],Math.max(c[0],a[0])),l(this,ir)[1]=Math.min(l(this,ir)[1],Math.max(c[1],a[1])),l(this,ir)[2]=Math.max(l(this,ir)[2],Math.min(c[2],a[2])),l(this,ir)[3]=Math.max(l(this,ir)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,n,i=1,o=0,s=0,a){let u=n.bbox,c,f;if(u&&(c=u[2]!==u[0]&&u[3]!==u[1]&&l(this,xd).get(n),c!==!1&&(f=[0,0,0,0],st.axialAlignedBoundingBox(u,n.fontMatrix,f),(i!==1||o!==0||s!==0)&&st.scaleMinMax([i,0,0,-i,o,s],f),c)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!a)return this.recordFullPageBBox(e);let h=a();return u&&f&&c===void 0&&(c=f[0]<=o-h.actualBoundingBoxLeft&&f[2]>=o+h.actualBoundingBoxRight&&f[1]<=s-h.actualBoundingBoxAscent&&f[3]>=s+h.actualBoundingBoxDescent,l(this,xd).set(n,c),c)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-h.actualBoundingBoxLeft,o+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,ir)[0]=Math.max(0,l(this,Zt)[0]),l(this,ir)[1]=Math.max(0,l(this,Zt)[1]),l(this,ir)[2]=Math.min(l(this,$c),l(this,Zt)[2]),l(this,ir)[3]=Math.min(l(this,zc),l(this,Zt)[3]),this}getSimpleIndex(e){return l(this,gi)[e]}recordDependencies(e,t){let n=l(this,yi),i=l(this,gi),o=l(this,mi);for(let s of t)s in l(this,gi)?n.add(i[s]):s in o&&o[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return l(this,Uc).has(t)&&l(this,yi).add(l(this,Uc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Rh]),l(this,To)){let n=_w(l(this,To),e),{dependencies:i}=n;l(this,yi).forEach(i.add,i),l(this,Fs).forEach(i.add,i),l(this,jc).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(l(this,Na)===e){let n=fM(l(this,ir)[0]*256/l(this,$c)),i=fM(l(this,ir)[1]*256/l(this,zc)),o=hM(l(this,ir)[2]*256/l(this,$c)),s=hM(l(this,ir)[3]*256/l(this,zc));vw(l(this,ka),e,n,i,o,s);for(let a of l(this,yi))a!==e&&vw(l(this,ka),a,n,i,o,s);for(let a of l(this,Fs))a!==e&&vw(l(this,ka),a,n,i,o,s);for(let a of l(this,jc))a!==e&&vw(l(this,ka),a,n,i,o,s);t||(l(this,yi).clear(),L(this,Na,-1))}return this}recordShowTextOperation(e,t=!1){let n=Array.from(l(this,yi));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(let i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Na)===e&&(L(this,Na,-1),l(this,Zt)[0]=Math.max(l(this,Zt)[0],l(this,ir)[0]),l(this,Zt)[1]=Math.max(l(this,Zt)[1],l(this,ir)[1]),l(this,Zt)[2]=Math.min(l(this,Zt)[2],l(this,ir)[2]),l(this,Zt)[3]=Math.min(l(this,Zt)[3],l(this,ir)[3]),t||l(this,yi).clear()),this}_takePendingDependencies(){let e=l(this,yi);return L(this,yi,new Set),e}_extractOperation(e){let t=l(this,iy).get(e);return l(this,iy).delete(e),t}_pushPendingDependencies(e){for(let t of e)l(this,yi).add(t)}take(){return l(this,xd).clear(),new Lx(l(this,$n),l(this,ka))}takeDebugMetadata(){return l(this,To)}};gi=new WeakMap,mi=new WeakMap,Uc=new WeakMap,Fs=new WeakMap,jc=new WeakMap,Oa=new WeakMap,Zt=new WeakMap,ir=new WeakMap,Na=new WeakMap,yi=new WeakMap,iy=new WeakMap,xd=new WeakMap,$c=new WeakMap,zc=new WeakMap,ka=new WeakMap,$n=new WeakMap,To=new WeakMap,sy=new WeakSet,Bx=function(e,t){let n=new ArrayBuffer(e*4);L(this,ka,new Uint8ClampedArray(n)),L(this,$n,new Uint32Array(n)),t&&t.length>0?(l(this,$n).set(t),l(this,$n).fill(kx,t.length)):l(this,$n).fill(kx)};CT=class CT{constructor(e,t,n){X(this,fr);X(this,Pr);X(this,Us);X(this,Sd,0);X(this,Td,0);if(e instanceof CT&&l(e,Us)===!!n)return e;L(this,fr,e),L(this,Pr,t),L(this,Us,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return tn(this,Td)._++,l(this,fr).save(l(this,Pr)),this}restore(e){return l(this,Td)>0&&(l(this,fr).restore(l(this,Pr)),tn(this,Td)._--),this}recordOpenMarker(e){return tn(this,Sd)._++,this}getOpenMarker(){return l(this,Sd)>0?l(this,Pr):l(this,fr).getOpenMarker()}recordCloseMarker(e){return tn(this,Sd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,fr).pushBaseTransform(e),this}popBaseTransform(){return l(this,fr).popBaseTransform(),this}recordSimpleData(e,t){return l(this,fr).recordSimpleData(e,l(this,Pr)),this}recordIncrementalData(e,t){return l(this,fr).recordIncrementalData(e,l(this,Pr)),this}resetIncrementalData(e,t){return l(this,fr).resetIncrementalData(e,l(this,Pr)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return l(this,fr).recordSimpleDataFromNamed(e,t,l(this,Pr)),this}recordFutureForcedDependency(e,t){return l(this,fr).recordFutureForcedDependency(e,l(this,Pr)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,fr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,fr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,Us)||l(this,fr).resetBBox(l(this,Pr)),this}recordClipBox(e,t,n,i,o,s){return l(this,Us)||l(this,fr).recordClipBox(l(this,Pr),t,n,i,o,s),this}recordBBox(e,t,n,i,o,s){return l(this,Us)||l(this,fr).recordBBox(l(this,Pr),t,n,i,o,s),this}recordCharacterBBox(e,t,n,i,o,s,a){return l(this,Us)||l(this,fr).recordCharacterBBox(l(this,Pr),t,n,i,o,s,a),this}recordFullPageBBox(e){return l(this,Us)||l(this,fr).recordFullPageBBox(l(this,Pr)),this}getSimpleIndex(e){return l(this,fr).getSimpleIndex(e)}recordDependencies(e,t){return l(this,fr).recordDependencies(l(this,Pr),t),this}recordNamedDependency(e,t){return l(this,fr).recordNamedDependency(l(this,Pr),t),this}recordOperation(e){return l(this,fr).recordOperation(l(this,Pr),!0),this}recordShowTextOperation(e){return l(this,fr).recordShowTextOperation(l(this,Pr),!0),this}bboxToClipBoxDropOperation(e){return l(this,Us)||l(this,fr).bboxToClipBoxDropOperation(l(this,Pr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};fr=new WeakMap,Pr=new WeakMap,Us=new WeakMap,Sd=new WeakMap,Td=new WeakMap;xv=CT,ls={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};cm=class{isModifyingCurrentTransform(){return!1}getPattern(){dr("Abstract method `getPattern` called.")}},Fx=class extends cm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,i=this._p0,o=this._p1;if(t&&(i=i.slice(),o=o.slice(),st.applyTransform(i,t),st.applyTransform(o,t)),this._type==="axial")n=e.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let s=this._r0,a=this._r1;if(t){let u=new Float32Array(2);st.singularValueDecompose2dScale(t,u),s*=u[0],a*=u[0]}n=e.createRadialGradient(i[0],i[1],s,o[0],o[1],a)}for(let s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(e,t,n,i){let o;if(i===Dn.STROKE||i===Dn.FILL){if(this.isOriginBased()){let d=st.transform(n,t.baseTransform);this.matrix&&(d=st.transform(d,this.matrix));let g=.001,b=Math.hypot(d[0],d[1]),v=Math.hypot(d[2],d[3]),w=(d[0]*d[2]+d[1]*d[3])/(b*v);if(Math.abs(w)<g)if(this.isRadial()){if(Math.abs(b-v)<g)return this._createGradient(e,d)}else return this._createGradient(e,d)}let s=t.current.getClippedPathBoundingBox(i,Tr(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,u),f=c.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-s[0],-s[1]),n=st.transform(n,[1,0,0,1,s[0],s[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Mx(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(n);o.setTransform(h)}else Mx(e,this._bbox),o=this._createGradient(e);return o}};Ux=class extends cm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){let a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,f=Math.ceil(this._bounds[3])-u,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),g=c/h,b=f/d,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/g,scaleY:1/b},w=h+4,y=d+4,_=n.getCanvas("mesh",w,y),E=_.context,S=E.createImageData(h,d);if(t){let B=S.data;for(let T=0,Z=B.length;T<Z;T+=4)B[T]=t[0],B[T+1]=t[1],B[T+2]=t[2],B[T+3]=255}for(let B of this._figures)sV(S,B,v);return E.putImageData(S,2,2),{canvas:_.canvas,offsetX:a-2*g,offsetY:u-2*b,scaleX:g,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Mx(e,this._bbox);let o=new Float32Array(2);if(i===Dn.SHADING)st.singularValueDecompose2dScale(Tr(e),o);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,o);let[a,u]=o;st.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=a,o[1]*=u}else st.singularValueDecompose2dScale(t.baseTransform,o);let s=this._createMeshCanvas(o,i===Dn.SHADING?null:this._background,t.cachedCanvases);return i!==Dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}},jx=class extends cm{getPattern(){return"hotpink"}};dM={COLORED:1,UNCOLORED:2},Zv=class Zv{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){let{bbox:n,operatorList:i,paintType:o,tilingType:s,color:a,canvasGraphicsFactory:u}=this,{xstep:c,ystep:f}=this;c=Math.abs(c),f=Math.abs(f),u_("TilingType: "+s);let h=n[0],d=n[1],g=n[2],b=n[3],v=g-h,w=b-d,y=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,y);let[_,E]=y;st.singularValueDecompose2dScale(this.baseTransform,y);let S=_*y[0],A=E*y[1],B=v,T=w,Z=!1,ie=!1,G=Math.ceil(c*S),ae=Math.ceil(f*A),U=Math.ceil(v*S),V=Math.ceil(w*A);G>=U?B=c:Z=!0,ae>=V?T=f:ie=!0;let ue=this.getSizeAndScale(B,this.ctx.canvas.width,S),Ae=this.getSizeAndScale(T,this.ctx.canvas.height,A),ve=e.cachedCanvases.getCanvas("pattern",ue.size,Ae.size),z=ve.context,O=u.createCanvasGraphics(z,t);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,o,a),z.translate(-ue.scale*h,-Ae.scale*d),O.transform(0,ue.scale,0,0,Ae.scale,0,0),z.save(),O.dependencyTracker?.save(),this.clipBbox(O,h,d,g,b),O.baseTransform=Tr(O.ctx),O.executeOperatorList(i),O.endDrawing(),O.dependencyTracker?.restore(),z.restore(),Z||ie){let oe=ve.canvas;Z&&(B=c),ie&&(T=f);let q=this.getSizeAndScale(B,this.ctx.canvas.width,S),M=this.getSizeAndScale(T,this.ctx.canvas.height,A),H=q.size,j=M.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",H,j),K=Q.context,ee=Z?Math.floor(v/c):0,P=ie?Math.floor(w/f):0;for(let I=0;I<=ee;I++)for(let k=0;k<=P;k++)K.drawImage(oe,H*I,j*k,H,j,0,0,H,j);return{canvas:Q.canvas,scaleX:q.scale,scaleY:M.scale,offsetX:h,offsetY:d}}return{canvas:ve.canvas,scaleX:ue.scale,scaleY:Ae.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){let i=Math.max(Zv.MAX_PATTERN_SIZE,t),o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,i,o){let s=i-t,a=o-n;e.ctx.rect(t,n,s,a),st.axialAlignedBoundingBox([t,n,i,o],Tr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let i=e.ctx,o=e.current;switch(t){case dM.COLORED:let{fillStyle:s,strokeStyle:a}=this.ctx;i.fillStyle=o.fillColor=s,i.strokeStyle=o.strokeColor=a;break;case dM.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new GA(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,o){let s=n;i!==Dn.SHADING&&(s=st.transform(s,t.baseTransform),this.matrix&&(s=st.transform(s,this.matrix)));let a=this.createPatternCanvas(t,o),u=new DOMMatrix(s);u=u.translate(a.offsetX,a.offsetY),u=u.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(u),c}};Qe(Zv,"MAX_PATTERN_SIZE",3e3);$x=Zv;pM=16,gM=100,lV=15,mM=10,vi=16,$A=new DOMMatrix,Yi=new Float32Array(2),Uh=new Float32Array([1/0,1/0,-1/0,-1/0]);zx=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};Sv=class{constructor(e,t,n){Qe(this,"alphaIsShape",!1);Qe(this,"fontSize",0);Qe(this,"fontSizeScale",1);Qe(this,"textMatrix",null);Qe(this,"textMatrixScale",1);Qe(this,"fontMatrix",qA);Qe(this,"leading",0);Qe(this,"x",0);Qe(this,"y",0);Qe(this,"lineX",0);Qe(this,"lineY",0);Qe(this,"charSpacing",0);Qe(this,"wordSpacing",0);Qe(this,"textHScale",1);Qe(this,"textRenderingMode",on.FILL);Qe(this,"textRise",0);Qe(this,"fillColor","#000000");Qe(this,"strokeColor","#000000");Qe(this,"patternFill",!1);Qe(this,"patternStroke",!1);Qe(this,"fillAlpha",1);Qe(this,"strokeAlpha",1);Qe(this,"lineWidth",1);Qe(this,"activeSMask",null);Qe(this,"transferMaps","none");n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Uh.slice()}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Dn.FILL,t=null){let n=this.minMax.slice();if(e===Dn.STROKE){t||dr("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(t,Yi);let i=Yi[0]*this.lineWidth/2,o=Yi[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){let e=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Uh,0)}getClippedPathBoundingBox(e=Dn.FILL,t=null){return st.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};cV=["butt","round","square"],fV=["miter","round","bevel"],hV={},vM={},RT=class RT{constructor(e,t,n,i,o,{optionalContentConfig:s,markedContentStack:a=null},u,c,f){X(this,Xs);this.ctx=e,this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new zx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){let o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,n){let u=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Tr(this.compositeCtx))}this.ctx.save(),Aw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Tr(this.ctx)}executeOperatorList(e,t,n,i,o){let s=e.argsArray,a=e.fnArray,u=t||0,c=s.length;if(c===u)return u;let f=c-u>mM&&typeof n=="function",h=f?Date.now()+lV:0,d=0,g=this.commonObjs,b=this.objs,v,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(!o||o(u))if(v=a[u],w=s[u]??null,v!==yp.dependency)w===null?this[v](u):this[v](u,...w);else for(let y of w){this.dependencyTracker?.recordNamedData(y,u);let _=y.startsWith("g_")?g:b;if(!_.has(y))return _.get(y,n),u}if(u++,u===c)return u;if(f&&++d>mM){if(Date.now()>h)return n(),u;d=0}}}endDrawing(){se(this,Xs,Wx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),se(this,Xs,qx).call(this)}_scaleImage(e,t){let n=e.width??e.displayWidth,i=e.height??e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=n,u=i,c="prescale1",f,h;for(;o>2&&a>1||s>2&&u>1;){let d=a,g=u;o>2&&a>1&&(d=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/d),s>2&&u>1&&(g=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/g),f=this.cachedCanvases.getCanvas(c,d,g),h=f.context,h.clearRect(0,0,d,g),h.drawImage(e,0,0,a,u,0,0,d,g),e=f.canvas,a=d,u=g,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e,t){let n=this.ctx,{width:i,height:o}=t,s=this.current.fillColor,a=this.current.patternFill,u=Tr(n),c,f,h,d;if((t.bitmap||t.data)&&t.count>1){let G=t.bitmap||t.data.buffer;f=JSON.stringify(a?u:[u.slice(0,4),s]),c=this._cachedBitmapsMap.get(G),c||(c=new Map,this._cachedBitmapsMap.set(G,c));let ae=c.get(f);if(ae&&!a){let U=Math.round(Math.min(u[0],u[2])+u[4]),V=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,ls.transformAndFill),{canvas:ae,offsetX:U,offsetY:V}}h=ae}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,o),bM(d.context,t));let g=st.transform(u,[1/i,0,0,-1/o,0,0]);g=st.transform(g,[1,0,0,1,0,-o]);let b=Uh.slice();st.axialAlignedBoundingBox([0,0,i,o],g,b);let[v,w,y,_]=b,E=Math.round(y-v)||1,S=Math.round(_-w)||1,A=this.cachedCanvases.getCanvas("fillCanvas",E,S),B=A.context,T=v,Z=w;B.translate(-T,-Z),B.transform(...g),h||(h=this._scaleImage(d.canvas,fo(B)),h=h.img,c&&a&&c.set(f,h)),B.imageSmoothingEnabled=wM(Tr(B),t.interpolate),Ew(B,h,0,0,h.width,h.height,0,0,i,o),B.globalCompositeOperation="source-in";let ie=st.transform(fo(B),[1,0,0,1,-T,-Z]);return B.fillStyle=a?s.getPattern(n,this,ie,Dn.FILL,e):s,B.fillRect(0,0,i,o),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(f,A.canvas)),this.dependencyTracker?.recordDependencies(e,ls.transformAndFill),{canvas:A.canvas,offsetX:Math.round(T),offsetY:Math.round(Z)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=cV[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=fV[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(let[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;let s=this.ctx=o.context;s.setTransform(this.suspendedCtx.getTransform()),Ig(this.suspendedCtx,s),uV(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ig(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){let o=i[0],s=i[1],a=i[2]-o,u=i[3]-s;a===0||u===0||(this.genericComposeSMask(t.context,n,a,u,t.subtype,t.backdrop,t.transferMap,o,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,o,s,a,u,c,f,h){let d=e.canvas,g=u-f,b=c-h;if(s)if(g<0||b<0||g+n>d.width||b+i>d.height){let w=this.cachedCanvases.getCanvas("maskExtension",n,i),y=w.context;y.drawImage(d,-g,-b),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",d=w.canvas,g=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let w=new Path2D;w.rect(g,b,n,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(g,b,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));let v=new Path2D;v.rect(u,c,n,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(d,g,b,n,i,u,c,n,i),t.restore()}save(e){this.inSMaskMode&&Ig(this.ctx,this.suspendedCtx),this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ig(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,o,s,a){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,o,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[o]=n;if(!i){o||(o=n[0]=new Path2D),this[t](e,o);return}if(this.dependencyTracker!==null){let s=t===yp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}o instanceof Path2D||(o=n[0]=kM(o)),st.axialAlignedBoundingBox(i,Tr(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){let i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){let s=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,fo(i),Dn.STROKE,e),s){let a=new Path2D;a.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=a}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,ls.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Dn.STROKE,Tr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){let i=this.ctx,o=this.current.fillColor,s=this.current.patternFill,a=!1;if(s){let c=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=o.getPattern(i,this,fo(i),Dn.FILL,e),c){let f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=f}a=!0}let u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,ls.fill),a&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,ls.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=hV}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=vM}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){let t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){let{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){let i=new Path2D,o=n.getTransform().invertSelf();for(let{transform:s,x:a,y:u,fontSize:c,path:f}of t)f&&i.addPath(f,new DOMMatrix(s).preMultiplySelf(o).translate(a,u).scale(c,-c));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);let i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||qA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;let s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`,u="normal";i.black?u="900":i.bold&&(u="bold");let c=i.italic?"italic":"normal",f=n;n<pM?f=pM:n>gM&&(f=gM),this.current.fontSizeScale=n/f,this.ctx.font=`${c} ${u} ${f}px ${a}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);let{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,o,s){let a=this.ctx,u=this.current,c=u.font,f=u.textRenderingMode,h=u.fontSize/u.fontSizeScale,d=f&on.FILL_STROKE_MASK,g=!!(f&on.ADD_TO_PATH_FLAG),b=u.patternFill&&!c.missingFile,v=u.patternStroke&&!c.missingFile,w;if((c.disableFontFace||g||b||v)&&!c.missingFile&&(w=c.getPathGenerator(this.commonObjs,t)),w&&(c.disableFontFace||b||v)){a.save(),a.translate(n,i),a.scale(h,-h),this.dependencyTracker?.recordCharacterBBox(e,a,c);let y;if(d===on.FILL||d===on.FILL_STROKE)if(o){y=a.getTransform(),a.setTransform(...o);let _=se(this,Xs,Hx).call(this,w,y,o);a.fill(_)}else a.fill(w);if(d===on.STROKE||d===on.FILL_STROKE)if(s){y||(y=a.getTransform()),a.setTransform(...s);let{a:_,b:E,c:S,d:A}=y,B=st.inverseTransform(s),T=st.transform([_,E,S,A,0,0],B);st.singularValueDecompose2dScale(T,Yi),a.lineWidth*=Math.max(Yi[0],Yi[1])/h,a.stroke(se(this,Xs,Hx).call(this,w,y,s))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(d===on.FILL||d===on.FILL_STROKE)&&(a.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t))),(d===on.STROKE||d===on.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t)).recordDependencies(e,ls.stroke),a.strokeText(t,n,i));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Tr(a),x:n,y:i,fontSize:h,path:w}),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i))}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return wt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ls.showText).resetBBox(e),this.current.textRenderingMode&on.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());let n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}let o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}let s=this.ctx,a=n.fontSizeScale,u=n.charSpacing,c=n.wordSpacing,f=n.fontDirection,h=n.textHScale*f,d=t.length,g=i.vertical,b=g?1:-1,v=i.defaultVMetrics,w=o*n.fontMatrix[0],y=n.textRenderingMode===on.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),f>0?s.scale(h,-1):s.scale(h,1);let _,E,S=n.textRenderingMode&on.FILL_STROKE_MASK,A=S===on.FILL||S===on.FILL_STROKE,B=S===on.STROKE||S===on.FILL_STROKE;if(A&&n.patternFill){s.save();let ae=n.fillColor.getPattern(s,this,fo(s),Dn.FILL,e);_=Tr(s),s.restore(),s.fillStyle=ae}if(B&&n.patternStroke){s.save();let ae=n.strokeColor.getPattern(s,this,fo(s),Dn.STROKE,e);E=Tr(s),s.restore(),s.strokeStyle=ae}let T=n.lineWidth,Z=n.textMatrixScale;if(Z===0||T===0?B&&(T=this.getSinglePixelWidth()):T/=Z,a!==1&&(s.scale(a,a),T/=a),s.lineWidth=T,i.isInvalidPDFjsFont){let ae=[],U=0;for(let ue of t)ae.push(ue.unicode),U+=ue.width;let V=ae.join("");if(s.fillText(V,0,0),this.dependencyTracker!==null){let ue=s.measureText(V);this.dependencyTracker.recordBBox(e,this.ctx,-ue.actualBoundingBoxLeft,ue.actualBoundingBoxRight,-ue.actualBoundingBoxAscent,ue.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=U*w*h,s.restore(),this.compose();return}let ie=0,G;for(G=0;G<d;++G){let ae=t[G];if(typeof ae=="number"){ie+=b*ae*o/1e3;continue}let U=!1,V=(ae.isSpace?c:0)+u,ue=ae.fontChar,Ae=ae.accent,ve,z,O=ae.width;if(g){let M=ae.vmetric||v,H=-(ae.vmetric?M[1]:O*.5)*w,j=M[2]*w;O=M?-M[0]:O,ve=H/a,z=(ie+j)/a}else ve=ie/a,z=0;let oe;if(i.remeasure&&O>0){oe=s.measureText(ue);let M=oe.width*1e3/o*a;if(O<M&&this.isFontSubpixelAAEnabled){let H=O/M;U=!0,s.save(),s.scale(H,1),ve/=H}else O!==M&&(ve+=(O-M)/2e3*o/a)}if(this.contentVisible&&(ae.isInFont||i.missingFile)){if(y&&!Ae)s.fillText(ue,ve,z),this.dependencyTracker?.recordCharacterBBox(e,s,oe?{bbox:null}:i,o/a,ve,z,()=>oe??s.measureText(ue));else if(this.paintChar(e,ue,ve,z,_,E),Ae){let M=ve+o*Ae.offset.x/a,H=z-o*Ae.offset.y/a;this.paintChar(e,Ae.fontChar,M,H,_,E)}}let q=g?O*w-V*f:O*w+V*f;ie+=q,U&&s.restore()}g?n.y-=ie:n.x+=ie*h,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){let n=this.ctx,i=this.current,o=i.font,s=i.fontSize,a=i.fontDirection,u=o.vertical?1:-1,c=i.charSpacing,f=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||qA,g=t.length,b=i.textRenderingMode===on.INVISIBLE,v,w,y,_;if(b||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,a);let E=this.dependencyTracker;for(this.dependencyTracker=E?new xv(E,e):null,v=0;v<g;++v){if(w=t[v],typeof w=="number"){_=u*w*s/1e3,this.ctx.translate(_,0),i.x+=_*h;continue}let S=(w.isSpace?f:0)+c,A=o.charProcOperatorList[w.operatorListId];A?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...d),this.executeOperatorList(A),this.restore()):_t(`Type3 character "${w.operatorListId}" is not available.`);let B=[w.width,0];st.applyTransform(B,d),y=B[0]*s+S,n.translate(y,0),i.x+=y*h}n.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,o,s,a){let u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,o,a).recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){let i=this.baseTransform||Tr(this.ctx),o={createCanvasGraphics:(s,a)=>new RT(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new xv(this.dependencyTracker,a,!0):null)};n=new $x(t,this.ctx,o,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=oV(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;let n=this.ctx;this.save(e);let i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,fo(n),Dn.SHADING,e);let o=fo(n);if(o){let{width:s,height:a}=n.canvas,u=Uh.slice();st.axialAlignedBoundingBox([0,0,s,a],o,u);let[c,f,h,d]=u;this.ctx.fillRect(c,f,h-c,d-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ls.transform).recordDependencies(e,ls.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){dr("Should not call beginInlineImage")}beginImageData(){dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Tr(this.ctx),n)){st.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);let[i,o,s,a]=n,u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let n=this.ctx;t.isolated||u_("TODO: Support non-isolated groups."),t.knockout&&_t("Knockout groups not supported.");let i=Tr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=Uh.slice();st.axialAlignedBoundingBox(t.bbox,Tr(n),o);let s=[0,0,n.canvas.width,n.canvas.height];o=st.intersect(o,s)||[0,0,0,0];let a=Math.floor(o[0]),u=Math.floor(o[1]),c=Math.max(Math.ceil(o[2])-a,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,c,f]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(h,c,f),g=d.context;g.translate(-a,-u),g.transform(...i);let b=new Path2D,[v,w,y,_]=t.bbox;if(b.rect(v,w,y-v,_-w),t.matrix){let E=new Path2D;E.addPath(b,new DOMMatrix(t.matrix)),b=E}g.clip(b),t.smask&&this.smaskStack.push({canvas:d.canvas,context:g,offsetX:a,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,u),n.save()),Ig(n,g),this.ctx=g,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;let n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let o=Tr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);let s=Uh.slice();st.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,s),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,i,o,s){if(se(this,Xs,Wx).call(this),Aw(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){let a=n[2]-n[0],u=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=u,st.singularValueDecompose2dScale(Tr(this.ctx),Yi);let{viewportScale:c}=this,f=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(u*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(f,h);let{canvas:d,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(Yi[0],0,0,-Yi[1],0,u*Yi[1]),Aw(this.ctx)}else{Aw(this.ctx),this.endPath(e);let c=new Path2D;c.rect(n[0],n[1],a,u),this.ctx.clip(c)}}this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),se(this,Xs,qx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;let n=t.count;t=this.getObject(e,t.data,t),t.count=n;let i=this.ctx,o=this._createMaskCanvas(e,t),s=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+s.width,o.offsetY,o.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,o=0,s,a){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);let u=this.ctx;u.save();let c=Tr(u);u.transform(n,i,o,s,0,0);let f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-c[4],f.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let h=0,d=a.length;h<d;h+=2){let g=st.transform(c,[n,i,o,s,a[h],a[h+1]]);u.drawImage(f.canvas,g[4],g[5]),this.dependencyTracker?.recordBBox(e,this.ctx,g[4],g[4]+f.canvas.width,g[5],g[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,ls.transformAndFill);for(let s of t){let{data:a,width:u,height:c,transform:f}=s,h=this.cachedCanvases.getCanvas("maskCanvas",u,c),d=h.context;d.save();let g=this.getObject(e,a,s);bM(d,g),d.globalCompositeOperation="source-in",d.fillStyle=o?i.getPattern(d,this,fo(n),Dn.FILL,e):i,d.fillRect(0,0,u,c),d.restore(),n.save(),n.transform(...f),n.scale(1,-1),Ew(n,h.canvas,0,0,u,c,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,u,0,c),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;let n=this.getObject(e,t);if(!n){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,o){if(!this.contentVisible)return;let s=this.getObject(e,t);if(!s){_t("Dependent image isn't ready yet");return}let a=s.width,u=s.height,c=[];for(let f=0,h=o.length;f<h;f+=2)c.push({transform:[n,0,0,i,o[f],o[f+1]],x:0,y:0,w:a,h:u});this.paintInlineImageXObjectGroup(e,s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,i),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;let n=t.width,i=t.height,o=this.ctx;this.save(e);let{filter:s}=o;s!=="none"&&s!==""&&(o.filter="none"),o.scale(1/n,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{let f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;yM(f,t),a=this.applyTransferMapsToCanvas(f)}let u=this._scaleImage(a,fo(o));o.imageSmoothingEnabled=wM(Tr(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-i,0).recordDependencies(e,ls.imageXObject).recordOperation(e),Ew(o,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;let i=this.ctx,o;if(t.bitmap)o=t.bitmap;else{let s=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",s,a).context;yM(c,t),o=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(e);for(let s of n)i.save(),i.transform(...s.transform),i.scale(1,-1),Ew(i,o,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ls.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){let i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);let o=this.ctx;this.pendingClip?(i||(this.pendingClip===vM?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Tr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:i,d:o}=this.ctx.getTransform(),s,a;if(n===0&&i===0){let u=Math.abs(t),c=Math.abs(o);if(u===c)if(e===0)s=a=1/u;else{let f=u*e;s=a=f<1?1/f:1}else if(e===0)s=1/u,a=1/c;else{let f=u*e,h=c*e;s=f<1?1/f:1,a=h<1?1/h:1}}else{let u=Math.abs(t*o-n*i),c=Math.hypot(t,n),f=Math.hypot(i,o);if(e===0)s=f/u,a=c/u;else{let h=e*u;s=f>h?f/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){let{ctx:n,current:{lineWidth:i}}=this,[o,s]=this.getScaleForStroking();if(o===s){n.lineWidth=(i||1)*o,n.stroke(e);return}let a=n.getLineDash();t&&n.save(),n.scale(o,s),$A.a=1/o,$A.d=1/s;let u=new Path2D;if(u.addPath(e,$A),a.length>0){let c=Math.max(o,s);n.setLineDash(a.map(f=>f/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Xs=new WeakSet,Wx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qx=function(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Hx=function(e,t,n){let i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};qh=RT;for(let r in yp)qh.prototype[r]!==void 0&&(qh.prototype[yp[r]]=qh.prototype[r]);_s=class{static get workerPort(){return l(this,oy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,oy,e)}static get workerSrc(){return l(this,ay)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,ay,e)}};oy=new WeakMap,ay=new WeakMap,X(_s,oy,null),X(_s,ay,"");Gx=class{constructor({parsedData:e,rawData:t}){X(this,Cd);X(this,ly);L(this,Cd,e),L(this,ly,t)}getRaw(){return l(this,ly)}get(e){return l(this,Cd).get(e)??null}[Symbol.iterator](){return l(this,Cd).entries()}};Cd=new WeakMap,ly=new WeakMap;Lh=Symbol("INTERNAL"),Vx=class{constructor(e,{name:t,intent:n,usage:i,rbGroups:o}){X(this,uy,!1);X(this,cy,!1);X(this,fy,!1);X(this,Rd,!0);L(this,uy,!!(e&Vi.DISPLAY)),L(this,cy,!!(e&Vi.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(l(this,fy))return l(this,Rd);if(!l(this,Rd))return!1;let{print:e,view:t}=this.usage;return l(this,uy)?t?.viewState!=="OFF":l(this,cy)?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Lh&&dr("Internal method `_setVisible` called."),L(this,fy,n),L(this,Rd,t)}};uy=new WeakMap,cy=new WeakMap,fy=new WeakMap,Rd=new WeakMap;Yx=class{constructor(e,t=Vi.DISPLAY){X(this,hy);X(this,Xl,null);X(this,sr,new Map);X(this,Dd,null);X(this,Id,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,Id,e.order);for(let n of e.groups)l(this,sr).set(n.id,new Vx(t,n));if(e.baseState==="OFF")for(let n of l(this,sr).values())n._setVisible(Lh,!1);for(let n of e.on)l(this,sr).get(n)._setVisible(Lh,!0);for(let n of e.off)l(this,sr).get(n)._setVisible(Lh,!1);L(this,Dd,this.getHash())}}isVisible(e){if(l(this,sr).size===0)return!0;if(!e)return u_("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,sr).has(e.id)?l(this,sr).get(e.id).visible:(_t(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return se(this,hy,Xx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!1}return!0}return _t(`Unknown optional content policy ${e.policy}.`),!0}return _t(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let i=l(this,sr).get(e);if(!i){_t(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(let o of i.rbGroups)for(let s of o)s!==e&&l(this,sr).get(s)?._setVisible(Lh,!1,!0);i._setVisible(Lh,!!t,!0),L(this,Xl,null)}setOCGState({state:e,preserveRB:t}){let n;for(let i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}let o=l(this,sr).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}L(this,Xl,null)}get hasInitialVisibility(){return l(this,Dd)===null||this.getHash()===l(this,Dd)}getOrder(){return l(this,sr).size?l(this,Id)?l(this,Id).slice():[...l(this,sr).keys()]:null}getGroup(e){return l(this,sr).get(e)||null}getHash(){if(l(this,Xl)!==null)return l(this,Xl);let e=new hv;for(let[t,n]of l(this,sr))e.update(`${t}:${n.visible}`);return L(this,Xl,e.hexdigest())}[Symbol.iterator](){return l(this,sr).entries()}};Xl=new WeakMap,sr=new WeakMap,Dd=new WeakMap,Id=new WeakMap,hy=new WeakSet,Xx=function(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let i=1;i<t;i++){let o=e[i],s;if(Array.isArray(o))s=se(this,hy,Xx).call(this,o);else if(l(this,sr).has(o))s=l(this,sr).get(o).visible;else return _t(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};Kx=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:o,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){let u=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,c)=>{this._onReceiveData({begin:u,chunk:c})}),e.addProgressListener((u,c)=>{this._onProgress({loaded:u,total:c})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Mt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new Zx(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Jx(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},Zx=class{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=c_(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Jx=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};Qx=class{constructor(e){Qe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new eS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new tS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},eS=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),i=t.url;fetch(i,_F(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=f_(o.url),!vF(o.status))throw h0(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();let s=o.headers,{allowRangeRequests:a,suggestedLength:u}=bF({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=wF(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ys("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:EF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},tS=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);let s=i.url;fetch(s,_F(o,this._withCredentials,this._abortController)).then(a=>{let u=f_(a.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!vF(a.status))throw h0(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:EF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},zA=200,WA=206;rS=class{constructor({url:e,httpHeaders:t,withCredentials:n}){Qe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yF(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[o,s]of this.headers)t.setRequestHeader(o,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=WA):i.expectedStatus=zA,t.responseType="arraybuffer",Mt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}let o=i.status||zA;if(!(o===zA&&n.expectedStatus===WA)&&o!==n.expectedStatus){n.onError(i.status);return}let a=pV(i);if(o===WA){let u=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(_t('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},nS=class{constructor(e){this._source=e,this._manager=new rS(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iS(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new sS(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},iS=class{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=f_(t.responseURL);let n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[u,...c]=a.split(": ");return[u,c.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=bF({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=wF(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=h0(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},sS=class{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=f_(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=h0(e,this._url));for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},gV=/^[a-z][a-z0-9\-+.]+:/i;oS=class{constructor(e){this.source=e,this.url=mV(e.url),Mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new aS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new lS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},aS=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=h0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ys("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},lS=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=e.source;this._isStreamingSupported=!i.disableStream;let o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Og=Symbol("INITIAL_DATA"),Tv=class{constructor(){X(this,dy);X(this,Ni,Object.create(null))}get(e,t=null){if(t){let i=se(this,dy,uS).call(this,e);return i.promise.then(()=>t(i.data)),null}let n=l(this,Ni)[e];if(!n||n.data===Og)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=l(this,Ni)[e];return!!t&&t.data!==Og}delete(e){let t=l(this,Ni)[e];return!t||t.data===Og?!1:(delete l(this,Ni)[e],!0)}resolve(e,t=null){let n=se(this,dy,uS).call(this,e);n.data=t,n.resolve()}clear(){for(let e in l(this,Ni)){let{data:t}=l(this,Ni)[e];t?.bitmap?.close()}L(this,Ni,Object.create(null))}*[Symbol.iterator](){for(let e in l(this,Ni)){let{data:t}=l(this,Ni)[e];t!==Og&&(yield[e,t])}}};Ni=new WeakMap,dy=new WeakSet,uS=function(e){var t;return(t=l(this,Ni))[e]||(t[e]={...Promise.withResolvers(),data:Og})};yV=1e5,_M=30,An=class An{constructor({textContentSource:e,container:t,viewport:n}){X(this,il);X(this,Kl,Promise.withResolvers());X(this,ki,null);X(this,py,!1);X(this,gy,!!globalThis.FontInspector?.enabled);X(this,Wc,null);X(this,La,null);X(this,my,0);X(this,yy,0);X(this,qc,null);X(this,by,null);X(this,Od,0);X(this,Zl,0);X(this,Nd,Object.create(null));X(this,wy,[]);X(this,kd,null);X(this,Hc,[]);X(this,vy,new WeakMap);X(this,_y,null);var u;if(e instanceof ReadableStream)L(this,kd,e);else if(typeof e=="object")L(this,kd,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,ki,L(this,by,t)),L(this,Zl,n.scale*Mo.pixelRatio),L(this,Od,n.rotation),L(this,La,{div:null,properties:null,ctx:null});let{pageWidth:i,pageHeight:o,pageX:s,pageY:a}=n.rawDims;L(this,_y,[1,0,0,-1,-s,a+o]),L(this,yy,i),L(this,my,o),se(u=An,Ki,SF).call(u),t.style.setProperty("--min-font-size",l(An,Pd)),wu(t,n),l(this,Kl).promise.finally(()=>{l(An,Bd).delete(this),L(this,La,null),L(this,Nd,null)}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=Ur.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{l(this,qc).read().then(({value:t,done:n})=>{if(n){l(this,Kl).resolve();return}l(this,Wc)??L(this,Wc,t.lang),Object.assign(l(this,Nd),t.styles),se(this,il,AF).call(this,t.items),e()},l(this,Kl).reject)};return L(this,qc,l(this,kd).getReader()),l(An,Bd).add(this),e(),l(this,Kl).promise}update({viewport:e,onBefore:t=null}){var o;let n=e.scale*Mo.pixelRatio,i=e.rotation;if(i!==l(this,Od)&&(t?.(),L(this,Od,i),wu(l(this,by),{rotation:i})),n!==l(this,Zl)){t?.(),L(this,Zl,n);let s={div:null,properties:null,ctx:se(o=An,Ki,Fw).call(o,l(this,Wc))};for(let a of l(this,Hc))s.properties=l(this,vy).get(a),s.div=a,se(this,il,cS).call(this,s)}}cancel(){let e=new Ys("TextLayer task cancelled.");l(this,qc)?.cancel(e).catch(()=>{}),L(this,qc,null),l(this,Kl).reject(e)}get textDivs(){return l(this,Hc)}get textContentItemsStr(){return l(this,wy)}static cleanup(){if(!(l(this,Bd).size>0)){l(this,Ld).clear();for(let{canvas:e}of l(this,Gc).values())e.remove();l(this,Gc).clear()}}};Kl=new WeakMap,ki=new WeakMap,py=new WeakMap,gy=new WeakMap,Wc=new WeakMap,La=new WeakMap,my=new WeakMap,yy=new WeakMap,qc=new WeakMap,by=new WeakMap,Od=new WeakMap,Zl=new WeakMap,Nd=new WeakMap,wy=new WeakMap,kd=new WeakMap,Hc=new WeakMap,vy=new WeakMap,_y=new WeakMap,Ld=new WeakMap,Gc=new WeakMap,Ey=new WeakMap,Pd=new WeakMap,Bd=new WeakMap,il=new WeakSet,AF=function(e){var i,o;if(l(this,py))return;(o=l(this,La)).ctx??(o.ctx=se(i=An,Ki,Fw).call(i,l(this,Wc)));let t=l(this,Hc),n=l(this,wy);for(let s of e){if(t.length>yV){_t("Ignoring additional textDivs for performance reasons."),L(this,py,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let a=l(this,ki);L(this,ki,document.createElement("span")),l(this,ki).classList.add("markedContent"),s.id&&l(this,ki).setAttribute("id",`${s.id}`),a.append(l(this,ki))}else s.type==="endMarkedContent"&&L(this,ki,l(this,ki).parentNode);continue}n.push(s.str),se(this,il,xF).call(this,s)}},xF=function(e){var b;let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Hc).push(t);let i=st.transform(l(this,_y),e.transform),o=Math.atan2(i[1],i[0]),s=l(this,Nd)[e.fontName];s.vertical&&(o+=Math.PI/2);let a=l(this,gy)&&s.fontSubstitution||s.fontFamily;a=An.fontFamilyMap.get(a)||a;let u=Math.hypot(i[2],i[3]),c=u*se(b=An,Ki,TF).call(b,a,s,l(this,Wc)),f,h;o===0?(f=i[4],h=i[5]-c):(f=i[4]+c*Math.sin(o),h=i[5]-c*Math.cos(o));let d=t.style;d.left=`${(100*f/l(this,yy)).toFixed(2)}%`,d.top=`${(100*h/l(this,my)).toFixed(2)}%`,d.setProperty("--font-height",`${u.toFixed(2)}px`),d.fontFamily=a,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,gy)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let v=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);v!==w&&Math.max(v,w)/Math.min(v,w)>1.5&&(g=!0)}if(g&&(n.canvasWidth=s.vertical?e.height:e.width),l(this,vy).set(t,n),l(this,La).div=t,l(this,La).properties=n,se(this,il,cS).call(this,l(this,La)),n.hasText&&l(this,ki).append(t),n.hasEOL){let v=document.createElement("br");v.setAttribute("role","presentation"),l(this,ki).append(v)}},cS=function(e){var s;let{div:t,properties:n,ctx:i}=e,{style:o}=t;if(n.canvasWidth!==0&&n.hasText){let{fontFamily:a}=o,{canvasWidth:u,fontSize:c}=n;se(s=An,Ki,fS).call(s,i,c*l(this,Zl),a);let{width:f}=i.measureText(t.textContent);f>0&&o.setProperty("--scale-x",u*l(this,Zl)/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},Ki=new WeakSet,Fw=function(e=null){let t=l(this,Gc).get(e||(e=""));if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Gc).set(e,t),l(this,Ey).set(t,{size:0,family:""})}return t},fS=function(e,t,n){let i=l(this,Ey).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},SF=function(){if(l(this,Pd)!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,Pd,e.getBoundingClientRect().height),e.remove()},TF=function(e,t,n){let i=l(this,Ld).get(e);if(i)return i;let o=se(this,Ki,Fw).call(this,n);o.canvas.width=o.canvas.height=_M,se(this,Ki,fS).call(this,o,_M,e);let s=o.measureText(""),a=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let c=.8;return a?c=a/(a+u):(Ur.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),l(this,Ld).set(e,c),c},X(An,Ki),X(An,Ld,new Map),X(An,Gc,new Map),X(An,Ey,new WeakMap),X(An,Pd,null),X(An,Bd,new Set);vp=An,bV=100;Qv=class Qv{constructor(){Qe(this,"_capability",Promise.withResolvers());Qe(this,"_transport",null);Qe(this,"_worker",null);Qe(this,"docId",`d${tn(Qv,Jv)._++}`);Qe(this,"destroyed",!1);Qe(this,"onPassword",null);Qe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Jv=new WeakMap,X(Qv,Jv,0);hS=Qv,fm=class{constructor(e,t,n=!1,i=null){X(this,Vc,Promise.withResolvers());X(this,Ay,[]);X(this,xy,[]);X(this,Sy,[]);X(this,Ty,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){l(this,Ty).push(e)}addProgressListener(e){l(this,Sy).push(e)}addProgressiveReadListener(e){l(this,xy).push(e)}addProgressiveDoneListener(e){l(this,Ay).push(e)}onDataRange(e,t){for(let n of l(this,Ty))n(e,t)}onDataProgress(e,t){l(this,Vc).promise.then(()=>{for(let n of l(this,Sy))n(e,t)})}onDataProgressiveRead(e){l(this,Vc).promise.then(()=>{for(let t of l(this,xy))t(e)})}onDataProgressiveDone(){l(this,Vc).promise.then(()=>{for(let e of l(this,Ay))e()})}transportReady(){l(this,Vc).resolve()}requestDataRange(e,t){dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};Vc=new WeakMap,Ay=new WeakMap,xy=new WeakMap,Sy=new WeakMap,Ty=new WeakMap;dS=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},pS=class{constructor(e,t,n,i=!1){X(this,Yc);X(this,Pa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new lv:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Tv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new am({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:o=Za.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:u=null,annotationCanvasMap:c=null,pageColors:f=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:g=!1,operationsFilter:b=null}){this._stats?.time("Overall");let v=this._transport.getRenderingIntent(i,o,h,d),{renderingIntent:w,cacheKey:y}=v;L(this,Pa,!1),u||(u=this._transport.getOptionalContentConfig(w));let _=this._intentStates.get(y);_||(_=Object.create(null),this._intentStates.set(y,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);let E=!!(w&Vi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));let S=!!(this._pdfBug&&globalThis.StepperManager?.enabled),A=!this.recordedBBoxes&&(g||S),B=ie=>{if(_.renderTasks.delete(T),A){let G=T.gfx?.dependencyTracker.take();G&&(T.stepper&&T.stepper.setOperatorBBoxes(G,T.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=G))}E&&L(this,Pa,!0),se(this,Yc,Gg).call(this),ie?(T.capability.reject(ie),this._abortOperatorList({intentState:_,reason:ie instanceof Error?ie:new Error(ie)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new yS({callback:B,params:{canvas:t,canvasContext:e,dependencyTracker:A?new Px(t,_.operatorList.length,S):null,viewport:n,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:b});(_.renderTasks||(_.renderTasks=new Set)).add(T);let Z=T.task;return Promise.all([_.displayReadyCapability.promise,u]).then(([ie,G])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:ie,optionalContentConfig:G}),T.operatorListChanged()}).catch(B),Z}getOperatorList({intent:e="display",annotationMode:t=Za.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}let s=this._transport.getRenderingIntent(e,t,n,i,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>sm.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,i){function o(){s.read().then(function({value:u,done:c}){if(c){n(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),o()},i)}let s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),L(this,Pa,!1),Promise.all(e)}cleanup(e=!1){L(this,Pa,!0);let t=se(this,Yc,Gg).call(this);return e&&t&&this._stats&&(this._stats=new lv),t}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&se(this,Yc,Gg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){let{map:o,transfer:s}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},s).getReader(),c=this._intentStates.get(t);c.streamReader=u;let f=()=>{u.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),f())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let d of c.renderTasks)d.operatorListChanged();se(this,Yc,Gg).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof wp){let i=bV;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ys(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}};Pa=new WeakMap,Yc=new WeakSet,Gg=function(){if(!l(this,Pa)||this.destroyed)return!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,Pa,!1),!0};_r=class _r{constructor({name:e=null,port:t=null,verbosity:n=GG()}={}){X(this,ei);X(this,Jl,Promise.withResolvers());X(this,js,null);X(this,Ba,null);X(this,Xc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(l(_r,Zc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(_r,Zc).set(t,this),se(this,ei,RF).call(this,t)}else se(this,ei,DF).call(this)}get promise(){return l(this,Jl).promise}get port(){return l(this,Ba)}get messageHandler(){return l(this,js)}destroy(){this.destroyed=!0,l(this,Xc)?.terminate(),L(this,Xc,null),l(_r,Zc).delete(l(this,Ba)),L(this,Ba,null),l(this,js)?.destroy(),L(this,js,null)}static create(e){let t=l(this,Zc).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _r(e)}static get workerSrc(){if(_s.workerSrc)return _s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Md,jw)?l(this,Md,jw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jl=new WeakMap,js=new WeakMap,Ba=new WeakMap,Xc=new WeakMap,e_=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,ei=new WeakSet,Uw=function(){l(this,Jl).resolve(),l(this,js).send("configure",{verbosity:this.verbosity})},RF=function(e){L(this,Ba,e),L(this,js,new fc("main","worker",e)),l(this,js).on("ready",()=>{}),se(this,ei,Uw).call(this)},DF=function(){if(l(_r,Kc)||l(_r,Md,jw)){se(this,ei,Vg).call(this);return}let{workerSrc:e}=_r;try{_r._isSameOrigin(window.location,e)||(e=_r._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new fc("main","worker",t),i=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?l(this,Jl).reject(new Error("Worker was destroyed")):se(this,ei,Vg).call(this)},o=new AbortController;t.addEventListener("error",()=>{l(this,Xc)||i()},{signal:o.signal}),n.on("test",a=>{if(o.abort(),this.destroyed||!a){i();return}L(this,js,n),L(this,Ba,t),L(this,Xc,t),se(this,ei,Uw).call(this)}),n.on("ready",a=>{if(o.abort(),this.destroyed){i();return}try{s()}catch{se(this,ei,Vg).call(this)}});let s=()=>{let a=new Uint8Array;n.send("test",a,[a.buffer])};s();return}catch{u_("The worker has been disabled.")}se(this,ei,Vg).call(this)},Vg=function(){l(_r,Kc)||(_t("Setting up fake worker."),L(_r,Kc,!0)),_r._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,Jl).reject(new Error("Worker was destroyed"));return}let t=new Ax;L(this,Ba,t);let n=`fake${tn(_r,e_)._++}`,i=new fc(n+"_worker",n,t);e.setup(i,t),L(this,js,new fc(n,n+"_worker",t)),se(this,ei,Uw).call(this)}).catch(e=>{l(this,Jl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Md=new WeakSet,jw=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},X(_r,Md),X(_r,e_,0),X(_r,Kc,!1),X(_r,Zc,new WeakMap),Qn&&(L(_r,Kc,!0),_s.workerSrc||(_s.workerSrc="./pdf.worker.mjs")),_r._isSameOrigin=(e,t)=>{let n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;let i=new URL(t,n);return n.origin===i.origin},_r._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},_r.fromPort=e=>{if(eV("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _r.create(e)};_p=_r,gS=class{constructor(e,t,n,i,o,s){X(this,Jc);X(this,Ma,new Map);X(this,Co,new Map);X(this,Fd,new Map);X(this,Ud,new Map);X(this,Fa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Tv,this.fontLoader=new yx({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return wt(this,"annotationStorage",new um)}getRenderingIntent(e,t=Za.ENABLE,n=null,i=!1,o=!1){let s=Vi.DISPLAY,a=mx;switch(e){case"any":s=Vi.ANY;break;case"display":break;case"print":s=Vi.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${e}`)}let u=s&Vi.PRINT&&n instanceof dv?n:this.annotationStorage;switch(t){case Za.DISABLE:s+=Vi.ANNOTATIONS_DISABLE;break;case Za.ENABLE:break;case Za.ENABLE_FORMS:s+=Vi.ANNOTATIONS_FORMS;break;case Za.ENABLE_STORAGE:s+=Vi.ANNOTATIONS_STORAGE,a=u.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Vi.IS_EDITING),o&&(s+=Vi.OPLIST);let{ids:c,hash:f}=u.modifiedIds,h=[s,a.hash,f];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),l(this,Fa)?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of l(this,Co).values())e.push(n._destroy());l(this,Co).clear(),l(this,Fd).clear(),l(this,Ud).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ma).clear(),this.filterFactory.destroy(),vp.cleanup(),this._networkStream?.cancelAllRequests(new Ys("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){i.close();return}Mt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:o,contentLength:s}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){i.close();return}Mt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{o.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new dS(n,this))}),e.on("DocException",n=>{t._capability.reject(hi(n))}),e.on("PasswordRequest",n=>{L(this,Fa,Promise.withResolvers());try{if(!t.onPassword)throw hi(n);let i=o=>{o instanceof Error?l(this,Fa).reject(o):l(this,Fa).resolve({password:o})};t.onPassword(i,n.code)}catch(i){l(this,Fa).reject(i)}return l(this,Fa).promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Co).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){let h=o.error;_t(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}let s=new wx(o),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,u=new bx(s,a,o.extra,o.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":let{imageRef:c}=o;Mt(c,"The imageRef must be defined.");for(let h of l(this,Co).values())for(let[,d]of h.objs)if(d?.ref===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new _x(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":let f=new vx(o);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,o,s])=>{if(this.destroyed)return;let a=l(this,Co).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=l(this,Fd).get(t);if(n)return n;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ud).set(o.refStr,e);let s=new pS(t,o,this,this._params.pdfBug);return l(this,Co).set(t,s),s});return l(this,Fd).set(t,i),i}getPageIndex(e){return Ex(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return se(this,Jc,Yg).call(this,"GetFieldObjects")}hasJSActions(){return se(this,Jc,Yg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return se(this,Jc,Yg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return se(this,Jc,Yg).call(this,"GetOptionalContentConfig").then(t=>new Yx(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=l(this,Ma).get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new Gx(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return l(this,Ma).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let t of l(this,Co).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ma).clear(),this.filterFactory.destroy(!0),vp.cleanup()}}cachedPageNumber(e){if(!Ex(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Ud).get(t)??null}};Ma=new WeakMap,Co=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,Fa=new WeakMap,Jc=new WeakSet,Yg=function(e,t=null){let n=l(this,Ma).get(e);if(n)return n;let i=this.messageHandler.sendWithPromise(e,t);return l(this,Ma).set(e,i),i};mS=class{constructor(e){X(this,Ql,null);Qe(this,"onContinue",null);Qe(this,"onError",null);L(this,Ql,e)}get promise(){return l(this,Ql).capability.promise}cancel(e=0){l(this,Ql).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=l(this,Ql).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=l(this,Ql);return e.form||e.canvas&&t?.size>0}};Ql=new WeakMap;uc=class uc{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:u,filterFactory:c,useRequestAnimationFrame:f=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:g=!1,operationsFilter:b=null}){X(this,eu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new mS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(l(uc,Qc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(uc,Qc).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:n,transform:i,background:o,dependencyTracker:s}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new qh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),l(this,eu)&&(window.cancelAnimationFrame(l(this,eu)),L(this,eu,null)),l(uc,Qc).delete(this._canvas),e||(e=new wp(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,eu,window.requestAnimationFrame(()=>{L(this,eu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(uc,Qc).delete(this._canvas),this.callback())))}};eu=new WeakMap,Qc=new WeakMap,X(uc,Qc,new WeakSet);yS=uc,IF="5.4.530",OF="50cc4adac",di=class di{constructor({editor:e=null,uiManager:t=null}){X(this,or);X(this,Li,null);X(this,ef,null);X(this,jd);X(this,un,null);X(this,Cy,!1);X(this,$d,!1);X(this,Ua,null);X(this,Ry);X(this,tu,null);X(this,$s,null);e?(L(this,$d,!1),L(this,Ua,e)):L(this,$d,!0),L(this,$s,e?._uiManager||t),L(this,Ry,l(this,$s)._eventBus),L(this,jd,e?.color?.toUpperCase()||l(this,$s)?.highlightColors.values().next().value||"#FFFF98"),l(di,Dy)||L(di,Dy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return wt(this,"_keyboardManager",new If([[["Escape","mac+Escape"],di.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],di.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],di.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],di.prototype._moveToPrevious],[["Home","mac+Home"],di.prototype._moveToBeginning],[["End","mac+End"],di.prototype._moveToEnd]]))}renderButton(){let e=L(this,Li,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Ua)&&(e.ariaControls=`${l(this,Ua).id}_colorpicker_dropdown`);let t=l(this,$s)._signal;e.addEventListener("click",se(this,or,sc).bind(this),{signal:t}),e.addEventListener("keydown",se(this,or,vS).bind(this),{signal:t});let n=L(this,ef,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,jd),e.append(n),e}renderMainDropdown(){let e=L(this,un,se(this,or,bS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,Li)){se(this,or,sc).call(this,e);return}let t=e.target.getAttribute("data-color");t&&se(this,or,wS).call(this,t,e)}_moveToNext(e){if(!l(this,or,Rl)){se(this,or,sc).call(this,e);return}if(e.target===l(this,Li)){l(this,un).firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===l(this,un)?.firstElementChild||e.target===l(this,Li)){l(this,or,Rl)&&this._hideDropdownFromKeyboard();return}l(this,or,Rl)||se(this,or,sc).call(this,e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!l(this,or,Rl)){se(this,or,sc).call(this,e);return}l(this,un).firstElementChild?.focus()}_moveToEnd(e){if(!l(this,or,Rl)){se(this,or,sc).call(this,e);return}l(this,un).lastElementChild?.focus()}hideDropdown(){l(this,un)?.classList.add("hidden"),l(this,Li).ariaExpanded="false",l(this,tu)?.abort(),L(this,tu,null)}_hideDropdownFromKeyboard(){if(!l(this,$d)){if(!l(this,or,Rl)){l(this,Ua)?.unselect();return}this.hideDropdown(),l(this,Li).focus({preventScroll:!0,focusVisible:l(this,Cy)})}}updateColor(e){if(l(this,ef)&&(l(this,ef).style.backgroundColor=e),!l(this,un))return;let t=l(this,$s).highlightColors.values();for(let n of l(this,un).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){l(this,Li)?.remove(),L(this,Li,null),L(this,ef,null),l(this,un)?.remove(),L(this,un,null)}};Li=new WeakMap,ef=new WeakMap,jd=new WeakMap,un=new WeakMap,Cy=new WeakMap,$d=new WeakMap,Ua=new WeakMap,Ry=new WeakMap,tu=new WeakMap,$s=new WeakMap,Dy=new WeakMap,or=new WeakSet,bS=function(){let e=document.createElement("div"),t=l(this,$s)._signal;e.addEventListener("contextmenu",Zi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Ua)&&(e.id=`${l(this,Ua).id}_colorpicker_dropdown`);for(let[n,i]of l(this,$s).highlightColors){let o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",l(di,Dy)[n]);let s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=i,o.ariaSelected=i===l(this,jd),o.addEventListener("click",se(this,or,wS).bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",se(this,or,vS).bind(this),{signal:t}),e},wS=function(e,t){t.stopPropagation(),l(this,Ry).dispatch("switchannotationeditorparams",{source:this,type:Bt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},vS=function(e){di._keyboardManager.exec(this,e)},sc=function(e){if(l(this,or,Rl)){this.hideDropdown();return}if(L(this,Cy,e.detail===0),l(this,tu)||(L(this,tu,new AbortController),window.addEventListener("pointerdown",se(this,or,NF).bind(this),{signal:l(this,$s).combinedSignal(l(this,tu))})),l(this,Li).ariaExpanded="true",l(this,un)){l(this,un).classList.remove("hidden");return}let t=L(this,un,se(this,or,bS).call(this));l(this,Li).append(t)},NF=function(e){l(this,un)?.contains(e.target)||this.hideDropdown()},Rl=function(){return l(this,un)&&!l(this,un).classList.contains("hidden")},X(di,Dy,null);hm=di,cc=class cc{constructor(e){X(this,Ro,null);X(this,Iy,null);X(this,zd,null);L(this,Iy,e),L(this,zd,e._uiManager),l(cc,Oy)||L(cc,Oy,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Ro))return l(this,Ro);let{editorType:e,colorType:t,color:n}=l(this,Iy),i=L(this,Ro,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(cc,Oy)[e]),i.addEventListener("input",()=>{l(this,zd).updateParams(t,i.value)},{signal:l(this,zd)._signal}),i}update(e){l(this,Ro)&&(l(this,Ro).value=e)}destroy(){l(this,Ro)?.remove(),L(this,Ro,null)}hideDropdown(){}};Ro=new WeakMap,Iy=new WeakMap,zd=new WeakMap,Oy=new WeakMap,X(cc,Oy,null);Cv=cc;Rv=class{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ng(e),[e,e,e]}static G_HTML([e]){let t=EM(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Ng)}static RGB_HTML(e){return`#${e.map(EM).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Ng(1-Math.min(1,e+i)),Ng(1-Math.min(1,n+i)),Ng(1-Math.min(1,t+i))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let i=1-e,o=1-t,s=1-n,a=Math.min(i,o,s);return["CMYK",i,o,s,a]}},_S=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){dr("Abstract method `_createSVG` called.")}},Of=class extends _S{_createSVG(e){return document.createElementNS(ha,e)}},wV=9,Nf=new WeakSet,vV=new Date().getTimezoneOffset()*60*1e3,nm=class{static create(e){switch(e.data.annotationType){case qr.LINK:return new dm(e);case qr.TEXT:return new xS(e);case qr.WIDGET:switch(e.data.fieldType){case"Tx":return new SS(e);case"Btn":return e.data.radioButton?new Dv(e):e.data.checkBox?new CS(e):new RS(e);case"Ch":return new DS(e);case"Sig":return new TS(e)}return new rl(e);case qr.POPUP:return new pm(e);case qr.FREETEXT:return new Iv(e);case qr.LINE:return new MS(e);case qr.SQUARE:return new FS(e);case qr.CIRCLE:return new US(e);case qr.POLYLINE:return new Ov(e);case qr.CARET:return new $S(e);case qr.INK:return new gm(e);case qr.POLYGON:return new jS(e);case qr.HIGHLIGHT:return new Nv(e);case qr.UNDERLINE:return new WS(e);case qr.SQUIGGLY:return new qS(e);case qr.STRIKEOUT:return new HS(e);case qr.STAMP:return new kv(e);case qr.FILEATTACHMENT:return new GS(e);default:return new Rr(e)}}},DT=class DT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){X(this,Ny);X(this,tf,null);X(this,Wd,!1);X(this,bs,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return DT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;let{quadPoints:t,inkLists:n,rect:i}=this.data,o=-1/0,s=-1/0;if(t?.length>=8){for(let a=0;a<t.length;a+=8)t[a+1]>s?(s=t[a+1],o=t[a+2]):t[a+1]===s&&(o=Math.max(o,t[a+2]));return[o,s]}if(n?.length>=1){for(let a of n)for(let u=0,c=a.length;u<c;u+=2)a[u+1]>s?(s=a[u+1],o=a[u]):a[u+1]===s&&(o=Math.max(o,a[u]));if(o!==1/0)return[o,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){let{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){let{data:e}=this;return this.annotationStorage.getRawValue(`${im}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){let{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${im}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(l(this,bs)?.popup||this.popup)?.remove(),L(this,bs,this.popup=null)}updateEdited(e){if(!this.container)return;e.rect&&(l(this,tf)||L(this,tf,{rect:this.data.rect.slice(0)}));let{rect:t,popup:n}=e;t&&se(this,Ny,ES).call(this,t);let i=l(this,bs)?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=l(this,bs).popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),L(this,bs,null),this.popup=null))}resetEdited(){l(this,tf)&&(se(this,Ny,ES).call(this,l(this,tf).rect),l(this,bs)?.popup.resetEdited(),L(this,tf,null))}_createContainer(e){let{data:t,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof rl)&&!(this instanceof dm)&&(o.tabIndex=0);let{style:s}=o;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof pm){let{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,o),o}let{width:a,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;let v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){let _=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof Dv){let _=`calc(${a}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case Dh.SOLID:s.borderStyle="solid";break;case Dh.DASHED:s.borderStyle="dashed";break;case Dh.BEVELED:_t("Unimplemented border style: beveled");break;case Dh.INSET:_t("Unimplemented border style: inset");break;case Dh.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let y=t.borderColor||null;y?(L(this,Wd,!0),s.borderColor=st.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}let c=st.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:h,pageX:d,pageY:g}=i.rawDims;s.left=`${100*(c[0]-d)/f}%`,s.top=`${100*(c[1]-g)/h}%`;let{rotation:b}=t;return t.hasOwnCanvas||b===0?(s.width=`${100*a/f}%`,s.height=`${100*u/h}%`):this.setRotation(b,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:s}=this;e%180!==0&&([o,s]=[s,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,i)=>{let o=i.detail[t],s=o[0],a=o.slice(1);i.target.style[n]=Rv[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Rv[`${s}_rgb`](a)})};return wt(this,"_commonActions",{display:t=>{let{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[i,o]of Object.entries(t)){let s=n[i];if(s){let a={detail:{[i]:o},target:e};s(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,i,o]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){let[v,w,y,_]=e.subarray(2,6);if(i===v&&o===w&&t===y&&n===_)return}let{style:s}=this.container,a;if(l(this,Wd)){let{borderColor:v,borderWidth:w}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}let u=i-t,c=o-n,{svgFactory:f}=this,h=f.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";let d=f.createElement("defs");h.append(d);let g=f.createElement("clipPath"),b=`clippath_${this.data.id}`;g.setAttribute("id",b),g.setAttribute("clipPathUnits","objectBoundingBox"),d.append(g);for(let v=2,w=e.length;v<w;v+=8){let y=e[v],_=e[v+1],E=e[v+2],S=e[v+3],A=f.createElement("rect"),B=(E-t)/u,T=(o-_)/c,Z=(y-E)/u,ie=(_-S)/c;A.setAttribute("x",B),A.setAttribute("y",T),A.setAttribute("width",Z),A.setAttribute("height",ie),g.append(A),a?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${T}" width="${Z}" height="${ie}"/>`)}l(this,Wd)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){let{data:t}=this,n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),L(this,bs,new pm({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,bs)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,bs)}render(){dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let i=this._fieldObjects[e];if(i)for(let{page:o,id:s,exportValues:a}of i){if(o===-1||s===t)continue;let u=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!Nf.has(c)){_t(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:u,domElement:c})}return n}for(let i of document.getElementsByName(e)){let{exportValue:o}=i,s=i.getAttribute("data-element-id");s!==t&&Nf.has(i)&&n.push({id:s,exportValue:o,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};tf=new WeakMap,Wd=new WeakMap,bs=new WeakMap,Ny=new WeakSet,ES=function(e){let{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-a)/o}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};Rr=DT,AS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},dm=class extends Rr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0});X(this,Xi);this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),o=!0):t.attachment?(se(this,Xi,kF).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),o=!0):t.setOCGState?(se(this,Xi,LF).call(this,i,t.setOCGState,t.overlaidText),o=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),o=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&se(this,Xi,oc).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),se(this,Xi,oc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let o of Object.keys(n.actions)){let s=i.get(o);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),se(this,Xi,oc).call(this)}_bindResetFormAction(t,n){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),se(this,Xi,oc).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:o,refs:s,include:a}=n,u=[];if(o.length!==0||s.length!==0){let h=new Set(s);for(let d of o){let g=this._fieldObjects[d]||[];for(let{id:b}of g)h.add(b)}for(let d of Object.values(this._fieldObjects))for(let g of d)h.has(g.id)===a&&u.push(g)}else for(let h of Object.values(this._fieldObjects))u.push(...h);let c=this.annotationStorage,f=[];for(let h of u){let{id:d}=h;switch(f.push(d),h.type){case"text":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}case"checkbox":case"radiobutton":{let b=h.defaultValue===h.exportValues;c.setValue(d,{value:b});break}case"combobox":case"listbox":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}default:continue}let g=document.querySelector(`[data-element-id="${d}"]`);if(g){if(!Nf.has(g)){_t(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}};Xi=new WeakSet,oc=function(){this.container.setAttribute("data-internal-link","")},kF=function(t,n,i="",o=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,o),!1),se(this,Xi,oc).call(this)},LF=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),se(this,Xi,oc).call(this)};xS=class extends Rr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}},rl=class extends Rr{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ur.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,o){n.includes("mouse")?e.addEventListener(n,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s)}})})}_setEventListeners(e,t,n,i){for(let[o,s]of n)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":st.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||wV,o=e.style,s,a=2,u=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),f=Math.round(c/(Cw*i))||1,h=c/f;s=Math.min(i,u(h/Cw))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(i,u(c/Cw))}o.fontSize=`calc(${s}px * var(--total-scale-factor))`,o.color=st.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},SS=class extends rl{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){let o=this.annotationStorage;for(let s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),o.setValue(s.id,{[i]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let i=e.getValue(t,{value:this.data.fieldValue}),o=i.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let u={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nf.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;let{datetimeFormat:c,datetimeType:f,timeStep:h}=this.data,d=!!f&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",b=>{let v=this.data.defaultFieldValue??"";n.value=u.userValue=v,u.formattedValue=null});let g=b=>{let{formattedValue:v}=u;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{if(u.focused)return;let{target:w}=v;if(d&&(w.type=f,h&&(w.step=h)),u.userValue){let y=u.userValue;if(d)if(f==="time"){let _=new Date(y),E=[_.getHours(),_.getMinutes(),_.getSeconds()];w.value=E.map(S=>S.toString().padStart(2,"0")).join(":")}else w.value=new Date(y-vV).toISOString().split(f==="date"?"T":".",1)[0];else w.value=y}u.lastCommittedValue=w.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);let w={value(y){u.userValue=y.detail.value??"",d||e.setValue(t,{value:u.userValue.toString()}),y.target.value=u.userValue},formattedValue(y){let{formattedValue:_}=y.detail;u.formattedValue=_,_!=null&&y.target!==document.activeElement&&(y.target.value=_);let E={formattedValue:_};d&&(E.value=_),e.setValue(t,E)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{let{charLimit:_}=y.detail,{target:E}=y;if(_===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",_);let S=u.userValue;!S||S.length<=_||(S=S.slice(0,_),E.value=u.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),n.addEventListener("keydown",v=>{u.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(u.commitKey=3),w===-1)return;let{value:y}=v.target;u.lastCommittedValue!==y&&(u.lastCommittedValue=y,u.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});let b=g;g=null,n.addEventListener("blur",v=>{if(!u.focused||!v.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);let{target:w}=v,{value:y}=w;if(d){if(y&&f==="time"){let _=y.split(":").map(E=>parseInt(E,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();w.type="text"}u.userValue=y,u.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:u.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),b(v)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",v=>{u.lastCommittedValue=null;let{data:w,target:y}=v,{value:_,selectionStart:E,selectionEnd:S}=y,A=E,B=S;switch(v.inputType){case"deleteWordBackward":{let T=_.substring(0,E).match(/\w*[^\w]*$/);T&&(A-=T[0].length);break}case"deleteWordForward":{let T=_.substring(E).match(/^[^\w]*\w*/);T&&(B+=T[0].length);break}case"deleteContentBackward":E===S&&(A-=1);break;case"deleteContentForward":E===S&&(B+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:w||"",willCommit:!1,selStart:A,selEnd:B}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){let v=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},TS=class extends rl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},CS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let o=document.createElement("input");return Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n)){let f=u&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=f),e.setValue(c.id,{value:f})}e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{let a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},Dv=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(let s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});let o=document.createElement("input");if(Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;o.addEventListener("updatefromsandbox",a=>{let u={value:c=>{let f=s===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let d=f&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},RS=class extends dm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},DS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Nf.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{let h=this.data.defaultFieldValue;for(let d of i.options)d.selected=d.value===h});for(let f of this.data.options){let h=document.createElement("option");h.textContent=f.displayValue,h.value=f.exportValue,n.value.includes(f.exportValue)&&(h.setAttribute("selected",!0),o=!1),i.append(h)}let s=null;if(o){let f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),s=()=>{f.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}let a=f=>{let h=f?"value":"textContent",{options:d,multiple:g}=i;return g?Array.prototype.filter.call(d,b=>b.selected).map(b=>b[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]},u=a(!1),c=f=>{let h=f.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{let h={value(d){s?.();let g=d.detail.value,b=new Set(Array.isArray(g)?g:[g]);for(let v of i.options)v.selected=b.has(v.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(d){i.multiple=!0},remove(d){let g=i.options,b=d.detail.remove;g[b].selected=!1,i.remove(b),g.length>0&&Array.prototype.findIndex.call(g,w=>w.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(d){let{index:g,displayValue:b,exportValue:v}=d.detail.insert,w=i.children[g],y=document.createElement("option");y.textContent=b,y.value=v,w?w.before(y):i.append(y),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},items(d){let{items:g}=d.detail;for(;i.length!==0;)i.remove(0);for(let b of g){let{displayValue:v,exportValue:w}=b,y=document.createElement("option");y.textContent=v,y.value=w,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},indices(d){let g=new Set(d.detail.indices);for(let b of d.target.options)b.selected=g.has(b.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,f)}),i.addEventListener("input",f=>{let h=a(!0),d=a(!1);e.setValue(t,{value:h}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},pm=class extends Rr{constructor(t){let{data:n,elements:i,parent:o}=t,s=!!o._commentManager;super(t,{isRenderable:!s&&Rr._hasPopupData(n)});X(this,ky);if(this.elements=i,s&&Rr._hasPopupData(n)){let a=this.popup=se(this,ky,IS).call(this);for(let u of i)u.popup=a}else this.popup=null}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let n=this.popup=se(this,ky,IS).call(this),i=[];for(let o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${Mh}${o}`).join(",")),this.container}};ky=new WeakSet,IS=function(){return new OS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};OS=class{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:u,rect:c,parentRect:f,open:h,commentManager:d=null}){X(this,Ct);X(this,Pi,null);X(this,ru,se(this,Ct,MF).bind(this));X(this,t_,se(this,Ct,BS).bind(this));X(this,r_,se(this,Ct,qw).bind(this));X(this,qd,se(this,Ct,Ww).bind(this));X(this,Hd,null);X(this,Br,null);X(this,Do,null);X(this,nu,null);X(this,rf,null);X(this,Gd,null);X(this,Vd,null);X(this,Io,!1);X(this,Bi,null);X(this,ja,null);X(this,$a,null);X(this,Mr,null);X(this,za,null);X(this,iu,null);X(this,Ly,null);X(this,Wa,null);X(this,Yd,null);X(this,nf,null);X(this,su,!1);X(this,mn,null);X(this,ou,null);L(this,Br,e),L(this,Yd,i),L(this,Do,s),L(this,Wa,a),L(this,Gd,u),L(this,Hd,t),L(this,Ly,c),L(this,Vd,f),L(this,rf,n),L(this,Pi,d),L(this,mn,n[0]),L(this,nu,Rf.toDateObject(o)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup()),d||(se(this,Ct,$w).call(this),l(this,Br).hidden=!0,h&&se(this,Ct,Ww).call(this))}renderCommentButton(){if(l(this,Mr)){l(this,Mr).parentNode||l(this,mn).container.after(l(this,Mr));return}if(l(this,za)||se(this,Ct,NS).call(this),!l(this,za))return;let{signal:e}=L(this,ja,new AbortController),t=l(this,mn).hasOwnCommentButton,n=()=>{l(this,Pi).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{l(this,Pi).toggleCommentPopup(this,!1,!0,!t)},o=()=>{l(this,Pi).toggleCommentPopup(this,!1,!1)};if(t){L(this,Mr,l(this,mn).container);for(let s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),s.classList.add("popupTriggerArea")}else{let s=L(this,Mr,document.createElement("button"));s.className="annotationCommentButton";let a=l(this,mn).container;s.style.zIndex=a.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),se(this,Ct,LS).call(this),se(this,Ct,kS).call(this),s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),a.after(s)}}get commentButtonColor(){let{color:e,opacity:t}=l(this,mn).commentData;return e?l(this,Gd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{l(this,Mr)?.focus()},0)}getData(){let{richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}=l(this,mn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return l(this,Mr)}get comment(){return l(this,ou)||L(this,ou,l(this,mn).commentText),l(this,ou)}set comment(e){e!==this.comment&&(l(this,mn).commentText=L(this,ou,e))}focus(){l(this,mn).container?.focus()}get parentBoundingClientRect(){return l(this,mn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Mr)&&(l(this,Mr).classList.toggle("selected",e),l(this,Mr).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Mr).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,iu))return l(this,iu);let{x:e,y:t,height:n}=l(this,Mr).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,mn).layer.getBoundingClientRect();return[(e-i)/s,(t+n-o)/a]}set commentPopupPosition(e){L(this,iu,e)}hasDefaultPopupPosition(){return l(this,iu)===null}get commentButtonPosition(){return l(this,za)}get commentButtonWidth(){return l(this,Mr).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){let[t,n]=l(this,iu)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:o,y:s,width:a,height:u}=i;l(this,Pi).showDialog(null,this,o+t*a,s+n*u,{...e,parentDimensions:i})}render(){if(l(this,Bi))return;let e=L(this,Bi,document.createElement("div"));if(e.className="popup",l(this,Hd)){let n=e.style.outlineColor=st.makeHexColor(...l(this,Hd));e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}let t=document.createElement("span");if(t.className="header",l(this,Yd)?.str){let n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=l(this,Yd)}if(e.append(t),l(this,nu)){let n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,nu).valueOf()})),n.dateTime=l(this,nu).toISOString(),t.append(n)}AT({html:l(this,Ct,zw)||l(this,Do).str,dir:l(this,Do)?.dir,className:"popupContent"},e),l(this,Br).append(e)}updateEdited({rect:e,popup:t,deleted:n}){if(l(this,Pi)){n?(this.remove(),L(this,ou,null)):t&&(t.deleted?this.remove():(se(this,Ct,LS).call(this),L(this,ou,t.text))),e&&(L(this,za,null),se(this,Ct,NS).call(this),se(this,Ct,kS).call(this));return}if(n||t?.deleted){this.remove();return}se(this,Ct,$w).call(this),l(this,nf)||L(this,nf,{contentsObj:l(this,Do),richText:l(this,Wa)}),e&&L(this,$a,null),t&&t.text&&(L(this,Wa,se(this,Ct,BF).call(this,t.text)),L(this,nu,Rf.toDateObject(t.date)),L(this,Do,null)),l(this,Bi)?.remove(),L(this,Bi,null)}resetEdited(){l(this,nf)&&({contentsObj:tn(this,Do)._,richText:tn(this,Wa)._}=l(this,nf),L(this,nf,null),l(this,Bi)?.remove(),L(this,Bi,null),L(this,$a,null))}remove(){if(l(this,ja)?.abort(),L(this,ja,null),l(this,Bi)?.remove(),L(this,Bi,null),L(this,su,!1),L(this,Io,!1),l(this,Mr)?.remove(),L(this,Mr,null),this.trigger)for(let e of this.trigger)e.classList.remove("popupTriggerArea")}forceHide(){L(this,su,this.isVisible),l(this,su)&&(l(this,Br).hidden=!0)}maybeShow(){l(this,Pi)||(se(this,Ct,$w).call(this),l(this,su)&&(l(this,Bi)||se(this,Ct,qw).call(this),L(this,su,!1),l(this,Br).hidden=!1))}get isVisible(){return l(this,Pi)?!1:l(this,Br).hidden===!1}};Pi=new WeakMap,ru=new WeakMap,t_=new WeakMap,r_=new WeakMap,qd=new WeakMap,Hd=new WeakMap,Br=new WeakMap,Do=new WeakMap,nu=new WeakMap,rf=new WeakMap,Gd=new WeakMap,Vd=new WeakMap,Io=new WeakMap,Bi=new WeakMap,ja=new WeakMap,$a=new WeakMap,Mr=new WeakMap,za=new WeakMap,iu=new WeakMap,Ly=new WeakMap,Wa=new WeakMap,Yd=new WeakMap,nf=new WeakMap,su=new WeakMap,mn=new WeakMap,ou=new WeakMap,Ct=new WeakSet,$w=function(){if(l(this,ja))return;L(this,ja,new AbortController);let{signal:e}=l(this,ja);for(let t of this.trigger)t.addEventListener("click",l(this,qd),{signal:e}),t.addEventListener("pointerenter",l(this,r_),{signal:e}),t.addEventListener("pointerleave",l(this,t_),{signal:e}),t.classList.add("popupTriggerArea");for(let t of l(this,rf))t.container?.addEventListener("keydown",l(this,ru),{signal:e})},NS=function(){let e=l(this,rf).find(t=>t.hasCommentButton);e&&L(this,za,e._normalizePoint(e.commentButtonPosition))},kS=function(){if(l(this,mn).extraPopupElement&&!l(this,mn).editor)return;l(this,Mr)||this.renderCommentButton();let[e,t]=l(this,za),{style:n}=l(this,Mr);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},LS=function(){l(this,mn).extraPopupElement||(l(this,Mr)||this.renderCommentButton(),l(this,Mr).style.backgroundColor=this.commentButtonColor||"")},zw=function(){let e=l(this,Wa),t=l(this,Do);return e?.str&&(!t?.str||t.str===e.str)&&l(this,Wa).html||null},PS=function(){return l(this,Ct,zw)?.attributes?.style?.fontSize||0},PF=function(){return l(this,Ct,zw)?.attributes?.style?.color||null},BF=function(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,Ct,PF),fontSize:l(this,Ct,PS)?`calc(${l(this,Ct,PS)}px * var(--total-scale-factor))`:""}};for(let o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return n},MF=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Io))&&se(this,Ct,Ww).call(this)},FF=function(){if(l(this,$a)!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=l(this,Gd),s=!!l(this,Vd),a=s?l(this,Vd):l(this,Ly);for(let b of l(this,rf))if(!a||st.intersect(b.data.rect,a)!==null){a=b.data.rect,s=!0;break}let u=st.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),f=s?a[2]-a[0]+5:0,h=u[0]+f,d=u[1];L(this,$a,[100*(h-i)/t,100*(d-o)/n]);let{style:g}=l(this,Br);g.left=`${l(this,$a)[0]}%`,g.top=`${l(this,$a)[1]}%`},Ww=function(){if(l(this,Pi)){l(this,Pi).toggleCommentPopup(this,!1);return}L(this,Io,!l(this,Io)),l(this,Io)?(se(this,Ct,qw).call(this),l(this,Br).addEventListener("click",l(this,qd)),l(this,Br).addEventListener("keydown",l(this,ru))):(se(this,Ct,BS).call(this),l(this,Br).removeEventListener("click",l(this,qd)),l(this,Br).removeEventListener("keydown",l(this,ru)))},qw=function(){l(this,Bi)||this.render(),this.isVisible?l(this,Io)&&l(this,Br).classList.add("focused"):(se(this,Ct,FF).call(this),l(this,Br).hidden=!1,l(this,Br).style.zIndex=parseInt(l(this,Br).style.zIndex)+1e3)},BS=function(){l(this,Br).classList.remove("focused"),!(l(this,Io)||!this.isVisible)&&(l(this,Br).hidden=!0,l(this,Br).style.zIndex=parseInt(l(this,Br).style.zIndex)-1e3)};Iv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},MS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});X(this,Py,null)}render(){this.container.classList.add("lineAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=L(this,Py,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),o.append(s),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Py)}addHighlightArea(){this.container.classList.add("highlightArea")}};Py=new WeakMap;FS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});X(this,By,null)}render(){this.container.classList.add("squareAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=L(this,By,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,By)}addHighlightArea(){this.container.classList.add("highlightArea")}};By=new WeakMap;US=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});X(this,My,null)}render(){this.container.classList.add("circleAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=L(this,My,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,My)}addHighlightArea(){this.container.classList.add("highlightArea")}};My=new WeakMap;Ov=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});X(this,Fy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:n,borderStyle:i,popupRef:o},width:s,height:a}=this;if(!n)return this.container;let u=this.svgFactory.create(s,a,!0),c=[];for(let h=0,d=n.length;h<d;h+=2){let g=n[h]-t[0],b=t[3]-n[h+1];c.push(`${g},${b}`)}c=c.join(" ");let f=L(this,Fy,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",c),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Fy)}addHighlightArea(){this.container.classList.add("highlightArea")}};Fy=new WeakMap;jS=class extends Ov{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},$S=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},gm=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});X(this,jy);X(this,Uy,null);X(this,sf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:n,inkLists:i,borderStyle:o,popupRef:s}}=this,{transform:a,width:u,height:c}=se(this,jy,zS).call(this,n,t),f=this.svgFactory.create(u,c,!0),h=L(this,Uy,this.svgFactory.createElement("svg:g"));f.append(h),h.setAttribute("stroke-width",o.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let d=0,g=i.length;d<g;d++){let b=this.svgFactory.createElement(this.svgElementName);l(this,sf).push(b),b.setAttribute("points",i[d].join(",")),h.append(b)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:n,points:i,rect:o}=t,s=l(this,Uy);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,u=l(this,sf).length;a<u;a++)l(this,sf)[a].setAttribute("points",i[a].join(","));if(o){let{transform:a,width:u,height:c}=se(this,jy,zS).call(this,this.data.rotation,o);s.parentElement.setAttribute("viewBox",`0 0 ${u} ${c}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,sf)}addHighlightArea(){this.container.classList.add("highlightArea")}};Uy=new WeakMap,sf=new WeakMap,jy=new WeakSet,zS=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};Nv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){let n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},WS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},qS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},HS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){let n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},kv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},GS=class extends Rr{constructor(t){super(t,{isRenderable:!0});X(this,zy);X(this,$y,null);let{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:n}=this,i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",se(this,zy,VS).bind(this)),L(this,$y,i);let{isMac:o}=Ur.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(o?s.metaKey:s.ctrlKey)&&se(this,zy,VS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}};$y=new WeakMap,zy=new WeakSet,VS=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)};IT=class IT{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:s,structTreeLayer:a,commentManager:u,linkService:c,annotationStorage:f}){X(this,Qa);X(this,of,null);X(this,af,null);X(this,Xd,null);X(this,au,new Map);X(this,Wy,null);X(this,lf,null);X(this,Mi,[]);X(this,qy,!1);this.div=e,L(this,of,t),L(this,af,n),L(this,Wy,a||null),L(this,lf,c||null),L(this,Xd,f||new um),this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return l(this,au).size>0}async render(e){let{annotations:t}=e,n=this.div;wu(n,this.viewport);let i=new Map,o=[],s={data:null,layer:n,linkService:l(this,lf),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Of,annotationStorage:l(this,Xd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let a of t){if(a.noHTML)continue;let u=a.annotationType===qr.POPUP;if(u){let h=i.get(a.id);if(!h)continue;if(!this._commentManager){o.push(a);continue}s.elements=h}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;let c=nm.create(s);if(!c.isRenderable)continue;if(!u&&(l(this,Mi).push(c),a.popupRef)){let h=i.get(a.popupRef);h?h.push(c):i.set(a.popupRef,[c])}let f=c.render();a.hidden&&(f.style.visibility="hidden"),c._isEditable&&(l(this,au).set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}await se(this,Qa,Hw).call(this);for(let a of o){let u=s.elements=i.get(a.id);s.data=a;let c=nm.create(s);if(!c.isRenderable)continue;let f=c.render();c.contentElement.id=`${Mh}${a.id}`,a.hidden&&(f.style.visibility="hidden"),u.at(-1).container.after(f)}se(this,Qa,YS).call(this)}async addLinkAnnotations(e){let t={data:null,layer:this.div,linkService:l(this,lf),svgFactory:new Of,parent:this};for(let n of e){n.borderStyle||(n.borderStyle=IT._defaultBorderStyle),t.data=n;let i=nm.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${Mh}${n.id}`,l(this,Mi).push(i))}await se(this,Qa,Hw).call(this)}update({viewport:e}){let t=this.div;this.viewport=e,wu(t,{rotation:e.rotation}),se(this,Qa,YS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,au).values())}getEditableAnnotation(e){return l(this,au).get(e)}addFakeAnnotation(e){let{div:t}=this,{id:n,rotation:i}=e,o=new AS({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,lf),annotationStorage:l(this,Xd)});return o.render(),o.contentElement.id=`${Mh}${n}`,o.createOrUpdatePopup(),l(this,Mi).push(o),o}removeAnnotation(e){let t=l(this,Mi).findIndex(i=>i.data.id===e);if(t<0)return;let[n]=l(this,Mi).splice(t,1);l(this,of)?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(let t of e)t.updateFakeAnnotationElement(this);se(this,Qa,Hw).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Dh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};of=new WeakMap,af=new WeakMap,Xd=new WeakMap,au=new WeakMap,Wy=new WeakMap,lf=new WeakMap,Mi=new WeakMap,qy=new WeakMap,Qa=new WeakSet,Hw=async function(){if(l(this,Mi).length===0)return;this.div.replaceChildren();let e=[];if(!l(this,qy)){L(this,qy,!0);for(let{contentElement:n,data:{id:i}}of l(this,Mi)){let o=n.id=`${Mh}${i}`;e.push(l(this,Wy)?.getAriaAttributes(o).then(s=>{if(s)for(let[a,u]of s)n.setAttribute(a,u)}))}}l(this,Mi).sort(({data:{rect:[n,i,o,s]}},{data:{rect:[a,u,c,f]}})=>{if(n===o&&i===s)return 1;if(a===c&&u===f)return-1;let h=s,d=i,g=(i+s)/2,b=f,v=u,w=(u+f)/2;if(g>=b&&w<=d)return-1;if(w>=h&&g<=v)return 1;let y=(n+o)/2,_=(a+c)/2;return y-_});let t=document.createDocumentFragment();for(let n of l(this,Mi))t.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&t.append(n.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),l(this,of))for(let n of l(this,Mi))l(this,of).addPointerInTextLayer(n.contentElement,!1)},YS=function(){if(!l(this,af))return;let e=this.div;for(let[t,n]of l(this,af)){let i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";let{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);let s=l(this,au).get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),s._hasNoCanvas=!1):s.canvas=n)}l(this,af).clear()};Lv=IT,xw=/\r\n?|\n/g,wr=class wr extends mr{constructor(t){super({...t,name:"freeTextEditor"});X(this,Kr);X(this,Fi,"");X(this,Hy,`${this.id}-editor`);X(this,uf,null);X(this,Ui);Qe(this,"_colorPicker",null);this.color=t.color||wr._defaultColor||mr._defaultLineColor,L(this,Ui,t.fontSize||wr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){let t=wr.prototype,n=s=>s.isEmpty(),i=vu.TRANSLATE_SMALL,o=vu.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){mr.initialize(t,n);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Bt.FREETEXT_SIZE:wr._defaultFontSize=n;break;case Bt.FREETEXT_COLOR:wr._defaultColor=n;break}}updateParams(t,n){switch(t){case Bt.FREETEXT_SIZE:se(this,Kr,UF).call(this,n);break;case Bt.FREETEXT_COLOR:se(this,Kr,jF).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.FREETEXT_SIZE,wr._defaultFontSize],[Bt.FREETEXT_COLOR,wr._defaultColor||mr._defaultLineColor]]}get propertiesToUpdate(){return[[Bt.FREETEXT_SIZE,l(this,Ui)],[Bt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Cv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){let t=this.parentScale;return[-wr._internalPadding*t,-(wr._internalPadding+l(this,Ui))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,uf,new AbortController);let t=this._uiManager.combinedSignal(l(this,uf));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Hy)),this._isDraggable=!0,l(this,uf)?.abort(),L(this,uf,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=l(this,Fi),n=L(this,Fi,se(this,Kr,$F).call(this).trimEnd());if(t===n)return;let i=o=>{if(L(this,Fi,o),!o){this.remove();return}se(this,Kr,Yw).call(this),this._uiManager.rebuild(this),se(this,Kr,Gw).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),se(this,Kr,Gw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){wr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Hy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Ui)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[o,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[u,c]=this.getInitialTranslation();[u,c]=this.pageTranslationToScreen(u,c);let[f,h]=this.pageDimensions,[d,g]=this.pageTranslation,b,v;switch(this.rotation){case 0:b=t+(a[0]-d)/f,v=n+this.height-(a[1]-g)/h;break;case 90:b=t+(a[0]-d)/f,v=n-(a[1]-g)/h,[u,c]=[c,-u];break;case 180:b=t-this.width+(a[0]-d)/f,v=n-(a[1]-g)/h,[u,c]=[-u,-c];break;case 270:b=t+(a[0]-d-this.height*h)/f,v=n+(a[1]-g-this.width*f)/h,[u,c]=[-c,u];break}this.setAt(b*o,v*s,u,c)}else this._moveAfterPaste(t,n);se(this,Kr,Yw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,v,w;let n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let o=se(b=wr,el,KS).call(b,n.getData("text")||"").replaceAll(xw,`
`);if(!o)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:u,startOffset:c}=a,f=[],h=[];if(u.nodeType===Node.TEXT_NODE){let y=u.parentElement;if(h.push(u.nodeValue.slice(c).replaceAll(xw,"")),y!==this.editorDiv){let _=f;for(let E of this.editorDiv.childNodes){if(E===y){_=h;continue}_.push(se(v=wr,el,Vw).call(v,E))}}f.push(u.nodeValue.slice(0,c).replaceAll(xw,""))}else if(u===this.editorDiv){let y=f,_=0;for(let E of this.editorDiv.childNodes)_++===c&&(y=h),y.push(se(w=wr,el,Vw).call(w,E))}L(this,Fi,`${f.join(`
`)}${o}${h.join(`
`)}`),se(this,Kr,Yw).call(this);let d=new Range,g=Math.sumPrecise(f.map(y=>y.length));for(let{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){let _=y.nodeValue.length;if(g<=_){d.setStart(y,g),d.setEnd(y,g);break}g-=_}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){let t=wr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var a;let o=null;if(t instanceof Iv){let{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:f,rotation:h,id:d,popupRef:g,richText:b,contentsObj:v,creationDate:w,modificationDate:y},textContent:_,textPosition:E,parent:{page:{pageNumber:S}}}=t;if(!_||_.length===0)return null;o=t={annotationType:vt.FREETEXT,color:Array.from(c),fontSize:u,value:_.join(`
`),position:E,pageIndex:S-1,rect:f.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:g,comment:v?.str||null,richText:b,creationDate:w,modificationDate:y}}let s=await super.deserialize(t,n,i);return L(s,Ui,t.fontSize),s.color=st.makeHexColor(...t.color),L(s,Fi,se(a=wr,el,KS).call(a,t.value)),s._initialData=o,t.comment&&s.setCommentData(t),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:l(this,Ui),value:se(this,Kr,zF).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!se(this,Kr,WF).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){let n=super.renderAnnotationElement(t);if(!n)return null;let{style:i}=n;i.fontSize=`calc(${l(this,Ui)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(let o of l(this,Fi).split(`
`)){let s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),n.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Fi)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Fi=new WeakMap,Hy=new WeakMap,uf=new WeakMap,Ui=new WeakMap,Kr=new WeakSet,UF=function(t){let n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Ui))*this.parentScale),L(this,Ui,o),se(this,Kr,Gw).call(this)},i=l(this,Ui);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},jF=function(t){let n=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$F=function(){var i;let t=[];this.editorDiv.normalize();let n=null;for(let o of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(se(i=wr,el,Vw).call(i,o)),n=o);return t.join(`
`)},Gw=function(){let[t,n]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:o,div:s}=this,a=s.style.display,u=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",o.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},el=new WeakSet,Vw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xw,"")},Yw=function(){if(this.editorDiv.replaceChildren(),!!l(this,Fi))for(let t of l(this,Fi).split(`
`)){let n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},zF=function(){return l(this,Fi).replaceAll("\xA0"," ")},KS=function(t){return t.replaceAll(" ","\xA0")},WF=function(t){let{value:n,fontSize:i,color:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((a,u)=>a!==o[u])||t.pageIndex!==s},X(wr,el),Qe(wr,"_freeTextDefaultContent",""),Qe(wr,"_internalPadding",0),Qe(wr,"_defaultColor",null),Qe(wr,"_defaultFontSize",10),Qe(wr,"_type","freetext"),Qe(wr,"_editorType",vt.FREETEXT);XS=wr,lt=class{toSVGPath(){dr("Abstract method `toSVGPath` must be implemented.")}get box(){dr("Abstract getter `box` must be implemented.")}serialize(e,t){dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*o;return s}static _rescaleAndSwap(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*o;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let o=0,s=e.length;o<s;o+=2)i[o]=t+e[o],i[o+1]=n+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,o){switch(o){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,o,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+o)/6,(5*i+s)/6,(n+o)/2,(i+s)/2]}};Qe(lt,"PRECISION",1e-4);ma=class ma{constructor({x:e,y:t},n,i,o,s,a=0){X(this,cn);X(this,ji);X(this,zs,[]);X(this,Kd);X(this,Zd);X(this,Oo,[]);X(this,Nt,new Float32Array(18));X(this,cf);X(this,ff);X(this,Gy);X(this,Vy);X(this,Jd);X(this,Qd);X(this,lu,[]);L(this,ji,n),L(this,Qd,o*i),L(this,Zd,s),l(this,Nt).set([NaN,NaN,NaN,NaN,e,t],6),L(this,Kd,a),L(this,Vy,l(ma,Yy)*i),L(this,Gy,l(ma,i_)*i),L(this,Jd,i),l(this,lu).push(e,t)}isEmpty(){return isNaN(l(this,Nt)[8])}add({x:e,y:t}){L(this,cf,e),L(this,ff,t);let[n,i,o,s]=l(this,ji),[a,u,c,f]=l(this,Nt).subarray(8,12),h=e-c,d=t-f,g=Math.hypot(h,d);if(g<l(this,Gy))return!1;let b=g-l(this,Vy),v=b/g,w=v*h,y=v*d,_=a,E=u;a=c,u=f,c+=w,f+=y,l(this,lu)?.push(e,t);let S=-y/b,A=w/b,B=S*l(this,Qd),T=A*l(this,Qd);return l(this,Nt).set(l(this,Nt).subarray(2,8),0),l(this,Nt).set([c+B,f+T],4),l(this,Nt).set(l(this,Nt).subarray(14,18),12),l(this,Nt).set([c-B,f-T],16),isNaN(l(this,Nt)[6])?(l(this,Oo).length===0&&(l(this,Nt).set([a+B,u+T],2),l(this,Oo).push(NaN,NaN,NaN,NaN,(a+B-n)/o,(u+T-i)/s),l(this,Nt).set([a-B,u-T],14),l(this,zs).push(NaN,NaN,NaN,NaN,(a-B-n)/o,(u-T-i)/s)),l(this,Nt).set([_,E,a,u,c,f],6),!this.isEmpty()):(l(this,Nt).set([_,E,a,u,c,f],6),Math.abs(Math.atan2(E-u,_-a)-Math.atan2(y,w))<Math.PI/2?([a,u,c,f]=l(this,Nt).subarray(2,6),l(this,Oo).push(NaN,NaN,NaN,NaN,((a+c)/2-n)/o,((u+f)/2-i)/s),[a,u,_,E]=l(this,Nt).subarray(14,18),l(this,zs).push(NaN,NaN,NaN,NaN,((_+a)/2-n)/o,((E+u)/2-i)/s),!0):([_,E,a,u,c,f]=l(this,Nt).subarray(0,6),l(this,Oo).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),[c,f,a,u,_,E]=l(this,Nt).subarray(12,18),l(this,zs).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let e=l(this,Oo),t=l(this,zs);if(isNaN(l(this,Nt)[6])&&!this.isEmpty())return se(this,cn,qF).call(this);let n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);se(this,cn,GF).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return se(this,cn,HF).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,o,s){return new Bv(e,t,n,i,o,s)}getOutlines(){let e=l(this,Oo),t=l(this,zs),n=l(this,Nt),[i,o,s,a]=l(this,ji),u=new Float32Array((l(this,lu)?.length??0)+2);for(let h=0,d=u.length-2;h<d;h+=2)u[h]=(l(this,lu)[h]-i)/s,u[h+1]=(l(this,lu)[h+1]-o)/a;if(u[u.length-2]=(l(this,cf)-i)/s,u[u.length-1]=(l(this,ff)-o)/a,isNaN(n[6])&&!this.isEmpty())return se(this,cn,VF).call(this,u);let c=new Float32Array(l(this,Oo).length+24+l(this,zs).length),f=e.length;for(let h=0;h<f;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}f=se(this,cn,XF).call(this,c,f);for(let h=t.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(t[h+d])){c[f]=c[f+1]=NaN,f+=2;continue}c[f]=t[h+d],c[f+1]=t[h+d+1],f+=2}return se(this,cn,YF).call(this,c,f),this.newFreeDrawOutline(c,u,l(this,ji),l(this,Jd),l(this,Kd),l(this,Zd))}};ji=new WeakMap,zs=new WeakMap,Kd=new WeakMap,Zd=new WeakMap,Oo=new WeakMap,Nt=new WeakMap,cf=new WeakMap,ff=new WeakMap,Gy=new WeakMap,Vy=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,lu=new WeakMap,Yy=new WeakMap,n_=new WeakMap,i_=new WeakMap,cn=new WeakSet,Xg=function(){let e=l(this,Nt).subarray(4,6),t=l(this,Nt).subarray(16,18),[n,i,o,s]=l(this,ji);return[(l(this,cf)+(e[0]-t[0])/2-n)/o,(l(this,ff)+(e[1]-t[1])/2-i)/s,(l(this,cf)+(t[0]-e[0])/2-n)/o,(l(this,ff)+(t[1]-e[1])/2-i)/s]},qF=function(){let[e,t,n,i]=l(this,ji),[o,s,a,u]=se(this,cn,Xg).call(this);return`M${(l(this,Nt)[2]-e)/n} ${(l(this,Nt)[3]-t)/i} L${(l(this,Nt)[4]-e)/n} ${(l(this,Nt)[5]-t)/i} L${o} ${s} L${a} ${u} L${(l(this,Nt)[16]-e)/n} ${(l(this,Nt)[17]-t)/i} L${(l(this,Nt)[14]-e)/n} ${(l(this,Nt)[15]-t)/i} Z`},HF=function(e){let t=l(this,zs);e.push(`L${t[4]} ${t[5]} Z`)},GF=function(e){let[t,n,i,o]=l(this,ji),s=l(this,Nt).subarray(4,6),a=l(this,Nt).subarray(16,18),[u,c,f,h]=se(this,cn,Xg).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-n)/o} L${u} ${c} L${f} ${h} L${(a[0]-t)/i} ${(a[1]-n)/o}`)},VF=function(e){let t=l(this,Nt),[n,i,o,s]=l(this,ji),[a,u,c,f]=se(this,cn,Xg).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,l(this,ji),l(this,Jd),l(this,Kd),l(this,Zd))},YF=function(e,t){let n=l(this,zs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},XF=function(e,t){let n=l(this,Nt).subarray(4,6),i=l(this,Nt).subarray(16,18),[o,s,a,u]=l(this,ji),[c,f,h,d]=se(this,cn,Xg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-s)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-s)/u],t),t+=24},X(ma,Yy,8),X(ma,n_,2),X(ma,i_,l(ma,Yy)+l(ma,n_));Pv=ma,Bv=class extends lt{constructor(t,n,i,o,s,a){super();X(this,s_);X(this,ep);X(this,hf,new Float32Array(4));X(this,qa);X(this,Xy);X(this,$i);X(this,Ky);X(this,Gr);L(this,Gr,t),L(this,$i,n),L(this,ep,i),L(this,Ky,o),L(this,qa,s),L(this,Xy,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],se(this,s_,KF).call(this,a);let[u,c,f,h]=l(this,hf);for(let d=0,g=t.length;d<g;d+=2)t[d]=(t[d]-u)/f,t[d+1]=(t[d+1]-c)/h;for(let d=0,g=n.length;d<g;d+=2)n[d]=(n[d]-u)/f,n[d+1]=(n[d+1]-c)/h}toSVGPath(){let t=[`M${l(this,Gr)[4]} ${l(this,Gr)[5]}`];for(let n=6,i=l(this,Gr).length;n<i;n+=6){if(isNaN(l(this,Gr)[n])){t.push(`L${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`);continue}t.push(`C${l(this,Gr)[n]} ${l(this,Gr)[n+1]} ${l(this,Gr)[n+2]} ${l(this,Gr)[n+3]} ${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,o],s){let a=i-t,u=o-n,c,f;switch(s){case 0:c=lt._rescale(l(this,Gr),t,o,a,-u),f=lt._rescale(l(this,$i),t,o,a,-u);break;case 90:c=lt._rescaleAndSwap(l(this,Gr),t,n,a,u),f=lt._rescaleAndSwap(l(this,$i),t,n,a,u);break;case 180:c=lt._rescale(l(this,Gr),i,n,-a,u),f=lt._rescale(l(this,$i),i,n,-a,u);break;case 270:c=lt._rescaleAndSwap(l(this,Gr),i,o,-a,-u),f=lt._rescaleAndSwap(l(this,$i),i,o,-a,-u);break}return{outline:Array.from(c),points:[Array.from(f)]}}get box(){return l(this,hf)}newOutliner(t,n,i,o,s,a=0){return new Pv(t,n,i,o,s,a)}getNewOutline(t,n){let[i,o,s,a]=l(this,hf),[u,c,f,h]=l(this,ep),d=s*f,g=a*h,b=i*f+u,v=o*h+c,w=this.newOutliner({x:l(this,$i)[0]*d+b,y:l(this,$i)[1]*g+v},l(this,ep),l(this,Ky),t,l(this,Xy),n??l(this,qa));for(let y=2;y<l(this,$i).length;y+=2)w.add({x:l(this,$i)[y]*d+b,y:l(this,$i)[y+1]*g+v});return w.getOutlines()}};ep=new WeakMap,hf=new WeakMap,qa=new WeakMap,Xy=new WeakMap,$i=new WeakMap,Ky=new WeakMap,Gr=new WeakMap,s_=new WeakSet,KF=function(t){let n=l(this,Gr),i=n[4],o=n[5],s=[i,o,i,o],a=i,u=o,c=i,f=o,h=t?Math.max:Math.min,d=new Float32Array(4);for(let b=6,v=n.length;b<v;b+=6){let w=n[b+4],y=n[b+5];isNaN(n[b])?(st.pointBoundingBox(w,y,s),u>y?(a=w,u=y):u===y&&(a=h(a,w)),f<y?(c=w,f=y):f===y&&(c=h(c,w))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,st.bezierBoundingBox(i,o,...n.slice(b,b+6),d),st.rectBoundingBox(d[0],d[1],d[2],d[3],s),u>d[1]?(a=d[0],u=d[1]):u===d[1]&&(a=h(a,d[0])),f<d[3]?(c=d[2],f=d[3]):f===d[3]&&(c=h(c,d[2]))),i=w,o=y}let g=l(this,hf);g[0]=s[0]-l(this,qa),g[1]=s[1]-l(this,qa),g[2]=s[2]-s[0]+2*l(this,qa),g[3]=s[3]-s[1]+2*l(this,qa),this.firstPoint=[a,u],this.lastPoint=[c,f]};mm=class{constructor(e,t=0,n=0,i=!0){X(this,ti);X(this,Zy);X(this,Jy);X(this,Qy);X(this,uu,[]);X(this,Ws,[]);let o=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:w,y,width:_,height:E}of e){let S=Math.floor((w-t)/a)*a,A=Math.ceil((w+_+t)/a)*a,B=Math.floor((y-t)/a)*a,T=Math.ceil((y+E+t)/a)*a,Z=[S,B,T,!0],ie=[A,B,T,!1];l(this,uu).push(Z,ie),st.rectBoundingBox(S,B,A,T,o)}let u=o[2]-o[0]+2*n,c=o[3]-o[1]+2*n,f=o[0]-n,h=o[1]-n,d=i?-1/0:1/0,g=1/0,b=l(this,uu).at(i?-1:-2),v=[b[0],b[2]];for(let w of l(this,uu)){let[y,_,E,S]=w;!S&&i?_<g?(g=_,d=y):_===g&&(d=Math.max(d,y)):S&&!i&&(_<g?(g=_,d=y):_===g&&(d=Math.min(d,y))),w[0]=(y-f)/u,w[1]=(_-h)/c,w[2]=(E-h)/c}L(this,Zy,new Float32Array([f,h,u,c])),L(this,Jy,[d,g]),L(this,Qy,v)}getOutlines(){l(this,uu).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of l(this,uu))t[3]?(e.push(...se(this,ti,ZS).call(this,t)),se(this,ti,JF).call(this,t)):(se(this,ti,QF).call(this,t),e.push(...se(this,ti,ZS).call(this,t)));return se(this,ti,ZF).call(this,e)}};Zy=new WeakMap,Jy=new WeakMap,Qy=new WeakMap,uu=new WeakMap,Ws=new WeakMap,ti=new WeakSet,ZF=function(e){let t=[],n=new Set;for(let s of e){let[a,u,c]=s;t.push([a,u,s],[a,c,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){let u=t[s][2],c=t[s+1][2];u.push(c),c.push(u),n.add(u),n.add(c)}let i=[],o;for(;n.size>0;){let s=n.values().next().value,[a,u,c,f,h]=s;n.delete(s);let d=a,g=u;for(o=[a,c],i.push(o);;){let b;if(n.has(f))b=f;else if(n.has(h))b=h;else break;n.delete(b),[a,u,c,f,h]=b,d!==a&&(o.push(d,g,a,g===u?u:c),d=a),g=g===u?c:u}o.push(d,g)}return new JS(i,l(this,Zy),l(this,Jy),l(this,Qy))},Xw=function(e){let t=l(this,Ws),n=0,i=t.length-1;for(;n<=i;){let o=n+i>>1,s=t[o][0];if(s===e)return o;s<e?n=o+1:i=o-1}return i+1},JF=function([,e,t]){let n=se(this,ti,Xw).call(this,e);l(this,Ws).splice(n,0,[e,t])},QF=function([,e,t]){let n=se(this,ti,Xw).call(this,e);for(let i=n;i<l(this,Ws).length;i++){let[o,s]=l(this,Ws)[i];if(o!==e)break;if(o===e&&s===t){l(this,Ws).splice(i,1);return}}for(let i=n-1;i>=0;i--){let[o,s]=l(this,Ws)[i];if(o!==e)break;if(o===e&&s===t){l(this,Ws).splice(i,1);return}}},ZS=function(e){let[t,n,i]=e,o=[[t,n,i]],s=se(this,ti,Xw).call(this,i);for(let a=0;a<s;a++){let[u,c]=l(this,Ws)[a];for(let f=0,h=o.length;f<h;f++){let[,d,g]=o[f];if(!(c<=d||g<=u)){if(d>=u){if(g>c)o[f][1]=c;else{if(h===1)return[];o.splice(f,1),f--,h--}continue}o[f][2]=u,g>c&&o.push([t,c,g])}}}return o};JS=class extends lt{constructor(t,n,i,o){super();X(this,e0);X(this,tp);L(this,tp,t),L(this,e0,n),this.firstPoint=i,this.lastPoint=o}toSVGPath(){let t=[];for(let n of l(this,tp)){let[i,o]=n;t.push(`M${i} ${o}`);for(let s=2;s<n.length;s+=2){let a=n[s],u=n[s+1];a===i?(t.push(`V${u}`),o=u):u===o&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,n,i,o],s){let a=[],u=i-t,c=o-n;for(let f of l(this,tp)){let h=new Array(f.length);for(let d=0;d<f.length;d+=2)h[d]=t+f[d]*u,h[d+1]=o-f[d+1]*c;a.push(h)}return a}get box(){return l(this,e0)}get classNamesForOutlining(){return["highlightOutline"]}};e0=new WeakMap,tp=new WeakMap;ym=class extends Pv{newFreeDrawOutline(e,t,n,i,o,s){return new QS(e,t,n,i,o,s)}},QS=class extends Bv{newOutliner(e,t,n,i,o,s=0){return new ym(e,t,n,i,o,s)}},qt=class qt extends mr{constructor(t){super({...t,name:"highlightEditor"});X(this,Tt);X(this,rp,null);X(this,t0,0);X(this,Ha);X(this,df,null);X(this,r0,null);X(this,bi,null);X(this,n0,null);X(this,i0,0);X(this,pf,null);X(this,zi,null);X(this,Wi,null);X(this,Cn,!1);X(this,np,null);X(this,ip,null);X(this,zn,null);X(this,sp,"");X(this,ws);X(this,s0,"");this.color=t.color||qt._defaultColor,L(this,ws,t.thickness||qt._defaultThickness),this.opacity=t.opacity||qt._defaultOpacity,L(this,Ha,t.boxes||null),L(this,s0,t.methodOfCreation||""),L(this,sp,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(L(this,Cn,!0),se(this,Tt,Kw).call(this,t),se(this,Tt,ac).call(this)):l(this,Ha)&&(L(this,rp,t.anchorNode),L(this,t0,t.anchorOffset),L(this,n0,t.focusNode),L(this,i0,t.focusOffset),se(this,Tt,eT).call(this),se(this,Tt,ac).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){let t=qt.prototype;return wt(this,"_keyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Cn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,ws),methodOfCreation:l(this,s0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){mr.initialize(t,n),qt._defaultColor||(qt._defaultColor=n.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(t,n){switch(t){case Bt.HIGHLIGHT_COLOR:qt._defaultColor=n;break;case Bt.HIGHLIGHT_THICKNESS:qt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,ip)}get commentButtonPosition(){return l(this,np)}updateParams(t,n){switch(t){case Bt.HIGHLIGHT_COLOR:se(this,Tt,e3).call(this,n);break;case Bt.HIGHLIGHT_THICKNESS:se(this,Tt,t3).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,qt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,qt._defaultThickness]]}get propertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,this.color||qt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,l(this,ws)||qt._defaultThickness],[Bt.HIGHLIGHT_FREE,l(this,Cn)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(l(this,Wi),{root:{fill:this.color,"fill-opacity":this.opacity}}),l(this,r0)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",L(this,r0,new hm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(se(this,Tt,Jw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,se(this,Tt,Jw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){se(this,Tt,tT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(se(this,Tt,ac).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?se(this,Tt,tT).call(this):t&&(se(this,Tt,ac).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,s,a;let{drawLayer:n}=this.parent,i;l(this,Cn)?(t=(t-this.rotation+360)%360,i=se(o=qt,As,Ph).call(o,l(this,zi).box,t)):i=se(s=qt,As,Ph).call(s,[this.x,this.y,this.width,this.height],t),n.updateProperties(l(this,Wi),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(l(this,zn),{bbox:se(a=qt,As,Ph).call(a,l(this,bi).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();l(this,sp)&&(t.setAttribute("aria-label",l(this,sp)),t.setAttribute("role","mark")),l(this,Cn)?t.classList.add("free"):this.div.addEventListener("keydown",se(this,Tt,n3).bind(this),{signal:this._uiManager._signal});let n=L(this,pf,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,df),this.setDims(),UM(this,l(this,pf),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:se(this,Tt,Zw).call(this,!0);break;case 1:case 3:se(this,Tt,Zw).call(this,!1);break}}select(){super.select(),l(this,zn)&&this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),l(this,zn)&&(this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{selected:!1}}),l(this,Cn)||se(this,Tt,Zw).call(this,!1))}get _mustFixPosition(){return!l(this,Cn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Wi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,zn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:o,y:s}){let{x:a,y:u,width:c,height:f}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),g=b=>{h.abort(),se(this,As,a3).call(this,t,b)};window.addEventListener("blur",g,{signal:d}),window.addEventListener("pointerup",g,{signal:d}),window.addEventListener("pointerdown",Cr,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Zi,{signal:d}),i.addEventListener("pointermove",se(this,As,o3).bind(this,t),{signal:d}),this._freeHighlight=new ym({x:o,y:s},[a,u,c,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var v,w,y,_;let o=null;if(t instanceof Nv){let{data:{quadPoints:E,rect:S,rotation:A,id:B,color:T,opacity:Z,popupRef:ie,richText:G,contentsObj:ae,creationDate:U,modificationDate:V},parent:{page:{pageNumber:ue}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(T),opacity:Z,quadPoints:E,boxes:null,pageIndex:ue-1,rect:S.slice(0),rotation:A,annotationElementId:B,id:B,deleted:!1,popupRef:ie,richText:G,comment:ae?.str||null,creationDate:U,modificationDate:V}}else if(t instanceof gm){let{data:{inkLists:E,rect:S,rotation:A,id:B,color:T,borderStyle:{rawWidth:Z},popupRef:ie,richText:G,contentsObj:ae,creationDate:U,modificationDate:V},parent:{page:{pageNumber:ue}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(T),thickness:Z,inkLists:E,boxes:null,pageIndex:ue-1,rect:S.slice(0),rotation:A,annotationElementId:B,id:B,deleted:!1,popupRef:ie,richText:G,comment:ae?.str||null,creationDate:U,modificationDate:V}}let{color:s,quadPoints:a,inkLists:u,opacity:c}=t,f=await super.deserialize(t,n,i);f.color=st.makeHexColor(...s),f.opacity=c||1,u&&L(f,ws,t.thickness),f._initialData=o,t.comment&&f.setCommentData(t);let[h,d]=f.pageDimensions,[g,b]=f.pageTranslation;if(a){let E=L(f,Ha,[]);for(let S=0;S<a.length;S+=8)E.push({x:(a[S]-g)/h,y:1-(a[S+1]-b)/d,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/d});se(v=f,Tt,eT).call(v),se(w=f,Tt,ac).call(w),f.rotate(f.rotation)}else if(u){L(f,Cn,!0);let E=u[0],S={x:E[0]-g,y:d-(E[1]-b)},A=new ym(S,[0,0,h,d],1,l(f,ws)/2,!0,.001);for(let Z=0,ie=E.length;Z<ie;Z+=2)S.x=E[Z]-g,S.y=d-(E[Z+1]-b),A.add(S);let{id:B,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);se(y=f,Tt,Kw).call(y,{highlightOutlines:A.getOutlines(),highlightId:B,clipPathId:T}),se(_=f,Tt,ac).call(_),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,ws),quadPoints:se(this,Tt,i3).call(this),outlines:se(this,Tt,s3).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!se(this,Tt,l3).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};rp=new WeakMap,t0=new WeakMap,Ha=new WeakMap,df=new WeakMap,r0=new WeakMap,bi=new WeakMap,n0=new WeakMap,i0=new WeakMap,pf=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Cn=new WeakMap,np=new WeakMap,ip=new WeakMap,zn=new WeakMap,sp=new WeakMap,ws=new WeakMap,s0=new WeakMap,Tt=new WeakSet,eT=function(){let t=new mm(l(this,Ha),.001);L(this,zi,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,zi).box;let n=new mm(l(this,Ha),.0025,.001,this._uiManager.direction==="ltr");L(this,bi,n.getOutlines());let{firstPoint:i}=l(this,zi);L(this,np,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);let{lastPoint:o}=l(this,bi);L(this,ip,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Kw=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,g;if(L(this,zi,t),L(this,bi,t.getNewOutline(l(this,ws)/2+1.5,.0025)),n>=0)L(this,Wi,n),L(this,df,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),L(this,zn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},!0));else if(this.parent){let b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Wi),{bbox:se(d=qt,As,Ph).call(d,l(this,zi).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,zn),{bbox:se(g=qt,As,Ph).call(g,l(this,bi).box,b),path:{d:l(this,bi).toSVGPath()}})}let[s,a,u,c]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=u,this.height=c;break;case 90:{let[b,v]=this.parentDimensions;this.x=a,this.y=1-s,this.width=u*v/b,this.height=c*b/v;break}case 180:this.x=1-s,this.y=1-a,this.width=u,this.height=c;break;case 270:{let[b,v]=this.parentDimensions;this.x=1-a,this.y=s,this.width=u*v/b,this.height=c*b/v;break}}let{firstPoint:f}=t;L(this,np,[(f[0]-s)/u,(f[1]-a)/c]);let{lastPoint:h}=l(this,bi);L(this,ip,[(h[0]-s)/u,(h[1]-a)/c])},e3=function(t){let n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,t,qt._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},t3=function(t){let n=l(this,ws),i=o=>{L(this,ws,o),se(this,Tt,r3).call(this,o)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},r3=function(t){l(this,Cn)&&(se(this,Tt,Kw).call(this,{highlightOutlines:l(this,zi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},tT=function(){l(this,Wi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Wi)),L(this,Wi,null),this.parent.drawLayer.remove(l(this,zn)),L(this,zn,null))},ac=function(t=this.parent){l(this,Wi)===null&&({id:tn(this,Wi)._,clipPathId:tn(this,df)._}=t.drawLayer.draw({bbox:l(this,zi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Cn)},path:{d:l(this,zi).toSVGPath()}},!1,!0),L(this,zn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Cn)},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},l(this,Cn))),l(this,pf)&&(l(this,pf).style.clipPath=l(this,df)))},As=new WeakSet,Ph=function([t,n,i,o],s){switch(s){case 90:return[1-n-o,t,o,i];case 180:return[1-t-i,1-n-o,i,o];case 270:return[n,1-t-i,o,i]}return[t,n,i,o]},n3=function(t){qt._keyboardManager.exec(this,t)},Zw=function(t){if(!l(this,rp))return;let n=window.getSelection();t?n.setPosition(l(this,rp),l(this,t0)):n.setPosition(l(this,n0),l(this,i0))},Jw=function(){return l(this,Cn)?this.rotation:0},i3=function(){if(l(this,Cn))return null;let[t,n]=this.pageDimensions,[i,o]=this.pageTranslation,s=l(this,Ha),a=new Float32Array(s.length*8),u=0;for(let{x:c,y:f,width:h,height:d}of s){let g=c*t+i,b=(1-f)*n+o;a[u]=a[u+4]=g,a[u+1]=a[u+3]=b,a[u+2]=a[u+6]=g+h*t,a[u+5]=a[u+7]=b-d*n,u+=8}return a},s3=function(t){return l(this,zi).serialize(t,se(this,Tt,Jw).call(this))},o3=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},a3=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},l3=function(t){let{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,o)=>i!==n[o])},X(qt,As),Qe(qt,"_defaultColor",null),Qe(qt,"_defaultOpacity",1),Qe(qt,"_defaultThickness",12),Qe(qt,"_type","highlight"),Qe(qt,"_editorType",vt.HIGHLIGHT),Qe(qt,"_freeHighlightId",-1),Qe(qt,"_freeHighlight",null),Qe(qt,"_freeHighlightClipId","");Mv=qt,Fv=class{constructor(){X(this,gf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){l(this,gf)[e]=t}toSVGProperties(){let e=l(this,gf);return L(this,gf,Object.create(null)),{root:e}}reset(){L(this,gf,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){dr("Not implemented")}};gf=new WeakMap;Pt=class Pt extends mr{constructor(t){super(t);X(this,$t);X(this,qi,null);X(this,op);Qe(this,"_colorPicker",null);Qe(this,"_drawId",null);L(this,op,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(se(this,$t,rT).call(this,t),se(this,$t,Kg).call(this))}static _mergeSVGProperties(t,n){let i=new Set(Object.keys(t));for(let[o,s]of Object.entries(n))i.has(o)?Object.assign(t[o],s):t[o]=s;return t}static getDefaultDrawingOptions(t){dr("Not implemented")}static get typesMap(){dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(Pt,yn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){let i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){let t=[],n=this._defaultDrawingOptions;for(let[i,o]of this.typesMap)t.push([i,n[o]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:n}=this;for(let[i,o]of this.constructor.typesMap)t.push([i,n[o]]);return t}_updateProperty(t,n,i){let o=this._drawingOptions,s=o[n],a=u=>{o.updateProperty(n,u);let c=l(this,qi).updateProperty(n,u);c&&se(this,$t,Zg).call(this,c),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathResizingSVGProperties(se(this,$t,Qw).call(this)),{bbox:se(this,$t,Bh).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathResizedSVGProperties(se(this,$t,Qw).call(this)),{bbox:se(this,$t,Bh).call(this)}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:se(this,$t,Bh).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathTranslatedSVGProperties(se(this,$t,Qw).call(this),this.parentDimensions),{bbox:se(this,$t,Bh).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,op)&&(L(this,op,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){se(this,$t,iT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(se(this,$t,Kg).call(this),se(this,$t,Zg).call(this,l(this,qi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),se(this,$t,iT).call(this)):t&&(this._uiManager.addShouldRescale(this),se(this,$t,Kg).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:se(this,$t,Bh).call(this)},l(this,qi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&se(this,$t,Zg).call(this,l(this,qi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);let i=super.render();i.classList.add("draw");let o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,o,s){dr("Not implemented")}static startDrawing(t,n,i,o){let{target:s,offsetX:a,offsetY:u,pointerId:c,pointerType:f}=o;if(Mn.isInitializedAndDifferentPointerType(f))return;let{viewport:{rotation:h}}=t,{width:d,height:g}=s.getBoundingClientRect(),b=L(Pt,mf,new AbortController),v=t.combinedSignal(b);if(Mn.setPointer(f,c),window.addEventListener("pointerup",w=>{Mn.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:v}),window.addEventListener("pointercancel",w=>{Mn.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",w=>{Mn.isSamePointerType(w.pointerType)&&(Mn.initializeAndAddPointerId(w.pointerId),l(Pt,yn).isCancellable()&&(l(Pt,yn).removeLastElement(),l(Pt,yn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Zi,{signal:v}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),s.addEventListener("touchmove",w=>{Mn.isSameTimeStamp(w.timeStamp)&&Cr(w)},{signal:v}),t.toggleDrawing(),n._editorUndoBar?.hide(),l(Pt,yn)){t.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).startNew(a,u,d,g,h));return}n.updateUIForDefaultProperties(this),L(Pt,yn,this.createDrawerInstance(a,u,d,g,h)),L(Pt,yf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(Pt,yf).toSVGProperties(),l(Pt,yn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Mn.isSameTimeStamp(t.timeStamp),!l(Pt,yn))return;let{offsetX:n,offsetY:i,pointerId:o}=t;if(Mn.isSamePointerId(o)){if(Mn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).add(n,i)),Mn.setTimeStamp(t.timeStamp),Cr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,L(Pt,yn,null),L(Pt,yf,null),Mn.clearTimeStamp()),l(Pt,mf)&&(l(Pt,mf).abort(),L(Pt,mf,null),Mn.clearPointerIds())}static _endDraw(t){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let i=l(Pt,yn),o=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:Bt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Bt.DRAW_STEP),!l(Pt,yn).isEmpty()){let{pageDimensions:[i,o],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Pt,yn).getOutlines(i*s,o*s,s,this._INNER_MARGIN),drawingOptions:l(Pt,yf),mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,o,s,a){dr("Not implemented")}static async deserialize(t,n,i){var h,d;let{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}=n.viewport,c=this.deserializeDraw(a,u,o,s,this._INNER_MARGIN,t),f=await super.deserialize(t,n,i);return f.createDrawingOptions(t),se(h=f,$t,rT).call(h,{drawOutlines:c}),se(d=f,$t,Kg).call(d),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){let[n,i]=this.pageTranslation,[o,s]=this.pageDimensions;return l(this,qi).serialize([n,i,o,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};qi=new WeakMap,op=new WeakMap,yn=new WeakMap,mf=new WeakMap,yf=new WeakMap,$t=new WeakSet,rT=function({drawOutlines:t,drawId:n,drawingOptions:i}){L(this,qi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=se(this,$t,nT).call(this,t,this.parent),se(this,$t,Zg).call(this,t.box)},nT=function(t,n){let{id:i}=n.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},iT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=se(this,$t,nT).call(this,l(this,qi),t)}},u3=function([t,n,i,o]){let{parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[n,1-t,i*(a/s),o*(s/a)];case 180:return[1-t,1-n,i,o];case 270:return[1-n,t,i*(a/s),o*(s/a)];default:return[t,n,i,o]}},Qw=function(){let{x:t,y:n,width:i,height:o,parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[1-n,t,i*(s/a),o*(a/s)];case 180:return[1-t,1-n,i,o];case 270:return[n,1-t,i*(s/a),o*(a/s)];default:return[t,n,i,o]}},Zg=function(t){[this.x,this.y,this.width,this.height]=se(this,$t,u3).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Bh=function(){let{x:t,y:n,width:i,height:o,rotation:s,parentRotation:a,parentDimensions:[u,c]}=this;switch((s*4+a)/90){case 1:return[1-n-o,t,o,i];case 2:return[1-t-i,1-n-o,i,o];case 3:return[n,1-t-i,o,i];case 4:return[t,n-i*(u/c),o*(c/u),i*(u/c)];case 5:return[1-n,t,i*(u/c),o*(c/u)];case 6:return[1-t-o*(c/u),1-n,o*(c/u),i*(u/c)];case 7:return[n-i*(u/c),1-t-o*(c/u),i*(u/c),o*(c/u)];case 8:return[t-i,n-o,i,o];case 9:return[1-n,t-i,o,i];case 10:return[1-t,1-n,i,o];case 11:return[n-o,1-t,o,i];case 12:return[t-o*(c/u),n,o*(c/u),i*(u/c)];case 13:return[1-n-i*(u/c),t-o*(c/u),i*(u/c),o*(c/u)];case 14:return[1-t,1-n-i*(u/c),o*(c/u),i*(u/c)];case 15:return[n,1-t,i*(u/c),o*(c/u)];default:return[t,n,i,o]}},Qe(Pt,"_currentDrawId",-1),Qe(Pt,"_currentParent",null),X(Pt,yn,null),X(Pt,mf,null),X(Pt,yf,null),Qe(Pt,"_INNER_MARGIN",3);Uv=Pt,sT=class{constructor(e,t,n,i,o,s){X(this,lp);X(this,No,new Float64Array(6));X(this,bn);X(this,wn);X(this,bf);X(this,ap);X(this,Kn);X(this,Rn,"");X(this,vs,0);X(this,wf,new kf);X(this,vf);X(this,_f);L(this,vf,n),L(this,_f,i),L(this,bf,o),L(this,ap,s),[e,t]=se(this,lp,ev).call(this,e,t);let a=L(this,bn,[NaN,NaN,NaN,NaN,e,t]);L(this,Kn,[e,t]),L(this,wn,[{line:a,points:l(this,Kn)}]),l(this,No).set(a,0)}updateProperty(e,t){e==="stroke-width"&&L(this,ap,t)}isEmpty(){return!l(this,wn)||l(this,wn).length===0}isCancellable(){return l(this,Kn).length<=10}add(e,t){[e,t]=se(this,lp,ev).call(this,e,t);let[n,i,o,s]=l(this,No).subarray(2,6),a=e-o,u=t-s;return Math.hypot(l(this,vf)*a,l(this,_f)*u)<=2?null:(l(this,Kn).push(e,t),isNaN(n)?(l(this,No).set([o,s,e,t],2),l(this,bn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,No)[0])&&l(this,bn).splice(6,6),l(this,No).set([n,i,o,s,e,t],0),l(this,bn).push(...lt.createBezierPoints(n,i,o,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let n=this.add(e,t);return n||(l(this,Kn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){L(this,vf,n),L(this,_f,i),L(this,bf,o),[e,t]=se(this,lp,ev).call(this,e,t);let s=L(this,bn,[NaN,NaN,NaN,NaN,e,t]);L(this,Kn,[e,t]);let a=l(this,wn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,wn).push({line:s,points:l(this,Kn)}),l(this,No).set(s,0),L(this,vs,0),this.toSVGPath(),null}getLastElement(){return l(this,wn).at(-1)}setLastElement(e){return l(this,wn)?(l(this,wn).push(e),L(this,bn,e.line),L(this,Kn,e.points),L(this,vs,0),{path:{d:this.toSVGPath()}}):l(this,wf).setLastElement(e)}removeLastElement(){if(!l(this,wn))return l(this,wf).removeLastElement();l(this,wn).pop(),L(this,Rn,"");for(let e=0,t=l(this,wn).length;e<t;e++){let{line:n,points:i}=l(this,wn)[e];L(this,bn,n),L(this,Kn,i),L(this,vs,0),this.toSVGPath()}return{path:{d:l(this,Rn)}}}toSVGPath(){let e=lt.svgRound(l(this,bn)[4]),t=lt.svgRound(l(this,bn)[5]);if(l(this,Kn).length===2)return L(this,Rn,`${l(this,Rn)} M ${e} ${t} Z`),l(this,Rn);if(l(this,Kn).length<=6){let i=l(this,Rn).lastIndexOf("M");L(this,Rn,`${l(this,Rn).slice(0,i)} M ${e} ${t}`),L(this,vs,6)}if(l(this,Kn).length===4){let i=lt.svgRound(l(this,bn)[10]),o=lt.svgRound(l(this,bn)[11]);return L(this,Rn,`${l(this,Rn)} L ${i} ${o}`),L(this,vs,12),l(this,Rn)}let n=[];l(this,vs)===0&&(n.push(`M ${e} ${t}`),L(this,vs,6));for(let i=l(this,vs),o=l(this,bn).length;i<o;i+=6){let[s,a,u,c,f,h]=l(this,bn).slice(i,i+6).map(lt.svgRound);n.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}return L(this,Rn,l(this,Rn)+n.join(" ")),L(this,vs,l(this,bn).length),l(this,Rn)}getOutlines(e,t,n,i){let o=l(this,wn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,wf).build(l(this,wn),e,t,n,l(this,bf),l(this,ap),i),L(this,No,null),L(this,bn,null),L(this,wn,null),L(this,Rn,null),l(this,wf)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}};No=new WeakMap,bn=new WeakMap,wn=new WeakMap,bf=new WeakMap,ap=new WeakMap,Kn=new WeakMap,Rn=new WeakMap,vs=new WeakMap,wf=new WeakMap,vf=new WeakMap,_f=new WeakMap,lp=new WeakSet,ev=function(e,t){return lt._normalizePoint(e,t,l(this,vf),l(this,_f),l(this,bf))};kf=class extends lt{constructor(){super(...arguments);X(this,In);X(this,Zn);X(this,o0,0);X(this,a0);X(this,Hi);X(this,ko);X(this,Lo);X(this,up);X(this,cp);X(this,Ef)}build(t,n,i,o,s,a,u){L(this,ko,n),L(this,Lo,i),L(this,up,o),L(this,cp,s),L(this,Ef,a),L(this,a0,u??0),L(this,Hi,t),se(this,In,f3).call(this)}get thickness(){return l(this,Ef)}setLastElement(t){return l(this,Hi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Hi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:n}of l(this,Hi)){if(t.push(`M${lt.svgRound(n[4])} ${lt.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${lt.svgRound(n[10])} ${lt.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){let[s,a,u,c,f,h]=n.subarray(i,i+6).map(lt.svgRound);t.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}}return t.join("")}serialize([t,n,i,o],s){let a=[],u=[],[c,f,h,d]=se(this,In,c3).call(this),g,b,v,w,y,_,E,S,A;switch(l(this,cp)){case 0:A=lt._rescale,g=t,b=n+o,v=i,w=-o,y=t+c*i,_=n+(1-f-d)*o,E=t+(c+h)*i,S=n+(1-f)*o;break;case 90:A=lt._rescaleAndSwap,g=t,b=n,v=i,w=o,y=t+f*i,_=n+c*o,E=t+(f+d)*i,S=n+(c+h)*o;break;case 180:A=lt._rescale,g=t+i,b=n,v=-i,w=o,y=t+(1-c-h)*i,_=n+f*o,E=t+(1-c)*i,S=n+(f+d)*o;break;case 270:A=lt._rescaleAndSwap,g=t+i,b=n+o,v=-i,w=-o,y=t+(1-f-d)*i,_=n+(1-c-h)*o,E=t+(1-f)*i,S=n+(1-c)*o;break}for(let{line:B,points:T}of l(this,Hi))a.push(A(B,g,b,v,w,s?new Array(B.length):null)),u.push(A(T,g,b,v,w,s?new Array(T.length):null));return{lines:a,points:u,rect:[y,_,E,S]}}static deserialize(t,n,i,o,s,{paths:{lines:a,points:u},rotation:c,thickness:f}){let h=[],d,g,b,v,w;switch(c){case 0:w=lt._rescale,d=-t/i,g=n/o+1,b=1/i,v=-1/o;break;case 90:w=lt._rescaleAndSwap,d=-n/o,g=-t/i,b=1/o,v=1/i;break;case 180:w=lt._rescale,d=t/i+1,g=-n/o,b=-1/i,v=1/o;break;case 270:w=lt._rescaleAndSwap,d=n/o+1,g=t/i+1,b=-1/o,v=-1/i;break}if(!a){a=[];for(let _ of u){let E=_.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}let S=new Float32Array(3*(E-2));a.push(S);let[A,B,T,Z]=_.subarray(0,4);S.set([NaN,NaN,NaN,NaN,A,B],0);for(let ie=4;ie<E;ie+=2){let G=_[ie],ae=_[ie+1];S.set(lt.createBezierPoints(A,B,T,Z,G,ae),(ie-2)*3),[A,B,T,Z]=[T,Z,G,ae]}}}for(let _=0,E=a.length;_<E;_++)h.push({line:w(a[_].map(S=>S??NaN),d,g,b,v),points:w(u[_].map(S=>S??NaN),d,g,b,v)});let y=new this.prototype.constructor;return y.build(h,i,o,1,c,f,s),y}get box(){return l(this,Zn)}updateProperty(t,n){return t==="stroke-width"?se(this,In,h3).call(this,n):null}updateParentDimensions([t,n],i){let[o,s]=se(this,In,pa).call(this);L(this,ko,t),L(this,Lo,n),L(this,up,i);let[a,u]=se(this,In,pa).call(this),c=a-o,f=u-s,h=l(this,Zn);return h[0]-=c,h[1]-=f,h[2]+=2*c,h[3]+=2*f,h}updateRotation(t){return L(this,o0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Zn).map(lt.svgRound).join(" ")}get defaultProperties(){let[t,n]=l(this,Zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(n)}`}}}get rotationTransform(){let[,,t,n]=l(this,Zn),i=0,o=0,s=0,a=0,u=0,c=0;switch(l(this,o0)){case 90:o=n/t,s=-t/n,u=t;break;case 180:i=-1,a=-1,u=t,c=n;break;case 270:o=-n/t,s=t/n,c=n;break;default:return""}return`matrix(${i} ${o} ${s} ${a} ${lt.svgRound(u)} ${lt.svgRound(c)})`}getPathResizingSVGProperties([t,n,i,o]){let[s,a]=se(this,In,pa).call(this),[u,c,f,h]=l(this,Zn);if(Math.abs(f-s)<=lt.PRECISION||Math.abs(h-a)<=lt.PRECISION){let w=t+i/2-(u+f/2),y=n+o/2-(c+h/2);return{path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${y})`}}}let d=(i-2*s)/(f-2*s),g=(o-2*a)/(h-2*a),b=f/i,v=h/o;return{path:{"transform-origin":`${lt.svgRound(u)} ${lt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${b} ${v}) translate(${lt.svgRound(s)} ${lt.svgRound(a)}) scale(${d} ${g}) translate(${lt.svgRound(-s)} ${lt.svgRound(-a)})`}}}getPathResizedSVGProperties([t,n,i,o]){let[s,a]=se(this,In,pa).call(this),u=l(this,Zn),[c,f,h,d]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=o,Math.abs(h-s)<=lt.PRECISION||Math.abs(d-a)<=lt.PRECISION){let y=t+i/2-(c+h/2),_=n+o/2-(f+d/2);for(let{line:E,points:S}of l(this,Hi))lt._translate(E,y,_,E),lt._translate(S,y,_,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let g=(i-2*s)/(h-2*s),b=(o-2*a)/(d-2*a),v=-g*(c+s)+t+s,w=-b*(f+a)+n+a;if(g!==1||b!==1||v!==0||w!==0)for(let{line:y,points:_}of l(this,Hi))lt._rescale(y,v,w,g,b,y),lt._rescale(_,v,w,g,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){let[o,s]=i,a=l(this,Zn),u=t-a[0],c=n-a[1];if(l(this,ko)===o&&l(this,Lo)===s)for(let{line:f,points:h}of l(this,Hi))lt._translate(f,u,c,f),lt._translate(h,u,c,h);else{let f=l(this,ko)/o,h=l(this,Lo)/s;L(this,ko,o),L(this,Lo,s);for(let{line:d,points:g}of l(this,Hi))lt._rescale(d,u,c,f,h,d),lt._rescale(g,u,c,f,h,g);a[2]*=f,a[3]*=h}return a[0]=t,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(t)} ${lt.svgRound(n)}`}}}get defaultSVGProperties(){let t=l(this,Zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(t[0])} ${lt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Zn=new WeakMap,o0=new WeakMap,a0=new WeakMap,Hi=new WeakMap,ko=new WeakMap,Lo=new WeakMap,up=new WeakMap,cp=new WeakMap,Ef=new WeakMap,In=new WeakSet,pa=function(t=l(this,Ef)){let n=l(this,a0)+t/2*l(this,up);return l(this,cp)%180===0?[n/l(this,ko),n/l(this,Lo)]:[n/l(this,Lo),n/l(this,ko)]},c3=function(){let[t,n,i,o]=l(this,Zn),[s,a]=se(this,In,pa).call(this,0);return[t+s,n+a,i-2*s,o-2*a]},f3=function(){let t=L(this,Zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:o}of l(this,Hi)){if(o.length<=12){for(let u=4,c=o.length;u<c;u+=6)st.pointBoundingBox(o[u],o[u+1],t);continue}let s=o[4],a=o[5];for(let u=6,c=o.length;u<c;u+=6){let[f,h,d,g,b,v]=o.subarray(u,u+6);st.bezierBoundingBox(s,a,f,h,d,g,b,v,t),s=b,a=v}}let[n,i]=se(this,In,pa).call(this);t[0]=Wn(t[0]-n,0,1),t[1]=Wn(t[1]-i,0,1),t[2]=Wn(t[2]+n,0,1),t[3]=Wn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},h3=function(t){let[n,i]=se(this,In,pa).call(this);L(this,Ef,t);let[o,s]=se(this,In,pa).call(this),[a,u]=[o-n,s-i],c=l(this,Zn);return c[0]-=a,c[1]-=u,c[2]+=2*a,c[3]+=2*u,c};jv=class r extends Fv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:mr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Wh=class Wh extends Uv{constructor(t){super({...t,name:"inkEditor"});X(this,o_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new jv(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Bt.INK_THICKNESS,"stroke-width"],[Bt.INK_COLOR,"stroke"],[Bt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,o,s){return new sT(t,n,i,o,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,o,s,a){return kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=null;if(t instanceof gm){let{data:{inkLists:a,rect:u,rotation:c,id:f,color:h,opacity:d,borderStyle:{rawWidth:g},popupRef:b,richText:v,contentsObj:w,creationDate:y,modificationDate:_},parent:{page:{pageNumber:E}}}=t;o=t={annotationType:vt.INK,color:Array.from(h),thickness:g,opacity:d,paths:{points:a},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:c,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:v,comment:w?.str||null,creationDate:y,modificationDate:_}}let s=await super.deserialize(t,n,i);return s._initialData=o,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Cv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Wh.getDefaultDrawingOptions({stroke:st.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,u=Object.assign(super.serialize(t),{color:mr._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!se(this,o_,d3).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};o_=new WeakSet,d3=function(t){let{color:n,thickness:i,opacity:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,u)=>a!==n[u])||t.thickness!==i||t.opacity!==o||t.pageIndex!==s},Qe(Wh,"_type","ink"),Qe(Wh,"_editorType",vt.INK),Qe(Wh,"_defaultDrawingOptions",null);oT=Wh,bm=class extends kf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}},Sw=8,kg=3,Es=class{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},o,s,a,u){let c=new OffscreenCanvas(1,1),f=c.getContext("2d",{alpha:!1}),h=200,d=f.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:b,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:y,fontBoundingBoxDescent:_,width:E}=f.measureText(e),S=1.5,A=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||0,E)*S),B=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||h,Math.abs(y)+Math.abs(_)||h)*S);c=new OffscreenCanvas(A,B),f=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=d,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,A,B),f.fillStyle="black",f.fillText(e,A*(S-1)/2,B*(3-S)/2);let T=se(this,Vt,uT).call(this,f.getImageData(0,0,A,B).data),Z=se(this,Vt,b3).call(this,T),ie=se(this,Vt,cT).call(this,Z),G=se(this,Vt,lT).call(this,T,A,B,ie);return this.processDrawnLines({lines:{curves:G,width:A,height:B},pageWidth:o,pageHeight:s,rotation:a,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,o){let[s,a,u]=se(this,Vt,w3).call(this,e),[c,f]=se(this,Vt,y3).call(this,s,a,u,Math.hypot(a,u)*l(this,Af).sigmaSFactor,l(this,Af).sigmaR,l(this,Af).kernelSize),h=se(this,Vt,cT).call(this,f),d=se(this,Vt,lT).call(this,c,a,u,h);return this.processDrawnLines({lines:{curves:d,width:a,height:u},pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:s,areContours:a}){i%180!==0&&([t,n]=[n,t]);let{curves:u,width:c,height:f}=e,h=e.thickness??0,d=[],g=Math.min(t/c,n/f),b=g/t,v=g/n,w=[];for(let{points:_}of u){let E=s?se(this,Vt,m3).call(this,_):_;if(!E)continue;w.push(E);let S=E.length,A=new Float32Array(S),B=new Float32Array(3*(S===2?2:S-2));if(d.push({line:B,points:A}),S===2){A[0]=E[0]*b,A[1]=E[1]*v,B.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[T,Z,ie,G]=E;T*=b,Z*=v,ie*=b,G*=v,A.set([T,Z,ie,G],0),B.set([NaN,NaN,NaN,NaN,T,Z],0);for(let ae=4;ae<S;ae+=2){let U=A[ae]=E[ae]*b,V=A[ae+1]=E[ae+1]*v;B.set(lt.createBezierPoints(T,Z,ie,G,U,V),(ae-2)*3),[T,Z,ie,G]=[ie,G,U,V]}}if(d.length===0)return null;let y=a?new bm:new kf;return y.build(d,t,n,1,i,a?0:h,o),{outline:y,newCurves:w,areContours:a,thickness:h,width:c,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:o}){let s=1/0,a=-1/0,u=0;for(let E of e){u+=E.length;for(let S=2,A=E.length;S<A;S++){let B=E[S]-E[S-2];s=Math.min(s,B),a=Math.max(a,B)}}let c;s>=-128&&a<=127?c=Int8Array:s>=-32768&&a<=32767?c=Int16Array:c=Int32Array;let f=e.length,h=Sw+kg*f,d=new Uint32Array(h),g=0;d[g++]=h*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*c.BYTES_PER_ELEMENT,d[g++]=0,d[g++]=i,d[g++]=o,d[g++]=t?0:1,d[g++]=Math.max(0,Math.floor(n??0)),d[g++]=f,d[g++]=c.BYTES_PER_ELEMENT;for(let E of e)d[g++]=E.length-2,d[g++]=E[0],d[g++]=E[1];let b=new CompressionStream("deflate-raw"),v=b.writable.getWriter();await v.ready,v.write(d);let w=c.prototype.constructor;for(let E of e){let S=new w(E.length-2);for(let A=2,B=E.length;A<B;A++)S[A-2]=E[A]-E[A-2];v.write(S)}v.close();let y=await new Response(b.readable).arrayBuffer(),_=new Uint8Array(y);return CM(_)}static async decompressSignature(e){try{let t=QG(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let s=null,a=0;for await(let E of n)s||(s=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),s.set(E,a),a+=E.length;let u=new Uint32Array(s.buffer,0,s.length>>2),c=u[1];if(c!==0)throw new Error(`Invalid version: ${c}`);let f=u[2],h=u[3],d=u[4]===0,g=u[5],b=u[6],v=u[7],w=[],y=(Sw+kg*b)*Uint32Array.BYTES_PER_ELEMENT,_;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,y);break}a=0;for(let E=0;E<b;E++){let S=u[kg*E+Sw],A=new Float32Array(S+2);w.push(A);for(let B=0;B<kg-1;B++)A[B]=u[kg*E+Sw+B+1];for(let B=0;B<S;B++)A[B+2]=A[B]+_[a++]}return{areContours:d,thickness:g,outlines:w,width:f,height:h}}catch(t){return _t(`decompressSignature: ${t}`),null}}};Af=new WeakMap,Vt=new WeakSet,aT=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},qs=new WeakMap,p3=function(e,t,n,i,o,s,a){let u=se(this,Vt,aT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(-c+u-a+16)%8,h=l(this,qs)[2*f],d=l(this,qs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},g3=function(e,t,n,i,o,s,a){let u=se(this,Vt,aT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(c+u+a+16)%8,h=l(this,qs)[2*f],d=l(this,qs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},lT=function(e,t,n,i){let o=e.length,s=new Int32Array(o);for(let f=0;f<o;f++)s[f]=e[f]<=i?1:0;for(let f=1;f<n-1;f++)s[f*t]=s[f*t+t-1]=0;for(let f=0;f<t;f++)s[f]=s[t*n-1-f]=0;let a=1,u,c=[];for(let f=1;f<n-1;f++){u=1;for(let h=1;h<t-1;h++){let d=f*t+h,g=s[d];if(g===0)continue;let b=f,v=h;if(g===1&&s[d-1]===0)a+=1,v-=1;else if(g>=1&&s[d+1]===0)a+=1,v+=1,g>1&&(u=g);else{g!==1&&(u=Math.abs(g));continue}let w=[h,f],y=v===h+1,_={isHole:y,points:w,id:a,parent:0};c.push(_);let E;for(let ae of c)if(ae.id===u){E=ae;break}E?E.isHole?_.parent=y?E.parent:u:_.parent=y?u:E.parent:_.parent=y?u:0;let S=se(this,Vt,p3).call(this,s,t,f,h,b,v,0);if(S===-1){s[d]=-a,s[d]!==1&&(u=Math.abs(s[d]));continue}let A=l(this,qs)[2*S],B=l(this,qs)[2*S+1],T=f+A,Z=h+B;b=T,v=Z;let ie=f,G=h;for(;;){let ae=se(this,Vt,g3).call(this,s,t,ie,G,b,v,1);A=l(this,qs)[2*ae],B=l(this,qs)[2*ae+1];let U=ie+A,V=G+B;w.push(V,U);let ue=ie*t+G;if(s[ue+1]===0?s[ue]=-a:s[ue]===1&&(s[ue]=a),U===f&&V===h&&ie===T&&G===Z){s[d]!==1&&(u=Math.abs(s[d]));break}else b=ie,v=G,ie=U,G=V}}}return c},tv=function(e,t,n,i){if(n-t<=4){for(let T=t;T<n-2;T+=2)i.push(e[T],e[T+1]);return}let o=e[t],s=e[t+1],a=e[n-4]-o,u=e[n-3]-s,c=Math.hypot(a,u),f=a/c,h=u/c,d=f*s-h*o,g=u/a,b=1/c,v=Math.atan(g),w=Math.cos(v),y=Math.sin(v),_=b*(Math.abs(w)+Math.abs(y)),E=b*(1-_+_**2),S=Math.max(Math.atan(Math.abs(y+w)*E),Math.atan(Math.abs(y-w)*E)),A=0,B=t;for(let T=t+2;T<n-2;T+=2){let Z=Math.abs(d-f*e[T+1]+h*e[T]);Z>A&&(B=T,A=Z)}A>(c*S)**2?(se(this,Vt,tv).call(this,e,t,B+2,i),se(this,Vt,tv).call(this,e,B,n,i)):i.push(o,s)},m3=function(e){let t=[],n=e.length;return se(this,Vt,tv).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},y3=function(e,t,n,i,o,s){let a=new Float32Array(s**2),u=-2*i**2,c=s>>1;for(let v=0;v<s;v++){let w=(v-c)**2;for(let y=0;y<s;y++)a[v*s+y]=Math.exp((w+(y-c)**2)/u)}let f=new Float32Array(256),h=-2*o**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/h);let d=e.length,g=new Uint8Array(d),b=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){let y=v*t+w,_=e[y],E=0,S=0;for(let B=0;B<s;B++){let T=v+B-c;if(!(T<0||T>=n))for(let Z=0;Z<s;Z++){let ie=w+Z-c;if(ie<0||ie>=t)continue;let G=e[T*t+ie],ae=a[B*s+Z]*f[Math.abs(G-_)];E+=G*ae,S+=ae}}let A=g[y]=Math.round(E/S);b[A]++}return[g,b]},b3=function(e){let t=new Uint32Array(256);for(let n of e)t[n]++;return t},uT=function(e){let t=e.length,n=new Uint8ClampedArray(t>>2),i=-1/0,o=1/0;for(let a=0,u=n.length;a<u;a++){let c=n[a]=e[a<<2];i=Math.max(i,c),o=Math.min(o,c)}let s=255/(i-o);for(let a=0,u=n.length;a<u;a++)n[a]=(n[a]-o)*s;return n},cT=function(e){let t,n=-1/0,i=-1/0,o=e.findIndex(u=>u!==0),s=o,a=o;for(t=o;t<256;t++){let u=e[t];u>n&&(t-s>i&&(i=t-s,a=t-1),n=u,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},w3=function(e){let t=e,{width:n,height:i}=e,{maxDim:o}=l(this,Af),s=n,a=i;if(n>o||i>o){let d=n,g=i,b=Math.log2(Math.max(n,i)/o),v=Math.floor(b);b=b===v?v-1:v;for(let y=0;y<b;y++){s=Math.ceil(d/2),a=Math.ceil(g/2);let _=new OffscreenCanvas(s,a);_.getContext("2d").drawImage(e,0,0,d,g,0,0,s,a),d=s,g=a,e!==t&&e.close(),e=_.transferToImageBitmap()}let w=Math.min(o/s,o/a);s=Math.round(s*w),a=Math.round(a*w)}let c=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,s,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,s,a);let f=c.getImageData(0,0,s,a).data;return[se(this,Vt,uT).call(this,f),s,a]},X(Es,Vt),X(Es,Af,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),X(Es,qs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));fT=class r extends Fv{constructor(){super(),super.updateProperties({fill:mr._defaultLineColor,"stroke-width":0})}clone(){let e=new r;return e.updateAll(this),e}},hT=class r extends jv{constructor(e){super(e),super.updateProperties({stroke:mr._defaultLineColor,"stroke-width":1})}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Ci=class Ci extends Uv{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});X(this,cu,!1);X(this,Po,null);X(this,fu,null);X(this,xf,null);this._willKeepAspectRatio=!0,L(this,fu,t.signatureData||null),L(this,Po,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new fT,this._defaultDrawnSignatureOptions=new hT(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Po)}}static computeTelemetryFinalData(t){let n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n,{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,fu)){let{lines:o,mustSmooth:s,areContours:a,description:u,uuid:c,heightInPage:f}=l(this,fu),{rawDims:{pageWidth:h,pageHeight:d},rotation:g}=this.parent.viewport,b=Es.processDrawnLines({lines:o,pageWidth:h,pageHeight:d,rotation:g,innerMargin:Ci._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(b,f,u,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Po)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){L(this,xf,t),this.addEditToolbar()}getUuid(){return l(this,xf)}get description(){return l(this,Po)}set description(t){L(this,Po,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:n,thickness:i,width:o,height:s}=l(this,fu),a=Math.max(o,s),u=Es.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:o,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,o){let{x:s,y:a}=this,{outline:u}=L(this,fu,t);L(this,cu,u instanceof bm),this.description=i;let c;l(this,cu)?c=Ci.getDefaultDrawingOptions():(c=Ci._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:c});let[,f]=this.pageDimensions,h=n/f;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Es.process(t,n,i,o,Ci._INNER_MARGIN)}getFromText(t,n){let{rawDims:{pageWidth:i,pageHeight:o},rotation:s}=this.parent.viewport;return Es.extractContoursFromText(t,n,i,o,s,Ci._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Es.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:o,innerMargin:Ci._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ci.getDefaultDrawingOptions():(this._drawingOptions=Ci._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,cu),color:[0,0,0],thickness:l(this,cu)?0:o});return this.addComment(s),t?(s.paths={lines:n,points:i},s.uuid=l(this,xf),s.isCopy=!0):s.lines=n,l(this,Po)&&(s.accessibilityData={type:"Figure",alt:l(this,Po)}),s}static deserializeDraw(t,n,i,o,s,a){return a.areContours?bm.deserialize(t,n,i,o,s,a):kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=await super.deserialize(t,n,i);return L(o,cu,t.areContours),o.description=t.accessibilityData?.alt||"",L(o,xf,t.uuid),o}};cu=new WeakMap,Po=new WeakMap,fu=new WeakMap,xf=new WeakMap,Qe(Ci,"_type","signature"),Qe(Ci,"_editorType",vt.SIGNATURE),Qe(Ci,"_defaultDrawingOptions",null);dT=Ci,Jg=class extends mr{constructor(t){super({...t,name:"stampEditor"});X(this,zt);X(this,Ar,null);X(this,vn,null);X(this,hu,null);X(this,Ga,null);X(this,du,null);X(this,fp,"");X(this,Va,null);X(this,Sf,!1);X(this,Bo,null);X(this,Gi,!1);X(this,hp,!1);L(this,Ga,t.bitmapUrl),L(this,du,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){mr.initialize(t,n)}static isHandlingMimeForPasting(t){return uv.includes(t)}static paste(t,n){n.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:o,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:o,width:s,height:a,channels:o.length/(s*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");let c=u.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){l(this,vn)&&(L(this,Ar,null),this._uiManager.imageManager.deleteId(l(this,vn)),l(this,Va)?.remove(),L(this,Va,null),l(this,Bo)&&(clearTimeout(l(this,Bo)),L(this,Bo,null))),super.remove()}rebuild(){if(!this.parent){l(this,vn)&&se(this,zt,rv).call(this);return}super.rebuild(),this.div!==null&&(l(this,vn)&&l(this,Va)===null&&se(this,zt,rv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,hu)||l(this,Ar)||l(this,Ga)||l(this,du)||l(this,vn)||l(this,Sf))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Sf)||(l(this,Ar)?se(this,zt,nv).call(this):se(this,zt,rv).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){let{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(L(this,vn,i),o&&L(this,Ar,o),L(this,Sf,!1),se(this,zt,nv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Bo)!==null&&clearTimeout(l(this,Bo)),L(this,Bo,setTimeout(()=>{L(this,Bo,null),se(this,zt,pT).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);let{width:o,height:s}=l(this,Ar),a=new Mo,u=l(this,Ar),c=o,f=s,h=null;if(n){if(o>n||s>n){let T=Math.min(n/o,n/s);c=Math.floor(o*T),f=Math.floor(s*T)}h=document.createElement("canvas");let g=h.width=Math.ceil(c*a.sx),b=h.height=Math.ceil(f*a.sy);l(this,Gi)||(u=se(this,zt,iv).call(this,g,b));let v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":YA.isDarkMode&&(w="#8f8f9d",y="#42414d");let _=15,E=_*a.sx,S=_*a.sy,A=new OffscreenCanvas(E*2,S*2),B=A.getContext("2d");B.fillStyle=w,B.fillRect(0,0,E*2,S*2),B.fillStyle=y,B.fillRect(0,0,E,S),B.fillRect(E,S,E,S),v.fillStyle=v.createPattern(A,"repeat"),v.fillRect(0,0,g,b),v.drawImage(u,0,0,u.width,u.height,0,0,g,b)}let d=null;if(i){let g,b;if(a.symmetric&&u.width<t&&u.height<t)g=u.width,b=u.height;else if(u=l(this,Ar),o>t||s>t){let y=Math.min(t/o,t/s);g=Math.floor(o*y),b=Math.floor(s*y),l(this,Gi)||(u=se(this,zt,iv).call(this,g,b))}let w=new OffscreenCanvas(g,b).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,g,b),d={width:g,height:b,data:w.getImageData(0,0,g,b).data}}return{canvas:h,width:c,height:f,imageData:d}}static async deserialize(t,n,i){let o=null,s=!1;if(t instanceof kv){let{data:{rect:w,rotation:y,id:_,structParent:E,popupRef:S,richText:A,contentsObj:B,creationDate:T,modificationDate:Z},container:ie,parent:{page:{pageNumber:G}},canvas:ae}=t,U,V;ae?(delete t.canvas,{id:U,bitmap:V}=i.imageManager.getFromCanvas(ie.id,ae),ae.remove()):(s=!0,t._hasNoCanvas=!0);let ue=(await n._structTree.getAriaAttributes(`${Mh}${_}`))?.get("aria-label")||"";o=t={annotationType:vt.STAMP,bitmapId:U,bitmap:V,pageIndex:G-1,rect:w.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:ue},isSvg:!1,structParent:E,popupRef:S,richText:A,comment:B?.str||null,creationDate:T,modificationDate:Z}}let a=await super.deserialize(t,n,i),{rect:u,bitmap:c,bitmapUrl:f,bitmapId:h,isSvg:d,accessibilityData:g}=t;s?(i.addMissingCanvas(t.id,a),L(a,Sf,!0)):h&&i.imageManager.isValidId(h)?(L(a,vn,h),c&&L(a,Ar,c)):L(a,Ga,f),L(a,Gi,d);let[b,v]=a.pageDimensions;return a.width=(u[2]-u[0])/b,a.height=(u[3]-u[1])/v,g&&(a.altTextData=g),a._initialData=o,t.comment&&a.setCommentData(t),L(a,hp,!!o),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(t),{bitmapId:l(this,vn),isSvg:l(this,Gi)});if(this.addComment(i),t)return i.bitmapUrl=se(this,zt,sv).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:o,altText:s}=this.serializeAltText(!1);if(!o&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let u=se(this,zt,v3).call(this,i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);let a=l(this,Gi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,vn)))n.stamps.set(l(this,vn),{area:a,serialized:i}),i.bitmap=se(this,zt,sv).call(this,!1);else if(l(this,Gi)){let u=n.stamps.get(l(this,vn));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=se(this,zt,sv).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}};Ar=new WeakMap,vn=new WeakMap,hu=new WeakMap,Ga=new WeakMap,du=new WeakMap,fp=new WeakMap,Va=new WeakMap,Sf=new WeakMap,Bo=new WeakMap,Gi=new WeakMap,hp=new WeakMap,zt=new WeakSet,Qg=function(t,n=!1){if(!t){this.remove();return}L(this,Ar,t.bitmap),n||(L(this,vn,t.id),L(this,Gi,t.isSvg)),t.file&&L(this,fp,t.file.name),se(this,zt,nv).call(this)},em=function(){if(L(this,hu,null),this._uiManager.enableWaiting(!1),!!l(this,Va)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rv=function(){if(l(this,vn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,vn)).then(i=>se(this,zt,Qg).call(this,i,!0)).finally(()=>se(this,zt,em).call(this));return}if(l(this,Ga)){let i=l(this,Ga);L(this,Ga,null),this._uiManager.enableWaiting(!0),L(this,hu,this._uiManager.imageManager.getFromUrl(i).then(o=>se(this,zt,Qg).call(this,o)).finally(()=>se(this,zt,em).call(this)));return}if(l(this,du)){let i=l(this,du);L(this,du,null),this._uiManager.enableWaiting(!0),L(this,hu,this._uiManager.imageManager.getFromFile(i).then(o=>se(this,zt,Qg).call(this,o)).finally(()=>se(this,zt,em).call(this)));return}let t=document.createElement("input");t.type="file",t.accept=uv.join(",");let n=this._uiManager._signal;L(this,hu,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),se(this,zt,Qg).call(this,o)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>se(this,zt,em).call(this))),t.click()},nv=function(){let{div:t}=this,{width:n,height:i}=l(this,Ar),[o,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*o,i=this.height*s;else if(n>a*o||i>a*s){let c=Math.min(a*o/n,a*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);let u=L(this,Va,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/o,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),se(this,zt,pT).call(this),l(this,hp)||(this.parent.addUndoableEditor(this),L(this,hp,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fp)&&this.div.setAttribute("aria-description",l(this,fp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},iv=function(t,n){let{width:i,height:o}=l(this,Ar),s=i,a=o,u=l(this,Ar);for(;s>2*t||a>2*n;){let c=s,f=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(u,0,0,c,f,0,0,s,a),u=h.transferToImageBitmap()}return u},pT=function(){let[t,n]=this.parentDimensions,{width:i,height:o}=this,s=new Mo,a=Math.ceil(i*t*s.sx),u=Math.ceil(o*n*s.sy),c=l(this,Va);if(!c||c.width===a&&c.height===u)return;c.width=a,c.height=u;let f=l(this,Gi)?l(this,Ar):se(this,zt,iv).call(this,a,u),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(f,0,0,f.width,f.height,0,0,a,u)},sv=function(t){if(t){if(l(this,Gi)){let o=this._uiManager.imageManager.getSvgUrl(l(this,vn));if(o)return o}let n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Ar),n.getContext("2d").drawImage(l(this,Ar),0,0),n.toDataURL()}if(l(this,Gi)){let[n,i]=this.pageDimensions,o=Math.round(this.width*n*tl.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*tl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,s);return a.getContext("2d").drawImage(l(this,Ar),0,0,l(this,Ar).width,l(this,Ar).height,0,0,o,s),a.transferToImageBitmap()}return structuredClone(l(this,Ar))},v3=function(t){let{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=t.pageIndex===n,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&s,isSameAltText:s}},Qe(Jg,"_type","stamp"),Qe(Jg,"_editorType",vt.STAMP);Ls=class Ls{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:s,drawLayer:a,textLayer:u,viewport:c,l10n:f}){X(this,hr);X(this,Tf);X(this,dp,!1);X(this,pu,null);X(this,gu,null);X(this,Ya,null);X(this,wi,new Map);X(this,mu,!1);X(this,pp,!1);X(this,gp,!1);X(this,Hs,null);X(this,Xa,null);X(this,_n,null);X(this,Ka,null);X(this,yu,null);X(this,mp,-1);X(this,ft);let h=[...l(Ls,bu).values()];if(!Ls._initialized){Ls._initialized=!0;for(let d of h)d.initialize(f,e)}e.registerEditorTypes(h),L(this,ft,e),this.pageIndex=t,this.div=n,L(this,Tf,o),L(this,pu,s),this.viewport=c,L(this,_n,u),this.drawLayer=a,this._structTree=i,l(this,ft).addLayer(this)}get isEmpty(){return l(this,wi).size===0}get isInvisible(){return this.isEmpty&&l(this,ft).getMode()===vt.NONE}updateToolbar(e){l(this,ft).updateToolbar(e)}updateMode(e=l(this,ft).getMode()){switch(se(this,hr,ov).call(this),e){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===vt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(let n of l(Ls,bu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===l(this,_n)?.div}setEditingState(e){l(this,ft).setEditingState(e)}addCommands(e){l(this,ft).addCommands(e)}cleanUndoStack(e){l(this,ft).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){l(this,pu)?.togglePointerEvents(e)}async enable(){L(this,gp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),l(this,yu)?.abort(),L(this,yu,null);let e=new Set;for(let n of l(this,hr,gT))n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,ft).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));let t=l(this,pu);if(t)for(let n of t.getEditableAnnotations()){if(n.hide(),l(this,ft).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}L(this,gp,!1),l(this,ft)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(L(this,pp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,_n)&&!l(this,yu)){L(this,yu,new AbortController);let i=l(this,ft).combinedSignal(l(this,yu));l(this,_n).div.addEventListener("pointerdown",o=>{let{clientX:a,clientY:u,timeStamp:c}=o,f=l(this,mp);if(c-f>500){L(this,mp,c);return}L(this,mp,-1);let{classList:h}=this.div;h.toggle("getElements",!0);let d=document.elementsFromPoint(a,u);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let g,b=new RegExp(`^${im}[0-9]+$`);for(let w of d)if(b.test(w.id)){g=w.id;break}if(!g)return;let v=l(this,wi).get(g);v?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),v.dblclick(o))},{signal:i,capture:!0})}let e=l(this,pu),t=[];if(e){let i=new Map,o=new Map;for(let a of l(this,hr,gT)){if(a.disableEditing(),!a.annotationElementId){t.push(a);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else o.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}let s=e.getEditableAnnotations();for(let a of s){let{id:u}=a.data;if(l(this,ft).isDeletedAnnotationElement(u)){a.updateEdited({deleted:!0});continue}let c=o.get(u);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=i.get(u),c&&(l(this,ft).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}se(this,hr,ov).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let i of l(Ls,bu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),L(this,pp,!1)}getEditableAnnotation(e){return l(this,pu)?.getEditableAnnotation(e)||null}setActiveEditor(e){l(this,ft).getActive()!==e&&l(this,ft).setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,l(this,_n)?.div&&!l(this,Ka)){L(this,Ka,new AbortController);let e=l(this,ft).combinedSignal(l(this,Ka));l(this,_n).div.addEventListener("pointerdown",se(this,hr,_3).bind(this),{signal:e}),l(this,_n).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,l(this,_n)?.div&&l(this,Ka)&&(l(this,Ka).abort(),L(this,Ka,null),l(this,_n).div.classList.remove("highlighting"))}enableClick(){if(l(this,gu))return;L(this,gu,new AbortController);let e=l(this,ft).combinedSignal(l(this,gu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){l(this,gu)?.abort(),L(this,gu,null)}attach(e){l(this,wi).set(e.id,e);let{annotationElementId:t}=e;t&&l(this,ft).isDeletedAnnotationElement(t)&&l(this,ft).removeDeletedAnnotationElement(e)}detach(e){l(this,wi).delete(e.id),l(this,Tf)?.removePointerInTextLayer(e.contentDiv),!l(this,pp)&&e.annotationElementId&&l(this,ft).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ft).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ft).addDeletedAnnotationElement(e),mr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ft).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,gp)),l(this,ft).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:t}=document;e.div.contains(t)&&!l(this,Ya)&&(e._focusEventsAllowed=!1,L(this,Ya,setTimeout(()=>{L(this,Ya,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ft)._signal}),t.focus())},0))),e._structTreeParentId=l(this,Tf)?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(let t of l(this,wi).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ft).getId()}combinedSignal(e){return l(this,ft).combinedSignal(e)}canCreateNewEmptyEditor(){return l(this,hr,po)?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ft).updateMode(e.mode);let{offsetX:n,offsetY:i}=se(this,hr,yT).call(this),o=this.getNextId(),s=se(this,hr,mT).call(this,{parent:this,id:o,x:n,y:i,uiManager:l(this,ft),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await l(Ls,bu).get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,l(this,ft))||null}createAndAddNewEditor(e,t,n={}){let i=this.getNextId(),o=se(this,hr,mT).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,ft),isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(se(this,hr,yT).call(this),!0,e)}setSelected(e){l(this,ft).setSelected(e)}toggleSelected(e){l(this,ft).toggleSelected(e)}unselect(e){l(this,ft).unselect(e)}pointerup(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,mu)||(L(this,mu,!1),l(this,hr,po)?.isDrawer&&l(this,hr,po).supportMultipleDrawings))return;if(!l(this,dp)){L(this,dp,!0);return}let n=l(this,ft).getMode();if(n===vt.STAMP||n===vt.SIGNATURE){l(this,ft).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(l(this,ft).getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),l(this,mu)){L(this,mu,!1);return}let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(L(this,mu,!0),l(this,hr,po)?.isDrawer){this.startDrawingSession(e);return}let n=l(this,ft).getActive();L(this,dp,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Hs)){l(this,hr,po).startDrawing(this,l(this,ft),!1,e);return}l(this,ft).setCurrentDrawingSession(this),L(this,Hs,new AbortController);let t=l(this,ft).combinedSignal(l(this,Hs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(L(this,Xa,null),this.commitOrRemove())},{signal:t}),l(this,hr,po).startDrawing(this,l(this,ft),!1,e)}pause(e){if(e){let{activeElement:t}=document;this.div.contains(t)&&L(this,Xa,t);return}l(this,Xa)&&setTimeout(()=>{l(this,Xa)?.focus(),L(this,Xa,null)},0)}endDrawingSession(e=!1){return l(this,Hs)?(l(this,ft).setCurrentDrawingSession(null),l(this,Hs).abort(),L(this,Hs,null),L(this,Xa,null),l(this,hr,po).endDrawing(e)):null}findNewParent(e,t,n){let i=l(this,ft).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return l(this,Hs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Hs)&&l(this,hr,po).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),l(this,ft).getActive()?.parent===this&&(l(this,ft).commitOrRemove(),l(this,ft).setActiveEditor(null)),l(this,Ya)&&(clearTimeout(l(this,Ya)),L(this,Ya,null));for(let e of l(this,wi).values())l(this,Tf)?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,l(this,wi).clear(),l(this,ft).removeLayer(this)}render({viewport:e}){this.viewport=e,wu(this.div,e);for(let t of l(this,ft).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ft).commitOrRemove(),se(this,hr,ov).call(this);let t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,wu(this.div,{rotation:n}),t!==n)for(let i of l(this,wi).values())i.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ft).viewParameters.realScale}};Tf=new WeakMap,dp=new WeakMap,pu=new WeakMap,gu=new WeakMap,Ya=new WeakMap,wi=new WeakMap,mu=new WeakMap,pp=new WeakMap,gp=new WeakMap,Hs=new WeakMap,Xa=new WeakMap,_n=new WeakMap,Ka=new WeakMap,yu=new WeakMap,mp=new WeakMap,ft=new WeakMap,bu=new WeakMap,hr=new WeakSet,gT=function(){return l(this,wi).size!==0?l(this,wi).values():l(this,ft).getEditors(this.pageIndex)},_3=function(e){l(this,ft).unselectAll();let{target:t}=e;if(t===l(this,_n).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,_n).div.contains(t)){let{isMac:n}=Ur.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,ft).showAllEditors("highlight",!0,!0),l(this,_n).div.classList.add("free"),this.toggleDrawing(),Mv.startHighlighting(this,l(this,ft).direction==="ltr",{target:l(this,_n).div,x:e.x,y:e.y}),l(this,_n).div.addEventListener("pointerup",()=>{l(this,_n).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ft)._signal}),e.preventDefault()}},po=function(){return l(Ls,bu).get(l(this,ft).getMode())},mT=function(e){let t=l(this,hr,po);return t?new t.prototype.constructor(e):null},yT=function(){let{x:e,y:t,width:n,height:i}=this.boundingClientRect,o=Math.max(0,e),s=Math.max(0,t),a=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+i),c=(o+a)/2-e,f=(s+u)/2-t,[h,d]=this.viewport.rotation%180===0?[c,f]:[f,c];return{offsetX:h,offsetY:d}},ov=function(){for(let e of l(this,wi).values())e.isEmpty()&&e.remove()},Qe(Ls,"_initialized",!1),X(Ls,bu,new Map([XS,oT,Jg,Mv,dT].map(e=>[e._editorType,e])));$v=Ls,an=class an{constructor({pageIndex:e}){X(this,Fo);X(this,Gs,null);X(this,Jn,new Map);X(this,Cf,new Map);this.pageIndex=e}setParent(e){if(!l(this,Gs)){L(this,Gs,e);return}if(l(this,Gs)!==e){if(l(this,Jn).size>0)for(let t of l(this,Jn).values())t.remove(),e.append(t);L(this,Gs,e)}}static get _svgFactory(){return wt(this,"_svgFactory",new Of)}draw(e,t=!1,n=!1){let i=tn(an,l0)._++,o=se(this,Fo,bT).call(this),s=an._svgFactory.createElement("defs");o.append(s);let a=an._svgFactory.createElement("path");s.append(a);let u=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Cf).set(i,a);let c=n?se(this,Fo,A3).call(this,s,u):null,f=an._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(o,e),l(this,Jn).set(i,o),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){let n=tn(an,l0)._++,i=se(this,Fo,bT).call(this),o=an._svgFactory.createElement("defs");i.append(o);let s=an._svgFactory.createElement("path");o.append(s);let a=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){let h=an._svgFactory.createElement("mask");o.append(h),u=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",u),h.setAttribute("maskUnits","objectBoundingBox");let d=an._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let g=an._svgFactory.createElement("use");h.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}let c=an._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),u&&c.setAttribute("mask",`url(#${u})`);let f=c.cloneNode();return i.append(f),c.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),l(this,Jn).set(n,i),n}finalizeDraw(e,t){l(this,Cf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;let{root:n,bbox:i,rootClass:o,path:s}=t,a=typeof e=="number"?l(this,Jn).get(e):e;if(a){if(n&&se(this,Fo,wT).call(this,a,n),i&&se(u=an,a_,E3).call(u,a,i),o){let{classList:c}=a;for(let[f,h]of Object.entries(o))c.toggle(f,h)}if(s){let f=a.firstElementChild.firstElementChild;se(this,Fo,wT).call(this,f,s)}}}updateParent(e,t){if(t===this)return;let n=l(this,Jn).get(e);n&&(l(t,Gs).append(n),l(this,Jn).delete(e),l(t,Jn).set(e,n))}remove(e){l(this,Cf).delete(e),l(this,Gs)!==null&&(l(this,Jn).get(e).remove(),l(this,Jn).delete(e))}destroy(){L(this,Gs,null);for(let e of l(this,Jn).values())e.remove();l(this,Jn).clear(),l(this,Cf).clear()}};Gs=new WeakMap,Jn=new WeakMap,Cf=new WeakMap,l0=new WeakMap,a_=new WeakSet,E3=function(e,[t,n,i,o]){let{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*o}%`},Fo=new WeakSet,bT=function(){let e=an._svgFactory.create(1,1,!0);return l(this,Gs).append(e),e.setAttribute("aria-hidden",!0),e},A3=function(e,t){let n=an._svgFactory.createElement("clipPath");e.append(n);let i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");let o=an._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i},wT=function(e,t){for(let[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},X(an,a_),X(an,l0,0);zv=an;globalThis._pdfjsTestingUtils={HighlightOutliner:mm};globalThis.pdfjsLib={AbortException:Ys,AnnotationEditorLayer:$v,AnnotationEditorParamsType:Bt,AnnotationEditorType:vt,AnnotationEditorUIManager:vu,AnnotationLayer:Lv,AnnotationMode:Za,AnnotationType:qr,applyOpacity:OM,build:OF,ColorPicker:hm,createValidAbsoluteUrl:vT,CSSConstants:cv,DOMSVGFactory:Of,DrawLayer:zv,FeatureTest:Ur,fetchData:Ep,findContrastColor:NM,getDocument:CF,getFilenameFromUrl:RM,getPdfFilenameFromUrl:DM,getRGB:Ap,getUuid:ET,getXfaPageViewport:IM,GlobalWorkerOptions:_s,ImageKind:tm,InvalidPDFException:bp,isDataScheme:f0,isPdfFile:c_,isValidExplicitDest:hF,MathClamp:Wn,noContextMenu:Zi,normalizeUnicode:TM,OPS:yp,OutputScale:Mo,PasswordResponses:xM,PDFDataRangeTransport:fm,PDFDateString:Rf,PDFWorker:_p,PermissionFlag:AM,PixelsPerInch:tl,RenderingCancelledException:wp,renderRichText:AT,ResponseException:Df,setLayerDimensions:wu,shadow:wt,SignatureExtractor:Es,stopEvent:Cr,SupportedImageMimeTypes:uv,TextLayer:vp,TouchManager:lm,updateUrlHash:_T,Util:st,VerbosityLevel:u0,version:IF,XfaLayer:om}});var PV={};Uo(PV,{OfficeParser:()=>Pf,default:()=>kV,parseOffice:()=>NV});Ne();Le();ke();Ne();Le();ke();var k3=Su(wN());Gp();Ne();Le();ke();Ne();Le();ke();Ne();Le();ke();var dk=Su(Ib()),Ut=r=>new dk.DOMParser().parseFromString(r,"text/xml"),Re=(r,e)=>Array.from(r.getElementsByTagName(e)),En=(r,e)=>{let t=[];if(!r.childNodes)return t;for(let n=0;n<r.childNodes.length;n++){let i=r.childNodes[n];i.nodeType===1&&i.tagName===e&&t.push(i)}return t},wl=r=>{let e=Ut(r),t={},n=Re(e,"cp:coreProperties")[0];if(n){let o=Re(n,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Re(n,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Re(n,"cp:lastModifiedBy")[0];a&&a.textContent&&(t.lastModifiedBy=a.textContent);let u=Re(n,"dcterms:created")[0];u&&u.textContent&&(t.created=new Date(u.textContent));let c=Re(n,"dcterms:modified")[0];return c&&c.textContent&&(t.modified=new Date(c.textContent)),t}let i=Re(e,"office:meta")[0];if(i){let o=Re(i,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Re(i,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Re(i,"dc:description")[0];a&&a.textContent&&(t.description=a.textContent);let u=Re(i,"dc:subject")[0];u&&u.textContent&&(t.subject=u.textContent);let c=Re(i,"meta:creation-date")[0];c&&c.textContent&&(t.created=new Date(c.textContent));let f=Re(i,"dc:date")[0];f&&f.textContent&&(t.modified=new Date(f.textContent))}return t};var na=(r,e)=>{let t=r.localName===e||r.tagName===e?r:r.getElementsByTagName(e)[0];if(!t)return;let n=t.getElementsByTagName("c:rich"),i=t.getElementsByTagName("a:p"),o=n.length>0?Array.from(n):Array.from(i);if(o.length>0){let a="";for(let u of o){let c=u.getElementsByTagName("a:t");for(let f=0;f<c.length;f++)a+=(c[f].textContent||"")+" "}if(a.trim())return a.trim()}let s=t.getElementsByTagName("c:v")[0];if(s&&s.textContent)return s.textContent.trim()||void 0},$9=r=>{let e=r.toString("utf8"),n=Ut(e).documentElement,i=na(n,"c:title"),o,s=n.getElementsByTagName("c:plotArea")[0];if(s){let v=["c:barChart","c:lineChart","c:pieChart","c:columnChart","c:areaChart","c:scatterChart","c:bubbleChart","c:doughnutChart","c:radarChart","c:surfaceChart","c:ofPieChart","c:stockChart"];for(let w of v)if(s.getElementsByTagName(w).length>0){o=w.replace("c:","").replace("Chart","").toLowerCase();break}}let a,u,c=n.getElementsByTagName("c:catAx");c.length>0&&(a=na(c[0],"c:title"));let f=n.getElementsByTagName("c:valAx");f.length>0&&(u=na(f[0],"c:title"));let h=n.getElementsByTagName("c:ser"),d=[],g=[];for(let v=0;v<h.length;v++){let w=h[v],y=na(w,"c:tx"),_=[],E=w.getElementsByTagName("c:val")[0]||w.getElementsByTagName("c:yVal")[0];if(E){let T=E.getElementsByTagName("c:v");for(let Z=0;Z<T.length;Z++){let ie=T[Z].textContent?.trim();ie&&_.push(ie)}}let S=[],A=w.getElementsByTagName("c:dLbl");for(let T=0;T<A.length;T++){let Z=na(A[T],"c:tx");Z&&S.push(Z)}let B=w.getElementsByTagName("c:cat")[0]||w.getElementsByTagName("c:xVal")[0];if(B){let T=B.getElementsByTagName("c:v"),Z=[];for(let ie=0;ie<T.length;ie++){let G=T[ie].textContent?.trim();G&&Z.push(G)}Z.length>0&&g.length===0&&g.push(...Z)}d.push({name:y,values:_,pointLabels:S})}let b=[];for(let v of d)v.name&&b.push(v.name),b.push(...g),b.push(...v.values);return{title:i,chartType:o,xAxisTitle:a,yAxisTitle:u,dataSets:d,labels:g,rawTexts:b}},z9=r=>{let e=r.toString("utf8"),t=Ut(e),n=Re(t,"chart:chart")[0]||t.documentElement,i=Re(n,"chart:title")[0],o=i&&Re(i,"text:p")[0]?.textContent||void 0,s=Re(n,"table:table")[0],a=[],u=[],c=[];if(s){let v=[],w=En(s,"table:table-header-rows")[0];if(w&&v.push(...En(w,"table:table-row")),v.push(...En(s,"table:table-row")),v.length>0){let y=En(v[0],"table:table-cell");for(let _=1;_<y.length;_++){let E=parseInt(y[_].getAttribute("table:number-columns-repeated")||"1"),S=En(y[_],"text:p")[0]?.textContent||void 0;for(let A=0;A<E;A++)a.push({name:S,values:[],pointLabels:[]})}for(let _=1;_<v.length;_++){let E=En(v[_],"table:table-cell");if(E.length>0){let S=En(E[0],"text:p")[0]?.textContent||void 0;S&&u.push(S);let A=0;for(let B=1;B<E.length;B++){let T=parseInt(E[B].getAttribute("table:number-columns-repeated")||"1"),Z=E[B].getAttribute("office:value")||En(E[B],"text:p")[0]?.textContent||"";for(let ie=0;ie<T;ie++)a[A]&&a[A].values.push(Z),A++}}}}}else{let v=Re(n,"chart:series");for(let y of v){let _=y.getAttribute("chart:label-cell-address"),E=y.getAttribute("chart:values-cell-range-address"),S,A=Re(y,"text:p");A.length>0&&(S=A[0].textContent||void 0),!S&&_&&(S=`Series ${_.split(".").pop()?.replace(/\$/g,"")||_}`);let B={name:S,values:[],pointLabels:[]};E&&B.values.push(`[${E}]`),a.push(B)}let w=Re(n,"chart:categories")[0];if(w){let y=w.getAttribute("table:cell-range-address");y&&u.push(`[${y}]`)}}let f=Re(t,"chart:axis"),h,d;for(let v of f){let w=v.getAttribute("chart:dimension"),y=Re(v,"chart:title")[0],_=y&&Re(y,"text:p")[0]?.textContent||void 0;w==="x"?h=_:w==="y"&&(d=_)}let g,b=n.getAttribute("chart:class");b&&(g=b.replace("chart:","").toLowerCase()),o&&c.push(o);for(let v of a)v.name&&c.push(v.name),c.push(...u),c.push(...v.values);return{title:o,chartType:g,xAxisTitle:h,yAxisTitle:d,dataSets:a,labels:u,rawTexts:c}},W9=r=>{let e=r.toString("utf8"),t=Ut(e),n=Re(t,"cx:plotArea")[0];if(!n)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let i=Re(n,"cx:plotAreaRegion")[0];if(!i)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let o=Re(i,"cx:series"),s;if(o.length===0)return{title:void 0,chartType:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};if(o.length>0){let E=o[0].getAttribute("layoutId");E&&(s={100:"column",101:"bar",102:"line",103:"pie",104:"area",105:"scatter",106:"bubble",107:"doughnut",108:"radar",109:"surface"}[E]||void 0)}let a=Re(t,"cx:chartData")[0];if(!a)return{title:void 0,chartType:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let u={},c=Re(a,"cx:data");for(let _ of c){let E=_.getAttribute("id")||"0";u[E]=_}let f=[],h=[],d=[];for(let _ of o){let E=Re(_,"cx:dataId")[0],S=E&&E.getAttribute("val")||"0",A=u[S];if(!A)continue;let B=[],T=Re(A,"cx:strDim")[0];if(T&&T.getAttribute("type")==="cat"){let U=Re(T,"cx:lvl");if(U.length>0){let ue=U[0],Ae=parseInt(ue.getAttribute("ptCount")||"0",10);for(let ve=0;ve<Ae;ve++){let z=[];for(let O of U){let oe=Re(O,"cx:pt"),q=Array.from(oe).find(M=>parseInt(M.getAttribute("idx")||"-1",10)===ve);if(q){let M=q.textContent||"";z.push(M)}}if(z.length>0){let O=z[0];B.push(O)}}}}if(B.length===0){let U=Array.from(Re(A,"cx:numDim")).find(V=>V.getAttribute("type")==="catVal");if(U){let V=Re(U,"cx:lvl")[0];if(V){let ue=Re(V,"cx:pt");for(let Ae of ue){let ve=Ae.textContent||"";ve&&B.push(ve)}}}}let Z=[],ie=Array.from(Re(A,"cx:numDim")).find(U=>U.getAttribute("type")==="size"||U.getAttribute("type")==="val");if(ie){let U=Re(ie,"cx:lvl")[0];if(U){let V=Re(U,"cx:pt");for(let ue of V){let Ae=ue.textContent||"";Ae&&Z.push(Ae)}}}let G,ae=Re(_,"c:tx")[0];ae&&(G=na(ae,"c:tx")),(B.length>0||Z.length>0)&&(f.push({name:G,values:Z,pointLabels:[]}),B.length>0&&h.length===0&&h.push(...B))}let g=na(t.documentElement,"c:title"),b,v,w=Re(t.documentElement,"c:catAx");w.length>0&&(b=na(w[0],"c:title"));let y=Re(t.documentElement,"c:valAx");y.length>0&&(v=na(y[0],"c:title")),g&&d.push(g);for(let _ of f)_.name&&d.push(_.name),d.push(...h),d.push(..._.values);return{title:g,chartType:s,xAxisTitle:b,yAxisTitle:v,dataSets:f,labels:h,rawTexts:d}},Xu=r=>{let e=r.toString("utf8",0,500);return e.includes("cx:")||e.includes("cx:plotArea")||e.includes("cx:chartData")?W9(r):e.includes("urn:oasis:names:tc:opendocument:xmlns:chart:1.0")?z9(r):$9(r)};Ne();Le();ke();var mh="[OfficeParser]: ";var q9={EXTENSION_UNSUPPORTED:r=>`Sorry, OfficeParser currently supports docx, pptx, xlsx, odt, odp, ods, pdf, rtf files only. Create a ticket in Issues on github to add support for ${r} files. Stay tuned for further updates.`,FILE_CORRUPTED:r=>`Your file ${r} seems to be corrupted. If you are sure it is fine, please create a ticket in Issues on github with the file to reproduce error.`,FILE_DOES_NOT_EXIST:r=>`File ${r} could not be found! Check if the file exists or verify if the relative path to the file is correct from your terminal's location.`,LOCATION_NOT_FOUND:r=>`Entered location ${r} is not reachable! Please make sure that the entered directory location exists. Check relative paths and reenter.`,IMPROPER_ARGUMENTS:"Improper arguments",IMPROPER_BUFFERS:"Error occured while reading the file buffers",INVALID_INPUT:"Invalid input type: Expected a Buffer or a valid file path",PDF_WORKER_MISSING:'Missing PDF worker configuration. PDF parsing in browser environments requires a worker source. Please provide "pdfWorkerSrc" in your configuration.'},pk=(r,e)=>{let t=q9[r];return typeof t=="function"?t(e):t},ia=(r,e,t)=>{let n=pk(r,t);return e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},gk=(r,e,t)=>{let n=r.message||r;return t&&(n.includes("end of central directory record")||n.includes("invalid XML")||n.includes("Failed to open zip file")||n.includes("invalid distance too far back"))&&(n=pk("FILE_CORRUPTED",t)),e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},ci=(r,e,t)=>{e.outputErrorToConsole&&(t?console.warn(mh+r,t):console.warn(mh+r))};Ne();Le();ke();var H9=r=>{switch(r.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";default:return"application/octet-stream"}},G9=r=>{if(!(r.length<4)){if(r[0]===137&&r[1]===80&&r[2]===78&&r[3]===71)return"image/png";if(r[0]===255&&r[1]===216&&r[2]===255)return"image/jpeg";if(r[0]===71&&r[1]===73&&r[2]===70&&r[3]===56)return"image/gif";if(r[0]===66&&r[1]===77)return"image/bmp";if(r[0]===73&&r[1]===73&&r[2]===42&&r[3]===0||r[0]===77&&r[1]===77&&r[2]===0&&r[3]===42)return"image/tiff";if(r.length>=12&&r[0]===82&&r[1]===73&&r[2]===70&&r[3]===70&&r[8]===87&&r[9]===69&&r[10]===66&&r[11]===80)return"image/webp"}},Is=(r,e)=>{let t=r.split(".").pop()||"",n=G9(e);return n||(n=H9(t)),{type:"image",mimeType:n,data:e.toString("base64"),name:r,extension:t}};Ne();Le();ke();var sL=Su(iL()),ns=async(r,e="eng")=>{let t=await(0,sL.createWorker)(e,1,{logger:()=>{}}),n=r;typeof window<"u"&&typeof Blob<"u"&&Buffer.isBuffer(r)&&(n=new Blob([r],{type:"image/bmp"}));let i=await t.recognize(n);return await t.terminate(),i.data.text};Ne();Le();ke();var eM=Su(FP()),tM=Su(QB()),Cl=(r,e)=>new Promise((t,n)=>{eM.default.fromBuffer(r,{lazyEntries:!0},(i,o)=>{if(i)return n(i);if(!o)return n(new Error("Failed to open zip file"));let s=[];o.readEntry(),o.on("entry",a=>{e(a.fileName)?o.openReadStream(a,(u,c)=>{if(u)return n(u);if(!c)return n(new Error("Failed to open read stream"));c.pipe((0,tM.default)(f=>{s.push({path:a.fileName,content:f}),o.readEntry()}))}):o.readEntry()}),o.on("end",()=>t(s)),o.on("error",n)})});var rM=async(r,e)=>{let t=/xl\/worksheets\/sheet\d+.xml/g,n=/xl\/drawings\/drawing\d+.xml/g,i=/xl\/charts\/chart\d+.xml/g,o="xl/sharedStrings.xml",s=/xl\/media\/.*/,a=/docProps\/core\.xml/,u=/xl\/worksheets\/_rels\/sheet\d+\.xml\.rels/g,c=/xl\/drawings\/_rels\/drawing\d+\.xml\.rels/g,f=await Cl(r,M=>!!M.match(t)||!!M.match(n)||!!M.match(i)||M===o||M==="xl/styles.xml"||M==="xl/workbook.xml"||M==="xl/_rels/workbook.xml.rels"||!!M.match(a)||!!e.extractAttachments&&(!!M.match(s)||!!M.match(u)||!!M.match(c))),h=f.find(M=>M.path===o),d=[];if(h){let M=Ut(h.content.toString()),H=Re(M,"si");for(let j of H){let Q=Re(j,"r");if(Q.length>0){let K=[];for(let ee of Q){let P=Re(ee,"t")[0];if(P){let I=P.textContent||"",k=Re(ee,"rPr")[0],ne={};if(k){Re(k,"b").length>0&&(ne.bold=!0),Re(k,"i").length>0&&(ne.italic=!0),Re(k,"u").length>0&&(ne.underline=!0),Re(k,"strike").length>0&&(ne.strikethrough=!0);let pe=Re(k,"sz")[0];pe&&(ne.size=pe.getAttribute("val")+"pt");let F=Re(k,"color")[0];if(F){let ge=F.getAttribute("rgb");ge&&(ne.color="#"+ge.substring(2))}let R=Re(k,"rFont")[0];R&&(ne.font=R.getAttribute("val")||void 0);let te=Re(k,"vertAlign")[0];if(te){let ge=te.getAttribute("val");ge==="subscript"&&(ne.subscript=!0),ge==="superscript"&&(ne.superscript=!0)}}K.push({type:"text",text:I,formatting:Object.keys(ne).length>0?ne:void 0})}}d.push(K)}else{let K=Re(j,"t"),ee="";for(let P of K)ee+=P.textContent||"";d.push(ee)}}}let g=f.find(M=>M.path==="xl/styles.xml"),b={};if(g){let M=Ut(g.content.toString()),H=Re(M,"fonts")[0],j=[];if(H){let P=Re(H,"font");for(let I of P){let k={};Re(I,"b").length>0&&(k.bold=!0),Re(I,"i").length>0&&(k.italic=!0),Re(I,"u").length>0&&(k.underline=!0),Re(I,"strike").length>0&&(k.strikethrough=!0);let ne=Re(I,"sz")[0];if(ne){let te=ne.getAttribute("val");te&&(k.size=te+"pt")}let pe=Re(I,"color")[0];if(pe){let te=pe.getAttribute("rgb");te&&(k.color="#"+te.substring(2))}let F=Re(I,"name")[0];if(F){let te=F.getAttribute("val");te&&(k.font=te)}let R=Re(I,"vertAlign")[0];if(R){let te=R.getAttribute("val");te==="subscript"&&(k.subscript=!0),te==="superscript"&&(k.superscript=!0)}j.push(k)}}let Q=Re(M,"fills")[0],K=[];if(Q){let P=Re(Q,"fill");for(let I of P){let k={},ne=Re(I,"patternFill")[0];if(ne){let pe=Re(ne,"fgColor")[0];if(pe){let F=pe.getAttribute("rgb"),R=pe.getAttribute("theme");if(F&&F!=="00000000")k.backgroundColor="#"+F.substring(2);else if(R){let te=parseInt(R);te===0?k.backgroundColor="#FFFFFF":te===1?k.backgroundColor="#000000":te===2?k.backgroundColor="#EEECE1":te===3&&(k.backgroundColor="#1F497D")}}}K.push(k)}}let ee=Re(M,"cellXfs")[0];if(ee){let P=Re(ee,"xf");for(let I=0;I<P.length;I++){let k=P[I],ne={},pe=k.getAttribute("fontId");if(pe){let te=parseInt(pe);j[te]&&Object.assign(ne,j[te])}let F=k.getAttribute("fillId");if(F){let te=parseInt(F);K[te]&&K[te].backgroundColor&&(ne.backgroundColor=K[te].backgroundColor)}let R=Re(k,"alignment")[0];if(R){let te=R.getAttribute("horizontal");(te==="center"||te==="right"||te==="justify"||te==="left")&&(ne.alignment=te)}b[I]=ne}}}let v=[],w=f.filter(M=>M.path.match(/xl\/media\/.*/)),y=f.filter(M=>M.path.match(i)),_={};if(e.extractAttachments){let M=f.filter(j=>j.path.match(c));for(let j of M){let K=`xl/drawings/${j.path.split("/").pop()?.replace(".rels","")||""}`,ee=Ut(j.content.toString()),P=Re(ee,"Relationship");_[K]||(_[K]={});for(let I of P){let k=I.getAttribute("Id"),ne=I.getAttribute("Target");if(k&&ne&&ne.includes("media/")){let pe="xl/"+ne.replace("../","");_[K][k]={path:pe}}}}let H=f.filter(j=>j.path.match(n));for(let j of H){let Q=Ut(j.content.toString()),K=Re(Q,"xdr:pic"),ee=_[j.path]||{};for(let P of K){let I=Re(P,"xdr:blipFill")[0],k=I?Re(I,"a:blip")[0]:null,ne=k?k.getAttribute("r:embed"):null,pe=Re(P,"xdr:nvPicPr")[0],F=pe?Re(pe,"xdr:cNvPr")[0]:null,R=F?F.getAttribute("descr")||F.getAttribute("name"):void 0;ne&&ee[ne]&&(ee[ne].altText=R||"")}}for(let j of w){let Q=Is(j.path.split("/").pop()||"image",j.content),K="";for(let ee in _){for(let P in _[ee])if(_[ee][P].path===j.path){K=_[ee][P].altText||"";break}if(K)break}if(K&&(Q.altText=K),v.push(Q),e.ocr&&Q.mimeType.startsWith("image/"))try{let ee=await ns(j.content,e.ocrLanguage);ee.trim()&&(Q.ocrText=ee.trim())}catch(ee){ci(`OCR failed for ${Q.name}:`,e,ee)}}for(let j of y){let Q={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:j.content.toString("base64"),name:j.path.split("/").pop()||"",extension:"xml"};try{let K=Xu(j.content);Q.chartData=K}catch(K){ci(`Failed to extract chart data from ${j.path}:`,e,K)}v.push(Q)}}let E={};if(e.extractAttachments){let M=f.filter(H=>H.path.match(c));for(let H of M){let Q=`xl/drawings/${H.path.split("/").pop()?.replace(".rels","")||""}`,K=Ut(H.content.toString()),ee=Re(K,"Relationship");E[Q]||(E[Q]={});for(let P of ee){let I=P.getAttribute("Id"),k=P.getAttribute("Target"),ne=P.getAttribute("Type");if(I&&k&&ne&&ne.includes("chart")){let pe=k.split("/").pop()||"";E[Q][I]=pe}}}}let S={},A=f.find(M=>M.path==="xl/workbook.xml"),B=f.find(M=>M.path==="xl/_rels/workbook.xml.rels");if(A&&B){let M=Ut(B.content.toString()),H=Re(M,"Relationship"),j={};for(let ee of H){let P=ee.getAttribute("Id"),I=ee.getAttribute("Target");if(P&&I){let k=I.split("/").pop()||"";j[P]=k}}let Q=Ut(A.content.toString()),K=Re(Q,"sheet");for(let ee of K){let P=ee.getAttribute("name"),I=ee.getAttribute("r:id");P&&I&&j[I]&&(S[j[I]]=P)}}let T=[],Z=[],ie=new Map;for(let M of f)if(!M.path.match(s)&&M.path!==o&&M.path!=="xl/styles.xml"&&!M.path.match(n)&&!M.path.match(i)&&!M.path.match(u)&&!M.path.match(c)&&M.path.match(t)){e.includeRawContent&&Z.push(M.content.toString());let H=[],j=/<row.*?>[\s\S]*?<\/row>/g,Q=M.content.toString().match(j);if(Q)for(let P of Q){let I=[],k=/<c.*?>[\s\S]*?<\/c>/g,ne=P.match(k),pe=P.match(/r="(\d+)"/),F=pe?parseInt(pe[1])-1:0;if(ne)for(let R of ne){let te=R.match(/t="([a-z]+)"/),ge=te?te[1]:"n",Ce=R.match(/<v>(.*?)<\/v>/),xe=R.match(/<t>(.*?)<\/t>/),he="",_e=[];if(ge==="s"&&Ce){let We=parseInt(Ce[1]),qe=d[We];Array.isArray(qe)?(_e=JSON.parse(JSON.stringify(qe)),he=_e.map(Ge=>Ge.text).join("")):he=qe||""}else ge==="inlineStr"&&xe?he=xe[1]:Ce&&(he=Ce[1]);let Oe=R.match(/r="([A-Z]+)(\d+)"/),Te=(Oe?Oe[1]:"").charCodeAt(0)-65;if(he||_e.length>0){let We=R.match(/s="(\d+)"/),qe=We?parseInt(We[1]):void 0,Ge=qe!==void 0&&b[qe]?b[qe]:{};if(_e.length>0)for(let p of _e)p.formatting||(p.formatting={}),Ge.backgroundColor&&(p.formatting.backgroundColor=Ge.backgroundColor),Ge.alignment&&(p.formatting.alignment=Ge.alignment),!p.formatting.font&&Ge.font&&(p.formatting.font=Ge.font),!p.formatting.size&&Ge.size&&(p.formatting.size=Ge.size);else _e.push({type:"text",text:he,formatting:Ge});let x={type:"cell",text:he,children:_e,metadata:{row:F,col:Te}};e.includeRawContent&&(x.rawContent=R),I.push(x)}}if(I.length>0){let R={type:"row",children:I,metadata:void 0};e.includeRawContent&&(R.rawContent=P),H.push(R)}}if(e.extractAttachments){let I=`xl/worksheets/_rels/${M.path.split("/").pop()||""}.rels`,k=f.find(F=>F.path===I),ne={};if(k){let F=Ut(k.content.toString()),R=Re(F,"Relationship");for(let te of R){let ge=te.getAttribute("Id"),Ce=te.getAttribute("Target"),xe=te.getAttribute("Type");ge&&Ce&&xe&&xe.includes("drawing")&&(ne[ge]="xl/drawings/"+Ce.replace("../drawings/",""))}}let pe=M.content.toString().match(/<drawing r:id="(.*?)"/g);if(pe)for(let F of pe){let R=F.match(/r:id="(.*?)"/),te=R?R[1]:null;if(te&&ne[te]){let ge=ne[te],Ce=_[ge];if(Ce)for(let he in Ce){let _e=Ce[he],Oe=v.find(Ie=>Ie.name===_e.path.split("/").pop());if(Oe){let Ie={type:"image",text:"",children:[],metadata:{attachmentName:Oe.name||"unknown",altText:_e.altText||void 0}};H.push(Ie)}}let xe=E[ge];if(xe)for(let he in xe){let _e=xe[he];if(v.find(Ie=>Ie.name===_e)){let Ie={type:"chart",text:"",children:[],metadata:{attachmentName:_e}};H.push(Ie)}}}}}let K=M.path.split("/").pop()||"Sheet",ee=S[K]||K;T.push({type:"sheet",children:H,metadata:{sheetName:ee},rawContent:e.includeRawContent?M.content.toString():void 0})}let G=f.find(M=>M.path.match(a)),ae=G?wl(G.content.toString()):{},U=M=>{for(let H of M){if("attachmentName"in(H.metadata||{})){let j=H.metadata,Q=v.find(K=>K.name===j.attachmentName);Q&&(H.type==="image"&&(Q.ocrText&&(H.text=Q.ocrText),j.altText&&(Q.altText=j.altText)),H.type==="chart"&&Q.chartData&&(H.text=Q.chartData.rawTexts.join(e.newlineDelimiter||`
`)))}H.children&&U(H.children)}};U(T);let V=M=>{let H=Re(M,"xdr:from")[0],j=Re(M,"xdr:to")[0],Q=Re(M,"xdr:ext")[0];if(H&&j&&Q){let ee=Re(H,"xdr:col")[0]?.textContent||"0",P=Re(H,"xdr:row")[0]?.textContent||"0",I=Re(H,"xdr:colOff")[0]?.textContent||"0",k=Re(H,"xdr:rowOff")[0]?.textContent||"0",ne=Q?parseInt(Q.getAttribute("cx")||"0",10):0,pe=Q?parseInt(Q.getAttribute("cy")||"0",10):0,F=parseInt(I,10),R=parseInt(k,10);if(ne>0&&pe>0)return{x:F,y:R,width:ne,height:pe}}if(H&&Q&&!j){let ee=Re(H,"xdr:colOff")[0]?.textContent||"0",P=Re(H,"xdr:rowOff")[0]?.textContent||"0",I=Q?parseInt(Q.getAttribute("cx")||"0",10):0,k=Q?parseInt(Q.getAttribute("cy")||"0",10):0,ne=parseInt(ee,10),pe=parseInt(P,10);if(I>0&&k>0)return{x:ne,y:pe,width:I,height:k}}let K=Re(M,"xdr:pos")[0];if(K&&Q){let ee=parseInt(K.getAttribute("x")||"0",10),P=parseInt(K.getAttribute("y")||"0",10),I=parseInt(Q.getAttribute("cx")||"0",10),k=parseInt(Q.getAttribute("cy")||"0",10);if(I>0&&k>0)return{x:ee,y:P,width:I,height:k}}};if(e.extractAttachments){let M=f.filter(H=>H.path.match(n));for(let H of M){let j=Ut(H.content.toString()),Q=Re(j,"xdr:twoCellAnchor"),K=Re(j,"xdr:oneCellAnchor"),ee=Re(j,"xdr:absoluteAnchor"),P=[...Q,...K,...ee];for(let I of P){let k=Re(I,"xdr:graphicFrame")[0],ne=Re(I,"xdr:pic")[0];if(k){let F=Re(k,"c:chart")[0]?.getAttribute("r:id");if(F){let R=H.path,te=E[R];if(te&&te[F]){let ge=te[F],Ce=he=>{for(let _e of he){if(_e.type==="chart"&&_e.metadata?.attachmentName===ge)return _e;if(_e.children){let Oe=Ce(_e.children);if(Oe)return Oe}}return null},xe=Ce(T);xe&&ie.set(xe,I)}}}if(ne){let pe=Re(ne,"xdr:blipFill")[0],F=pe?Re(pe,"a:blip")[0]:null,R=F?F.getAttribute("r:embed"):null;if(R){let te=H.path,ge=_[te];if(ge&&ge[R]){let xe=ge[R].path.split("/").pop(),he=Oe=>{for(let Ie of Oe){if(Ie.type==="image"&&Ie.metadata?.attachmentName===xe)return Ie;if(Ie.children){let Te=he(Ie.children);if(Te)return Te}}return null},_e=he(T);_e&&ie.set(_e,I)}}}}}}let ue=(M,H)=>{let j=[];if(M.children){for(let Q of M.children)if(Q.type==="row"&&Q.children){let K=[];for(let ee of Q.children)if(ee.type==="cell"){let P=k=>{let ne=k.text||"";if(k.children&&k.children.length>0){let pe=k.children.map(P).filter(F=>F!=="");pe.length>0&&(ne+=(ne?" ":"")+pe.join(" "))}return ne},I=P(ee);K.push({value:I})}K.length>0&&j.push({cols:K})}}return{type:"table",rows:j,...H?{position:H}:{}}},Ae=(M,H,j)=>{if(M.type!=="chart")return null;let Q=M.metadata;if(Q?.attachmentName){let K=H.find(ee=>ee.name===Q.attachmentName&&ee.type==="chart");if(K?.chartData)return{type:"chart",chartData:K.chartData,chartType:K.chartData.chartType,...j?{position:j}:{}}}return null},ve=(M,H,j)=>{let Q=[],K=ee=>{let P=j.get(ee),I=P?V(P):void 0;if(ee.type==="chart"){let k=Ae(ee,H,I);k&&Q.push(k);return}else if(ee.type==="image"){let ne=ee.metadata?.attachmentName;if(ne){let pe=H.find(F=>F.name===ne&&F.type==="image");if(pe){let F=Buffer.from(pe.data,"base64");Q.push({type:"image",buffer:F,mimeType:pe.mimeType,filename:pe.name,...I?{position:I}:{}})}}return}else if(ee.type==="sheet"){let k=[],ne=[];if(ee.children)for(let pe of ee.children)pe.type==="row"&&(!pe.children||pe.children.every(R=>R.type==="cell"))?k.push(pe):ne.push(pe);if(k.length>0){let pe={...ee,children:k},F=ue(pe,I);F.rows.length>0&&Q.push(F)}for(let pe of ne)K(pe);for(let pe of k)if(pe.children){for(let F of pe.children)if(F.type==="cell"&&F.text&&F.text.trim()){let R=j.get(F),te=R?V(R):void 0;Q.push({type:"text",content:F.text.trim(),...te?{position:te}:{}})}}return}else ee.type==="cell"&&ee.text&&ee.text.trim()&&Q.push({type:"text",content:ee.text.trim(),...I?{position:I}:{}});if(ee.children)for(let k of ee.children)K(k)};for(let ee of M)K(ee);return Q},z=M=>M.filter(H=>H.type==="image").map(H=>({buffer:Buffer.from(H.data,"base64"),mimeType:H.mimeType,filename:H.name})),O=T.map(M=>{let H=j=>{let Q="";return j.children?Q+=j.children.map(H).filter(K=>K!="").join(j.children[0]?.children?e.newlineDelimiter??`
`:""):Q+=j.text||"",Q};return H(M)}).filter(M=>M!="").join(e.newlineDelimiter??`
`),oe=ve(T,v,ie),q=z(v);return console.log("Excel Chart blocks",oe.filter(M=>M.type==="chart")),{type:"xlsx",metadata:ae,content:T,attachments:v,fullText:O,blocks:oe,images:q,toText:()=>O}};Ne();Le();ke();var nM=async(r,e)=>{let t=/content\.xml/,n=/Object \d+\/content\.xml/,i=/(Pictures|media)\/.*/,o=/meta\.xml/,s=/styles\.xml/,a=/mimetype/,u=await Cl(r,M=>!!M.match(t)||!!M.match(n)||!!M.match(o)||!!M.match(s)||!!M.match(a)||!!e.extractAttachments&&!!M.match(i)),c=u.find(M=>M.path==="mimetype"),f="odt";if(c){let M=c.content.toString().trim();M.includes("spreadsheet")?f="ods":M.includes("presentation")?f="odp":M.includes("text")&&(f="odt")}let h=u.find(M=>M.path==="content.xml")||u.find(M=>M.path.match(t)),d=u.find(M=>M.path==="styles.xml"),g=[],b=[],v={},w={},y={};d&&(M=>{let H=Ut(M),j=Re(H,"style:style");for(let Q of j){let K=Q.getAttribute("style:name");if(!K)continue;let ee={},P=Re(Q,"style:paragraph-properties")[0];if(P){let pe=P.getAttribute("fo:text-align");if(pe){let R={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};R[pe]&&(ee.alignment=R[pe])}Re(P,"style:drop-cap")[0]&&(ee.dropCap=!0)}Object.keys(ee).length>0&&(w[K]=ee);let I=Re(Q,"style:text-properties")[0],k=Re(Q,"style:table-cell-properties")[0],ne={};if(k){let pe=k.getAttribute("fo:background-color");pe&&pe!=="transparent"&&(ne.backgroundColor=pe)}if(I){(I.getAttribute("fo:font-weight")==="bold"||I.getAttribute("style:font-weight-asian")==="bold")&&(ne.bold=!0),(I.getAttribute("fo:font-style")==="italic"||I.getAttribute("style:font-style-asian")==="italic")&&(ne.italic=!0),I.getAttribute("style:text-underline-style")==="solid"&&(ne.underline=!0),I.getAttribute("style:text-line-through-style")==="solid"&&(ne.strikethrough=!0);let pe=I.getAttribute("fo:font-size")||I.getAttribute("style:font-size-asian");pe&&(ne.size=pe);let F=I.getAttribute("fo:color");F&&(ne.color=F);let R=I.getAttribute("fo:background-color");R&&R!=="transparent"&&(ne.backgroundColor=R);let te=I.getAttribute("style:font-name")||I.getAttribute("fo:font-family");te&&(ne.font=te);let ge=I.getAttribute("style:text-position");ge&&(ge.startsWith("sub")&&(ne.subscript=!0),ge.startsWith("super")&&(ne.superscript=!0)),Object.keys(ne).length>0&&(v[K]=ne)}}})(d.content.toString());let E=(M,H,j,Q,K,ee={},P)=>{let I=[],k="";if(!M.childNodes)return{text:"",children:[]};for(let ne=0;ne<M.childNodes.length;ne++){let pe=M.childNodes[ne];if(pe.nodeType===3){let F=pe.textContent||"";F&&(k+=F,I.push({type:"text",text:F,formatting:ee,metadata:P?{...P}:void 0}))}else if(pe.nodeType===1){let F=pe,R=F.tagName;if(R==="text:s"){let te=parseInt(F.getAttribute("text:c")||"1"),ge=" ".repeat(te);k+=ge,I.push({type:"text",text:ge,formatting:ee,metadata:P?{...P}:void 0})}else if(R==="text:tab")k+="	",I.push({type:"text",text:"	",formatting:ee,metadata:P?{...P}:void 0});else if(R==="text:line-break")k+=`
`,I.push({type:"text",text:`
`,formatting:ee,metadata:P?{...P}:void 0});else if(R==="text:span"){let te=F.getAttribute("text:style-name"),ge=te?{...ee,...H[te]}:ee,Ce=E(F,H,j,Q,K,ge,P);k+=Ce.text,I.push(...Ce.children)}else if(R==="text:a"){let te=F.getAttribute("xlink:href")||"",ge=te.startsWith("#")?"internal":"external",xe=E(F,H,j,Q,K,ee,{link:te,linkType:ge});k+=xe.text,I.push(...xe.children)}else if(R==="text:note"&&!j.ignoreNotes){let te=F.getAttribute("text:note-class")||"footnote",ge=F.getAttribute("text:id")||F.getAttribute("xml:id")||void 0,Ce=Re(F,"text:note-body")[0];if(Ce){let xe=Re(Ce,"text:p"),he=[],_e="";for(let Ie of xe){let Te=S(Ie,K,H,j);_e+=(_e?" ":"")+Te.text;let We={type:"paragraph",text:Te.text,children:Te.children,metadata:Te.alignment?{alignment:Te.alignment}:void 0};he.push(We)}let Oe={type:"note",text:_e,children:he,metadata:{noteType:te,noteId:ge}};j.putNotesAtLast?Q.push(Oe):I.push(Oe)}}else if(R==="draw:frame"){let te=F,ge="",Ce=Re(te,"svg:title")[0],xe=Re(te,"svg:desc")[0];Ce&&Ce.textContent?ge=Ce.textContent:xe&&xe.textContent&&(ge=xe.textContent);let he="",_e=Re(te,"draw:image");if(_e.length>0&&(he=_e[0].getAttribute("xlink:href")||"",he)){let Ie=he.split("/");he=Ie[Ie.length-1]}let Oe={type:"image",text:"",children:[],metadata:{attachmentName:he,...ge?{altText:ge}:{}}};j.includeRawContent&&(Oe.rawContent=te.toString()),I.push(Oe)}}}return{text:k,children:I}},S=(M,H,j,Q)=>{let K=M.getAttribute("text:style-name"),ee=K?H[K]:void 0,P=ee?.alignment,I=ee?.dropCap,k=E(M,j,Q,b,H);if(K&&k.children.forEach(ne=>{if(ne.type==="text"){ne.metadata||(ne.metadata={});let pe=ne.metadata;pe.style||(pe.style=K)}}),k.children.length===0&&M.textContent){let ne=M.textContent;ne.trim()&&(k.text=ne,k.children.push({type:"text",text:ne}))}if(I&&k.children.length>0){let ne=k.children[0];if(ne.type==="text"&&ne.text)if(ne.text.length===1)ne.formatting={...ne.formatting,size:"58.5pt"};else{let pe=ne.text[0],F=ne.text.substring(1),R={type:"text",text:pe,formatting:{...ne.formatting,size:"58.5pt"},metadata:ne.metadata};ne.text=F,k.children.unshift(R)}}return{text:k.text,children:k.children,alignment:P,style:K||void 0}},A=(M,H,j,Q)=>{let K=[],ee=En(M,"table:table-row"),P=0;for(let I of ee){let k=[],ne=En(I,"table:table-cell"),pe=parseInt(I.getAttribute("table:number-rows-repeated")||"1"),F=0;for(let R of ne){let te=[],ge={value:""},Ce=parseInt(R.getAttribute("table:number-columns-repeated")||"1"),xe=parseInt(R.getAttribute("table:number-columns-spanned")||"1"),he=parseInt(R.getAttribute("table:number-rows-spanned")||"1"),_e=Ie=>{if(Ie.childNodes)for(let Te=0;Te<Ie.childNodes.length;Te++){let We=Ie.childNodes[Te];if(We.nodeType===1){let qe=We;if(qe.tagName==="text:p"||qe.tagName==="text:h"){let Ge=S(qe,H,j,Q),x={type:qe.tagName==="text:h"?"heading":"paragraph",text:Ge.text,children:Ge.children,metadata:{...Ge.alignment?{alignment:Ge.alignment}:{},...Ge.style?{style:Ge.style}:{}}};Object.keys(x.metadata||{}).length===0&&delete x.metadata,qe.tagName==="text:h"&&(x.metadata||(x.metadata={}),x.metadata.level=parseInt(qe.getAttribute("text:outline-level")||"1")),Q.includeRawContent&&(x.rawContent=qe.toString()),te.push(x),ge.value+=Ge.text,ge.value&&!ge.value.endsWith(`
`)&&(ge.value+=`
`)}else if(qe.tagName==="table:table"){let Ge=A(qe,H,j,Q);te.push(Ge)}else(qe.tagName==="draw:frame"||qe.tagName==="draw:text-box")&&_e(qe)}}};_e(R);let Oe=ge.value;Oe.endsWith(`
`)&&(Oe=Oe.slice(0,-1));for(let Ie=0;Ie<Ce;Ie++){let Te={type:"cell",text:Oe,children:te.length>0?Ie===0?te:JSON.parse(JSON.stringify(te)):[],metadata:{row:P,col:F}},We=Te.metadata;xe>1&&(We.colSpan=xe),he>1&&(We.rowSpan=he),Q.includeRawContent&&(Te.rawContent=R.toString()),k.push(Te),F++}}for(let R=0;R<pe;R++){let te={type:"row",children:R===0?k:JSON.parse(JSON.stringify(k))};R>0&&te.children?.forEach(ge=>{ge.metadata&&"row"in ge.metadata&&(ge.metadata.row=P)}),Q.includeRawContent&&(te.rawContent=I.toString()),K.push(te),P++}}return{type:"table",children:K}};h&&(M=>{let H=Ut(M),j=Re(H,"office:body")[0],Q=Re(H,"office:automatic-styles")[0];if(Q){let ee=Re(Q,"style:style");for(let P of ee){let I=P.getAttribute("style:name");if(!I)continue;let k=Re(P,"style:paragraph-properties")[0],ne={};if(k){let F=k.getAttribute("fo:text-align");if(F){let te={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};te[F]&&(ne.alignment=te[F])}Re(k,"style:drop-cap")[0]&&(ne.dropCap=!0)}Object.keys(ne).length>0&&(w[I]=ne);let pe=Re(P,"style:text-properties")[0];if(pe){let F={};(pe.getAttribute("fo:font-weight")==="bold"||pe.getAttribute("style:font-weight-asian")==="bold")&&(F.bold=!0),(pe.getAttribute("fo:font-style")==="italic"||pe.getAttribute("style:font-style-asian")==="italic")&&(F.italic=!0),pe.getAttribute("style:text-underline-style")==="solid"&&(F.underline=!0),pe.getAttribute("style:text-line-through-style")==="solid"&&(F.strikethrough=!0);let R=pe.getAttribute("fo:font-size")||pe.getAttribute("style:font-size-asian");R&&(F.size=R);let te=pe.getAttribute("fo:color");te&&(F.color=te);let ge=pe.getAttribute("fo:background-color");ge&&ge!=="transparent"&&(F.backgroundColor=ge);let Ce=pe.getAttribute("style:font-name")||pe.getAttribute("fo:font-family");Ce&&(F.font=Ce);let xe=pe.getAttribute("style:text-position");xe&&(xe.startsWith("sub")&&(F.subscript=!0),xe.startsWith("super")&&(F.superscript=!0)),Object.keys(F).length>0&&(v[I]=F)}}}let K=(ee,P,I=!1)=>{if(ee.tagName==="text:p"){let k=S(ee,w,v,e),ne=I||(ee.getAttribute("text:style-name")||"").toLowerCase().includes("title")?"heading":"paragraph",pe={type:ne,text:k.text,children:k.children,metadata:{...k.alignment?{alignment:k.alignment}:{},...k.style?{style:k.style}:{}}};ne==="heading"&&pe.metadata&&(pe.metadata.level=pe.metadata.level||1),Object.keys(pe.metadata||{}).length===0&&delete pe.metadata,e.includeRawContent&&(pe.rawContent=ee.toString()),P.push(pe)}else if(ee.tagName==="text:h"){let k=parseInt(ee.getAttribute("text:outline-level")||"1"),ne=S(ee,w,v,e),pe={type:"heading",text:ne.text,children:ne.children,metadata:{level:k,...ne.alignment?{alignment:ne.alignment}:{},...ne.style?{style:ne.style}:{}}};e.includeRawContent&&(pe.rawContent=ee.toString()),P.push(pe)}else if(ee.tagName==="table:table"){let k=A(ee,w,v,e);e.includeRawContent&&(k.rawContent=ee.toString()),P.push(k)}else if(ee.tagName==="text:list"){let k=En(ee,"text:list-item"),ne=ee.getAttribute("text:style-name")||ee.getAttribute("xml:id"),pe=ne||`list-${P.length}`,F="unordered",R=!1,te=ne;if(!te){let he=ee.parentNode;for(;he&&!te&&!(he.nodeName==="text:list"&&(te=he.getAttribute("text:style-name"),te));)he=he.parentNode}if(te){let he=Re(Ut(h?.content.toString()||""),"office:automatic-styles")[0];if(he){let _e=Re(he,"text:list-style");for(let Oe of _e)if(Oe.getAttribute("style:name")===te){let Ie=Re(Oe,"text:list-level-style-bullet"),Te=Re(Oe,"text:list-level-style-number"),We=Re(Oe,"text:list-level-style-image");Te.length>0?(F="ordered",R=Te.some(qe=>!!qe.getAttribute("style:num-format"))):Ie.length>0&&(F="unordered",R=Ie.some(qe=>!!qe.getAttribute("text:bullet-char"))),We.length>0&&(R=!0);break}}if(d&&!R){let _e=Ut(d.content.toString()),Oe=Re(_e,"text:list-style");for(let Ie of Oe)if(Ie.getAttribute("style:name")===te){let Te=Re(Ie,"text:list-level-style-bullet"),We=Re(Ie,"text:list-level-style-number"),qe=Re(Ie,"text:list-level-style-image");We.length>0?(F="ordered",R=We.some(Ge=>!!Ge.getAttribute("style:num-format"))):Te.length>0&&(F="unordered",R=Te.some(Ge=>!!Ge.getAttribute("text:bullet-char"))),qe.length>0&&(R=!0);break}}}if(!R){for(let he=0;he<k.length;he++){let _e=k[he];if(_e.childNodes)for(let Oe=0;Oe<_e.childNodes.length;Oe++){let Ie=_e.childNodes[Oe];Ie.nodeType===1&&K(Ie,P,I)}}return}let ge=0,Ce=ee.parentNode;for(;Ce;)Ce.nodeName==="text:list"&&ge++,Ce=Ce.parentNode;y[pe]||(y[pe]={});let xe=ge.toString();y[pe][xe]===void 0&&(y[pe][xe]=-1);for(let he=0;he<k.length;he++){let _e=k[he];y[pe][xe]++;let Oe=y[pe][xe];for(let Ie=ge+1;Ie<10;Ie++)y[pe][Ie.toString()]!==void 0&&(y[pe][Ie.toString()]=-1);if(_e.childNodes)for(let Ie=0;Ie<_e.childNodes.length;Ie++){let Te=_e.childNodes[Ie];if(Te.nodeType===1){let We=Te;if(We.tagName==="text:p"){let qe=S(We,w,v,e),Ge={type:"list",text:qe.text,children:qe.children,metadata:{listType:F,indentation:ge,itemIndex:Oe,listId:pe,alignment:qe.alignment||"left",style:qe.style}};e.includeRawContent&&(Ge.rawContent=We.toString()),P.push(Ge)}else if(We.tagName==="text:h"){let qe=parseInt(We.getAttribute("text:outline-level")||"1"),Ge=S(We,w,v,e),x={type:"list",text:Ge.text,children:Ge.children,metadata:{listType:F,indentation:ge,itemIndex:Oe,listId:pe,...Ge.alignment?{alignment:Ge.alignment}:{},style:Ge.style}};e.includeRawContent&&(x.rawContent=We.toString()),P.push(x)}else We.tagName==="text:list"&&K(We,P,I)}}}}else if(ee.tagName==="draw:frame"){let k=ee.getAttribute("presentation:class"),ne=k==="title"||k==="sub-title",pe=Re(ee,"draw:text-box")[0],F=Re(ee,"draw:image")[0],R=Re(ee,"table:table")[0],te=Re(ee,"draw:object")[0];if(pe)K(pe,P,ne||I);else if(R){let ge=A(R,w,v,e);e.includeRawContent&&(ge.rawContent=R.toString()),P.push(ge)}else if(F){let ge="",Ce=Re(ee,"svg:title")[0],xe=Re(ee,"svg:desc")[0];Ce&&Ce.textContent?ge=Ce.textContent:xe&&xe.textContent&&(ge=xe.textContent);let he=F.getAttribute("xlink:href")||"";if(he){let Oe=he.split("/");he=Oe[Oe.length-1]}let _e={type:"image",text:"",children:[],metadata:{attachmentName:he,...ge?{altText:ge}:{}}};e.includeRawContent&&(_e.rawContent=ee.toString()),P.push(_e)}else if(te){let ge=te.getAttribute("xlink:href");if(ge){let Ce=ge.split("/")[0],xe=`${Ce}/content.xml`,he=u.find(_e=>_e.path===xe||_e.path.endsWith(xe));if(he){let _e=Xu(he.content),Oe={type:"chart",text:_e.rawTexts.join(" "),metadata:{attachmentName:Ce,chartData:_e}};e.includeRawContent&&(Oe.rawContent=ee.toString()),P.push(Oe)}else{let _e={type:"chart",text:"",metadata:{attachmentName:Ce}};e.includeRawContent&&(_e.rawContent=ee.toString()),P.push(_e)}}}}else if(ee.childNodes)for(let k=0;k<ee.childNodes.length;k++){let ne=ee.childNodes[k];ne.nodeType===1&&K(ne,P,I)}};if(f==="ods"){let ee=Re(j,"office:spreadsheet")[0];if(ee){let P=Re(ee,"table:table");for(let I=0;I<P.length;I++){let k=P[I],ne=k.getAttribute("table:name")||`Sheet${I+1}`,pe=[],F=Re(k,"table:table-row"),R=0;for(let ge=0;ge<F.length;ge++){let Ce=F[ge],xe=[],he=Re(Ce,"table:table-cell"),_e=0,Oe=parseInt(Ce.getAttribute("table:number-rows-repeated")||"1");for(let Ie=0;Ie<he.length;Ie++){let Te=he[Ie],We=parseInt(Te.getAttribute("table:number-columns-repeated")||"1"),qe="",Ge=[],x=Re(Te,"text:p");for(let m=0;m<x.length;m++){let N=x[m],re=Re(N,"text:span");if(re.length>0)for(let D of re){let fe=D.getAttribute("text:style-name"),be=fe?v[fe]:{},Se=D.textContent||"";qe+=Se;let Y={type:"text",text:Se,formatting:be};Ge.push(Y)}else{let D=N.textContent||"";if(qe+=D,D.trim()){let fe={type:"text",text:D,formatting:{}};Ge.push(fe)}}m<x.length-1&&(qe+=`
`)}let p=Re(Te,"draw:frame");for(let m of p){let N="",re=Re(m,"svg:title")[0],D=Re(m,"svg:desc")[0];re&&re.textContent?N=re.textContent:D&&D.textContent&&(N=D.textContent);let fe="",be=Re(m,"draw:image");if(be.length>0){let me=be[0].getAttribute("xlink:href");if(me){let $=me.split("/");fe=$[$.length-1]}}let Se="",Y=Re(m,"draw:object");if(Y.length>0){let me=Y[0].getAttribute("xlink:href");me&&(Se=me.split("/")[0])}if(be.length>0){let me={type:"image",text:"",children:[],metadata:{attachmentName:fe,...N?{altText:N}:{}}};e.includeRawContent&&(me.rawContent=m.toString()),Ge.push(me)}else if(Se){let me={type:"chart",text:"",children:[],metadata:{attachmentName:Se}};Ge.push(me)}}for(let m=0;m<We;m++){if(qe||Ge.length>0||f!=="ods"){let N={type:"cell",text:qe,children:Ge,metadata:{row:R,col:_e}};e.includeRawContent&&(N.rawContent=Te.toString()),xe.push(N)}_e++}}if(xe.length>0)for(let Ie=0;Ie<Oe;Ie++){let Te={type:"row",children:JSON.parse(JSON.stringify(xe)),metadata:void 0};Ie>0&&Te.children?.forEach(We=>{We.metadata&&"row"in We.metadata&&(We.metadata.row=R)}),e.includeRawContent&&(Te.rawContent=Ce.toString()),pe.push(Te),R++}else R+=Oe}let te={type:"sheet",children:pe,metadata:{sheetName:ne}};e.includeRawContent&&(te.rawContent=k.toString()),g.push(te)}}}else if(f==="odp"){let ee=Re(j,"office:presentation")[0];if(ee){let P=En(ee,"draw:page"),I=[];for(let k=0;k<P.length;k++){let ne=P[k],pe={type:"slide",children:[],metadata:{slideNumber:k+1}},F,R=ne.childNodes;if(R)for(let te=0;te<R.length;te++){let ge=R[te];if(ge.nodeType===1){let Ce=ge;if(Ce.tagName==="presentation:notes"){e.ignoreNotes||(F={type:"note",children:[],metadata:{slideNumber:k+1,noteId:`slide-note-${k+1}`}},K(Ce,F.children));continue}K(Ce,pe.children)}}e.includeRawContent&&(pe.rawContent=ne.toString()),g.push(pe),F&&F.children&&F.children.length>0&&(e.putNotesAtLast?I.push(F):g.push(F))}I.length>0&&g.push(...I)}}else{let ee=Re(j,"office:text")[0];ee&&K(ee,g)}})(h.content.toString());let T=[],Z=u.filter(M=>M.path.match(/(Pictures|media)\/.*/));if(e.extractAttachments){let M=u.filter(H=>H.path.match(/Object \d+\/content\.xml/));for(let H of M){let j=Ut(H.content.toString());if(Re(j,"chart:chart").length>0){let K=H.path.split("/")[0],ee={type:"chart",mimeType:"application/vnd.oasis.opendocument.chart",data:H.content.toString("base64"),name:K,extension:"xml"},P=Xu(H.content);P.rawTexts.length>0&&(ee.chartData=P),T.push(ee)}}}if(e.extractAttachments)for(let M of Z){let H=Is(M.path.split("/").pop()||"image",M.content);if(T.push(H),e.ocr&&H.mimeType.startsWith("image/"))try{H.ocrText=(await ns(M.content,e.ocrLanguage)).trim()}catch(j){ci(`OCR failed for ${H.name}:`,e,j)}}let ie=u.find(M=>M.path.match(o)),G=ie?wl(ie.content.toString()):{},ae=(M,H)=>{let j=K=>{let ee=K.replace(/^\[|\]$/g,""),[P,I]=ee.split(":"),k=P.lastIndexOf(".");if(k===-1)return[K];let ne=P.substring(0,k).replace(/^'|'$/g,""),pe=P.substring(k+1).replace(/\$/g,""),F=pe;if(I)if(I.startsWith("."))F=I.substring(1).replace(/\$/g,"");else{let he=I.lastIndexOf(".");F=I.substring(he+1).replace(/\$/g,"")}let R=he=>{let _e=he.match(/[A-Z]+/),Oe=he.match(/\d+/);if(!_e||!Oe)return null;let Ie=_e[0],Te=0;for(let qe=0;qe<Ie.length;qe++)Te=Te*26+(Ie.charCodeAt(qe)-65+1);return Te-=1,{r:parseInt(Oe[0])-1,c:Te}},te=R(pe),ge=R(F);if(!te||!ge)return[K];let Ce=H.find(he=>he.type==="sheet"&&he.metadata?.sheetName===ne);if(!Ce||!Ce.children)return[K];let xe=[];for(let he of Ce.children)if(he.children)for(let _e of he.children){let Oe=_e.metadata;Oe&&Oe.row>=te.r&&Oe.row<=ge.r&&Oe.col>=te.c&&Oe.col<=ge.c&&xe.push(_e.text||"")}return xe.length>0?xe:[]};for(let K of M.dataSets){let ee=[];for(let P of K.values)P.startsWith("[")?ee.push(...j(P)):ee.push(P);K.values=ee}let Q=[];for(let K of M.labels)K.startsWith("[")?Q.push(...j(K)):Q.push(K);M.labels=Q,M.rawTexts=[],M.title&&M.rawTexts.push(M.title);for(let K of M.dataSets)K.name&&M.rawTexts.push(K.name),M.rawTexts.push(...M.labels),M.rawTexts.push(...K.values)};for(let M of T)M.type==="chart"&&M.chartData&&ae(M.chartData,g);(M=>{let H=new Set,j=P=>{for(let I of P){if(I.metadata&&"attachmentName"in I.metadata){let k=I.metadata.attachmentName;k&&H.add(k)}I.children&&j(I.children)}};j(M);let Q=T.filter(P=>P.type==="image"&&P.name&&!H.has(P.name)),K=0,ee=P=>{if((P.type==="image"||P.type==="chart")&&P.metadata&&"attachmentName"in P.metadata){let I=P.metadata.attachmentName;if(!I&&P.type==="image"&&K<Q.length&&(I=Q[K++].name,P.metadata.attachmentName=I),I){let k=T.find(ne=>ne.name===I);k&&(k.ocrText&&(P.text=k.ocrText),k.chartData&&P.type==="chart"&&(P.text=k.chartData.rawTexts.join(e.newlineDelimiter??`
`)))}}P.children&&P.children.forEach(ee)};M.forEach(ee)})(g);let V={};for(let M in v)V[M]={formatting:v[M],alignment:w[M]?.alignment};for(let M in w)V[M]||(V[M]={formatting:{},alignment:w[M]?.alignment});e.putNotesAtLast&&b.length>0&&g.push(...b);let ue=M=>{let H=[];if(M.children){for(let j of M.children)if(j.type==="row"&&j.children){let Q=[];for(let K of j.children)if(K.type==="cell"){let ee=I=>{let k=I.text||"";if(I.children&&I.children.length>0){let ne=I.children.map(ee).filter(pe=>pe!=="");ne.length>0&&(k+=(k?" ":"")+ne.join(" "))}return k},P=ee(K);Q.push({value:P})}Q.length>0&&H.push({cols:Q})}}return{type:"table",rows:H}},Ae=(M,H)=>{if(M.type!=="chart")return null;let j=M.metadata,Q=j;if(Q?.chartData)return{type:"chart",chartData:Q.chartData,chartType:Q.chartData.chartType};if(j?.attachmentName){let K=H.find(ee=>ee.name===j.attachmentName&&ee.type==="chart");if(K?.chartData)return{type:"chart",chartData:K.chartData,chartType:K.chartData.chartType}}return null},ve=(M,H)=>{let j=[],Q=K=>{if(K.type==="table")j.push(ue(K));else if(K.type==="chart"){let ee=Ae(K,H);ee&&j.push(ee)}else if(K.type==="image"){let P=K.metadata?.attachmentName;if(P){let I=H.find(k=>k.name===P&&k.type==="image");if(I){let k=Buffer.from(I.data,"base64");j.push({type:"image",buffer:k,mimeType:I.mimeType,filename:I.name})}}}else K.text&&K.text.trim()&&(!K.children||K.children.length===0||K.text.trim())&&j.push({type:"text",content:K.text});if(K.children)for(let ee of K.children)Q(ee)};for(let K of M)Q(K);return j},z=M=>M.filter(H=>H.type==="image").map(H=>({buffer:Buffer.from(H.data,"base64"),mimeType:H.mimeType,filename:H.name})),O=g.map(M=>{let H=j=>{let Q="";if(j.children&&j.children.length>0){let ee=j.children.some(P=>P.children&&P.children.length>0)?e.newlineDelimiter??`
`:"";Q+=j.children.map(H).filter(P=>P!="").join(ee)}else Q+=j.text||"";return Q};return H(M)}).filter(M=>M!="").join(e.newlineDelimiter??`
`),oe=ve(g,T),q=z(T);return console.log("OpenOffice Chart blocks",oe.filter(M=>M.type=="chart")),{type:f,metadata:{...G,styleMap:V},content:g,attachments:T,fullText:O,blocks:oe,images:q,toText:()=>O}};Ne();Le();ke();function T3(r){if(r)try{let e=r.startsWith("D:")?r.slice(2):r,t=parseInt(e.slice(0,4),10),n=parseInt(e.slice(4,6),10)-1,i=parseInt(e.slice(6,8),10)||1,o=parseInt(e.slice(8,10),10)||0,s=parseInt(e.slice(10,12),10)||0,a=parseInt(e.slice(12,14),10)||0,u=e.slice(14).match(/([+-Z])(\d{2})'?(\d{2})?'?/);if(u){let c=u[1]==="-"?-1:1,f=parseInt(u[2],10)||0,h=parseInt(u[3],10)||0,d=c*(f*60+h),g=Date.UTC(t,n,i,o,s,a);return new Date(g-d*6e4)}return new Date(t,n,i,o,s,a)}catch{try{return new Date(r)}catch{return}}}function EV(r){let e=[];for(let i of r)for(let o of i)o.type==="text"&&o.height>0&&e.push(o.height);if(e.length===0)return{median:12,max:12};e.sort((i,o)=>i-o);let t=e[Math.floor(e.length/2)],n=e[e.length-1];return{median:t,max:n}}function AV(r,e){if(r<=e.median*1.2)return 0;let t=r/e.median;return t>=2?1:t>=1.7?2:t>=1.5?3:t>=1.35?4:t>=1.2?5:0}function xV(r,e){let t=r.x+r.width/2,n=r.y+r.height/2;for(let i of e){let[o,s,a,u]=i.rect,c=Math.min(o,a),f=Math.max(o,a),h=Math.min(s,u),d=Math.max(s,u);if(t>=c&&t<=f&&n>=h&&n<=d)return i}}function SV(r,e,t){let n=Math.floor((24*r+31)/32)*4,i=n-r*3,o=54,s=n*e,a=o+s,u=Buffer.alloc(a);u.write("BM",0),u.writeUInt32LE(a,2),u.writeUInt32LE(0,6),u.writeUInt32LE(o,10),u.writeUInt32LE(40,14),u.writeInt32LE(r,18),u.writeInt32LE(-e,22),u.writeUInt16LE(1,26),u.writeUInt16LE(24,28),u.writeUInt32LE(0,30),u.writeUInt32LE(s,34),u.writeInt32LE(2835,38),u.writeInt32LE(2835,42),u.writeUInt32LE(0,46),u.writeUInt32LE(0,50);let c=o;for(let f=0;f<e;f++){for(let h=0;h<r;h++){let d=(f*r+h)*4,g=t[d+0],b=t[d+1],v=t[d+2],y=t[d+3]/255,_=Math.round(g*y+255*(1-y)),E=Math.round(b*y+255*(1-y)),S=Math.round(v*y+255*(1-y));u[c+0]=S,u[c+1]=E,u[c+2]=_,c+=3}for(let h=0;h<i;h++)u[c]=0,c++}return u}function TV(r,e,t,n){let i;if(n===1){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++){let s=r[o];i[o*4]=s,i[o*4+1]=s,i[o*4+2]=s,i[o*4+3]=255}}else if(n===2||r.length===e*t*3){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++)i[o*4]=r[o*3],i[o*4+1]=r[o*3+1],i[o*4+2]=r[o*3+2],i[o*4+3]=255}else i=r instanceof Uint8ClampedArray?r:new Uint8ClampedArray(r);return Buffer.from(i.buffer,i.byteOffset,i.byteLength)}var C3=async(r,e)=>{let t;if(typeof window>"u"){let S=new Function("specifier","return import(specifier)");try{t=await S("pdfjs-dist/legacy/build/pdf.mjs")}catch{t=await S("pdfjs-dist")}}else t=await Promise.resolve().then(()=>(S3(),x3));if(e.pdfWorkerSrc)t.GlobalWorkerOptions.workerSrc=e.pdfWorkerSrc;else if(typeof window<"u")t.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";else try{let S=xu.resolve("pdfjs-dist/legacy/build/pdf.worker.mjs");t.GlobalWorkerOptions.workerSrc=S}catch(S){e.outputErrorToConsole&&console.warn("[PdfParser] Could not auto-resolve local worker path:",S)}let n=new Uint8Array(r),i=t.getDocument({data:n,verbosity:0}),o;try{o=await i.promise}catch(S){throw S.message?.includes("workerSrc")||S.message?.includes('No "GlobalWorkerOptions.workerSrc" specified')?ia("PDF_WORKER_MISSING",e):S}let s=[],a=[],u=o.numPages,c=[],h=(await o.getMetadata().catch(()=>({info:{}}))).info,d={pages:u,title:h?.Title||void 0,author:h?.Author||void 0,subject:h?.Subject||void 0,description:h?.Keywords||void 0,created:T3(h?.CreationDate),modified:T3(h?.ModDate)};try{let S=await o.getAttachments();if(S&&e.extractAttachments)for(let A in S){let B=S[A],T=Buffer.from(B.content),Z=Is(B.filename,T);a.push(Z)}}catch(S){e.outputErrorToConsole&&console.error("Error extracting embedded attachments:",S)}for(let S=1;S<=u;S++){let A,B,T=[];try{A=await o.getPage(S),B=await A.getTextContent()}catch(ie){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${S}:`,ie),c.push(T);continue}let Z=A.commonObjs;for(let ie of B.items){let G=ie.transform,ae=G[4],U=G[5],V=ie.width||0,ue=ie.height||Math.abs(G[3])||12,Ae={},ve;if(ie.fontName&&Z)try{if(Z.has(ie.fontName)){let z=await new Promise(O=>{Z.get(ie.fontName,oe=>O(oe))});if(z?.name){ve=z.name.replace(/^[A-Z]{6}\+/,""),Ae.font=ve;let O=z.name.toLowerCase();O.includes("bold")&&(Ae.bold=!0),(O.includes("italic")||O.includes("oblique"))&&(Ae.italic=!0)}}}catch{}ue>0&&(Ae.size=Math.round(ue).toString()),T.push({type:"text",x:ae,y:U,width:V,height:ue,text:ie.str,fontName:ve,formatting:Ae})}if(e.extractAttachments||e.ocr)try{let ie=await A.getOperatorList(),G=ie.fnArray,ae=ie.argsArray;for(let U=0;U<G.length;U++){let V=G[U];if(V===t.OPS.dependency){let ue=ae[U];for(let Ae of ue)try{if(A.objs.has(Ae))continue;await new Promise(ve=>{let z=setTimeout(()=>{ve()},500);A.objs.get(Ae,O=>{clearTimeout(z),ve()})})}catch(ve){e.outputErrorToConsole&&console.error(`[PdfParser] Failed to load dependency ${Ae}:`,ve)}}if(V===t.OPS.paintImageXObject||V===t.OPS.paintXObject){let ue=ae[U][0];try{let Ae=A.objs.has(ue),ve=A.objs;if(!Ae&&A.commonObjs.has(ue)&&(Ae=!0,ve=A.commonObjs),Ae){let O=await new Promise(oe=>{ve.get(ue,q=>oe(q))});if(typeof window<"u"&&!O.data&&O.bitmap)try{let oe=document.createElement("canvas");oe.width=O.width,oe.height=O.height;let q=oe.getContext("2d");q&&(q.drawImage(O.bitmap,0,0),O.data=q.getImageData(0,0,O.width,O.height).data,O.kind=3)}catch(oe){e.outputErrorToConsole&&console.error("[PdfParser] Failed to extract from ImageBitmap:",oe)}if(O?.data&&O.width>0&&O.height>0){let oe=0,q=0;for(let M=U-1;M>=0;M--)if(G[M]===t.OPS.transform){oe=ae[M][4],q=ae[M][5];break}T.push({type:"image",x:oe,y:q,name:ue,data:O.data,width:O.width,height:O.height,kind:O.kind})}}}catch{}}}}catch(ie){e.outputErrorToConsole&&console.error(`Error extracting images from page ${S}:`,ie)}c.push(T)}let g=EV(c);for(let S=0;S<c.length;S++){let A=S+1,B;try{B=await o.getPage(A)}catch(ue){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${A} in second pass:`,ue);continue}let T=c[S],Z=[],ie=[];try{let ue=await B.getAnnotations();for(let Ae of ue)Ae.subtype==="Link"&&Ae.rect&&ie.push({rect:Ae.rect,url:Ae.url,dest:Ae.dest})}catch(ue){e.outputErrorToConsole&&console.error(`Error extracting annotations from page ${A}:`,ue)}T.sort((ue,Ae)=>Math.abs(Ae.y-ue.y)>5?Ae.y-ue.y:ue.x-Ae.x);let G=null,ae=0,U=-1,V=0;for(let ue of T)if(ue.type==="text"){let Ae=ue.text;if(!Ae)continue;if(U!==-1&&Math.abs(ue.y-U)>5&&G&&((G.text||"").trim().length>0&&Z.push(G),G=null),!G&&Ae.trim().length===0){U=ue.y;continue}let z=AV(ue.height,g);if(G||(z>0?G={type:"heading",text:"",children:[],metadata:{level:z}}:G={type:"paragraph",text:"",children:[]},ae=ue.height),Ae.trim().length===0){if(G.children&&G.children.length>0){let M=G.children[G.children.length-1];M.type==="text"&&M.text&&(M.text+=Ae,G.text+=Ae)}U=ue.y;continue}if(G.text&&G.text.length>0&&!G.text.endsWith(" ")&&(G.text+=" ",G.children&&G.children.length>0)){let M=G.children[G.children.length-1];M.type==="text"&&M.text&&(M.text+=" ")}G.text+=Ae;let O=xV(ue,ie),oe;O&&(O.url?oe={link:O.url,linkType:O.url.startsWith("#")?"internal":"external"}:O.dest&&(oe={link:typeof O.dest=="string"?`#${O.dest}`:"#internal",linkType:"internal"}));let q=!1;if(G.children&&G.children.length>0&&!oe){let M=G.children[G.children.length-1];M.type==="text"&&CV(M.formatting,ue.formatting)&&!M.metadata&&(M.text=(M.text||"")+Ae,q=!0)}if(!q){let M={type:"text",text:Ae,formatting:Object.keys(ue.formatting).length>0?ue.formatting:void 0};oe&&(M.metadata=oe),G.children?.push(M)}U=ue.y}else if(ue.type==="image"){G&&((G.text||"").trim().length>0&&Z.push(G),G=null),V++;let Ae=`pdf_image_p${A}_${V}.bmp`;if(e.extractAttachments)try{let ve=TV(ue.data,ue.width,ue.height,ue.kind),z=SV(ue.width,ue.height,new Uint8Array(ve)),O=Is(Ae,z);if(O.mimeType="image/bmp",e.ocr)try{ue.width>=10&&ue.height>=10&&(O.ocrText=(await ns(z,e.ocrLanguage)).trim())}catch(q){e.outputErrorToConsole&&console.error(`OCR failed for ${Ae}:`,q)}a.push(O);let oe={attachmentName:Ae};Z.push({type:"image",text:O.ocrText||"",metadata:{...oe}})}catch(ve){ci(`Failed to process image ${Ae}:`,e,ve)}}G&&(G.text||"").trim().length>0&&Z.push(G),s.push({type:"page",children:Z,text:Z.map(ue=>ue.text).join(e.newlineDelimiter??`

`),metadata:{pageNumber:A}})}let b=(S,A)=>{if(S.type!=="chart")return null;let B=S.metadata;if(B?.attachmentName){let T=A.find(Z=>Z.name===B.attachmentName&&Z.type==="chart");if(T?.chartData)return{type:"chart",chartData:T.chartData,chartType:T.chartData.chartType}}return null},v=(S,A)=>{let B=[],T=Z=>{if(Z.type==="chart"){let ie=b(Z,A);ie&&B.push(ie);return}else if(Z.type==="image"){let G=Z.metadata?.attachmentName;if(G){let ae=A.find(U=>U.name===G&&U.type==="image");if(ae){let U=Buffer.from(ae.data,"base64");B.push({type:"image",buffer:U,mimeType:ae.mimeType,filename:ae.name})}}return}else Z.text&&Z.text.trim()&&(Z.type==="text"||Z.type==="paragraph"||Z.type==="heading")&&B.push({type:"text",content:Z.text.trim()});if(Z.children)for(let ie of Z.children)T(ie)};for(let Z of S)T(Z);return B},w=S=>S.filter(A=>A.type==="image").map(A=>({buffer:Buffer.from(A.data,"base64"),mimeType:A.mimeType,filename:A.name})),y=s.map(S=>S.text).join(e.newlineDelimiter??`

`),_=v(s,a),E=w(a);return{type:"pdf",metadata:d,content:s,attachments:a,fullText:y,blocks:_,images:E,toText:()=>y}};function CV(r,e){if(!r&&!e)return!0;if(!r||!e)return!1;let t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(t[i]!==n[i]||r[o]!==e[o])return!1}return!0}Ne();Le();ke();var R3=Su(Ib());var D3=async(r,e)=>{let t=/ppt\/(notesSlides|slides)\/(notesSlide|slide)\d+.xml/g,n=/ppt\/slides\/slide\d+.xml/g,i=/ppt\/slides\/_rels\/slide\d+\.xml\.rels/,o=/lide(\d+)\.xml/,s=/ppt\/media\/.*/,a=/ppt\/charts\/chart\d+\.xml/,u=/docProps\/core\.xml/,c=new R3.XMLSerializer,f=await Cl(r,Q=>!!Q.match(e.ignoreNotes?n:t)||!!Q.match(u)||!!Q.match(i)||!!e.extractAttachments&&(!!Q.match(s)||!!Q.match(a))),h=f.find(Q=>Q.path.match(u)),d=h?wl(h.content.toString()):{};f.sort((Q,K)=>{let ee=Q.path.match(o),P=K.path.match(o),I=ee?parseInt(ee[1]):0,k=P?parseInt(P[1]):0;return I-k});let g=[],b=[],v={},w=new Map,y=0,_=0,E=!1,S=null,A=0,B={},T=Q=>{let K=Re(Q,"p:xfrm")[0];if(K||(K=Re(Q,"a:xfrm")[0]),!K)return;let ee=Re(K,"a:off")[0],P=ee?parseInt(ee.getAttribute("x")||"0",10):0,I=ee?parseInt(ee.getAttribute("y")||"0",10):0,k=Re(K,"a:ext")[0],ne=k?parseInt(k.getAttribute("cx")||"0",10):0,pe=k?parseInt(k.getAttribute("cy")||"0",10):0,F=K.getAttribute("rot"),R=F?parseInt(F,10)/6e4:void 0;if(ne>0&&pe>0)return{x:P,y:I,width:ne,height:pe,...R!==void 0?{rotation:R}:{}}},Z=Q=>{let K=[],ee=Re(Q,"a:tr");for(let P=0;P<ee.length;P++){let I=ee[P],k=[],ne=Re(I,"a:tc");for(let F=0;F<ne.length;F++){let R=ne[F],te=[],ge="",Ce=Re(R,"a:txBody")[0];if(Ce){let he=Re(Ce,"a:p");for(let _e of he){let Oe={type:"paragraph",text:"",children:[],metadata:{}};e.includeRawContent&&(Oe.rawContent=_e.toString());let Ie=Re(_e,"a:r");for(let Te of Ie){let We=Re(Te,"a:t")[0];if(We&&We.childNodes[0]){let qe=We.childNodes[0].nodeValue||"";Oe.text+=qe;let Ge=Re(Te,"a:rPr")[0],x={};if(Ge){Ge.getAttribute("b")==="1"&&(x.bold=!0),Ge.getAttribute("i")==="1"&&(x.italic=!0),Ge.getAttribute("u")==="sng"&&(x.underline=!0),Ge.getAttribute("strike")==="sngStrike"&&(x.strikethrough=!0);let p=Ge.getAttribute("sz");p&&(x.size=(parseInt(p)/100).toString()+"pt");let m=Re(Ge,"a:solidFill")[0];if(m){let re=Re(m,"a:srgbClr")[0];if(re){let D=re.getAttribute("val");D&&(x.color="#"+D)}}let N=Re(Ge,"a:latin")[0];if(N){let re=N.getAttribute("typeface");re&&(x.font=re)}}Oe.children?.push({type:"text",text:qe,formatting:x})}}te.push(Oe),ge+=Oe.text}}let xe={type:"cell",text:ge,children:te,metadata:{row:P,col:F}};k.push(xe)}let pe={type:"row",children:k};K.push(pe)}return{type:"table",children:K}},ie=(Q,K)=>{let ee=Re(Q,"a:blip")[0];if(!ee)return null;let P=ee.getAttribute("r:embed");if(!P)return null;let I=v[K]?.[P];if(!I||I.type!=="image")return null;let k=I.target,ne=Re(Q,"p:nvPicPr")[0],F=(ne?Re(ne,"p:cNvPr")[0]:null)?.getAttribute("descr")||void 0,R={type:"image",text:"",metadata:{attachmentName:k,altText:F}};return w.set(R,Q),R},G=(Q,K)=>{let ee=Re(Q,"a:graphicData")[0];if(!ee||!(ee.getAttribute("uri")==="http://schemas.openxmlformats.org/drawingml/2006/chart"))return null;let k=Re(ee,"c:chart")[0];if(!k)return null;let ne=k.getAttribute("r:id");if(!ne)return null;let pe=v[K]?.[ne];if(!pe||pe.type!=="chart")return null;let R={type:"chart",text:"",metadata:{attachmentName:pe.target}};return e.includeRawContent&&(R.rawContent=c.serializeToString(Q)),w.set(R,Q),R},ae=(Q,K)=>{let ee=Re(Q,"a:tbl")[0];if(ee){let P=Z(ee);if(w.set(P,Q),e.includeRawContent&&(P.rawContent=c.serializeToString(Q)),P.children&&P.children.length>0)return P}if(Q.getElementsByTagName("c:chart").length>0){let P=G(Q,K);if(P)return P}return null},U=(Q,K)=>{let ee=[],P=Re(Q,"p:nvSpPr")[0],I=P?Re(P,"p:nvPr")[0]:null,k=I?Re(I,"p:ph")[0]:null,ne=k?k.getAttribute("type"):"body",pe=ne==="title"||ne==="ctrTitle",F=Re(Q,"p:txBody")[0];if(F){let R=Re(F,"a:p");for(let te=0;te<R.length;te++){let ge=R[te],Ce={type:pe?"heading":"paragraph",text:"",children:[],metadata:pe?{level:1}:{}};w.set(Ce,Q);let xe=Re(ge,"a:pPr")[0],he=!1,_e="unordered",Oe=0;if(xe){let Te=xe.getAttribute("lvl");Te&&(Oe=parseInt(Te));let We=Re(xe,"a:buAutoNum")[0],qe=Re(xe,"a:buChar")[0],Ge=Re(xe,"a:buBlip")[0],x=Re(xe,"a:bu")[0];We?(he=!0,_e="ordered"):(qe||Ge||x)&&(he=!0,_e="unordered");let p=xe.getAttribute("algn");if(p){let m={l:"left",ctr:"center",r:"right",just:"justify"};m[p]&&(Ce.metadata.alignment=m[p])}}if(he){Ce.type="list";let Te=Oe;if(!E||_e!==S){y++;for(let qe in B)delete B[qe];_=0,B[Te]=0}else if(Te>A)_=0,B[Te]=0;else if(Te<A){for(let Ge in B){let x=parseInt(Ge);x>Te&&delete B[x]}_=(B[Te]||0)+1,B[Te]=_}else _=(B[Te]||0)+1,B[Te]=_;E=!0,S=_e,A=Te,Ce.metadata={...Ce.metadata,listType:_e,indentation:Te,listId:y.toString(),itemIndex:_,alignment:Ce.metadata?.alignment||"left"}}else E=!1,S=null,A=0;pe&&(Ce.metadata={...Ce.metadata,level:1}),e.includeRawContent&&(Ce.rawContent=ge.toString());let Ie=Re(ge,"a:r");for(let Te=0;Te<Ie.length;Te++){let We=Ie[Te],qe=Re(We,"a:t")[0];if(qe&&qe.childNodes[0]){let Ge=qe.childNodes[0].nodeValue||"";Ce.text+=Ge;let x=Re(We,"a:rPr")[0],p={};if(x){x.getAttribute("b")==="1"&&(p.bold=!0),x.getAttribute("i")==="1"&&(p.italic=!0),x.getAttribute("u")==="sng"&&(p.underline=!0),x.getAttribute("strike")==="sngStrike"&&(p.strikethrough=!0);let re=x.getAttribute("sz");re&&(p.size=(parseInt(re)/100).toString()+"pt");let D=Re(x,"a:solidFill")[0];if(D){let Y=Re(D,"a:srgbClr")[0];if(Y){let me=Y.getAttribute("val");me&&(p.color="#"+me)}}let fe=Re(x,"a:highlight")[0];if(fe){let Y=Re(fe,"a:srgbClr")[0];if(Y){let me=Y.getAttribute("val");me&&(p.backgroundColor="#"+me)}}let be=Re(x,"a:latin")[0];if(be){let Y=be.getAttribute("typeface");Y&&(p.font=Y)}let Se=x.getAttribute("baseline");if(Se){let Y=parseInt(Se);Y<0&&(p.subscript=!0),Y>0&&(p.superscript=!0)}}let m={type:"text",text:Ge,formatting:p},N=Re(We,"a:hlinkClick")[0];if(N){let re=N.getAttribute("r:id"),D=N.getAttribute("action"),fe,be;re&&v[K]&&v[K][re]&&v[K][re].type==="hyperlink"?(fe=v[K][re].target,be="external"):re&&v[K]&&v[K][re]&&v[K][re].type==="slide"?(fe=v[K][re].target,be="internal"):D&&(fe=D,be="internal"),fe&&(m.metadata={link:fe,linkType:be})}Ce.children?.push(m)}}Ce.text&&ee.push(Ce)}}return ee};function V(Q,K){let ee=[];for(let P of Array.from(Q?.childNodes||[])){if(P.nodeType!==1)continue;let I=P,k=I.tagName;if(k==="p:sp")ee.push(...U(I,K));else if(k==="p:pic"){let ne=ie(I,K);ne&&ee.push(ne)}else if(k==="p:graphicFrame"){let ne=ae(I,K);ne&&ee.push(ne)}else if(k==="p:grpSp"){let ne=I.getElementsByTagName("p:spTree")[0];ee.push(...V(ne,K))}}return ee}for(let Q of f)if(Q.path.match(i)){let K=Q.path.match(/slide(\d+)\.xml\.rels/);if(K){let ee=parseInt(K[1]);v[ee]={};let P=Ut(Q.content.toString()),I=Re(P,"Relationship");for(let k=0;k<I.length;k++){let ne=I[k].getAttribute("Id"),pe=I[k].getAttribute("Type"),F=I[k].getAttribute("Target");if(ne&&pe&&F){let R="other";pe.includes("relationships/image")?R="image":pe.includes("relationships/hyperlink")?R="hyperlink":pe.includes("relationships/chart")?R="chart":pe.includes("relationships/slide")?R="slide":pe.includes("relationships/notesSlide")&&(R="notes");let te=F;F.startsWith("http://")||F.startsWith("https://")||(te=te.split("/").pop()||""),v[ee][ne]={type:R,target:te}}}}}for(let Q of f){if(Q.path.match(s)||Q.path.match(a)||Q.path.match(i)||Q.path.match(u))continue;let K=Q.content.toString(),ee=Ut(K);e.includeRawContent&&b.push(K);let P=Q.path.match(o),I=P?parseInt(P[1]):0,k=Q.path.includes("notesSlide"),ne={type:k?"note":"slide",children:[],metadata:{slideNumber:I,...k?{noteId:`slide-note-${I}`}:{}}};e.includeRawContent&&(ne.rawContent=Q.content.toString());let pe=Re(ee,"p:spTree")[0];pe&&ne.children?.push(...V(pe,I)),ne.children&&ne.children.length>0&&g.push(ne)}let ue=[],Ae=f.filter(Q=>Q.path.match(/ppt\/media\/.*/)),ve=f.filter(Q=>Q.path.match(/ppt\/charts\/chart\d+\.xml/));if(e.extractAttachments){for(let K of Ae){let ee=Is(K.path.split("/").pop()||"image",K.content);if(ue.push(ee),e.ocr&&ee.mimeType.startsWith("image/"))try{ee.ocrText=(await ns(K.content,e.ocrLanguage)).trim()}catch(P){ci(`OCR failed for ${ee.name}:`,e,P)}}for(let K of ve){let ee={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:K.content.toString("base64"),name:K.path.split("/").pop()||"",extension:"xml"};ue.push(ee);try{let P=Xu(K.content);ee.chartData=P}catch(P){ci(`Failed to extract text from chart ${K.path}:`,e,P)}}let Q=K=>{for(let ee of K){if("attachmentName"in(ee.metadata||{})){let P=ee.metadata,I=ue.find(k=>k.name===P.attachmentName);I&&(ee.type==="image"&&(I.altText=P.altText,I.ocrText&&(ee.text=I.ocrText)),ee.type==="chart"&&(ee.text=I.chartData?.rawTexts.join(e.newlineDelimiter||`
`)))}ee.children&&Q(ee.children)}};Q(g)}!e.ignoreNotes&&e.putNotesAtLast&&g.sort((Q,K)=>{let ee=Q.type==="note"?1:0,P=K.type==="note"?1:0;return ee-P});let z=(Q,K)=>{let ee=[];if(Q.children){for(let P of Q.children)if(P.type==="row"&&P.children){let I=[];for(let k of P.children)if(k.type==="cell"){let ne=F=>{let R=F.text||"";if(F.children&&F.children.length>0){let te=F.children.map(ne).filter(ge=>ge!=="");te.length>0&&(R+=(R?" ":"")+te.join(" "))}return R},pe=ne(k);I.push({value:pe})}I.length>0&&ee.push({cols:I})}}return{type:"table",rows:ee,...K?{position:K}:{}}},O=(Q,K,ee)=>{if(Q.type!=="chart")return null;let P=Q.metadata,I=P;if(I?.chartData)return{type:"chart",chartData:I.chartData,chartType:I.chartData.chartType,...ee?{position:ee}:{}};if(P?.attachmentName){let k=K.find(ne=>ne.name===P.attachmentName&&ne.type==="chart");if(k?.chartData)return{type:"chart",chartData:k.chartData,chartType:k.chartData.chartType,...ee?{position:ee}:{}}}return null},oe=(Q,K,ee)=>{let P=[],I=k=>{let ne=ee.get(k),pe=ne?T(ne):void 0;if(k.type==="table"){P.push(z(k,pe));return}else if(k.type==="chart"){let F=O(k,K,pe);F&&P.push(F);return}else if(k.type==="image"){let R=k.metadata?.attachmentName;if(R){let te=K.find(ge=>ge.name===R&&ge.type==="image");if(te){let ge=Buffer.from(te.data,"base64");P.push({type:"image",buffer:ge,mimeType:te.mimeType,filename:te.name,...pe?{position:pe}:{}})}}return}if(k.text&&k.text.trim()&&(k.type==="text"||k.type==="paragraph"||k.type==="heading"||k.type==="list")&&P.push({type:"text",content:k.text.trim(),...pe?{position:pe}:{}}),k.children)for(let F of k.children)I(F)};for(let k of Q)I(k);return P},q=Q=>Q.filter(K=>K.type==="image").map(K=>({buffer:Buffer.from(K.data,"base64"),mimeType:K.mimeType,filename:K.name})),M=g.map(Q=>{let K=ee=>{let P="";return ee.children?P+=ee.children.map(K).filter(I=>I!="").join(ee.children[0]?.children?e.newlineDelimiter??`
`:""):P+=ee.text||"",P};return K(Q)}).filter(Q=>Q!="").join(e.newlineDelimiter??`
`),H=oe(g,ue,w),j=q(ue);return console.log("PowerpointChart blocks",H.filter(Q=>Q.type==="chart")),{type:"pptx",metadata:d,content:g,attachments:ue,fullText:M,blocks:H,images:j,toText:()=>M}};Ne();Le();ke();var RV={pngblip:"png",jpegblip:"jpeg",gifblip:"gif",tiffblip:"tiff",dibitmap:"bmp",wbitmap:"bmp"},DV={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",bmp:"image/bmp"},OT=class{constructor(e){this.index=0;this.buffer=e,this.length=e.length}parse(){let e={type:"group",content:[]},t=[e];for(;this.index<this.length;){let n=this.buffer[this.index],i=t[t.length-1];if(n===123){this.index++;let o={type:"group",content:[]};i.content.push(o),t.push(o)}else n===125?(this.index++,t.length>1&&t.pop()):n===92?(this.index++,this.parseControl(i)):n===13||n===10?this.index++:this.parseText(i)}return e}parseControl(e){if(this.index>=this.length)return;let t=this.buffer[this.index];if(t===123||t===125||t===92){e.content.push({type:"text",value:String.fromCharCode(t)}),this.index++;return}if(t===39){if(this.index++,this.index+1<this.length){let a=this.buffer.toString("utf8",this.index,this.index+2),u=parseInt(a,16);if(!isNaN(u)){let f={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}[u]||u;e.content.push({type:"text",value:String.fromCharCode(f)})}this.index+=2}return}if(t===42){e.content.push({type:"control",value:"*"}),this.index++;return}let n="";for(;this.index<this.length;){let a=this.buffer[this.index];if(a>=97&&a<=122||a>=65&&a<=90)n+=String.fromCharCode(a),this.index++;else break}let i,o=!1,s="";for(this.index<this.length&&this.buffer[this.index]===45&&(s+="-",this.index++);this.index<this.length;){let a=this.buffer[this.index];if(a>=48&&a<=57)s+=String.fromCharCode(a),this.index++,o=!0;else break}if(o&&(i=parseInt(s,10)),this.index<this.length&&this.buffer[this.index]===32&&this.index++,n==="bin"&&i!==void 0&&i>0){this.index+=i;return}e.content.push({type:"control",value:n,param:i}),(e.content.length===1&&e.type==="group"||e.content.length===2&&e.content[0].type==="control"&&e.content[0].value==="*")&&(e.destination=n)}parseText(e){let t="";for(;this.index<this.length;){let n=this.buffer[this.index];if(n===123||n===125||n===92||n===13||n===10)break;t+=String.fromCharCode(n),this.index++}t.length>0&&e.content.push({type:"text",value:t})}},I3=async(r,e)=>{try{let n=new OT(r).parse(),i=IV(n),o=OV(n),s=[],a=[],u=[],c="",f=[],h="",d="",g={},b=s,v=0,w="left",y=!1,_,E,S,A,B,T=[],Z=0,ie=0,G=()=>T.length>0?T[T.length-1]:void 0,ae=()=>{T.length===0&&T.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})},U=!1,V=!1,ue=0,Ae=[],ve={isMergedContinuation:!1},z=0,O=0,oe={},q=!1,M=!1,H,j,Q={},K=!1,ee,P,I={},k={},ne,pe=(Y,me)=>Y.bold!==me.bold||Y.italic!==me.italic||Y.underline!==me.underline||Y.strikethrough!==me.strikethrough||Y.size!==me.size||Y.font!==me.font||Y.color!==me.color||Y.backgroundColor!==me.backgroundColor||Y.subscript!==me.subscript||Y.superscript!==me.superscript,F=()=>{if(d){let Y={type:"text",text:d,formatting:{...g}};ne&&(Y.metadata={link:ne,linkType:_e(ne)}),f.push(Y),c+=d,d=""}},R=!1,te=()=>{F();let Y=c||f.length>0;if(U&&!V&&!R&&Y){let me=c,$=[...f],Pe=h;c="",f=[],h="",xe(),c=me,f=$,h=Pe}if(Y){let me="paragraph",$;if(E!==void 0&&E>0)me="heading",$={level:E},A=void 0,B=void 0;else if(y){me="list";let ze=S||A,C=_||B||"unordered",Fe=0;ze&&(k[ze]||(k[ze]={}),k[ze][v]===void 0?k[ze][v]=0:k[ze][v]++,Fe=k[ze][v]),$={listType:C,indentation:v,listId:ze||"",itemIndex:Fe,alignment:w},ze&&(A=ze),C&&(B=C)}let Pe={type:me,text:c,children:f,formatting:void 0,metadata:$};e.includeRawContent&&h&&(Pe.rawContent=h),U&&V?(ae(),G().currentCellContent.push(Pe)):b.push(Pe),c="",f=[],h="",v=0,y=!1,_=void 0,E=void 0,S=void 0}},ge=Y=>{te();let me=Y||G();if(!me)return;let $={type:"cell",text:me.currentCellContent.map(Pe=>Pe.text).join(`
`),children:[...me.currentCellContent],metadata:{row:me.rowIndex,col:me.currentCells.length}};return me.currentCellContent=[],$},Ce=Y=>{let me=Y||G();if(!me)return;let $=ge(me);if($&&($.children&&$.children.length>0||$.text)&&me.currentCells.push($),me.currentCells.length>0){let Pe={type:"row",text:me.currentCells.map(ze=>ze.text).filter(ze=>ze!=="").join(e.newlineDelimiter??`
`),children:[...me.currentCells]};me.rows.push(Pe),me.currentCells=[],me.rowIndex++}},xe=()=>{if(R)return;R=!0;let Y=G();if(!Y){R=!1;return}if(Ce(Y),Y.rows.length>0){ue++;let me={type:"table",text:Y.rows.map($=>$.text).join(`
`),children:[...Y.rows]};T.length>1?T[T.length-2].currentCellContent.push(me):b.push(me)}T.pop(),T.length===0&&(U=!1,V=!1),R=!1},he=Y=>{let me,$=Pe=>{if(Pe.type==="text"){let ze=Pe.value,C=ze.match(/HYPERLINK\s+"([^"]+)"/i);if(C)return C[1];let Fe=ze.match(/"(https?:\/\/[^"]+|mailto:[^"]+|#[^"]+)"/);if(Fe)return Fe[1]}else if(Pe.type==="group"){let ze=!1,C;for(let Fe of Pe.content)if(Fe.type==="text"){Fe.value.toUpperCase().includes("HYPERLINK")&&(ze=!0);let de=Fe.value.match(/"([^"]+)"/);de&&ze&&(C=de[1])}else if(Fe.type==="group"){let Ue=$(Fe);Ue&&(C=Ue)}if(C)return C}};for(let Pe of Y.content)if(Pe.type==="group"){let ze=$(Pe);if(ze)return ze}return me},_e=Y=>{let me=Y.trim();return me.startsWith("#")||!/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(me)?"internal":"external"},Oe=Y=>{let me="",$=Pe=>{if(Pe.type==="text")me+=Pe.value;else if(Pe.type==="group")for(let ze of Pe.content)$(ze)};for(let Pe of Y.content)$(Pe);return me},Ie=Y=>{let me,$="";for(let ze of Y.content)if(ze.type==="control"){let C=RV[ze.value];C&&(me=C)}else ze.type==="text"?$+=ze.value.replace(/[^0-9a-fA-F]/g,""):ze.type;if(!me||$.length===0)return;let Pe=DV[me];if(Pe)try{let ze=Buffer.from($,"hex"),C=me,Fe=`image_${u.length+1}.${C}`;return{type:"image",mimeType:Pe,data:ze.toString("base64"),name:Fe,extension:C}}catch{return}},Te=Y=>{if(!/^[a-zA-Z]/.test(Y.value))return`\\${Y.value}`;let me=`\\${Y.value}`;return Y.param!==void 0&&(me+=Y.param),me+=" ",me},We=Y=>Y.value.replace(/([\\{}])/g,"\\$1"),qe=(Y,me,$=0)=>{if(Y.type==="group"){let Pe=["fonttbl","colortbl","stylesheet","info","macpict","pmmetafile","wmetafile","dibitmap","bitmap","object","nextGenerator","header","footer","nonshppict","xml","private","upnp","ud","filetbl","operator","author","creatim","revtim","printim","comment","fldinst","listtext","pntext"],ze=!1,C=!1,Fe=!1,Ue=!1;if(Y.destination){if(Y.destination==="footnote")C=!0;else if(Y.destination==="field"){let Me=he(Y);Me&&(F(),Fe=!0,ne=Me)}else if(Y.destination==="listtable")q=!0;else if(q&&Y.destination==="list")M=!0,H=void 0,j=void 0;else if(Y.destination==="listoverridetable")K=!0;else if(K&&Y.destination==="listoverride")ee=void 0,P=void 0;else if(Y.destination==="pict")e.extractAttachments?Ue=!0:ze=!0;else if(Pe.includes(Y.destination))ze=!0;else if(Y.content.length>0&&Y.content[0].type==="control"&&Y.content[0].value==="*"){let Me=["fldinst","nesttableprops"];e.extractAttachments&&Me.push("shppict","listpicture"),Me.includes(Y.destination||"")||(ze=!0)}}if(Y.destination==="listtext"||Y.destination==="pntext"){y||(v=0),y=!0;let Me=Oe(Y);if(Me){let tt=Me.trim();["\xB7","\u2022","o","\xA7","\u25A0","\u25A1","\u25CF","\u25CB","\u25C6","\u25C7","\u25BA","\u25B8","\xB7","\u2022","\u25CF","\u25CB"].some(He=>tt.includes(He))||tt.length===1&&!/[0-9a-zA-Z]/.test(tt)?_="unordered":(/^[0-9ivxlcdm]+[\.\)]/i.test(tt)||/^[a-z][\.\)]/i.test(tt))&&(_="ordered")}ze=!0}if(ze)return;if(h+="{",Ue){let Me=Ie(Y);Me&&(u.push(Me),!q&&!M&&(te(),b.push({type:"image",text:"",metadata:{attachmentName:Me.name||`image_${u.length}`}})));for(let tt of Y.content)if(tt.type==="control")h+=Te(tt);else if(tt.type==="text")h+=We(tt);else if(tt.type==="group"){let ce=we=>{for(let He of we.content)He.type==="control"?h+=Te(He):He.type==="text"?h+=We(He):He.type==="group"&&(h+="{",ce(He),h+="}")};ce(Y)}h+="}";return}let de=b;if(C){if(e.ignoreNotes)return;te(),Z++;let Me="footnote";ie===1?Me="endnote":ie===2&&(Me=Y.content.some(we=>we.type==="control"&&we.value==="ftnalt")?"endnote":"footnote");let tt={type:"note",children:[],metadata:{noteId:Z.toString(),noteType:Me}};a.push(tt),b=tt.children}let De={...me};for(let Me of Y.content){if(Me.type==="group"&&Me.destination==="fldinst"){h+="{";let tt=ce=>{for(let we of ce.content)we.type==="control"?h+=Te(we):we.type==="text"?h+=We(we):we.type==="group"&&(h+="{",tt(we),h+="}")};tt(Me),h+="}";continue}qe(Me,De,$+1)}Y.destination==="listtable"?q=!1:Y.destination==="list"?(M=!1,H!==void 0&&j!==void 0&&(Q[H]=j)):Y.destination==="listoverridetable"?K=!1:K&&Y.destination==="listoverride"&&P!==void 0&&ee!==void 0&&(I[P]=ee),C&&(te(),b=de),Fe&&(F(),ne=void 0),h+="}"}else if(Y.type==="text"){if(q||K){h+=We(Y);return}pe(g,me)&&(F(),g={...me}),d+=Y.value,h+=We(Y)}else if(Y.type==="control"){if(h+=Te(Y),q){if(Y.value==="listid")H=Y.param;else if(Y.value==="levelnfc"||Y.value==="levelnfcn"){let Pe=Y.param!==void 0&&(Y.param===0||Y.param>=0&&Y.param<=4);(!j||j==="unordered"&&Pe)&&(j=Pe?"ordered":"unordered")}return}if(K){Y.value==="listid"?ee=Y.param:Y.value==="ls"&&(P=Y.param);return}if(Y.value==="par")te(),g={...me};else if(Y.value==="trowd"){let Pe=G();U&&Pe&&Pe.currentCellContent.length>0?(ae(),T.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})):U||(U=!0,ae()),V=!0,Ae=[],ve={isMergedContinuation:!1},z=0}else if(Y.value==="clvmrg")ve.isMergedContinuation=!0;else if(Y.value==="clmgf")ve.isMergedContinuation=!1;else if(Y.value==="cellx")Ae.push({...ve}),ve={isMergedContinuation:!1};else if(Y.value==="cell"){V=!0;let Pe=!1;z<Ae.length&&(Pe=Ae[z].isMergedContinuation),z++;let ze=ge();if(ze&&!Pe){let C=G();C&&C.currentCells.push(ze)}g={...me}}else if(Y.value==="nestcell"){if(T.length>1){let ze=G();ze&&(ze.rows.length>0||ze.currentCells.length>0)&&xe()}V=!0;let Pe=ge();if(Pe){let ze=G();ze&&ze.currentCells.push(Pe)}g={...me}}else if(Y.value==="row")Ce(),g={...me},z=0,V=!1;else if(Y.value==="nestrow")T.length>1&&xe(),Ce(),g={...me},z=0;else if(Y.value==="intbl")U=!0,V=!0,ae();else if(Y.value==="pard")V=!1,v=0,w="left",y=!1,_=void 0,E=void 0,S=void 0,me.backgroundColor=void 0;else if(Y.value==="tab")pe(g,me)&&(F(),g={...me}),d+="	";else if(Y.value==="line")pe(g,me)&&(F(),g={...me}),d+=`
`;else if(Y.value==="lquote")pe(g,me)&&(F(),g={...me}),d+="\u2018";else if(Y.value==="rquote")pe(g,me)&&(F(),g={...me}),d+="\u2019";else if(Y.value==="ldblquote")pe(g,me)&&(F(),g={...me}),d+="\u201C";else if(Y.value==="rdblquote")pe(g,me)&&(F(),g={...me}),d+="\u201D";else if(Y.value==="u"){if(Y.param!==void 0){let Pe=Y.param;Pe<0&&(Pe+=65536),pe(g,me)&&(F(),g={...me}),d+=String.fromCharCode(Pe)}}else if(Y.value==="b")me.bold=Y.param!==0;else if(Y.value==="i")me.italic=Y.param!==0;else if(Y.value==="ul")me.underline=Y.param!==0;else if(Y.value==="ulnone")me.underline=!1;else if(Y.value==="strike")me.strikethrough=Y.param!==0;else if(Y.value==="plain")me.bold=!1,me.italic=!1,me.underline=!1,me.strikethrough=!1,me.subscript=!1,me.superscript=!1,me.size=void 0,me.font=void 0,me.color=void 0,me.backgroundColor=void 0;else if(Y.value==="fs")Y.param!==void 0&&(me.size=(Y.param/2).toString()+"pt");else if(Y.value==="f")Y.param!==void 0&&i[Y.param]&&(me.font=i[Y.param]);else if(Y.value==="cf")Y.param!==void 0&&o[Y.param]&&(me.color=o[Y.param]);else if(Y.value==="fet")Y.param!==void 0&&(ie=Y.param);else if(Y.value==="cb"||Y.value==="highlight"||Y.value==="chcbpat"||Y.value==="cbpat")Y.param!==void 0&&o[Y.param]&&(me.backgroundColor=o[Y.param]);else if(Y.value==="sub")me.subscript=!0,me.superscript=!1;else if(Y.value==="super")me.superscript=!0,me.subscript=!1;else if(Y.value==="nosupersub")me.subscript=!1,me.superscript=!1;else if(Y.value==="li")Y.param!==void 0&&(v=Math.floor(Y.param/360));else if(Y.value==="ls"){if(Y.param!==void 0){y||(v=0),y=!0,oe[Y.param]||(O++,oe[Y.param]=`rtf-list-${O}`),S=oe[Y.param];let Pe=I[Y.param]!==void 0?I[Y.param]:Y.param;Q[Pe]&&(_=Q[Pe])}}else Y.value==="ilvl"?Y.param!==void 0&&(y=!0,v=Y.param):Y.value==="pnlvl"?(y=!0,Y.param!==void 0&&(v=Y.param)):Y.value==="levelnfc"||Y.value==="pnf"?Y.param!==void 0&&(y=!0,Y.param===23?_="unordered":_="ordered"):Y.value==="pndec"||Y.value==="pnord"||Y.value==="pnlcltr"||Y.value==="pnucltr"?(y||(v=0),y=!0,_="ordered"):Y.value==="pnbullet"||Y.value==="pncard"?(y||(v=0),y=!0,_="unordered"):Y.value==="s"?Y.param!==void 0&&Y.param>=1&&Y.param<=9&&(E=Y.param):Y.value==="ql"?w="left":Y.value==="qc"?w="center":Y.value==="qr"?w="right":Y.value==="qj"&&(w="justify")}};qe(n,{});let Ge=G();if((U||Ge&&(Ge.rows.length>0||Ge.currentCells.length>0))&&xe(),te(),!e.putNotesAtLast&&a.length>0&&(s.push(...a),a.length=0),e.ocr&&e.extractAttachments){for(let me of u)if(me.mimeType.startsWith("image/"))try{let $=Buffer.from(me.data,"base64");me.ocrText=(await ns($,e.ocrLanguage)).trim()}catch($){ci(`OCR failed for ${me.name}:`,e,$)}let Y=me=>{for(let $ of me){if($.type==="image"&&$.metadata&&"attachmentName"in $.metadata){let Pe=$.metadata,ze=u.find(C=>C.name===Pe.attachmentName);ze&&(ze.ocrText&&($.text=ze.ocrText),ze.altText&&(Pe.altText=ze.altText))}$.children&&Y($.children)}};Y(s)}let x=Y=>{for(let me of Y){if(me.type==="note"&&me.children){let $=Pe=>Pe.children&&Pe.children.length>0?Pe.children.map($).join(""):Pe.text||"";me.text=me.children.map($).join("").trim()}me.children&&x(me.children)}};x(s),x(a);let p=Y=>{let me=[];if(Y.children){for(let $ of Y.children)if($.type==="row"&&$.children){let Pe=[];for(let ze of $.children)if(ze.type==="cell"){let C=Ue=>{let de=Ue.text||"";if(Ue.children&&Ue.children.length>0){let De=Ue.children.map(C).filter(Me=>Me!=="");De.length>0&&(de+=(de?" ":"")+De.join(" "))}return de},Fe=C(ze);Pe.push({value:Fe})}Pe.length>0&&me.push({cols:Pe})}}return{type:"table",rows:me}},m=(Y,me)=>{if(Y.type!=="chart")return null;let $=Y.metadata;if($?.attachmentName){let Pe=me.find(ze=>ze.name===$.attachmentName&&ze.type==="chart");if(Pe?.chartData)return{type:"chart",chartData:Pe.chartData,chartType:Pe.chartData.chartType}}return null},N=(Y,me)=>{let $=[],Pe=ze=>{if(ze.type==="table"){$.push(p(ze));return}else if(ze.type==="chart"){let C=m(ze,me);C&&$.push(C);return}else if(ze.type==="image"){let Fe=ze.metadata?.attachmentName;if(Fe){let Ue=me.find(de=>de.name===Fe&&de.type==="image");if(Ue){let de=Buffer.from(Ue.data,"base64");$.push({type:"image",buffer:de,mimeType:Ue.mimeType,filename:Ue.name})}}return}else ze.text&&ze.text.trim()&&(ze.type==="text"||ze.type==="paragraph"||ze.type==="heading")&&$.push({type:"text",content:ze.text.trim()});if(ze.children)for(let C of ze.children)Pe(C)};for(let ze of Y)Pe(ze);return $},re=Y=>Y.filter(me=>me.type==="image").map(me=>({buffer:Buffer.from(me.data,"base64"),mimeType:me.mimeType,filename:me.name})),D=(()=>{let Y=s.map(me=>me.text).join(e.newlineDelimiter??`
`);return e.putNotesAtLast&&a.length>0&&(Y+=(e.newlineDelimiter??`
`)+a.map(me=>me.text).join(e.newlineDelimiter??`
`)),Y})(),fe=N(s,u),be=re(u),Se={type:"rtf",metadata:{},content:s,attachments:u,fullText:D,blocks:fe,images:be,toText:()=>D};return e.putNotesAtLast&&a.length>0&&s.push(...a),Se}catch(t){throw t}};function IV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="fonttbl"){for(let o of i.content)if(o.type==="group"){let s,a="";for(let u of o.content)u.type==="control"&&u.value==="f"?s=u.param:u.type==="text"&&(a+=u.value);s!==void 0&&a&&(a=a.replace(/;$/,"").trim(),e[s]=a)}return!0}if(t(i))return!0}return!1};return t(r),e}function OV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="colortbl"){let o=0,s=0,a=0,u=0;for(let c of i.content)if(c.type==="control")c.value==="red"&&c.param!==void 0?s=c.param:c.value==="green"&&c.param!==void 0?a=c.param:c.value==="blue"&&c.param!==void 0&&(u=c.param);else if(c.type==="text"&&c.value===";"){let f=`#${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}`;e[o]=f,o++,s=0,a=0,u=0}return!0}if(t(i))return!0}return!1};return t(r),e}Ne();Le();ke();var O3=Su(Ib());var N3=async(r,e)=>{let t=/word\/document[\d+]?.xml/,n=/word\/footnotes[\d+]?.xml/,i=/word\/endnotes[\d+]?.xml/,o=/word\/numbering[\d+]?.xml/,s=/(word\/)?media\/.*/,a=/docProps\/core[\d+]?.xml/,u=/word\/_rels\/document[\d+]?.xml\.rels/,c=/word\/styles[\d+]?.xml/,f=new O3.XMLSerializer,h=K=>{let ee={},P=f.serializeToString(K),I=(Oe,Ie)=>{let Te=new RegExp(`<${Ie}(?:\\s+w:val="([^"]+)")?\\s*\\/?>`),We=Oe.match(Te);if(We){let qe=We[1];return qe===void 0?!0:qe==="1"||qe==="true"||qe==="on"}return null},k=I(P,"w:b");k!==null&&(ee.bold=k);let ne=I(P,"w:i");ne!==null&&(ee.italic=ne);let pe=P.match(/<w:u(?: w:val="([^"]+)")?\/?>/);if(pe){let Oe=pe[1];(!Oe||Oe!=="none")&&(ee.underline=!0)}let F=I(P,"w:strike"),R=I(P,"w:dstrike");F!==null?ee.strikethrough=F:R!==null&&(ee.strikethrough=R);let te=P.match(/<w:sz w:val="(\d+)"/);te&&(ee.size=(parseInt(te[1])/2).toString()+"pt");let ge=P.match(/<w:color w:val="([^"]+)"/);ge&&ge[1]!=="auto"&&(ee.color="#"+ge[1]);let Ce=P.match(/<w:shd[^>]*w:fill="([^"]+)"/);Ce&&Ce[1]!=="auto"&&(ee.backgroundColor="#"+Ce[1]);let xe=P.match(/<w:highlight w:val="([^"]+)"/);if(xe&&xe[1]!=="none"){let Oe={yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",magenta:"#FF00FF",blue:"#0000FF",red:"#FF0000",darkBlue:"#00008B",darkCyan:"#008B8B",darkGreen:"#006400",darkMagenta:"#8B008B",darkRed:"#8B0000",darkYellow:"#808000",darkGray:"#A9A9A9",lightGray:"#D3D3D3",black:"#000000"};ee.backgroundColor=Oe[xe[1]]||xe[1]}let he=P.match(/<w:rFonts[^>]*w:ascii="([^"]+)"/);if(he)ee.font=he[1];else{let Oe=P.match(/<w:rFonts[^>]*w:hAnsi="([^"]+)"/);Oe&&(ee.font=Oe[1])}let _e=P.match(/<w:vertAlign w:val="([^"]+)"/);return _e&&(_e[1]==="subscript"&&(ee.subscript=!0),_e[1]==="superscript"&&(ee.superscript=!0)),ee},d=await Cl(r,K=>!!K.match(t)||!!K.match(n)||!!K.match(i)||!!K.match(o)||!!K.match(a)||!!K.match(u)||!!K.match(c)||!!e.extractAttachments&&!!K.match(s)),g=d.find(K=>K.path.match(a)),b=g?wl(g.content.toString()):{},v=new Map,w=new Map,y=[],_=[],E=d.filter(K=>K.path.match(s)),S=d.find(K=>K.path.match(u)),A={};if(S){let K=Ut(S.content.toString()),ee=Re(K,"Relationship");for(let P=0;P<ee.length;P++){let I=ee[P].getAttribute("Id"),k=ee[P].getAttribute("Target");I&&k&&(A[I]=k)}}let B=d.find(K=>K.path.match(o)),T={};if(B){let K=Ut(B.content.toString()),ee=Re(K,"w:num"),P=Re(K,"w:abstractNum"),I={};for(let k=0;k<P.length;k++){let ne=P[k].getAttribute("w:abstractNumId");ne&&(I[ne]=P[k])}for(let k=0;k<ee.length;k++){let ne=ee[k].getAttribute("w:numId"),F=Re(ee[k],"w:abstractNumId")[0]?.getAttribute("w:val");if(ne&&F&&I[F]){T[ne]={};let R=Re(I[F],"w:lvl");for(let te=0;te<R.length;te++){let ge=R[te].getAttribute("w:ilvl"),Ce=Re(R[te],"w:numFmt")[0],xe=Re(R[te],"w:lvlText")[0];ge&&(T[ne][ge]={numFmt:Ce?.getAttribute("w:val")||"decimal",lvlText:xe?.getAttribute("w:val")||""})}}}}let Z=d.find(K=>K.path.match(c)),ie={};if(Z){let K=Ut(Z.content.toString()),ee=Re(K,"w:style");for(let P=0;P<ee.length;P++){let I=ee[P].getAttribute("w:styleId");if(I){let k=Re(ee[P],"w:rPr")[0],ne=Re(ee[P],"w:pPr")[0],pe=k?h(k):{},F,R;if(ne){let te=Re(ne,"w:jc")[0];if(te){let Ce=te.getAttribute("w:val");(Ce==="left"||Ce==="center"||Ce==="right"||Ce==="justify")&&(F=Ce)}let ge=Re(ne,"w:shd")[0];if(ge){let Ce=ge.getAttribute("w:fill");Ce&&Ce!=="auto"&&(R="#"+Ce)}}ie[I]={formatting:pe,alignment:F,backgroundColor:R}}}}let G={};if(Z){let K=Ut(Z.content.toString()),ee=Re(K,"w:docDefaults")[0];if(ee){let P=Re(ee,"w:rPrDefault")[0];if(P){let I=Re(P,"w:rPr")[0];I&&(G=h(I))}}}let ae;if(Z){let K=Ut(Z.content.toString()),ee=Re(K,"w:style");for(let P=0;P<ee.length;P++){let I=ee[P].getAttribute("w:type"),k=ee[P].getAttribute("w:default"),ne=ee[P].getAttribute("w:styleId");if(I==="paragraph"&&k==="1"&&ne){ae=ne;break}}!ae&&ie.Normal&&(ae="Normal")}let U=[],V=[],ue={},Ae={},ve=K=>{let ee=f.serializeToString(K),P=Re(K,"w:numPr")[0],I=!!P,k=Re(K,"w:pPr")[0],ne=k?Re(k,"w:pStyle")[0]:null,pe=ne?ne.getAttribute("w:val"):null,F=pe?pe.startsWith("Heading")||pe==="Title":!1,R=pe&&ie[pe]?ie[pe]:{formatting:{}},te=R.alignment;if(k){let Ie=Re(k,"w:jc")[0];if(Ie){let Te=Ie.getAttribute("w:val");(Te==="left"||Te==="center"||Te==="right"||Te==="justify")&&(te=Te)}}let ge=R.backgroundColor;if(k){let Ie=Re(k,"w:shd")[0];if(Ie){let Te=Ie.getAttribute("w:fill");Te&&Te!=="auto"&&(ge="#"+Te)}}let Ce={...R.formatting};if(k){let Ie=Re(k,"w:rPr")[0];if(Ie){let Te=h(Ie);for(let We in Te){let qe=Te[We];qe===!1?delete Ce[We]:qe!==void 0&&(Ce[We]=qe)}}}let xe="",he=[],_e=Ie=>{if(Ie.nodeName==="w:r"){let Te=Ie,We=Re(Te,"w:rPr")[0],qe={};for(let m in Ce)qe[m]=Ce[m];let Ge=We?Re(We,"w:rStyle")[0]:null,x=Ge?Ge.getAttribute("w:val"):pe;if(x&&ie[x])for(let m in ie[x].formatting)qe[m]=ie[x].formatting[m];if(We){let m=h(We);for(let N in m){let re=m[N];re===!1?delete qe[N]:re!==void 0&&(qe[N]=re)}}!qe.backgroundColor&&ge&&(qe.backgroundColor=ge);let p=Re(Te,"w:t");for(let m of p){let N=m.textContent||"";xe+=N;let re={type:"text",text:N,formatting:qe};e.includeRawContent&&(re.rawContent=f.serializeToString(m));let D=x||pe||ae;D&&(re.metadata={style:D}),he.push(re)}if(e.extractAttachments){let m=Re(Te,"w:drawing"),N=Re(Te,"w:pict"),re=[...m,...N];for(let D of re){let fe=f.serializeToString(D),be="",Se=Re(D,"wp:docPr")[0];Se&&(be=Se.getAttribute("descr")||Se.getAttribute("title")||"");let Y="",me=Re(D,"a:blip")[0];if(me)Y=me.getAttribute("r:embed")||"";else{let $=Re(D,"v:imagedata")[0];$&&(Y=$.getAttribute("r:id")||"")}if(Y&&A[Y]){let Pe=A[Y].split("/").pop();if(Pe){let ze={type:"image",text:"",metadata:{attachmentName:Pe,altText:be}};e.includeRawContent&&(ze.rawContent=fe),he.push(ze)}}else{let $={type:"image",text:""};e.includeRawContent&&($.rawContent=fe),he.push($)}}}if(!e.ignoreNotes){let m=Re(Te,"w:footnoteReference")[0];if(m){let re=m.getAttribute("w:id");if(re&&v.has(re)){let D=v.get(re),fe={type:"note",text:D.map(be=>be.text).join(" "),children:D,metadata:{noteType:"footnote",noteId:re}};e.putNotesAtLast?y.push(fe):he.push(fe)}}let N=Re(Te,"w:endnoteReference")[0];if(N){let re=N.getAttribute("w:id");if(re&&w.has(re)){let D=w.get(re),fe={type:"note",text:D.map(be=>be.text).join(" "),children:D,metadata:{noteType:"endnote",noteId:re}};e.putNotesAtLast?y.push(fe):he.push(fe)}}}}else if(Ie.nodeName==="w:hyperlink"){let Te=Ie,We=Te.getAttribute("r:id"),qe=Te.getAttribute("w:anchor"),Ge;qe?Ge={link:"#"+qe,linkType:"internal"}:We&&A[We]&&(Ge={link:A[We],linkType:"external"});let x=Array.from(Te.childNodes);for(let p of x){let m=he.length;if(_e(p),Ge)for(let N=m;N<he.length;N++)he[N].type==="text"&&(he[N].metadata={...he[N].metadata??{},...Ge})}}},Oe=Array.from(K.childNodes);for(let Ie of Oe)_e(Ie);if(I){let Ie=Re(P,"w:numId")[0],Te=Re(P,"w:ilvl")[0],We=Ie&&Ie.getAttribute("w:val")||"0",qe=Te?parseInt(Te.getAttribute("w:val")||"0"):0,Ge="ordered",x=0;if(We&&T[We]){let m=qe.toString();ue[We]||(ue[We]={}),ue[We][m]||(ue[We][m]=0),ue[We][m]++;for(let re=qe+1;re<10;re++)ue[We][re.toString()]&&(ue[We][re.toString()]=0);Ge=(T[We][m]?.numFmt||"decimal")==="bullet"?"unordered":"ordered",Ae[We]||(Ae[We]={}),Ae[We][m]===void 0?Ae[We][m]=0:Ae[We][m]++,x=Ae[We][m]}let p={type:"list",text:xe,children:he,metadata:{listType:Ge,indentation:qe,alignment:te||"left",listId:We,itemIndex:x,style:pe}};return e.includeRawContent&&(p.rawContent=ee),p}else if(F){let Ie=pe&&parseInt(pe.replace("Heading",""))||1,Te={type:"heading",text:xe,children:he,metadata:{level:Ie,alignment:te,style:pe??void 0}};return e.includeRawContent&&(Te.rawContent=ee),Te}else{let Ie={type:"paragraph",text:xe,children:he,metadata:{alignment:te,style:pe??void 0}};return e.includeRawContent&&(Ie.rawContent=ee),Ie}},z=K=>{let ee=[],P=En(K,"w:tr");for(let I=0;I<P.length;I++){let k=P[I],ne=[],pe=En(k,"w:tc");for(let R=0;R<pe.length;R++){let te=pe[R],ge=[],Ce="",xe=Array.from(te.childNodes);for(let _e of xe)if(_e.nodeName==="w:p"){let Oe=ve(_e);ge.push(Oe),Ce+=Oe.text}else if(_e.nodeName==="w:tbl"){let Oe=z(_e);ge.push(Oe)}let he={type:"cell",text:Ce,children:ge,metadata:{row:I,col:R}};ne.push(he)}let F={type:"row",children:ne};ee.push(F)}return{type:"table",children:ee}};if(!e.ignoreNotes){let K=d.find(P=>P.path.match(n));if(K){let P=Ut(K.content.toString()),I=Re(P,"w:footnote");for(let k of I){let ne=k.getAttribute("w:id");if(!ne||ne==="-1"||ne==="0")continue;let pe=Re(k,"w:p");v.set(ne,pe.map(F=>ve(F)))}}let ee=d.find(P=>P.path.match(i));if(ee){let P=Ut(ee.content.toString()),I=Re(P,"w:endnote");for(let k of I){let ne=k.getAttribute("w:id");if(!ne||ne==="-1"||ne==="0")continue;let pe=Re(k,"w:p");w.set(ne,pe.map(F=>ve(F)))}}}for(let K of d){if(K.path.match(s)||K.path.match(o)||K.path.match(u)||K.path.match(c)||K.path.match(n)||K.path.match(i))continue;let ee=K.content.toString();e.includeRawContent&&V.push(ee);let P=Ut(ee),I=Re(P,"w:body")[0];if(I){let k=Array.from(I.childNodes);for(let ne of k)ne.nodeName==="w:p"?U.push(ve(ne)):ne.nodeName==="w:tbl"&&U.push(z(ne))}}if(e.extractAttachments){for(let K of E){let ee=Is(K.path.split("/").pop()||"image",K.content);if(_.push(ee),e.ocr&&ee.mimeType.startsWith("image/"))try{ee.ocrText=(await ns(K.content,e.ocrLanguage)).trim()}catch(P){ci(`OCR failed for ${ee.name}:`,e,P)}}if(e.ocr){let K=ee=>{for(let P of ee){if(P.type==="image"&&"attachmentName"in(P.metadata||{})){let I=P.metadata,k=_.find(ne=>ne.name===I.attachmentName);k&&k.ocrText&&(P.text=k.ocrText,k.altText=I.altText)}P.children&&K(P.children)}};K(U)}}e.putNotesAtLast&&y.length>0&&U.push(...y);let O=K=>{let ee=[];if(K.children){for(let P of K.children)if(P.type==="row"&&P.children){let I=[];for(let k of P.children)if(k.type==="cell"){let ne=F=>{let R=F.text||"";if(F.children&&F.children.length>0){let te=F.children.map(ne).filter(ge=>ge!=="");te.length>0&&(R+=(R?" ":"")+te.join(" "))}return R},pe=ne(k);I.push({value:pe})}I.length>0&&ee.push({cols:I})}}return{type:"table",rows:ee}},oe=(K,ee)=>{if(K.type!=="chart")return null;let P=K.metadata;if(P?.attachmentName){let I=ee.find(k=>k.name===P.attachmentName&&k.type==="chart");if(I?.chartData)return{type:"chart",chartData:I.chartData,chartType:I.chartData.chartType}}return null},q=(K,ee)=>{let P=[],I=k=>{if(k.type==="table"){P.push(O(k));return}else if(k.type==="chart"){let ne=oe(k,ee);ne&&P.push(ne);return}else if(k.type==="image"){let pe=k.metadata?.attachmentName;if(pe){let F=ee.find(R=>R.name===pe&&R.type==="image");if(F){let R=Buffer.from(F.data,"base64");P.push({type:"image",buffer:R,mimeType:F.mimeType,filename:F.name})}}return}else k.text&&k.text.trim()&&(k.type==="text"||k.type==="paragraph"||k.type==="heading")&&P.push({type:"text",content:k.text.trim()});if(k.children)for(let ne of k.children)I(ne)};for(let k of K)I(k);return P},M=K=>K.filter(ee=>ee.type==="image").map(ee=>({buffer:Buffer.from(ee.data,"base64"),mimeType:ee.mimeType,filename:ee.name})),H=U.map(K=>{let ee=P=>{let I="";return P.children?I+=P.children.map(ee).filter(k=>k!="").join(P.children[0]?.children?e.newlineDelimiter??`
`:""):I+=P.text||"",I};return ee(K)}).filter(K=>K!="").join(e.newlineDelimiter??`
`),j=q(U,_),Q=M(_);return console.log("Word Chart blocks",j.filter(K=>K.type=="chart")),{type:"docx",metadata:{...b,formatting:G,styleMap:ie},content:U,attachments:_,fullText:H,blocks:j,images:Q,toText:()=>H}};var Pf=class{static async parseOffice(e,t,n){let i,o={};typeof t=="function"?(i=t,o=n||{}):o=t||{};let s={ignoreNotes:!1,newlineDelimiter:`
`,putNotesAtLast:!1,outputErrorToConsole:!1,extractAttachments:!1,ocr:!1,ocrLanguage:"eng",includeRawContent:!1,pdfWorkerSrc:"",...o},a=Buffer.alloc(0),u="",c;try{if(!e)throw ia("IMPROPER_ARGUMENTS",s);if(e instanceof ArrayBuffer)a=Buffer.from(e);else if(Buffer.isBuffer(e))a=e;else if(typeof e=="string"){if(c=e,!sb(e))throw ia("FILE_DOES_NOT_EXIST",s,e);if(x2(e).isDirectory())throw ia("LOCATION_NOT_FOUND",s,e);a=S2(e),u=e.split(".").pop()?.toLowerCase()||""}else throw ia("INVALID_INPUT",s);if(!u){let h=await k3.fromBuffer(a);if(h)u=h.ext.toLowerCase();else throw ia("IMPROPER_BUFFERS",s)}let f;switch(u){case"docx":f=await N3(a,s);break;case"pptx":f=await D3(a,s);break;case"xlsx":f=await rM(a,s);break;case"odt":case"odp":case"ods":f=await nM(a,s);break;case"pdf":f=await C3(a,s);break;case"rtf":f=await I3(a,s);break;default:throw ia("EXTENSION_UNSUPPORTED",s,u)}return i&&i(f),f}catch(f){let h=gk(f,s,c);throw i&&i(void 0,h),h}}};var NV=Pf.parseOffice;var kV=Pf;if(typeof xu<"u"&&typeof module<"u"&&xu.main===module){let i=function(o){return o.startsWith("--")&&o.includes("=")};LV=i;let r=process.argv.slice(2),e,t=!1,n=[];if(r.forEach(o=>{i(o)?n.push(o):e||(e=o)}),e){let o={};n.forEach(s=>{let[a,u]=s.split("="),c=a.replace("--","");c==="toText"?u.toLowerCase()==="true"?t=!0:u.toLowerCase()==="false"?t=!1:console.log(`Invalid value for toText: ${u}`):u.toLowerCase()==="true"?o[c]=!0:u.toLowerCase()==="false"?o[c]=!1:o[c]=u}),Pf.parseOffice(e,o).then(s=>{console.log(t?s.toText():JSON.stringify(s,null,2))}).catch(console.error)}else console.log("Usage: node officeparser [file] [--option=value]")}var LV;return Ir(PV);})();
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
@jspm/core/nodelibs/browser/chunk-B738Er4n.js:
ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@jspm/core/nodelibs/browser/chunk-CjPlbOtt.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@jspm/core/nodelibs/browser/chunk-CcCWfKp1.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=officeparser.browser.js.map
