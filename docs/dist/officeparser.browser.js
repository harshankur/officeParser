#!/usr/bin/env node

// Shim for setImmediate
if (typeof setImmediate === 'undefined') {
  window.setImmediate = function(callback) {
    return setTimeout(callback, 0);
  };
}

"use strict";var officeParser=(()=>{var F3=Object.create;var xp=Object.defineProperty;var U3=Object.getOwnPropertyDescriptor;var j3=Object.getOwnPropertyNames;var $3=Object.getPrototypeOf,z3=Object.prototype.hasOwnProperty;var MT=r=>{throw TypeError(r)};var W3=(r,e,t)=>e in r?xp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var Jt=(r,e)=>()=>(r&&(e=r(r=0)),e);var st=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Uo=(r,e)=>{for(var t in e)xp(r,t,{get:e[t],enumerable:!0})},BT=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of j3(e))!z3.call(r,i)&&i!==t&&xp(r,i,{get:()=>e[i],enumerable:!(n=U3(e,i))||n.enumerable});return r};var Su=(r,e,t)=>(t=r!=null?F3($3(r)):{},BT(e||!r||!r.__esModule?xp(t,"default",{value:r,enumerable:!0}):t,r)),Ir=r=>BT(xp({},"__esModule",{value:!0}),r);var Je=(r,e,t)=>W3(r,typeof e!="symbol"?e+"":e,t),h_=(r,e,t)=>e.has(r)||MT("Cannot "+t);var l=(r,e,t)=>(h_(r,e,"read from private field"),t?t.call(r):e.get(r)),V=(r,e,t)=>e.has(r)?MT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),k=(r,e,t,n)=>(h_(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),re=(r,e,t)=>(h_(r,e,"access private method"),t);var tn=(r,e,t,n)=>({set _(i){k(r,e,i,t)},get _(){return l(r,e,n)}});var Oe=Jt(()=>{});var process={};Uo(process,{_debugEnd:()=>TC,_debugProcess:()=>SC,_events:()=>zC,_eventsCount:()=>WC,_exiting:()=>oC,_fatalExceptions:()=>_C,_getActiveHandles:()=>cC,_getActiveRequests:()=>uC,_kill:()=>hC,_linkedBinding:()=>iC,_maxListeners:()=>$C,_preload_modules:()=>FC,_rawDebug:()=>rC,_startProfilerIdleNotifier:()=>CC,_stopProfilerIdleNotifier:()=>RC,_tickCallback:()=>xC,abort:()=>NC,addListener:()=>qC,allowedNodeEnvironmentFlags:()=>bC,arch:()=>zT,argv:()=>HT,argv0:()=>BC,assert:()=>wC,binding:()=>KT,browser:()=>tC,chdir:()=>QT,config:()=>aC,cpuUsage:()=>y0,cwd:()=>JT,debugPort:()=>MC,default:()=>QC,dlopen:()=>lC,domain:()=>sC,emit:()=>XC,emitWarning:()=>XT,env:()=>qT,execArgv:()=>GT,execPath:()=>PC,exit:()=>mC,features:()=>vC,hasUncaughtExceptionCaptureCallback:()=>AC,hrtime:()=>m0,kill:()=>gC,listeners:()=>JC,memoryUsage:()=>pC,moduleLoadList:()=>nC,nextTick:()=>UT,off:()=>GC,on:()=>$o,once:()=>HC,openStdin:()=>yC,pid:()=>kC,platform:()=>WT,ppid:()=>LC,prependListener:()=>KC,prependOnceListener:()=>ZC,reallyExit:()=>fC,release:()=>eC,removeAllListeners:()=>YC,removeListener:()=>VC,resourceUsage:()=>dC,setSourceMapsEnabled:()=>UC,setUncaughtExceptionCaptureCallback:()=>EC,stderr:()=>IC,stdin:()=>OC,stdout:()=>DC,title:()=>$T,umask:()=>ZT,uptime:()=>jC,version:()=>VT,versions:()=>YT});function g_(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function q3(){!Bf||!Tu||(Bf=!1,Tu.length?jo=Tu.concat(jo):g0=-1,jo.length&&FT())}function FT(){if(!Bf){var r=setTimeout(q3,0);Bf=!0;for(var e=jo.length;e;){for(Tu=jo,jo=[];++g0<e;)Tu&&Tu[g0].run();g0=-1,e=jo.length}Tu=null,Bf=!1,clearTimeout(r)}}function UT(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];jo.push(new jT(r,e)),jo.length===1&&!Bf&&setTimeout(FT,0)}function jT(r,e){this.fun=r,this.array=e}function Nn(){}function iC(r){g_("_linkedBinding")}function lC(r){g_("dlopen")}function uC(){return[]}function cC(){return[]}function wC(r,e){if(!r)throw new Error(e||"assertion error")}function AC(){return!1}function jC(){return ol.now()/1e3}function m0(r){var e=Math.floor((Date.now()-ol.now())*.001),t=ol.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=p_)),[n,i]}function $o(){return QC}function JC(r){return[]}var jo,Bf,Tu,g0,$T,zT,WT,qT,HT,GT,VT,YT,XT,KT,ZT,JT,QT,eC,tC,rC,nC,sC,oC,aC,fC,hC,y0,dC,pC,gC,mC,yC,bC,vC,_C,EC,xC,SC,TC,CC,RC,DC,IC,OC,NC,kC,LC,PC,MC,BC,FC,UC,ol,d_,p_,$C,zC,WC,qC,HC,GC,VC,YC,XC,KC,ZC,QC,eR=Jt(()=>{Oe();ke();Ne();jo=[],Bf=!1,g0=-1;jT.prototype.run=function(){this.fun.apply(null,this.array)};$T="browser",zT="x64",WT="browser",qT={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},HT=["/usr/bin/node"],GT=[],VT="v16.8.0",YT={},XT=function(r,e){console.warn((e?e+": ":"")+r)},KT=function(r){g_("binding")},ZT=function(r){return 0},JT=function(){return"/"},QT=function(r){},eC={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};tC=!0,rC=Nn,nC=[];sC={},oC=!1,aC={};fC=Nn,hC=Nn,y0=function(){return{}},dC=y0,pC=y0,gC=Nn,mC=Nn,yC=Nn,bC={};vC={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},_C=Nn,EC=Nn;xC=Nn,SC=Nn,TC=Nn,CC=Nn,RC=Nn,DC=void 0,IC=void 0,OC=void 0,NC=Nn,kC=2,LC=1,PC="/bin/usr/node",MC=9229,BC="node",FC=[],UC=Nn,ol={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};ol.now===void 0&&(d_=Date.now(),ol.timing&&ol.timing.navigationStart&&(d_=ol.timing.navigationStart),ol.now=()=>Date.now()-d_);p_=1e9;m0.bigint=function(r){var e=m0(r);return typeof BigInt>"u"?e[0]*p_+e[1]:BigInt(e[0]*p_)+BigInt(e[1])};$C=10,zC={},WC=0;qC=$o,HC=$o,GC=$o,VC=$o,YC=$o,XC=Nn,KC=$o,ZC=$o;QC={version:VT,versions:YT,arch:zT,platform:WT,browser:tC,release:eC,_rawDebug:rC,moduleLoadList:nC,binding:KT,_linkedBinding:iC,_events:zC,_eventsCount:WC,_maxListeners:$C,on:$o,addListener:qC,once:HC,off:GC,removeListener:VC,removeAllListeners:YC,emit:XC,prependListener:KC,prependOnceListener:ZC,listeners:JC,domain:sC,_exiting:oC,config:aC,dlopen:lC,uptime:jC,_getActiveRequests:uC,_getActiveHandles:cC,reallyExit:fC,_kill:hC,cpuUsage:y0,resourceUsage:dC,memoryUsage:pC,kill:gC,exit:mC,openStdin:yC,allowedNodeEnvironmentFlags:bC,assert:wC,features:vC,_fatalExceptions:_C,setUncaughtExceptionCaptureCallback:EC,hasUncaughtExceptionCaptureCallback:AC,emitWarning:XT,nextTick:UT,_tickCallback:xC,_debugProcess:SC,_debugEnd:TC,_startProfilerIdleNotifier:CC,_stopProfilerIdleNotifier:RC,stdout:DC,stdin:OC,stderr:IC,abort:NC,umask:ZT,chdir:QT,cwd:JT,env:qT,title:$T,argv:HT,execArgv:GT,pid:kC,ppid:LC,execPath:PC,debugPort:MC,hrtime:m0,argv0:BC,_preload_modules:FC,setSourceMapsEnabled:UC}});var Ne=Jt(()=>{eR()});function H3(){if(tR)return Sp;tR=!0,Sp.byteLength=a,Sp.toByteArray=c,Sp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=m.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(m){var b=s(m),v=b[0],w=b[1];return(v+w)*3/4-w}function u(m,b,v){return(b+v)*3/4-v}function c(m){var b,v=s(m),w=v[0],y=v[1],_=new t(u(m,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[m.charCodeAt(A)]<<18|e[m.charCodeAt(A+1)]<<12|e[m.charCodeAt(A+2)]<<6|e[m.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[m.charCodeAt(A)]<<2|e[m.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[m.charCodeAt(A)]<<10|e[m.charCodeAt(A+1)]<<4|e[m.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(m[_]<<16&16711680)+(m[_+1]<<8&65280)+(m[_+2]&255),y.push(f(w));return y.join("")}function d(m){for(var b,v=m.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(m,E,E+_>S?S:E+_));return w===1?(b=m[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(m[v-2]<<8)+m[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Sp}function G3(){if(rR)return b0;rR=!0;return b0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)},b0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128},b0}function fn(){if(nR)return Cu;nR=!0;let r=H3(),e=G3(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Cu.Buffer=s,Cu.SlowBuffer=y,Cu.INSPECT_MAX_BYTES=50;let n=2147483647;Cu.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let x=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(x,g),x.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(x){if(x>n)throw new RangeError('The value "'+x+'" is invalid for option "size"');let g=new Uint8Array(x);return Object.setPrototypeOf(g,s.prototype),g}function s(x,g,p){if(typeof x=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return a(x,g,p)}s.poolSize=8192;function a(x,g,p){if(typeof x=="string")return h(x,g);if(ArrayBuffer.isView(x))return m(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(De(x,ArrayBuffer)||x&&De(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(x,SharedArrayBuffer)||x&&De(x.buffer,SharedArrayBuffer)))return b(x,g,p);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let T=x.valueOf&&x.valueOf();if(T!=null&&T!==x)return s.from(T,g,p);let J=v(x);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return s.from(x[Symbol.toPrimitive]("string"),g,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}s.from=function(x,g,p){return a(x,g,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,g,p){return u(x),x<=0?o(x):g!==void 0?typeof p=="string"?o(x).fill(g,p):o(x).fill(g):o(x)}s.alloc=function(x,g,p){return c(x,g,p)};function f(x){return u(x),o(x<0?0:w(x)|0)}s.allocUnsafe=function(x){return f(x)},s.allocUnsafeSlow=function(x){return f(x)};function h(x,g){if((typeof g!="string"||g==="")&&(g="utf8"),!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);let p=_(x,g)|0,T=o(p),J=T.write(x,g);return J!==p&&(T=T.slice(0,J)),T}function d(x){let g=x.length<0?0:w(x.length)|0,p=o(g);for(let T=0;T<g;T+=1)p[T]=x[T]&255;return p}function m(x){if(De(x,Uint8Array)){let g=new Uint8Array(x);return b(g.buffer,g.byteOffset,g.byteLength)}return d(x)}function b(x,g,p){if(g<0||x.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<g+(p||0))throw new RangeError('"length" is outside of buffer bounds');let T;return g===void 0&&p===void 0?T=new Uint8Array(x):p===void 0?T=new Uint8Array(x,g):T=new Uint8Array(x,g,p),Object.setPrototypeOf(T,s.prototype),T}function v(x){if(s.isBuffer(x)){let g=w(x.length)|0,p=o(g);return p.length===0||x.copy(p,0,0,g),p}if(x.length!==void 0)return typeof x.length!="number"||Te(x.length)?o(0):d(x);if(x.type==="Buffer"&&Array.isArray(x.data))return d(x.data)}function w(x){if(x>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),s.alloc(+x)}s.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==s.prototype},s.compare=function(g,p){if(De(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),De(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(g)||!s.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===p)return 0;let T=g.length,J=p.length;for(let C=0,oe=Math.min(T,J);C<oe;++C)if(g[C]!==p[C]){T=g[C],J=p[C];break}return T<J?-1:J<T?1:0},s.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(g,p){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return s.alloc(0);let T;if(p===void 0)for(p=0,T=0;T<g.length;++T)p+=g[T].length;let J=s.allocUnsafe(p),C=0;for(T=0;T<g.length;++T){let oe=g[T];if(De(oe,Uint8Array))C+oe.length>J.length?(s.isBuffer(oe)||(oe=s.from(oe)),oe.copy(J,C)):Uint8Array.prototype.set.call(J,oe,C);else if(s.isBuffer(oe))oe.copy(J,C);else throw new TypeError('"list" argument must be an Array of Buffers');C+=oe.length}return J};function _(x,g){if(s.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||De(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);let p=x.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&p===0)return 0;let J=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Se(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return be(x).length;default:if(J)return T?-1:Se(x).length;g=(""+g).toLowerCase(),J=!0}}s.byteLength=_;function E(x,g,p){let T=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,g>>>=0,p<=g))return"";for(x||(x="utf8");;)switch(x){case"hex":return D(this,g,p);case"utf8":case"utf-8":return q(this,g,p);case"ascii":return ve(this,g,p);case"latin1":case"binary":return H(this,g,p);case"base64":return j(this,g,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,g,p);default:if(T)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),T=!0}}s.prototype._isBuffer=!0;function S(x,g,p){let T=x[g];x[g]=x[p],x[p]=T}s.prototype.swap16=function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<g;p+=2)S(this,p,p+1);return this},s.prototype.swap32=function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<g;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},s.prototype.swap64=function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<g;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},s.prototype.toString=function(){let g=this.length;return g===0?"":arguments.length===0?q(this,0,g):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(g){if(!s.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:s.compare(this,g)===0},s.prototype.inspect=function(){let g="",p=Cu.INSPECT_MAX_BYTES;return g=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(g+=" ... "),"<Buffer "+g+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(g,p,T,J,C){if(De(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(p===void 0&&(p=0),T===void 0&&(T=g?g.length:0),J===void 0&&(J=0),C===void 0&&(C=this.length),p<0||T>g.length||J<0||C>this.length)throw new RangeError("out of range index");if(J>=C&&p>=T)return 0;if(J>=C)return-1;if(p>=T)return 1;if(p>>>=0,T>>>=0,J>>>=0,C>>>=0,this===g)return 0;let oe=C-J,ce=T-p,xe=Math.min(oe,ce),_e=this.slice(J,C),Re=g.slice(p,T);for(let Q=0;Q<xe;++Q)if(_e[Q]!==Re[Q]){oe=_e[Q],ce=Re[Q];break}return oe<ce?-1:ce<oe?1:0};function A(x,g,p,T,J){if(x.length===0)return-1;if(typeof p=="string"?(T=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Te(p)&&(p=J?0:x.length-1),p<0&&(p=x.length+p),p>=x.length){if(J)return-1;p=x.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof g=="string"&&(g=s.from(g,T)),s.isBuffer(g))return g.length===0?-1:P(x,g,p,T,J);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(x,g,p):Uint8Array.prototype.lastIndexOf.call(x,g,p):P(x,[g],p,T,J);throw new TypeError("val must be string, number or Buffer")}function P(x,g,p,T,J){let C=1,oe=x.length,ce=g.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(x.length<2||g.length<2)return-1;C=2,oe/=2,ce/=2,p/=2}function xe(Re,Q){return C===1?Re[Q]:Re.readUInt16BE(Q*C)}let _e;if(J){let Re=-1;for(_e=p;_e<oe;_e++)if(xe(x,_e)===xe(g,Re===-1?0:_e-Re)){if(Re===-1&&(Re=_e),_e-Re+1===ce)return Re*C}else Re!==-1&&(_e-=_e-Re),Re=-1}else for(p+ce>oe&&(p=oe-ce),_e=p;_e>=0;_e--){let Re=!0;for(let Q=0;Q<ce;Q++)if(xe(x,_e+Q)!==xe(g,Q)){Re=!1;break}if(Re)return _e}return-1}s.prototype.includes=function(g,p,T){return this.indexOf(g,p,T)!==-1},s.prototype.indexOf=function(g,p,T){return A(this,g,p,T,!0)},s.prototype.lastIndexOf=function(g,p,T){return A(this,g,p,T,!1)};function R(x,g,p,T){p=Number(p)||0;let J=x.length-p;T?(T=Number(T),T>J&&(T=J)):T=J;let C=g.length;T>C/2&&(T=C/2);let oe;for(oe=0;oe<T;++oe){let ce=parseInt(g.substr(oe*2,2),16);if(Te(ce))return oe;x[p+oe]=ce}return oe}function Y(x,g,p,T){return Le(Se(g,x.length-p),x,p,T)}function te(x,g,p,T){return Le(Ae(g),x,p,T)}function K(x,g,p,T){return Le(be(g),x,p,T)}function ie(x,g,p,T){return Le(de(g,x.length-p),x,p,T)}s.prototype.write=function(g,p,T,J){if(p===void 0)J="utf8",T=this.length,p=0;else if(T===void 0&&typeof p=="string")J=p,T=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(T)?(T=T>>>0,J===void 0&&(J="utf8")):(J=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let C=this.length-p;if((T===void 0||T>C)&&(T=C),g.length>0&&(T<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let oe=!1;for(;;)switch(J){case"hex":return R(this,g,p,T);case"utf8":case"utf-8":return Y(this,g,p,T);case"ascii":case"latin1":case"binary":return te(this,g,p,T);case"base64":return K(this,g,p,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,g,p,T);default:if(oe)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),oe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(x,g,p){return g===0&&p===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(g,p))}function q(x,g,p){p=Math.min(x.length,p);let T=[],J=g;for(;J<p;){let C=x[J],oe=null,ce=C>239?4:C>223?3:C>191?2:1;if(J+ce<=p){let xe,_e,Re,Q;switch(ce){case 1:C<128&&(oe=C);break;case 2:xe=x[J+1],(xe&192)===128&&(Q=(C&31)<<6|xe&63,Q>127&&(oe=Q));break;case 3:xe=x[J+1],_e=x[J+2],(xe&192)===128&&(_e&192)===128&&(Q=(C&15)<<12|(xe&63)<<6|_e&63,Q>2047&&(Q<55296||Q>57343)&&(oe=Q));break;case 4:xe=x[J+1],_e=x[J+2],Re=x[J+3],(xe&192)===128&&(_e&192)===128&&(Re&192)===128&&(Q=(C&15)<<18|(xe&63)<<12|(_e&63)<<6|Re&63,Q>65535&&Q<1114112&&(oe=Q))}}oe===null?(oe=65533,ce=1):oe>65535&&(oe-=65536,T.push(oe>>>10&1023|55296),oe=56320|oe&1023),T.push(oe),J+=ce}return Ee(T)}let fe=4096;function Ee(x){let g=x.length;if(g<=fe)return String.fromCharCode.apply(String,x);let p="",T=0;for(;T<g;)p+=String.fromCharCode.apply(String,x.slice(T,T+=fe));return p}function ve(x,g,p){let T="";p=Math.min(x.length,p);for(let J=g;J<p;++J)T+=String.fromCharCode(x[J]&127);return T}function H(x,g,p){let T="";p=Math.min(x.length,p);for(let J=g;J<p;++J)T+=String.fromCharCode(x[J]);return T}function D(x,g,p){let T=x.length;(!g||g<0)&&(g=0),(!p||p<0||p>T)&&(p=T);let J="";for(let C=g;C<p;++C)J+=ze[x[C]];return J}function ee(x,g,p){let T=x.slice(g,p),J="";for(let C=0;C<T.length-1;C+=2)J+=String.fromCharCode(T[C]+T[C+1]*256);return J}s.prototype.slice=function(g,p){let T=this.length;g=~~g,p=p===void 0?T:~~p,g<0?(g+=T,g<0&&(g=0)):g>T&&(g=T),p<0?(p+=T,p<0&&(p=0)):p>T&&(p=T),p<g&&(p=g);let J=this.subarray(g,p);return Object.setPrototypeOf(J,s.prototype),J};function B(x,g,p){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+g>p)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g],C=1,oe=0;for(;++oe<p&&(C*=256);)J+=this[g+oe]*C;return J},s.prototype.readUintBE=s.prototype.readUIntBE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g+--p],C=1;for(;p>0&&(C*=256);)J+=this[g+--p]*C;return J},s.prototype.readUint8=s.prototype.readUInt8=function(g,p){return g=g>>>0,p||B(g,1,this.length),this[g]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(g,p){return g=g>>>0,p||B(g,2,this.length),this[g]|this[g+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(g,p){return g=g>>>0,p||B(g,2,this.length),this[g]<<8|this[g+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(g,p){return g=g>>>0,p||B(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},s.prototype.readBigUInt64LE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,C=this[++g]+this[++g]*2**8+this[++g]*2**16+T*2**24;return BigInt(J)+(BigInt(C)<<BigInt(32))}),s.prototype.readBigUInt64BE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=p*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],C=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+T;return(BigInt(J)<<BigInt(32))+BigInt(C)}),s.prototype.readIntLE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g],C=1,oe=0;for(;++oe<p&&(C*=256);)J+=this[g+oe]*C;return C*=128,J>=C&&(J-=Math.pow(2,8*p)),J},s.prototype.readIntBE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=p,C=1,oe=this[g+--J];for(;J>0&&(C*=256);)oe+=this[g+--J]*C;return C*=128,oe>=C&&(oe-=Math.pow(2,8*p)),oe},s.prototype.readInt8=function(g,p){return g=g>>>0,p||B(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},s.prototype.readInt16LE=function(g,p){g=g>>>0,p||B(g,2,this.length);let T=this[g]|this[g+1]<<8;return T&32768?T|4294901760:T},s.prototype.readInt16BE=function(g,p){g=g>>>0,p||B(g,2,this.length);let T=this[g+1]|this[g]<<8;return T&32768?T|4294901760:T},s.prototype.readInt32LE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},s.prototype.readInt32BE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},s.prototype.readBigInt64LE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(T<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),s.prototype.readBigInt64BE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=(p<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(J)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+T)}),s.prototype.readFloatLE=function(g,p){return g=g>>>0,p||B(g,4,this.length),e.read(this,g,!0,23,4)},s.prototype.readFloatBE=function(g,p){return g=g>>>0,p||B(g,4,this.length),e.read(this,g,!1,23,4)},s.prototype.readDoubleLE=function(g,p){return g=g>>>0,p||B(g,8,this.length),e.read(this,g,!0,52,8)},s.prototype.readDoubleBE=function(g,p){return g=g>>>0,p||B(g,8,this.length),e.read(this,g,!1,52,8)};function L(x,g,p,T,J,C){if(!s.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>J||g<C)throw new RangeError('"value" argument is out of bounds');if(p+T>x.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(g,p,T,J){if(g=+g,p=p>>>0,T=T>>>0,!J){let ce=Math.pow(2,8*T)-1;L(this,g,p,T,ce,0)}let C=1,oe=0;for(this[p]=g&255;++oe<T&&(C*=256);)this[p+oe]=g/C&255;return p+T},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(g,p,T,J){if(g=+g,p=p>>>0,T=T>>>0,!J){let ce=Math.pow(2,8*T)-1;L(this,g,p,T,ce,0)}let C=T-1,oe=1;for(this[p+C]=g&255;--C>=0&&(oe*=256);)this[p+C]=g/oe&255;return p+T},s.prototype.writeUint8=s.prototype.writeUInt8=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,1,255,0),this[p]=g&255,p+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,65535,0),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,65535,0),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,4294967295,0),this[p+3]=g>>>24,this[p+2]=g>>>16,this[p+1]=g>>>8,this[p]=g&255,p+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,4294967295,0),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4};function $(x,g,p,T,J){me(g,T,J,x,p,7);let C=Number(g&BigInt(4294967295));x[p++]=C,C=C>>8,x[p++]=C,C=C>>8,x[p++]=C,C=C>>8,x[p++]=C;let oe=Number(g>>BigInt(32)&BigInt(4294967295));return x[p++]=oe,oe=oe>>8,x[p++]=oe,oe=oe>>8,x[p++]=oe,oe=oe>>8,x[p++]=oe,p}function M(x,g,p,T,J){me(g,T,J,x,p,7);let C=Number(g&BigInt(4294967295));x[p+7]=C,C=C>>8,x[p+6]=C,C=C>>8,x[p+5]=C,C=C>>8,x[p+4]=C;let oe=Number(g>>BigInt(32)&BigInt(4294967295));return x[p+3]=oe,oe=oe>>8,x[p+2]=oe,oe=oe>>8,x[p+1]=oe,oe=oe>>8,x[p]=oe,p+8}s.prototype.writeBigUInt64LE=He(function(g,p=0){return $(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=He(function(g,p=0){return M(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(g,p,T,J){if(g=+g,p=p>>>0,!J){let xe=Math.pow(2,8*T-1);L(this,g,p,T,xe-1,-xe)}let C=0,oe=1,ce=0;for(this[p]=g&255;++C<T&&(oe*=256);)g<0&&ce===0&&this[p+C-1]!==0&&(ce=1),this[p+C]=(g/oe>>0)-ce&255;return p+T},s.prototype.writeIntBE=function(g,p,T,J){if(g=+g,p=p>>>0,!J){let xe=Math.pow(2,8*T-1);L(this,g,p,T,xe-1,-xe)}let C=T-1,oe=1,ce=0;for(this[p+C]=g&255;--C>=0&&(oe*=256);)g<0&&ce===0&&this[p+C+1]!==0&&(ce=1),this[p+C]=(g/oe>>0)-ce&255;return p+T},s.prototype.writeInt8=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,1,127,-128),g<0&&(g=255+g+1),this[p]=g&255,p+1},s.prototype.writeInt16LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,32767,-32768),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeInt16BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,32767,-32768),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeInt32LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,2147483647,-2147483648),this[p]=g&255,this[p+1]=g>>>8,this[p+2]=g>>>16,this[p+3]=g>>>24,p+4},s.prototype.writeInt32BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4},s.prototype.writeBigInt64LE=He(function(g,p=0){return $(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=He(function(g,p=0){return M(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(x,g,p,T,J,C){if(p+T>x.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ne(x,g,p,T,J){return g=+g,p=p>>>0,J||G(x,g,p,4),e.write(x,g,p,T,23,4),p+4}s.prototype.writeFloatLE=function(g,p,T){return ne(this,g,p,!0,T)},s.prototype.writeFloatBE=function(g,p,T){return ne(this,g,p,!1,T)};function se(x,g,p,T,J){return g=+g,p=p>>>0,J||G(x,g,p,8),e.write(x,g,p,T,52,8),p+8}s.prototype.writeDoubleLE=function(g,p,T){return se(this,g,p,!0,T)},s.prototype.writeDoubleBE=function(g,p,T){return se(this,g,p,!1,T)},s.prototype.copy=function(g,p,T,J){if(!s.isBuffer(g))throw new TypeError("argument should be a Buffer");if(T||(T=0),!J&&J!==0&&(J=this.length),p>=g.length&&(p=g.length),p||(p=0),J>0&&J<T&&(J=T),J===T||g.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),g.length-p<J-T&&(J=g.length-p+T);let C=J-T;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,T,J):Uint8Array.prototype.set.call(g,this.subarray(T,J),p),C},s.prototype.fill=function(g,p,T,J){if(typeof g=="string"){if(typeof p=="string"?(J=p,p=0,T=this.length):typeof T=="string"&&(J=T,T=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!s.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(g.length===1){let oe=g.charCodeAt(0);(J==="utf8"&&oe<128||J==="latin1")&&(g=oe)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(p<0||this.length<p||this.length<T)throw new RangeError("Out of range index");if(T<=p)return this;p=p>>>0,T=T===void 0?this.length:T>>>0,g||(g=0);let C;if(typeof g=="number")for(C=p;C<T;++C)this[C]=g;else{let oe=s.isBuffer(g)?g:s.from(g,J),ce=oe.length;if(ce===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(C=0;C<T-p;++C)this[C+p]=oe[C%ce]}return this};let z={};function N(x,g,p){z[x]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}N("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),N("ERR_INVALID_ARG_TYPE",function(x,g){return`The "${x}" argument must be of type number. Received type ${typeof g}`},TypeError),N("ERR_OUT_OF_RANGE",function(x,g,p){let T=`The value of "${x}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=F(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=F(J)),J+="n"),T+=` It must be ${g}. Received ${J}`,T},RangeError);function F(x){let g="",p=x.length,T=x[0]==="-"?1:0;for(;p>=T+4;p-=3)g=`_${x.slice(p-3,p)}${g}`;return`${x.slice(0,p)}${g}`}function le(x,g,p){U(g,"offset"),(x[g]===void 0||x[g+p]===void 0)&&I(g,x.length-(p+1))}function me(x,g,p,T,J,C){if(x>p||x<g){let oe=typeof g=="bigint"?"n":"",ce;throw g===0||g===BigInt(0)?ce=`>= 0${oe} and < 2${oe} ** ${(C+1)*8}${oe}`:ce=`>= -(2${oe} ** ${(C+1)*8-1}${oe}) and < 2 ** ${(C+1)*8-1}${oe}`,new z.ERR_OUT_OF_RANGE("value",ce,x)}le(T,J,C)}function U(x,g){if(typeof x!="number")throw new z.ERR_INVALID_ARG_TYPE(g,"number",x)}function I(x,g,p){throw Math.floor(x)!==x?(U(x,p),new z.ERR_OUT_OF_RANGE("offset","an integer",x)):g<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,x)}let Z=/[^+/0-9A-Za-z-_]/g;function ue(x){if(x=x.split("=")[0],x=x.trim().replace(Z,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Se(x,g){g=g||1/0;let p,T=x.length,J=null,C=[];for(let oe=0;oe<T;++oe){if(p=x.charCodeAt(oe),p>55295&&p<57344){if(!J){if(p>56319){(g-=3)>-1&&C.push(239,191,189);continue}else if(oe+1===T){(g-=3)>-1&&C.push(239,191,189);continue}J=p;continue}if(p<56320){(g-=3)>-1&&C.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(g-=3)>-1&&C.push(239,191,189);if(J=null,p<128){if((g-=1)<0)break;C.push(p)}else if(p<2048){if((g-=2)<0)break;C.push(p>>6|192,p&63|128)}else if(p<65536){if((g-=3)<0)break;C.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((g-=4)<0)break;C.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return C}function Ae(x){let g=[];for(let p=0;p<x.length;++p)g.push(x.charCodeAt(p)&255);return g}function de(x,g){let p,T,J,C=[];for(let oe=0;oe<x.length&&!((g-=2)<0);++oe)p=x.charCodeAt(oe),T=p>>8,J=p%256,C.push(J),C.push(T);return C}function be(x){return r.toByteArray(ue(x))}function Le(x,g,p,T){let J;for(J=0;J<T&&!(J+p>=g.length||J>=x.length);++J)g[J+p]=x[J];return J}function De(x,g){return x instanceof g||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===g.name}function Te(x){return x!==x}let ze=(function(){let x="0123456789abcdef",g=new Array(256);for(let p=0;p<16;++p){let T=p*16;for(let J=0;J<16;++J)g[T+J]=x[p]+x[J]}return g})();function He(x){return typeof BigInt>"u"?We:x}function We(){throw new Error("BigInt not supported")}return Cu}var Sp,tR,b0,rR,Cu,nR,Ff=Jt(()=>{Oe();ke();Ne();Sp={},tR=!1;b0={},rR=!1;Cu={},nR=!1});var Uf={};Uo(Uf,{Buffer:()=>Buffer,INSPECT_MAX_BYTES:()=>V3,default:()=>al,kMaxLength:()=>Y3});var al,Buffer,V3,Y3,ll=Jt(()=>{Oe();ke();Ne();Ff();al=fn();al.Buffer;al.SlowBuffer;al.INSPECT_MAX_BYTES;al.kMaxLength;Buffer=al.Buffer,V3=al.INSPECT_MAX_BYTES,Y3=al.kMaxLength});var ke=Jt(()=>{ll()});function v_(){throw new Error("setTimeout has not been defined")}function __(){throw new Error("clearTimeout has not been defined")}function bR(r){if(Wo===setTimeout)return setTimeout(r,0);if((Wo===v_||!Wo)&&setTimeout)return Wo=setTimeout,setTimeout(r,0);try{return Wo(r,0)}catch{try{return Wo.call(null,r,0)}catch{return Wo.call(this||$f,r,0)}}}function X3(){jf&&Du&&(jf=!1,Du.length?Ho=Du.concat(Ho):x0=-1,Ho.length&&wR())}function wR(){if(!jf){var r=bR(X3);jf=!0;for(var e=Ho.length;e;){for(Du=Ho,Ho=[];++x0<e;)Du&&Du[x0].run();x0=-1,e=Ho.length}Du=null,jf=!1,(function(t){if(qo===clearTimeout)return clearTimeout(t);if((qo===__||!qo)&&clearTimeout)return qo=clearTimeout,clearTimeout(t);try{qo(t)}catch{try{return qo.call(null,t)}catch{return qo.call(this||$f,t)}}})(r)}}function iR(r,e){(this||$f).fun=r,(this||$f).array=e}function zo(){}function Ou(r){return r.call.bind(r)}function Dp(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}function aR(r){return ri&&Ei?Ai(r)!==void 0:CR(r)||RR(r)||DR(r)||IR(r)||OR(r)||NR(r)||kR(r)||LR(r)||PR(r)||MR(r)||BR(r)}function CR(r){return ri&&Ei?Ai(r)==="Uint8Array":xr(r)==="[object Uint8Array]"||s6(r)&&r.buffer!==void 0}function RR(r){return ri&&Ei?Ai(r)==="Uint8ClampedArray":xr(r)==="[object Uint8ClampedArray]"}function DR(r){return ri&&Ei?Ai(r)==="Uint16Array":xr(r)==="[object Uint16Array]"}function IR(r){return ri&&Ei?Ai(r)==="Uint32Array":xr(r)==="[object Uint32Array]"}function OR(r){return ri&&Ei?Ai(r)==="Int8Array":xr(r)==="[object Int8Array]"}function NR(r){return ri&&Ei?Ai(r)==="Int16Array":xr(r)==="[object Int16Array]"}function kR(r){return ri&&Ei?Ai(r)==="Int32Array":xr(r)==="[object Int32Array]"}function LR(r){return ri&&Ei?Ai(r)==="Float32Array":xr(r)==="[object Float32Array]"}function PR(r){return ri&&Ei?Ai(r)==="Float64Array":xr(r)==="[object Float64Array]"}function MR(r){return ri&&Ei?Ai(r)==="BigInt64Array":xr(r)==="[object BigInt64Array]"}function BR(r){return ri&&Ei?Ai(r)==="BigUint64Array":xr(r)==="[object BigUint64Array]"}function w0(r){return xr(r)==="[object Map]"}function v0(r){return xr(r)==="[object Set]"}function _0(r){return xr(r)==="[object WeakMap]"}function m_(r){return xr(r)==="[object WeakSet]"}function T0(r){return xr(r)==="[object ArrayBuffer]"}function lR(r){return typeof ArrayBuffer<"u"&&(T0.working?T0(r):r instanceof ArrayBuffer)}function C0(r){return xr(r)==="[object DataView]"}function uR(r){return typeof DataView<"u"&&(C0.working?C0(r):r instanceof DataView)}function R0(r){return xr(r)==="[object SharedArrayBuffer]"}function cR(r){return typeof SharedArrayBuffer<"u"&&(R0.working?R0(r):r instanceof SharedArrayBuffer)}function fR(r){return Dp(r,u6)}function hR(r){return Dp(r,c6)}function dR(r){return Dp(r,f6)}function pR(r){return xR&&Dp(r,SR)}function gR(r){return A_&&Dp(r,TR)}function ul(r,e){var t={seen:[],stylize:p6};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),x_(e)?t.showHidden=e:e&&qe._extend(t,e),Iu(t.showHidden)&&(t.showHidden=!1),Iu(t.depth)&&(t.depth=2),Iu(t.colors)&&(t.colors=!1),Iu(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=d6),D0(t,r,t.depth)}function d6(r,e){var t=ul.styles[e];return t?"\x1B["+ul.colors[t][0]+"m"+r+"\x1B["+ul.colors[t][1]+"m":r}function p6(r,e){return r}function D0(r,e,t){if(r.customInspect&&e&&S0(e.inspect)&&e.inspect!==qe.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(t,r);return I0(n)||(n=D0(r,n,t)),n}var i=(function(d,m){if(Iu(m))return d.stylize("undefined","undefined");if(I0(m)){var b="'"+JSON.stringify(m).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(b,"string")}if(jR(m))return d.stylize(""+m,"number");if(x_(m))return d.stylize(""+m,"boolean");if(k0(m))return d.stylize("null","null")})(r,e);if(i)return i;var o=Object.keys(e),s=(function(d){var m={};return d.forEach((function(b,v){m[b]=!0})),m})(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),Rp(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return y_(e);if(o.length===0){if(S0(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Cp(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(O0(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Rp(e))return y_(e)}var u,c="",f=!1,h=["{","}"];return UR(e)&&(f=!0,h=["[","]"]),S0(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),Cp(e)&&(c=" "+RegExp.prototype.toString.call(e)),O0(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Rp(e)&&(c=" "+y_(e)),o.length!==0||f&&e.length!=0?t<0?Cp(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special"):(r.seen.push(e),u=f?(function(d,m,b,v,w){for(var y=[],_=0,E=m.length;_<E;++_)$R(m,String(_))?y.push(b_(d,m,b,v,String(_),!0)):y.push("");return w.forEach((function(S){S.match(/^\d+$/)||y.push(b_(d,m,b,v,S,!0))})),y})(r,e,t,s,o):o.map((function(d){return b_(r,e,t,s,d,f)})),r.seen.pop(),(function(d,m,b){var v=0;return d.reduce((function(w,y){return v++,y.indexOf(`
`)>=0&&v++,w+y.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?b[0]+(m===""?"":m+`
 `)+" "+d.join(`,
  `)+" "+b[1]:b[0]+m+" "+d.join(", ")+" "+b[1]})(u,c,h)):h[0]+c+h[1]}function y_(r){return"["+Error.prototype.toString.call(r)+"]"}function b_(r,e,t,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):u.set&&(a=r.stylize("[Setter]","special")),$R(n,i)||(s="["+i+"]"),a||(r.seen.indexOf(u.value)<0?(a=k0(t)?D0(r,u.value,null):D0(r,u.value,t-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(c){return"  "+c})).join(`
`).substr(2):`
`+a.split(`
`).map((function(c){return"   "+c})).join(`
`)):a=r.stylize("[Circular]","special")),Iu(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+a}function UR(r){return Array.isArray(r)}function x_(r){return typeof r=="boolean"}function k0(r){return r===null}function jR(r){return typeof r=="number"}function I0(r){return typeof r=="string"}function Iu(r){return r===void 0}function Cp(r){return zf(r)&&S_(r)==="[object RegExp]"}function zf(r){return typeof r=="object"&&r!==null}function O0(r){return zf(r)&&S_(r)==="[object Date]"}function Rp(r){return zf(r)&&(S_(r)==="[object Error]"||r instanceof Error)}function S0(r){return typeof r=="function"}function S_(r){return Object.prototype.toString.call(r)}function w_(r){return r<10?"0"+r.toString(10):r.toString(10)}function m6(){var r=new Date,e=[w_(r.getHours()),w_(r.getMinutes()),w_(r.getSeconds())].join(":");return[r.getDate(),g6[r.getMonth()],e].join(" ")}function $R(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function y6(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}var yR,Wo,qo,$f,$r,Du,Ho,jf,x0,lr,K3,E_,N0,vR,Z3,J3,Q3,e6,t6,_R,ER,sR,r6,n6,i6,AR,kt,s6,o6,a6,xR,A_,Ei,ri,l6,oR,Ai,xr,u6,c6,f6,SR,TR,Tp,qe,Js,mR,h6,E0,FR,A0,g6,Ru,QV,cl=Jt(()=>{Oe();ke();Ne();$f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,$r=yR={};(function(){try{Wo=typeof setTimeout=="function"?setTimeout:v_}catch{Wo=v_}try{qo=typeof clearTimeout=="function"?clearTimeout:__}catch{qo=__}})();Ho=[],jf=!1,x0=-1;$r.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ho.push(new iR(r,e)),Ho.length!==1||jf||bR(wR)},iR.prototype.run=function(){(this||$f).fun.apply(null,(this||$f).array)},$r.title="browser",$r.browser=!0,$r.env={},$r.argv=[],$r.version="",$r.versions={},$r.on=zo,$r.addListener=zo,$r.once=zo,$r.off=zo,$r.removeListener=zo,$r.removeAllListeners=zo,$r.emit=zo,$r.prependListener=zo,$r.prependOnceListener=zo,$r.listeners=function(r){return[]},$r.binding=function(r){throw new Error("process.binding is not supported")},$r.cwd=function(){return"/"},$r.chdir=function(r){throw new Error("process.chdir is not supported")},$r.umask=function(){return 0};lr=yR;lr.addListener;lr.argv;lr.binding;lr.browser;lr.chdir;lr.cwd;lr.emit;lr.env;lr.listeners;lr.nextTick;lr.off;lr.on;lr.once;lr.prependListener;lr.prependOnceListener;lr.removeAllListeners;lr.removeListener;lr.title;lr.umask;lr.version;lr.versions;K3=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",E_=Object.prototype.toString,N0=function(r){return!(K3&&r&&typeof r=="object"&&Symbol.toStringTag in r)&&E_.call(r)==="[object Arguments]"},vR=function(r){return!!N0(r)||r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&E_.call(r)!=="[object Array]"&&E_.call(r.callee)==="[object Function]"},Z3=(function(){return N0(arguments)})();N0.isLegacyArguments=vR;J3=Z3?N0:vR,Q3=Object.prototype.toString,e6=Function.prototype.toString,t6=/^\s*(?:function)?\*/,_R=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ER=Object.getPrototypeOf,sR=(function(){if(!_R)return!1;try{return Function("return function*() {}")()}catch{}})(),r6=sR?ER(sR):{},n6=function(r){return typeof r=="function"&&(!!t6.test(e6.call(r))||(_R?ER(r)===r6:Q3.call(r)==="[object GeneratorFunction]"))},i6=typeof Object.create=="function"?function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}},AR=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},kt={},s6=AR,o6=J3,a6=n6;xR=typeof BigInt<"u",A_=typeof Symbol<"u",Ei=A_&&Symbol.toStringTag!==void 0,ri=typeof Uint8Array<"u",l6=typeof ArrayBuffer<"u";ri&&Ei&&(oR=Object.getPrototypeOf(Uint8Array.prototype),Ai=Ou(Object.getOwnPropertyDescriptor(oR,Symbol.toStringTag).get));xr=Ou(Object.prototype.toString),u6=Ou(Number.prototype.valueOf),c6=Ou(String.prototype.valueOf),f6=Ou(Boolean.prototype.valueOf);xR&&(SR=Ou(BigInt.prototype.valueOf));A_&&(TR=Ou(Symbol.prototype.valueOf));kt.isArgumentsObject=o6,kt.isGeneratorFunction=a6,kt.isPromise=function(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"},kt.isArrayBufferView=function(r){return l6&&ArrayBuffer.isView?ArrayBuffer.isView(r):aR(r)||uR(r)},kt.isTypedArray=aR,kt.isUint8Array=CR,kt.isUint8ClampedArray=RR,kt.isUint16Array=DR,kt.isUint32Array=IR,kt.isInt8Array=OR,kt.isInt16Array=NR,kt.isInt32Array=kR,kt.isFloat32Array=LR,kt.isFloat64Array=PR,kt.isBigInt64Array=MR,kt.isBigUint64Array=BR,w0.working=typeof Map<"u"&&w0(new Map),kt.isMap=function(r){return typeof Map<"u"&&(w0.working?w0(r):r instanceof Map)},v0.working=typeof Set<"u"&&v0(new Set),kt.isSet=function(r){return typeof Set<"u"&&(v0.working?v0(r):r instanceof Set)},_0.working=typeof WeakMap<"u"&&_0(new WeakMap),kt.isWeakMap=function(r){return typeof WeakMap<"u"&&(_0.working?_0(r):r instanceof WeakMap)},m_.working=typeof WeakSet<"u"&&m_(new WeakSet),kt.isWeakSet=function(r){return m_(r)},T0.working=typeof ArrayBuffer<"u"&&T0(new ArrayBuffer),kt.isArrayBuffer=lR,C0.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&C0(new DataView(new ArrayBuffer(1),0,1)),kt.isDataView=uR,R0.working=typeof SharedArrayBuffer<"u"&&R0(new SharedArrayBuffer),kt.isSharedArrayBuffer=cR,kt.isAsyncFunction=function(r){return xr(r)==="[object AsyncFunction]"},kt.isMapIterator=function(r){return xr(r)==="[object Map Iterator]"},kt.isSetIterator=function(r){return xr(r)==="[object Set Iterator]"},kt.isGeneratorObject=function(r){return xr(r)==="[object Generator]"},kt.isWebAssemblyCompiledModule=function(r){return xr(r)==="[object WebAssembly.Module]"},kt.isNumberObject=fR,kt.isStringObject=hR,kt.isBooleanObject=dR,kt.isBigIntObject=pR,kt.isSymbolObject=gR,kt.isBoxedPrimitive=function(r){return fR(r)||hR(r)||dR(r)||pR(r)||gR(r)},kt.isAnyArrayBuffer=function(r){return ri&&(lR(r)||cR(r))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(r){Object.defineProperty(kt,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})}));Tp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,qe={},Js=lr,mR=Object.getOwnPropertyDescriptors||function(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++)t[e[n]]=Object.getOwnPropertyDescriptor(r,e[n]);return t},h6=/%[sdj%]/g;qe.format=function(r){if(!I0(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(ul(arguments[t]));return e.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(r).replace(h6,(function(a){if(a==="%%")return"%";if(t>=i)return a;switch(a){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return a}})),s=n[t];t<i;s=n[++t])k0(s)||!zf(s)?o+=" "+s:o+=" "+ul(s);return o},qe.deprecate=function(r,e){if(Js!==void 0&&Js.noDeprecation===!0)return r;if(Js===void 0)return function(){return qe.deprecate(r,e).apply(this||Tp,arguments)};var t=!1;return function(){if(!t){if(Js.throwDeprecation)throw new Error(e);Js.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this||Tp,arguments)}};E0={},FR=/^$/;Js.env.NODE_DEBUG&&(A0=Js.env.NODE_DEBUG,A0=A0.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),FR=new RegExp("^"+A0+"$","i"));qe.debuglog=function(r){if(r=r.toUpperCase(),!E0[r])if(FR.test(r)){var e=Js.pid;E0[r]=function(){var t=qe.format.apply(qe,arguments);console.error("%s %d: %s",r,e,t)}}else E0[r]=function(){};return E0[r]},qe.inspect=ul,ul.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ul.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},qe.types=kt,qe.isArray=UR,qe.isBoolean=x_,qe.isNull=k0,qe.isNullOrUndefined=function(r){return r==null},qe.isNumber=jR,qe.isString=I0,qe.isSymbol=function(r){return typeof r=="symbol"},qe.isUndefined=Iu,qe.isRegExp=Cp,qe.types.isRegExp=Cp,qe.isObject=zf,qe.isDate=O0,qe.types.isDate=O0,qe.isError=Rp,qe.types.isNativeError=Rp,qe.isFunction=S0,qe.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},qe.isBuffer=AR;g6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];qe.log=function(){console.log("%s - %s",m6(),qe.format.apply(qe,arguments))},qe.inherits=i6,qe._extend=function(r,e){if(!e||!zf(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};Ru=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;qe.promisify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');if(Ru&&r[Ru]){var e;if(typeof(e=r[Ru])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Ru,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var t,n,i=new Promise((function(a,u){t=a,n=u})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,u){a?n(a):t(u)}));try{r.apply(this||Tp,o)}catch(a){n(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Ru&&Object.defineProperty(e,Ru,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,mR(r))},qe.promisify.custom=Ru,qe.callbackify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this||Tp,s=function(){return i.apply(o,arguments)};r.apply(this||Tp,t).then((function(a){Js.nextTick(s.bind(null,null,a))}),(function(a){Js.nextTick(y6.bind(null,a,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,mR(r)),e};qe._extend;qe.callbackify;qe.debuglog;qe.deprecate;qe.format;qe.inherits;qe.inspect;qe.isArray;qe.isBoolean;qe.isBuffer;qe.isDate;qe.isError;qe.isFunction;qe.isNull;qe.isNullOrUndefined;qe.isNumber;qe.isObject;qe.isPrimitive;qe.isRegExp;qe.isString;qe.isSymbol;qe.isUndefined;qe.log;qe.promisify;qe._extend;qe.callbackify;qe.debuglog;qe.deprecate;qe.format;qe.inherits;qe.inspect;qe.isArray;qe.isBoolean;qe.isBuffer;qe.isDate;qe.isError;qe.isFunction;qe.isNull;qe.isNullOrUndefined;qe.isNumber;qe.isObject;qe.isPrimitive;qe.isRegExp;qe.isString;qe.isSymbol;qe.isUndefined;qe.log;QV=qe.promisify;qe.types});function zR(r,e){if(r==null)throw new TypeError("Cannot convert first argument to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var u=o[s],c=Object.getOwnPropertyDescriptor(i,u);c!==void 0&&c.enumerable&&(t[u]=i[u])}}return t}function ND(){if(tD)return N_;function r(c){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function e(c,f){return!f||r(f)!=="object"&&typeof f!="function"?(function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h})(c):f}function t(c){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(c)}function n(c,f){return(n=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h})(c,f)}tD=!0;var i,o,s={};function a(c,f,h){h||(h=Error);var d=(function(m){function b(v,w,y){var _;return(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,b),(_=e(this,t(b).call(this,(function(E,S,A){return typeof f=="string"?f:f(E,S,A)})(v,w,y)))).code=c,_}return(function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),w&&n(v,w)})(b,m),b})(h);s[c]=d}function u(c,f){if(Array.isArray(c)){var h=c.length;return c=c.map((function(d){return String(d)})),h>2?"one of ".concat(f," ").concat(c.slice(0,h-1).join(", "),", or ")+c[h-1]:h===2?"one of ".concat(f," ").concat(c[0]," or ").concat(c[1]):"of ".concat(f," ").concat(c[0])}return"of ".concat(f," ").concat(String(c))}return a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",(function(c,f,h){var d,m,b;if(i===void 0&&(i=F_()),i(typeof c=="string","'name' must be a string"),typeof f=="string"&&(m="not ",f.substr(0,m.length)===m)?(d="must not be",f=f.replace(/^not /,"")):d="must be",(function(w,y,_){return(_===void 0||_>w.length)&&(_=w.length),w.substring(_-y.length,_)===y})(c," argument"))b="The ".concat(c," ").concat(d," ").concat(u(f,"type"));else{var v=(function(w,y,_){return typeof _!="number"&&(_=0),!(_+y.length>w.length)&&w.indexOf(y,_)!==-1})(c,".")?"property":"argument";b='The "'.concat(c,'" ').concat(v," ").concat(d," ").concat(u(f,"type"))}return b+=". Received type ".concat(r(h))}),TypeError),a("ERR_INVALID_ARG_VALUE",(function(c,f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";o===void 0&&(o=qe);var d=o.inspect(f);return d.length>128&&(d="".concat(d.slice(0,128),"...")),"The argument '".concat(c,"' ").concat(h,". Received ").concat(d)}),TypeError),a("ERR_INVALID_RETURN_VALUE",(function(c,f,h){var d;return d=h&&h.constructor&&h.constructor.name?"instance of ".concat(h.constructor.name):"type ".concat(r(h)),"Expected ".concat(c,' to be returned from the "').concat(f,'"')+" function but got ".concat(d,".")}),TypeError),a("ERR_MISSING_ARGS",(function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];i===void 0&&(i=F_()),i(f.length>0,"At least one arg needs to be specified");var d="The ",m=f.length;switch(f=f.map((function(b){return'"'.concat(b,'"')})),m){case 1:d+="".concat(f[0]," argument");break;case 2:d+="".concat(f[0]," and ").concat(f[1]," arguments");break;default:d+=f.slice(0,m-1).join(", "),d+=", and ".concat(f[m-1]," arguments")}return"".concat(d," must be specified")}),TypeError),N_.codes=s,N_}function r8(){if(nD)return rD;nD=!0;var r=lr;function e(R,Y,te){return Y in R?Object.defineProperty(R,Y,{value:te,enumerable:!0,configurable:!0,writable:!0}):R[Y]=te,R}function t(R,Y){for(var te=0;te<Y.length;te++){var K=Y[te];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(R,K.key,K)}}function n(R,Y){return!Y||f(Y)!=="object"&&typeof Y!="function"?i(R):Y}function i(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function o(R){var Y=typeof Map=="function"?new Map:void 0;return(o=function(te){if(te===null||(K=te,Function.toString.call(K).indexOf("[native code]")===-1))return te;var K;if(typeof te!="function")throw new TypeError("Super expression must either be null or a function");if(Y!==void 0){if(Y.has(te))return Y.get(te);Y.set(te,ie)}function ie(){return a(te,arguments,c(this).constructor)}return ie.prototype=Object.create(te.prototype,{constructor:{value:ie,enumerable:!1,writable:!0,configurable:!0}}),u(ie,te)})(R)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function a(R,Y,te){return(a=s()?Reflect.construct:function(K,ie,j){var q=[null];q.push.apply(q,ie);var fe=new(Function.bind.apply(K,q));return j&&u(fe,j.prototype),fe}).apply(null,arguments)}function u(R,Y){return(u=Object.setPrototypeOf||function(te,K){return te.__proto__=K,te})(R,Y)}function c(R){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(Y){return Y.__proto__||Object.getPrototypeOf(Y)})(R)}function f(R){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y})(R)}var h=qe.inspect,d=ND().codes.ERR_INVALID_ARG_TYPE;function m(R,Y,te){return(te===void 0||te>R.length)&&(te=R.length),R.substring(te-Y.length,te)===Y}var b="",v="",w="",y="",_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function E(R){var Y=Object.keys(R),te=Object.create(Object.getPrototypeOf(R));return Y.forEach((function(K){te[K]=R[K]})),Object.defineProperty(te,"message",{value:R.message}),te}function S(R){return h(R,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(R,Y,te){var K="",ie="",j=0,q="",fe=!1,Ee=S(R),ve=Ee.split(`
`),H=S(Y).split(`
`),D=0,ee="";if(te==="strictEqual"&&f(R)==="object"&&f(Y)==="object"&&R!==null&&Y!==null&&(te="strictEqualObject"),ve.length===1&&H.length===1&&ve[0]!==H[0]){var B=ve[0].length+H[0].length;if(B<=10){if(!(f(R)==="object"&&R!==null||f(Y)==="object"&&Y!==null||R===0&&Y===0))return"".concat(_[te],`

`)+"".concat(ve[0]," !== ").concat(H[0],`
`)}else if(te!=="strictEqualObject"&&B<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;ve[0][D]===H[0][D];)D++;D>2&&(ee=`
  `.concat((function(U,I){if(I=Math.floor(I),U.length==0||I==0)return"";var Z=U.length*I;for(I=Math.floor(Math.log(I)/Math.log(2));I;)U+=U,I--;return U+=U.substring(0,Z-U.length)})(" ",D),"^"),D=0)}}for(var L=ve[ve.length-1],$=H[H.length-1];L===$&&(D++<2?q=`
  `.concat(L).concat(q):K=L,ve.pop(),H.pop(),ve.length!==0&&H.length!==0);)L=ve[ve.length-1],$=H[H.length-1];var M=Math.max(ve.length,H.length);if(M===0){var G=Ee.split(`
`);if(G.length>30)for(G[26]="".concat(b,"...").concat(y);G.length>27;)G.pop();return"".concat(_.notIdentical,`

`).concat(G.join(`
`),`
`)}D>3&&(q=`
`.concat(b,"...").concat(y).concat(q),fe=!0),K!==""&&(q=`
  `.concat(K).concat(q),K="");var ne=0,se=_[te]+`
`.concat(v,"+ actual").concat(y," ").concat(w,"- expected").concat(y),z=" ".concat(b,"...").concat(y," Lines skipped");for(D=0;D<M;D++){var N=D-j;if(ve.length<D+1)N>1&&D>2&&(N>4?(ie+=`
`.concat(b,"...").concat(y),fe=!0):N>3&&(ie+=`
  `.concat(H[D-2]),ne++),ie+=`
  `.concat(H[D-1]),ne++),j=D,K+=`
`.concat(w,"-").concat(y," ").concat(H[D]),ne++;else if(H.length<D+1)N>1&&D>2&&(N>4?(ie+=`
`.concat(b,"...").concat(y),fe=!0):N>3&&(ie+=`
  `.concat(ve[D-2]),ne++),ie+=`
  `.concat(ve[D-1]),ne++),j=D,ie+=`
`.concat(v,"+").concat(y," ").concat(ve[D]),ne++;else{var F=H[D],le=ve[D],me=le!==F&&(!m(le,",")||le.slice(0,-1)!==F);me&&m(F,",")&&F.slice(0,-1)===le&&(me=!1,le+=","),me?(N>1&&D>2&&(N>4?(ie+=`
`.concat(b,"...").concat(y),fe=!0):N>3&&(ie+=`
  `.concat(ve[D-2]),ne++),ie+=`
  `.concat(ve[D-1]),ne++),j=D,ie+=`
`.concat(v,"+").concat(y," ").concat(le),K+=`
`.concat(w,"-").concat(y," ").concat(F),ne+=2):(ie+=K,K="",N!==1&&D!==0||(ie+=`
  `.concat(le),ne++))}if(ne>20&&D<M-2)return"".concat(se).concat(z,`
`).concat(ie,`
`).concat(b,"...").concat(y).concat(K,`
`)+"".concat(b,"...").concat(y)}return"".concat(se).concat(fe?z:"",`
`).concat(ie).concat(K).concat(q).concat(ee)}var P=(function(R){function Y(ie){var j;if((function(G,ne){if(!(G instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,Y),f(ie)!=="object"||ie===null)throw new d("options","Object",ie);var q=ie.message,fe=ie.operator,Ee=ie.stackStartFn,ve=ie.actual,H=ie.expected,D=Error.stackTraceLimit;if(Error.stackTraceLimit=0,q!=null)j=n(this,c(Y).call(this,String(q)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&r.stderr.getColorDepth()!==1?(b="\x1B[34m",v="\x1B[32m",y="\x1B[39m",w="\x1B[31m"):(b="",v="",y="",w="")),f(ve)==="object"&&ve!==null&&f(H)==="object"&&H!==null&&"stack"in ve&&ve instanceof Error&&"stack"in H&&H instanceof Error&&(ve=E(ve),H=E(H)),fe==="deepStrictEqual"||fe==="strictEqual")j=n(this,c(Y).call(this,A(ve,H,fe)));else if(fe==="notDeepStrictEqual"||fe==="notStrictEqual"){var ee=_[fe],B=S(ve).split(`
`);if(fe==="notStrictEqual"&&f(ve)==="object"&&ve!==null&&(ee=_.notStrictEqualObject),B.length>30)for(B[26]="".concat(b,"...").concat(y);B.length>27;)B.pop();j=B.length===1?n(this,c(Y).call(this,"".concat(ee," ").concat(B[0]))):n(this,c(Y).call(this,"".concat(ee,`

`).concat(B.join(`
`),`
`)))}else{var L=S(ve),$="",M=_[fe];fe==="notDeepEqual"||fe==="notEqual"?(L="".concat(_[fe],`

`).concat(L)).length>1024&&(L="".concat(L.slice(0,1021),"...")):($="".concat(S(H)),L.length>512&&(L="".concat(L.slice(0,509),"...")),$.length>512&&($="".concat($.slice(0,509),"...")),fe==="deepEqual"||fe==="equal"?L="".concat(M,`

`).concat(L,`

should equal

`):$=" ".concat(fe," ").concat($)),j=n(this,c(Y).call(this,"".concat(L).concat($)))}return Error.stackTraceLimit=D,j.generatedMessage=!q,Object.defineProperty(i(j),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),j.code="ERR_ASSERTION",j.actual=ve,j.expected=H,j.operator=fe,Error.captureStackTrace&&Error.captureStackTrace(i(j),Ee),j.stack,j.name="AssertionError",n(j)}var te,K;return(function(ie,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(j&&j.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),j&&u(ie,j)})(Y,R),te=Y,(K=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(ie,j){return h(this,(function(q){for(var fe=1;fe<arguments.length;fe++){var Ee=arguments[fe]!=null?arguments[fe]:{},ve=Object.keys(Ee);typeof Object.getOwnPropertySymbols=="function"&&(ve=ve.concat(Object.getOwnPropertySymbols(Ee).filter((function(H){return Object.getOwnPropertyDescriptor(Ee,H).enumerable})))),ve.forEach((function(H){e(q,H,Ee[H])}))}return q})({},j,{customInspect:!1,depth:0}))}}])&&t(te.prototype,K),Y})(o(Error));return rD=P}function iD(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(i.push(u.value),!n||i.length!==n);o=!0);}catch(f){s=!0,a=f}finally{try{o||c.return==null||c.return()}finally{if(s)throw a}}return i})(r,e)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function Ts(r){return(Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function $_(r){return r.call.bind(r)}function f8(r){if(r.length===0||r.length>10)return!0;for(var e=0;e<r.length;e++){var t=r.charCodeAt(e);if(t<48||t>57)return!0}return r.length===10&&r>=Math.pow(2,32)}function B0(r){return Object.keys(r).filter(f8).concat(U0(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function pD(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}function ts(r,e,t,n){if(r===e)return r!==0||!t||oD(r,e);if(t){if(Ts(r)!=="object")return typeof r=="number"&&B_(r)&&B_(e);if(Ts(e)!=="object"||r===null||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1}else{if(r===null||Ts(r)!=="object")return(e===null||Ts(e)!=="object")&&r==e;if(e===null||Ts(e)!=="object")return!1}var i,o,s,a,u=aD(r);if(u!==aD(e))return!1;if(Array.isArray(r)){if(r.length!==e.length)return!1;var c=B0(r),f=B0(e);return c.length===f.length&&Np(r,e,t,n,1,c)}if(u==="[object Object]"&&(!P0(r)&&P0(e)||!M0(r)&&M0(e)))return!1;if(lD(r)){if(!lD(e)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(e))return!1}else if(uD(r)){if(!uD(e)||(s=r,a=e,!(n8?s.source===a.source&&s.flags===a.flags:RegExp.prototype.toString.call(s)===RegExp.prototype.toString.call(a))))return!1}else if(o8(r)||r instanceof Error){if(r.message!==e.message||r.name!==e.name)return!1}else{if(s8(r)){if(t||!u8(r)&&!c8(r)){if(!(function(m,b){return m.byteLength===b.byteLength&&pD(new Uint8Array(m.buffer,m.byteOffset,m.byteLength),new Uint8Array(b.buffer,b.byteOffset,b.byteLength))===0})(r,e))return!1}else if(!(function(m,b){if(m.byteLength!==b.byteLength)return!1;for(var v=0;v<m.byteLength;v++)if(m[v]!==b[v])return!1;return!0})(r,e))return!1;var h=B0(r),d=B0(e);return h.length===d.length&&Np(r,e,t,n,0,h)}if(M0(r))return!(!M0(e)||r.size!==e.size)&&Np(r,e,t,n,2);if(P0(r))return!(!P0(e)||r.size!==e.size)&&Np(r,e,t,n,3);if(i8(r)){if(o=e,(i=r).byteLength!==o.byteLength||pD(new Uint8Array(i),new Uint8Array(o))!==0)return!1}else if(a8(r)&&!(function(m,b){return cD(m)?cD(b)&&oD(Number.prototype.valueOf.call(m),Number.prototype.valueOf.call(b)):fD(m)?fD(b)&&String.prototype.valueOf.call(m)===String.prototype.valueOf.call(b):hD(m)?hD(b)&&Boolean.prototype.valueOf.call(m)===Boolean.prototype.valueOf.call(b):dD(m)?dD(b)&&BigInt.prototype.valueOf.call(m)===BigInt.prototype.valueOf.call(b):l8(b)&&Symbol.prototype.valueOf.call(m)===Symbol.prototype.valueOf.call(b)})(r,e))return!1}return Np(r,e,t,n,0)}function gD(r,e){return e.filter((function(t){return j0(r,t)}))}function Np(r,e,t,n,i,o){if(arguments.length===5){o=Object.keys(r);var s=Object.keys(e);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!kp(e,o[a]))return!1;if(t&&arguments.length===5){var u=U0(r);if(u.length!==0){var c=0;for(a=0;a<u.length;a++){var f=u[a];if(j0(r,f)){if(!j0(e,f))return!1;o.push(f),c++}else if(j0(e,f))return!1}var h=U0(e);if(u.length!==h.length&&gD(e,h).length!==c)return!1}else{var d=U0(e);if(d.length!==0&&gD(e,d).length!==0)return!1}}if(o.length===0&&(i===0||i===1&&r.length===0||r.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var m=n.val1.get(r);if(m!==void 0){var b=n.val2.get(e);if(b!==void 0)return m===b}n.position++}n.val1.set(r,n.position),n.val2.set(e,n.position);var v=p8(r,e,t,o,n,i);return n.val1.delete(r),n.val2.delete(e),v}function mD(r,e,t,n){for(var i=$0(r),o=0;o<i.length;o++){var s=i[o];if(ts(e,s,t,n))return r.delete(s),!0}return!1}function kD(r){switch(Ts(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(B_(r))return!1}return!0}function h8(r,e,t){var n=kD(t);return n??(e.has(n)&&!r.has(n))}function d8(r,e,t,n,i){var o=kD(t);if(o!=null)return o;var s=e.get(o);return!(s===void 0&&!e.has(o)||!ts(n,s,!1,i))&&!r.has(o)&&ts(n,s,!1,i)}function yD(r,e,t,n,i,o){for(var s=$0(r),a=0;a<s.length;a++){var u=s[a];if(ts(t,u,i,o)&&ts(n,e.get(u),i,o))return r.delete(u),!0}return!1}function p8(r,e,t,n,i,o){var s=0;if(o===2){if(!(function(f,h,d,m){for(var b=null,v=$0(f),w=0;w<v.length;w++){var y=v[w];if(Ts(y)==="object"&&y!==null)b===null&&(b=new Set),b.add(y);else if(!h.has(y)){if(d||!h8(f,h,y))return!1;b===null&&(b=new Set),b.add(y)}}if(b!==null){for(var _=$0(h),E=0;E<_.length;E++){var S=_[E];if(Ts(S)==="object"&&S!==null){if(!mD(b,S,d,m))return!1}else if(!d&&!f.has(S)&&!mD(b,S,d,m))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===3){if(!(function(f,h,d,m){for(var b=null,v=sD(f),w=0;w<v.length;w++){var y=iD(v[w],2),_=y[0],E=y[1];if(Ts(_)==="object"&&_!==null)b===null&&(b=new Set),b.add(_);else{var S=h.get(_);if(S===void 0&&!h.has(_)||!ts(E,S,d,m)){if(d||!d8(f,h,_,E,m))return!1;b===null&&(b=new Set),b.add(_)}}}if(b!==null){for(var A=sD(h),P=0;P<A.length;P++){var R=iD(A[P],2),Y=(_=R[0],R[1]);if(Ts(_)==="object"&&_!==null){if(!yD(b,f,_,Y,d,m))return!1}else if(!(d||f.has(_)&&ts(f.get(_),Y,!1,m)||yD(b,f,_,Y,!1,m)))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===1)for(;s<r.length;s++){if(!kp(r,s)){if(kp(e,s))return!1;for(var a=Object.keys(r);s<a.length;s++){var u=a[s];if(!kp(e,u)||!ts(r[u],e[u],t,i))return!1}return a.length===Object.keys(e).length}if(!kp(e,s)||!ts(r[s],e[s],t,i))return!1}for(s=0;s<n.length;s++){var c=n[s];if(!ts(r[c],e[c],t,i))return!1}return!0}function F_(){if(wD)return k_;wD=!0;var r=lr;function e(H){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(H)}var t,n,i=ND().codes,o=i.ERR_AMBIGUOUS_ARGUMENT,s=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,u=i.ERR_INVALID_RETURN_VALUE,c=i.ERR_MISSING_ARGS,f=r8(),h=qe.inspect,d=qe.types,m=d.isPromise,b=d.isRegExp,v=Object.assign?Object.assign:b6.assign,w=Object.is?Object.is:DD;function y(){t=bD.isDeepEqual,n=bD.isDeepStrictEqual}var _=!1,E=k_=R,S={};function A(H){throw H.message instanceof Error?H.message:new f(H)}function P(H,D,ee,B){if(!ee){var L=!1;if(D===0)L=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var $=new f({actual:ee,expected:!0,message:B,operator:"==",stackStartFn:H});throw $.generatedMessage=L,$}}function R(){for(var H=arguments.length,D=new Array(H),ee=0;ee<H;ee++)D[ee]=arguments[ee];P.apply(void 0,[R,D.length].concat(D))}E.fail=function H(D,ee,B,L,$){var M,G=arguments.length;if(G===0)M="Failed";else if(G===1)B=D,D=void 0;else{if(_===!1){_=!0;var ne=r.emitWarning?r.emitWarning:console.warn.bind(console);ne("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}G===2&&(L="!=")}if(B instanceof Error)throw B;var se={actual:D,expected:ee,operator:L===void 0?"fail":L,stackStartFn:$||H};B!==void 0&&(se.message=B);var z=new f(se);throw M&&(z.message=M,z.generatedMessage=!0),z},E.AssertionError=f,E.ok=R,E.equal=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");D!=ee&&A({actual:D,expected:ee,message:B,operator:"==",stackStartFn:H})},E.notEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");D==ee&&A({actual:D,expected:ee,message:B,operator:"!=",stackStartFn:H})},E.deepEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(D,ee)||A({actual:D,expected:ee,message:B,operator:"deepEqual",stackStartFn:H})},E.notDeepEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(D,ee)&&A({actual:D,expected:ee,message:B,operator:"notDeepEqual",stackStartFn:H})},E.deepStrictEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(D,ee)||A({actual:D,expected:ee,message:B,operator:"deepStrictEqual",stackStartFn:H})},E.notDeepStrictEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(D,ee)&&A({actual:D,expected:ee,message:B,operator:"notDeepStrictEqual",stackStartFn:H})},E.strictEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");w(D,ee)||A({actual:D,expected:ee,message:B,operator:"strictEqual",stackStartFn:H})},E.notStrictEqual=function H(D,ee,B){if(arguments.length<2)throw new c("actual","expected");w(D,ee)&&A({actual:D,expected:ee,message:B,operator:"notStrictEqual",stackStartFn:H})};var Y=function H(D,ee,B){var L=this;(function($,M){if(!($ instanceof M))throw new TypeError("Cannot call a class as a function")})(this,H),ee.forEach((function($){$ in D&&(B!==void 0&&typeof B[$]=="string"&&b(D[$])&&D[$].test(B[$])?L[$]=B[$]:L[$]=D[$])}))};function te(H,D,ee,B,L,$){if(!(ee in H)||!n(H[ee],D[ee])){if(!B){var M=new Y(H,L),G=new Y(D,L,H),ne=new f({actual:M,expected:G,operator:"deepStrictEqual",stackStartFn:$});throw ne.actual=H,ne.expected=D,ne.operator=$.name,ne}A({actual:H,expected:D,message:B,operator:$.name,stackStartFn:$})}}function K(H,D,ee,B){if(typeof D!="function"){if(b(D))return D.test(H);if(arguments.length===2)throw new s("expected",["Function","RegExp"],D);if(e(H)!=="object"||H===null){var L=new f({actual:H,expected:D,message:ee,operator:"deepStrictEqual",stackStartFn:B});throw L.operator=B.name,L}var $=Object.keys(D);if(D instanceof Error)$.push("name","message");else if($.length===0)throw new a("error",D,"may not be an empty object");return t===void 0&&y(),$.forEach((function(M){typeof H[M]=="string"&&b(D[M])&&D[M].test(H[M])||te(H,D,M,ee,$,B)})),!0}return D.prototype!==void 0&&H instanceof D||!Error.isPrototypeOf(D)&&D.call({},H)===!0}function ie(H){if(typeof H!="function")throw new s("fn","Function",H);try{H()}catch(D){return D}return S}function j(H){return m(H)||H!==null&&e(H)==="object"&&typeof H.then=="function"&&typeof H.catch=="function"}function q(H){return Promise.resolve().then((function(){var D;if(typeof H=="function"){if(!j(D=H()))throw new u("instance of Promise","promiseFn",D)}else{if(!j(H))throw new s("promiseFn",["Function","Promise"],H);D=H}return Promise.resolve().then((function(){return D})).then((function(){return S})).catch((function(ee){return ee}))}))}function fe(H,D,ee,B){if(typeof ee=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],ee);if(e(D)==="object"&&D!==null){if(D.message===ee)throw new o("error/message",'The error message "'.concat(D.message,'" is identical to the message.'))}else if(D===ee)throw new o("error/message",'The error "'.concat(D,'" is identical to the message.'));B=ee,ee=void 0}else if(ee!=null&&e(ee)!=="object"&&typeof ee!="function")throw new s("error",["Object","Error","Function","RegExp"],ee);if(D===S){var L="";ee&&ee.name&&(L+=" (".concat(ee.name,")")),L+=B?": ".concat(B):".";var $=H.name==="rejects"?"rejection":"exception";A({actual:void 0,expected:ee,operator:H.name,message:"Missing expected ".concat($).concat(L),stackStartFn:H})}if(ee&&!K(D,ee,B,H))throw D}function Ee(H,D,ee,B){if(D!==S){if(typeof ee=="string"&&(B=ee,ee=void 0),!ee||K(D,ee)){var L=B?": ".concat(B):".",$=H.name==="doesNotReject"?"rejection":"exception";A({actual:D,expected:ee,operator:H.name,message:"Got unwanted ".concat($).concat(L,`
`)+'Actual message: "'.concat(D&&D.message,'"'),stackStartFn:H})}throw D}}function ve(){for(var H=arguments.length,D=new Array(H),ee=0;ee<H;ee++)D[ee]=arguments[ee];P.apply(void 0,[ve,D.length].concat(D))}return E.throws=function H(D){for(var ee=arguments.length,B=new Array(ee>1?ee-1:0),L=1;L<ee;L++)B[L-1]=arguments[L];fe.apply(void 0,[H,ie(D)].concat(B))},E.rejects=function H(D){for(var ee=arguments.length,B=new Array(ee>1?ee-1:0),L=1;L<ee;L++)B[L-1]=arguments[L];return q(D).then((function($){return fe.apply(void 0,[H,$].concat(B))}))},E.doesNotThrow=function H(D){for(var ee=arguments.length,B=new Array(ee>1?ee-1:0),L=1;L<ee;L++)B[L-1]=arguments[L];Ee.apply(void 0,[H,ie(D)].concat(B))},E.doesNotReject=function H(D){for(var ee=arguments.length,B=new Array(ee>1?ee-1:0),L=1;L<ee;L++)B[L-1]=arguments[L];return q(D).then((function($){return Ee.apply(void 0,[H,$].concat(B))}))},E.ifError=function H(D){if(D!=null){var ee="ifError got unwanted exception: ";e(D)==="object"&&typeof D.message=="string"?D.message.length===0&&D.constructor?ee+=D.constructor.name:ee+=D.message:ee+=h(D);var B=new f({actual:D,expected:null,operator:"ifError",message:ee,stackStartFn:H}),L=D.stack;if(typeof L=="string"){var $=L.split(`
`);$.shift();for(var M=B.stack.split(`
`),G=0;G<$.length;G++){var ne=M.indexOf($[G]);if(ne!==-1){M=M.slice(0,ne);break}}B.stack="".concat(M.join(`
`),`
`).concat($.join(`
`))}throw B}},E.strict=v(ve,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict,k_}var b6,vD,WR,_D,Ip,T_,qR,C_,HR,GR,Op,L0,VR,YR,w6,v6,_6,XR,F0,KR,E6,A6,x6,S6,T6,L_,ED,C6,AD,z0,R6,ZR,D6,I6,O6,R_,N6,k6,xD,Lp,Lu,D_,L6,Nu,ku,I_,O_,JR,P6,M6,B6,F6,U6,SD,QR,TD,j6,$6,z6,P_,M_,eD,W6,q6,H6,G6,V6,CD,Y6,RD,DD,U_,j_,X6,K6,Z6,J6,Q6,ID,e8,OD,t8,N_,tD,rD,nD,n8,$0,sD,oD,U0,B_,kp,j0,aD,Hn,i8,s8,lD,P0,uD,M0,o8,a8,cD,fD,hD,dD,l8,u8,c8,bD,k_,wD,pt,z_=Jt(()=>{Oe();ke();Ne();cl();b6={assign:zR,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:zR})}},WR=Object.prototype.toString,_D=function(r){var e=WR.call(r),t=e==="[object Arguments]";return t||(t=e!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&WR.call(r.callee)==="[object Function]"),t};Object.keys||(Ip=Object.prototype.hasOwnProperty,T_=Object.prototype.toString,qR=_D,C_=Object.prototype.propertyIsEnumerable,HR=!C_.call({toString:null},"toString"),GR=C_.call((function(){}),"prototype"),Op=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],L0=function(r){var e=r.constructor;return e&&e.prototype===r},VR={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},YR=(function(){if(typeof window>"u")return!1;for(var r in window)try{if(!VR["$"+r]&&Ip.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{L0(window[r])}catch{return!0}}catch{return!0}return!1})(),vD=function(r){var e=r!==null&&typeof r=="object",t=T_.call(r)==="[object Function]",n=qR(r),i=e&&T_.call(r)==="[object String]",o=[];if(!e&&!t&&!n)throw new TypeError("Object.keys called on a non-object");var s=GR&&t;if(i&&r.length>0&&!Ip.call(r,0))for(var a=0;a<r.length;++a)o.push(String(a));if(n&&r.length>0)for(var u=0;u<r.length;++u)o.push(String(u));else for(var c in r)s&&c==="prototype"||!Ip.call(r,c)||o.push(String(c));if(HR)for(var f=(function(d){if(typeof window>"u"||!YR)return L0(d);try{return L0(d)}catch{return!1}})(r),h=0;h<Op.length;++h)f&&Op[h]==="constructor"||!Ip.call(r,Op[h])||o.push(Op[h]);return o});w6=vD,v6=Array.prototype.slice,_6=_D,XR=Object.keys,F0=XR?function(r){return XR(r)}:w6,KR=Object.keys;F0.shim=function(){return Object.keys?(function(){var r=Object.keys(arguments);return r&&r.length===arguments.length})(1,2)||(Object.keys=function(r){return _6(r)?KR(v6.call(r)):KR(r)}):Object.keys=F0,Object.keys||F0};E6=F0,A6=E6,x6=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",S6=Object.prototype.toString,T6=Array.prototype.concat,L_=Object.defineProperty,ED=L_&&(function(){var r={};try{for(var e in L_(r,"x",{enumerable:!1,value:r}),r)return!1;return r.x===r}catch{return!1}})(),C6=function(r,e,t,n){var i;(!(e in r)||typeof(i=n)=="function"&&S6.call(i)==="[object Function]"&&n())&&(ED?L_(r,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[e]=t)},AD=function(r,e){var t=arguments.length>2?arguments[2]:{},n=A6(e);x6&&(n=T6.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)C6(r,n[i],e[n[i]],t[n[i]])};AD.supportsDescriptors=!!ED;z0=AD,R6=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;for(e in r[e]=42,r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var n=Object.getOwnPropertySymbols(r);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(r,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0},ZR=(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window).Symbol,D6=R6,I6=function(){return typeof ZR=="function"&&typeof Symbol=="function"&&typeof ZR("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&D6()},O6="Function.prototype.bind called on incompatible ",R_=Array.prototype.slice,N6=Object.prototype.toString,k6=function(r){var e=this;if(typeof e!="function"||N6.call(e)!=="[object Function]")throw new TypeError(O6+e);for(var t,n=R_.call(arguments,1),i=function(){if(this instanceof t){var c=e.apply(this,n.concat(R_.call(arguments)));return Object(c)===c?c:this}return e.apply(r,n.concat(R_.call(arguments)))},o=Math.max(0,e.length-n.length),s=[],a=0;a<o;a++)s.push("$"+a);if(t=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,t.prototype=new u,u.prototype=null}return t},xD=Function.prototype.bind||k6,Lp=TypeError,Lu=Object.getOwnPropertyDescriptor;if(Lu)try{Lu({},"")}catch{Lu=null}D_=function(){throw new Lp},L6=Lu?(function(){try{return arguments.callee,D_}catch{try{return Lu(arguments,"callee").get}catch{return D_}}})():D_,Nu=I6(),ku=Object.getPrototypeOf||function(r){return r.__proto__},I_=typeof Uint8Array>"u"?void 0:ku(Uint8Array),O_={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Nu?ku([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?void 0:DataView,"%DataViewPrototype%":typeof DataView>"u"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Nu?ku(ku([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%JSONParse%":typeof JSON=="object"?JSON.parse:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Nu?ku(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map>"u"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%PromisePrototype%":typeof Promise>"u"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?void 0:Promise.all,"%Promise_reject%":typeof Promise>"u"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?void 0:Promise.resolve,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Nu?ku(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set>"u"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Nu?ku(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Nu?Symbol:void 0,"%SymbolPrototype%":Nu?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":L6,"%TypedArray%":I_,"%TypedArrayPrototype%":I_?I_.prototype:void 0,"%TypeError%":Lp,"%TypeErrorPrototype%":Lp.prototype,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?void 0:WeakSet.prototype},JR=xD.call(Function.call,String.prototype.replace),P6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M6=/\\(\\)?/g,B6=function(r){var e=[];return JR(r,P6,(function(t,n,i,o){e[e.length]=i?JR(o,M6,"$1"):n||t})),e},F6=function(r,e){if(!(r in O_))throw new SyntaxError("intrinsic "+r+" does not exist!");if(O_[r]===void 0&&!e)throw new Lp("intrinsic "+r+" exists, but is not available. Please file an issue!");return O_[r]},U6=function(r,e){if(r.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var t=B6(r),n=F6("%"+(t.length>0?t[0]:"")+"%",e),i=1;i<t.length;i+=1)if(n!=null)if(Lu&&i+1>=t.length){var o=Lu(n,t[i]);if(!(t[i]in n))throw new Lp("base intrinsic for "+r+" exists, but the property is not available.");n=o?o.get||o.value:n[t[i]]}else n=n[t[i]];return n},QR=xD,TD=U6("%Function%"),j6=TD.apply,$6=TD.call;(SD=function(){return QR.apply($6,arguments)}).apply=function(){return QR.apply(j6,arguments)};z6=SD,eD=function(r){return r!=r},W6=(P_=function(r,e){return r===0&&e===0?1/r==1/e:r===e||!(!eD(r)||!eD(e))},P_),q6=(M_=function(){return typeof Object.is=="function"?Object.is:W6},M_),H6=z0,G6=z0,V6=P_,CD=M_,Y6=function(){var r=q6();return H6(Object,{is:r},{is:function(){return Object.is!==r}}),r},RD=z6(CD(),Object);G6(RD,{getPolyfill:CD,implementation:V6,shim:Y6});DD=RD;U_=function(r){return r!=r};X6=U_,K6=(j_=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:X6},z0),Z6=j_,J6=z0,Q6=U_,ID=j_,e8=function(){var r=Z6();return K6(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},OD=ID();J6(OD,{getPolyfill:ID,implementation:Q6,shim:e8});t8=OD,N_={},tD=!1;rD={},nD=!1;n8=/a/g.flags!==void 0,$0=function(r){var e=[];return r.forEach((function(t){return e.push(t)})),e},sD=function(r){var e=[];return r.forEach((function(t,n){return e.push([n,t])})),e},oD=Object.is?Object.is:DD,U0=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},B_=Number.isNaN?Number.isNaN:t8;kp=$_(Object.prototype.hasOwnProperty),j0=$_(Object.prototype.propertyIsEnumerable),aD=$_(Object.prototype.toString),Hn=qe.types,i8=Hn.isAnyArrayBuffer,s8=Hn.isArrayBufferView,lD=Hn.isDate,P0=Hn.isMap,uD=Hn.isRegExp,M0=Hn.isSet,o8=Hn.isNativeError,a8=Hn.isBoxedPrimitive,cD=Hn.isNumberObject,fD=Hn.isStringObject,hD=Hn.isBooleanObject,dD=Hn.isBigIntObject,l8=Hn.isSymbolObject,u8=Hn.isFloat32Array,c8=Hn.isFloat64Array;bD={isDeepEqual:function(r,e){return ts(r,e,!1)},isDeepStrictEqual:function(r,e){return ts(r,e,!0)}},k_={},wD=!1;pt=F_();pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws});var W_,W0=Jt(()=>{Oe();ke();Ne();cl();qe._extend;qe.callbackify;qe.debuglog;qe.deprecate;qe.format;qe.inherits;qe.inspect;qe.isArray;qe.isBoolean;qe.isBuffer;qe.isDate;qe.isError;qe.isFunction;qe.isNull;qe.isNullOrUndefined;qe.isNumber;qe.isObject;qe.isPrimitive;qe.isRegExp;qe.isString;qe.isSymbol;qe.isUndefined;qe.log;W_=qe.promisify;qe.types;qe.TextEncoder=globalThis.TextEncoder;qe.TextDecoder=globalThis.TextDecoder});function g8(){if(LD)return q_;LD=!0;var r=q_={},e,t;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=i}catch{t=i}})();function o(v){if(e===setTimeout)return setTimeout(v,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(v,0);try{return e(v,0)}catch{try{return e.call(null,v,0)}catch{return e.call(this||Wf,v,0)}}}function s(v){if(t===clearTimeout)return clearTimeout(v);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(v);try{return t(v)}catch{try{return t.call(null,v)}catch{return t.call(this||Wf,v)}}}var a=[],u=!1,c,f=-1;function h(){!u||!c||(u=!1,c.length?a=c.concat(a):f=-1,a.length&&d())}function d(){if(!u){var v=o(h);u=!0;for(var w=a.length;w;){for(c=a,a=[];++f<w;)c&&c[f].run();f=-1,w=a.length}c=null,u=!1,s(v)}}r.nextTick=function(v){var w=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)w[y-1]=arguments[y];a.push(new m(v,w)),a.length===1&&!u&&o(d)};function m(v,w){(this||Wf).fun=v,(this||Wf).array=w}m.prototype.run=function(){(this||Wf).fun.apply(null,(this||Wf).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(v){return[]},r.binding=function(v){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(v){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},q_}var q_,LD,Wf,Gt,qf=Jt(()=>{Oe();ke();Ne();q_={},LD=!1,Wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Gt=g8();Gt.platform="browser";Gt.addListener;Gt.argv;Gt.binding;Gt.browser;Gt.chdir;Gt.cwd;Gt.emit;Gt.env;Gt.listeners;Gt.nextTick;Gt.off;Gt.on;Gt.once;Gt.prependListener;Gt.prependOnceListener;Gt.removeAllListeners;Gt.removeListener;Gt.title;Gt.umask;Gt.version;Gt.versions});function m8(){if(PD)return H_;PD=!0;var r=Gt;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,H_=i,H_}function Pu(r){throw new RangeError(v8[r])}function MD(r,e){let t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]);let i=(function(o,s){let a=[],u=o.length;for(;u--;)a[u]=s(o[u]);return a})((r=r.replace(w8,".")).split("."),e).join(".");return n+i}function HD(r){let e=[],t=0,n=r.length;for(;t<n;){let i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){let o=r.charCodeAt(t++);(64512&o)==56320?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),t--)}else e.push(i)}return e}function E8(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function rs(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Mp(r,e,t){if(r&&Qs.isObject(r)&&r instanceof rs)return r;var n=new rs;return n.parse(r,e,t),n}function N8(){if(WD)return X_;WD=!0;var r=lr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,X_=i,X_}function q8(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Z_?H8(r):G8(r)}function H8(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(F8,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<M8||n>B8||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function G8(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function V8(r){let e=qD.resolve(r),t=r.charCodeAt(r.length-1);(t===P8||Z_&&t===L8)&&e[e.length-1]!==qD.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(U8,"%25")),!Z_&&e.includes("\\")&&(e=e.replace(j8,"%5C")),e.includes(`
`)&&(e=e.replace($8,"%0A")),e.includes("\r")&&(e=e.replace(z8,"%0D")),e.includes("	")&&(e=e.replace(W8,"%09")),n.pathname=e,n}function s4(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return J_?o4(r):a4(r)}function o4(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Q8,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<Z8||n>J8||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function a4(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function l4(r){let e=rn.resolve(r),t=r.charCodeAt(r.length-1);(t===K8||J_&&t===X8)&&e[e.length-1]!==rn.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(e4,"%25")),!J_&&e.includes("\\")&&(e=e.replace(t4,"%5C")),e.includes(`
`)&&(e=e.replace(r4,"%0A")),e.includes("\r")&&(e=e.replace(n4,"%0D")),e.includes("	")&&(e=e.replace(i4,"%09")),n.pathname=e,n}var H_,PD,rn,Gf,y8,b8,w8,v8,eo,G_,BD,GD,FD,UD,_8,A8,Pp,x8,Go,Qt,S8,Qs,T8,C8,R8,D8,K_,jD,$D,zD,I8,O8,V_,Hf,Y_,X_,WD,qD,k8,L8,P8,M8,B8,Z_,F8,U8,j8,$8,z8,W8,Y8,X8,K8,Z8,J8,J_,Q8,e4,t4,r4,n4,i4,VD=Jt(()=>{Oe();ke();Ne();cl();qf();H_={},PD=!1;rn=m8(),Gf=2147483647,y8=/^xn--/,b8=/[^\0-\x7E]/,w8=/[\x2E\u3002\uFF0E\uFF61]/g,v8={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},eo=Math.floor,G_=String.fromCharCode;BD=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},GD=function(r,e,t){let n=0;for(r=t?eo(r/700):r>>1,r+=eo(r/e);r>455;n+=36)r=eo(r/35);return eo(n+36*r/(r+38))},FD=function(r){let e=[],t=r.length,n=0,i=128,o=72,s=r.lastIndexOf("-");s<0&&(s=0);for(let u=0;u<s;++u)r.charCodeAt(u)>=128&&Pu("not-basic"),e.push(r.charCodeAt(u));for(let u=s>0?s+1:0;u<t;){let c=n;for(let h=1,d=36;;d+=36){u>=t&&Pu("invalid-input");let m=(a=r.charCodeAt(u++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(m>=36||m>eo((Gf-n)/h))&&Pu("overflow"),n+=m*h;let b=d<=o?1:d>=o+26?26:d-o;if(m<b)break;let v=36-b;h>eo(Gf/v)&&Pu("overflow"),h*=v}let f=e.length+1;o=GD(n-c,f,c==0),eo(n/f)>Gf-i&&Pu("overflow"),i+=eo(n/f),n%=f,e.splice(n++,0,i)}var a;return String.fromCodePoint(...e)},UD=function(r){let e=[],t=(r=HD(r)).length,n=128,i=0,o=72;for(let u of r)u<128&&e.push(G_(u));let s=e.length,a=s;for(s&&e.push("-");a<t;){let u=Gf;for(let f of r)f>=n&&f<u&&(u=f);let c=a+1;u-n>eo((Gf-i)/c)&&Pu("overflow"),i+=(u-n)*c,n=u;for(let f of r)if(f<n&&++i>Gf&&Pu("overflow"),f==n){let h=i;for(let d=36;;d+=36){let m=d<=o?1:d>=o+26?26:d-o;if(h<m)break;let b=h-m,v=36-m;e.push(G_(BD(m+b%v,0))),h=eo(b/v)}e.push(G_(BD(h,0))),o=GD(i,c,a==s),i=0,++a}++i,++n}return e.join("")},_8={version:"2.1.0",ucs2:{decode:HD,encode:r=>String.fromCodePoint(...r)},decode:FD,encode:UD,toASCII:function(r){return MD(r,(function(e){return b8.test(e)?"xn--"+UD(e):e}))},toUnicode:function(r){return MD(r,(function(e){return y8.test(e)?FD(e.slice(4).toLowerCase()):e}))}};A8=function(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,f,h,d,m=r[u].replace(o,"%20"),b=m.indexOf(t);b>=0?(c=m.substr(0,b),f=m.substr(b+1)):(c=m,f=""),h=decodeURIComponent(c),d=decodeURIComponent(f),E8(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},Pp=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},x8=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map((function(i){var o=encodeURIComponent(Pp(i))+t;return Array.isArray(r[i])?r[i].map((function(s){return o+encodeURIComponent(Pp(s))})).join(e):o+encodeURIComponent(Pp(r[i]))})).join(e):n?encodeURIComponent(Pp(n))+t+encodeURIComponent(Pp(r)):""},Go={};Go.decode=Go.parse=A8,Go.encode=Go.stringify=x8;Go.decode;Go.encode;Go.parse;Go.stringify;Qt={},S8=_8,Qs={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}};Qt.parse=Mp,Qt.resolve=function(r,e){return Mp(r,!1,!0).resolve(e)},Qt.resolveObject=function(r,e){return r?Mp(r,!1,!0).resolveObject(e):e},Qt.format=function(r){return Qs.isString(r)&&(r=Mp(r)),r instanceof rs?r.format():rs.prototype.format.call(r)},Qt.Url=rs;T8=/^([a-z0-9.+-]+:)/i,C8=/:[0-9]*$/,R8=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,D8=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),K_=["'"].concat(D8),jD=["%","/","?",";","#"].concat(K_),$D=["/","?","#"],zD=/^[+a-z0-9A-Z_-]{0,63}$/,I8=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,O8={javascript:!0,"javascript:":!0},V_={javascript:!0,"javascript:":!0},Hf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Y_=Go;rs.prototype.parse=function(r,e,t){if(!Qs.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(i);o[0]=o[0].replace(/\\/g,"/");var s=r=o.join(i);if(s=s.trim(),!t&&r.split("#").length===1){var a=R8.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Y_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=T8.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(t||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";!f||u&&V_[u]||(s=s.substr(2),this.slashes=!0)}if(!V_[u]&&(f||u&&!Hf[u])){for(var h,d,m=-1,b=0;b<$D.length;b++)(v=s.indexOf($D[b]))!==-1&&(m===-1||v<m)&&(m=v);for((d=m===-1?s.lastIndexOf("@"):s.lastIndexOf("@",m))!==-1&&(h=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(h)),m=-1,b=0;b<jD.length;b++){var v;(v=s.indexOf(jD[b]))!==-1&&(m===-1||v<m)&&(m=v)}m===-1&&(m=s.length),this.host=s.slice(0,m),s=s.slice(m),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var y=this.hostname.split(/\./),_=(b=0,y.length);b<_;b++){var E=y[b];if(E&&!E.match(zD)){for(var S="",A=0,P=E.length;A<P;A++)E.charCodeAt(A)>127?S+="x":S+=E[A];if(!S.match(zD)){var R=y.slice(0,b),Y=y.slice(b+1),te=E.match(I8);te&&(R.push(te[1]),Y.unshift(te[2])),Y.length&&(s="/"+Y.join(".")+s),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=S8.toASCII(this.hostname));var K=this.port?":"+this.port:"",ie=this.hostname||"";this.host=ie+K,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!O8[c])for(b=0,_=K_.length;b<_;b++){var j=K_[b];if(s.indexOf(j)!==-1){var q=encodeURIComponent(j);q===j&&(q=escape(j)),s=s.split(j).join(q)}}var fe=s.indexOf("#");fe!==-1&&(this.hash=s.substr(fe),s=s.slice(0,fe));var Ee=s.indexOf("?");if(Ee!==-1?(this.search=s.substr(Ee),this.query=s.substr(Ee+1),e&&(this.query=Y_.parse(this.query)),s=s.slice(0,Ee)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Hf[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){K=this.pathname||"";var ve=this.search||"";this.path=K+ve}return this.href=this.format(),this},rs.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Qs.isObject(this.query)&&Object.keys(this.query).length&&(o=Y_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Hf[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),e+i+(t=t.replace(/[?#]/g,(function(a){return encodeURIComponent(a)})))+(s=s.replace("#","%23"))+n},rs.prototype.resolve=function(r){return this.resolveObject(Mp(r,!1,!0)).format()},rs.prototype.resolveObject=function(r){if(Qs.isString(r)){var e=new rs;e.parse(r,!1,!0),r=e}for(var t=new rs,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return Hf[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Hf[r.protocol]){for(var c=Object.keys(r),f=0;f<c.length;f++){var h=c[f];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||V_[r.protocol])t.pathname=r.pathname;else{for(var d=(r.pathname||"").split("/");d.length&&!(r.host=d.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),t.pathname=d.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var m=t.pathname||"",b=t.search||"";t.path=m+b}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",w=r.host||r.pathname&&r.pathname.charAt(0)==="/",y=w||v||t.host&&r.pathname,_=y,E=t.pathname&&t.pathname.split("/")||[],S=(d=r.pathname&&r.pathname.split("/")||[],t.protocol&&!Hf[t.protocol]);if(S&&(t.hostname="",t.port=null,t.host&&(E[0]===""?E[0]=t.host:E.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(d[0]===""?d[0]=r.host:d.unshift(r.host)),r.host=null),y=y&&(d[0]===""||E[0]==="")),w)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),t.search=r.search,t.query=r.query;else if(!Qs.isNullOrUndefined(r.search))return S&&(t.hostname=t.host=E.shift(),(te=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=te.shift(),t.host=t.hostname=te.shift())),t.search=r.search,t.query=r.query,Qs.isNull(t.pathname)&&Qs.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!E.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=E.slice(-1)[0],P=(t.host||r.host||E.length>1)&&(A==="."||A==="..")||A==="",R=0,Y=E.length;Y>=0;Y--)(A=E[Y])==="."?E.splice(Y,1):A===".."?(E.splice(Y,1),R++):R&&(E.splice(Y,1),R--);if(!y&&!_)for(;R--;R)E.unshift("..");!y||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),P&&E.join("/").substr(-1)!=="/"&&E.push("");var te,K=E[0]===""||E[0]&&E[0].charAt(0)==="/";return S&&(t.hostname=t.host=K?"":E.length?E.shift():"",(te=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=te.shift(),t.host=t.hostname=te.shift())),(y=y||t.host&&E.length)&&!K&&E.unshift(""),E.length?t.pathname=E.join("/"):(t.pathname=null,t.path=null),Qs.isNull(t.pathname)&&Qs.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},rs.prototype.parseHost=function(){var r=this.host,e=C8.exec(r);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;X_={},WD=!1;qD=N8(),k8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=V8;Qt.fileURLToPath=q8;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.URL;L8=92,P8=47,M8=97,B8=122,Z_=k8==="win32",F8=/\//g,U8=/%/g,j8=/\\/g,$8=/\n/g,z8=/\r/g,W8=/\t/g;Y8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=l4;Qt.fileURLToPath=s4;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.parse;Qt.URL;X8=92,K8=47,Z8=97,J8=122,J_=Y8==="win32",Q8=/\//g,e4=/%/g,t4=/\\/g,r4=/\n/g,n4=/\r/g,i4=/\t/g});function rE(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function u4(){!Vf||!Mu||(Vf=!1,Mu.length?Vo=Mu.concat(Vo):q0=-1,Vo.length&&YD())}function YD(){if(!Vf){var r=setTimeout(u4,0);Vf=!0;for(var e=Vo.length;e;){for(Mu=Vo,Vo=[];++q0<e;)Mu&&Mu[q0].run();q0=-1,e=Vo.length}Mu=null,Vf=!1,clearTimeout(r)}}function c4(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Vo.push(new XD(r,e)),Vo.length===1&&!Vf&&setTimeout(YD,0)}function XD(r,e){this.fun=r,this.array=e}function kn(){}function C4(r){rE("_linkedBinding")}function O4(r){rE("dlopen")}function N4(){return[]}function k4(){return[]}function z4(r,e){if(!r)throw new Error(e||"assertion error")}function G4(){return!1}function u5(){return fl.now()/1e3}function tE(r){var e=Math.floor((Date.now()-fl.now())*.001),t=fl.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=eE)),[n,i]}function hl(){return zr}function _5(r){return[]}var Vo,Vf,Mu,q0,f4,h4,d4,p4,g4,m4,y4,b4,w4,v4,_4,E4,A4,x4,S4,T4,R4,D4,I4,L4,P4,nE,M4,B4,F4,U4,j4,$4,W4,q4,H4,V4,Y4,X4,K4,Z4,J4,Q4,e5,t5,r5,n5,i5,s5,o5,a5,l5,fl,Q_,eE,c5,f5,h5,d5,p5,g5,m5,y5,b5,w5,v5,zr,Bu=Jt(()=>{Oe();ke();Ne();Vo=[],Vf=!1,q0=-1;XD.prototype.run=function(){this.fun.apply(null,this.array)};f4="browser",h4="x64",d4="browser",p4={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},g4=["/usr/bin/node"],m4=[],y4="v16.8.0",b4={},w4=function(r,e){console.warn((e?e+": ":"")+r)},v4=function(r){rE("binding")},_4=function(r){return 0},E4=function(){return"/"},A4=function(r){},x4={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};S4=kn,T4=[];R4={},D4=!1,I4={};L4=kn,P4=kn,nE=function(){return{}},M4=nE,B4=nE,F4=kn,U4=kn,j4=kn,$4={};W4={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},q4=kn,H4=kn;V4=kn,Y4=kn,X4=kn,K4=kn,Z4=kn,J4=void 0,Q4=void 0,e5=void 0,t5=kn,r5=2,n5=1,i5="/bin/usr/node",s5=9229,o5="node",a5=[],l5=kn,fl={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};fl.now===void 0&&(Q_=Date.now(),fl.timing&&fl.timing.navigationStart&&(Q_=fl.timing.navigationStart),fl.now=()=>Date.now()-Q_);eE=1e9;tE.bigint=function(r){var e=tE(r);return typeof BigInt>"u"?e[0]*eE+e[1]:BigInt(e[0]*eE)+BigInt(e[1])};c5=10,f5={},h5=0;d5=hl,p5=hl,g5=hl,m5=hl,y5=hl,b5=kn,w5=hl,v5=hl;zr={version:y4,versions:b4,arch:h4,platform:d4,release:x4,_rawDebug:S4,moduleLoadList:T4,binding:v4,_linkedBinding:C4,_events:f5,_eventsCount:h5,_maxListeners:c5,on:hl,addListener:d5,once:p5,off:g5,removeListener:m5,removeAllListeners:y5,emit:b5,prependListener:w5,prependOnceListener:v5,listeners:_5,domain:R4,_exiting:D4,config:I4,dlopen:O4,uptime:u5,_getActiveRequests:N4,_getActiveHandles:k4,reallyExit:L4,_kill:P4,cpuUsage:nE,resourceUsage:M4,memoryUsage:B4,kill:F4,exit:U4,openStdin:j4,allowedNodeEnvironmentFlags:$4,assert:z4,features:W4,_fatalExceptions:q4,setUncaughtExceptionCaptureCallback:H4,hasUncaughtExceptionCaptureCallback:G4,emitWarning:w4,nextTick:c4,_tickCallback:V4,_debugProcess:Y4,_debugEnd:X4,_startProfilerIdleNotifier:K4,_stopProfilerIdleNotifier:Z4,stdout:J4,stdin:e5,stderr:Q4,abort:t5,umask:_4,chdir:A4,cwd:E4,env:p4,title:f4,argv:g4,execArgv:m4,pid:r5,ppid:n5,execPath:i5,debugPort:s5,hrtime:tE,argv0:o5,_preload_modules:a5,setSourceMapsEnabled:l5}});function er(){er.init.call(this)}function H0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function sI(r){return r._maxListeners===void 0?er.defaultMaxListeners:r._maxListeners}function QD(r,e,t,n){var i,o,s,a;if(H0(t),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=sI(r))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return r}function E5(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function eI(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=E5.bind(n);return i.listener=t,n.wrapFn=i,i}function tI(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?(function(o){for(var s=new Array(o.length),a=0;a<s.length;++a)s[a]=o[a].listener||o[a];return s})(i):oI(i,i.length)}function rI(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function oI(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}var nI,iI,Yf,KD,ZD,JD,nn,Xf=Jt(()=>{Oe();ke();Ne();Yf=typeof Reflect=="object"?Reflect:null,KD=Yf&&typeof Yf.apply=="function"?Yf.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};iI=Yf&&typeof Yf.ownKeys=="function"?Yf.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};ZD=Number.isNaN||function(r){return r!=r};nI=er,er.EventEmitter=er,er.prototype._events=void 0,er.prototype._eventsCount=0,er.prototype._maxListeners=void 0;JD=10;Object.defineProperty(er,"defaultMaxListeners",{enumerable:!0,get:function(){return JD},set:function(r){if(typeof r!="number"||r<0||ZD(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");JD=r}}),er.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},er.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||ZD(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},er.prototype.getMaxListeners=function(){return sI(this)},er.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(a===void 0)return!1;if(typeof a=="function")KD(a,this,e);else{var u=a.length,c=oI(a,u);for(t=0;t<u;++t)KD(c[t],this,e)}return!0},er.prototype.addListener=function(r,e){return QD(this,r,e,!1)},er.prototype.on=er.prototype.addListener,er.prototype.prependListener=function(r,e){return QD(this,r,e,!0)},er.prototype.once=function(r,e){return H0(e),this.on(r,eI(this,r,e)),this},er.prototype.prependOnceListener=function(r,e){return H0(e),this.prependListener(r,eI(this,r,e)),this},er.prototype.removeListener=function(r,e){var t,n,i,o,s;if(H0(e),(n=this._events)===void 0)return this;if((t=n[r])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;i===0?t.shift():(function(a,u){for(;u+1<a.length;u++)a[u]=a[u+1];a.pop()})(t,i),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,s||e)}return this},er.prototype.off=er.prototype.removeListener,er.prototype.removeAllListeners=function(r){var e,t,n;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var i,o=Object.keys(t);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[r])=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},er.prototype.listeners=function(r){return tI(this,r,!0)},er.prototype.rawListeners=function(r){return tI(this,r,!1)},er.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):rI.call(r,e)},er.prototype.listenerCount=rI,er.prototype.eventNames=function(){return this._eventsCount>0?iI(this._events):[]};nn=nI;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount});var G0=Jt(()=>{Oe();ke();Ne();Xf();nn.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};nn.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}}});function uI(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function A5(r,e,t){for(var n,i,o=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(255&r[s+2]),o.push(Cs[(i=n)>>18&63]+Cs[i>>12&63]+Cs[i>>6&63]+Cs[63&i]);return o.join("")}function Yo(r){if(r>2147483647)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,Xe.prototype),e}function Xe(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return AE(r)}return FI(r,e,t)}function FI(r,e,t){if(typeof r=="string")return(function(o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!Xe.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|jI(o,s),u=Yo(a),c=u.write(o,s);return c!==a&&(u=u.slice(0,c)),u})(r,e);if(ArrayBuffer.isView(r))return iE(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Xo(r,ArrayBuffer)||r&&Xo(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xo(r,SharedArrayBuffer)||r&&Xo(r.buffer,SharedArrayBuffer)))return fI(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Xe.from(n,e,t);var i=(function(o){if(Xe.isBuffer(o)){var s=0|CE(o.length),a=Yo(s);return a.length===0||o.copy(a,0,0,s),a}if(o.length!==void 0)return typeof o.length!="number"||RE(o.length)?Yo(0):iE(o);if(o.type==="Buffer"&&Array.isArray(o.data))return iE(o.data)})(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Xe.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function UI(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function AE(r){return UI(r),Yo(r<0?0:0|CE(r))}function iE(r){for(var e=r.length<0?0:0|CE(r.length),t=Yo(e),n=0;n<e;n+=1)t[n]=255&r[n];return t}function fI(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=e===void 0&&t===void 0?new Uint8Array(r):t===void 0?new Uint8Array(r,e):new Uint8Array(r,e,t),Object.setPrototypeOf(n,Xe.prototype),n}function CE(r){if(r>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function jI(r,e){if(Xe.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Xo(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return xE(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return qI(r).length;default:if(i)return n?-1:xE(r).length;e=(""+e).toLowerCase(),i=!0}}function S5(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(e>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return L5(this,e,t);case"utf8":case"utf-8":return zI(this,e,t);case"ascii":return N5(this,e,t);case"latin1":case"binary":return k5(this,e,t);case"base64":return O5(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P5(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Uu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function hI(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),RE(t=+t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0){if(!i)return-1;t=0}if(typeof e=="string"&&(e=Xe.from(e,n)),Xe.isBuffer(e))return e.length===0?-1:dI(r,e,t,n,i);if(typeof e=="number")return e&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):dI(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function dI(r,e,t,n,i){var o,s=1,a=r.length,u=e.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,u/=2,t/=2}function c(m,b){return s===1?m[b]:m.readUInt16BE(b*s)}if(i){var f=-1;for(o=t;o<a;o++)if(c(r,o)===c(e,f===-1?0:o-f)){if(f===-1&&(f=o),o-f+1===u)return f*s}else f!==-1&&(o-=o-f),f=-1}else for(t+u>a&&(t=a-u),o=t;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(r,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function T5(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(RE(a))return s;r[t+s]=a}return s}function C5(r,e,t,n){return J0(xE(e,r.length-t),r,t,n)}function $I(r,e,t,n){return J0((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(e),r,t,n)}function R5(r,e,t,n){return $I(r,e,t,n)}function D5(r,e,t,n){return J0(qI(e),r,t,n)}function I5(r,e,t,n){return J0((function(i,o){for(var s,a,u,c=[],f=0;f<i.length&&!((o-=2)<0);++f)s=i.charCodeAt(f),a=s>>8,u=s%256,c.push(u),c.push(a);return c})(e,r.length-t),r,t,n)}function O5(r,e,t){return e===0&&t===r.length?EE.fromByteArray(r):EE.fromByteArray(r.slice(e,t))}function zI(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o,s,a,u,c=r[i],f=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=t)switch(h){case 1:c<128&&(f=c);break;case 2:(192&(o=r[i+1]))==128&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=r[i+1],s=r[i+2],(192&o)==128&&(192&s)==128&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=r[i+1],s=r[i+2],a=r[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}f===null?(f=65533,h=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return(function(d){var m=d.length;if(m<=4096)return String.fromCharCode.apply(String,d);for(var b="",v=0;v<m;)b+=String.fromCharCode.apply(String,d.slice(v,v+=4096));return b})(n)}function N5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(127&r[i]);return n}function k5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function L5(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=B5[r[o]];return i}function P5(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function hn(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function ni(r,e,t,n,i,o){if(!Xe.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function WI(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function pI(r,e,t,n,i){return e=+e,t>>>=0,i||WI(r,0,t,4),Kf.write(r,e,t,n,23,4),t+4}function gI(r,e,t,n,i){return e=+e,t>>>=0,i||WI(r,0,t,8),Kf.write(r,e,t,n,52,8),t+8}function xE(r,e){var t;e=e||1/0;for(var n=r.length,i=null,o=[],s=0;s<n;++s){if((t=r.charCodeAt(s))>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function qI(r){return EE.toByteArray((function(e){if((e=(e=e.split("=")[0]).trim().replace(M5,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(r))}function J0(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Xo(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function RE(r){return r!=r}function mI(r,e){for(var t in r)e[t]=r[t]}function ju(r,e,t){return to(r,e,t)}function Bp(r){var e;switch(this.encoding=(function(t){var n=(function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}})(t);if(typeof n!="string"&&(TE.isEncoding===yI||!yI(t)))throw new Error("Unknown encoding: "+t);return n||t})(r),this.encoding){case"utf16le":this.text=j5,this.end=$5,e=4;break;case"utf8":this.fillLast=U5,e=4;break;case"base64":this.text=z5,this.end=W5,e=3;break;default:return this.write=q5,this.end=H5,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=TE.allocUnsafe(e)}function sE(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function U5(r){var e=this.lastTotal-this.lastNeed,t=(function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}})(this,r);return t!==void 0?t:this.lastNeed<=r.length?(r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length,void 0)}function j5(r,e){if((r.length-e)%2==0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function $5(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function z5(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function W5(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function q5(r){return r.toString(this.encoding)}function H5(r){return r&&r.length?this.write(r):""}function G5(){if(bI)return Fp;bI=!0,Fp.byteLength=a,Fp.toByteArray=c,Fp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=m.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(m){var b=s(m),v=b[0],w=b[1];return(v+w)*3/4-w}function u(m,b,v){return(b+v)*3/4-v}function c(m){var b,v=s(m),w=v[0],y=v[1],_=new t(u(m,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[m.charCodeAt(A)]<<18|e[m.charCodeAt(A+1)]<<12|e[m.charCodeAt(A+2)]<<6|e[m.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[m.charCodeAt(A)]<<2|e[m.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[m.charCodeAt(A)]<<10|e[m.charCodeAt(A+1)]<<4|e[m.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(m[_]<<16&16711680)+(m[_+1]<<8&65280)+(m[_+2]&255),y.push(f(w));return y.join("")}function d(m){for(var b,v=m.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(m,E,E+_>S?S:E+_));return w===1?(b=m[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(m[v-2]<<8)+m[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Fp}function V5(){if(wI)return Y0;wI=!0;return Y0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)},Y0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128},Y0}function Y5(){if(vI)return $u;vI=!0;let r=G5(),e=V5(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$u.Buffer=s,$u.SlowBuffer=y,$u.INSPECT_MAX_BYTES=50;let n=2147483647;$u.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let x=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(x,g),x.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(x){if(x>n)throw new RangeError('The value "'+x+'" is invalid for option "size"');let g=new Uint8Array(x);return Object.setPrototypeOf(g,s.prototype),g}function s(x,g,p){if(typeof x=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return a(x,g,p)}s.poolSize=8192;function a(x,g,p){if(typeof x=="string")return h(x,g);if(ArrayBuffer.isView(x))return m(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(De(x,ArrayBuffer)||x&&De(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(De(x,SharedArrayBuffer)||x&&De(x.buffer,SharedArrayBuffer)))return b(x,g,p);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let T=x.valueOf&&x.valueOf();if(T!=null&&T!==x)return s.from(T,g,p);let J=v(x);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return s.from(x[Symbol.toPrimitive]("string"),g,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}s.from=function(x,g,p){return a(x,g,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,g,p){return u(x),x<=0?o(x):g!==void 0?typeof p=="string"?o(x).fill(g,p):o(x).fill(g):o(x)}s.alloc=function(x,g,p){return c(x,g,p)};function f(x){return u(x),o(x<0?0:w(x)|0)}s.allocUnsafe=function(x){return f(x)},s.allocUnsafeSlow=function(x){return f(x)};function h(x,g){if((typeof g!="string"||g==="")&&(g="utf8"),!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);let p=_(x,g)|0,T=o(p),J=T.write(x,g);return J!==p&&(T=T.slice(0,J)),T}function d(x){let g=x.length<0?0:w(x.length)|0,p=o(g);for(let T=0;T<g;T+=1)p[T]=x[T]&255;return p}function m(x){if(De(x,Uint8Array)){let g=new Uint8Array(x);return b(g.buffer,g.byteOffset,g.byteLength)}return d(x)}function b(x,g,p){if(g<0||x.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<g+(p||0))throw new RangeError('"length" is outside of buffer bounds');let T;return g===void 0&&p===void 0?T=new Uint8Array(x):p===void 0?T=new Uint8Array(x,g):T=new Uint8Array(x,g,p),Object.setPrototypeOf(T,s.prototype),T}function v(x){if(s.isBuffer(x)){let g=w(x.length)|0,p=o(g);return p.length===0||x.copy(p,0,0,g),p}if(x.length!==void 0)return typeof x.length!="number"||Te(x.length)?o(0):d(x);if(x.type==="Buffer"&&Array.isArray(x.data))return d(x.data)}function w(x){if(x>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),s.alloc(+x)}s.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==s.prototype},s.compare=function(g,p){if(De(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),De(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(g)||!s.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===p)return 0;let T=g.length,J=p.length;for(let C=0,oe=Math.min(T,J);C<oe;++C)if(g[C]!==p[C]){T=g[C],J=p[C];break}return T<J?-1:J<T?1:0},s.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(g,p){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return s.alloc(0);let T;if(p===void 0)for(p=0,T=0;T<g.length;++T)p+=g[T].length;let J=s.allocUnsafe(p),C=0;for(T=0;T<g.length;++T){let oe=g[T];if(De(oe,Uint8Array))C+oe.length>J.length?(s.isBuffer(oe)||(oe=s.from(oe)),oe.copy(J,C)):Uint8Array.prototype.set.call(J,oe,C);else if(s.isBuffer(oe))oe.copy(J,C);else throw new TypeError('"list" argument must be an Array of Buffers');C+=oe.length}return J};function _(x,g){if(s.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||De(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);let p=x.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&p===0)return 0;let J=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Se(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return be(x).length;default:if(J)return T?-1:Se(x).length;g=(""+g).toLowerCase(),J=!0}}s.byteLength=_;function E(x,g,p){let T=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,g>>>=0,p<=g))return"";for(x||(x="utf8");;)switch(x){case"hex":return D(this,g,p);case"utf8":case"utf-8":return q(this,g,p);case"ascii":return ve(this,g,p);case"latin1":case"binary":return H(this,g,p);case"base64":return j(this,g,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,g,p);default:if(T)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),T=!0}}s.prototype._isBuffer=!0;function S(x,g,p){let T=x[g];x[g]=x[p],x[p]=T}s.prototype.swap16=function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<g;p+=2)S(this,p,p+1);return this},s.prototype.swap32=function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<g;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},s.prototype.swap64=function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<g;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},s.prototype.toString=function(){let g=this.length;return g===0?"":arguments.length===0?q(this,0,g):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(g){if(!s.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:s.compare(this,g)===0},s.prototype.inspect=function(){let g="",p=$u.INSPECT_MAX_BYTES;return g=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(g+=" ... "),"<Buffer "+g+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(g,p,T,J,C){if(De(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(p===void 0&&(p=0),T===void 0&&(T=g?g.length:0),J===void 0&&(J=0),C===void 0&&(C=this.length),p<0||T>g.length||J<0||C>this.length)throw new RangeError("out of range index");if(J>=C&&p>=T)return 0;if(J>=C)return-1;if(p>=T)return 1;if(p>>>=0,T>>>=0,J>>>=0,C>>>=0,this===g)return 0;let oe=C-J,ce=T-p,xe=Math.min(oe,ce),_e=this.slice(J,C),Re=g.slice(p,T);for(let Q=0;Q<xe;++Q)if(_e[Q]!==Re[Q]){oe=_e[Q],ce=Re[Q];break}return oe<ce?-1:ce<oe?1:0};function A(x,g,p,T,J){if(x.length===0)return-1;if(typeof p=="string"?(T=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Te(p)&&(p=J?0:x.length-1),p<0&&(p=x.length+p),p>=x.length){if(J)return-1;p=x.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof g=="string"&&(g=s.from(g,T)),s.isBuffer(g))return g.length===0?-1:P(x,g,p,T,J);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(x,g,p):Uint8Array.prototype.lastIndexOf.call(x,g,p):P(x,[g],p,T,J);throw new TypeError("val must be string, number or Buffer")}function P(x,g,p,T,J){let C=1,oe=x.length,ce=g.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(x.length<2||g.length<2)return-1;C=2,oe/=2,ce/=2,p/=2}function xe(Re,Q){return C===1?Re[Q]:Re.readUInt16BE(Q*C)}let _e;if(J){let Re=-1;for(_e=p;_e<oe;_e++)if(xe(x,_e)===xe(g,Re===-1?0:_e-Re)){if(Re===-1&&(Re=_e),_e-Re+1===ce)return Re*C}else Re!==-1&&(_e-=_e-Re),Re=-1}else for(p+ce>oe&&(p=oe-ce),_e=p;_e>=0;_e--){let Re=!0;for(let Q=0;Q<ce;Q++)if(xe(x,_e+Q)!==xe(g,Q)){Re=!1;break}if(Re)return _e}return-1}s.prototype.includes=function(g,p,T){return this.indexOf(g,p,T)!==-1},s.prototype.indexOf=function(g,p,T){return A(this,g,p,T,!0)},s.prototype.lastIndexOf=function(g,p,T){return A(this,g,p,T,!1)};function R(x,g,p,T){p=Number(p)||0;let J=x.length-p;T?(T=Number(T),T>J&&(T=J)):T=J;let C=g.length;T>C/2&&(T=C/2);let oe;for(oe=0;oe<T;++oe){let ce=parseInt(g.substr(oe*2,2),16);if(Te(ce))return oe;x[p+oe]=ce}return oe}function Y(x,g,p,T){return Le(Se(g,x.length-p),x,p,T)}function te(x,g,p,T){return Le(Ae(g),x,p,T)}function K(x,g,p,T){return Le(be(g),x,p,T)}function ie(x,g,p,T){return Le(de(g,x.length-p),x,p,T)}s.prototype.write=function(g,p,T,J){if(p===void 0)J="utf8",T=this.length,p=0;else if(T===void 0&&typeof p=="string")J=p,T=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(T)?(T=T>>>0,J===void 0&&(J="utf8")):(J=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let C=this.length-p;if((T===void 0||T>C)&&(T=C),g.length>0&&(T<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let oe=!1;for(;;)switch(J){case"hex":return R(this,g,p,T);case"utf8":case"utf-8":return Y(this,g,p,T);case"ascii":case"latin1":case"binary":return te(this,g,p,T);case"base64":return K(this,g,p,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,g,p,T);default:if(oe)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),oe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(x,g,p){return g===0&&p===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(g,p))}function q(x,g,p){p=Math.min(x.length,p);let T=[],J=g;for(;J<p;){let C=x[J],oe=null,ce=C>239?4:C>223?3:C>191?2:1;if(J+ce<=p){let xe,_e,Re,Q;switch(ce){case 1:C<128&&(oe=C);break;case 2:xe=x[J+1],(xe&192)===128&&(Q=(C&31)<<6|xe&63,Q>127&&(oe=Q));break;case 3:xe=x[J+1],_e=x[J+2],(xe&192)===128&&(_e&192)===128&&(Q=(C&15)<<12|(xe&63)<<6|_e&63,Q>2047&&(Q<55296||Q>57343)&&(oe=Q));break;case 4:xe=x[J+1],_e=x[J+2],Re=x[J+3],(xe&192)===128&&(_e&192)===128&&(Re&192)===128&&(Q=(C&15)<<18|(xe&63)<<12|(_e&63)<<6|Re&63,Q>65535&&Q<1114112&&(oe=Q))}}oe===null?(oe=65533,ce=1):oe>65535&&(oe-=65536,T.push(oe>>>10&1023|55296),oe=56320|oe&1023),T.push(oe),J+=ce}return Ee(T)}let fe=4096;function Ee(x){let g=x.length;if(g<=fe)return String.fromCharCode.apply(String,x);let p="",T=0;for(;T<g;)p+=String.fromCharCode.apply(String,x.slice(T,T+=fe));return p}function ve(x,g,p){let T="";p=Math.min(x.length,p);for(let J=g;J<p;++J)T+=String.fromCharCode(x[J]&127);return T}function H(x,g,p){let T="";p=Math.min(x.length,p);for(let J=g;J<p;++J)T+=String.fromCharCode(x[J]);return T}function D(x,g,p){let T=x.length;(!g||g<0)&&(g=0),(!p||p<0||p>T)&&(p=T);let J="";for(let C=g;C<p;++C)J+=ze[x[C]];return J}function ee(x,g,p){let T=x.slice(g,p),J="";for(let C=0;C<T.length-1;C+=2)J+=String.fromCharCode(T[C]+T[C+1]*256);return J}s.prototype.slice=function(g,p){let T=this.length;g=~~g,p=p===void 0?T:~~p,g<0?(g+=T,g<0&&(g=0)):g>T&&(g=T),p<0?(p+=T,p<0&&(p=0)):p>T&&(p=T),p<g&&(p=g);let J=this.subarray(g,p);return Object.setPrototypeOf(J,s.prototype),J};function B(x,g,p){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+g>p)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g],C=1,oe=0;for(;++oe<p&&(C*=256);)J+=this[g+oe]*C;return J},s.prototype.readUintBE=s.prototype.readUIntBE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g+--p],C=1;for(;p>0&&(C*=256);)J+=this[g+--p]*C;return J},s.prototype.readUint8=s.prototype.readUInt8=function(g,p){return g=g>>>0,p||B(g,1,this.length),this[g]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(g,p){return g=g>>>0,p||B(g,2,this.length),this[g]|this[g+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(g,p){return g=g>>>0,p||B(g,2,this.length),this[g]<<8|this[g+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(g,p){return g=g>>>0,p||B(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},s.prototype.readBigUInt64LE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,C=this[++g]+this[++g]*2**8+this[++g]*2**16+T*2**24;return BigInt(J)+(BigInt(C)<<BigInt(32))}),s.prototype.readBigUInt64BE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=p*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],C=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+T;return(BigInt(J)<<BigInt(32))+BigInt(C)}),s.prototype.readIntLE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=this[g],C=1,oe=0;for(;++oe<p&&(C*=256);)J+=this[g+oe]*C;return C*=128,J>=C&&(J-=Math.pow(2,8*p)),J},s.prototype.readIntBE=function(g,p,T){g=g>>>0,p=p>>>0,T||B(g,p,this.length);let J=p,C=1,oe=this[g+--J];for(;J>0&&(C*=256);)oe+=this[g+--J]*C;return C*=128,oe>=C&&(oe-=Math.pow(2,8*p)),oe},s.prototype.readInt8=function(g,p){return g=g>>>0,p||B(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},s.prototype.readInt16LE=function(g,p){g=g>>>0,p||B(g,2,this.length);let T=this[g]|this[g+1]<<8;return T&32768?T|4294901760:T},s.prototype.readInt16BE=function(g,p){g=g>>>0,p||B(g,2,this.length);let T=this[g+1]|this[g]<<8;return T&32768?T|4294901760:T},s.prototype.readInt32LE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},s.prototype.readInt32BE=function(g,p){return g=g>>>0,p||B(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},s.prototype.readBigInt64LE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(T<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),s.prototype.readBigInt64BE=He(function(g){g=g>>>0,U(g,"offset");let p=this[g],T=this[g+7];(p===void 0||T===void 0)&&I(g,this.length-8);let J=(p<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(J)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+T)}),s.prototype.readFloatLE=function(g,p){return g=g>>>0,p||B(g,4,this.length),e.read(this,g,!0,23,4)},s.prototype.readFloatBE=function(g,p){return g=g>>>0,p||B(g,4,this.length),e.read(this,g,!1,23,4)},s.prototype.readDoubleLE=function(g,p){return g=g>>>0,p||B(g,8,this.length),e.read(this,g,!0,52,8)},s.prototype.readDoubleBE=function(g,p){return g=g>>>0,p||B(g,8,this.length),e.read(this,g,!1,52,8)};function L(x,g,p,T,J,C){if(!s.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>J||g<C)throw new RangeError('"value" argument is out of bounds');if(p+T>x.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(g,p,T,J){if(g=+g,p=p>>>0,T=T>>>0,!J){let ce=Math.pow(2,8*T)-1;L(this,g,p,T,ce,0)}let C=1,oe=0;for(this[p]=g&255;++oe<T&&(C*=256);)this[p+oe]=g/C&255;return p+T},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(g,p,T,J){if(g=+g,p=p>>>0,T=T>>>0,!J){let ce=Math.pow(2,8*T)-1;L(this,g,p,T,ce,0)}let C=T-1,oe=1;for(this[p+C]=g&255;--C>=0&&(oe*=256);)this[p+C]=g/oe&255;return p+T},s.prototype.writeUint8=s.prototype.writeUInt8=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,1,255,0),this[p]=g&255,p+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,65535,0),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,65535,0),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,4294967295,0),this[p+3]=g>>>24,this[p+2]=g>>>16,this[p+1]=g>>>8,this[p]=g&255,p+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,4294967295,0),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4};function $(x,g,p,T,J){me(g,T,J,x,p,7);let C=Number(g&BigInt(4294967295));x[p++]=C,C=C>>8,x[p++]=C,C=C>>8,x[p++]=C,C=C>>8,x[p++]=C;let oe=Number(g>>BigInt(32)&BigInt(4294967295));return x[p++]=oe,oe=oe>>8,x[p++]=oe,oe=oe>>8,x[p++]=oe,oe=oe>>8,x[p++]=oe,p}function M(x,g,p,T,J){me(g,T,J,x,p,7);let C=Number(g&BigInt(4294967295));x[p+7]=C,C=C>>8,x[p+6]=C,C=C>>8,x[p+5]=C,C=C>>8,x[p+4]=C;let oe=Number(g>>BigInt(32)&BigInt(4294967295));return x[p+3]=oe,oe=oe>>8,x[p+2]=oe,oe=oe>>8,x[p+1]=oe,oe=oe>>8,x[p]=oe,p+8}s.prototype.writeBigUInt64LE=He(function(g,p=0){return $(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=He(function(g,p=0){return M(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(g,p,T,J){if(g=+g,p=p>>>0,!J){let xe=Math.pow(2,8*T-1);L(this,g,p,T,xe-1,-xe)}let C=0,oe=1,ce=0;for(this[p]=g&255;++C<T&&(oe*=256);)g<0&&ce===0&&this[p+C-1]!==0&&(ce=1),this[p+C]=(g/oe>>0)-ce&255;return p+T},s.prototype.writeIntBE=function(g,p,T,J){if(g=+g,p=p>>>0,!J){let xe=Math.pow(2,8*T-1);L(this,g,p,T,xe-1,-xe)}let C=T-1,oe=1,ce=0;for(this[p+C]=g&255;--C>=0&&(oe*=256);)g<0&&ce===0&&this[p+C+1]!==0&&(ce=1),this[p+C]=(g/oe>>0)-ce&255;return p+T},s.prototype.writeInt8=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,1,127,-128),g<0&&(g=255+g+1),this[p]=g&255,p+1},s.prototype.writeInt16LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,32767,-32768),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeInt16BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,2,32767,-32768),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeInt32LE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,2147483647,-2147483648),this[p]=g&255,this[p+1]=g>>>8,this[p+2]=g>>>16,this[p+3]=g>>>24,p+4},s.prototype.writeInt32BE=function(g,p,T){return g=+g,p=p>>>0,T||L(this,g,p,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4},s.prototype.writeBigInt64LE=He(function(g,p=0){return $(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=He(function(g,p=0){return M(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(x,g,p,T,J,C){if(p+T>x.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ne(x,g,p,T,J){return g=+g,p=p>>>0,J||G(x,g,p,4),e.write(x,g,p,T,23,4),p+4}s.prototype.writeFloatLE=function(g,p,T){return ne(this,g,p,!0,T)},s.prototype.writeFloatBE=function(g,p,T){return ne(this,g,p,!1,T)};function se(x,g,p,T,J){return g=+g,p=p>>>0,J||G(x,g,p,8),e.write(x,g,p,T,52,8),p+8}s.prototype.writeDoubleLE=function(g,p,T){return se(this,g,p,!0,T)},s.prototype.writeDoubleBE=function(g,p,T){return se(this,g,p,!1,T)},s.prototype.copy=function(g,p,T,J){if(!s.isBuffer(g))throw new TypeError("argument should be a Buffer");if(T||(T=0),!J&&J!==0&&(J=this.length),p>=g.length&&(p=g.length),p||(p=0),J>0&&J<T&&(J=T),J===T||g.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),g.length-p<J-T&&(J=g.length-p+T);let C=J-T;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,T,J):Uint8Array.prototype.set.call(g,this.subarray(T,J),p),C},s.prototype.fill=function(g,p,T,J){if(typeof g=="string"){if(typeof p=="string"?(J=p,p=0,T=this.length):typeof T=="string"&&(J=T,T=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!s.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(g.length===1){let oe=g.charCodeAt(0);(J==="utf8"&&oe<128||J==="latin1")&&(g=oe)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(p<0||this.length<p||this.length<T)throw new RangeError("Out of range index");if(T<=p)return this;p=p>>>0,T=T===void 0?this.length:T>>>0,g||(g=0);let C;if(typeof g=="number")for(C=p;C<T;++C)this[C]=g;else{let oe=s.isBuffer(g)?g:s.from(g,J),ce=oe.length;if(ce===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(C=0;C<T-p;++C)this[C+p]=oe[C%ce]}return this};let z={};function N(x,g,p){z[x]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}N("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),N("ERR_INVALID_ARG_TYPE",function(x,g){return`The "${x}" argument must be of type number. Received type ${typeof g}`},TypeError),N("ERR_OUT_OF_RANGE",function(x,g,p){let T=`The value of "${x}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=F(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=F(J)),J+="n"),T+=` It must be ${g}. Received ${J}`,T},RangeError);function F(x){let g="",p=x.length,T=x[0]==="-"?1:0;for(;p>=T+4;p-=3)g=`_${x.slice(p-3,p)}${g}`;return`${x.slice(0,p)}${g}`}function le(x,g,p){U(g,"offset"),(x[g]===void 0||x[g+p]===void 0)&&I(g,x.length-(p+1))}function me(x,g,p,T,J,C){if(x>p||x<g){let oe=typeof g=="bigint"?"n":"",ce;throw g===0||g===BigInt(0)?ce=`>= 0${oe} and < 2${oe} ** ${(C+1)*8}${oe}`:ce=`>= -(2${oe} ** ${(C+1)*8-1}${oe}) and < 2 ** ${(C+1)*8-1}${oe}`,new z.ERR_OUT_OF_RANGE("value",ce,x)}le(T,J,C)}function U(x,g){if(typeof x!="number")throw new z.ERR_INVALID_ARG_TYPE(g,"number",x)}function I(x,g,p){throw Math.floor(x)!==x?(U(x,p),new z.ERR_OUT_OF_RANGE("offset","an integer",x)):g<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,x)}let Z=/[^+/0-9A-Za-z-_]/g;function ue(x){if(x=x.split("=")[0],x=x.trim().replace(Z,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Se(x,g){g=g||1/0;let p,T=x.length,J=null,C=[];for(let oe=0;oe<T;++oe){if(p=x.charCodeAt(oe),p>55295&&p<57344){if(!J){if(p>56319){(g-=3)>-1&&C.push(239,191,189);continue}else if(oe+1===T){(g-=3)>-1&&C.push(239,191,189);continue}J=p;continue}if(p<56320){(g-=3)>-1&&C.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(g-=3)>-1&&C.push(239,191,189);if(J=null,p<128){if((g-=1)<0)break;C.push(p)}else if(p<2048){if((g-=2)<0)break;C.push(p>>6|192,p&63|128)}else if(p<65536){if((g-=3)<0)break;C.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((g-=4)<0)break;C.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return C}function Ae(x){let g=[];for(let p=0;p<x.length;++p)g.push(x.charCodeAt(p)&255);return g}function de(x,g){let p,T,J,C=[];for(let oe=0;oe<x.length&&!((g-=2)<0);++oe)p=x.charCodeAt(oe),T=p>>8,J=p%256,C.push(J),C.push(T);return C}function be(x){return r.toByteArray(ue(x))}function Le(x,g,p,T){let J;for(J=0;J<T&&!(J+p>=g.length||J>=x.length);++J)g[J+p]=x[J];return J}function De(x,g){return x instanceof g||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===g.name}function Te(x){return x!==x}let ze=(function(){let x="0123456789abcdef",g=new Array(256);for(let p=0;p<16;++p){let T=p*16;for(let J=0;J<16;++J)g[T+J]=x[p]+x[J]}return g})();function He(x){return typeof BigInt>"u"?We:x}function We(){throw new Error("BigInt not supported")}return $u}function Wu(){return _I||(_I=!0,typeof Object.create=="function"?X0=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:X0=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),X0}function HI(){return EI||(EI=!0,oE=nn.EventEmitter),oE}function X5(){if(AI)return aE;AI=!0;function r(d,m){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);m&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(d,w).enumerable})),b.push.apply(b,v)}return b}function e(d){for(var m=1;m<arguments.length;m++){var b=arguments[m]!=null?arguments[m]:{};m%2?r(Object(b),!0).forEach(function(v){t(d,v,b[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):r(Object(b)).forEach(function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(b,v))})}return d}function t(d,m,b){return m in d?Object.defineProperty(d,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[m]=b,d}function n(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function i(d,m){for(var b=0;b<m.length;b++){var v=m[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function o(d,m,b){return m&&i(d.prototype,m),d}var s=Zf,a=s.Buffer,u=qe,c=u.inspect,f=c&&c.custom||"inspect";function h(d,m,b){a.prototype.copy.call(d,m,b)}return aE=(function(){function d(){n(this,d),this.head=null,this.tail=null,this.length=0}return o(d,[{key:"push",value:function(b){var v={data:b,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(b){var v={data:b,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var v=this.head,w=""+v.data;v=v.next;)w+=b+v.data;return w}},{key:"concat",value:function(b){if(this.length===0)return a.alloc(0);for(var v=a.allocUnsafe(b>>>0),w=this.head,y=0;w;)h(w.data,v,y),y+=w.data.length,w=w.next;return v}},{key:"consume",value:function(b,v){var w;return b<this.head.data.length?(w=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?w=this.shift():w=v?this._getString(b):this._getBuffer(b),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var v=this.head,w=1,y=v.data;for(b-=y.length;v=v.next;){var _=v.data,E=b>_.length?_.length:b;if(E===_.length?y+=_:y+=_.slice(0,b),b-=E,b===0){E===_.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(E));break}++w}return this.length-=w,y}},{key:"_getBuffer",value:function(b){var v=a.allocUnsafe(b),w=this.head,y=1;for(w.data.copy(v),b-=w.data.length;w=w.next;){var _=w.data,E=b>_.length?_.length:b;if(_.copy(v,v.length-b,0,E),b-=E,b===0){E===_.length?(++y,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=_.slice(E));break}++y}return this.length-=y,v}},{key:f,value:function(b,v){return c(this,e({},v,{depth:0,customInspect:!1}))}}]),d})(),aE}function GI(){if(xI)return lE;xI=!0;var r=Gt;function e(a,u){var c=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(u?u(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,a)):r.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(d){!u&&d?c._writableState?c._writableState.errorEmitted?r.nextTick(n,c):(c._writableState.errorEmitted=!0,r.nextTick(t,c,d)):r.nextTick(t,c,d):u?(r.nextTick(n,c),u(d)):r.nextTick(n,c)}),this)}function t(a,u){o(a,u),n(a)}function n(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(a,u){a.emit("error",u)}function s(a,u){var c=a._readableState,f=a._writableState;c&&c.autoDestroy||f&&f.autoDestroy?a.destroy(u):a.emit("error",u)}return lE={destroy:e,undestroy:i,errorOrDestroy:s},lE}function Jf(){if(SI)return uE;SI=!0;let r={};function e(s,a,u){u||(u=Error);function c(h,d,m){return typeof a=="string"?a:a(h,d,m)}class f extends u{constructor(d,m,b){super(c(d,m,b))}}f.prototype.name=u.name,f.prototype.code=s,r[s]=f}function t(s,a){if(Array.isArray(s)){let u=s.length;return s=s.map(c=>String(c)),u>2?`one of ${a} ${s.slice(0,u-1).join(", ")}, or `+s[u-1]:u===2?`one of ${a} ${s[0]} or ${s[1]}`:`of ${a} ${s[0]}`}else return`of ${a} ${String(s)}`}function n(s,a,u){return s.substr(0,a.length)===a}function i(s,a,u){return(u===void 0||u>s.length)&&(u=s.length),s.substring(u-a.length,u)===a}function o(s,a,u){return typeof u!="number"&&(u=0),u+a.length>s.length?!1:s.indexOf(a,u)!==-1}return e("ERR_INVALID_OPT_VALUE",function(s,a){return'The value "'+a+'" is invalid for option "'+s+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(s,a,u){let c;typeof a=="string"&&n(a,"not ")?(c="must not be",a=a.replace(/^not /,"")):c="must be";let f;if(i(s," argument"))f=`The ${s} ${c} ${t(a,"type")}`;else{let h=o(s,".")?"property":"argument";f=`The "${s}" ${h} ${c} ${t(a,"type")}`}return f+=`. Received type ${typeof u}`,f},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),uE.codes=r,uE}function VI(){if(TI)return cE;TI=!0;var r=Jf().codes.ERR_INVALID_OPT_VALUE;function e(n,i,o){return n.highWaterMark!=null?n.highWaterMark:i?n[o]:null}function t(n,i,o,s){var a=e(i,s,o);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var u=s?o:"highWaterMark";throw new r(u,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return cE={getHighWaterMark:t},cE}function K5(){if(CI)return fE;CI=!0,fE=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function o(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this||hE,arguments)}return o}function e(t){try{if(!hE.localStorage)return!1}catch{return!1}var n=hE.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return fE}function DE(){if(RI)return dE;RI=!0;var r=Gt;dE=te;function e(z){var N=this;this.next=null,this.entry=null,this.finish=function(){se(N,z)}}var t;te.WritableState=R;var n={deprecate:K5()},i=HI(),o=Zf.Buffer,s=Z5.Uint8Array||function(){};function a(z){return o.from(z)}function u(z){return o.isBuffer(z)||z instanceof s}var c=GI(),f=VI(),h=f.getHighWaterMark,d=Jf().codes,m=d.ERR_INVALID_ARG_TYPE,b=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,w=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,E=d.ERR_STREAM_WRITE_AFTER_END,S=d.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;Wu()(te,i);function P(){}function R(z,N,F){t=t||zu(),z=z||{},typeof F!="boolean"&&(F=N instanceof t),this.objectMode=!!z.objectMode,F&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=h(this,z,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var le=z.decodeStrings===!1;this.decodeStrings=!le,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(me){H(N,me)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}R.prototype.getBuffer=function(){for(var N=this.bufferedRequest,F=[];N;)F.push(N),N=N.next;return F},(function(){try{Object.defineProperty(R.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Y;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Y=Function.prototype[Symbol.hasInstance],Object.defineProperty(te,Symbol.hasInstance,{value:function(N){return Y.call(this,N)?!0:this!==te?!1:N&&N._writableState instanceof R}})):Y=function(N){return N instanceof this};function te(z){t=t||zu();var N=this instanceof t;if(!N&&!Y.call(te,this))return new te(z);this._writableState=new R(z,this,N),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),i.call(this)}te.prototype.pipe=function(){A(this,new w)};function K(z,N){var F=new E;A(z,F),r.nextTick(N,F)}function ie(z,N,F,le){var me;return F===null?me=new _:typeof F!="string"&&!N.objectMode&&(me=new m("chunk",["string","Buffer"],F)),me?(A(z,me),r.nextTick(le,me),!1):!0}te.prototype.write=function(z,N,F){var le=this._writableState,me=!1,U=!le.objectMode&&u(z);return U&&!o.isBuffer(z)&&(z=a(z)),typeof N=="function"&&(F=N,N=null),U?N="buffer":N||(N=le.defaultEncoding),typeof F!="function"&&(F=P),le.ending?K(this,F):(U||ie(this,le,z,F))&&(le.pendingcb++,me=q(this,le,U,z,N,F)),me},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,!z.writing&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&B(this,z))},te.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())>-1))throw new S(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(te.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function j(z,N,F){return!z.objectMode&&z.decodeStrings!==!1&&typeof N=="string"&&(N=o.from(N,F)),N}Object.defineProperty(te.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(z,N,F,le,me,U){if(!F){var I=j(N,le,me);le!==I&&(F=!0,me="buffer",le=I)}var Z=N.objectMode?1:le.length;N.length+=Z;var ue=N.length<N.highWaterMark;if(ue||(N.needDrain=!0),N.writing||N.corked){var Se=N.lastBufferedRequest;N.lastBufferedRequest={chunk:le,encoding:me,isBuf:F,callback:U,next:null},Se?Se.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else fe(z,N,!1,Z,le,me,U);return ue}function fe(z,N,F,le,me,U,I){N.writelen=le,N.writecb=I,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new y("write")):F?z._writev(me,N.onwrite):z._write(me,U,N.onwrite),N.sync=!1}function Ee(z,N,F,le,me){--N.pendingcb,F?(r.nextTick(me,le),r.nextTick(G,z,N),z._writableState.errorEmitted=!0,A(z,le)):(me(le),z._writableState.errorEmitted=!0,A(z,le),G(z,N))}function ve(z){z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0}function H(z,N){var F=z._writableState,le=F.sync,me=F.writecb;if(typeof me!="function")throw new v;if(ve(F),N)Ee(z,F,le,N,me);else{var U=L(F)||z.destroyed;!U&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&B(z,F),le?r.nextTick(D,z,F,U,me):D(z,F,U,me)}}function D(z,N,F,le){F||ee(z,N),N.pendingcb--,le(),G(z,N)}function ee(z,N){N.length===0&&N.needDrain&&(N.needDrain=!1,z.emit("drain"))}function B(z,N){N.bufferProcessing=!0;var F=N.bufferedRequest;if(z._writev&&F&&F.next){var le=N.bufferedRequestCount,me=new Array(le),U=N.corkedRequestsFree;U.entry=F;for(var I=0,Z=!0;F;)me[I]=F,F.isBuf||(Z=!1),F=F.next,I+=1;me.allBuffers=Z,fe(z,N,!0,N.length,me,"",U.finish),N.pendingcb++,N.lastBufferedRequest=null,U.next?(N.corkedRequestsFree=U.next,U.next=null):N.corkedRequestsFree=new e(N),N.bufferedRequestCount=0}else{for(;F;){var ue=F.chunk,Se=F.encoding,Ae=F.callback,de=N.objectMode?1:ue.length;if(fe(z,N,!1,de,ue,Se,Ae),F=F.next,N.bufferedRequestCount--,N.writing)break}F===null&&(N.lastBufferedRequest=null)}N.bufferedRequest=F,N.bufferProcessing=!1}te.prototype._write=function(z,N,F){F(new b("_write()"))},te.prototype._writev=null,te.prototype.end=function(z,N,F){var le=this._writableState;return typeof z=="function"?(F=z,z=null,N=null):typeof N=="function"&&(F=N,N=null),z!=null&&this.write(z,N),le.corked&&(le.corked=1,this.uncork()),le.ending||ne(this,le,F),this},Object.defineProperty(te.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function L(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function $(z,N){z._final(function(F){N.pendingcb--,F&&A(z,F),N.prefinished=!0,z.emit("prefinish"),G(z,N)})}function M(z,N){!N.prefinished&&!N.finalCalled&&(typeof z._final=="function"&&!N.destroyed?(N.pendingcb++,N.finalCalled=!0,r.nextTick($,z,N)):(N.prefinished=!0,z.emit("prefinish")))}function G(z,N){var F=L(N);if(F&&(M(z,N),N.pendingcb===0&&(N.finished=!0,z.emit("finish"),N.autoDestroy))){var le=z._readableState;(!le||le.autoDestroy&&le.endEmitted)&&z.destroy()}return F}function ne(z,N,F){N.ending=!0,G(z,N),F&&(N.finished?r.nextTick(F):z.once("finish",F)),N.ended=!0,z.writable=!1}function se(z,N,F){var le=z.entry;for(z.entry=null;le;){var me=le.callback;N.pendingcb--,me(F),le=le.next}N.corkedRequestsFree.next=z}return Object.defineProperty(te.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),te.prototype.destroy=c.destroy,te.prototype._undestroy=c.undestroy,te.prototype._destroy=function(z,N){N(z)},dE}function zu(){if(DI)return pE;DI=!0;var r=Gt,e=Object.keys||function(f){var h=[];for(var d in f)h.push(d);return h};pE=a;var t=IE(),n=DE();Wu()(a,t);for(var i=e(n.prototype),o=0;o<i.length;o++){var s=i[o];a.prototype[s]||(a.prototype[s]=n.prototype[s])}function a(f){if(!(this instanceof a))return new a(f);t.call(this,f),n.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||r.nextTick(c,this)}function c(f){f.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),pE}function Q0(){if(II)return gE;II=!0;var r=Jf().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];o.apply(this,u)}}}function t(){}function n(o){return o.setHeader&&typeof o.abort=="function"}function i(o,s,a){if(typeof s=="function")return i(o,null,s);s||(s={}),a=e(a||t);var u=s.readable||s.readable!==!1&&o.readable,c=s.writable||s.writable!==!1&&o.writable,f=function(){o.writable||d()},h=o._writableState&&o._writableState.finished,d=function(){c=!1,h=!0,u||a.call(o)},m=o._readableState&&o._readableState.endEmitted,b=function(){u=!1,m=!0,c||a.call(o)},v=function(E){a.call(o,E)},w=function(){var E;if(u&&!m)return(!o._readableState||!o._readableState.ended)&&(E=new r),a.call(o,E);if(c&&!h)return(!o._writableState||!o._writableState.ended)&&(E=new r),a.call(o,E)},y=function(){o.req.on("finish",d)};return n(o)?(o.on("complete",d),o.on("abort",w),o.req?y():o.on("request",y)):c&&!o._writableState&&(o.on("end",f),o.on("close",f)),o.on("end",b),o.on("finish",d),s.error!==!1&&o.on("error",v),o.on("close",w),function(){o.removeListener("complete",d),o.removeListener("abort",w),o.removeListener("request",y),o.req&&o.req.removeListener("finish",d),o.removeListener("end",f),o.removeListener("close",f),o.removeListener("finish",d),o.removeListener("end",b),o.removeListener("error",v),o.removeListener("close",w)}}return gE=i,gE}function J5(){if(OI)return mE;OI=!0;var r=Gt,e;function t(_,E,S){return E in _?Object.defineProperty(_,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[E]=S,_}var n=Q0(),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(_,E){return{value:_,done:E}}function d(_){var E=_[i];if(E!==null){var S=_[f].read();S!==null&&(_[u]=null,_[i]=null,_[o]=null,E(h(S,!1)))}}function m(_){r.nextTick(d,_)}function b(_,E){return function(S,A){_.then(function(){if(E[a]){S(h(void 0,!0));return}E[c](S,A)},A)}}var v=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((e={get stream(){return this[f]},next:function(){var E=this,S=this[s];if(S!==null)return Promise.reject(S);if(this[a])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(Y,te){r.nextTick(function(){E[s]?te(E[s]):Y(h(void 0,!0))})});var A=this[u],P;if(A)P=new Promise(b(A,this));else{var R=this[f].read();if(R!==null)return Promise.resolve(h(R,!1));P=new Promise(this[c])}return this[u]=P,P}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var E=this;return new Promise(function(S,A){E[f].destroy(null,function(P){if(P){A(P);return}S(h(void 0,!0))})})}),e),v),y=function(E){var S,A=Object.create(w,(S={},t(S,f,{value:E,writable:!0}),t(S,i,{value:null,writable:!0}),t(S,o,{value:null,writable:!0}),t(S,s,{value:null,writable:!0}),t(S,a,{value:E._readableState.endEmitted,writable:!0}),t(S,c,{value:function(R,Y){var te=A[f].read();te?(A[u]=null,A[i]=null,A[o]=null,R(h(te,!1))):(A[i]=R,A[o]=Y)},writable:!0}),S));return A[u]=null,n(E,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var R=A[o];R!==null&&(A[u]=null,A[i]=null,A[o]=null,R(P)),A[s]=P;return}var Y=A[i];Y!==null&&(A[u]=null,A[i]=null,A[o]=null,Y(h(void 0,!0))),A[a]=!0}),E.on("readable",m.bind(null,A)),A};return mE=y,mE}function Q5(){return NI||(NI=!0,yE=function(){throw new Error("Readable.from is not available in the browser")}),yE}function IE(){if(kI)return bE;kI=!0;var r=Gt;bE=K;var e;K.ReadableState=te,nn.EventEmitter;var t=function(I,Z){return I.listeners(Z).length},n=HI(),i=Zf.Buffer,o=eU.Uint8Array||function(){};function s(U){return i.from(U)}function a(U){return i.isBuffer(U)||U instanceof o}var u=qe,c;u&&u.debuglog?c=u.debuglog("stream"):c=function(){};var f=X5(),h=GI(),d=VI(),m=d.getHighWaterMark,b=Jf().codes,v=b.ERR_INVALID_ARG_TYPE,w=b.ERR_STREAM_PUSH_AFTER_EOF,y=b.ERR_METHOD_NOT_IMPLEMENTED,_=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,S,A;Wu()(K,n);var P=h.errorOrDestroy,R=["error","close","destroy","pause","resume"];function Y(U,I,Z){if(typeof U.prependListener=="function")return U.prependListener(I,Z);!U._events||!U._events[I]?U.on(I,Z):Array.isArray(U._events[I])?U._events[I].unshift(Z):U._events[I]=[Z,U._events[I]]}function te(U,I,Z){e=e||zu(),U=U||{},typeof Z!="boolean"&&(Z=I instanceof e),this.objectMode=!!U.objectMode,Z&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=m(this,U,"readableHighWaterMark",Z),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(E||(E=SE.StringDecoder),this.decoder=new E(U.encoding),this.encoding=U.encoding)}function K(U){if(e=e||zu(),!(this instanceof K))return new K(U);var I=this instanceof e;this._readableState=new te(U,this,I),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),n.call(this)}Object.defineProperty(K.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(I){this._readableState&&(this._readableState.destroyed=I)}}),K.prototype.destroy=h.destroy,K.prototype._undestroy=h.undestroy,K.prototype._destroy=function(U,I){I(U)},K.prototype.push=function(U,I){var Z=this._readableState,ue;return Z.objectMode?ue=!0:typeof U=="string"&&(I=I||Z.defaultEncoding,I!==Z.encoding&&(U=i.from(U,I),I=""),ue=!0),ie(this,U,I,!1,ue)},K.prototype.unshift=function(U){return ie(this,U,null,!0,!1)};function ie(U,I,Z,ue,Se){c("readableAddChunk",I);var Ae=U._readableState;if(I===null)Ae.reading=!1,H(U,Ae);else{var de;if(Se||(de=q(Ae,I)),de)P(U,de);else if(Ae.objectMode||I&&I.length>0)if(typeof I!="string"&&!Ae.objectMode&&Object.getPrototypeOf(I)!==i.prototype&&(I=s(I)),ue)Ae.endEmitted?P(U,new _):j(U,Ae,I,!0);else if(Ae.ended)P(U,new w);else{if(Ae.destroyed)return!1;Ae.reading=!1,Ae.decoder&&!Z?(I=Ae.decoder.write(I),Ae.objectMode||I.length!==0?j(U,Ae,I,!1):B(U,Ae)):j(U,Ae,I,!1)}else ue||(Ae.reading=!1,B(U,Ae))}return!Ae.ended&&(Ae.length<Ae.highWaterMark||Ae.length===0)}function j(U,I,Z,ue){I.flowing&&I.length===0&&!I.sync?(I.awaitDrain=0,U.emit("data",Z)):(I.length+=I.objectMode?1:Z.length,ue?I.buffer.unshift(Z):I.buffer.push(Z),I.needReadable&&D(U)),B(U,I)}function q(U,I){var Z;return!a(I)&&typeof I!="string"&&I!==void 0&&!U.objectMode&&(Z=new v("chunk",["string","Buffer","Uint8Array"],I)),Z}K.prototype.isPaused=function(){return this._readableState.flowing===!1},K.prototype.setEncoding=function(U){E||(E=SE.StringDecoder);var I=new E(U);this._readableState.decoder=I,this._readableState.encoding=this._readableState.decoder.encoding;for(var Z=this._readableState.buffer.head,ue="";Z!==null;)ue+=I.write(Z.data),Z=Z.next;return this._readableState.buffer.clear(),ue!==""&&this._readableState.buffer.push(ue),this._readableState.length=ue.length,this};var fe=1073741824;function Ee(U){return U>=fe?U=fe:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function ve(U,I){return U<=0||I.length===0&&I.ended?0:I.objectMode?1:U!==U?I.flowing&&I.length?I.buffer.head.data.length:I.length:(U>I.highWaterMark&&(I.highWaterMark=Ee(U)),U<=I.length?U:I.ended?I.length:(I.needReadable=!0,0))}K.prototype.read=function(U){c("read",U),U=parseInt(U,10);var I=this._readableState,Z=U;if(U!==0&&(I.emittedReadable=!1),U===0&&I.needReadable&&((I.highWaterMark!==0?I.length>=I.highWaterMark:I.length>0)||I.ended))return c("read: emitReadable",I.length,I.ended),I.length===0&&I.ended?F(this):D(this),null;if(U=ve(U,I),U===0&&I.ended)return I.length===0&&F(this),null;var ue=I.needReadable;c("need readable",ue),(I.length===0||I.length-U<I.highWaterMark)&&(ue=!0,c("length less than watermark",ue)),I.ended||I.reading?(ue=!1,c("reading or ended",ue)):ue&&(c("do read"),I.reading=!0,I.sync=!0,I.length===0&&(I.needReadable=!0),this._read(I.highWaterMark),I.sync=!1,I.reading||(U=ve(Z,I)));var Se;return U>0?Se=N(U,I):Se=null,Se===null?(I.needReadable=I.length<=I.highWaterMark,U=0):(I.length-=U,I.awaitDrain=0),I.length===0&&(I.ended||(I.needReadable=!0),Z!==U&&I.ended&&F(this)),Se!==null&&this.emit("data",Se),Se};function H(U,I){if(c("onEofChunk"),!I.ended){if(I.decoder){var Z=I.decoder.end();Z&&Z.length&&(I.buffer.push(Z),I.length+=I.objectMode?1:Z.length)}I.ended=!0,I.sync?D(U):(I.needReadable=!1,I.emittedReadable||(I.emittedReadable=!0,ee(U)))}}function D(U){var I=U._readableState;c("emitReadable",I.needReadable,I.emittedReadable),I.needReadable=!1,I.emittedReadable||(c("emitReadable",I.flowing),I.emittedReadable=!0,r.nextTick(ee,U))}function ee(U){var I=U._readableState;c("emitReadable_",I.destroyed,I.length,I.ended),!I.destroyed&&(I.length||I.ended)&&(U.emit("readable"),I.emittedReadable=!1),I.needReadable=!I.flowing&&!I.ended&&I.length<=I.highWaterMark,z(U)}function B(U,I){I.readingMore||(I.readingMore=!0,r.nextTick(L,U,I))}function L(U,I){for(;!I.reading&&!I.ended&&(I.length<I.highWaterMark||I.flowing&&I.length===0);){var Z=I.length;if(c("maybeReadMore read 0"),U.read(0),Z===I.length)break}I.readingMore=!1}K.prototype._read=function(U){P(this,new y("_read()"))},K.prototype.pipe=function(U,I){var Z=this,ue=this._readableState;switch(ue.pipesCount){case 0:ue.pipes=U;break;case 1:ue.pipes=[ue.pipes,U];break;default:ue.pipes.push(U);break}ue.pipesCount+=1,c("pipe count=%d opts=%j",ue.pipesCount,I);var Se=(!I||I.end!==!1)&&U!==r.stdout&&U!==r.stderr,Ae=Se?be:g;ue.endEmitted?r.nextTick(Ae):Z.once("end",Ae),U.on("unpipe",de);function de(p,T){c("onunpipe"),p===Z&&T&&T.hasUnpiped===!1&&(T.hasUnpiped=!0,Te())}function be(){c("onend"),U.end()}var Le=$(Z);U.on("drain",Le);var De=!1;function Te(){c("cleanup"),U.removeListener("close",We),U.removeListener("finish",x),U.removeListener("drain",Le),U.removeListener("error",He),U.removeListener("unpipe",de),Z.removeListener("end",be),Z.removeListener("end",g),Z.removeListener("data",ze),De=!0,ue.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&Le()}Z.on("data",ze);function ze(p){c("ondata");var T=U.write(p);c("dest.write",T),T===!1&&((ue.pipesCount===1&&ue.pipes===U||ue.pipesCount>1&&me(ue.pipes,U)!==-1)&&!De&&(c("false write response, pause",ue.awaitDrain),ue.awaitDrain++),Z.pause())}function He(p){c("onerror",p),g(),U.removeListener("error",He),t(U,"error")===0&&P(U,p)}Y(U,"error",He);function We(){U.removeListener("finish",x),g()}U.once("close",We);function x(){c("onfinish"),U.removeListener("close",We),g()}U.once("finish",x);function g(){c("unpipe"),Z.unpipe(U)}return U.emit("pipe",Z),ue.flowing||(c("pipe resume"),Z.resume()),U};function $(U){return function(){var Z=U._readableState;c("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&t(U,"data")&&(Z.flowing=!0,z(U))}}K.prototype.unpipe=function(U){var I=this._readableState,Z={hasUnpiped:!1};if(I.pipesCount===0)return this;if(I.pipesCount===1)return U&&U!==I.pipes?this:(U||(U=I.pipes),I.pipes=null,I.pipesCount=0,I.flowing=!1,U&&U.emit("unpipe",this,Z),this);if(!U){var ue=I.pipes,Se=I.pipesCount;I.pipes=null,I.pipesCount=0,I.flowing=!1;for(var Ae=0;Ae<Se;Ae++)ue[Ae].emit("unpipe",this,{hasUnpiped:!1});return this}var de=me(I.pipes,U);return de===-1?this:(I.pipes.splice(de,1),I.pipesCount-=1,I.pipesCount===1&&(I.pipes=I.pipes[0]),U.emit("unpipe",this,Z),this)},K.prototype.on=function(U,I){var Z=n.prototype.on.call(this,U,I),ue=this._readableState;return U==="data"?(ue.readableListening=this.listenerCount("readable")>0,ue.flowing!==!1&&this.resume()):U==="readable"&&!ue.endEmitted&&!ue.readableListening&&(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,c("on readable",ue.length,ue.reading),ue.length?D(this):ue.reading||r.nextTick(G,this)),Z},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(U,I){var Z=n.prototype.removeListener.call(this,U,I);return U==="readable"&&r.nextTick(M,this),Z},K.prototype.removeAllListeners=function(U){var I=n.prototype.removeAllListeners.apply(this,arguments);return(U==="readable"||U===void 0)&&r.nextTick(M,this),I};function M(U){var I=U._readableState;I.readableListening=U.listenerCount("readable")>0,I.resumeScheduled&&!I.paused?I.flowing=!0:U.listenerCount("data")>0&&U.resume()}function G(U){c("readable nexttick read 0"),U.read(0)}K.prototype.resume=function(){var U=this._readableState;return U.flowing||(c("resume"),U.flowing=!U.readableListening,ne(this,U)),U.paused=!1,this};function ne(U,I){I.resumeScheduled||(I.resumeScheduled=!0,r.nextTick(se,U,I))}function se(U,I){c("resume",I.reading),I.reading||U.read(0),I.resumeScheduled=!1,U.emit("resume"),z(U),I.flowing&&!I.reading&&U.read(0)}K.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function z(U){var I=U._readableState;for(c("flow",I.flowing);I.flowing&&U.read()!==null;);}K.prototype.wrap=function(U){var I=this,Z=this._readableState,ue=!1;U.on("end",function(){if(c("wrapped end"),Z.decoder&&!Z.ended){var de=Z.decoder.end();de&&de.length&&I.push(de)}I.push(null)}),U.on("data",function(de){if(c("wrapped data"),Z.decoder&&(de=Z.decoder.write(de)),!(Z.objectMode&&de==null)&&!(!Z.objectMode&&(!de||!de.length))){var be=I.push(de);be||(ue=!0,U.pause())}});for(var Se in U)this[Se]===void 0&&typeof U[Se]=="function"&&(this[Se]=(function(be){return function(){return U[be].apply(U,arguments)}})(Se));for(var Ae=0;Ae<R.length;Ae++)U.on(R[Ae],this.emit.bind(this,R[Ae]));return this._read=function(de){c("wrapped _read",de),ue&&(ue=!1,U.resume())},this},typeof Symbol=="function"&&(K.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=J5()),S(this)}),Object.defineProperty(K.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(K.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(K.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(I){this._readableState&&(this._readableState.flowing=I)}}),K._fromList=N,Object.defineProperty(K.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function N(U,I){if(I.length===0)return null;var Z;return I.objectMode?Z=I.buffer.shift():!U||U>=I.length?(I.decoder?Z=I.buffer.join(""):I.buffer.length===1?Z=I.buffer.first():Z=I.buffer.concat(I.length),I.buffer.clear()):Z=I.buffer.consume(U,I.decoder),Z}function F(U){var I=U._readableState;c("endReadable",I.endEmitted),I.endEmitted||(I.ended=!0,r.nextTick(le,I,U))}function le(U,I){if(c("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&U.length===0&&(U.endEmitted=!0,I.readable=!1,I.emit("end"),U.autoDestroy)){var Z=I._writableState;(!Z||Z.autoDestroy&&Z.finished)&&I.destroy()}}typeof Symbol=="function"&&(K.from=function(U,I){return A===void 0&&(A=Q5()),A(K,U,I)});function me(U,I){for(var Z=0,ue=U.length;Z<ue;Z++)if(U[Z]===I)return Z;return-1}return bE}function OE(){if(LI)return wE;LI=!0,wE=a;var r=Jf().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,o=zu();Wu()(a,o);function s(f,h){var d=this._transformState;d.transforming=!1;var m=d.writecb;if(m===null)return this.emit("error",new t);d.writechunk=null,d.writecb=null,h!=null&&this.push(h),m(f);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);o.call(this,f),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",u)}function u(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,d){c(f,h,d)}):c(this,null,null)}a.prototype.push=function(f,h){return this._transformState.needTransform=!1,o.prototype.push.call(this,f,h)},a.prototype._transform=function(f,h,d){d(new e("_transform()"))},a.prototype._write=function(f,h,d){var m=this._transformState;if(m.writecb=d,m.writechunk=f,m.writeencoding=h,!m.transforming){var b=this._readableState;(m.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(f){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(f,h){o.prototype._destroy.call(this,f,function(d){h(d)})};function c(f,h,d){if(h)return f.emit("error",h);if(d!=null&&f.push(d),f._writableState.length)throw new i;if(f._transformState.transforming)throw new n;return f.push(null)}return wE}function YI(){if(PI)return vE;PI=!0,vE=e;var r=OE();Wu()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},vE}function XI(){if(MI)return _E;MI=!0;var r;function e(d){var m=!1;return function(){m||(m=!0,d.apply(void 0,arguments))}}var t=Jf().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function o(d){if(d)throw d}function s(d){return d.setHeader&&typeof d.abort=="function"}function a(d,m,b,v){v=e(v);var w=!1;d.on("close",function(){w=!0}),r===void 0&&(r=Q0()),r(d,{readable:m,writable:b},function(_){if(_)return v(_);w=!0,v()});var y=!1;return function(_){if(!w&&!y){if(y=!0,s(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();v(_||new i("pipe"))}}}function u(d){d()}function c(d,m){return d.pipe(m)}function f(d){return!d.length||typeof d[d.length-1]!="function"?o:d.pop()}function h(){for(var d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];var v=f(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new n("streams");var w,y=m.map(function(_,E){var S=E<m.length-1,A=E>0;return a(_,S,A,function(P){w||(w=P),P&&y.forEach(u),!S&&(y.forEach(u),v(w))})});return m.reduce(c)}return _E=h,_E}var BI,Cs,xi,aI,V0,Fu,lI,x5,Ko,EE,Kf,cI,M5,B5,K0,Z0,to,F5,SE,TE,yI,Fp,bI,Y0,wI,$u,vI,Zf,X0,_I,oE,EI,aE,AI,lE,xI,uE,SI,cE,TI,fE,CI,hE,dE,RI,Z5,pE,DI,gE,II,mE,OI,yE,NI,bE,kI,eU,wE,LI,vE,PI,_E,MI,eb=Jt(()=>{Oe();ke();Ne();Xf();cl();qf();for(BI={byteLength:function(r){var e=uI(r),t=e[0],n=e[1];return 3*(t+n)/4-n},toByteArray:function(r){var e,t,n=uI(r),i=n[0],o=n[1],s=new aI((function(c,f,h){return 3*(f+h)/4-h})(0,i,o)),a=0,u=o>0?i-4:i;for(t=0;t<u;t+=4)e=xi[r.charCodeAt(t)]<<18|xi[r.charCodeAt(t+1)]<<12|xi[r.charCodeAt(t+2)]<<6|xi[r.charCodeAt(t+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return o===2&&(e=xi[r.charCodeAt(t)]<<2|xi[r.charCodeAt(t+1)]>>4,s[a++]=255&e),o===1&&(e=xi[r.charCodeAt(t)]<<10|xi[r.charCodeAt(t+1)]<<4|xi[r.charCodeAt(t+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},fromByteArray:function(r){for(var e,t=r.length,n=t%3,i=[],o=0,s=t-n;o<s;o+=16383)i.push(A5(r,o,o+16383>s?s:o+16383));return n===1?(e=r[t-1],i.push(Cs[e>>2]+Cs[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Cs[e>>10]+Cs[e>>4&63]+Cs[e<<2&63]+"=")),i.join("")}},Cs=[],xi=[],aI=typeof Uint8Array<"u"?Uint8Array:Array,V0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fu=0,lI=V0.length;Fu<lI;++Fu)Cs[Fu]=V0[Fu],xi[V0.charCodeAt(Fu)]=Fu;xi[45]=62,xi[95]=63;x5={read:function(r,e,t,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=256*o+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),o-=c}return(m?-1:1)*s*Math.pow(2,o-n)},write:function(r,e,t,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=255&a,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=255&s,m+=b,s/=256,c-=8);r[t+m-b]|=128*v}},Ko={},EE=BI,Kf=x5,cI=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ko.Buffer=Xe,Ko.SlowBuffer=function(r){return+r!=r&&(r=0),Xe.alloc(+r)},Ko.INSPECT_MAX_BYTES=50;Ko.kMaxLength=2147483647,Xe.TYPED_ARRAY_SUPPORT=(function(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}})(),Xe.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Xe.prototype,"parent",{enumerable:!0,get:function(){if(Xe.isBuffer(this))return this.buffer}}),Object.defineProperty(Xe.prototype,"offset",{enumerable:!0,get:function(){if(Xe.isBuffer(this))return this.byteOffset}}),Xe.poolSize=8192,Xe.from=function(r,e,t){return FI(r,e,t)},Object.setPrototypeOf(Xe.prototype,Uint8Array.prototype),Object.setPrototypeOf(Xe,Uint8Array),Xe.alloc=function(r,e,t){return(function(n,i,o){return UI(n),n<=0?Yo(n):i!==void 0?typeof o=="string"?Yo(n).fill(i,o):Yo(n).fill(i):Yo(n)})(r,e,t)},Xe.allocUnsafe=function(r){return AE(r)},Xe.allocUnsafeSlow=function(r){return AE(r)},Xe.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==Xe.prototype},Xe.compare=function(r,e){if(Xo(r,Uint8Array)&&(r=Xe.from(r,r.offset,r.byteLength)),Xo(e,Uint8Array)&&(e=Xe.from(e,e.offset,e.byteLength)),!Xe.isBuffer(r)||!Xe.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0},Xe.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Xe.concat=function(r,e){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return Xe.alloc(0);var t;if(e===void 0)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var n=Xe.allocUnsafe(e),i=0;for(t=0;t<r.length;++t){var o=r[t];if(Xo(o,Uint8Array)&&(o=Xe.from(o)),!Xe.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Xe.byteLength=jI,Xe.prototype._isBuffer=!0,Xe.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)Uu(this,e,e+1);return this},Xe.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)Uu(this,e,e+3),Uu(this,e+1,e+2);return this},Xe.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)Uu(this,e,e+7),Uu(this,e+1,e+6),Uu(this,e+2,e+5),Uu(this,e+3,e+4);return this},Xe.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?zI(this,0,r):S5.apply(this,arguments)},Xe.prototype.toLocaleString=Xe.prototype.toString,Xe.prototype.equals=function(r){if(!Xe.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||Xe.compare(this,r)===0},Xe.prototype.inspect=function(){var r="",e=Ko.INSPECT_MAX_BYTES;return r=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(r+=" ... "),"<Buffer "+r+">"},cI&&(Xe.prototype[cI]=Xe.prototype.inspect),Xe.prototype.compare=function(r,e,t,n,i){if(Xo(r,Uint8Array)&&(r=Xe.from(r,r.offset,r.byteLength)),!Xe.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(e===void 0&&(e=0),t===void 0&&(t=r?r.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),e<0||t>r.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=t)return 0;if(n>=i)return-1;if(e>=t)return 1;if(this===r)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(t>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=r.slice(e,t),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},Xe.prototype.includes=function(r,e,t){return this.indexOf(r,e,t)!==-1},Xe.prototype.indexOf=function(r,e,t){return hI(this,r,e,t,!0)},Xe.prototype.lastIndexOf=function(r,e,t){return hI(this,r,e,t,!1)},Xe.prototype.write=function(r,e,t,n){if(e===void 0)n="utf8",t=this.length,e=0;else if(t===void 0&&typeof e=="string")n=e,t=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(t)?(t>>>=0,n===void 0&&(n="utf8")):(n=t,t=void 0)}var i=this.length-e;if((t===void 0||t>i)&&(t=i),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return T5(this,r,e,t);case"utf8":case"utf-8":return C5(this,r,e,t);case"ascii":return $I(this,r,e,t);case"latin1":case"binary":return R5(this,r,e,t);case"base64":return D5(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I5(this,r,e,t);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Xe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Xe.prototype.slice=function(r,e){var t=this.length;(r=~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),(e=e===void 0?t:~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),e<r&&(e=r);var n=this.subarray(r,e);return Object.setPrototypeOf(n,Xe.prototype),n},Xe.prototype.readUIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n},Xe.prototype.readUIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r+--e],i=1;e>0&&(i*=256);)n+=this[r+--e]*i;return n},Xe.prototype.readUInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),this[r]},Xe.prototype.readUInt16LE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]|this[r+1]<<8},Xe.prototype.readUInt16BE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]<<8|this[r+1]},Xe.prototype.readUInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},Xe.prototype.readUInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},Xe.prototype.readIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},Xe.prototype.readIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=e,i=1,o=this[r+--n];n>0&&(i*=256);)o+=this[r+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},Xe.prototype.readInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},Xe.prototype.readInt16LE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r]|this[r+1]<<8;return 32768&t?4294901760|t:t},Xe.prototype.readInt16BE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r+1]|this[r]<<8;return 32768&t?4294901760|t:t},Xe.prototype.readInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},Xe.prototype.readInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},Xe.prototype.readFloatLE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!0,23,4)},Xe.prototype.readFloatBE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!1,23,4)},Xe.prototype.readDoubleLE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!0,52,8)},Xe.prototype.readDoubleBE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!1,52,8)},Xe.prototype.writeUIntLE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=1,o=0;for(this[e]=255&r;++o<t&&(i*=256);)this[e+o]=r/i&255;return e+t},Xe.prototype.writeUIntBE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=t-1,o=1;for(this[e+i]=255&r;--i>=0&&(o*=256);)this[e+i]=r/o&255;return e+t},Xe.prototype.writeUInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,255,0),this[e]=255&r,e+1},Xe.prototype.writeUInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=255&r,this[e+1]=r>>>8,e+2},Xe.prototype.writeUInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=r>>>8,this[e+1]=255&r,e+2},Xe.prototype.writeUInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r,e+4},Xe.prototype.writeUInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Xe.prototype.writeIntLE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&r;++o<t&&(s*=256);)r<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Xe.prototype.writeIntBE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=t-1,s=1,a=0;for(this[e+o]=255&r;--o>=0&&(s*=256);)r<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Xe.prototype.writeInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,127,-128),r<0&&(r=255+r+1),this[e]=255&r,e+1},Xe.prototype.writeInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=255&r,this[e+1]=r>>>8,e+2},Xe.prototype.writeInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=r>>>8,this[e+1]=255&r,e+2},Xe.prototype.writeInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24,e+4},Xe.prototype.writeInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Xe.prototype.writeFloatLE=function(r,e,t){return pI(this,r,e,!0,t)},Xe.prototype.writeFloatBE=function(r,e,t){return pI(this,r,e,!1,t)},Xe.prototype.writeDoubleLE=function(r,e,t){return gI(this,r,e,!0,t)},Xe.prototype.writeDoubleBE=function(r,e,t){return gI(this,r,e,!1,t)},Xe.prototype.copy=function(r,e,t,n){if(!Xe.isBuffer(r))throw new TypeError("argument should be a Buffer");if(t||(t=0),n||n===0||(n=this.length),e>=r.length&&(e=r.length),e||(e=0),n>0&&n<t&&(n=t),n===t||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),r.length-e<n-t&&(n=r.length-e+t);var i=n-t;if(this===r&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,t,n);else if(this===r&&t<e&&e<n)for(var o=i-1;o>=0;--o)r[o+e]=this[o+t];else Uint8Array.prototype.set.call(r,this.subarray(t,n),e);return i},Xe.prototype.fill=function(r,e,t,n){if(typeof r=="string"){if(typeof e=="string"?(n=e,e=0,t=this.length):typeof t=="string"&&(n=t,t=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Xe.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(r.length===1){var i=r.charCodeAt(0);(n==="utf8"&&i<128||n==="latin1")&&(r=i)}}else typeof r=="number"?r&=255:typeof r=="boolean"&&(r=Number(r));if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;var o;if(e>>>=0,t=t===void 0?this.length:t>>>0,r||(r=0),typeof r=="number")for(o=e;o<t;++o)this[o]=r;else{var s=Xe.isBuffer(r)?r:Xe.from(r,n),a=s.length;if(a===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<t-e;++o)this[o+e]=s[o%a]}return this};M5=/[^+/0-9A-Za-z-_]/g;B5=(function(){for(var r=new Array(256),e=0;e<16;++e)for(var t=16*e,n=0;n<16;++n)r[t+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return r})();Ko.Buffer;Ko.INSPECT_MAX_BYTES;Ko.kMaxLength;K0={},Z0=Ko,to=Z0.Buffer;to.from&&to.alloc&&to.allocUnsafe&&to.allocUnsafeSlow?K0=Z0:(mI(Z0,K0),K0.Buffer=ju),ju.prototype=Object.create(to.prototype),mI(to,ju),ju.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return to(r,e,t)},ju.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=to(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n},ju.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return to(r)},ju.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Z0.SlowBuffer(r)};F5=K0,SE={},TE=F5.Buffer,yI=TE.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};SE.StringDecoder=Bp,Bp.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if((e=this.fillLast(r))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""},Bp.prototype.end=function(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e},Bp.prototype.text=function(r,e){var t=(function(i,o,s){var a=o.length-1;if(a<s)return 0;var u=sE(o[a]);return u>=0?(u>0&&(i.lastNeed=u-1),u):--a<s||u===-2?0:(u=sE(o[a]))>=0?(u>0&&(i.lastNeed=u-2),u):--a<s||u===-2?0:(u=sE(o[a]))>=0?(u>0&&(u===2?u=0:i.lastNeed=u-3),u):0})(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)},Bp.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};Fp={},bI=!1;Y0={},wI=!1;$u={},vI=!1;Zf=Y5();Zf.Buffer;Zf.INSPECT_MAX_BYTES;Zf.kMaxLength;X0={},_I=!1;oE={},EI=!1;aE={},AI=!1;lE={},xI=!1;uE={},SI=!1;cE={},TI=!1;fE={},CI=!1,hE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;dE={},RI=!1,Z5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pE={},DI=!1;gE={},II=!1;mE={},OI=!1;yE={},NI=!1;bE={},kI=!1,eU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;wE={},LI=!1;vE={},PI=!1;_E={},MI=!1});function tU(){if(KI)return NE;KI=!0,NE=t;var r=nn.EventEmitter,e=Wu();e(t,r),t.Readable=IE(),t.Writable=DE(),t.Duplex=zu(),t.Transform=OE(),t.PassThrough=YI(),t.finished=Q0(),t.pipeline=XI(),t.Stream=t;function t(){r.call(this||kE)}return t.prototype.pipe=function(n,i){var o=this||kE;function s(m){n.writable&&n.write(m)===!1&&o.pause&&o.pause()}o.on("data",s);function a(){o.readable&&o.resume&&o.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(o.on("end",c),o.on("close",f));var u=!1;function c(){u||(u=!0,n.end())}function f(){u||(u=!0,typeof n.destroy=="function"&&n.destroy())}function h(m){if(d(),r.listenerCount(this||kE,"error")===0)throw m}o.on("error",h),n.on("error",h);function d(){o.removeListener("data",s),n.removeListener("drain",a),o.removeListener("end",c),o.removeListener("close",f),o.removeListener("error",h),n.removeListener("error",h),o.removeListener("end",d),o.removeListener("close",d),n.removeListener("close",d)}return o.on("end",d),o.on("close",d),n.on("close",d),n.emit("pipe",o),n},NE}var NE,KI,kE,ii,ZI,LE=Jt(()=>{Oe();ke();Ne();G0();eb();Xf();W0();cl();qf();NE={},KI=!1,kE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ii=tU(),ZI=ii.Readable;ZI.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new ZI(e).wrap(r)};ii.Writable;ii.Duplex;ii.Transform;ii.PassThrough;ii.finished;ii.pipeline;ii.Stream;W_(ii.finished),W_(ii.pipeline)});function rU(){if(JI)return PE;JI=!0;let r=2147483647,e=36,t=1,n=26,i=38,o=700,s=72,a=128,u="-",c=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=e-t,b=Math.floor,v=String.fromCharCode;function w(q){throw new RangeError(d[q])}function y(q,fe){let Ee=[],ve=q.length;for(;ve--;)Ee[ve]=fe(q[ve]);return Ee}function _(q,fe){let Ee=q.split("@"),ve="";Ee.length>1&&(ve=Ee[0]+"@",q=Ee[1]),q=q.replace(h,".");let H=q.split("."),D=y(H,fe).join(".");return ve+D}function E(q){let fe=[],Ee=0,ve=q.length;for(;Ee<ve;){let H=q.charCodeAt(Ee++);if(H>=55296&&H<=56319&&Ee<ve){let D=q.charCodeAt(Ee++);(D&64512)==56320?fe.push(((H&1023)<<10)+(D&1023)+65536):(fe.push(H),Ee--)}else fe.push(H)}return fe}let S=q=>String.fromCodePoint(...q),A=function(q){return q>=48&&q<58?26+(q-48):q>=65&&q<91?q-65:q>=97&&q<123?q-97:e},P=function(q,fe){return q+22+75*(q<26)-((fe!=0)<<5)},R=function(q,fe,Ee){let ve=0;for(q=Ee?b(q/o):q>>1,q+=b(q/fe);q>m*n>>1;ve+=e)q=b(q/m);return b(ve+(m+1)*q/(q+i))},Y=function(q){let fe=[],Ee=q.length,ve=0,H=a,D=s,ee=q.lastIndexOf(u);ee<0&&(ee=0);for(let B=0;B<ee;++B)q.charCodeAt(B)>=128&&w("not-basic"),fe.push(q.charCodeAt(B));for(let B=ee>0?ee+1:0;B<Ee;){let L=ve;for(let M=1,G=e;;G+=e){B>=Ee&&w("invalid-input");let ne=A(q.charCodeAt(B++));ne>=e&&w("invalid-input"),ne>b((r-ve)/M)&&w("overflow"),ve+=ne*M;let se=G<=D?t:G>=D+n?n:G-D;if(ne<se)break;let z=e-se;M>b(r/z)&&w("overflow"),M*=z}let $=fe.length+1;D=R(ve-L,$,L==0),b(ve/$)>r-H&&w("overflow"),H+=b(ve/$),ve%=$,fe.splice(ve++,0,H)}return String.fromCodePoint(...fe)},te=function(q){let fe=[];q=E(q);let Ee=q.length,ve=a,H=0,D=s;for(let L of q)L<128&&fe.push(v(L));let ee=fe.length,B=ee;for(ee&&fe.push(u);B<Ee;){let L=r;for(let M of q)M>=ve&&M<L&&(L=M);let $=B+1;L-ve>b((r-H)/$)&&w("overflow"),H+=(L-ve)*$,ve=L;for(let M of q)if(M<ve&&++H>r&&w("overflow"),M===ve){let G=H;for(let ne=e;;ne+=e){let se=ne<=D?t:ne>=D+n?n:ne-D;if(G<se)break;let z=G-se,N=e-se;fe.push(v(P(se+z%N,0))),G=b(z/N)}fe.push(v(P(G,0))),D=R(H,$,B===ee),H=0,++B}++H,++ve}return fe.join("")};return PE={version:"2.3.1",ucs2:{decode:E,encode:S},decode:Y,encode:te,toASCII:function(q){return _(q,function(fe){return f.test(fe)?"xn--"+te(fe):fe})},toUnicode:function(q){return _(q,function(fe){return c.test(fe)?Y(fe.slice(4).toLowerCase()):fe})}},PE}var PE,JI,dl,eX,tX,rX,nX,iX,sX,ME=Jt(()=>{Oe();ke();Ne();PE={},JI=!1;dl=rU(),eX=dl.decode,tX=dl.encode,rX=dl.toASCII,nX=dl.toUnicode,iX=dl.ucs2,sX=dl.version});function n2(){return QI||(QI=!0,BE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),BE}function nU(){return eO||(eO=!0,FE=Error),FE}function iU(){return tO||(tO=!0,UE=EvalError),UE}function sU(){return rO||(rO=!0,jE=RangeError),jE}function oU(){return nO||(nO=!0,$E=ReferenceError),$E}function vO(){return iO||(iO=!0,zE=SyntaxError),zE}function Qf(){return sO||(sO=!0,WE=TypeError),WE}function aU(){return oO||(oO=!0,qE=URIError),qE}function lU(){if(aO)return HE;aO=!0;var r=typeof Symbol<"u"&&Symbol,e=n2();return HE=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},HE}function uU(){if(lO)return GE;lO=!0;var r={__proto__:null,foo:{}},e=Object;return GE=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},GE}function cU(){if(uO)return VE;uO=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(u,c){for(var f=[],h=0;h<u.length;h+=1)f[h]=u[h];for(var d=0;d<c.length;d+=1)f[d+u.length]=c[d];return f},o=function(u,c){for(var f=[],h=c,d=0;h<u.length;h+=1,d+=1)f[d]=u[h];return f},s=function(a,u){for(var c="",f=0;f<a.length;f+=1)c+=a[f],f+1<a.length&&(c+=u);return c};return VE=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var f=o(arguments,1),h,d=function(){if(this instanceof h){var y=c.apply(this,i(f,arguments));return Object(y)===y?y:this}return c.apply(u,i(f,arguments))},m=t(0,c.length-f.length),b=[],v=0;v<m;v++)b[v]="$"+v;if(h=Function("binder","return function ("+s(b,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var w=function(){};w.prototype=c.prototype,h.prototype=new w,w.prototype=null}return h},VE}function i2(){if(cO)return YE;cO=!0;var r=cU();return YE=Function.prototype.bind||r,YE}function fU(){if(fO)return XE;fO=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=i2();return XE=t.call(r,e),XE}function qu(){if(hO)return KE;hO=!0;var r,e=nU(),t=iU(),n=sU(),i=oU(),o=vO(),s=Qf(),a=aU(),u=Function,c=function(H){try{return u('"use strict"; return ('+H+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new s},d=f?(function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}})():h,m=lU()(),b=uU()(),v=Object.getPrototypeOf||(b?function(H){return H.__proto__}:null),w={},y=typeof Uint8Array>"u"||!v?r:v(Uint8Array),_={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!v?r:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!v?r:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(v)try{null.error}catch(H){var E=v(v(H));_["%Error.prototype%"]=E}var S=function H(D){var ee;if(D==="%AsyncFunction%")ee=c("async function () {}");else if(D==="%GeneratorFunction%")ee=c("function* () {}");else if(D==="%AsyncGeneratorFunction%")ee=c("async function* () {}");else if(D==="%AsyncGenerator%"){var B=H("%AsyncGeneratorFunction%");B&&(ee=B.prototype)}else if(D==="%AsyncIteratorPrototype%"){var L=H("%AsyncGenerator%");L&&v&&(ee=v(L.prototype))}return _[D]=ee,ee},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},P=i2(),R=fU(),Y=P.call(Function.call,Array.prototype.concat),te=P.call(Function.apply,Array.prototype.splice),K=P.call(Function.call,String.prototype.replace),ie=P.call(Function.call,String.prototype.slice),j=P.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,fe=/\\(\\)?/g,Ee=function(D){var ee=ie(D,0,1),B=ie(D,-1);if(ee==="%"&&B!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(B==="%"&&ee!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var L=[];return K(D,q,function($,M,G,ne){L[L.length]=G?K(ne,fe,"$1"):M||$}),L},ve=function(D,ee){var B=D,L;if(R(A,B)&&(L=A[B],B="%"+L[0]+"%"),R(_,B)){var $=_[B];if($===w&&($=S(B)),typeof $>"u"&&!ee)throw new s("intrinsic "+D+" exists, but is not available. Please file an issue!");return{alias:L,name:B,value:$}}throw new o("intrinsic "+D+" does not exist!")};return KE=function(D,ee){if(typeof D!="string"||D.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ee!="boolean")throw new s('"allowMissing" argument must be a boolean');if(j(/^%?[^%]*%?$/,D)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var B=Ee(D),L=B.length>0?B[0]:"",$=ve("%"+L+"%",ee),M=$.name,G=$.value,ne=!1,se=$.alias;se&&(L=se[0],te(B,Y([0,1],se)));for(var z=1,N=!0;z<B.length;z+=1){var F=B[z],le=ie(F,0,1),me=ie(F,-1);if((le==='"'||le==="'"||le==="`"||me==='"'||me==="'"||me==="`")&&le!==me)throw new o("property names with quotes must have matching quotes");if((F==="constructor"||!N)&&(ne=!0),L+="."+F,M="%"+L+"%",R(_,M))G=_[M];else if(G!=null){if(!(F in G)){if(!ee)throw new s("base intrinsic for "+D+" exists, but the property is not available.");return}if(f&&z+1>=B.length){var U=f(G,F);N=!!U,N&&"get"in U&&!("originalValue"in U.get)?G=U.get:G=G[F]}else N=R(G,F),G=G[F];N&&!ne&&(_[M]=G)}}return G},KE}function s2(){if(dO)return ZE;dO=!0;var r=qu(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return ZE=e,ZE}function tb(){if(pO)return JE;pO=!0;var r=qu(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return JE=e,JE}function hU(){if(gO)return QE;gO=!0;var r=s2(),e=vO(),t=Qf(),n=tb();return QE=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,d=!!n&&n(o,s);if(r)r(o,s,{configurable:f===null&&d?d.configurable:!f,enumerable:u===null&&d?d.enumerable:!u,value:a,writable:c===null&&d?d.writable:!c});else if(h||!u&&!c&&!f)o[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},QE}function dU(){if(mO)return e2;mO=!0;var r=s2(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},e2=e,e2}function pU(){if(yO)return t2;yO=!0;var r=qu(),e=hU(),t=dU()(),n=tb(),i=Qf(),o=r("%Math.floor%");return t2=function(a,u){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||o(u)!==u)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(h=!1)}return(f||h||!c)&&(t?e(a,"length",u,!0,!0):e(a,"length",u)),a},t2}function o2(){if(bO)return Up;bO=!0;var r=i2(),e=qu(),t=pU(),n=Qf(),i=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||r.call(o,i),a=s2(),u=e("%Math.max%");Up=function(h){if(typeof h!="function")throw new n("a function is required");var d=s(r,o,arguments);return t(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return s(r,i,arguments)};return a?a(Up,"apply",{value:c}):Up.apply=c,Up}function jp(){if(wO)return r2;wO=!0;var r=qu(),e=o2(),t=e(r("String.prototype.indexOf"));return r2=function(i,o){var s=r(i,!!o);return typeof s=="function"&&t(i,".prototype.")>-1?e(s):s},r2}var BE,QI,FE,eO,UE,tO,jE,rO,$E,nO,zE,iO,WE,sO,qE,oO,HE,aO,GE,lO,VE,uO,YE,cO,XE,fO,KE,hO,ZE,dO,JE,pO,QE,gO,e2,mO,t2,yO,Up,bO,r2,wO,$p=Jt(()=>{Oe();ke();Ne();BE={},QI=!1;FE={},eO=!1;UE={},tO=!1;jE={},rO=!1;$E={},nO=!1;zE={},iO=!1;WE={},sO=!1;qE={},oO=!1;HE={},aO=!1;GE={},lO=!1;VE={},uO=!1;YE={},cO=!1;XE={},fO=!1;KE={},hO=!1;ZE={},dO=!1;JE={},pO=!1;QE={},gO=!1;e2={},mO=!1;t2={},yO=!1;Up={},bO=!1;r2={},wO=!1});function gU(){if(_O)return a2;_O=!0;var r=zr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,a2=i,a2}var a2,_O,l2,u2=Jt(()=>{Oe();ke();Ne();Bu();a2={},_O=!1;l2=gU()});function yU(){if(EO)return c2;EO=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&o&&typeof o.get=="function"?o.get:null,a=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,v=Object.prototype.toString,w=Function.prototype.toString,y=String.prototype.match,_=String.prototype.slice,E=String.prototype.replace,S=String.prototype.toUpperCase,A=String.prototype.toLowerCase,P=RegExp.prototype.test,R=Array.prototype.concat,Y=Array.prototype.join,te=Array.prototype.slice,K=Math.floor,ie=typeof BigInt=="function"?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,fe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ee=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fe||!0)?Symbol.toStringTag:null,ve=Object.prototype.propertyIsEnumerable,H=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ce){return ce.__proto__}:null);function D(ce,xe){if(ce===1/0||ce===-1/0||ce!==ce||ce&&ce>-1e3&&ce<1e3||P.call(/e/,xe))return xe;var _e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ce=="number"){var Re=ce<0?-K(-ce):K(ce);if(Re!==ce){var Q=String(Re),Be=_.call(xe,Q.length+1);return E.call(Q,_e,"$&_")+"."+E.call(E.call(Be,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(xe,_e,"$&_")}var ee=mU,B=ee.custom,L=me(B)?B:null;c2=function ce(xe,_e,Re,Q){var Be=_e||{};if(Z(Be,"quoteStyle")&&Be.quoteStyle!=="single"&&Be.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Z(Be,"maxStringLength")&&(typeof Be.maxStringLength=="number"?Be.maxStringLength<0&&Be.maxStringLength!==1/0:Be.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var tt=Z(Be,"customInspect")?Be.customInspect:!0;if(typeof tt!="boolean"&&tt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Z(Be,"indent")&&Be.indent!==null&&Be.indent!=="	"&&!(parseInt(Be.indent,10)===Be.indent&&Be.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Z(Be,"numericSeparator")&&typeof Be.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var O=Be.numericSeparator;if(typeof xe>"u")return"undefined";if(xe===null)return"null";if(typeof xe=="boolean")return xe?"true":"false";if(typeof xe=="string")return He(xe,Be);if(typeof xe=="number"){if(xe===0)return 1/0/xe>0?"0":"-0";var Me=String(xe);return O?D(xe,Me):Me}if(typeof xe=="bigint"){var $e=String(xe)+"n";return O?D(xe,$e):$e}var ge=typeof Be.depth>"u"?5:Be.depth;if(typeof Re>"u"&&(Re=0),Re>=ge&&ge>0&&typeof xe=="object")return G(xe)?"[Array]":"[Object]";var Ie=J(Be,Re);if(typeof Q>"u")Q=[];else if(Ae(Q,xe)>=0)return"[Circular]";function Fe(Yt,Zr,Jr){if(Zr&&(Q=te.call(Q),Q.push(Zr)),Jr){var Qr={depth:Be.depth};return Z(Be,"quoteStyle")&&(Qr.quoteStyle=Be.quoteStyle),ce(Yt,Qr,Re+1,Q)}return ce(Yt,Be,Re+1,Q)}if(typeof xe=="function"&&!se(xe)){var ut=Se(xe),he=oe(xe,Fe);return"[Function"+(ut?": "+ut:" (anonymous)")+"]"+(he.length>0?" { "+Y.call(he,", ")+" }":"")}if(me(xe)){var ye=fe?E.call(String(xe),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(xe);return typeof xe=="object"&&!fe?x(ye):ye}if(ze(xe)){for(var Ge="<"+A.call(String(xe.nodeName)),je=xe.attributes||[],Qe=0;Qe<je.length;Qe++)Ge+=" "+je[Qe].name+"="+$(M(je[Qe].value),"double",Be);return Ge+=">",xe.childNodes&&xe.childNodes.length&&(Ge+="..."),Ge+="</"+A.call(String(xe.nodeName))+">",Ge}if(G(xe)){if(xe.length===0)return"[]";var dt=oe(xe,Fe);return Ie&&!T(dt)?"["+C(dt,Ie)+"]":"[ "+Y.call(dt,", ")+" ]"}if(z(xe)){var Rt=oe(xe,Fe);return!("cause"in Error.prototype)&&"cause"in xe&&!ve.call(xe,"cause")?"{ ["+String(xe)+"] "+Y.call(R.call("[cause]: "+Fe(xe.cause),Rt),", ")+" }":Rt.length===0?"["+String(xe)+"]":"{ ["+String(xe)+"] "+Y.call(Rt,", ")+" }"}if(typeof xe=="object"&&tt){if(L&&typeof xe[L]=="function"&&ee)return ee(xe,{depth:ge-Re});if(tt!=="symbol"&&typeof xe.inspect=="function")return xe.inspect()}if(de(xe)){var Et=[];return n&&n.call(xe,function(Yt,Zr){Et.push(Fe(Zr,xe,!0)+" => "+Fe(Yt,xe))}),p("Map",t.call(xe),Et,Ie)}if(De(xe)){var ar=[];return a&&a.call(xe,function(Yt){ar.push(Fe(Yt,xe))}),p("Set",s.call(xe),ar,Ie)}if(be(xe))return g("WeakMap");if(Te(xe))return g("WeakSet");if(Le(xe))return g("WeakRef");if(F(xe))return x(Fe(Number(xe)));if(U(xe))return x(Fe(ie.call(xe)));if(le(xe))return x(b.call(xe));if(N(xe))return x(Fe(String(xe)));if(typeof window<"u"&&xe===window)return"{ [object Window] }";if(typeof globalThis<"u"&&xe===globalThis||typeof f2<"u"&&xe===f2)return"{ [object globalThis] }";if(!ne(xe)&&!se(xe)){var _i=oe(xe,Fe),qn=H?H(xe)===Object.prototype:xe instanceof Object||xe.constructor===Object,Ht=xe instanceof Object?"":"null prototype",Dr=!qn&&Ee&&Object(xe)===xe&&Ee in xe?_.call(ue(xe),8,-1):Ht?"Object":"",yr=qn||typeof xe.constructor!="function"?"":xe.constructor.name?xe.constructor.name+" ":"",Wt=yr+(Dr||Ht?"["+Y.call(R.call([],Dr||[],Ht||[]),": ")+"] ":"");return _i.length===0?Wt+"{}":Ie?Wt+"{"+C(_i,Ie)+"}":Wt+"{ "+Y.call(_i,", ")+" }"}return String(xe)};function $(ce,xe,_e){var Re=(_e.quoteStyle||xe)==="double"?'"':"'";return Re+ce+Re}function M(ce){return E.call(String(ce),/"/g,"&quot;")}function G(ce){return ue(ce)==="[object Array]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function ne(ce){return ue(ce)==="[object Date]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function se(ce){return ue(ce)==="[object RegExp]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function z(ce){return ue(ce)==="[object Error]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function N(ce){return ue(ce)==="[object String]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function F(ce){return ue(ce)==="[object Number]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function le(ce){return ue(ce)==="[object Boolean]"&&(!Ee||!(typeof ce=="object"&&Ee in ce))}function me(ce){if(fe)return ce&&typeof ce=="object"&&ce instanceof Symbol;if(typeof ce=="symbol")return!0;if(!ce||typeof ce!="object"||!q)return!1;try{return q.call(ce),!0}catch{}return!1}function U(ce){if(!ce||typeof ce!="object"||!ie)return!1;try{return ie.call(ce),!0}catch{}return!1}var I=Object.prototype.hasOwnProperty||function(ce){return ce in(this||f2)};function Z(ce,xe){return I.call(ce,xe)}function ue(ce){return v.call(ce)}function Se(ce){if(ce.name)return ce.name;var xe=y.call(w.call(ce),/^function\s*([\w$]+)/);return xe?xe[1]:null}function Ae(ce,xe){if(ce.indexOf)return ce.indexOf(xe);for(var _e=0,Re=ce.length;_e<Re;_e++)if(ce[_e]===xe)return _e;return-1}function de(ce){if(!t||!ce||typeof ce!="object")return!1;try{t.call(ce);try{s.call(ce)}catch{return!0}return ce instanceof Map}catch{}return!1}function be(ce){if(!c||!ce||typeof ce!="object")return!1;try{c.call(ce,c);try{h.call(ce,h)}catch{return!0}return ce instanceof WeakMap}catch{}return!1}function Le(ce){if(!m||!ce||typeof ce!="object")return!1;try{return m.call(ce),!0}catch{}return!1}function De(ce){if(!s||!ce||typeof ce!="object")return!1;try{s.call(ce);try{t.call(ce)}catch{return!0}return ce instanceof Set}catch{}return!1}function Te(ce){if(!h||!ce||typeof ce!="object")return!1;try{h.call(ce,h);try{c.call(ce,c)}catch{return!0}return ce instanceof WeakSet}catch{}return!1}function ze(ce){return!ce||typeof ce!="object"?!1:typeof HTMLElement<"u"&&ce instanceof HTMLElement?!0:typeof ce.nodeName=="string"&&typeof ce.getAttribute=="function"}function He(ce,xe){if(ce.length>xe.maxStringLength){var _e=ce.length-xe.maxStringLength,Re="... "+_e+" more character"+(_e>1?"s":"");return He(_.call(ce,0,xe.maxStringLength),xe)+Re}var Q=E.call(E.call(ce,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,We);return $(Q,"single",xe)}function We(ce){var xe=ce.charCodeAt(0),_e={8:"b",9:"t",10:"n",12:"f",13:"r"}[xe];return _e?"\\"+_e:"\\x"+(xe<16?"0":"")+S.call(xe.toString(16))}function x(ce){return"Object("+ce+")"}function g(ce){return ce+" { ? }"}function p(ce,xe,_e,Re){var Q=Re?C(_e,Re):Y.call(_e,", ");return ce+" ("+xe+") {"+Q+"}"}function T(ce){for(var xe=0;xe<ce.length;xe++)if(Ae(ce[xe],`
`)>=0)return!1;return!0}function J(ce,xe){var _e;if(ce.indent==="	")_e="	";else if(typeof ce.indent=="number"&&ce.indent>0)_e=Y.call(Array(ce.indent+1)," ");else return null;return{base:_e,prev:Y.call(Array(xe+1),_e)}}function C(ce,xe){if(ce.length===0)return"";var _e=`
`+xe.prev+xe.base;return _e+Y.call(ce,","+_e)+`
`+xe.prev}function oe(ce,xe){var _e=G(ce),Re=[];if(_e){Re.length=ce.length;for(var Q=0;Q<ce.length;Q++)Re[Q]=Z(ce,Q)?xe(ce[Q],ce):""}var Be=typeof j=="function"?j(ce):[],tt;if(fe){tt={};for(var O=0;O<Be.length;O++)tt["$"+Be[O]]=Be[O]}for(var Me in ce)Z(ce,Me)&&(_e&&String(Number(Me))===Me&&Me<ce.length||fe&&tt["$"+Me]instanceof Symbol||(P.call(/[^\w$]/,Me)?Re.push(xe(Me,ce)+": "+xe(ce[Me],ce)):Re.push(Me+": "+xe(ce[Me],ce))));if(typeof j=="function")for(var $e=0;$e<Be.length;$e++)ve.call(ce,Be[$e])&&Re.push("["+xe(Be[$e])+"]: "+xe(ce[Be[$e]],ce));return Re}return c2}function bU(){if(AO)return h2;AO=!0;var r=qu(),e=jp(),t=yU(),n=Qf(),i=r("%WeakMap%",!0),o=r("%Map%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),f=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),d=function(w,y){for(var _=w,E;(E=_.next)!==null;_=E)if(E.key===y)return _.next=E.next,E.next=w.next,w.next=E,E},m=function(w,y){var _=d(w,y);return _&&_.value},b=function(w,y,_){var E=d(w,y);E?E.value=_:w.next={key:y,next:w.next,value:_}},v=function(w,y){return!!d(w,y)};return h2=function(){var y,_,E,S={assert:function(A){if(!S.has(A))throw new n("Side channel does not contain "+t(A))},get:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return s(y,A)}else if(o){if(_)return c(_,A)}else if(E)return m(E,A)},has:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return u(y,A)}else if(o){if(_)return h(_,A)}else if(E)return v(E,A);return!1},set:function(A,P){i&&A&&(typeof A=="object"||typeof A=="function")?(y||(y=new i),a(y,A,P)):o?(_||(_=new o),f(_,A,P)):(E||(E={key:{},next:null}),b(E,A,P))}};return S},h2}function w2(){if(xO)return d2;xO=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return d2={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},d2}function IO(){if(SO)return p2;SO=!0;var r=w2(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var w=[],y=0;y<256;++y)w.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return w})(),i=function(y){for(;y.length>1;){var _=y.pop(),E=_.obj[_.prop];if(t(E)){for(var S=[],A=0;A<E.length;++A)typeof E[A]<"u"&&S.push(E[A]);_.obj[_.prop]=S}}},o=function(y,_){for(var E=_&&_.plainObjects?Object.create(null):{},S=0;S<y.length;++S)typeof y[S]<"u"&&(E[S]=y[S]);return E},s=function w(y,_,E){if(!_)return y;if(typeof _!="object"){if(t(y))y.push(_);else if(y&&typeof y=="object")(E&&(E.plainObjects||E.allowPrototypes)||!e.call(Object.prototype,_))&&(y[_]=!0);else return[y,_];return y}if(!y||typeof y!="object")return[y].concat(_);var S=y;return t(y)&&!t(_)&&(S=o(y,E)),t(y)&&t(_)?(_.forEach(function(A,P){if(e.call(y,P)){var R=y[P];R&&typeof R=="object"&&A&&typeof A=="object"?y[P]=w(R,A,E):y.push(A)}else y[P]=A}),y):Object.keys(_).reduce(function(A,P){var R=_[P];return e.call(A,P)?A[P]=w(A[P],R,E):A[P]=R,A},S)},a=function(y,_){return Object.keys(_).reduce(function(E,S){return E[S]=_[S],E},y)},u=function(w,y,_){var E=w.replace(/\+/g," ");if(_==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},c=1024,f=function(y,_,E,S,A){if(y.length===0)return y;var P=y;if(typeof y=="symbol"?P=Symbol.prototype.toString.call(y):typeof y!="string"&&(P=String(y)),E==="iso-8859-1")return escape(P).replace(/%u[0-9a-f]{4}/gi,function(q){return"%26%23"+parseInt(q.slice(2),16)+"%3B"});for(var R="",Y=0;Y<P.length;Y+=c){for(var te=P.length>=c?P.slice(Y,Y+c):P,K=[],ie=0;ie<te.length;++ie){var j=te.charCodeAt(ie);if(j===45||j===46||j===95||j===126||j>=48&&j<=57||j>=65&&j<=90||j>=97&&j<=122||A===r.RFC1738&&(j===40||j===41)){K[K.length]=te.charAt(ie);continue}if(j<128){K[K.length]=n[j];continue}if(j<2048){K[K.length]=n[192|j>>6]+n[128|j&63];continue}if(j<55296||j>=57344){K[K.length]=n[224|j>>12]+n[128|j>>6&63]+n[128|j&63];continue}ie+=1,j=65536+((j&1023)<<10|te.charCodeAt(ie)&1023),K[K.length]=n[240|j>>18]+n[128|j>>12&63]+n[128|j>>6&63]+n[128|j&63]}R+=K.join("")}return R},h=function(y){for(var _=[{obj:{o:y},prop:"o"}],E=[],S=0;S<_.length;++S)for(var A=_[S],P=A.obj[A.prop],R=Object.keys(P),Y=0;Y<R.length;++Y){var te=R[Y],K=P[te];typeof K=="object"&&K!==null&&E.indexOf(K)===-1&&(_.push({obj:P,prop:te}),E.push(K))}return i(_),y},d=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},m=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},b=function(y,_){return[].concat(y,_)},v=function(y,_){if(t(y)){for(var E=[],S=0;S<y.length;S+=1)E.push(_(y[S]));return E}return _(y)};return p2={arrayToObject:o,assign:a,combine:b,compact:h,decode:u,encode:f,isBuffer:m,isRegExp:d,maybeMap:v,merge:s},p2}function wU(){if(TO)return g2;TO=!0;var r=bU(),e=IO(),t=w2(),n=Object.prototype.hasOwnProperty,i={brackets:function(w){return w+"[]"},comma:"comma",indices:function(w,y){return w+"["+y+"]"},repeat:function(w){return w}},o=Array.isArray,s=Array.prototype.push,a=function(v,w){s.apply(v,o(w)?w:[w])},u=Date.prototype.toISOString,c=t.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(w){return u.call(w)},skipNulls:!1,strictNullHandling:!1},h=function(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w=="symbol"||typeof w=="bigint"},d={},m=function v(w,y,_,E,S,A,P,R,Y,te,K,ie,j,q,fe,Ee,ve,H){for(var D=w,ee=H,B=0,L=!1;(ee=ee.get(d))!==void 0&&!L;){var $=ee.get(w);if(B+=1,typeof $<"u"){if($===B)throw new RangeError("Cyclic object value");L=!0}typeof ee.get(d)>"u"&&(B=0)}if(typeof te=="function"?D=te(y,D):D instanceof Date?D=j(D):_==="comma"&&o(D)&&(D=e.maybeMap(D,function(ue){return ue instanceof Date?j(ue):ue})),D===null){if(A)return Y&&!Ee?Y(y,f.encoder,ve,"key",q):y;D=""}if(h(D)||e.isBuffer(D)){if(Y){var M=Ee?y:Y(y,f.encoder,ve,"key",q);return[fe(M)+"="+fe(Y(D,f.encoder,ve,"value",q))]}return[fe(y)+"="+fe(String(D))]}var G=[];if(typeof D>"u")return G;var ne;if(_==="comma"&&o(D))Ee&&Y&&(D=e.maybeMap(D,Y)),ne=[{value:D.length>0?D.join(",")||null:void 0}];else if(o(te))ne=te;else{var se=Object.keys(D);ne=K?se.sort(K):se}var z=R?y.replace(/\./g,"%2E"):y,N=E&&o(D)&&D.length===1?z+"[]":z;if(S&&o(D)&&D.length===0)return N+"[]";for(var F=0;F<ne.length;++F){var le=ne[F],me=typeof le=="object"&&typeof le.value<"u"?le.value:D[le];if(!(P&&me===null)){var U=ie&&R?le.replace(/\./g,"%2E"):le,I=o(D)?typeof _=="function"?_(N,U):N:N+(ie?"."+U:"["+U+"]");H.set(w,B);var Z=r();Z.set(d,H),a(G,v(me,I,_,E,S,A,P,R,_==="comma"&&Ee&&o(D)?null:Y,te,K,ie,j,q,fe,Ee,ve,Z))}}return G},b=function(w){if(!w)return f;if(typeof w.allowEmptyArrays<"u"&&typeof w.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof w.encodeDotInKeys<"u"&&typeof w.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(w.encoder!==null&&typeof w.encoder<"u"&&typeof w.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=w.charset||f.charset;if(typeof w.charset<"u"&&w.charset!=="utf-8"&&w.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _=t.default;if(typeof w.format<"u"){if(!n.call(t.formatters,w.format))throw new TypeError("Unknown format option provided.");_=w.format}var E=t.formatters[_],S=f.filter;(typeof w.filter=="function"||o(w.filter))&&(S=w.filter);var A;if(w.arrayFormat in i?A=w.arrayFormat:"indices"in w?A=w.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in w&&typeof w.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var P=typeof w.allowDots>"u"?w.encodeDotInKeys===!0?!0:f.allowDots:!!w.allowDots;return{addQueryPrefix:typeof w.addQueryPrefix=="boolean"?w.addQueryPrefix:f.addQueryPrefix,allowDots:P,allowEmptyArrays:typeof w.allowEmptyArrays=="boolean"?!!w.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:y,charsetSentinel:typeof w.charsetSentinel=="boolean"?w.charsetSentinel:f.charsetSentinel,commaRoundTrip:w.commaRoundTrip,delimiter:typeof w.delimiter>"u"?f.delimiter:w.delimiter,encode:typeof w.encode=="boolean"?w.encode:f.encode,encodeDotInKeys:typeof w.encodeDotInKeys=="boolean"?w.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof w.encoder=="function"?w.encoder:f.encoder,encodeValuesOnly:typeof w.encodeValuesOnly=="boolean"?w.encodeValuesOnly:f.encodeValuesOnly,filter:S,format:_,formatter:E,serializeDate:typeof w.serializeDate=="function"?w.serializeDate:f.serializeDate,skipNulls:typeof w.skipNulls=="boolean"?w.skipNulls:f.skipNulls,sort:typeof w.sort=="function"?w.sort:null,strictNullHandling:typeof w.strictNullHandling=="boolean"?w.strictNullHandling:f.strictNullHandling}};return g2=function(v,w){var y=v,_=b(w),E,S;typeof _.filter=="function"?(S=_.filter,y=S("",y)):o(_.filter)&&(S=_.filter,E=S);var A=[];if(typeof y!="object"||y===null)return"";var P=i[_.arrayFormat],R=P==="comma"&&_.commaRoundTrip;E||(E=Object.keys(y)),_.sort&&E.sort(_.sort);for(var Y=r(),te=0;te<E.length;++te){var K=E[te];_.skipNulls&&y[K]===null||a(A,m(y[K],K,P,R,_.allowEmptyArrays,_.strictNullHandling,_.skipNulls,_.encodeDotInKeys,_.encode?_.encoder:null,_.filter,_.sort,_.allowDots,_.serializeDate,_.format,_.formatter,_.encodeValuesOnly,_.charset,Y))}var ie=A.join(_.delimiter),j=_.addQueryPrefix===!0?"?":"";return _.charsetSentinel&&(_.charset==="iso-8859-1"?j+="utf8=%26%2310003%3B&":j+="utf8=%E2%9C%93&"),ie.length>0?j+ie:""},g2}function vU(){if(CO)return m2;CO=!0;var r=IO(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(d){return d.replace(/&#(\d+);/g,function(m,b){return String.fromCharCode(parseInt(b,10))})},o=function(d,m){return d&&typeof d=="string"&&m.comma&&d.indexOf(",")>-1?d.split(","):d},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",u=function(m,b){var v={__proto__:null},w=b.ignoreQueryPrefix?m.replace(/^\?/,""):m;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=b.parameterLimit===1/0?void 0:b.parameterLimit,_=w.split(b.delimiter,y),E=-1,S,A=b.charset;if(b.charsetSentinel)for(S=0;S<_.length;++S)_[S].indexOf("utf8=")===0&&(_[S]===a?A="utf-8":_[S]===s&&(A="iso-8859-1"),E=S,S=_.length);for(S=0;S<_.length;++S)if(S!==E){var P=_[S],R=P.indexOf("]="),Y=R===-1?P.indexOf("="):R+1,te,K;Y===-1?(te=b.decoder(P,n.decoder,A,"key"),K=b.strictNullHandling?null:""):(te=b.decoder(P.slice(0,Y),n.decoder,A,"key"),K=r.maybeMap(o(P.slice(Y+1),b),function(j){return b.decoder(j,n.decoder,A,"value")})),K&&b.interpretNumericEntities&&A==="iso-8859-1"&&(K=i(K)),P.indexOf("[]=")>-1&&(K=t(K)?[K]:K);var ie=e.call(v,te);ie&&b.duplicates==="combine"?v[te]=r.combine(v[te],K):(!ie||b.duplicates==="last")&&(v[te]=K)}return v},c=function(d,m,b,v){for(var w=v?m:o(m,b),y=d.length-1;y>=0;--y){var _,E=d[y];if(E==="[]"&&b.parseArrays)_=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{_=b.plainObjects?Object.create(null):{};var S=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,A=b.decodeDotInKeys?S.replace(/%2E/g,"."):S,P=parseInt(A,10);!b.parseArrays&&A===""?_={0:w}:!isNaN(P)&&E!==A&&String(P)===A&&P>=0&&b.parseArrays&&P<=b.arrayLimit?(_=[],_[P]=w):A!=="__proto__"&&(_[A]=w)}w=_}return w},f=function(m,b,v,w){if(m){var y=v.allowDots?m.replace(/\.([^.[]+)/g,"[$1]"):m,_=/(\[[^[\]]*])/,E=/(\[[^[\]]*])/g,S=v.depth>0&&_.exec(y),A=S?y.slice(0,S.index):y,P=[];if(A){if(!v.plainObjects&&e.call(Object.prototype,A)&&!v.allowPrototypes)return;P.push(A)}for(var R=0;v.depth>0&&(S=E.exec(y))!==null&&R<v.depth;){if(R+=1,!v.plainObjects&&e.call(Object.prototype,S[1].slice(1,-1))&&!v.allowPrototypes)return;P.push(S[1])}if(S){if(v.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");P.push("["+y.slice(S.index)+"]")}return c(P,b,v,w)}},h=function(m){if(!m)return n;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.decodeDotInKeys<"u"&&typeof m.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(m.decoder!==null&&typeof m.decoder<"u"&&typeof m.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=typeof m.charset>"u"?n.charset:m.charset,v=typeof m.duplicates>"u"?n.duplicates:m.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof m.allowDots>"u"?m.decodeDotInKeys===!0?!0:n.allowDots:!!m.allowDots;return{allowDots:w,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof m.allowPrototypes=="boolean"?m.allowPrototypes:n.allowPrototypes,allowSparse:typeof m.allowSparse=="boolean"?m.allowSparse:n.allowSparse,arrayLimit:typeof m.arrayLimit=="number"?m.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:n.charsetSentinel,comma:typeof m.comma=="boolean"?m.comma:n.comma,decodeDotInKeys:typeof m.decodeDotInKeys=="boolean"?m.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof m.decoder=="function"?m.decoder:n.decoder,delimiter:typeof m.delimiter=="string"||r.isRegExp(m.delimiter)?m.delimiter:n.delimiter,depth:typeof m.depth=="number"||m.depth===!1?+m.depth:n.depth,duplicates:v,ignoreQueryPrefix:m.ignoreQueryPrefix===!0,interpretNumericEntities:typeof m.interpretNumericEntities=="boolean"?m.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof m.parameterLimit=="number"?m.parameterLimit:n.parameterLimit,parseArrays:m.parseArrays!==!1,plainObjects:typeof m.plainObjects=="boolean"?m.plainObjects:n.plainObjects,strictDepth:typeof m.strictDepth=="boolean"?!!m.strictDepth:n.strictDepth,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:n.strictNullHandling}};return m2=function(d,m){var b=h(m);if(d===""||d===null||typeof d>"u")return b.plainObjects?Object.create(null):{};for(var v=typeof d=="string"?u(d,b):d,w=b.plainObjects?Object.create(null):{},y=Object.keys(v),_=0;_<y.length;++_){var E=y[_],S=f(E,v[E],b,typeof d=="string");w=r.merge(w,S,b)}return b.allowSparse===!0?w:r.compact(w)},m2}function _U(){if(RO)return y2;RO=!0;var r=wU(),e=vU(),t=w2();return y2={formats:t,parse:e,stringify:r},y2}function EU(){if(DO)return Hu;DO=!0;var r=dl;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),u=["%","/","?",";","#"].concat(a),c=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=_U();function y(A,P,R){if(A&&typeof A=="object"&&A instanceof e)return A;var Y=new e;return Y.parse(A,P,R),Y}e.prototype.parse=function(A,P,R){if(typeof A!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof A);var Y=A.indexOf("?"),te=Y!==-1&&Y<A.indexOf("#")?"?":"#",K=A.split(te),ie=/\\/g;K[0]=K[0].replace(ie,"/"),A=K.join(te);var j=A;if(j=j.trim(),!R&&A.split("#").length===1){var q=i.exec(j);if(q)return this.path=j,this.href=j,this.pathname=q[1],q[2]?(this.search=q[2],P?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):P&&(this.search="",this.query={}),this}var fe=t.exec(j);if(fe){fe=fe[0];var Ee=fe.toLowerCase();this.protocol=Ee,j=j.substr(fe.length)}if(R||fe||j.match(/^\/\/[^@/]+@[^@/]+/)){var ve=j.substr(0,2)==="//";ve&&!(fe&&b[fe])&&(j=j.substr(2),this.slashes=!0)}if(!b[fe]&&(ve||fe&&!v[fe])){for(var H=-1,D=0;D<c.length;D++){var ee=j.indexOf(c[D]);ee!==-1&&(H===-1||ee<H)&&(H=ee)}var B,L;H===-1?L=j.lastIndexOf("@"):L=j.lastIndexOf("@",H),L!==-1&&(B=j.slice(0,L),j=j.slice(L+1),this.auth=decodeURIComponent(B)),H=-1;for(var D=0;D<u.length;D++){var ee=j.indexOf(u[D]);ee!==-1&&(H===-1||ee<H)&&(H=ee)}H===-1&&(H=j.length),this.host=j.slice(0,H),j=j.slice(H),this.parseHost(),this.hostname=this.hostname||"";var $=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$)for(var M=this.hostname.split(/\./),D=0,G=M.length;D<G;D++){var ne=M[D];if(ne&&!ne.match(h)){for(var se="",z=0,N=ne.length;z<N;z++)ne.charCodeAt(z)>127?se+="x":se+=ne[z];if(!se.match(h)){var F=M.slice(0,D),le=M.slice(D+1),me=ne.match(d);me&&(F.push(me[1]),le.unshift(me[2])),le.length&&(j="/"+le.join(".")+j),this.hostname=F.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+U,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),j[0]!=="/"&&(j="/"+j))}if(!m[Ee])for(var D=0,G=a.length;D<G;D++){var Z=a[D];if(j.indexOf(Z)!==-1){var ue=encodeURIComponent(Z);ue===Z&&(ue=escape(Z)),j=j.split(Z).join(ue)}}var Se=j.indexOf("#");Se!==-1&&(this.hash=j.substr(Se),j=j.slice(0,Se));var Ae=j.indexOf("?");if(Ae!==-1?(this.search=j.substr(Ae),this.query=j.substr(Ae+1),P&&(this.query=w.parse(this.query)),j=j.slice(0,Ae)):P&&(this.search="",this.query={}),j&&(this.pathname=j),v[Ee]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",de=this.search||"";this.path=U+de}return this.href=this.format(),this};function _(A){return typeof A=="string"&&(A=y(A)),A instanceof e?A.format():e.prototype.format.call(A)}e.prototype.format=function(){var A=this.auth||"";A&&(A=encodeURIComponent(A),A=A.replace(/%3A/i,":"),A+="@");var P=this.protocol||"",R=this.pathname||"",Y=this.hash||"",te=!1,K="";this.host?te=A+this.host:this.hostname&&(te=A+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(te+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(K=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ie=this.search||K&&"?"+K||"";return P&&P.substr(-1)!==":"&&(P+=":"),this.slashes||(!P||v[P])&&te!==!1?(te="//"+(te||""),R&&R.charAt(0)!=="/"&&(R="/"+R)):te||(te=""),Y&&Y.charAt(0)!=="#"&&(Y="#"+Y),ie&&ie.charAt(0)!=="?"&&(ie="?"+ie),R=R.replace(/[?#]/g,function(j){return encodeURIComponent(j)}),ie=ie.replace("#","%23"),P+te+R+ie+Y};function E(A,P){return y(A,!1,!0).resolve(P)}e.prototype.resolve=function(A){return this.resolveObject(y(A,!1,!0)).format()};function S(A,P){return A?y(A,!1,!0).resolveObject(P):P}return e.prototype.resolveObject=function(A){if(typeof A=="string"){var P=new e;P.parse(A,!1,!0),A=P}for(var R=new e,Y=Object.keys(this),te=0;te<Y.length;te++){var K=Y[te];R[K]=this[K]}if(R.hash=A.hash,A.href==="")return R.href=R.format(),R;if(A.slashes&&!A.protocol){for(var ie=Object.keys(A),j=0;j<ie.length;j++){var q=ie[j];q!=="protocol"&&(R[q]=A[q])}return v[R.protocol]&&R.hostname&&!R.pathname&&(R.pathname="/",R.path=R.pathname),R.href=R.format(),R}if(A.protocol&&A.protocol!==R.protocol){if(!v[A.protocol]){for(var fe=Object.keys(A),Ee=0;Ee<fe.length;Ee++){var ve=fe[Ee];R[ve]=A[ve]}return R.href=R.format(),R}if(R.protocol=A.protocol,!A.host&&!b[A.protocol]){for(var G=(A.pathname||"").split("/");G.length&&!(A.host=G.shift()););A.host||(A.host=""),A.hostname||(A.hostname=""),G[0]!==""&&G.unshift(""),G.length<2&&G.unshift(""),R.pathname=G.join("/")}else R.pathname=A.pathname;if(R.search=A.search,R.query=A.query,R.host=A.host||"",R.auth=A.auth,R.hostname=A.hostname||A.host,R.port=A.port,R.pathname||R.search){var H=R.pathname||"",D=R.search||"";R.path=H+D}return R.slashes=R.slashes||A.slashes,R.href=R.format(),R}var ee=R.pathname&&R.pathname.charAt(0)==="/",B=A.host||A.pathname&&A.pathname.charAt(0)==="/",L=B||ee||R.host&&A.pathname,$=L,M=R.pathname&&R.pathname.split("/")||[],G=A.pathname&&A.pathname.split("/")||[],ne=R.protocol&&!v[R.protocol];if(ne&&(R.hostname="",R.port=null,R.host&&(M[0]===""?M[0]=R.host:M.unshift(R.host)),R.host="",A.protocol&&(A.hostname=null,A.port=null,A.host&&(G[0]===""?G[0]=A.host:G.unshift(A.host)),A.host=null),L=L&&(G[0]===""||M[0]==="")),B)R.host=A.host||A.host===""?A.host:R.host,R.hostname=A.hostname||A.hostname===""?A.hostname:R.hostname,R.search=A.search,R.query=A.query,M=G;else if(G.length)M||(M=[]),M.pop(),M=M.concat(G),R.search=A.search,R.query=A.query;else if(A.search!=null){if(ne){R.host=M.shift(),R.hostname=R.host;var se=R.host&&R.host.indexOf("@")>0?R.host.split("@"):!1;se&&(R.auth=se.shift(),R.hostname=se.shift(),R.host=R.hostname)}return R.search=A.search,R.query=A.query,(R.pathname!==null||R.search!==null)&&(R.path=(R.pathname?R.pathname:"")+(R.search?R.search:"")),R.href=R.format(),R}if(!M.length)return R.pathname=null,R.search?R.path="/"+R.search:R.path=null,R.href=R.format(),R;for(var z=M.slice(-1)[0],N=(R.host||A.host||M.length>1)&&(z==="."||z==="..")||z==="",F=0,le=M.length;le>=0;le--)z=M[le],z==="."?M.splice(le,1):z===".."?(M.splice(le,1),F++):F&&(M.splice(le,1),F--);if(!L&&!$)for(;F--;F)M.unshift("..");L&&M[0]!==""&&(!M[0]||M[0].charAt(0)!=="/")&&M.unshift(""),N&&M.join("/").substr(-1)!=="/"&&M.push("");var me=M[0]===""||M[0]&&M[0].charAt(0)==="/";if(ne){R.hostname=me?"":M.length?M.shift():"",R.host=R.hostname;var se=R.host&&R.host.indexOf("@")>0?R.host.split("@"):!1;se&&(R.auth=se.shift(),R.hostname=se.shift(),R.host=R.hostname)}return L=L||R.host&&M.length,L&&!me&&M.unshift(""),M.length>0?R.pathname=M.join("/"):(R.pathname=null,R.path=null),(R.pathname!==null||R.search!==null)&&(R.path=(R.pathname?R.pathname:"")+(R.search?R.search:"")),R.auth=A.auth||R.auth,R.slashes=R.slashes||A.slashes,R.href=R.format(),R},e.prototype.parseHost=function(){var A=this.host,P=n.exec(A);P&&(P=P[0],P!==":"&&(this.port=P.substr(1)),A=A.substr(0,A.length-P.length)),A&&(this.hostname=A)},Hu.parse=y,Hu.resolve=E,Hu.resolveObject=S,Hu.format=_,Hu.Url=e,Hu}function v2(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return b2?LU(r):PU(r)}function LU(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(RU,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<TU||n>CU||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function PU(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function MU(r){let e=l2.resolve(r),t=r.charCodeAt(r.length-1);(t===SU||b2&&t===xU)&&e[e.length-1]!==l2.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(DU,"%25")),!b2&&e.includes("\\")&&(e=e.replace(IU,"%5C")),e.includes(`
`)&&(e=e.replace(OU,"%0A")),e.includes("\r")&&(e=e.replace(NU,"%0D")),e.includes("	")&&(e=e.replace(kU,"%09")),n.pathname=e,n}var mU,c2,EO,f2,h2,AO,d2,xO,p2,SO,g2,TO,m2,CO,y2,RO,Hu,DO,si,AU,AX,xX,SX,TX,CX,RX,xU,SU,TU,CU,b2,RU,DU,IU,OU,NU,kU,OO=Jt(()=>{Oe();ke();Ne();ME();$p();u2();Bu();mU=Object.freeze(Object.create(null)),c2={},EO=!1,f2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;h2={},AO=!1;d2={},xO=!1;p2={},SO=!1;g2={},TO=!1;m2={},CO=!1;y2={},RO=!1;Hu={},DO=!1;si=EU();si.parse;si.resolve;si.resolveObject;si.format;si.Url;AU=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;si.URL=typeof URL<"u"?URL:null;si.pathToFileURL=MU;si.fileURLToPath=v2;AX=si.Url,xX=si.format,SX=si.resolve,TX=si.resolveObject,CX=si.parse,RX=si.URL,xU=92,SU=47,TU=97,CU=122,b2=AU==="win32",RU=/\//g,DU=/%/g,IU=/\\/g,OU=/\n/g,NU=/\r/g,kU=/\t/g});var Hp={};Uo(Hp,{Dir:()=>x$,Dirent:()=>S$,F_OK:()=>N$,FileReadStream:()=>D$,FileWriteStream:()=>I$,R_OK:()=>k$,ReadStream:()=>C$,Stats:()=>T$,W_OK:()=>L$,WriteStream:()=>R$,X_OK:()=>P$,_toUnixTimestamp:()=>O$,access:()=>QU,accessSync:()=>ej,appendFile:()=>ZU,appendFileSync:()=>JU,chmod:()=>nj,chmodSync:()=>ij,chown:()=>tj,chownSync:()=>rj,close:()=>sj,closeSync:()=>oj,constants:()=>M$,copyFile:()=>aj,copyFileSync:()=>lj,cp:()=>uj,cpSync:()=>cj,createReadStream:()=>fj,createWriteStream:()=>hj,default:()=>br,exists:()=>dj,existsSync:()=>sb,fchmod:()=>mj,fchmodSync:()=>yj,fchown:()=>pj,fchownSync:()=>gj,fdatasync:()=>bj,fdatasyncSync:()=>wj,fstat:()=>vj,fstatSync:()=>_j,fsync:()=>Ej,fsyncSync:()=>Aj,ftruncate:()=>xj,ftruncateSync:()=>Sj,futimes:()=>Tj,futimesSync:()=>Cj,lchmod:()=>Ij,lchmodSync:()=>Oj,lchown:()=>Rj,lchownSync:()=>Dj,link:()=>Nj,linkSync:()=>kj,lstat:()=>Lj,lstatSync:()=>x2,mkdir:()=>Pj,mkdirSync:()=>Mj,mkdtemp:()=>Bj,mkdtempSync:()=>Fj,open:()=>Uj,openSync:()=>jj,opendir:()=>$j,opendirSync:()=>zj,promises:()=>B$,read:()=>Hj,readFile:()=>Xj,readFileSync:()=>S2,readSync:()=>Gj,readdir:()=>Wj,readdirSync:()=>qj,readlink:()=>Kj,readlinkSync:()=>Zj,readv:()=>Vj,readvSync:()=>Yj,realpath:()=>Jj,realpathSync:()=>Qj,rename:()=>e$,renameSync:()=>t$,rm:()=>r$,rmSync:()=>n$,rmdir:()=>i$,rmdirSync:()=>s$,stat:()=>o$,statSync:()=>a$,symlink:()=>l$,symlinkSync:()=>u$,truncate:()=>c$,truncateSync:()=>f$,unlink:()=>d$,unlinkSync:()=>p$,unwatchFile:()=>h$,utimes:()=>g$,utimesSync:()=>m$,watch:()=>y$,watchFile:()=>b$,write:()=>v$,writeFile:()=>w$,writeFileSync:()=>rN,writeSync:()=>_$,writev:()=>E$,writevSync:()=>A$});function qp(){return NO||(NO=!0,Object.defineProperty(zp,"__esModule",{value:!0}),zp.constants=void 0,zp.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}),zp}function BU(){return kO||(kO=!0,typeof BigInt=="function"?rb.default=BigInt:rb.default=function(){throw new Error("BigInt is not supported in this environment.")}),rb}function _2(){if(LO)return eh;LO=!0,Object.defineProperty(eh,"__esModule",{value:!0}),eh.Stats=void 0;var r=qp(),e=BU(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){}return h.build=function(d,m){m===void 0&&(m=!1);var b=new h,v=d.uid,w=d.gid,y=d.atime,_=d.mtime,E=d.ctime,S=m?e.default:function(P){return P};b.uid=S(v),b.gid=S(w),b.rdev=S(0),b.blksize=S(4096),b.ino=S(d.ino),b.size=S(d.getSize()),b.blocks=S(1),b.atime=y,b.mtime=_,b.ctime=E,b.birthtime=E,b.atimeMs=S(y.getTime()),b.mtimeMs=S(_.getTime());var A=S(E.getTime());return b.ctimeMs=A,b.birthtimeMs=A,b.dev=S(0),b.mode=S(d.mode),b.nlink=S(d.nlink),b},h.prototype._checkModeProperty=function(d){return(Number(this.mode)&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return eh.Stats=f,eh.default=f,eh}function E2(){if(PO)return Rs;PO=!0;var r=Rs&&Rs.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var u=0,c=s.length,f;u<c;u++)(f||!(u in s))&&(f||(f=Array.prototype.slice.call(s,0,u)),f[u]=s[u]);return o.concat(f||Array.prototype.slice.call(s))};Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.bufferFrom=Rs.bufferAllocUnsafe=Rs.Buffer=void 0;var e=fn();Object.defineProperty(Rs,"Buffer",{enumerable:!0,get:function(){return e.Buffer}});function t(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return new(e.Buffer.bind.apply(e.Buffer,r([void 0,o],s,!1)))}var n=e.Buffer.allocUnsafe||t;Rs.bufferAllocUnsafe=n;var i=e.Buffer.from||t;return Rs.bufferFrom=i,Rs}function XO(){if(MO)return sn;MO=!0;var r=sn&&sn.__extends||(function(){var b=function(v,w){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(y[E]=_[E])},b(v,w)};return function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");b(v,w);function y(){this.constructor=v}v.prototype=w===null?Object.create(w):(y.prototype=w.prototype,new y)}})();Object.defineProperty(sn,"__esModule",{value:!0}),sn.E=sn.AssertionError=sn.message=sn.RangeError=sn.TypeError=sn.Error=void 0;var e=pt,t=qe,n=typeof Symbol>"u"?"_kCode":Symbol("code"),i={};function o(b){return(function(v){r(w,v);function w(y){for(var _=[],E=1;E<arguments.length;E++)_[E-1]=arguments[E];var S=v.call(this,u(y,_))||this;return S.code=y,S[n]=y,S.name="".concat(v.prototype.name," [").concat(S[n],"]"),S}return w})(b)}var s=typeof globalThis<"u"?globalThis:FU,a=(function(b){r(v,b);function v(w){var y=this;if(typeof w!="object"||w===null)throw new sn.TypeError("ERR_INVALID_ARG_TYPE","options","object");return w.message?y=b.call(this,w.message)||this:y=b.call(this,"".concat(t.inspect(w.actual).slice(0,128)," ")+"".concat(w.operator," ").concat(t.inspect(w.expected).slice(0,128)))||this,y.generatedMessage=!w.message,y.name="AssertionError [ERR_ASSERTION]",y.code="ERR_ASSERTION",y.actual=w.actual,y.expected=w.expected,y.operator=w.operator,sn.Error.captureStackTrace(y,w.stackStartFunction),y}return v})(s.Error);sn.AssertionError=a;function u(b,v){e.strictEqual(typeof b,"string");var w=i[b];e(w,"An invalid error message key was used: ".concat(b,"."));var y;if(typeof w=="function")y=w;else{if(y=t.format,v===void 0||v.length===0)return w;v.unshift(w)}return String(y.apply(null,v))}sn.message=u;function c(b,v){i[b]=typeof v=="function"?v:String(v)}sn.E=c,sn.Error=o(s.Error),sn.TypeError=o(s.TypeError),sn.RangeError=o(s.RangeError),c("ERR_ARG_NOT_ITERABLE","%s must be iterable"),c("ERR_ASSERTION","%s"),c("ERR_BUFFER_OUT_OF_BOUNDS",m),c("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),c("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),c("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),c("ERR_DNS_SET_SERVERS_FAILED",function(b,v){return'c-ares failed to set servers: "'.concat(b,'" [').concat(v,"]")}),c("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),c("ERR_ENCODING_NOT_SUPPORTED",function(b){return'The "'.concat(b,'" encoding is not supported')}),c("ERR_ENCODING_INVALID_ENCODED_DATA",function(b){return"The encoded data was not valid for encoding ".concat(b)}),c("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),c("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),c("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),c("ERR_INDEX_OUT_OF_RANGE","Index out of range"),c("ERR_INVALID_ARG_TYPE",f),c("ERR_INVALID_ARRAY_LENGTH",function(b,v,w){return e.strictEqual(typeof w,"number"),'The array "'.concat(b,'" (length ').concat(w,") must be of length ").concat(v,".")}),c("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),c("ERR_INVALID_CALLBACK","Callback must be a function"),c("ERR_INVALID_CHAR","Invalid character in %s"),c("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),c("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),c("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),c("ERR_INVALID_FILE_URL_PATH","File URL path %s"),c("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),c("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),c("ERR_INVALID_OPT_VALUE",function(b,v){return'The value "'.concat(String(v),'" is invalid for option "').concat(b,'"')}),c("ERR_INVALID_OPT_VALUE_ENCODING",function(b){return'The value "'.concat(String(b),'" is invalid for option "encoding"')}),c("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),c("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),c("ERR_INVALID_THIS",'Value of "this" must be of type %s'),c("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),c("ERR_INVALID_URL","Invalid URL: %s"),c("ERR_INVALID_URL_SCHEME",function(b){return"The URL must be ".concat(d(b,"scheme"))}),c("ERR_IPC_CHANNEL_CLOSED","Channel closed"),c("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),c("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),c("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),c("ERR_MISSING_ARGS",h),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),c("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),c("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),c("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),c("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),c("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),c("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),c("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),c("ERR_SOCKET_CANNOT_SEND","Unable to send data"),c("ERR_SOCKET_CLOSED","Socket is closed"),c("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),c("ERR_STDERR_CLOSE","process.stderr cannot be closed"),c("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),c("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),c("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),c("ERR_TLS_DH_PARAM_SIZE",function(b){return"DH parameter size ".concat(b," is less than 2048")}),c("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),c("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),c("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),c("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),c("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),c("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),c("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),c("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),c("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),c("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),c("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function f(b,v,w){e(b,"name is required");var y;v.includes("not ")?(y="must not be",v=v.split("not ")[1]):y="must be";var _;if(Array.isArray(b)){var E=b.map(function(A){return'"'.concat(A,'"')}).join(", ");_="The ".concat(E," arguments ").concat(y," ").concat(d(v,"type"))}else if(b.includes(" argument"))_="The ".concat(b," ").concat(y," ").concat(d(v,"type"));else{var S=b.includes(".")?"property":"argument";_='The "'.concat(b,'" ').concat(S," ").concat(y," ").concat(d(v,"type"))}return arguments.length>=3&&(_+=". Received type ".concat(w!==null?typeof w:"null")),_}function h(){for(var b=[],v=0;v<arguments.length;v++)b[v]=arguments[v];e(b.length>0,"At least one arg needs to be specified");var w="The ",y=b.length;switch(b=b.map(function(_){return'"'.concat(_,'"')}),y){case 1:w+="".concat(b[0]," argument");break;case 2:w+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:w+=b.slice(0,y-1).join(", "),w+=", and ".concat(b[y-1]," arguments");break}return"".concat(w," must be specified")}function d(b,v){if(e(b,"expected is required"),e(typeof v=="string","thing is required"),Array.isArray(b)){var w=b.length;return e(w>0,"At least one expected value needs to be specified"),b=b.map(function(y){return String(y)}),w>2?"one of ".concat(v," ").concat(b.slice(0,w-1).join(", "),", or ")+b[w-1]:w===2?"one of ".concat(v," ").concat(b[0]," or ").concat(b[1]):"of ".concat(v," ").concat(b[0])}else return"of ".concat(v," ").concat(String(b))}function m(b,v){return v?"Attempt to write outside buffer bounds":'"'.concat(b,'" is outside of buffer bounds')}return sn}function KO(){if(BO)return ro;BO=!0,Object.defineProperty(ro,"__esModule",{value:!0}),ro.strToEncoding=ro.assertEncoding=ro.ENCODING_UTF8=void 0;var r=E2(),e=XO();ro.ENCODING_UTF8="utf8";function t(i){if(i&&!r.Buffer.isEncoding(i))throw new e.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",i)}ro.assertEncoding=t;function n(i,o){return!o||o===ro.ENCODING_UTF8?i:o==="buffer"?new r.Buffer(i):new r.Buffer(i).toString(o)}return ro.strToEncoding=n,ro}function ZO(){if(FO)return th;FO=!0,Object.defineProperty(th,"__esModule",{value:!0}),th.Dirent=void 0;var r=qp(),e=KO(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){this.name="",this.mode=0}return h.build=function(d,m){var b=new h,v=d.getNode().mode;return b.name=(0,e.strToEncoding)(d.getName(),m),b.mode=v,b},h.prototype._checkModeProperty=function(d){return(this.mode&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return th.Dirent=f,th.default=f,th}function JO(){if(UO)return nb;UO=!0;var r=zr;Object.defineProperty(nb,"__esModule",{value:!0});var e;return typeof r.nextTick=="function"?e=r.nextTick.bind(typeof globalThis<"u"?globalThis:jO):e=setTimeout.bind(typeof globalThis<"u"?globalThis:jO),nb.default=e,nb}function QO(){if($O)return rh;$O=!0;var r=zr;Object.defineProperty(rh,"__esModule",{value:!0}),rh.createProcess=void 0;var e=function(){if(typeof r<"u")return r;try{return zr}catch{return}};function t(){var n=e()||{};return n.cwd||(n.cwd=function(){return"/"}),n.nextTick||(n.nextTick=JO().default),n.emitWarning||(n.emitWarning=function(i,o){console.warn("".concat(o).concat(o?": ":"").concat(i))}),n.env||(n.env={}),n}return rh.createProcess=t,rh.default=t(),rh}function UU(){if(zO)return oi;zO=!0;var r=oi&&oi.__extends||(function(){var w=function(y,_){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,S){E.__proto__=S}||function(E,S){for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(E[A]=S[A])},w(y,_)};return function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");w(y,_);function E(){this.constructor=y}y.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}})();Object.defineProperty(oi,"__esModule",{value:!0}),oi.File=oi.Link=oi.Node=oi.SEP=void 0;var e=QO(),t=E2(),n=qp(),i=nn,o=_2(),s=n.constants.S_IFMT,a=n.constants.S_IFDIR,u=n.constants.S_IFREG,c=n.constants.S_IFLNK,f=n.constants.O_APPEND,h=function(){var w,y;return(y=(w=e.default.getuid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0},d=function(){var w,y;return(y=(w=e.default.getgid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0};oi.SEP="/";var m=(function(w){r(y,w);function y(_,E){E===void 0&&(E=438);var S=w.call(this)||this;return S._uid=h(),S._gid=d(),S._atime=new Date,S._mtime=new Date,S._ctime=new Date,S._perm=438,S.mode=u,S._nlink=1,S._perm=E,S.mode|=E,S.ino=_,S}return Object.defineProperty(y.prototype,"ctime",{get:function(){return this._ctime},set:function(_){this._ctime=_},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"uid",{get:function(){return this._uid},set:function(_){this._uid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"gid",{get:function(){return this._gid},set:function(_){this._gid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"atime",{get:function(){return this._atime},set:function(_){this._atime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mtime",{get:function(){return this._mtime},set:function(_){this._mtime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"perm",{get:function(){return this._perm},set:function(_){this._perm=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nlink",{get:function(){return this._nlink},set:function(_){this._nlink=_,this.ctime=new Date},enumerable:!1,configurable:!0}),y.prototype.getString=function(_){return _===void 0&&(_="utf8"),this.atime=new Date,this.getBuffer().toString(_)},y.prototype.setString=function(_){this.buf=(0,t.bufferFrom)(_,"utf8"),this.touch()},y.prototype.getBuffer=function(){return this.atime=new Date,this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)},y.prototype.setBuffer=function(_){this.buf=(0,t.bufferFrom)(_),this.touch()},y.prototype.getSize=function(){return this.buf?this.buf.length:0},y.prototype.setModeProperty=function(_){this.mode=this.mode&~s|_},y.prototype.setIsFile=function(){this.setModeProperty(u)},y.prototype.setIsDirectory=function(){this.setModeProperty(a)},y.prototype.setIsSymlink=function(){this.setModeProperty(c)},y.prototype.isFile=function(){return(this.mode&s)===u},y.prototype.isDirectory=function(){return(this.mode&s)===a},y.prototype.isSymlink=function(){return(this.mode&s)===c},y.prototype.makeSymlink=function(_){this.symlink=_,this.setIsSymlink()},y.prototype.write=function(_,E,S,A){if(E===void 0&&(E=0),S===void 0&&(S=_.length),A===void 0&&(A=0),this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),A+S>this.buf.length){var P=(0,t.bufferAllocUnsafe)(A+S);this.buf.copy(P,0,0,this.buf.length),this.buf=P}return _.copy(this.buf,A,E,E+S),this.touch(),S},y.prototype.read=function(_,E,S,A){E===void 0&&(E=0),S===void 0&&(S=_.byteLength),A===void 0&&(A=0),this.atime=new Date,this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));var P=S;return P>_.byteLength&&(P=_.byteLength),P+A>this.buf.length&&(P=this.buf.length-A),this.buf.copy(_,E,A,A+P),P},y.prototype.truncate=function(_){if(_===void 0&&(_=0),!_)this.buf=(0,t.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),_<=this.buf.length)this.buf=this.buf.slice(0,_);else{var E=(0,t.bufferAllocUnsafe)(_);this.buf.copy(E),E.fill(0,this.buf.length),this.buf=E}this.touch()},y.prototype.chmod=function(_){this.perm=_,this.mode=this.mode&-512|_,this.touch()},y.prototype.chown=function(_,E){this.uid=_,this.gid=E,this.touch()},y.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},y.prototype.canRead=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&4||E===this.gid&&this.perm&32||_===this.uid&&this.perm&256)},y.prototype.canWrite=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&2||E===this.gid&&this.perm&16||_===this.uid&&this.perm&128)},y.prototype.del=function(){this.emit("delete",this)},y.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},y})(i.EventEmitter);oi.Node=m;var b=(function(w){r(y,w);function y(_,E,S){var A=w.call(this)||this;return A.children={},A._steps=[],A.ino=0,A.length=0,A.vol=_,A.parent=E,A.name=S,A.syncSteps(),A}return Object.defineProperty(y.prototype,"steps",{get:function(){return this._steps},set:function(_){this._steps=_;for(var E=0,S=Object.entries(this.children);E<S.length;E++){var A=S[E],P=A[0],R=A[1];P==="."||P===".."||R?.syncSteps()}},enumerable:!1,configurable:!0}),y.prototype.setNode=function(_){this.node=_,this.ino=_.ino},y.prototype.getNode=function(){return this.node},y.prototype.createChild=function(_,E){E===void 0&&(E=this.vol.createNode());var S=new y(this.vol,this,_);return S.setNode(E),E.isDirectory()&&(S.children["."]=S,S.getNode().nlink++),this.setChild(_,S),S},y.prototype.setChild=function(_,E){E===void 0&&(E=new y(this.vol,this,_)),this.children[_]=E,E.parent=this,this.length++;var S=E.getNode();return S.isDirectory()&&(E.children[".."]=this,this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",E,this),E},y.prototype.deleteChild=function(_){var E=_.getNode();E.isDirectory()&&(delete _.children[".."],this.getNode().nlink--),delete this.children[_.getName()],this.length--,this.getNode().mtime=new Date,this.emit("child:delete",_,this)},y.prototype.getChild=function(_){if(this.getNode().mtime=new Date,Object.hasOwnProperty.call(this.children,_))return this.children[_]},y.prototype.getPath=function(){return this.steps.join(oi.SEP)},y.prototype.getName=function(){return this.steps[this.steps.length-1]},y.prototype.walk=function(_,E,S){if(E===void 0&&(E=_.length),S===void 0&&(S=0),S>=_.length)return this;if(S>=E)return this;var A=_[S],P=this.getChild(A);return P?P.walk(_,E,S+1):null},y.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},y.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},y})(i.EventEmitter);oi.Link=b;var v=(function(){function w(y,_,E,S){this.position=0,this.link=y,this.node=_,this.flags=E,this.fd=S}return w.prototype.getString=function(y){return this.node.getString()},w.prototype.setString=function(y){this.node.setString(y)},w.prototype.getBuffer=function(){return this.node.getBuffer()},w.prototype.setBuffer=function(y){this.node.setBuffer(y)},w.prototype.getSize=function(){return this.node.getSize()},w.prototype.truncate=function(y){this.node.truncate(y)},w.prototype.seekTo=function(y){this.position=y},w.prototype.stats=function(){return o.default.build(this.node)},w.prototype.write=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.length),typeof S!="number"&&(S=this.position),this.flags&f&&(S=this.getSize());var A=this.node.write(y,_,E,S);return this.position=S+A,A},w.prototype.read=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.byteLength),typeof S!="number"&&(S=this.position);var A=this.node.read(y,_,E,S);return this.position=S+A,A},w.prototype.chmod=function(y){this.node.chmod(y)},w.prototype.chown=function(y,_){this.node.chown(y,_)},w})();return oi.File=v,oi}function $U(){if(WO)return ib;WO=!0,Object.defineProperty(ib,"__esModule",{value:!0});function r(e,t,n){var i=setTimeout.apply(typeof globalThis<"u"?globalThis:jU,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}return ib.default=r,ib}function zU(){if(qO)return pl;qO=!0;var r=pl&&pl.__spreadArray||function(i,o,s){if(s||arguments.length===2)for(var a=0,u=o.length,c;a<u;a++)(c||!(a in o))&&(c||(c=Array.prototype.slice.call(o,0,a)),c[a]=o[a]);return i.concat(c||Array.prototype.slice.call(o))};Object.defineProperty(pl,"__esModule",{value:!0}),pl.FileHandle=void 0;function e(i,o,s){return s===void 0&&(s=function(a){return a}),function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return new Promise(function(c,f){i[o].bind(i).apply(void 0,r(r([],a,!1),[function(h,d){return h?f(h):c(s(d))}],!1))})}}var t=(function(){function i(o,s){this.vol=o,this.fd=s}return i.prototype.appendFile=function(o,s){return e(this.vol,"appendFile")(this.fd,o,s)},i.prototype.chmod=function(o){return e(this.vol,"fchmod")(this.fd,o)},i.prototype.chown=function(o,s){return e(this.vol,"fchown")(this.fd,o,s)},i.prototype.close=function(){return e(this.vol,"close")(this.fd)},i.prototype.datasync=function(){return e(this.vol,"fdatasync")(this.fd)},i.prototype.read=function(o,s,a,u){return e(this.vol,"read",function(c){return{bytesRead:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.readFile=function(o){return e(this.vol,"readFile")(this.fd,o)},i.prototype.stat=function(o){return e(this.vol,"fstat")(this.fd,o)},i.prototype.sync=function(){return e(this.vol,"fsync")(this.fd)},i.prototype.truncate=function(o){return e(this.vol,"ftruncate")(this.fd,o)},i.prototype.utimes=function(o,s){return e(this.vol,"futimes")(this.fd,o,s)},i.prototype.write=function(o,s,a,u){return e(this.vol,"write",function(c){return{bytesWritten:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.writeFile=function(o,s){return e(this.vol,"writeFile")(this.fd,o,s)},i})();pl.FileHandle=t;function n(i){return typeof Promise>"u"?null:{FileHandle:t,access:function(o,s){return e(i,"access")(o,s)},appendFile:function(o,s,a){return e(i,"appendFile")(o instanceof t?o.fd:o,s,a)},chmod:function(o,s){return e(i,"chmod")(o,s)},chown:function(o,s,a){return e(i,"chown")(o,s,a)},copyFile:function(o,s,a){return e(i,"copyFile")(o,s,a)},lchmod:function(o,s){return e(i,"lchmod")(o,s)},lchown:function(o,s,a){return e(i,"lchown")(o,s,a)},link:function(o,s){return e(i,"link")(o,s)},lstat:function(o,s){return e(i,"lstat")(o,s)},mkdir:function(o,s){return e(i,"mkdir")(o,s)},mkdtemp:function(o,s){return e(i,"mkdtemp")(o,s)},open:function(o,s,a){return e(i,"open",function(u){return new t(i,u)})(o,s,a)},readdir:function(o,s){return e(i,"readdir")(o,s)},readFile:function(o,s){return e(i,"readFile")(o instanceof t?o.fd:o,s)},readlink:function(o,s){return e(i,"readlink")(o,s)},realpath:function(o,s){return e(i,"realpath")(o,s)},rename:function(o,s){return e(i,"rename")(o,s)},rmdir:function(o){return e(i,"rmdir")(o)},rm:function(o,s){return e(i,"rm")(o,s)},stat:function(o,s){return e(i,"stat")(o,s)},symlink:function(o,s,a){return e(i,"symlink")(o,s,a)},truncate:function(o,s){return e(i,"truncate")(o,s)},unlink:function(o){return e(i,"unlink")(o)},utimes:function(o,s,a){return e(i,"utimes")(o,s,a)},writeFile:function(o,s,a){return e(i,"writeFile")(o instanceof t?o.fd:o,s,a)}}}return pl.default=n,pl}function WU(){if(HO)return Wp;HO=!0;var r=zr;Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.correctPath=s,Wp.unixify=o;var e=r.platform==="win32";function t(a){var u=a.length-1;if(u<2)return a;for(;n(a,u);)u--;return a.substr(0,u+1)}function n(a,u){var c=a[u];return u>0&&(c==="/"||e&&c==="\\")}function i(a,u){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),u!==!1&&(a=t(a)),a}function o(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=i(a,u),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function s(a){return o(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Wp}function eN(){if(GO)return Ft;GO=!0;var r=Ft&&Ft.__extends||(function(){var pe=function(W,X){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,we){ae.__proto__=we}||function(ae,we){for(var Pe in we)Object.prototype.hasOwnProperty.call(we,Pe)&&(ae[Pe]=we[Pe])},pe(W,X)};return function(W,X){if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");pe(W,X);function ae(){this.constructor=W}W.prototype=X===null?Object.create(X):(ae.prototype=X.prototype,new ae)}})(),e=Ft&&Ft.__spreadArray||function(pe,W,X){if(X||arguments.length===2)for(var ae=0,we=W.length,Pe;ae<we;ae++)(Pe||!(ae in W))&&(Pe||(Pe=Array.prototype.slice.call(W,0,ae)),Pe[ae]=W[ae]);return pe.concat(Pe||Array.prototype.slice.call(W))};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.FSWatcher=Ft.StatWatcher=Ft.Volume=Ft.toUnixTimestamp=Ft.bufferToEncoding=Ft.dataToBuffer=Ft.dataToStr=Ft.pathToSteps=Ft.filenameToSteps=Ft.pathToFilename=Ft.flagsToNumber=Ft.FLAGS=void 0;var t=rn,n=UU(),i=_2(),o=ZO(),s=E2(),a=JO(),u=QO(),c=$U(),f=ii,h=qp(),d=nn,m=KO(),b=XO(),v=qe,w=zU(),y=t.resolve,_=h.constants.O_RDONLY,E=h.constants.O_WRONLY,S=h.constants.O_RDWR,A=h.constants.O_CREAT,P=h.constants.O_EXCL,R=h.constants.O_TRUNC,Y=h.constants.O_APPEND,te=h.constants.O_SYNC,K=h.constants.O_DIRECTORY,ie=h.constants.F_OK,j=h.constants.COPYFILE_EXCL,q=h.constants.COPYFILE_FICLONE_FORCE,fe=t.posix?t.posix:t,Ee=fe.sep,ve=fe.relative,H=fe.join,D=fe.dirname,ee=u.default.platform==="win32",B=128,L={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},$=function(pe){return"Expected options to be either an object or a string, but got ".concat(pe," instead")},M="ENOENT",G="EBADF",ne="EINVAL",se="EPERM",z="EPROTO",N="EEXIST",F="ENOTDIR",le="EMFILE",me="EACCES",U="EISDIR",I="ENOTEMPTY",Z="ENOSYS",ue="ERR_FS_EISDIR";function Se(pe,W,X,ae){W===void 0&&(W=""),X===void 0&&(X=""),ae===void 0&&(ae="");var we="";switch(X&&(we=" '".concat(X,"'")),ae&&(we+=" -> '".concat(ae,"'")),pe){case M:return"ENOENT: no such file or directory, ".concat(W).concat(we);case G:return"EBADF: bad file descriptor, ".concat(W).concat(we);case ne:return"EINVAL: invalid argument, ".concat(W).concat(we);case se:return"EPERM: operation not permitted, ".concat(W).concat(we);case z:return"EPROTO: protocol error, ".concat(W).concat(we);case N:return"EEXIST: file already exists, ".concat(W).concat(we);case F:return"ENOTDIR: not a directory, ".concat(W).concat(we);case U:return"EISDIR: illegal operation on a directory, ".concat(W).concat(we);case me:return"EACCES: permission denied, ".concat(W).concat(we);case I:return"ENOTEMPTY: directory not empty, ".concat(W).concat(we);case le:return"EMFILE: too many open files, ".concat(W).concat(we);case Z:return"ENOSYS: function not implemented, ".concat(W).concat(we);case ue:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(W," returned EISDIR (is a directory) ").concat(X);default:return"".concat(pe,": error occurred, ").concat(W).concat(we)}}function Ae(pe,W,X,ae,we){W===void 0&&(W=""),X===void 0&&(X=""),ae===void 0&&(ae=""),we===void 0&&(we=Error);var Pe=new we(Se(pe,W,X,ae));return Pe.code=pe,X&&(Pe.path=X),Pe}var de;(function(pe){pe[pe.r=_]="r",pe[pe["r+"]=S]="r+",pe[pe.rs=_|te]="rs",pe[pe.sr=pe.rs]="sr",pe[pe["rs+"]=S|te]="rs+",pe[pe["sr+"]=pe["rs+"]]="sr+",pe[pe.w=E|A|R]="w",pe[pe.wx=E|A|R|P]="wx",pe[pe.xw=pe.wx]="xw",pe[pe["w+"]=S|A|R]="w+",pe[pe["wx+"]=S|A|R|P]="wx+",pe[pe["xw+"]=pe["wx+"]]="xw+",pe[pe.a=E|Y|A]="a",pe[pe.ax=E|Y|A|P]="ax",pe[pe.xa=pe.ax]="xa",pe[pe["a+"]=S|Y|A]="a+",pe[pe["ax+"]=S|Y|A|P]="ax+",pe[pe["xa+"]=pe["ax+"]]="xa+"})(de=Ft.FLAGS||(Ft.FLAGS={}));function be(pe){if(typeof pe=="number")return pe;if(typeof pe=="string"){var W=de[pe];if(typeof W<"u")return W}throw new b.TypeError("ERR_INVALID_OPT_VALUE","flags",pe)}Ft.flagsToNumber=be;function Le(pe,W){var X;if(W){var ae=typeof W;switch(ae){case"string":X=Object.assign({},pe,{encoding:W});break;case"object":X=Object.assign({},pe,W);break;default:throw TypeError($(ae))}}else return pe;return X.encoding!=="buffer"&&(0,m.assertEncoding)(X.encoding),X}function De(pe){return function(W){return Le(pe,W)}}function Te(pe){if(typeof pe!="function")throw TypeError(L.CB);return pe}function ze(pe){return function(W,X){return typeof W=="function"?[pe(),W]:[pe(W),Te(X)]}}var He={encoding:"utf8"},We=De(He),x=ze(We),g={flag:"r"},p=De(g),T={encoding:"utf8",mode:438,flag:de[de.w]},J=De(T),C={encoding:"utf8",mode:438,flag:de[de.a]},oe=De(C),ce=ze(oe),xe=He,_e=De(xe),Re=ze(_e),Q={mode:511,recursive:!1},Be=function(pe){return typeof pe=="number"?Object.assign({},Q,{mode:pe}):Object.assign({},Q,pe)},tt={recursive:!1},O=function(pe){return Object.assign({},tt,pe)},Me=De(He),$e=ze(Me),ge={encoding:"utf8",withFileTypes:!1},Ie=De(ge),Fe=ze(Ie),ut={bigint:!1},he=function(pe){return pe===void 0&&(pe={}),Object.assign({},ut,pe)},ye=function(pe,W){return typeof pe=="function"?[he(),pe]:[he(pe),Te(W)]};function Ge(pe){if(pe.hostname!=="")throw new b.TypeError("ERR_INVALID_FILE_URL_HOST",u.default.platform);for(var W=pe.pathname,X=0;X<W.length;X++)if(W[X]==="%"){var ae=W.codePointAt(X+2)|32;if(W[X+1]==="2"&&ae===102)throw new b.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(W)}function je(pe){if(typeof pe!="string"&&!s.Buffer.isBuffer(pe)){try{if(!(pe instanceof Qt.URL))throw new TypeError(L.PATH_STR)}catch{throw new TypeError(L.PATH_STR)}pe=Ge(pe)}var W=String(pe);return Dr(W),W}Ft.pathToFilename=je;var Qe=function(pe,W){return W===void 0&&(W=u.default.cwd()),y(W,pe)};if(ee){var dt=Qe,Rt=WU().unixify;Qe=function(pe,W){return Rt(dt(pe,W))}}function Et(pe,W){var X=Qe(pe,W),ae=X.substring(1);return ae?ae.split(Ee):[]}Ft.filenameToSteps=Et;function ar(pe){return Et(je(pe))}Ft.pathToSteps=ar;function _i(pe,W){return W===void 0&&(W=m.ENCODING_UTF8),s.Buffer.isBuffer(pe)?pe.toString(W):pe instanceof Uint8Array?(0,s.bufferFrom)(pe).toString(W):String(pe)}Ft.dataToStr=_i;function qn(pe,W){return W===void 0&&(W=m.ENCODING_UTF8),s.Buffer.isBuffer(pe)?pe:pe instanceof Uint8Array?(0,s.bufferFrom)(pe):(0,s.bufferFrom)(String(pe),W)}Ft.dataToBuffer=qn;function Ht(pe,W){return!W||W==="buffer"?pe:pe.toString(W)}Ft.bufferToEncoding=Ht;function Dr(pe,W){if((""+pe).indexOf("\0")!==-1){var X=new Error("Path must be a string without null bytes");throw X.code=M,X}return!0}function yr(pe,W){if(typeof pe=="number")return pe;if(typeof pe=="string")return parseInt(pe,8);if(W)return Wt(W)}function Wt(pe,W){var X=yr(pe,W);if(typeof X!="number"||isNaN(X))throw new TypeError(L.MODE_INT);return X}function Yt(pe){return pe>>>0===pe}function Zr(pe){if(!Yt(pe))throw TypeError(L.FD)}function Jr(pe){if(typeof pe=="string"&&+pe==pe)return+pe;if(pe instanceof Date)return pe.getTime()/1e3;if(isFinite(pe))return pe<0?Date.now()/1e3:pe;throw new Error("Cannot parse time: "+pe)}Ft.toUnixTimestamp=Jr;function Qr(pe){if(typeof pe!="number")throw TypeError(L.UID)}function Mf(pe){if(typeof pe!="number")throw TypeError(L.GID)}function L3(pe){var W={};function X(ae,we){for(var Pe in we){var Ue=we[Pe],Ye=H(ae,Pe);typeof Ue=="string"?W[Ye]=Ue:typeof Ue=="object"&&Ue!==null&&Object.keys(Ue).length>0?X(Ye,Ue):W[Ye]=null}}return X("",pe),W}var P3=(function(){function pe(W){W===void 0&&(W={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,w.default)(this),this.statWatchers={},this.props=Object.assign({Node:n.Node,Link:n.Link,File:n.File},W);var X=this.createLink();X.setNode(this.createNode(!0));var ae=this;this.StatWatcher=(function(Ue){r(Ye,Ue);function Ye(){return Ue.call(this,ae)||this}return Ye})(NT);var we=Ks;this.ReadStream=(function(Ue){r(Ye,Ue);function Ye(){for(var rt=[],ot=0;ot<arguments.length;ot++)rt[ot]=arguments[ot];return Ue.apply(this,e([ae],rt,!1))||this}return Ye})(we);var Pe=Qi;this.WriteStream=(function(Ue){r(Ye,Ue);function Ye(){for(var rt=[],ot=0;ot<arguments.length;ot++)rt[ot]=arguments[ot];return Ue.apply(this,e([ae],rt,!1))||this}return Ye})(Pe),this.FSWatcher=(function(Ue){r(Ye,Ue);function Ye(){return Ue.call(this,ae)||this}return Ye})(LT),X.setChild(".",X),X.getNode().nlink++,X.setChild("..",X),X.getNode().nlink++,this.root=X}return pe.fromJSON=function(W,X){var ae=new pe;return ae.fromJSON(W,X),ae},pe.fromNestedJSON=function(W,X){var ae=new pe;return ae.fromNestedJSON(W,X),ae},Object.defineProperty(pe.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),pe.prototype.createLink=function(W,X,ae,we){if(ae===void 0&&(ae=!1),!W)return new this.props.Link(this,null,"");if(!X)throw new Error("createLink: name cannot be empty");return W.createChild(X,this.createNode(ae,we))},pe.prototype.deleteLink=function(W){var X=W.parent;return X?(X.deleteChild(W),!0):!1},pe.prototype.newInoNumber=function(){var W=this.releasedInos.pop();return W||(this.ino=(this.ino+1)%4294967295,this.ino)},pe.prototype.newFdNumber=function(){var W=this.releasedFds.pop();return typeof W=="number"?W:pe.fd--},pe.prototype.createNode=function(W,X){W===void 0&&(W=!1);var ae=new this.props.Node(this.newInoNumber(),X);return W&&ae.setIsDirectory(),this.inodes[ae.ino]=ae,ae},pe.prototype.getNode=function(W){return this.inodes[W]},pe.prototype.deleteNode=function(W){W.del(),delete this.inodes[W.ino],this.releasedInos.push(W.ino)},pe.prototype.genRndStr=function(){var W=(Math.random()+1).toString(36).substring(2,8);return W.length===6?W:this.genRndStr()},pe.prototype.getLink=function(W){return this.root.walk(W)},pe.prototype.getLinkOrThrow=function(W,X){var ae=Et(W),we=this.getLink(ae);if(!we)throw Ae(M,X,W);return we},pe.prototype.getResolvedLink=function(W){for(var X=typeof W=="string"?Et(W):W,ae=this.root,we=0;we<X.length;){var Pe=X[we];if(ae=ae.getChild(Pe),!ae)return null;var Ue=ae.getNode();if(Ue.isSymlink()){X=Ue.symlink.concat(X.slice(we+1)),ae=this.root,we=0;continue}we++}return ae},pe.prototype.getResolvedLinkOrThrow=function(W,X){var ae=this.getResolvedLink(W);if(!ae)throw Ae(M,X,W);return ae},pe.prototype.resolveSymlinks=function(W){return this.getResolvedLink(W.steps.slice(1))},pe.prototype.getLinkAsDirOrThrow=function(W,X){var ae=this.getLinkOrThrow(W,X);if(!ae.getNode().isDirectory())throw Ae(F,X,W);return ae},pe.prototype.getLinkParent=function(W){return this.root.walk(W,W.length-1)},pe.prototype.getLinkParentAsDirOrThrow=function(W,X){var ae=W instanceof Array?W:Et(W),we=this.getLinkParent(ae);if(!we)throw Ae(M,X,Ee+ae.join(Ee));if(!we.getNode().isDirectory())throw Ae(F,X,Ee+ae.join(Ee));return we},pe.prototype.getFileByFd=function(W){return this.fds[String(W)]},pe.prototype.getFileByFdOrThrow=function(W,X){if(!Yt(W))throw TypeError(L.FD);var ae=this.getFileByFd(W);if(!ae)throw Ae(G,X);return ae},pe.prototype.wrapAsync=function(W,X,ae){var we=this;Te(ae),(0,a.default)(function(){var Pe;try{Pe=W.apply(we,X)}catch(Ue){ae(Ue);return}ae(null,Pe)})},pe.prototype._toJSON=function(W,X,ae){var we;W===void 0&&(W=this.root),X===void 0&&(X={});var Pe=!0,Ue=W.children;W.getNode().isFile()&&(Ue=(we={},we[W.getName()]=W.parent.getChild(W.getName()),we),W=W.parent);for(var Ye in Ue)if(!(Ye==="."||Ye==="..")){Pe=!1;var rt=W.getChild(Ye);if(!rt)throw new Error("_toJSON: unexpected undefined");var ot=rt.getNode();if(ot.isFile()){var yt=rt.getPath();ae&&(yt=ve(ae,yt)),X[yt]=ot.getString()}else ot.isDirectory()&&this._toJSON(rt,X,ae)}var Lt=W.getPath();return ae&&(Lt=ve(ae,Lt)),Lt&&Pe&&(X[Lt]=null),X},pe.prototype.toJSON=function(W,X,ae){X===void 0&&(X={}),ae===void 0&&(ae=!1);var we=[];if(W){W instanceof Array||(W=[W]);for(var Pe=0,Ue=W;Pe<Ue.length;Pe++){var Ye=Ue[Pe],rt=je(Ye),ot=this.getResolvedLink(rt);ot&&we.push(ot)}}else we.push(this.root);if(!we.length)return X;for(var yt=0,Lt=we;yt<Lt.length;yt++){var ot=Lt[yt];this._toJSON(ot,X,ae?ot.getPath():"")}return X},pe.prototype.fromJSON=function(W,X){X===void 0&&(X=u.default.cwd());for(var ae in W){var we=W[ae];if(ae=Qe(ae,X),typeof we=="string"){var Pe=D(ae);this.mkdirpBase(Pe,511),this.writeFileSync(ae,we)}else this.mkdirpBase(ae,511)}},pe.prototype.fromNestedJSON=function(W,X){this.fromJSON(L3(W),X)},pe.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},pe.prototype.mountSync=function(W,X){this.fromJSON(X,W)},pe.prototype.openLink=function(W,X,ae){if(ae===void 0&&(ae=!0),this.openFiles>=this.maxFiles)throw Ae(le,"open",W.getPath());var we=W;if(ae&&(we=this.resolveSymlinks(W)),!we)throw Ae(M,"open",W.getPath());var Pe=we.getNode();if(Pe.isDirectory()){if((X&(_|S|E))!==_)throw Ae(U,"open",W.getPath())}else if(X&K)throw Ae(F,"open",W.getPath());if(!(X&E)&&!Pe.canRead())throw Ae(me,"open",W.getPath());var Ue=new this.props.File(W,Pe,X,this.newFdNumber());return this.fds[Ue.fd]=Ue,this.openFiles++,X&R&&Ue.truncate(),Ue},pe.prototype.openFile=function(W,X,ae,we){we===void 0&&(we=!0);var Pe=Et(W),Ue=we?this.getResolvedLink(Pe):this.getLink(Pe);if(Ue&&X&P)throw Ae(N,"open",W);if(!Ue&&X&A){var Ye=this.getResolvedLink(Pe.slice(0,Pe.length-1));if(!Ye)throw Ae(M,"open",Ee+Pe.join(Ee));X&A&&typeof ae=="number"&&(Ue=this.createLink(Ye,Pe[Pe.length-1],!1,ae))}if(Ue)return this.openLink(Ue,X,we);throw Ae(M,"open",W)},pe.prototype.openBase=function(W,X,ae,we){we===void 0&&(we=!0);var Pe=this.openFile(W,X,ae,we);if(!Pe)throw Ae(M,"open",W);return Pe.fd},pe.prototype.openSync=function(W,X,ae){ae===void 0&&(ae=438);var we=Wt(ae),Pe=je(W),Ue=be(X);return this.openBase(Pe,Ue,we)},pe.prototype.open=function(W,X,ae,we){var Pe=ae,Ue=we;typeof ae=="function"&&(Pe=438,Ue=ae),Pe=Pe||438;var Ye=Wt(Pe),rt=je(W),ot=be(X);this.wrapAsync(this.openBase,[rt,ot,Ye],Ue)},pe.prototype.closeFile=function(W){this.fds[W.fd]&&(this.openFiles--,delete this.fds[W.fd],this.releasedFds.push(W.fd))},pe.prototype.closeSync=function(W){Zr(W);var X=this.getFileByFdOrThrow(W,"close");this.closeFile(X)},pe.prototype.close=function(W,X){Zr(W),this.wrapAsync(this.closeSync,[W],X)},pe.prototype.openFileOrGetById=function(W,X,ae){if(typeof W=="number"){var we=this.fds[W];if(!we)throw Ae(M);return we}else return this.openFile(je(W),X,ae)},pe.prototype.readBase=function(W,X,ae,we,Pe){var Ue=this.getFileByFdOrThrow(W);return Ue.read(X,Number(ae),Number(we),Pe)},pe.prototype.readSync=function(W,X,ae,we,Pe){return Zr(W),this.readBase(W,X,ae,we,Pe)},pe.prototype.read=function(W,X,ae,we,Pe,Ue){var Ye=this;if(Te(Ue),we===0)return u.default.nextTick(function(){Ue&&Ue(null,0,X)});(0,a.default)(function(){try{var rt=Ye.readBase(W,X,ae,we,Pe);Ue(null,rt,X)}catch(ot){Ue(ot)}})},pe.prototype.readFileBase=function(W,X,ae){var we,Pe=typeof W=="number",Ue=Pe&&Yt(W),Ye;if(Ue)Ye=W;else{var rt=je(W),ot=Et(rt),yt=this.getResolvedLink(ot);if(yt){var Lt=yt.getNode();if(Lt.isDirectory())throw Ae(U,"open",yt.getPath())}Ye=this.openSync(W,X)}try{we=Ht(this.getFileByFdOrThrow(Ye).getBuffer(),ae)}finally{Ue||this.closeSync(Ye)}return we},pe.prototype.readFileSync=function(W,X){var ae=p(X),we=be(ae.flag);return this.readFileBase(W,we,ae.encoding)},pe.prototype.readFile=function(W,X,ae){var we=ze(p)(X,ae),Pe=we[0],Ue=we[1],Ye=be(Pe.flag);this.wrapAsync(this.readFileBase,[W,Ye,Pe.encoding],Ue)},pe.prototype.writeBase=function(W,X,ae,we,Pe){var Ue=this.getFileByFdOrThrow(W,"write");return Ue.write(X,ae,we,Pe)},pe.prototype.writeSync=function(W,X,ae,we,Pe){Zr(W);var Ue,Ye,rt,ot,yt=typeof X!="string";yt?(Ye=(ae||0)|0,rt=we,ot=Pe):(ot=ae,Ue=we);var Lt=qn(X,Ue);return yt?typeof rt>"u"&&(rt=Lt.length):(Ye=0,rt=Lt.length),this.writeBase(W,Lt,Ye,rt,ot)},pe.prototype.write=function(W,X,ae,we,Pe,Ue){var Ye=this;Zr(W);var rt,ot,yt,Lt,en,Eu=typeof X,Zs=typeof ae,sl=typeof we,Au=typeof Pe;Eu!=="string"?Zs==="function"?en=ae:sl==="function"?(rt=ae|0,en=we):Au==="function"?(rt=ae|0,ot=we,en=Pe):(rt=ae|0,ot=we,yt=Pe,en=Ue):Zs==="function"?en=ae:sl==="function"?(yt=ae,en=we):Au==="function"&&(yt=ae,Lt=we,en=Pe);var jr=qn(X,Lt);Eu!=="string"?typeof ot>"u"&&(ot=jr.length):(rt=0,ot=jr.length);var es=Te(en);(0,a.default)(function(){try{var Ss=Ye.writeBase(W,jr,rt,ot,yt);Eu!=="string"?es(null,Ss,jr):es(null,Ss,X)}catch(d0){es(d0)}})},pe.prototype.writeFileBase=function(W,X,ae,we){var Pe=typeof W=="number",Ue;Pe?Ue=W:Ue=this.openBase(je(W),ae,we);var Ye=0,rt=X.length,ot=ae&Y?void 0:0;try{for(;rt>0;){var yt=this.writeSync(Ue,X,Ye,rt,ot);Ye+=yt,rt-=yt,ot!==void 0&&(ot+=yt)}}finally{Pe||this.closeSync(Ue)}},pe.prototype.writeFileSync=function(W,X,ae){var we=J(ae),Pe=be(we.flag),Ue=Wt(we.mode),Ye=qn(X,we.encoding);this.writeFileBase(W,Ye,Pe,Ue)},pe.prototype.writeFile=function(W,X,ae,we){var Pe=ae,Ue=we;typeof ae=="function"&&(Pe=T,Ue=ae);var Ye=Te(Ue),rt=J(Pe),ot=be(rt.flag),yt=Wt(rt.mode),Lt=qn(X,rt.encoding);this.wrapAsync(this.writeFileBase,[W,Lt,ot,yt],Ye)},pe.prototype.linkBase=function(W,X){var ae=Et(W),we=this.getLink(ae);if(!we)throw Ae(M,"link",W,X);var Pe=Et(X),Ue=this.getLinkParent(Pe);if(!Ue)throw Ae(M,"link",W,X);var Ye=Pe[Pe.length-1];if(Ue.getChild(Ye))throw Ae(N,"link",W,X);var rt=we.getNode();rt.nlink++,Ue.createChild(Ye,rt)},pe.prototype.copyFileBase=function(W,X,ae){var we=this.readFileSync(W);if(ae&j&&this.existsSync(X))throw Ae(N,"copyFile",W,X);if(ae&q)throw Ae(Z,"copyFile",W,X);this.writeFileBase(X,we,de.w,438)},pe.prototype.copyFileSync=function(W,X,ae){var we=je(W),Pe=je(X);return this.copyFileBase(we,Pe,(ae||0)|0)},pe.prototype.copyFile=function(W,X,ae,we){var Pe=je(W),Ue=je(X),Ye,rt;typeof ae=="function"?(Ye=0,rt=ae):(Ye=ae,rt=we),Te(rt),this.wrapAsync(this.copyFileBase,[Pe,Ue,Ye],rt)},pe.prototype.linkSync=function(W,X){var ae=je(W),we=je(X);this.linkBase(ae,we)},pe.prototype.link=function(W,X,ae){var we=je(W),Pe=je(X);this.wrapAsync(this.linkBase,[we,Pe],ae)},pe.prototype.unlinkBase=function(W){var X=Et(W),ae=this.getLink(X);if(!ae)throw Ae(M,"unlink",W);if(ae.length)throw Error("Dir not empty...");this.deleteLink(ae);var we=ae.getNode();we.nlink--,we.nlink<=0&&this.deleteNode(we)},pe.prototype.unlinkSync=function(W){var X=je(W);this.unlinkBase(X)},pe.prototype.unlink=function(W,X){var ae=je(W);this.wrapAsync(this.unlinkBase,[ae],X)},pe.prototype.symlinkBase=function(W,X){var ae=Et(X),we=this.getLinkParent(ae);if(!we)throw Ae(M,"symlink",W,X);var Pe=ae[ae.length-1];if(we.getChild(Pe))throw Ae(N,"symlink",W,X);var Ue=we.createChild(Pe);return Ue.getNode().makeSymlink(Et(W)),Ue},pe.prototype.symlinkSync=function(W,X,ae){var we=je(W),Pe=je(X);this.symlinkBase(we,Pe)},pe.prototype.symlink=function(W,X,ae,we){var Pe=Te(typeof ae=="function"?ae:we),Ue=je(W),Ye=je(X);this.wrapAsync(this.symlinkBase,[Ue,Ye],Pe)},pe.prototype.realpathBase=function(W,X){var ae=Et(W),we=this.getResolvedLink(ae);if(!we)throw Ae(M,"realpath",W);return(0,m.strToEncoding)(we.getPath()||"/",X)},pe.prototype.realpathSync=function(W,X){return this.realpathBase(je(W),_e(X).encoding)},pe.prototype.realpath=function(W,X,ae){var we=Re(X,ae),Pe=we[0],Ue=we[1],Ye=je(W);this.wrapAsync(this.realpathBase,[Ye,Pe.encoding],Ue)},pe.prototype.lstatBase=function(W,X,ae){X===void 0&&(X=!1),ae===void 0&&(ae=!1);var we=this.getLink(Et(W));if(we)return i.default.build(we.getNode(),X);if(ae)throw Ae(M,"lstat",W)},pe.prototype.lstatSync=function(W,X){var ae=he(X),we=ae.throwIfNoEntry,Pe=we===void 0?!0:we,Ue=ae.bigint,Ye=Ue===void 0?!1:Ue;return this.lstatBase(je(W),Ye,Pe)},pe.prototype.lstat=function(W,X,ae){var we=ye(X,ae),Pe=we[0],Ue=Pe.throwIfNoEntry,Ye=Ue===void 0?!0:Ue,rt=Pe.bigint,ot=rt===void 0?!1:rt,yt=we[1];this.wrapAsync(this.lstatBase,[je(W),ot,Ye],yt)},pe.prototype.statBase=function(W,X,ae){X===void 0&&(X=!1),ae===void 0&&(ae=!0);var we=this.getResolvedLink(Et(W));if(we)return i.default.build(we.getNode(),X);if(ae)throw Ae(M,"stat",W)},pe.prototype.statSync=function(W,X){var ae=he(X),we=ae.bigint,Pe=we===void 0?!0:we,Ue=ae.throwIfNoEntry,Ye=Ue===void 0?!0:Ue;return this.statBase(je(W),Pe,Ye)},pe.prototype.stat=function(W,X,ae){var we=ye(X,ae),Pe=we[0],Ue=Pe.bigint,Ye=Ue===void 0?!1:Ue,rt=Pe.throwIfNoEntry,ot=rt===void 0?!0:rt,yt=we[1];this.wrapAsync(this.statBase,[je(W),Ye,ot],yt)},pe.prototype.fstatBase=function(W,X){X===void 0&&(X=!1);var ae=this.getFileByFd(W);if(!ae)throw Ae(G,"fstat");return i.default.build(ae.node,X)},pe.prototype.fstatSync=function(W,X){return this.fstatBase(W,he(X).bigint)},pe.prototype.fstat=function(W,X,ae){var we=ye(X,ae),Pe=we[0],Ue=we[1];this.wrapAsync(this.fstatBase,[W,Pe.bigint],Ue)},pe.prototype.renameBase=function(W,X){var ae=this.getLink(Et(W));if(!ae)throw Ae(M,"rename",W,X);var we=Et(X),Pe=this.getLinkParent(we);if(!Pe)throw Ae(M,"rename",W,X);var Ue=ae.parent;Ue&&Ue.deleteChild(ae);var Ye=we[we.length-1];ae.name=Ye,ae.steps=e(e([],Pe.steps,!0),[Ye],!1),Pe.setChild(ae.getName(),ae)},pe.prototype.renameSync=function(W,X){var ae=je(W),we=je(X);this.renameBase(ae,we)},pe.prototype.rename=function(W,X,ae){var we=je(W),Pe=je(X);this.wrapAsync(this.renameBase,[we,Pe],ae)},pe.prototype.existsBase=function(W){return!!this.statBase(W)},pe.prototype.existsSync=function(W){try{return this.existsBase(je(W))}catch{return!1}},pe.prototype.exists=function(W,X){var ae=this,we=je(W);if(typeof X!="function")throw Error(L.CB);(0,a.default)(function(){try{X(ae.existsBase(we))}catch{X(!1)}})},pe.prototype.accessBase=function(W,X){this.getLinkOrThrow(W,"access")},pe.prototype.accessSync=function(W,X){X===void 0&&(X=ie);var ae=je(W);X=X|0,this.accessBase(ae,X)},pe.prototype.access=function(W,X,ae){var we=ie,Pe;typeof X!="function"?(we=X|0,Pe=Te(ae)):Pe=X;var Ue=je(W);this.wrapAsync(this.accessBase,[Ue,we],Pe)},pe.prototype.appendFileSync=function(W,X,ae){ae===void 0&&(ae=C);var we=oe(ae);(!we.flag||Yt(W))&&(we.flag="a"),this.writeFileSync(W,X,we)},pe.prototype.appendFile=function(W,X,ae,we){var Pe=ce(ae,we),Ue=Pe[0],Ye=Pe[1];(!Ue.flag||Yt(W))&&(Ue.flag="a"),this.writeFile(W,X,Ue,Ye)},pe.prototype.readdirBase=function(W,X){var ae=Et(W),we=this.getResolvedLink(ae);if(!we)throw Ae(M,"readdir",W);var Pe=we.getNode();if(!Pe.isDirectory())throw Ae(F,"scandir",W);if(X.withFileTypes){var Ue=[];for(var Ye in we.children){var rt=we.getChild(Ye);!rt||Ye==="."||Ye===".."||Ue.push(o.default.build(rt,X.encoding))}return!ee&&X.encoding!=="buffer"&&Ue.sort(function(Lt,en){return Lt.name<en.name?-1:Lt.name>en.name?1:0}),Ue}var ot=[];for(var yt in we.children)yt==="."||yt===".."||ot.push((0,m.strToEncoding)(yt,X.encoding));return!ee&&X.encoding!=="buffer"&&ot.sort(),ot},pe.prototype.readdirSync=function(W,X){var ae=Ie(X),we=je(W);return this.readdirBase(we,ae)},pe.prototype.readdir=function(W,X,ae){var we=Fe(X,ae),Pe=we[0],Ue=we[1],Ye=je(W);this.wrapAsync(this.readdirBase,[Ye,Pe],Ue)},pe.prototype.readlinkBase=function(W,X){var ae=this.getLinkOrThrow(W,"readlink"),we=ae.getNode();if(!we.isSymlink())throw Ae(ne,"readlink",W);var Pe=Ee+we.symlink.join(Ee);return(0,m.strToEncoding)(Pe,X)},pe.prototype.readlinkSync=function(W,X){var ae=We(X),we=je(W);return this.readlinkBase(we,ae.encoding)},pe.prototype.readlink=function(W,X,ae){var we=x(X,ae),Pe=we[0],Ue=we[1],Ye=je(W);this.wrapAsync(this.readlinkBase,[Ye,Pe.encoding],Ue)},pe.prototype.fsyncBase=function(W){this.getFileByFdOrThrow(W,"fsync")},pe.prototype.fsyncSync=function(W){this.fsyncBase(W)},pe.prototype.fsync=function(W,X){this.wrapAsync(this.fsyncBase,[W],X)},pe.prototype.fdatasyncBase=function(W){this.getFileByFdOrThrow(W,"fdatasync")},pe.prototype.fdatasyncSync=function(W){this.fdatasyncBase(W)},pe.prototype.fdatasync=function(W,X){this.wrapAsync(this.fdatasyncBase,[W],X)},pe.prototype.ftruncateBase=function(W,X){var ae=this.getFileByFdOrThrow(W,"ftruncate");ae.truncate(X)},pe.prototype.ftruncateSync=function(W,X){this.ftruncateBase(W,X)},pe.prototype.ftruncate=function(W,X,ae){var we=typeof X=="number"?X:0,Pe=Te(typeof X=="number"?ae:X);this.wrapAsync(this.ftruncateBase,[W,we],Pe)},pe.prototype.truncateBase=function(W,X){var ae=this.openSync(W,"r+");try{this.ftruncateSync(ae,X)}finally{this.closeSync(ae)}},pe.prototype.truncateSync=function(W,X){if(Yt(W))return this.ftruncateSync(W,X);this.truncateBase(W,X)},pe.prototype.truncate=function(W,X,ae){var we=typeof X=="number"?X:0,Pe=Te(typeof X=="number"?ae:X);if(Yt(W))return this.ftruncate(W,we,Pe);this.wrapAsync(this.truncateBase,[W,we],Pe)},pe.prototype.futimesBase=function(W,X,ae){var we=this.getFileByFdOrThrow(W,"futimes"),Pe=we.node;Pe.atime=new Date(X*1e3),Pe.mtime=new Date(ae*1e3)},pe.prototype.futimesSync=function(W,X,ae){this.futimesBase(W,Jr(X),Jr(ae))},pe.prototype.futimes=function(W,X,ae,we){this.wrapAsync(this.futimesBase,[W,Jr(X),Jr(ae)],we)},pe.prototype.utimesBase=function(W,X,ae){var we=this.openSync(W,"r");try{this.futimesBase(we,X,ae)}finally{this.closeSync(we)}},pe.prototype.utimesSync=function(W,X,ae){this.utimesBase(je(W),Jr(X),Jr(ae))},pe.prototype.utimes=function(W,X,ae,we){this.wrapAsync(this.utimesBase,[je(W),Jr(X),Jr(ae)],we)},pe.prototype.mkdirBase=function(W,X){var ae=Et(W);if(!ae.length)throw Ae(N,"mkdir",W);var we=this.getLinkParentAsDirOrThrow(W,"mkdir"),Pe=ae[ae.length-1];if(we.getChild(Pe))throw Ae(N,"mkdir",W);we.createChild(Pe,this.createNode(!0,X))},pe.prototype.mkdirpBase=function(W,X){for(var ae=Qe(W),we=ae.substring(1),Pe=we?we.split(Ee):[],Ue=this.root,Ye=!1,rt=0;rt<Pe.length;rt++){var ot=Pe[rt];if(!Ue.getNode().isDirectory())throw Ae(F,"mkdir",Ue.getPath());var yt=Ue.getChild(ot);if(yt)if(yt.getNode().isDirectory())Ue=yt;else throw Ae(F,"mkdir",yt.getPath());else Ue=Ue.createChild(ot,this.createNode(!0,X)),Ye=!0}return Ye?ae:void 0},pe.prototype.mkdirSync=function(W,X){var ae=Be(X),we=Wt(ae.mode,511),Pe=je(W);if(ae.recursive)return this.mkdirpBase(Pe,we);this.mkdirBase(Pe,we)},pe.prototype.mkdir=function(W,X,ae){var we=Be(X),Pe=Te(typeof X=="function"?X:ae),Ue=Wt(we.mode,511),Ye=je(W);we.recursive?this.wrapAsync(this.mkdirpBase,[Ye,Ue],Pe):this.wrapAsync(this.mkdirBase,[Ye,Ue],Pe)},pe.prototype.mkdirpSync=function(W,X){return this.mkdirSync(W,{mode:X,recursive:!0})},pe.prototype.mkdirp=function(W,X,ae){var we=typeof X=="function"?void 0:X,Pe=Te(typeof X=="function"?X:ae);this.mkdir(W,{mode:we,recursive:!0},Pe)},pe.prototype.mkdtempBase=function(W,X,ae){ae===void 0&&(ae=5);var we=W+this.genRndStr();try{return this.mkdirBase(we,511),(0,m.strToEncoding)(we,X)}catch(Pe){if(Pe.code===N){if(ae>1)return this.mkdtempBase(W,X,ae-1);throw Error("Could not create temp dir.")}else throw Pe}},pe.prototype.mkdtempSync=function(W,X){var ae=We(X).encoding;if(!W||typeof W!="string")throw new TypeError("filename prefix is required");return Dr(W),this.mkdtempBase(W,ae)},pe.prototype.mkdtemp=function(W,X,ae){var we=x(X,ae),Pe=we[0].encoding,Ue=we[1];if(!W||typeof W!="string")throw new TypeError("filename prefix is required");Dr(W)&&this.wrapAsync(this.mkdtempBase,[W,Pe],Ue)},pe.prototype.rmdirBase=function(W,X){var ae=O(X),we=this.getLinkAsDirOrThrow(W,"rmdir");if(we.length&&!ae.recursive)throw Ae(I,"rmdir",W);this.deleteLink(we)},pe.prototype.rmdirSync=function(W,X){this.rmdirBase(je(W),X)},pe.prototype.rmdir=function(W,X,ae){var we=O(X),Pe=Te(typeof X=="function"?X:ae);this.wrapAsync(this.rmdirBase,[je(W),we],Pe)},pe.prototype.rmBase=function(W,X){X===void 0&&(X={});var ae=this.getResolvedLink(W);if(!ae){if(!X.force)throw Ae(M,"stat",W);return}if(ae.getNode().isDirectory()&&!X.recursive)throw Ae(ue,"rm",W);this.deleteLink(ae)},pe.prototype.rmSync=function(W,X){this.rmBase(je(W),X)},pe.prototype.rm=function(W,X,ae){var we=$e(X,ae),Pe=we[0],Ue=we[1];this.wrapAsync(this.rmBase,[je(W),Pe],Ue)},pe.prototype.fchmodBase=function(W,X){var ae=this.getFileByFdOrThrow(W,"fchmod");ae.chmod(X)},pe.prototype.fchmodSync=function(W,X){this.fchmodBase(W,Wt(X))},pe.prototype.fchmod=function(W,X,ae){this.wrapAsync(this.fchmodBase,[W,Wt(X)],ae)},pe.prototype.chmodBase=function(W,X){var ae=this.openSync(W,"r");try{this.fchmodBase(ae,X)}finally{this.closeSync(ae)}},pe.prototype.chmodSync=function(W,X){var ae=Wt(X),we=je(W);this.chmodBase(we,ae)},pe.prototype.chmod=function(W,X,ae){var we=Wt(X),Pe=je(W);this.wrapAsync(this.chmodBase,[Pe,we],ae)},pe.prototype.lchmodBase=function(W,X){var ae=this.openBase(W,S,0,!1);try{this.fchmodBase(ae,X)}finally{this.closeSync(ae)}},pe.prototype.lchmodSync=function(W,X){var ae=Wt(X),we=je(W);this.lchmodBase(we,ae)},pe.prototype.lchmod=function(W,X,ae){var we=Wt(X),Pe=je(W);this.wrapAsync(this.lchmodBase,[Pe,we],ae)},pe.prototype.fchownBase=function(W,X,ae){this.getFileByFdOrThrow(W,"fchown").chown(X,ae)},pe.prototype.fchownSync=function(W,X,ae){Qr(X),Mf(ae),this.fchownBase(W,X,ae)},pe.prototype.fchown=function(W,X,ae,we){Qr(X),Mf(ae),this.wrapAsync(this.fchownBase,[W,X,ae],we)},pe.prototype.chownBase=function(W,X,ae){var we=this.getResolvedLinkOrThrow(W,"chown"),Pe=we.getNode();Pe.chown(X,ae)},pe.prototype.chownSync=function(W,X,ae){Qr(X),Mf(ae),this.chownBase(je(W),X,ae)},pe.prototype.chown=function(W,X,ae,we){Qr(X),Mf(ae),this.wrapAsync(this.chownBase,[je(W),X,ae],we)},pe.prototype.lchownBase=function(W,X,ae){this.getLinkOrThrow(W,"lchown").getNode().chown(X,ae)},pe.prototype.lchownSync=function(W,X,ae){Qr(X),Mf(ae),this.lchownBase(je(W),X,ae)},pe.prototype.lchown=function(W,X,ae,we){Qr(X),Mf(ae),this.wrapAsync(this.lchownBase,[je(W),X,ae],we)},pe.prototype.watchFile=function(W,X,ae){var we=je(W),Pe=X,Ue=ae;if(typeof Pe=="function"&&(Ue=X,Pe=null),typeof Ue!="function")throw Error('"watchFile()" requires a listener function');var Ye=5007,rt=!0;Pe&&typeof Pe=="object"&&(typeof Pe.interval=="number"&&(Ye=Pe.interval),typeof Pe.persistent=="boolean"&&(rt=Pe.persistent));var ot=this.statWatchers[we];return ot||(ot=new this.StatWatcher,ot.start(we,rt,Ye),this.statWatchers[we]=ot),ot.addListener("change",Ue),ot},pe.prototype.unwatchFile=function(W,X){var ae=je(W),we=this.statWatchers[ae];we&&(typeof X=="function"?we.removeListener("change",X):we.removeAllListeners("change"),we.listenerCount("change")===0&&(we.stop(),delete this.statWatchers[ae]))},pe.prototype.createReadStream=function(W,X){return new this.ReadStream(W,X)},pe.prototype.createWriteStream=function(W,X){return new this.WriteStream(W,X)},pe.prototype.watch=function(W,X,ae){var we=je(W),Pe=X;typeof X=="function"&&(ae=X,Pe=null);var Ue=We(Pe),Ye=Ue.persistent,rt=Ue.recursive,ot=Ue.encoding;Ye===void 0&&(Ye=!0),rt===void 0&&(rt=!1);var yt=new this.FSWatcher;return yt.start(we,Ye,rt,ot),ae&&yt.addListener("change",ae),yt},pe.fd=2147483647,pe})();Ft.Volume=P3;function M3(pe){pe.emit("stop")}var NT=(function(pe){r(W,pe);function W(X){var ae=pe.call(this)||this;return ae.onInterval=function(){try{var we=ae.vol.statSync(ae.filename);ae.hasChanged(we)&&(ae.emit("change",we,ae.prev),ae.prev=we)}finally{ae.loop()}},ae.vol=X,ae}return W.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},W.prototype.hasChanged=function(X){return X.mtimeMs>this.prev.mtimeMs||X.nlink!==this.prev.nlink},W.prototype.start=function(X,ae,we){ae===void 0&&(ae=!0),we===void 0&&(we=5007),this.filename=je(X),this.setTimeout=ae?setTimeout.bind(typeof globalThis<"u"?globalThis:qU):c.default,this.interval=we,this.prev=this.vol.statSync(this.filename),this.loop()},W.prototype.stop=function(){clearTimeout(this.timeoutRef),u.default.nextTick(M3,this)},W})(d.EventEmitter);Ft.StatWatcher=NT;var Ji;function B3(pe){Ji=(0,s.bufferAllocUnsafe)(pe),Ji.used=0}v.inherits(Ks,f.Readable),Ft.ReadStream=Ks;function Ks(pe,W,X){if(!(this instanceof Ks))return new Ks(pe,W,X);if(this._vol=pe,X=Object.assign({},Le(X,{})),X.highWaterMark===void 0&&(X.highWaterMark=64*1024),f.Readable.call(this,X),this.path=je(W),this.fd=X.fd===void 0?null:X.fd,this.flags=X.flags===void 0?"r":X.flags,this.mode=X.mode===void 0?438:X.mode,this.start=X.start,this.end=X.end,this.autoClose=X.autoClose===void 0?!0:X.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}Ks.prototype.open=function(){var pe=this;this._vol.open(this.path,this.flags,this.mode,function(W,X){if(W){pe.autoClose&&pe.destroy&&pe.destroy(),pe.emit("error",W);return}pe.fd=X,pe.emit("open",X),pe.read()})},Ks.prototype._read=function(pe){if(typeof this.fd!="number")return this.once("open",function(){this._read(pe)});if(this.destroyed)return;(!Ji||Ji.length-Ji.used<B)&&B3(this._readableState.highWaterMark);var W=Ji,X=Math.min(Ji.length-Ji.used,pe),ae=Ji.used;if(this.pos!==void 0&&(X=Math.min(this.end-this.pos+1,X)),X<=0)return this.push(null);var we=this;this._vol.read(this.fd,Ji,Ji.used,X,this.pos,Pe),this.pos!==void 0&&(this.pos+=X),Ji.used+=X;function Pe(Ue,Ye){if(Ue)we.autoClose&&we.destroy&&we.destroy(),we.emit("error",Ue);else{var rt=null;Ye>0&&(we.bytesRead+=Ye,rt=W.slice(ae,ae+Ye)),we.push(rt)}}},Ks.prototype._destroy=function(pe,W){this.close(function(X){W(pe||X)})},Ks.prototype.close=function(pe){var W=this,X;if(pe&&this.once("close",pe),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",kT);return}return u.default.nextTick(function(){return W.emit("close")})}typeof((X=this._readableState)===null||X===void 0?void 0:X.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(ae){ae?W.emit("error",ae):W.emit("close")}),this.fd=null};function kT(pe){this.close()}v.inherits(Qi,f.Writable),Ft.WriteStream=Qi;function Qi(pe,W,X){if(!(this instanceof Qi))return new Qi(pe,W,X);if(this._vol=pe,X=Object.assign({},Le(X,{})),f.Writable.call(this,X),this.path=je(W),this.fd=X.fd===void 0?null:X.fd,this.flags=X.flags===void 0?"w":X.flags,this.mode=X.mode===void 0?438:X.mode,this.start=X.start,this.autoClose=X.autoClose===void 0?!0:!!X.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}X.encoding&&this.setDefaultEncoding(X.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}Qi.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(pe,W){if(pe){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",pe);return}this.fd=W,this.emit("open",W)}.bind(this))},Qi.prototype._write=function(pe,W,X){if(!(pe instanceof s.Buffer||pe instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(pe,W,X)});var ae=this;this._vol.write(this.fd,pe,0,pe.length,this.pos,function(we,Pe){if(we)return ae.autoClose&&ae.destroy&&ae.destroy(),X(we);ae.bytesWritten+=Pe,X()}),this.pos!==void 0&&(this.pos+=pe.length)},Qi.prototype._writev=function(pe,W){if(typeof this.fd!="number")return this.once("open",function(){this._writev(pe,W)});for(var X=this,ae=pe.length,we=new Array(ae),Pe=0,Ue=0;Ue<ae;Ue++){var Ye=pe[Ue].chunk;we[Ue]=Ye,Pe+=Ye.length}var rt=s.Buffer.concat(we);this._vol.write(this.fd,rt,0,rt.length,this.pos,function(ot,yt){if(ot)return X.destroy&&X.destroy(),W(ot);X.bytesWritten+=yt,W()}),this.pos!==void 0&&(this.pos+=Pe)},Qi.prototype.close=function(pe){var W=this,X;if(pe&&this.once("close",pe),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",kT);return}return u.default.nextTick(function(){return W.emit("close")})}typeof((X=this._writableState)===null||X===void 0?void 0:X.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(ae){ae?W.emit("error",ae):W.emit("close")}),this.fd=null},Qi.prototype._destroy=Ks.prototype._destroy,Qi.prototype.destroySoon=Qi.prototype.end;var LT=(function(pe){r(W,pe);function W(X){var ae=pe.call(this)||this;return ae._filename="",ae._filenameEncoded="",ae._recursive=!1,ae._encoding=m.ENCODING_UTF8,ae._listenerRemovers=new Map,ae._onParentChild=function(we){we.getName()===ae._getName()&&ae._emit("rename")},ae._emit=function(we){ae.emit("change",we,ae._filenameEncoded)},ae._persist=function(){ae._timer=setTimeout(ae._persist,1e6)},ae._vol=X,ae}return W.prototype._getName=function(){return this._steps[this._steps.length-1]},W.prototype.start=function(X,ae,we,Pe){var Ue=this;ae===void 0&&(ae=!0),we===void 0&&(we=!1),Pe===void 0&&(Pe=m.ENCODING_UTF8),this._filename=je(X),this._steps=Et(this._filename),this._filenameEncoded=(0,m.strToEncoding)(this._filename),this._recursive=we,this._encoding=Pe;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(Lt){var Ye=new Error("watch ".concat(this._filename," ").concat(Lt.code));throw Ye.code=Lt.code,Ye.errno=Lt.code,Ye}var rt=function(Lt){var en,Eu=Lt.getPath(),Zs=Lt.getNode(),sl=function(){var jr=ve(Ue._filename,Eu);return jr||(jr=Ue._getName()),Ue.emit("change","change",jr)};Zs.on("change",sl);var Au=(en=Ue._listenerRemovers.get(Zs.ino))!==null&&en!==void 0?en:[];Au.push(function(){return Zs.removeListener("change",sl)}),Ue._listenerRemovers.set(Zs.ino,Au)},ot=function(Lt){var en,Eu=Lt.getNode(),Zs=function(jr){Ue.emit("change","rename",ve(Ue._filename,jr.getPath())),setTimeout(function(){rt(jr),ot(jr)})},sl=function(jr){var es=function(Ss){var d0=Ss.getNode().ino,PT=Ue._listenerRemovers.get(d0);PT&&(PT.forEach(function(p0){return p0()}),Ue._listenerRemovers.delete(d0)),Object.values(Ss.children).forEach(function(p0){p0&&es(p0)})};es(jr),Ue.emit("change","rename",ve(Ue._filename,jr.getPath()))};Object.entries(Lt.children).forEach(function(jr){var es=jr[0],Ss=jr[1];Ss&&es!=="."&&es!==".."&&rt(Ss)}),Lt.on("child:add",Zs),Lt.on("child:delete",sl);var Au=(en=Ue._listenerRemovers.get(Eu.ino))!==null&&en!==void 0?en:[];Au.push(function(){Lt.removeListener("child:add",Zs),Lt.removeListener("child:delete",sl)}),we&&Object.entries(Lt.children).forEach(function(jr){var es=jr[0],Ss=jr[1];Ss&&es!=="."&&es!==".."&&ot(Ss)})};rt(this._link),ot(this._link);var yt=this._link.parent;yt&&(yt.setMaxListeners(yt.getMaxListeners()+1),yt.on("child:delete",this._onParentChild)),ae&&this._persist()},W.prototype.close=function(){clearTimeout(this._timer),this._listenerRemovers.forEach(function(ae){ae.forEach(function(we){return we()})}),this._listenerRemovers.clear();var X=this._link.parent;X&&X.removeListener("child:delete",this._onParentChild)},W})(d.EventEmitter);return Ft.FSWatcher=LT,Ft}function HU(){return VO||(VO=!0,Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.fsSyncMethods=Zo.fsProps=Zo.fsAsyncMethods=void 0,Zo.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],Zo.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","rmSync","createReadStream","createWriteStream"],Zo.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","rm","watchFile","unwatchFile","watch"]),Zo}function GU(){if(YO)return dn;YO=!0;var r=dn&&dn.__assign||function(){return r=Object.assign||function(m){for(var b,v=1,w=arguments.length;v<w;v++){b=arguments[v];for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(m[y]=b[y])}return m},r.apply(this,arguments)};Object.defineProperty(dn,"__esModule",{value:!0}),dn.fs=dn.createFsFromVolume=dn.vol=dn.Volume=void 0;var e=_2(),t=ZO(),n=eN(),i=HU(),o=i.fsSyncMethods,s=i.fsAsyncMethods,a=qp(),u=a.constants.F_OK,c=a.constants.R_OK,f=a.constants.W_OK,h=a.constants.X_OK;dn.Volume=n.Volume,dn.vol=new n.Volume;function d(m){for(var b={F_OK:u,R_OK:c,W_OK:f,X_OK:h,constants:a.constants,Stats:e.default,Dirent:t.default},v=0,w=o;v<w.length;v++){var y=w[v];typeof m[y]=="function"&&(b[y]=m[y].bind(m))}for(var _=0,E=s;_<E.length;_++){var y=E[_];typeof m[y]=="function"&&(b[y]=m[y].bind(m))}return b.StatWatcher=m.StatWatcher,b.FSWatcher=m.FSWatcher,b.WriteStream=m.WriteStream,b.ReadStream=m.ReadStream,b.promises=m.promises,b._toUnixTimestamp=n.toUnixTimestamp,b}return dn.createFsFromVolume=d,dn.fs=d(dn.vol),dn=r(r({},dn),dn.fs),dn.semantic=!0,dn}function Si(r){throw new Error(`Node.js fs ${r} is not supported by JSPM core in the browser`)}function tN(r,e,t){let n=0,i=new TextDecoder;Jo.watch(r,"utf8",()=>{let{size:o}=Jo.fstatSync(e),s=Buffer.alloc(o-n);Jo.readSync(e,s,0,s.length,n),n=o,t(i.decode(s,{stream:!0}))})}function A2(r,e){if(r.protocol==="file:")return v2(r);if(r.protocol==="https:"||r.protocol==="http:"){let t="\\\\url\\"+r.href.replaceAll(/\//g,"\\\\");if(sb(t))return t;if(e)throw new Error(`Cannot sync request URL ${r} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{let n=await fetch(r);if(!n.ok)throw new Error(`Unable to fetch ${r.href}, ${n.status}`);let i=await n.arrayBuffer();return rN(t,Buffer.from(i)),t})()}throw new Error("URL "+r+" not supported in JSPM FS implementation.")}function YU(r){return function(e,...t){return e instanceof URL?r(A2(e,!0),...t):r(e,...t)}}function XU(r){return async function(e,...t){return e instanceof URL?r(await A2(e),...t):r(e,...t)}}function KU(r){return function(e,...t){let n=t[t.length-1];e instanceof URL&&typeof n=="function"?A2(e).then(i=>{r(i,...t)},n):r(e,...t)}}var zp,NO,rb,kO,eh,LO,Rs,PO,sn,MO,FU,ro,BO,th,FO,nb,UO,jO,rh,$O,oi,zO,ib,WO,jU,pl,qO,Wp,HO,Ft,GO,qU,Zo,VO,dn,YO,Gu,Gn,Jo,VU,br,ZU,JU,QU,ej,tj,rj,nj,ij,sj,oj,aj,lj,uj,cj,fj,hj,dj,sb,pj,gj,mj,yj,bj,wj,vj,_j,Ej,Aj,xj,Sj,Tj,Cj,Rj,Dj,Ij,Oj,Nj,kj,Lj,x2,Pj,Mj,Bj,Fj,Uj,jj,$j,zj,Wj,qj,Hj,Gj,Vj,Yj,Xj,S2,Kj,Zj,Jj,Qj,e$,t$,r$,n$,i$,s$,o$,a$,l$,u$,c$,f$,h$,d$,p$,g$,m$,y$,b$,w$,rN,v$,_$,E$,A$,x$,S$,T$,C$,R$,D$,I$,O$,N$,k$,L$,P$,M$,B$,Gp=Jt(()=>{Oe();ke();Ne();Ff();z_();W0();cl();VD();qf();Bu();G0();Xf();LE();ll();OO();eb();ME();$p();u2();zp={},NO=!1;rb={},kO=!1;eh={},LO=!1;Rs={},PO=!1;sn={},MO=!1,FU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ro={},BO=!1;th={},FO=!1;rn._makeLong;rn.basename;rn.delimiter;rn.dirname;rn.extname;rn.format;rn.isAbsolute;rn.join;rn.normalize;rn.parse;rn.posix;rn.relative;rn.resolve;rn.sep;rn.win32;nb={},UO=!1,jO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;rh={},$O=!1;oi={},zO=!1;ib={},WO=!1,jU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pl={},qO=!1;Wp={},HO=!1;Ft={},GO=!1,qU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Zo={},VO=!1;dn={},YO=!1;Gu=GU();Gu.__esModule;Gu.fs;Gu.createFsFromVolume;Gu.vol;Gu.Volume;Gu.semantic;Gn=eN();Gn.__esModule;Gn.FSWatcher;Gn.StatWatcher;Gn.Volume;Gn.toUnixTimestamp;Gn.bufferToEncoding;Gn.dataToBuffer;Gn.dataToStr;Gn.pathToSteps;Gn.filenameToSteps;Gn.pathToFilename;Gn.flagsToNumber;Gn.FLAGS;Gn.ReadStream;Gn.WriteStream;({vol:Jo,createFsFromVolume:VU}=Gu);Jo.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},"/tmp":{}});Jo.releasedFds=[2,1,0];Jo.openSync("/dev/stdin","w");Jo.openSync("/dev/stdout","r");Jo.openSync("/dev/stderr","r");tN("/dev/stdout",1,console.log);tN("/dev/stderr",2,console.error);br=VU(Jo);br.opendir=()=>Si("opendir");br.opendirSync=()=>Si("opendirSync");br.promises.opendir=()=>Si("promises.opendir");br.cp=()=>Si("cp");br.cpSync=()=>Si("cpSync");br.promises.cp=()=>Si("promises.cp");br.readv=()=>Si("readv");br.readvSync=()=>Si("readvSync");br.rm=()=>Si("rm");br.rmSync=()=>Si("rmSync");br.promises.rm=()=>Si("promises.rm");br.Dir=()=>Si("Dir");br.promises.watch=()=>Si("promises.watch");br.FileReadStream=br.ReadStream;br.FileWriteStream=br.WriteStream;br.promises.readFile=XU(br.promises.readFile);br.readFile=KU(br.readFile);br.readFileSync=YU(br.readFileSync);({appendFile:ZU,appendFileSync:JU,access:QU,accessSync:ej,chown:tj,chownSync:rj,chmod:nj,chmodSync:ij,close:sj,closeSync:oj,copyFile:aj,copyFileSync:lj,cp:uj,cpSync:cj,createReadStream:fj,createWriteStream:hj,exists:dj,existsSync:sb,fchown:pj,fchownSync:gj,fchmod:mj,fchmodSync:yj,fdatasync:bj,fdatasyncSync:wj,fstat:vj,fstatSync:_j,fsync:Ej,fsyncSync:Aj,ftruncate:xj,ftruncateSync:Sj,futimes:Tj,futimesSync:Cj,lchown:Rj,lchownSync:Dj,lchmod:Ij,lchmodSync:Oj,link:Nj,linkSync:kj,lstat:Lj,lstatSync:x2,mkdir:Pj,mkdirSync:Mj,mkdtemp:Bj,mkdtempSync:Fj,open:Uj,openSync:jj,opendir:$j,opendirSync:zj,readdir:Wj,readdirSync:qj,read:Hj,readSync:Gj,readv:Vj,readvSync:Yj,readFile:Xj,readFileSync:S2,readlink:Kj,readlinkSync:Zj,realpath:Jj,realpathSync:Qj,rename:e$,renameSync:t$,rm:r$,rmSync:n$,rmdir:i$,rmdirSync:s$,stat:o$,statSync:a$,symlink:l$,symlinkSync:u$,truncate:c$,truncateSync:f$,unwatchFile:h$,unlink:d$,unlinkSync:p$,utimes:g$,utimesSync:m$,watch:y$,watchFile:b$,writeFile:w$,writeFileSync:rN,write:v$,writeSync:_$,writev:E$,writevSync:A$,Dir:x$,Dirent:S$,Stats:T$,ReadStream:C$,WriteStream:R$,FileReadStream:D$,FileWriteStream:I$,_toUnixTimestamp:O$,constants:{F_OK:N$,R_OK:k$,W_OK:L$,X_OK:P$},constants:M$,promises:B$}=br)});var T2=st(Vr=>{"use strict";Oe();ke();Ne();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.readFile=Vr.writeFileSync=Vr.writeFile=Vr.read=Vr.open=Vr.close=Vr.stat=Vr.createReadStream=Vr.pathExists=void 0;var Qo=(Gp(),Ir(Hp));Vr.pathExists=Qo.existsSync;Vr.createReadStream=Qo.createReadStream;async function F$(r){return new Promise((e,t)=>{Qo.stat(r,(n,i)=>{n?t(n):e(i)})})}Vr.stat=F$;async function U$(r){return new Promise((e,t)=>{Qo.close(r,n=>{n?t(n):e()})})}Vr.close=U$;async function j$(r,e){return new Promise((t,n)=>{Qo.open(r,e,(i,o)=>{i?n(i):t(o)})})}Vr.open=j$;async function $$(r,e,t,n,i){return new Promise((o,s)=>{Qo.read(r,e,t,n,i,(a,u,c)=>{a?s(a):o({bytesRead:u,buffer:c})})})}Vr.read=$$;async function z$(r,e){return new Promise((t,n)=>{Qo.writeFile(r,e,i=>{i?n(i):t()})})}Vr.writeFile=z$;function W$(r,e){Qo.writeFileSync(r,e)}Vr.writeFileSync=W$;async function q$(r){return new Promise((e,t)=>{Qo.readFile(r,(n,i)=>{n?t(n):e(i)})})}Vr.readFile=q$});var ob=st(Vu=>{"use strict";Oe();ke();Ne();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.EndOfStreamError=Vu.defaultMessages=void 0;Vu.defaultMessages="End-Of-Stream";var C2=class extends Error{constructor(){super(Vu.defaultMessages)}};Vu.EndOfStreamError=C2});var nN=st(ab=>{"use strict";Oe();ke();Ne();Object.defineProperty(ab,"__esModule",{value:!0});ab.Deferred=void 0;var R2=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((e,t)=>{this.reject=t,this.resolve=e})}};ab.Deferred=R2});var sN=st(nh=>{"use strict";Oe();ke();Ne();Object.defineProperty(nh,"__esModule",{value:!0});nh.StreamReader=nh.EndOfStreamError=void 0;var iN=ob(),H$=nN(),G$=ob();Object.defineProperty(nh,"EndOfStreamError",{enumerable:!0,get:function(){return G$.EndOfStreamError}});var V$=1*1024*1024,D2=class{constructor(e){if(this.s=e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!e.read||!e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new iN.EndOfStreamError)),this.s.once("error",t=>this.reject(t)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(e,t,n){let i=await this.read(e,t,n);return this.peekQueue.push(e.subarray(t,t+i)),i}async read(e,t,n){if(n===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new iN.EndOfStreamError;let i=n,o=0;for(;this.peekQueue.length>0&&i>0;){let s=this.peekQueue.pop();if(!s)throw new Error("peekData should be defined");let a=Math.min(s.length,i);e.set(s.subarray(0,a),t+o),o+=a,i-=a,a<s.length&&this.peekQueue.push(s.subarray(a))}for(;i>0&&!this.endOfStream;){let s=Math.min(i,V$),a=await this.readFromStream(e,t+o,s);if(o+=a,a<s)break;i-=a}return o}async readFromStream(e,t,n){let i=this.s.read(n);if(i)return e.set(i,t),i.length;{let o={buffer:e,offset:t,length:n,deferred:new H$.Deferred};return this.deferred=o.deferred,this.s.once("readable",()=>{this.readDeferred(o)}),o.deferred.promise}}readDeferred(e){let t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(e)})}reject(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}};nh.StreamReader=D2});var sh=st(ih=>{"use strict";Oe();ke();Ne();Object.defineProperty(ih,"__esModule",{value:!0});ih.StreamReader=ih.EndOfStreamError=void 0;var Y$=ob();Object.defineProperty(ih,"EndOfStreamError",{enumerable:!0,get:function(){return Y$.EndOfStreamError}});var X$=sN();Object.defineProperty(ih,"StreamReader",{enumerable:!0,get:function(){return X$.StreamReader}})});var cb=st(ub=>{"use strict";Oe();ke();Ne();Object.defineProperty(ub,"__esModule",{value:!0});ub.AbstractTokenizer=void 0;var lb=sh(),I2=class{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}async readToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.readBuffer(n,{position:t})<e.len)throw new lb.EndOfStreamError;return e.get(n,0)}async peekToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.peekBuffer(n,{position:t})<e.len)throw new lb.EndOfStreamError;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new lb.EndOfStreamError;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new lb.EndOfStreamError;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){}normalizeOptions(e,t){if(t&&t.position!==void 0&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:t.mayBeLess===!0,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}};ub.AbstractTokenizer=I2});var oN=st(hb=>{"use strict";Oe();ke();Ne();Object.defineProperty(hb,"__esModule",{value:!0});hb.ReadStreamTokenizer=void 0;var K$=cb(),fb=sh(),Z$=256e3,O2=class extends K$.AbstractTokenizer{constructor(e,t){super(t),this.streamReader=new fb.StreamReader(e)}async getFileInfo(){return this.fileInfo}async readBuffer(e,t){let n=this.normalizeOptions(e,t),i=n.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,t);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;let o=await this.streamReader.read(e,n.offset,n.length);if(this.position+=o,(!t||!t.mayBeLess)&&o<n.length)throw new fb.EndOfStreamError;return o}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=0;if(n.position){let o=n.position-this.position;if(o>0){let s=new Uint8Array(n.length+o);return i=await this.peekBuffer(s,{mayBeLess:n.mayBeLess}),e.set(s.subarray(o),n.offset),i-o}else if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{i=await this.streamReader.peek(e,n.offset,n.length)}catch(o){if(t&&t.mayBeLess&&o instanceof fb.EndOfStreamError)return 0;throw o}if(!n.mayBeLess&&i<n.length)throw new fb.EndOfStreamError}return i}async ignore(e){let t=Math.min(Z$,e),n=new Uint8Array(t),i=0;for(;i<e;){let o=e-i,s=await this.readBuffer(n,{length:Math.min(t,o)});if(s<0)return s;i+=s}return i}};hb.ReadStreamTokenizer=O2});var aN=st(db=>{"use strict";Oe();ke();Ne();Object.defineProperty(db,"__esModule",{value:!0});db.BufferTokenizer=void 0;var J$=sh(),Q$=cb(),N2=class extends Q$.AbstractTokenizer{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,t){if(t&&t.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}let n=await this.peekBuffer(e,t);return this.position+=n,n}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&i<n.length)throw new J$.EndOfStreamError;return e.set(this.uint8Array.subarray(n.position,n.position+i),n.offset),i}async close(){}};db.BufferTokenizer=N2});var pb=st(gl=>{"use strict";Oe();ke();Ne();Object.defineProperty(gl,"__esModule",{value:!0});gl.fromBuffer=gl.fromStream=gl.EndOfStreamError=void 0;var e9=oN(),t9=aN(),r9=sh();Object.defineProperty(gl,"EndOfStreamError",{enumerable:!0,get:function(){return r9.EndOfStreamError}});function n9(r,e){return e=e||{},new e9.ReadStreamTokenizer(r,e)}gl.fromStream=n9;function i9(r,e){return new t9.BufferTokenizer(r,e)}gl.fromBuffer=i9});var uN=st(oh=>{"use strict";Oe();ke();Ne();Object.defineProperty(oh,"__esModule",{value:!0});oh.fromFile=oh.FileTokenizer=void 0;var s9=cb(),lN=sh(),Vp=T2(),gb=class extends s9.AbstractTokenizer{constructor(e,t){super(t),this.fd=e}async readBuffer(e,t){let n=this.normalizeOptions(e,t);this.position=n.position;let i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(this.position+=i.bytesRead,i.bytesRead<n.length&&(!t||!t.mayBeLess))throw new lN.EndOfStreamError;return i.bytesRead}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(!n.mayBeLess&&i.bytesRead<n.length)throw new lN.EndOfStreamError;return i.bytesRead}async close(){return Vp.close(this.fd)}};oh.FileTokenizer=gb;async function o9(r){let e=await Vp.stat(r);if(!e.isFile)throw new Error(`File not a file: ${r}`);let t=await Vp.open(r,"r");return new gb(t,{path:r,size:e.size})}oh.fromFile=o9});var fN=st(no=>{"use strict";Oe();ke();Ne();Object.defineProperty(no,"__esModule",{value:!0});no.fromStream=no.fromBuffer=no.EndOfStreamError=no.fromFile=void 0;var a9=T2(),l9=pb(),u9=uN();Object.defineProperty(no,"fromFile",{enumerable:!0,get:function(){return u9.fromFile}});var cN=pb();Object.defineProperty(no,"EndOfStreamError",{enumerable:!0,get:function(){return cN.EndOfStreamError}});Object.defineProperty(no,"fromBuffer",{enumerable:!0,get:function(){return cN.fromBuffer}});async function c9(r,e){if(e=e||{},r.path){let t=await a9.stat(r.path);e.path=r.path,e.size=t.size}return l9.fromStream(r,e)}no.fromStream=c9});var hN=st(k2=>{Oe();ke();Ne();k2.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)};k2.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128}});var dN=st(ct=>{"use strict";Oe();ke();Ne();Object.defineProperty(ct,"__esModule",{value:!0});ct.AnsiStringType=ct.StringType=ct.BufferType=ct.Uint8ArrayType=ct.IgnoreType=ct.Float80_LE=ct.Float80_BE=ct.Float64_LE=ct.Float64_BE=ct.Float32_LE=ct.Float32_BE=ct.Float16_LE=ct.Float16_BE=ct.INT64_BE=ct.UINT64_BE=ct.INT64_LE=ct.UINT64_LE=ct.INT32_LE=ct.INT32_BE=ct.INT24_BE=ct.INT24_LE=ct.INT16_LE=ct.INT16_BE=ct.INT8=ct.UINT32_BE=ct.UINT32_LE=ct.UINT24_BE=ct.UINT24_LE=ct.UINT16_BE=ct.UINT16_LE=ct.UINT8=void 0;var ml=hN();function xt(r){return new DataView(r.buffer,r.byteOffset)}ct.UINT8={len:1,get(r,e){return xt(r).getUint8(e)},put(r,e,t){return xt(r).setUint8(e,t),e+1}};ct.UINT16_LE={len:2,get(r,e){return xt(r).getUint16(e,!0)},put(r,e,t){return xt(r).setUint16(e,t,!0),e+2}};ct.UINT16_BE={len:2,get(r,e){return xt(r).getUint16(e)},put(r,e,t){return xt(r).setUint16(e,t),e+2}};ct.UINT24_LE={len:3,get(r,e){let t=xt(r);return t.getUint8(e)+(t.getUint16(e+1,!0)<<8)},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.UINT24_BE={len:3,get(r,e){let t=xt(r);return(t.getUint16(e)<<8)+t.getUint8(e+2)},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.UINT32_LE={len:4,get(r,e){return xt(r).getUint32(e,!0)},put(r,e,t){return xt(r).setUint32(e,t,!0),e+4}};ct.UINT32_BE={len:4,get(r,e){return xt(r).getUint32(e)},put(r,e,t){return xt(r).setUint32(e,t),e+4}};ct.INT8={len:1,get(r,e){return xt(r).getInt8(e)},put(r,e,t){return xt(r).setInt8(e,t),e+1}};ct.INT16_BE={len:2,get(r,e){return xt(r).getInt16(e)},put(r,e,t){return xt(r).setInt16(e,t),e+2}};ct.INT16_LE={len:2,get(r,e){return xt(r).getInt16(e,!0)},put(r,e,t){return xt(r).setInt16(e,t,!0),e+2}};ct.INT24_LE={len:3,get(r,e){let t=ct.UINT24_LE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.INT24_BE={len:3,get(r,e){let t=ct.UINT24_BE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.INT32_BE={len:4,get(r,e){return xt(r).getInt32(e)},put(r,e,t){return xt(r).setInt32(e,t),e+4}};ct.INT32_LE={len:4,get(r,e){return xt(r).getInt32(e,!0)},put(r,e,t){return xt(r).setInt32(e,t,!0),e+4}};ct.UINT64_LE={len:8,get(r,e){return xt(r).getBigUint64(e,!0)},put(r,e,t){return xt(r).setBigUint64(e,t,!0),e+8}};ct.INT64_LE={len:8,get(r,e){return xt(r).getBigInt64(e,!0)},put(r,e,t){return xt(r).setBigInt64(e,t,!0),e+8}};ct.UINT64_BE={len:8,get(r,e){return xt(r).getBigUint64(e)},put(r,e,t){return xt(r).setBigUint64(e,t),e+8}};ct.INT64_BE={len:8,get(r,e){return xt(r).getBigInt64(e)},put(r,e,t){return xt(r).setBigInt64(e,t),e+8}};ct.Float16_BE={len:2,get(r,e){return ml.read(r,e,!1,10,this.len)},put(r,e,t){return ml.write(r,t,e,!1,10,this.len),e+this.len}};ct.Float16_LE={len:2,get(r,e){return ml.read(r,e,!0,10,this.len)},put(r,e,t){return ml.write(r,t,e,!0,10,this.len),e+this.len}};ct.Float32_BE={len:4,get(r,e){return xt(r).getFloat32(e)},put(r,e,t){return xt(r).setFloat32(e,t),e+4}};ct.Float32_LE={len:4,get(r,e){return xt(r).getFloat32(e,!0)},put(r,e,t){return xt(r).setFloat32(e,t,!0),e+4}};ct.Float64_BE={len:8,get(r,e){return xt(r).getFloat64(e)},put(r,e,t){return xt(r).setFloat64(e,t),e+8}};ct.Float64_LE={len:8,get(r,e){return xt(r).getFloat64(e,!0)},put(r,e,t){return xt(r).setFloat64(e,t,!0),e+8}};ct.Float80_BE={len:10,get(r,e){return ml.read(r,e,!1,63,this.len)},put(r,e,t){return ml.write(r,t,e,!1,63,this.len),e+this.len}};ct.Float80_LE={len:10,get(r,e){return ml.read(r,e,!0,63,this.len)},put(r,e,t){return ml.write(r,t,e,!0,63,this.len),e+this.len}};var L2=class{constructor(e){this.len=e}get(e,t){}};ct.IgnoreType=L2;var P2=class{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}};ct.Uint8ArrayType=P2;var M2=class{constructor(e){this.len=e}get(e,t){return Buffer.from(e.subarray(t,t+this.len))}};ct.BufferType=M2;var B2=class{constructor(e,t){this.len=e,this.encoding=t}get(e,t){return Buffer.from(e).toString(this.encoding,t,t+this.len)}};ct.StringType=B2;var mb=class r{constructor(e){this.len=e}static decode(e,t,n){let i="";for(let o=t;o<n;++o)i+=r.codePointToString(r.singleByteDecoder(e[o]));return i}static inRange(e,t,n){return t<=e&&e<=n}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}static singleByteDecoder(e){if(r.inRange(e,0,127))return e;let t=r.windows1252[e-128];if(t===null)throw Error("invaliding encoding");return t}get(e,t=0){return r.decode(e,t,t+this.len)}};ct.AnsiStringType=mb;mb.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]});var pN=st(yb=>{"use strict";Oe();ke();Ne();yb.stringToBytes=r=>[...r].map(e=>e.charCodeAt(0));yb.tarHeaderChecksumMatches=(r,e=0)=>{let t=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(t))return!1;let n=256;for(let i=e;i<e+148;i++)n+=r[i];for(let i=e+156;i<e+512;i++)n+=r[i];return t===n};yb.uint32SyncSafeToken={get:(r,e)=>r[e+3]&127|r[e+2]<<7|r[e+1]<<14|r[e]<<21,len:4}});var mN=st((eZ,gN)=>{"use strict";Oe();ke();Ne();gN.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}});var yN=st((exports,module)=>{"use strict";Oe();ke();Ne();var Token=dN(),strtok3=pb(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=pN(),supported=mN(),minimumBytes=4100;async function fromStream(r){let e=await strtok3.fromStream(r);try{return await fromTokenizer(e)}finally{await e.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);let e=r instanceof Buffer?r:Buffer.from(r);if(!(e&&e.length>1))return;let t=strtok3.fromBuffer(e);return fromTokenizer(t)}function _check(r,e,t){t={offset:0,...t};for(let[n,i]of e.entries())if(t.mask){if(i!==(t.mask[n]&r[n+t.offset]))return!1}else if(i!==r[n+t.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(e){if(!(e instanceof strtok3.EndOfStreamError))throw e}}async function _fromTokenizer(r){let e=Buffer.alloc(minimumBytes),t=12,n=(o,s)=>_check(e,o,s),i=(o,s)=>n(stringToBytes(o),s);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(e,{length:t,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return await r.peekBuffer(e,{length:24,mayBeLess:!0}),i("PS-Adobe-",{offset:2})&&i(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(i("ID3")){await r.ignore(6);let o=await r.readToken(uint32SyncSafeToken);return r.position+o>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(o),fromTokenizer(r))}if(i("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((e[0]===67||e[0]===70)&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(i("FLIF"))return{ext:"flif",mime:"image/flif"};if(i("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(i("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(i("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(i("FORM"))return{ext:"aif",mime:"audio/aiff"};if(i("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(e,{length:30});let o={compressedSize:e.readUInt32LE(18),uncompressedSize:e.readUInt32LE(22),filenameLength:e.readUInt16LE(26),extraFieldLength:e.readUInt16LE(28)};if(o.filename=await r.readToken(new Token.StringType(o.filenameLength,"utf-8")),await r.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize)switch(await r.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(o.compressedSize===0){let s=-1;for(;s<0&&r.position<r.fileInfo.size;)await r.peekBuffer(e,{mayBeLess:!0}),s=e.indexOf("504B0304",0,"hex"),await r.ignore(s>=0?s:e.length)}else await r.ignore(o.compressedSize)}}catch(o){if(!(o instanceof strtok3.EndOfStreamError))throw o}return{ext:"zip",mime:"application/zip"}}if(i("OggS")){await r.ignore(28);let o=Buffer.alloc(8);return await r.readBuffer(o),_check(o,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(o,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(o,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(o,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(o,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(o,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(e[2]===3||e[2]===5||e[2]===7)&&(e[3]===4||e[3]===6||e[3]===8))return{ext:"zip",mime:"application/zip"};if(i("ftyp",{offset:4})&&(e[8]&96)!==0){let o=e.toString("binary",8,12).replace("\0"," ").trim();switch(o){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return o.startsWith("3g")?o.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(i("MThd"))return{ext:"mid",mime:"audio/midi"};if(i("wOFF")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(i("wOF2")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(i("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(i("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(i("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(i("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(i("%PDF")){await r.ignore(1350);let o=10*1024*1024,s=Buffer.alloc(Math.min(o,r.fileInfo.size));return await r.readBuffer(s,{mayBeLess:!0}),s.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return i("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(e=Buffer.alloc(24),await r.peekBuffer(e),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(i("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){async function o(){let f=await r.peekNumber(Token.UINT8),h=128,d=0;for(;(f&h)===0&&h!==0;)++d,h>>=1;let m=Buffer.alloc(d+1);return await r.readBuffer(m),m}async function s(){let f=await o(),h=await o();h[0]^=128>>h.length-1;let d=Math.min(6,h.length);return{id:f.readUIntBE(0,f.length),len:h.readUIntBE(h.length-d,d)}}async function a(f,h){for(;h>0;){let d=await s();if(d.id===17026)return r.readToken(new Token.StringType(d.len,"utf-8"));await r.ignore(d.len),--h}}let u=await s();switch(await a(1,u.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(i("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(i("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(i("MSCF")||i("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(i("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(i("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(i("IMPM"))return{ext:"it",mime:"audio/x-it"};if(i("-lh0-",{offset:2})||i("-lh1-",{offset:2})||i("-lh2-",{offset:2})||i("-lh3-",{offset:2})||i("-lh4-",{offset:2})||i("-lh5-",{offset:2})||i("-lh6-",{offset:2})||i("-lh7-",{offset:2})||i("-lzs-",{offset:2})||i("-lz4-",{offset:2})||i("-lz5-",{offset:2})||i("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(i("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(e[6]===0||e[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(i("solid "))return{ext:"stl",mime:"model/stl"};if(i("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(i("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(n([137,80,78,71,13,10,26,10])){await r.ignore(8);async function o(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{let s=await o();if(s.length<0)return;switch(s.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(s.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(i("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){async function o(){let s=Buffer.alloc(16);return await r.readBuffer(s),{id:s,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){let s=await o(),a=s.size-24;if(_check(s.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let u=Buffer.alloc(16);if(a-=await r.readBuffer(u),_check(u,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(u,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(n([255,10])||n([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(e,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),i("BEGIN:")){if(i("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(i("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(i("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(i("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(i("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&e.length>=16){let o=e.readUInt32LE(12);if(o>12&&e.length>=o+16)try{let s=e.slice(16,o+16).toString();if(JSON.parse(s).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(i("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(e,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(e))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(i("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(e.length>=2&&n([255,224],{offset:0,mask:[255,224]})){if(n([16],{offset:1,mask:[22]}))return n([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(n([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}var stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{let r=new stream.PassThrough,e;stream.pipeline?e=stream.pipeline(readableStream,r,()=>{}):e=readableStream.pipe(r);let t=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{let n=await fromBuffer(t);r.fileType=n}catch(n){reject(n)}resolve(e)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});module.exports=fileType});var wN=st((aZ,bN)=>{"use strict";Oe();ke();Ne();var f9=fN(),bb=yN();async function h9(r){let e=await f9.fromFile(r);try{return await bb.fromTokenizer(e)}finally{await e.close()}}var wb={fromFile:h9};Object.assign(wb,bb);Object.defineProperty(wb,"extensions",{get(){return bb.extensions}});Object.defineProperty(wb,"mimeTypes",{get(){return bb.mimeTypes}});bN.exports=wb});var Yp=st(ah=>{"use strict";Oe();ke();Ne();function d9(r,e,t){if(t===void 0&&(t=Array.prototype),r&&typeof t.find=="function")return t.find.call(r,e);for(var n=0;n<r.length;n++)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];if(e.call(void 0,i,n,r))return i}}function F2(r,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(r):r}function p9(r,e){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}var vN=F2({HTML:"text/html",isHTML:function(r){return r===vN.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),_N=F2({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===_N.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ah.assign=p9;ah.find=d9;ah.freeze=F2;ah.MIME_TYPE=vN;ah.NAMESPACE=_N});var X2=st(yl=>{Oe();ke();Ne();var DN=Yp(),io=DN.find,Xp=DN.NAMESPACE;function g9(r){return r!==""}function m9(r){return r?r.split(/[\t\n\f\r ]+/).filter(g9):[]}function y9(r,e){return r.hasOwnProperty(e)||(r[e]=!0),r}function EN(r){if(!r)return[];var e=m9(r);return Object.keys(e.reduce(y9,{}))}function b9(r){return function(e){return r&&r.indexOf(e)!==-1}}function Zp(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function li(r,e){var t=r.prototype;if(!(t instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,Zp(t,i),r.prototype=t=i}t.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),t.constructor=r)}var ui={},Ds=ui.ELEMENT_NODE=1,uh=ui.ATTRIBUTE_NODE=2,vb=ui.TEXT_NODE=3,IN=ui.CDATA_SECTION_NODE=4,ON=ui.ENTITY_REFERENCE_NODE=5,w9=ui.ENTITY_NODE=6,NN=ui.PROCESSING_INSTRUCTION_NODE=7,kN=ui.COMMENT_NODE=8,LN=ui.DOCUMENT_NODE=9,PN=ui.DOCUMENT_TYPE_NODE=10,ta=ui.DOCUMENT_FRAGMENT_NODE=11,v9=ui.NOTATION_NODE=12,Ln={},pn={},gZ=Ln.INDEX_SIZE_ERR=(pn[1]="Index size error",1),mZ=Ln.DOMSTRING_SIZE_ERR=(pn[2]="DOMString size error",2),ai=Ln.HIERARCHY_REQUEST_ERR=(pn[3]="Hierarchy request error",3),yZ=Ln.WRONG_DOCUMENT_ERR=(pn[4]="Wrong document",4),bZ=Ln.INVALID_CHARACTER_ERR=(pn[5]="Invalid character",5),wZ=Ln.NO_DATA_ALLOWED_ERR=(pn[6]="No data allowed",6),vZ=Ln.NO_MODIFICATION_ALLOWED_ERR=(pn[7]="No modification allowed",7),MN=Ln.NOT_FOUND_ERR=(pn[8]="Not found",8),_Z=Ln.NOT_SUPPORTED_ERR=(pn[9]="Not supported",9),AN=Ln.INUSE_ATTRIBUTE_ERR=(pn[10]="Attribute in use",10),EZ=Ln.INVALID_STATE_ERR=(pn[11]="Invalid state",11),AZ=Ln.SYNTAX_ERR=(pn[12]="Syntax error",12),xZ=Ln.INVALID_MODIFICATION_ERR=(pn[13]="Invalid modification",13),SZ=Ln.NAMESPACE_ERR=(pn[14]="Invalid namespace",14),TZ=Ln.INVALID_ACCESS_ERR=(pn[15]="Invalid access",15);function Wr(r,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,pn[r]),this.message=pn[r],Error.captureStackTrace&&Error.captureStackTrace(this,Wr);return t.code=r,e&&(this.message=this.message+": "+e),t}Wr.prototype=Error.prototype;Zp(Ln,Wr);function ea(){}ea.prototype={length:0,item:function(r){return r>=0&&r<this.length?this[r]:null},toString:function(r,e){for(var t=[],n=0;n<this.length;n++)lh(this[n],t,r,e);return t.join("")},filter:function(r){return Array.prototype.filter.call(this,r)},indexOf:function(r){return Array.prototype.indexOf.call(this,r)}};function ch(r,e){this._node=r,this._refresh=e,$2(this)}function $2(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!==e){var t=r._refresh(r._node);if(YN(r,"length",t.length),!r.$$length||t.length<r.$$length)for(var n=t.length;n in r;n++)Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];Zp(t,r),r._inc=e}}ch.prototype.item=function(r){return $2(this),this[r]||null};li(ch,ea);function _b(){}function BN(r,e){for(var t=r.length;t--;)if(r[t]===e)return t}function xN(r,e,t,n){if(n?e[BN(e,n)]=t:e[e.length++]=t,r){t.ownerElement=r;var i=r.ownerDocument;i&&(n&&jN(i,r,n),_9(i,r,t))}}function SN(r,e,t){var n=BN(e,t);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,r){var o=r.ownerDocument;o&&(jN(o,r,t),t.ownerElement=null)}}else throw new Wr(MN,new Error(r.tagName+"@"+t))}_b.prototype={length:0,item:ea.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==r)return t}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new Wr(AN);var t=this.getNamedItem(r.nodeName);return xN(this._ownerElement,this,r,t),t},setNamedItemNS:function(r){var e=r.ownerElement,t;if(e&&e!=this._ownerElement)throw new Wr(AN);return t=this.getNamedItemNS(r.namespaceURI,r.localName),xN(this._ownerElement,this,r,t),t},removeNamedItem:function(r){var e=this.getNamedItem(r);return SN(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var t=this.getNamedItemNS(r,e);return SN(this._ownerElement,this,t),t},getNamedItemNS:function(r,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function FN(){}FN.prototype={hasFeature:function(r,e){return!0},createDocument:function(r,e,t){var n=new Jp;if(n.implementation=this,n.childNodes=new ea,n.doctype=t||null,t&&n.appendChild(t),e){var i=n.createElementNS(r,e);n.appendChild(i)}return n},createDocumentType:function(r,e,t){var n=new xb;return n.name=r,n.nodeName=r,n.publicId=e||"",n.systemId=t||"",n}};function Xt(){}Xt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return Eb(this,r,e)},replaceChild:function(r,e){Eb(this,r,e,zN),e&&this.removeChild(e)},removeChild:function(r){return $N(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return j2(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==vb&&r.nodeType==vb?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===r)return n}e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function UN(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}Zp(ui,Xt);Zp(ui,Xt.prototype);function Kp(r,e){if(e(r))return!0;if(r=r.firstChild)do if(Kp(r,e))return!0;while(r=r.nextSibling)}function Jp(){this.ownerDocument=this}function _9(r,e,t){r&&r._inc++;var n=t.namespaceURI;n===Xp.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function jN(r,e,t,n){r&&r._inc++;var i=t.namespaceURI;i===Xp.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function z2(r,e,t){if(r&&r._inc){r._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var i=e.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o,delete n[n.length]}}}function $N(r,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:r.firstChild=n,n?n.previousSibling=t:r.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,z2(r.ownerDocument,r),e}function E9(r){return r&&(r.nodeType===Xt.DOCUMENT_NODE||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.ELEMENT_NODE)}function A9(r){return r&&(so(r)||W2(r)||ra(r)||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.COMMENT_NODE||r.nodeType===Xt.PROCESSING_INSTRUCTION_NODE)}function ra(r){return r&&r.nodeType===Xt.DOCUMENT_TYPE_NODE}function so(r){return r&&r.nodeType===Xt.ELEMENT_NODE}function W2(r){return r&&r.nodeType===Xt.TEXT_NODE}function TN(r,e){var t=r.childNodes||[];if(io(t,so)||ra(e))return!1;var n=io(t,ra);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function CN(r,e){var t=r.childNodes||[];function n(o){return so(o)&&o!==e}if(io(t,n))return!1;var i=io(t,ra);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function x9(r,e,t){if(!E9(r))throw new Wr(ai,"Unexpected parent node type "+r.nodeType);if(t&&t.parentNode!==r)throw new Wr(MN,"child not in parent");if(!A9(e)||ra(e)&&r.nodeType!==Xt.DOCUMENT_NODE)throw new Wr(ai,"Unexpected node type "+e.nodeType+" for parent node type "+r.nodeType)}function S9(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(so);if(o.length>1||io(i,W2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!TN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(so(e)&&!TN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(ra(e)){if(io(n,ra))throw new Wr(ai,"Only one doctype is allowed");var s=io(n,so);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element");if(!t&&s)throw new Wr(ai,"Doctype can not be appended since element is present")}}function zN(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(so);if(o.length>1||io(i,W2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!CN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(so(e)&&!CN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(ra(e)){let u=function(c){return ra(c)&&c!==t};var a=u;if(io(n,u))throw new Wr(ai,"Only one doctype is allowed");var s=io(n,so);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element")}}function Eb(r,e,t,n){x9(r,e,t),r.nodeType===Xt.DOCUMENT_NODE&&(n||S9)(r,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===ta){var o=e.firstChild;if(o==null)return e;var s=e.lastChild}else o=s=e;var a=t?t.previousSibling:r.lastChild;o.previousSibling=a,s.nextSibling=t,a?a.nextSibling=o:r.firstChild=o,t==null?r.lastChild=s:t.previousSibling=s;do o.parentNode=r;while(o!==s&&(o=o.nextSibling));return z2(r.ownerDocument||r,r),e.nodeType==ta&&(e.firstChild=e.lastChild=null),e}function T9(r,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=r,e.previousSibling=r.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:r.firstChild=e,r.lastChild=e,z2(r.ownerDocument,r,e),e}Jp.prototype={nodeName:"#document",nodeType:LN,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==ta){for(var t=r.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return r}return Eb(this,r,e),r.ownerDocument=this,this.documentElement===null&&r.nodeType===Ds&&(this.documentElement=r),r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),$N(this,r)},replaceChild:function(r,e){Eb(this,r,e,zN),r.ownerDocument=this,e&&this.removeChild(e),so(r)&&(this.documentElement=r)},importNode:function(r,e){return VN(this,r,e)},getElementById:function(r){var e=null;return Kp(this.documentElement,function(t){if(t.nodeType==Ds&&t.getAttribute("id")==r)return e=t,!0}),e},getElementsByClassName:function(r){var e=EN(r);return new ch(this,function(t){var n=[];return e.length>0&&Kp(t.documentElement,function(i){if(i!==t&&i.nodeType===Ds){var o=i.getAttribute("class");if(o){var s=r===o;if(!s){var a=EN(o);s=e.every(b9(a))}s&&n.push(i)}}}),n})},createElement:function(r){var e=new Yu;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.localName=r,e.childNodes=new ea;var t=e.attributes=new _b;return t._ownerElement=e,e},createDocumentFragment:function(){var r=new Sb;return r.ownerDocument=this,r.childNodes=new ea,r},createTextNode:function(r){var e=new q2;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new H2;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new G2;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var t=new Y2;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=r,t.nodeValue=t.data=e,t},createAttribute:function(r){var e=new Ab;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new V2;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var t=new Yu,n=e.split(":"),i=t.attributes=new _b;return t.childNodes=new ea,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=r,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(r,e){var t=new Ab,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=r,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};li(Jp,Xt);function Yu(){this._nsMap={}}Yu.prototype={nodeType:Ds,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var t=this.ownerDocument.createAttribute(r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===ta?this.insertBefore(r,null):T9(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);return t&&t.value||""},setAttributeNS:function(r,e,t){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new ch(this,function(e){var t=[];return Kp(e,function(n){n!==e&&n.nodeType==Ds&&(r==="*"||n.tagName==r)&&t.push(n)}),t})},getElementsByTagNameNS:function(r,e){return new ch(this,function(t){var n=[];return Kp(t,function(i){i!==t&&i.nodeType===Ds&&(r==="*"||i.namespaceURI===r)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Jp.prototype.getElementsByTagName=Yu.prototype.getElementsByTagName;Jp.prototype.getElementsByTagNameNS=Yu.prototype.getElementsByTagNameNS;li(Yu,Xt);function Ab(){}Ab.prototype.nodeType=uh;li(Ab,Xt);function Qp(){}Qp.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(pn[ai])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,t){var n=this.data.substring(0,r),i=this.data.substring(r+e);t=n+t+i,this.nodeValue=this.data=t,this.length=t.length}};li(Qp,Xt);function q2(){}q2.prototype={nodeName:"#text",nodeType:vb,splitText:function(r){var e=this.data,t=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};li(q2,Qp);function H2(){}H2.prototype={nodeName:"#comment",nodeType:kN};li(H2,Qp);function G2(){}G2.prototype={nodeName:"#cdata-section",nodeType:IN};li(G2,Qp);function xb(){}xb.prototype.nodeType=PN;li(xb,Xt);function WN(){}WN.prototype.nodeType=v9;li(WN,Xt);function qN(){}qN.prototype.nodeType=w9;li(qN,Xt);function V2(){}V2.prototype.nodeType=ON;li(V2,Xt);function Sb(){}Sb.prototype.nodeName="#document-fragment";Sb.prototype.nodeType=ta;li(Sb,Xt);function Y2(){}Y2.prototype.nodeType=NN;li(Y2,Xt);function HN(){}HN.prototype.serializeToString=function(r,e,t){return GN.call(r,e,t)};Xt.prototype.toString=GN;function GN(r,e){var t=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&i==null){var i=n.lookupPrefix(o);if(i==null)var s=[{namespace:o,prefix:null}]}return lh(this,t,r,e,s),t.join("")}function RN(r,e,t){var n=r.prefix||"",i=r.namespaceURI;if(!i||n==="xml"&&i===Xp.XML||i===Xp.XMLNS)return!1;for(var o=t.length;o--;){var s=t[o];if(s.prefix===n)return s.namespace!==i}return!0}function U2(r,e,t){r.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,UN),'"')}function lh(r,e,t,n,i){if(i||(i=[]),n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case Ds:var o=r.attributes,s=o.length,y=r.firstChild,a=r.tagName;t=Xp.isHTML(r.namespaceURI)||t;var u=a;if(!t&&!r.prefix&&r.namespaceURI){for(var c,f=0;f<o.length;f++)if(o.item(f).name==="xmlns"){c=o.item(f).value;break}if(!c)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.prefix===""&&d.namespace===r.namespaceURI){c=d.namespace;break}}if(c!==r.namespaceURI)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.namespace===r.namespaceURI){d.prefix&&(u=d.prefix+":"+a);break}}}e.push("<",u);for(var m=0;m<s;m++){var b=o.item(m);b.prefix=="xmlns"?i.push({prefix:b.localName,namespace:b.value}):b.nodeName=="xmlns"&&i.push({prefix:"",namespace:b.value})}for(var m=0;m<s;m++){var b=o.item(m);if(RN(b,t,i)){var v=b.prefix||"",w=b.namespaceURI;U2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}lh(b,e,t,n,i)}if(a===u&&RN(r,t,i)){var v=r.prefix||"",w=r.namespaceURI;U2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}if(y||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),t&&/^script$/i.test(a))for(;y;)y.data?e.push(y.data):lh(y,e,t,n,i.slice()),y=y.nextSibling;else for(;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;e.push("</",u,">")}else e.push("/>");return;case LN:case ta:for(var y=r.firstChild;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;return;case uh:return U2(e,r.name,r.value);case vb:return e.push(r.data.replace(/[<&>]/g,UN));case IN:return e.push("<![CDATA[",r.data,"]]>");case kN:return e.push("<!--",r.data,"-->");case PN:var _=r.publicId,E=r.systemId;if(e.push("<!DOCTYPE ",r.name),_)e.push(" PUBLIC ",_),E&&E!="."&&e.push(" ",E),e.push(">");else if(E&&E!=".")e.push(" SYSTEM ",E,">");else{var S=r.internalSubset;S&&e.push(" [",S,"]"),e.push(">")}return;case NN:return e.push("<?",r.target," ",r.data,"?>");case ON:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function VN(r,e,t){var n;switch(e.nodeType){case Ds:n=e.cloneNode(!1),n.ownerDocument=r;case ta:break;case uh:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,t)for(var i=e.firstChild;i;)n.appendChild(VN(r,i,t)),i=i.nextSibling;return n}function j2(r,e,t){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];typeof o!="object"&&o!=n[i]&&(n[i]=o)}switch(e.childNodes&&(n.childNodes=new ea),n.ownerDocument=r,n.nodeType){case Ds:var s=e.attributes,a=n.attributes=new _b,u=s.length;a._ownerElement=n;for(var c=0;c<u;c++)n.setAttributeNode(j2(r,s.item(c),!0));break;case uh:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild(j2(r,f,t)),f=f.nextSibling;return n}function YN(r,e,t){r[e]=t}try{if(Object.defineProperty){let r=function(e){switch(e.nodeType){case Ds:case ta:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(r(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};C9=r,Object.defineProperty(ch.prototype,"length",{get:function(){return $2(this),this.$$length}}),Object.defineProperty(Xt.prototype,"textContent",{get:function(){return r(this)},set:function(e){switch(this.nodeType){case Ds:case ta:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),YN=function(e,t,n){e["$$"+t]=n}}}catch{}var C9;yl.DocumentType=xb;yl.DOMException=Wr;yl.DOMImplementation=FN;yl.Element=Yu;yl.Node=Xt;yl.NodeList=ea;yl.XMLSerializer=HN});var KN=st(eg=>{"use strict";Oe();ke();Ne();var XN=Yp().freeze;eg.XML_ENTITIES=XN({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});eg.HTML_ENTITIES=XN({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});eg.entityMap=eg.HTML_ENTITIES});var ik=st(Z2=>{Oe();ke();Ne();var ig=Yp().NAMESPACE,K2=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ZN=new RegExp("[\\-\\.0-9"+K2.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),JN=new RegExp("^"+K2.source+ZN.source+"*(?::"+K2.source+ZN.source+"*)?$"),tg=0,bl=1,fh=2,rg=3,hh=4,dh=5,ng=6,Tb=7;function ph(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ph)}ph.prototype=new Error;ph.prototype.name=ph.name;function tk(){}tk.prototype={parse:function(r,e,t){var n=this.domBuilder;n.startDocument(),rk(e,e={}),R9(r,e,t,n,this.errorHandler),n.endDocument()}};function R9(r,e,t,n,i){function o(ve){if(ve>65535){ve-=65536;var H=55296+(ve>>10),D=56320+(ve&1023);return String.fromCharCode(H,D)}else return String.fromCharCode(ve)}function s(ve){var H=ve.slice(1,-1);return Object.hasOwnProperty.call(t,H)?t[H]:H.charAt(0)==="#"?o(parseInt(H.substr(1).replace("x","0x"))):(i.error("entity not found:"+ve),ve)}function a(ve){if(ve>v){var H=r.substring(v,ve).replace(/&#?\w+;/g,s);d&&u(v),n.characters(H,0,ve-v),v=ve}}function u(ve,H){for(;ve>=f&&(H=h.exec(r));)c=H.index,f=c+H[0].length,d.lineNumber++;d.columnNumber=ve-c+1}for(var c=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,m=[{currentNSMap:e}],b={},v=0;;){try{var w=r.indexOf("<",v);if(w<0){if(!r.substr(v).match(/^\s*$/)){var y=n.doc,_=y.createTextNode(r.substr(v));y.appendChild(_),n.currentElement=_}return}switch(w>v&&a(w),r.charAt(w+1)){case"/":var ie=r.indexOf(">",w+3),E=r.substring(w+2,ie).replace(/[ \t\n\r]+$/g,""),S=m.pop();ie<0?(E=r.substring(w+2).replace(/[\s<].*/,""),i.error("end tag name: "+E+" is not complete:"+S.tagName),ie=w+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),i.error("end tag name: "+E+" maybe not complete"),ie=w+1+E.length);var A=S.localNSMap,P=S.tagName==E,R=P||S.tagName&&S.tagName.toLowerCase()==E.toLowerCase();if(R){if(n.endElement(S.uri,S.localName,E),A)for(var Y in A)Object.prototype.hasOwnProperty.call(A,Y)&&n.endPrefixMapping(Y);P||i.fatalError("end tag name: "+E+" is not match the current start tagName:"+S.tagName)}else m.push(S);ie++;break;case"?":d&&u(w),ie=k9(r,w,n);break;case"!":d&&u(w),ie=N9(r,w,n,i);break;default:d&&u(w);var te=new nk,K=m[m.length-1].currentNSMap,ie=D9(r,w,te,K,s,i),j=te.length;if(!te.closed&&O9(r,ie,te.tagName,b)&&(te.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),d&&j){for(var q=QN(d,{}),fe=0;fe<j;fe++){var Ee=te[fe];u(Ee.offset),Ee.locator=QN(d,{})}n.locator=q,ek(te,n,K)&&m.push(te),n.locator=d}else ek(te,n,K)&&m.push(te);ig.isHTML(te.uri)&&!te.closed?ie=I9(r,ie,te.tagName,s,n):ie++}}catch(ve){if(ve instanceof ph)throw ve;i.error("element parse error: "+ve),ie=-1}ie>v?v=ie:a(Math.max(w,v)+1)}}function QN(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function D9(r,e,t,n,i,o){function s(m,b,v){t.attributeNames.hasOwnProperty(m)&&o.fatalError("Attribute "+m+" redefined"),t.addValue(m,b.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),v)}for(var a,u,c=++e,f=tg;;){var h=r.charAt(c);switch(h){case"=":if(f===bl)a=r.slice(e,c),f=rg;else if(f===fh)f=rg;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===rg||f===bl)if(f===bl&&(o.warning('attribute value must after "="'),a=r.slice(e,c)),e=c+1,c=r.indexOf(h,e),c>0)u=r.slice(e,c),s(a,u,e-1),f=dh;else throw new Error("attribute value no end '"+h+"' match");else if(f==hh)u=r.slice(e,c),s(a,u,e),o.warning('attribute "'+a+'" missed start quot('+h+")!!"),e=c+1,f=dh;else throw new Error('attribute value must after "="');break;case"/":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Tb:f=Tb,t.closed=!0;case hh:case bl:break;case fh:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),f==tg&&t.setTagName(r.slice(e,c)),c;case">":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Tb:break;case hh:case bl:u=r.slice(e,c),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case fh:f===fh&&(u=a),f==hh?(o.warning('attribute "'+u+'" missed quot(")!'),s(a,u,e)):((!ig.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case rg:throw new Error("attribute value missed!!")}return c;case"\x80":h=" ";default:if(h<=" ")switch(f){case tg:t.setTagName(r.slice(e,c)),f=ng;break;case bl:a=r.slice(e,c),f=fh;break;case hh:var u=r.slice(e,c);o.warning('attribute "'+u+'" missed quot(")!!'),s(a,u,e);case dh:f=ng;break}else switch(f){case fh:var d=t.tagName;(!ig.isHTML(n[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,e),e=c,f=bl;break;case dh:o.warning('attribute space is required"'+a+'"!!');case ng:f=bl,e=c;break;case rg:f=hh,e=c;break;case Tb:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function ek(r,e,t){for(var n=r.tagName,i=null,h=r.length;h--;){var o=r[h],s=o.qName,a=o.value,d=s.indexOf(":");if(d>0)var u=o.prefix=s.slice(0,d),c=s.slice(d+1),f=u==="xmlns"&&c;else c=s,u=null,f=s==="xmlns"&&"";o.localName=c,f!==!1&&(i==null&&(i={},rk(t,t={})),t[f]=i[f]=a,o.uri=ig.XMLNS,e.startPrefixMapping(f,a))}for(var h=r.length;h--;){o=r[h];var u=o.prefix;u&&(u==="xml"&&(o.uri=ig.XML),u!=="xmlns"&&(o.uri=t[u||""]))}var d=n.indexOf(":");d>0?(u=r.prefix=n.slice(0,d),c=r.localName=n.slice(d+1)):(u=null,c=r.localName=n);var m=r.uri=t[u||""];if(e.startElement(m,c,n,r),r.closed){if(e.endElement(m,c,n),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return r.currentNSMap=t,r.localNSMap=i,!0}function I9(r,e,t,n,i){if(/^(?:script|textarea)$/i.test(t)){var o=r.indexOf("</"+t+">",e),s=r.substring(e+1,o);if(/[&<]/.test(s))return/^script$/i.test(t)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return e+1}function O9(r,e,t,n){var i=n[t];return i==null&&(i=r.lastIndexOf("</"+t+">"),i<e&&(i=r.lastIndexOf("</"+t)),n[t]=i),i<e}function rk(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function N9(r,e,t,n){var i=r.charAt(e+2);switch(i){case"-":if(r.charAt(e+3)==="-"){var o=r.indexOf("-->",e+4);return o>e?(t.comment(r,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var o=r.indexOf("]]>",e+9);return t.startCDATA(),t.characters(r,e+9,o-e-9),t.endCDATA(),o+3}var s=L9(r,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],c=!1,f=!1;a>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],f=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var h=s[a-1];return t.startDTD(u,c,f),t.endDTD(),h.index+h[0].length}}return-1}function k9(r,e,t){var n=r.indexOf("?>",e);if(n){var i=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var o=i[0].length;return t.processingInstruction(i[1],i[2]),n+2}else return-1}return-1}function nk(){this.attributeNames={}}nk.prototype={setTagName:function(r){if(!JN.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,t){if(!JN.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:t}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function L9(r,e){var t,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(r);t=i.exec(r);)if(n.push(t),t[1])return n}Z2.XMLReader=tk;Z2.ParseError=ph});var fk=st(Rb=>{Oe();ke();Ne();var P9=Yp(),M9=X2(),sk=KN(),lk=ik(),B9=M9.DOMImplementation,ok=P9.NAMESPACE,F9=lk.ParseError,U9=lk.XMLReader;function uk(r){return r.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ck(r){this.options=r||{locator:{}}}ck.prototype.parseFromString=function(r,e){var t=this.options,n=new U9,i=t.domBuilder||new sg,o=t.errorHandler,s=t.locator,a=t.xmlns||{},u=/\/x?html?$/.test(e),c=u?sk.HTML_ENTITIES:sk.XML_ENTITIES;s&&i.setDocumentLocator(s),n.errorHandler=j9(o,i,s),n.domBuilder=t.domBuilder||i,u&&(a[""]=ok.HTML),a.xml=a.xml||ok.XML;var f=t.normalizeLineEndings||uk;return r&&typeof r=="string"?n.parse(f(r),a,c):n.errorHandler.error("invalid doc source"),i.doc};function j9(r,e,t){if(!r){if(e instanceof sg)return e;r=e}var n={},i=r instanceof Function;t=t||{};function o(s){var a=r[s];!a&&i&&(a=r.length==2?function(u){r(s,u)}:r),n[s]=a&&function(u){a("[xmldom "+s+"]	"+u+J2(t))}||function(){}}return o("warning"),o("error"),o("fatalError"),n}function sg(){this.cdata=!1}function gh(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}sg.prototype={startDocument:function(){this.doc=new B9().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,t,n){var i=this.doc,o=i.createElementNS(r,t||e),s=n.length;Cb(this,o),this.currentElement=o,this.locator&&gh(this.locator,o);for(var a=0;a<s;a++){var r=n.getURI(a),u=n.getValue(a),t=n.getQName(a),c=i.createAttributeNS(r,t);this.locator&&gh(n.getLocator(a),c),c.value=c.nodeValue=u,o.setAttributeNode(c)}},endElement:function(r,e,t){var n=this.currentElement,i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var t=this.doc.createProcessingInstruction(r,e);this.locator&&gh(this.locator,t),Cb(this,t)},ignorableWhitespace:function(r,e,t){},characters:function(r,e,t){if(r=ak.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&gh(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,t){r=ak.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&gh(this.locator,n),Cb(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(r,e,t);this.locator&&gh(this.locator,i),Cb(this,i),this.doc.doctype=i}},warning:function(r){console.warn("[xmldom warning]	"+r,J2(this.locator))},error:function(r){console.error("[xmldom error]	"+r,J2(this.locator))},fatalError:function(r){throw new F9(r,this.locator)}};function J2(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function ak(r,e,t){return typeof r=="string"?r.substr(e,t):r.length>=e+t||e?new java.lang.String(r,e,t)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){sg.prototype[r]=function(){return null}});function Cb(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}Rb.__DOMHandler=sg;Rb.normalizeLineEndings=uk;Rb.DOMParser=ck});var Ib=st(Db=>{Oe();ke();Ne();var hk=X2();Db.DOMImplementation=hk.DOMImplementation;Db.XMLSerializer=hk.XMLSerializer;Db.DOMParser=fk().DOMParser});var mk=st((cJ,e1)=>{Oe();ke();Ne();var Q2=(function(r){"use strict";var e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(H,D,ee){H[D]=ee.value},i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(H,D,ee){return Object.defineProperty(H,D,{value:ee,enumerable:!0,configurable:!0,writable:!0}),H[D]}try{c({},"")}catch{c=function(D,ee,B){return D[ee]=B}}function f(H,D,ee,B){var L=D&&D.prototype instanceof y?D:y,$=Object.create(L.prototype),M=new fe(B||[]);return n($,"_invoke",{value:K(H,ee,M)}),$}r.wrap=f;function h(H,D,ee){try{return{type:"normal",arg:H.call(D,ee)}}catch(B){return{type:"throw",arg:B}}}var d="suspendedStart",m="suspendedYield",b="executing",v="completed",w={};function y(){}function _(){}function E(){}var S={};c(S,s,function(){return this});var A=Object.getPrototypeOf,P=A&&A(A(Ee([])));P&&P!==e&&t.call(P,s)&&(S=P);var R=E.prototype=y.prototype=Object.create(S);_.prototype=E,n(R,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,u,"GeneratorFunction");function Y(H){["next","throw","return"].forEach(function(D){c(H,D,function(ee){return this._invoke(D,ee)})})}r.isGeneratorFunction=function(H){var D=typeof H=="function"&&H.constructor;return D?D===_||(D.displayName||D.name)==="GeneratorFunction":!1},r.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,E):(H.__proto__=E,c(H,u,"GeneratorFunction")),H.prototype=Object.create(R),H},r.awrap=function(H){return{__await:H}};function te(H,D){function ee($,M,G,ne){var se=h(H[$],H,M);if(se.type==="throw")ne(se.arg);else{var z=se.arg,N=z.value;return N&&typeof N=="object"&&t.call(N,"__await")?D.resolve(N.__await).then(function(F){ee("next",F,G,ne)},function(F){ee("throw",F,G,ne)}):D.resolve(N).then(function(F){z.value=F,G(z)},function(F){return ee("throw",F,G,ne)})}}var B;function L($,M){function G(){return new D(function(ne,se){ee($,M,ne,se)})}return B=B?B.then(G,G):G()}n(this,"_invoke",{value:L})}Y(te.prototype),c(te.prototype,a,function(){return this}),r.AsyncIterator=te,r.async=function(H,D,ee,B,L){L===void 0&&(L=Promise);var $=new te(f(H,D,ee,B),L);return r.isGeneratorFunction(D)?$:$.next().then(function(M){return M.done?M.value:$.next()})};function K(H,D,ee){var B=d;return function($,M){if(B===b)throw new Error("Generator is already running");if(B===v){if($==="throw")throw M;return ve()}for(ee.method=$,ee.arg=M;;){var G=ee.delegate;if(G){var ne=ie(G,ee);if(ne){if(ne===w)continue;return ne}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(B===d)throw B=v,ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);B=b;var se=h(H,D,ee);if(se.type==="normal"){if(B=ee.done?v:m,se.arg===w)continue;return{value:se.arg,done:ee.done}}else se.type==="throw"&&(B=v,ee.method="throw",ee.arg=se.arg)}}}function ie(H,D){var ee=D.method,B=H.iterator[ee];if(B===i)return D.delegate=null,ee==="throw"&&H.iterator.return&&(D.method="return",D.arg=i,ie(H,D),D.method==="throw")||ee!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),w;var L=h(B,H.iterator,D.arg);if(L.type==="throw")return D.method="throw",D.arg=L.arg,D.delegate=null,w;var $=L.arg;if(!$)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,w;if($.done)D[H.resultName]=$.value,D.next=H.nextLoc,D.method!=="return"&&(D.method="next",D.arg=i);else return $;return D.delegate=null,w}Y(R),c(R,u,"Generator"),c(R,s,function(){return this}),c(R,"toString",function(){return"[object Generator]"});function j(H){var D={tryLoc:H[0]};1 in H&&(D.catchLoc=H[1]),2 in H&&(D.finallyLoc=H[2],D.afterLoc=H[3]),this.tryEntries.push(D)}function q(H){var D=H.completion||{};D.type="normal",delete D.arg,H.completion=D}function fe(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(j,this),this.reset(!0)}r.keys=function(H){var D=Object(H),ee=[];for(var B in D)ee.push(B);return ee.reverse(),function L(){for(;ee.length;){var $=ee.pop();if($ in D)return L.value=$,L.done=!1,L}return L.done=!0,L}};function Ee(H){if(H){var D=H[s];if(D)return D.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var ee=-1,B=function L(){for(;++ee<H.length;)if(t.call(H,ee))return L.value=H[ee],L.done=!1,L;return L.value=i,L.done=!0,L};return B.next=B}}return{next:ve}}r.values=Ee;function ve(){return{value:i,done:!0}}return fe.prototype={constructor:fe,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(q),!H)for(var D in this)D.charAt(0)==="t"&&t.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=i)},stop:function(){this.done=!0;var H=this.tryEntries[0],D=H.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var D=this;function ee(ne,se){return $.type="throw",$.arg=H,D.next=ne,se&&(D.method="next",D.arg=i),!!se}for(var B=this.tryEntries.length-1;B>=0;--B){var L=this.tryEntries[B],$=L.completion;if(L.tryLoc==="root")return ee("end");if(L.tryLoc<=this.prev){var M=t.call(L,"catchLoc"),G=t.call(L,"finallyLoc");if(M&&G){if(this.prev<L.catchLoc)return ee(L.catchLoc,!0);if(this.prev<L.finallyLoc)return ee(L.finallyLoc)}else if(M){if(this.prev<L.catchLoc)return ee(L.catchLoc,!0)}else if(G){if(this.prev<L.finallyLoc)return ee(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,D){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var B=this.tryEntries[ee];if(B.tryLoc<=this.prev&&t.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var L=B;break}}L&&(H==="break"||H==="continue")&&L.tryLoc<=D&&D<=L.finallyLoc&&(L=null);var $=L?L.completion:{};return $.type=H,$.arg=D,L?(this.method="next",this.next=L.finallyLoc,w):this.complete($)},complete:function(H,D){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&D&&(this.next=D),w},finish:function(H){for(var D=this.tryEntries.length-1;D>=0;--D){var ee=this.tryEntries[D];if(ee.finallyLoc===H)return this.complete(ee.completion,ee.afterLoc),q(ee),w}},catch:function(H){for(var D=this.tryEntries.length-1;D>=0;--D){var ee=this.tryEntries[D];if(ee.tryLoc===H){var B=ee.completion;if(B.type==="throw"){var L=B.arg;q(ee)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(H,D,ee){return this.delegate={iterator:Ee(H),resultName:D,nextLoc:ee},this.method==="next"&&(this.arg=i),w}},r})(typeof e1=="object"?e1.exports:{});try{regeneratorRuntime=Q2}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Q2:Function("r","regeneratorRuntime = r")(Q2)}});var Ob=st((pJ,yk)=>{"use strict";Oe();ke();Ne();yk.exports=(r,e)=>`${r}-${e}-${Math.random().toString(16).slice(3,8)}`});var t1=st((bJ,wk)=>{"use strict";Oe();ke();Ne();var V9=Ob(),bk=0;wk.exports=({id:r,action:e,payload:t={}})=>{let n=r;return typeof n>"u"&&(n=V9("Job",bk),bk+=1),{id:n,action:e,payload:t}}});var Nb=st(og=>{"use strict";Oe();ke();Ne();var r1=!1;og.logging=r1;og.setLogging=r=>{r1=r};og.log=(...r)=>r1?console.log.apply(og,r):null});var Ak=st((_k,Ek)=>{"use strict";Oe();ke();Ne();var Y9=t1(),{log:kb}=Nb(),X9=Ob(),vk=0;Ek.exports=()=>{let r=X9("Scheduler",vk),e={},t={},n=[];vk+=1;let i=()=>n.length,o=()=>Object.keys(e).length,s=()=>{if(n.length!==0){let h=Object.keys(e);for(let d=0;d<h.length;d+=1)if(typeof t[h[d]]>"u"){n[0](e[h[d]]);break}}},a=(h,d)=>new Promise((m,b)=>{let v=Y9({action:h,payload:d});n.push(async w=>{n.shift(),t[w.id]=v;try{m(await w[h].apply(_k,[...d,v.id]))}catch(y){b(y)}finally{delete t[w.id],s()}}),kb(`[${r}]: Add ${v.id} to JobQueue`),kb(`[${r}]: JobQueue length=${n.length}`),s()});return{addWorker:h=>(e[h.id]=h,kb(`[${r}]: Add ${h.id}`),kb(`[${r}]: Number of workers=${o()}`),s(),h.id),addJob:async(h,...d)=>{if(o()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return a(h,d)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),n=[]},getQueueLen:i,getNumWorkers:o}}});var Sk=st((DJ,xk)=>{"use strict";Oe();ke();Ne();xk.exports=r=>{let e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof xu=="function"&&(e.type="node"),typeof r>"u"?e:e[r]}});var Ck=st((LJ,Tk)=>{"use strict";Oe();ke();Ne();var K9=Sk()("type")==="browser",Z9=K9?r=>new URL(r,window.location.href).href:r=>r;Tk.exports=r=>{let e={...r};return["corePath","workerPath","langPath"].forEach(t=>{r[t]&&(e[t]=Z9(e[t]))}),e}});var n1=st((FJ,Rk)=>{"use strict";Oe();ke();Ne();Rk.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}});var Dk=st((zJ,J9)=>{J9.exports={name:"tesseract.js",version:"6.0.1",description:"Pure Javascript Multilingual OCR",main:"src/index.js",type:"commonjs",types:"src/index.d.ts",unpkg:"dist/tesseract.min.js",jsdelivr:"dist/tesseract.min.js",scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser:{"./src/worker/node/index.js":"./src/worker/browser/index.js"},author:"",contributors:["jeromewu"],license:"Apache-2.0",devDependencies:{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},dependencies:{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},overrides:{"@rollup/pluginutils":"^5.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js",collective:{type:"opencollective",url:"https://opencollective.com/tesseractjs"}}});var Ok=st((WJ,Ik)=>{"use strict";Oe();ke();Ne();Ik.exports={workerBlobURL:!0,logger:()=>{}}});var kk=st((VJ,Nk)=>{"use strict";Oe();ke();Ne();var Q9=Dk().version,e7=Ok();Nk.exports={...e7,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Q9}/dist/worker.min.js`}});var Pk=st((ZJ,Lk)=>{"use strict";Oe();ke();Ne();Lk.exports=({workerPath:r,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){let n=new Blob([`importScripts("${r}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(r);return t}});var Bk=st((tQ,Mk)=>{"use strict";Oe();ke();Ne();Mk.exports=r=>{r.terminate()}});var Uk=st((sQ,Fk)=>{"use strict";Oe();ke();Ne();Fk.exports=(r,e)=>{r.onmessage=({data:t})=>{e(t)}}});var $k=st((uQ,jk)=>{"use strict";Oe();ke();Ne();jk.exports=async(r,e)=>{r.postMessage(e)}});var Wk=st((dQ,zk)=>{"use strict";Oe();ke();Ne();var i1=r=>new Promise((e,t)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:i}}})=>{t(Error(`File could not be read! Code=${i}`))},n.readAsArrayBuffer(r)}),s1=async r=>{let e=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?e=atob(r.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(e=await s1(r.src)),r.tagName==="VIDEO"&&(e=await s1(r.poster)),r.tagName==="CANVAS"&&await new Promise(t=>{r.toBlob(async n=>{e=await i1(n),t()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){let t=await r.convertToBlob();e=await i1(t)}else(r instanceof File||r instanceof Blob)&&(e=await i1(r));return new Uint8Array(e)};zk.exports=s1});var Hk=st((yQ,qk)=>{"use strict";Oe();ke();Ne();var t7=kk(),r7=Pk(),n7=Bk(),i7=Uk(),s7=$k(),o7=Wk();qk.exports={defaultOptions:t7,spawnWorker:r7,terminateWorker:n7,onMessage:i7,send:s7,loadImage:o7}});var o1=st((_Q,Xk)=>{"use strict";Oe();ke();Ne();var a7=Ck(),oo=t1(),{log:Gk}=Nb(),l7=Ob(),Ku=n1(),{defaultOptions:u7,spawnWorker:c7,terminateWorker:f7,onMessage:h7,loadImage:Vk,send:d7}=Hk(),Yk=0;Xk.exports=async(r="eng",e=Ku.LSTM_ONLY,t={},n={})=>{let i=l7("Worker",Yk),{logger:o,errorHandler:s,...a}=a7({...u7,...t}),u={},c=typeof r=="string"?r.split("+"):r,f=e,h=n,d=[Ku.DEFAULT,Ku.LSTM_ONLY].includes(e)&&!a.legacyCore,m,b,v=new Promise((H,D)=>{b=H,m=D}),w=H=>{m(H.message)},y=c7(a);y.onerror=w,Yk+=1;let _=({id:H,action:D,payload:ee})=>new Promise((B,L)=>{Gk(`[${i}]: Start ${H}, action=${D}`);let $=`${D}-${H}`;u[$]={resolve:B,reject:L},d7(y,{workerId:i,jobId:H,action:D,payload:ee})}),E=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),S=H=>_(oo({id:H,action:"load",payload:{options:{lstmOnly:d,corePath:a.corePath,logging:a.logging}}})),A=(H,D,ee)=>_(oo({id:ee,action:"FS",payload:{method:"writeFile",args:[H,D]}})),P=(H,D)=>_(oo({id:D,action:"FS",payload:{method:"readFile",args:[H,{encoding:"utf8"}]}})),R=(H,D)=>_(oo({id:D,action:"FS",payload:{method:"unlink",args:[H]}})),Y=(H,D,ee)=>_(oo({id:ee,action:"FS",payload:{method:H,args:D}})),te=(H,D)=>_(oo({id:D,action:"loadLanguage",payload:{langs:H,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Ku.DEFAULT,Ku.LSTM_ONLY].includes(f)&&!a.legacyLang}}})),K=(H,D,ee,B)=>_(oo({id:B,action:"initialize",payload:{langs:H,oem:D,config:ee}})),ie=(H="eng",D,ee,B)=>{if(d&&[Ku.TESSERACT_ONLY,Ku.TESSERACT_LSTM_COMBINED].includes(D))throw Error("Legacy model requested but code missing.");let L=D||f;f=L;let $=ee||h;h=$;let G=(typeof H=="string"?H.split("+"):H).filter(ne=>!c.includes(ne));return c.push(...G),G.length>0?te(G,B).then(()=>K(H,L,$,B)):K(H,L,$,B)},j=(H={},D)=>_(oo({id:D,action:"setParameters",payload:{params:H}})),q=async(H,D={},ee={text:!0},B)=>_(oo({id:B,action:"recognize",payload:{image:await Vk(H),options:D,output:ee}})),fe=async(H,D)=>{if(d)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(oo({id:D,action:"detect",payload:{image:await Vk(H)}}))},Ee=async()=>(y!==null&&(f7(y),y=null),Promise.resolve());h7(y,({workerId:H,jobId:D,status:ee,action:B,data:L})=>{let $=`${B}-${D}`;if(ee==="resolve")Gk(`[${H}]: Complete ${D}`),u[$].resolve({jobId:D,data:L}),delete u[$];else if(ee==="reject")if(u[$].reject(L),delete u[$],B==="load"&&m(L),s)s(L);else throw Error(L);else ee==="progress"&&o({...L,userJobId:D})});let ve={id:i,worker:y,load:E,writeText:A,readText:P,removeFile:R,FS:Y,reinitialize:ie,setParameters:j,recognize:q,detect:fe,terminate:Ee};return S().then(()=>te(r)).then(()=>K(r,e,n)).then(()=>b(ve)).catch(()=>{}),v}});var Jk=st((SQ,Zk)=>{"use strict";Oe();ke();Ne();var Kk=o1(),p7=async(r,e,t)=>{let n=await Kk(e,1,t);return n.recognize(r).finally(async()=>{await n.terminate()})},g7=async(r,e)=>{let t=await Kk("osd",0,e);return t.detect(r).finally(async()=>{await t.terminate()})};Zk.exports={recognize:p7,detect:g7}});var eL=st((DQ,Qk)=>{"use strict";Oe();ke();Ne();Qk.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}});var rL=st((kQ,tL)=>{"use strict";Oe();ke();Ne();tL.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}});var iL=st((BQ,nL)=>{"use strict";Oe();ke();Ne();mk();var m7=Ak(),y7=o1(),b7=Jk(),w7=eL(),v7=n1(),_7=rL(),{setLogging:E7}=Nb();nL.exports={languages:w7,OEM:v7,PSM:_7,createScheduler:m7,createWorker:y7,setLogging:E7,...b7}});var _L={};Uo(_L,{Deflate:()=>k7,DeflateRaw:()=>L7,Gunzip:()=>P7,Gzip:()=>M7,Inflate:()=>B7,InflateRaw:()=>F7,Unzip:()=>U7,Z_BEST_COMPRESSION:()=>j7,Z_BEST_SPEED:()=>$7,Z_BINARY:()=>z7,Z_BLOCK:()=>W7,Z_BUF_ERROR:()=>q7,Z_DATA_ERROR:()=>H7,Z_DEFAULT_CHUNK:()=>G7,Z_DEFAULT_COMPRESSION:()=>V7,Z_DEFAULT_LEVEL:()=>Y7,Z_DEFAULT_MEMLEVEL:()=>X7,Z_DEFAULT_STRATEGY:()=>K7,Z_DEFAULT_WINDOWBITS:()=>Z7,Z_DEFLATED:()=>J7,Z_ERRNO:()=>Q7,Z_FILTERED:()=>ez,Z_FINISH:()=>tz,Z_FIXED:()=>rz,Z_FULL_FLUSH:()=>nz,Z_HUFFMAN_ONLY:()=>iz,Z_MAX_CHUNK:()=>sz,Z_MAX_LEVEL:()=>oz,Z_MAX_MEMLEVEL:()=>az,Z_MAX_WINDOWBITS:()=>lz,Z_MIN_CHUNK:()=>uz,Z_MIN_LEVEL:()=>cz,Z_MIN_MEMLEVEL:()=>fz,Z_MIN_WINDOWBITS:()=>hz,Z_NEED_DICT:()=>dz,Z_NO_COMPRESSION:()=>pz,Z_NO_FLUSH:()=>gz,Z_OK:()=>mz,Z_PARTIAL_FLUSH:()=>yz,Z_RLE:()=>bz,Z_STREAM_END:()=>wz,Z_STREAM_ERROR:()=>vz,Z_SYNC_FLUSH:()=>_z,Z_TEXT:()=>Ez,Z_TREES:()=>Az,Z_UNKNOWN:()=>xz,Zlib:()=>Sz,codes:()=>Tz,createDeflate:()=>Cz,createDeflateRaw:()=>Rz,createGunzip:()=>Dz,createGzip:()=>Iz,createInflate:()=>Oz,createInflateRaw:()=>Nz,createUnzip:()=>kz,default:()=>Ke,deflate:()=>Lz,deflateRaw:()=>Pz,deflateRawSync:()=>Mz,deflateSync:()=>Bz,gunzip:()=>Fz,gunzipSync:()=>Uz,gzip:()=>jz,gzipSync:()=>$z,inflate:()=>zz,inflateRaw:()=>Wz,inflateRawSync:()=>qz,inflateSync:()=>Hz,unzip:()=>Gz,unzipSync:()=>Vz});function A7(){if(oL)return a1;oL=!0;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return a1=r,a1}function Lb(){if(aL)return Pn;aL=!0;var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function e(i,o){return Object.prototype.hasOwnProperty.call(i,o)}Pn.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var a in s)e(s,a)&&(i[a]=s[a])}}return i},Pn.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var t={arraySet:function(i,o,s,a,u){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+a),u);return}for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){var o,s,a,u,c,f;for(a=0,o=0,s=i.length;o<s;o++)a+=i[o].length;for(f=new Uint8Array(a),u=0,o=0,s=i.length;o<s;o++)c=i[o],f.set(c,u),u+=c.length;return f}},n={arraySet:function(i,o,s,a,u){for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){return[].concat.apply([],i)}};return Pn.setTyped=function(i){i?(Pn.Buf8=Uint8Array,Pn.Buf16=Uint16Array,Pn.Buf32=Int32Array,Pn.assign(Pn,t)):(Pn.Buf8=Array,Pn.Buf16=Array,Pn.Buf32=Array,Pn.assign(Pn,n))},Pn.setTyped(r),Pn}function x7(){if(lL)return Zu;lL=!0;var r=Lb(),e=4,t=0,n=1,i=2;function o(C){for(var oe=C.length;--oe>=0;)C[oe]=0}var s=0,a=1,u=2,c=3,f=258,h=29,d=256,m=d+1+h,b=30,v=19,w=2*m+1,y=15,_=16,E=7,S=256,A=16,P=17,R=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=512,q=new Array((m+2)*2);o(q);var fe=new Array(b*2);o(fe);var Ee=new Array(j);o(Ee);var ve=new Array(f-c+1);o(ve);var H=new Array(h);o(H);var D=new Array(b);o(D);function ee(C,oe,ce,xe,_e){this.static_tree=C,this.extra_bits=oe,this.extra_base=ce,this.elems=xe,this.max_length=_e,this.has_stree=C&&C.length}var B,L,$;function M(C,oe){this.dyn_tree=C,this.max_code=0,this.stat_desc=oe}function G(C){return C<256?Ee[C]:Ee[256+(C>>>7)]}function ne(C,oe){C.pending_buf[C.pending++]=oe&255,C.pending_buf[C.pending++]=oe>>>8&255}function se(C,oe,ce){C.bi_valid>_-ce?(C.bi_buf|=oe<<C.bi_valid&65535,ne(C,C.bi_buf),C.bi_buf=oe>>_-C.bi_valid,C.bi_valid+=ce-_):(C.bi_buf|=oe<<C.bi_valid&65535,C.bi_valid+=ce)}function z(C,oe,ce){se(C,ce[oe*2],ce[oe*2+1])}function N(C,oe){var ce=0;do ce|=C&1,C>>>=1,ce<<=1;while(--oe>0);return ce>>>1}function F(C){C.bi_valid===16?(ne(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):C.bi_valid>=8&&(C.pending_buf[C.pending++]=C.bi_buf&255,C.bi_buf>>=8,C.bi_valid-=8)}function le(C,oe){var ce=oe.dyn_tree,xe=oe.max_code,_e=oe.stat_desc.static_tree,Re=oe.stat_desc.has_stree,Q=oe.stat_desc.extra_bits,Be=oe.stat_desc.extra_base,tt=oe.stat_desc.max_length,O,Me,$e,ge,Ie,Fe,ut=0;for(ge=0;ge<=y;ge++)C.bl_count[ge]=0;for(ce[C.heap[C.heap_max]*2+1]=0,O=C.heap_max+1;O<w;O++)Me=C.heap[O],ge=ce[ce[Me*2+1]*2+1]+1,ge>tt&&(ge=tt,ut++),ce[Me*2+1]=ge,!(Me>xe)&&(C.bl_count[ge]++,Ie=0,Me>=Be&&(Ie=Q[Me-Be]),Fe=ce[Me*2],C.opt_len+=Fe*(ge+Ie),Re&&(C.static_len+=Fe*(_e[Me*2+1]+Ie)));if(ut!==0){do{for(ge=tt-1;C.bl_count[ge]===0;)ge--;C.bl_count[ge]--,C.bl_count[ge+1]+=2,C.bl_count[tt]--,ut-=2}while(ut>0);for(ge=tt;ge!==0;ge--)for(Me=C.bl_count[ge];Me!==0;)$e=C.heap[--O],!($e>xe)&&(ce[$e*2+1]!==ge&&(C.opt_len+=(ge-ce[$e*2+1])*ce[$e*2],ce[$e*2+1]=ge),Me--)}}function me(C,oe,ce){var xe=new Array(y+1),_e=0,Re,Q;for(Re=1;Re<=y;Re++)xe[Re]=_e=_e+ce[Re-1]<<1;for(Q=0;Q<=oe;Q++){var Be=C[Q*2+1];Be!==0&&(C[Q*2]=N(xe[Be]++,Be))}}function U(){var C,oe,ce,xe,_e,Re=new Array(y+1);for(ce=0,xe=0;xe<h-1;xe++)for(H[xe]=ce,C=0;C<1<<Y[xe];C++)ve[ce++]=xe;for(ve[ce-1]=xe,_e=0,xe=0;xe<16;xe++)for(D[xe]=_e,C=0;C<1<<te[xe];C++)Ee[_e++]=xe;for(_e>>=7;xe<b;xe++)for(D[xe]=_e<<7,C=0;C<1<<te[xe]-7;C++)Ee[256+_e++]=xe;for(oe=0;oe<=y;oe++)Re[oe]=0;for(C=0;C<=143;)q[C*2+1]=8,C++,Re[8]++;for(;C<=255;)q[C*2+1]=9,C++,Re[9]++;for(;C<=279;)q[C*2+1]=7,C++,Re[7]++;for(;C<=287;)q[C*2+1]=8,C++,Re[8]++;for(me(q,m+1,Re),C=0;C<b;C++)fe[C*2+1]=5,fe[C*2]=N(C,5);B=new ee(q,Y,d+1,m,y),L=new ee(fe,te,0,b,y),$=new ee(new Array(0),K,0,v,E)}function I(C){var oe;for(oe=0;oe<m;oe++)C.dyn_ltree[oe*2]=0;for(oe=0;oe<b;oe++)C.dyn_dtree[oe*2]=0;for(oe=0;oe<v;oe++)C.bl_tree[oe*2]=0;C.dyn_ltree[S*2]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0}function Z(C){C.bi_valid>8?ne(C,C.bi_buf):C.bi_valid>0&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0}function ue(C,oe,ce,xe){Z(C),ne(C,ce),ne(C,~ce),r.arraySet(C.pending_buf,C.window,oe,ce,C.pending),C.pending+=ce}function Se(C,oe,ce,xe){var _e=oe*2,Re=ce*2;return C[_e]<C[Re]||C[_e]===C[Re]&&xe[oe]<=xe[ce]}function Ae(C,oe,ce){for(var xe=C.heap[ce],_e=ce<<1;_e<=C.heap_len&&(_e<C.heap_len&&Se(oe,C.heap[_e+1],C.heap[_e],C.depth)&&_e++,!Se(oe,xe,C.heap[_e],C.depth));)C.heap[ce]=C.heap[_e],ce=_e,_e<<=1;C.heap[ce]=xe}function de(C,oe,ce){var xe,_e,Re=0,Q,Be;if(C.last_lit!==0)do xe=C.pending_buf[C.d_buf+Re*2]<<8|C.pending_buf[C.d_buf+Re*2+1],_e=C.pending_buf[C.l_buf+Re],Re++,xe===0?z(C,_e,oe):(Q=ve[_e],z(C,Q+d+1,oe),Be=Y[Q],Be!==0&&(_e-=H[Q],se(C,_e,Be)),xe--,Q=G(xe),z(C,Q,ce),Be=te[Q],Be!==0&&(xe-=D[Q],se(C,xe,Be)));while(Re<C.last_lit);z(C,S,oe)}function be(C,oe){var ce=oe.dyn_tree,xe=oe.stat_desc.static_tree,_e=oe.stat_desc.has_stree,Re=oe.stat_desc.elems,Q,Be,tt=-1,O;for(C.heap_len=0,C.heap_max=w,Q=0;Q<Re;Q++)ce[Q*2]!==0?(C.heap[++C.heap_len]=tt=Q,C.depth[Q]=0):ce[Q*2+1]=0;for(;C.heap_len<2;)O=C.heap[++C.heap_len]=tt<2?++tt:0,ce[O*2]=1,C.depth[O]=0,C.opt_len--,_e&&(C.static_len-=xe[O*2+1]);for(oe.max_code=tt,Q=C.heap_len>>1;Q>=1;Q--)Ae(C,ce,Q);O=Re;do Q=C.heap[1],C.heap[1]=C.heap[C.heap_len--],Ae(C,ce,1),Be=C.heap[1],C.heap[--C.heap_max]=Q,C.heap[--C.heap_max]=Be,ce[O*2]=ce[Q*2]+ce[Be*2],C.depth[O]=(C.depth[Q]>=C.depth[Be]?C.depth[Q]:C.depth[Be])+1,ce[Q*2+1]=ce[Be*2+1]=O,C.heap[1]=O++,Ae(C,ce,1);while(C.heap_len>=2);C.heap[--C.heap_max]=C.heap[1],le(C,oe),me(ce,tt,C.bl_count)}function Le(C,oe,ce){var xe,_e=-1,Re,Q=oe[1],Be=0,tt=7,O=4;for(Q===0&&(tt=138,O=3),oe[(ce+1)*2+1]=65535,xe=0;xe<=ce;xe++)Re=Q,Q=oe[(xe+1)*2+1],!(++Be<tt&&Re===Q)&&(Be<O?C.bl_tree[Re*2]+=Be:Re!==0?(Re!==_e&&C.bl_tree[Re*2]++,C.bl_tree[A*2]++):Be<=10?C.bl_tree[P*2]++:C.bl_tree[R*2]++,Be=0,_e=Re,Q===0?(tt=138,O=3):Re===Q?(tt=6,O=3):(tt=7,O=4))}function De(C,oe,ce){var xe,_e=-1,Re,Q=oe[1],Be=0,tt=7,O=4;for(Q===0&&(tt=138,O=3),xe=0;xe<=ce;xe++)if(Re=Q,Q=oe[(xe+1)*2+1],!(++Be<tt&&Re===Q)){if(Be<O)do z(C,Re,C.bl_tree);while(--Be!==0);else Re!==0?(Re!==_e&&(z(C,Re,C.bl_tree),Be--),z(C,A,C.bl_tree),se(C,Be-3,2)):Be<=10?(z(C,P,C.bl_tree),se(C,Be-3,3)):(z(C,R,C.bl_tree),se(C,Be-11,7));Be=0,_e=Re,Q===0?(tt=138,O=3):Re===Q?(tt=6,O=3):(tt=7,O=4)}}function Te(C){var oe;for(Le(C,C.dyn_ltree,C.l_desc.max_code),Le(C,C.dyn_dtree,C.d_desc.max_code),be(C,C.bl_desc),oe=v-1;oe>=3&&C.bl_tree[ie[oe]*2+1]===0;oe--);return C.opt_len+=3*(oe+1)+5+5+4,oe}function ze(C,oe,ce,xe){var _e;for(se(C,oe-257,5),se(C,ce-1,5),se(C,xe-4,4),_e=0;_e<xe;_e++)se(C,C.bl_tree[ie[_e]*2+1],3);De(C,C.dyn_ltree,oe-1),De(C,C.dyn_dtree,ce-1)}function He(C){var oe=4093624447,ce;for(ce=0;ce<=31;ce++,oe>>>=1)if(oe&1&&C.dyn_ltree[ce*2]!==0)return t;if(C.dyn_ltree[18]!==0||C.dyn_ltree[20]!==0||C.dyn_ltree[26]!==0)return n;for(ce=32;ce<d;ce++)if(C.dyn_ltree[ce*2]!==0)return n;return t}var We=!1;function x(C){We||(U(),We=!0),C.l_desc=new M(C.dyn_ltree,B),C.d_desc=new M(C.dyn_dtree,L),C.bl_desc=new M(C.bl_tree,$),C.bi_buf=0,C.bi_valid=0,I(C)}function g(C,oe,ce,xe){se(C,(s<<1)+(xe?1:0),3),ue(C,oe,ce)}function p(C){se(C,a<<1,3),z(C,S,q),F(C)}function T(C,oe,ce,xe){var _e,Re,Q=0;C.level>0?(C.strm.data_type===i&&(C.strm.data_type=He(C)),be(C,C.l_desc),be(C,C.d_desc),Q=Te(C),_e=C.opt_len+3+7>>>3,Re=C.static_len+3+7>>>3,Re<=_e&&(_e=Re)):_e=Re=ce+5,ce+4<=_e&&oe!==-1?g(C,oe,ce,xe):C.strategy===e||Re===_e?(se(C,(a<<1)+(xe?1:0),3),de(C,q,fe)):(se(C,(u<<1)+(xe?1:0),3),ze(C,C.l_desc.max_code+1,C.d_desc.max_code+1,Q+1),de(C,C.dyn_ltree,C.dyn_dtree)),I(C),xe&&Z(C)}function J(C,oe,ce){return C.pending_buf[C.d_buf+C.last_lit*2]=oe>>>8&255,C.pending_buf[C.d_buf+C.last_lit*2+1]=oe&255,C.pending_buf[C.l_buf+C.last_lit]=ce&255,C.last_lit++,oe===0?C.dyn_ltree[ce*2]++:(C.matches++,oe--,C.dyn_ltree[(ve[ce]+d+1)*2]++,C.dyn_dtree[G(oe)*2]++),C.last_lit===C.lit_bufsize-1}return Zu._tr_init=x,Zu._tr_stored_block=g,Zu._tr_flush_block=T,Zu._tr_tally=J,Zu._tr_align=p,Zu}function wL(){if(uL)return l1;uL=!0;function r(e,t,n,i){for(var o=e&65535|0,s=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do o=o+t[i++]|0,s=s+o|0;while(--a);o%=65521,s%=65521}return o|s<<16|0}return l1=r,l1}function vL(){if(cL)return u1;cL=!0;function r(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i}var e=r();function t(n,i,o,s){var a=e,u=s+o;n^=-1;for(var c=s;c<u;c++)n=n>>>8^a[(n^i[c])&255];return n^-1}return u1=t,u1}function S7(){return fL||(fL=!0,c1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),c1}function T7(){if(hL)return Os;hL=!0;var r=Lb(),e=x7(),t=wL(),n=vL(),i=S7(),o=0,s=1,a=3,u=4,c=5,f=0,h=1,d=-2,m=-3,b=-5,v=-1,w=1,y=2,_=3,E=4,S=0,A=2,P=8,R=9,Y=15,te=8,K=29,ie=256,j=ie+1+K,q=30,fe=19,Ee=2*j+1,ve=15,H=3,D=258,ee=D+H+1,B=32,L=42,$=69,M=73,G=91,ne=103,se=113,z=666,N=1,F=2,le=3,me=4,U=3;function I(O,Me){return O.msg=i[Me],Me}function Z(O){return(O<<1)-(O>4?9:0)}function ue(O){for(var Me=O.length;--Me>=0;)O[Me]=0}function Se(O){var Me=O.state,$e=Me.pending;$e>O.avail_out&&($e=O.avail_out),$e!==0&&(r.arraySet(O.output,Me.pending_buf,Me.pending_out,$e,O.next_out),O.next_out+=$e,Me.pending_out+=$e,O.total_out+=$e,O.avail_out-=$e,Me.pending-=$e,Me.pending===0&&(Me.pending_out=0))}function Ae(O,Me){e._tr_flush_block(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,Me),O.block_start=O.strstart,Se(O.strm)}function de(O,Me){O.pending_buf[O.pending++]=Me}function be(O,Me){O.pending_buf[O.pending++]=Me>>>8&255,O.pending_buf[O.pending++]=Me&255}function Le(O,Me,$e,ge){var Ie=O.avail_in;return Ie>ge&&(Ie=ge),Ie===0?0:(O.avail_in-=Ie,r.arraySet(Me,O.input,O.next_in,Ie,$e),O.state.wrap===1?O.adler=t(O.adler,Me,Ie,$e):O.state.wrap===2&&(O.adler=n(O.adler,Me,Ie,$e)),O.next_in+=Ie,O.total_in+=Ie,Ie)}function De(O,Me){var $e=O.max_chain_length,ge=O.strstart,Ie,Fe,ut=O.prev_length,he=O.nice_match,ye=O.strstart>O.w_size-ee?O.strstart-(O.w_size-ee):0,Ge=O.window,je=O.w_mask,Qe=O.prev,dt=O.strstart+D,Rt=Ge[ge+ut-1],Et=Ge[ge+ut];O.prev_length>=O.good_match&&($e>>=2),he>O.lookahead&&(he=O.lookahead);do if(Ie=Me,!(Ge[Ie+ut]!==Et||Ge[Ie+ut-1]!==Rt||Ge[Ie]!==Ge[ge]||Ge[++Ie]!==Ge[ge+1])){ge+=2,Ie++;do;while(Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&Ge[++ge]===Ge[++Ie]&&ge<dt);if(Fe=D-(dt-ge),ge=dt-D,Fe>ut){if(O.match_start=Me,ut=Fe,Fe>=he)break;Rt=Ge[ge+ut-1],Et=Ge[ge+ut]}}while((Me=Qe[Me&je])>ye&&--$e!==0);return ut<=O.lookahead?ut:O.lookahead}function Te(O){var Me=O.w_size,$e,ge,Ie,Fe,ut;do{if(Fe=O.window_size-O.lookahead-O.strstart,O.strstart>=Me+(Me-ee)){r.arraySet(O.window,O.window,Me,Me,0),O.match_start-=Me,O.strstart-=Me,O.block_start-=Me,ge=O.hash_size,$e=ge;do Ie=O.head[--$e],O.head[$e]=Ie>=Me?Ie-Me:0;while(--ge);ge=Me,$e=ge;do Ie=O.prev[--$e],O.prev[$e]=Ie>=Me?Ie-Me:0;while(--ge);Fe+=Me}if(O.strm.avail_in===0)break;if(ge=Le(O.strm,O.window,O.strstart+O.lookahead,Fe),O.lookahead+=ge,O.lookahead+O.insert>=H)for(ut=O.strstart-O.insert,O.ins_h=O.window[ut],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ut+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ut+H-1])&O.hash_mask,O.prev[ut&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ut,ut++,O.insert--,!(O.lookahead+O.insert<H)););}while(O.lookahead<ee&&O.strm.avail_in!==0)}function ze(O,Me){var $e=65535;for($e>O.pending_buf_size-5&&($e=O.pending_buf_size-5);;){if(O.lookahead<=1){if(Te(O),O.lookahead===0&&Me===o)return N;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var ge=O.block_start+$e;if((O.strstart===0||O.strstart>=ge)&&(O.lookahead=O.strstart-ge,O.strstart=ge,Ae(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-ee&&(Ae(O,!1),O.strm.avail_out===0))return N}return O.insert=0,Me===u?(Ae(O,!0),O.strm.avail_out===0?le:me):(O.strstart>O.block_start&&(Ae(O,!1),O.strm.avail_out===0),N)}function He(O,Me){for(var $e,ge;;){if(O.lookahead<ee){if(Te(O),O.lookahead<ee&&Me===o)return N;if(O.lookahead===0)break}if($e=0,O.lookahead>=H&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+H-1])&O.hash_mask,$e=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),$e!==0&&O.strstart-$e<=O.w_size-ee&&(O.match_length=De(O,$e)),O.match_length>=H)if(ge=e._tr_tally(O,O.strstart-O.match_start,O.match_length-H),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=H){O.match_length--;do O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+H-1])&O.hash_mask,$e=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else ge=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(ge&&(Ae(O,!1),O.strm.avail_out===0))return N}return O.insert=O.strstart<H-1?O.strstart:H-1,Me===u?(Ae(O,!0),O.strm.avail_out===0?le:me):O.last_lit&&(Ae(O,!1),O.strm.avail_out===0)?N:F}function We(O,Me){for(var $e,ge,Ie;;){if(O.lookahead<ee){if(Te(O),O.lookahead<ee&&Me===o)return N;if(O.lookahead===0)break}if($e=0,O.lookahead>=H&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+H-1])&O.hash_mask,$e=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=H-1,$e!==0&&O.prev_length<O.max_lazy_match&&O.strstart-$e<=O.w_size-ee&&(O.match_length=De(O,$e),O.match_length<=5&&(O.strategy===w||O.match_length===H&&O.strstart-O.match_start>4096)&&(O.match_length=H-1)),O.prev_length>=H&&O.match_length<=O.prev_length){Ie=O.strstart+O.lookahead-H,ge=e._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-H),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=Ie&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+H-1])&O.hash_mask,$e=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=H-1,O.strstart++,ge&&(Ae(O,!1),O.strm.avail_out===0))return N}else if(O.match_available){if(ge=e._tr_tally(O,0,O.window[O.strstart-1]),ge&&Ae(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return N}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(ge=e._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<H-1?O.strstart:H-1,Me===u?(Ae(O,!0),O.strm.avail_out===0?le:me):O.last_lit&&(Ae(O,!1),O.strm.avail_out===0)?N:F}function x(O,Me){for(var $e,ge,Ie,Fe,ut=O.window;;){if(O.lookahead<=D){if(Te(O),O.lookahead<=D&&Me===o)return N;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=H&&O.strstart>0&&(Ie=O.strstart-1,ge=ut[Ie],ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie])){Fe=O.strstart+D;do;while(ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&ge===ut[++Ie]&&Ie<Fe);O.match_length=D-(Fe-Ie),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=H?($e=e._tr_tally(O,1,O.match_length-H),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):($e=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),$e&&(Ae(O,!1),O.strm.avail_out===0))return N}return O.insert=0,Me===u?(Ae(O,!0),O.strm.avail_out===0?le:me):O.last_lit&&(Ae(O,!1),O.strm.avail_out===0)?N:F}function g(O,Me){for(var $e;;){if(O.lookahead===0&&(Te(O),O.lookahead===0)){if(Me===o)return N;break}if(O.match_length=0,$e=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,$e&&(Ae(O,!1),O.strm.avail_out===0))return N}return O.insert=0,Me===u?(Ae(O,!0),O.strm.avail_out===0?le:me):O.last_lit&&(Ae(O,!1),O.strm.avail_out===0)?N:F}function p(O,Me,$e,ge,Ie){this.good_length=O,this.max_lazy=Me,this.nice_length=$e,this.max_chain=ge,this.func=Ie}var T;T=[new p(0,0,0,0,ze),new p(4,4,8,4,He),new p(4,5,16,8,He),new p(4,6,32,32,He),new p(4,4,16,16,We),new p(8,16,32,32,We),new p(8,16,128,128,We),new p(8,32,128,256,We),new p(32,128,258,1024,We),new p(32,258,258,4096,We)];function J(O){O.window_size=2*O.w_size,ue(O.head),O.max_lazy_match=T[O.level].max_lazy,O.good_match=T[O.level].good_length,O.nice_match=T[O.level].nice_length,O.max_chain_length=T[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=H-1,O.match_available=0,O.ins_h=0}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(Ee*2),this.dyn_dtree=new r.Buf16((2*q+1)*2),this.bl_tree=new r.Buf16((2*fe+1)*2),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(ve+1),this.heap=new r.Buf16(2*j+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*j+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oe(O){var Me;return!O||!O.state?I(O,d):(O.total_in=O.total_out=0,O.data_type=A,Me=O.state,Me.pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?L:se,O.adler=Me.wrap===2?0:1,Me.last_flush=o,e._tr_init(Me),f)}function ce(O){var Me=oe(O);return Me===f&&J(O.state),Me}function xe(O,Me){return!O||!O.state||O.state.wrap!==2?d:(O.state.gzhead=Me,f)}function _e(O,Me,$e,ge,Ie,Fe){if(!O)return d;var ut=1;if(Me===v&&(Me=6),ge<0?(ut=0,ge=-ge):ge>15&&(ut=2,ge-=16),Ie<1||Ie>R||$e!==P||ge<8||ge>15||Me<0||Me>9||Fe<0||Fe>E)return I(O,d);ge===8&&(ge=9);var he=new C;return O.state=he,he.strm=O,he.wrap=ut,he.gzhead=null,he.w_bits=ge,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=Ie+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+H-1)/H),he.window=new r.Buf8(he.w_size*2),he.head=new r.Buf16(he.hash_size),he.prev=new r.Buf16(he.w_size),he.lit_bufsize=1<<Ie+6,he.pending_buf_size=he.lit_bufsize*4,he.pending_buf=new r.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=Me,he.strategy=Fe,he.method=$e,ce(O)}function Re(O,Me){return _e(O,Me,P,Y,te,S)}function Q(O,Me){var $e,ge,Ie,Fe;if(!O||!O.state||Me>c||Me<0)return O?I(O,d):d;if(ge=O.state,!O.output||!O.input&&O.avail_in!==0||ge.status===z&&Me!==u)return I(O,O.avail_out===0?b:d);if(ge.strm=O,$e=ge.last_flush,ge.last_flush=Me,ge.status===L)if(ge.wrap===2)O.adler=0,de(ge,31),de(ge,139),de(ge,8),ge.gzhead?(de(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),de(ge,ge.gzhead.time&255),de(ge,ge.gzhead.time>>8&255),de(ge,ge.gzhead.time>>16&255),de(ge,ge.gzhead.time>>24&255),de(ge,ge.level===9?2:ge.strategy>=y||ge.level<2?4:0),de(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(de(ge,ge.gzhead.extra.length&255),de(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(O.adler=n(O.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=$):(de(ge,0),de(ge,0),de(ge,0),de(ge,0),de(ge,0),de(ge,ge.level===9?2:ge.strategy>=y||ge.level<2?4:0),de(ge,U),ge.status=se);else{var ut=P+(ge.w_bits-8<<4)<<8,he=-1;ge.strategy>=y||ge.level<2?he=0:ge.level<6?he=1:ge.level===6?he=2:he=3,ut|=he<<6,ge.strstart!==0&&(ut|=B),ut+=31-ut%31,ge.status=se,be(ge,ut),ge.strstart!==0&&(be(ge,O.adler>>>16),be(ge,O.adler&65535)),O.adler=1}if(ge.status===$)if(ge.gzhead.extra){for(Ie=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),Se(O),Ie=ge.pending,ge.pending===ge.pending_buf_size));)de(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=M)}else ge.status=M;if(ge.status===M)if(ge.gzhead.name){Ie=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),Se(O),Ie=ge.pending,ge.pending===ge.pending_buf_size)){Fe=1;break}ge.gzindex<ge.gzhead.name.length?Fe=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Fe=0,de(ge,Fe)}while(Fe!==0);ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),Fe===0&&(ge.gzindex=0,ge.status=G)}else ge.status=G;if(ge.status===G)if(ge.gzhead.comment){Ie=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),Se(O),Ie=ge.pending,ge.pending===ge.pending_buf_size)){Fe=1;break}ge.gzindex<ge.gzhead.comment.length?Fe=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Fe=0,de(ge,Fe)}while(Fe!==0);ge.gzhead.hcrc&&ge.pending>Ie&&(O.adler=n(O.adler,ge.pending_buf,ge.pending-Ie,Ie)),Fe===0&&(ge.status=ne)}else ge.status=ne;if(ge.status===ne&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Se(O),ge.pending+2<=ge.pending_buf_size&&(de(ge,O.adler&255),de(ge,O.adler>>8&255),O.adler=0,ge.status=se)):ge.status=se),ge.pending!==0){if(Se(O),O.avail_out===0)return ge.last_flush=-1,f}else if(O.avail_in===0&&Z(Me)<=Z($e)&&Me!==u)return I(O,b);if(ge.status===z&&O.avail_in!==0)return I(O,b);if(O.avail_in!==0||ge.lookahead!==0||Me!==o&&ge.status!==z){var ye=ge.strategy===y?g(ge,Me):ge.strategy===_?x(ge,Me):T[ge.level].func(ge,Me);if((ye===le||ye===me)&&(ge.status=z),ye===N||ye===le)return O.avail_out===0&&(ge.last_flush=-1),f;if(ye===F&&(Me===s?e._tr_align(ge):Me!==c&&(e._tr_stored_block(ge,0,0,!1),Me===a&&(ue(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Se(O),O.avail_out===0))return ge.last_flush=-1,f}return Me!==u?f:ge.wrap<=0?h:(ge.wrap===2?(de(ge,O.adler&255),de(ge,O.adler>>8&255),de(ge,O.adler>>16&255),de(ge,O.adler>>24&255),de(ge,O.total_in&255),de(ge,O.total_in>>8&255),de(ge,O.total_in>>16&255),de(ge,O.total_in>>24&255)):(be(ge,O.adler>>>16),be(ge,O.adler&65535)),Se(O),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?f:h)}function Be(O){var Me;return!O||!O.state?d:(Me=O.state.status,Me!==L&&Me!==$&&Me!==M&&Me!==G&&Me!==ne&&Me!==se&&Me!==z?I(O,d):(O.state=null,Me===se?I(O,m):f))}function tt(O,Me){var $e=Me.length,ge,Ie,Fe,ut,he,ye,Ge,je;if(!O||!O.state||(ge=O.state,ut=ge.wrap,ut===2||ut===1&&ge.status!==L||ge.lookahead))return d;for(ut===1&&(O.adler=t(O.adler,Me,$e,0)),ge.wrap=0,$e>=ge.w_size&&(ut===0&&(ue(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),je=new r.Buf8(ge.w_size),r.arraySet(je,Me,$e-ge.w_size,ge.w_size,0),Me=je,$e=ge.w_size),he=O.avail_in,ye=O.next_in,Ge=O.input,O.avail_in=$e,O.next_in=0,O.input=Me,Te(ge);ge.lookahead>=H;){Ie=ge.strstart,Fe=ge.lookahead-(H-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[Ie+H-1])&ge.hash_mask,ge.prev[Ie&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=Ie,Ie++;while(--Fe);ge.strstart=Ie,ge.lookahead=H-1,Te(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=H-1,ge.match_available=0,O.next_in=ye,O.input=Ge,O.avail_in=he,ge.wrap=ut,f}return Os.deflateInit=Re,Os.deflateInit2=_e,Os.deflateReset=ce,Os.deflateResetKeep=oe,Os.deflateSetHeader=xe,Os.deflate=Q,Os.deflateEnd=Be,Os.deflateSetDictionary=tt,Os.deflateInfo="pako deflate (from Nodeca project)",Os}function C7(){if(dL)return f1;dL=!0;var r=30,e=12;return f1=function(n,i){var o,s,a,u,c,f,h,d,m,b,v,w,y,_,E,S,A,P,R,Y,te,K,ie,j,q;o=n.state,s=n.next_in,j=n.input,a=s+(n.avail_in-5),u=n.next_out,q=n.output,c=u-(i-n.avail_out),f=u+(n.avail_out-257),h=o.dmax,d=o.wsize,m=o.whave,b=o.wnext,v=o.window,w=o.hold,y=o.bits,_=o.lencode,E=o.distcode,S=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{y<15&&(w+=j[s++]<<y,y+=8,w+=j[s++]<<y,y+=8),P=_[w&S];t:for(;;){if(R=P>>>24,w>>>=R,y-=R,R=P>>>16&255,R===0)q[u++]=P&65535;else if(R&16){Y=P&65535,R&=15,R&&(y<R&&(w+=j[s++]<<y,y+=8),Y+=w&(1<<R)-1,w>>>=R,y-=R),y<15&&(w+=j[s++]<<y,y+=8,w+=j[s++]<<y,y+=8),P=E[w&A];r:for(;;){if(R=P>>>24,w>>>=R,y-=R,R=P>>>16&255,R&16){if(te=P&65535,R&=15,y<R&&(w+=j[s++]<<y,y+=8,y<R&&(w+=j[s++]<<y,y+=8)),te+=w&(1<<R)-1,te>h){n.msg="invalid distance too far back",o.mode=r;break e}if(w>>>=R,y-=R,R=u-c,te>R){if(R=te-R,R>m&&o.sane){n.msg="invalid distance too far back",o.mode=r;break e}if(K=0,ie=v,b===0){if(K+=d-R,R<Y){Y-=R;do q[u++]=v[K++];while(--R);K=u-te,ie=q}}else if(b<R){if(K+=d+b-R,R-=b,R<Y){Y-=R;do q[u++]=v[K++];while(--R);if(K=0,b<Y){R=b,Y-=R;do q[u++]=v[K++];while(--R);K=u-te,ie=q}}}else if(K+=b-R,R<Y){Y-=R;do q[u++]=v[K++];while(--R);K=u-te,ie=q}for(;Y>2;)q[u++]=ie[K++],q[u++]=ie[K++],q[u++]=ie[K++],Y-=3;Y&&(q[u++]=ie[K++],Y>1&&(q[u++]=ie[K++]))}else{K=u-te;do q[u++]=q[K++],q[u++]=q[K++],q[u++]=q[K++],Y-=3;while(Y>2);Y&&(q[u++]=q[K++],Y>1&&(q[u++]=q[K++]))}}else if((R&64)===0){P=E[(P&65535)+(w&(1<<R)-1)];continue r}else{n.msg="invalid distance code",o.mode=r;break e}break}}else if((R&64)===0){P=_[(P&65535)+(w&(1<<R)-1)];continue t}else if(R&32){o.mode=e;break e}else{n.msg="invalid literal/length code",o.mode=r;break e}break}}while(s<a&&u<f);Y=y>>3,s-=Y,y-=Y<<3,w&=(1<<y)-1,n.next_in=s,n.next_out=u,n.avail_in=s<a?5+(a-s):5-(s-a),n.avail_out=u<f?257+(f-u):257-(u-f),o.hold=w,o.bits=y},f1}function R7(){if(pL)return h1;pL=!0;var r=Lb(),e=15,t=852,n=592,i=0,o=1,s=2,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return h1=function(d,m,b,v,w,y,_,E){var S=E.bits,A=0,P=0,R=0,Y=0,te=0,K=0,ie=0,j=0,q=0,fe=0,Ee,ve,H,D,ee,B=null,L=0,$,M=new r.Buf16(e+1),G=new r.Buf16(e+1),ne=null,se=0,z,N,F;for(A=0;A<=e;A++)M[A]=0;for(P=0;P<v;P++)M[m[b+P]]++;for(te=S,Y=e;Y>=1&&M[Y]===0;Y--);if(te>Y&&(te=Y),Y===0)return w[y++]=1<<24|64<<16|0,w[y++]=1<<24|64<<16|0,E.bits=1,0;for(R=1;R<Y&&M[R]===0;R++);for(te<R&&(te=R),j=1,A=1;A<=e;A++)if(j<<=1,j-=M[A],j<0)return-1;if(j>0&&(d===i||Y!==1))return-1;for(G[1]=0,A=1;A<e;A++)G[A+1]=G[A]+M[A];for(P=0;P<v;P++)m[b+P]!==0&&(_[G[m[b+P]]++]=P);if(d===i?(B=ne=_,$=19):d===o?(B=a,L-=257,ne=u,se-=257,$=256):(B=c,ne=f,$=-1),fe=0,P=0,A=R,ee=y,K=te,ie=0,H=-1,q=1<<te,D=q-1,d===o&&q>t||d===s&&q>n)return 1;for(;;){z=A-ie,_[P]<$?(N=0,F=_[P]):_[P]>$?(N=ne[se+_[P]],F=B[L+_[P]]):(N=96,F=0),Ee=1<<A-ie,ve=1<<K,R=ve;do ve-=Ee,w[ee+(fe>>ie)+ve]=z<<24|N<<16|F|0;while(ve!==0);for(Ee=1<<A-1;fe&Ee;)Ee>>=1;if(Ee!==0?(fe&=Ee-1,fe+=Ee):fe=0,P++,--M[A]===0){if(A===Y)break;A=m[b+_[P]]}if(A>te&&(fe&D)!==H){for(ie===0&&(ie=te),ee+=R,K=A-ie,j=1<<K;K+ie<Y&&(j-=M[K+ie],!(j<=0));)K++,j<<=1;if(q+=1<<K,d===o&&q>t||d===s&&q>n)return 1;H=fe&D,w[H]=te<<24|K<<16|ee-y|0}}return fe!==0&&(w[ee+fe]=A-ie<<24|64<<16|0),E.bits=te,0},h1}function D7(){if(gL)return is;gL=!0;var r=Lb(),e=wL(),t=vL(),n=C7(),i=R7(),o=0,s=1,a=2,u=4,c=5,f=6,h=0,d=1,m=2,b=-2,v=-3,w=-4,y=-5,_=8,E=1,S=2,A=3,P=4,R=5,Y=6,te=7,K=8,ie=9,j=10,q=11,fe=12,Ee=13,ve=14,H=15,D=16,ee=17,B=18,L=19,$=20,M=21,G=22,ne=23,se=24,z=25,N=26,F=27,le=28,me=29,U=30,I=31,Z=32,ue=852,Se=592,Ae=15,de=Ae;function be(_e){return(_e>>>24&255)+(_e>>>8&65280)+((_e&65280)<<8)+((_e&255)<<24)}function Le(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function De(_e){var Re;return!_e||!_e.state?b:(Re=_e.state,_e.total_in=_e.total_out=Re.total=0,_e.msg="",Re.wrap&&(_e.adler=Re.wrap&1),Re.mode=E,Re.last=0,Re.havedict=0,Re.dmax=32768,Re.head=null,Re.hold=0,Re.bits=0,Re.lencode=Re.lendyn=new r.Buf32(ue),Re.distcode=Re.distdyn=new r.Buf32(Se),Re.sane=1,Re.back=-1,h)}function Te(_e){var Re;return!_e||!_e.state?b:(Re=_e.state,Re.wsize=0,Re.whave=0,Re.wnext=0,De(_e))}function ze(_e,Re){var Q,Be;return!_e||!_e.state||(Be=_e.state,Re<0?(Q=0,Re=-Re):(Q=(Re>>4)+1,Re<48&&(Re&=15)),Re&&(Re<8||Re>15))?b:(Be.window!==null&&Be.wbits!==Re&&(Be.window=null),Be.wrap=Q,Be.wbits=Re,Te(_e))}function He(_e,Re){var Q,Be;return _e?(Be=new Le,_e.state=Be,Be.window=null,Q=ze(_e,Re),Q!==h&&(_e.state=null),Q):b}function We(_e){return He(_e,de)}var x=!0,g,p;function T(_e){if(x){var Re;for(g=new r.Buf32(512),p=new r.Buf32(32),Re=0;Re<144;)_e.lens[Re++]=8;for(;Re<256;)_e.lens[Re++]=9;for(;Re<280;)_e.lens[Re++]=7;for(;Re<288;)_e.lens[Re++]=8;for(i(s,_e.lens,0,288,g,0,_e.work,{bits:9}),Re=0;Re<32;)_e.lens[Re++]=5;i(a,_e.lens,0,32,p,0,_e.work,{bits:5}),x=!1}_e.lencode=g,_e.lenbits=9,_e.distcode=p,_e.distbits=5}function J(_e,Re,Q,Be){var tt,O=_e.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new r.Buf8(O.wsize)),Be>=O.wsize?(r.arraySet(O.window,Re,Q-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(tt=O.wsize-O.wnext,tt>Be&&(tt=Be),r.arraySet(O.window,Re,Q-Be,tt,O.wnext),Be-=tt,Be?(r.arraySet(O.window,Re,Q-Be,Be,0),O.wnext=Be,O.whave=O.wsize):(O.wnext+=tt,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=tt))),0}function C(_e,Re){var Q,Be,tt,O,Me,$e,ge,Ie,Fe,ut,he,ye,Ge,je,Qe=0,dt,Rt,Et,ar,_i,qn,Ht,Dr,yr=new r.Buf8(4),Wt,Yt,Zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_e||!_e.state||!_e.output||!_e.input&&_e.avail_in!==0)return b;Q=_e.state,Q.mode===fe&&(Q.mode=Ee),Me=_e.next_out,tt=_e.output,ge=_e.avail_out,O=_e.next_in,Be=_e.input,$e=_e.avail_in,Ie=Q.hold,Fe=Q.bits,ut=$e,he=ge,Dr=h;e:for(;;)switch(Q.mode){case E:if(Q.wrap===0){Q.mode=Ee;break}for(;Fe<16;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Q.wrap&2&&Ie===35615){Q.check=0,yr[0]=Ie&255,yr[1]=Ie>>>8&255,Q.check=t(Q.check,yr,2,0),Ie=0,Fe=0,Q.mode=S;break}if(Q.flags=0,Q.head&&(Q.head.done=!1),!(Q.wrap&1)||(((Ie&255)<<8)+(Ie>>8))%31){_e.msg="incorrect header check",Q.mode=U;break}if((Ie&15)!==_){_e.msg="unknown compression method",Q.mode=U;break}if(Ie>>>=4,Fe-=4,Ht=(Ie&15)+8,Q.wbits===0)Q.wbits=Ht;else if(Ht>Q.wbits){_e.msg="invalid window size",Q.mode=U;break}Q.dmax=1<<Ht,_e.adler=Q.check=1,Q.mode=Ie&512?j:fe,Ie=0,Fe=0;break;case S:for(;Fe<16;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Q.flags=Ie,(Q.flags&255)!==_){_e.msg="unknown compression method",Q.mode=U;break}if(Q.flags&57344){_e.msg="unknown header flags set",Q.mode=U;break}Q.head&&(Q.head.text=Ie>>8&1),Q.flags&512&&(yr[0]=Ie&255,yr[1]=Ie>>>8&255,Q.check=t(Q.check,yr,2,0)),Ie=0,Fe=0,Q.mode=A;case A:for(;Fe<32;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.head&&(Q.head.time=Ie),Q.flags&512&&(yr[0]=Ie&255,yr[1]=Ie>>>8&255,yr[2]=Ie>>>16&255,yr[3]=Ie>>>24&255,Q.check=t(Q.check,yr,4,0)),Ie=0,Fe=0,Q.mode=P;case P:for(;Fe<16;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.head&&(Q.head.xflags=Ie&255,Q.head.os=Ie>>8),Q.flags&512&&(yr[0]=Ie&255,yr[1]=Ie>>>8&255,Q.check=t(Q.check,yr,2,0)),Ie=0,Fe=0,Q.mode=R;case R:if(Q.flags&1024){for(;Fe<16;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.length=Ie,Q.head&&(Q.head.extra_len=Ie),Q.flags&512&&(yr[0]=Ie&255,yr[1]=Ie>>>8&255,Q.check=t(Q.check,yr,2,0)),Ie=0,Fe=0}else Q.head&&(Q.head.extra=null);Q.mode=Y;case Y:if(Q.flags&1024&&(ye=Q.length,ye>$e&&(ye=$e),ye&&(Q.head&&(Ht=Q.head.extra_len-Q.length,Q.head.extra||(Q.head.extra=new Array(Q.head.extra_len)),r.arraySet(Q.head.extra,Be,O,ye,Ht)),Q.flags&512&&(Q.check=t(Q.check,Be,ye,O)),$e-=ye,O+=ye,Q.length-=ye),Q.length))break e;Q.length=0,Q.mode=te;case te:if(Q.flags&2048){if($e===0)break e;ye=0;do Ht=Be[O+ye++],Q.head&&Ht&&Q.length<65536&&(Q.head.name+=String.fromCharCode(Ht));while(Ht&&ye<$e);if(Q.flags&512&&(Q.check=t(Q.check,Be,ye,O)),$e-=ye,O+=ye,Ht)break e}else Q.head&&(Q.head.name=null);Q.length=0,Q.mode=K;case K:if(Q.flags&4096){if($e===0)break e;ye=0;do Ht=Be[O+ye++],Q.head&&Ht&&Q.length<65536&&(Q.head.comment+=String.fromCharCode(Ht));while(Ht&&ye<$e);if(Q.flags&512&&(Q.check=t(Q.check,Be,ye,O)),$e-=ye,O+=ye,Ht)break e}else Q.head&&(Q.head.comment=null);Q.mode=ie;case ie:if(Q.flags&512){for(;Fe<16;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Ie!==(Q.check&65535)){_e.msg="header crc mismatch",Q.mode=U;break}Ie=0,Fe=0}Q.head&&(Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0),_e.adler=Q.check=0,Q.mode=fe;break;case j:for(;Fe<32;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}_e.adler=Q.check=be(Ie),Ie=0,Fe=0,Q.mode=q;case q:if(Q.havedict===0)return _e.next_out=Me,_e.avail_out=ge,_e.next_in=O,_e.avail_in=$e,Q.hold=Ie,Q.bits=Fe,m;_e.adler=Q.check=1,Q.mode=fe;case fe:if(Re===c||Re===f)break e;case Ee:if(Q.last){Ie>>>=Fe&7,Fe-=Fe&7,Q.mode=F;break}for(;Fe<3;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}switch(Q.last=Ie&1,Ie>>>=1,Fe-=1,Ie&3){case 0:Q.mode=ve;break;case 1:if(T(Q),Q.mode=$,Re===f){Ie>>>=2,Fe-=2;break e}break;case 2:Q.mode=ee;break;case 3:_e.msg="invalid block type",Q.mode=U}Ie>>>=2,Fe-=2;break;case ve:for(Ie>>>=Fe&7,Fe-=Fe&7;Fe<32;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if((Ie&65535)!==(Ie>>>16^65535)){_e.msg="invalid stored block lengths",Q.mode=U;break}if(Q.length=Ie&65535,Ie=0,Fe=0,Q.mode=H,Re===f)break e;case H:Q.mode=D;case D:if(ye=Q.length,ye){if(ye>$e&&(ye=$e),ye>ge&&(ye=ge),ye===0)break e;r.arraySet(tt,Be,O,ye,Me),$e-=ye,O+=ye,ge-=ye,Me+=ye,Q.length-=ye;break}Q.mode=fe;break;case ee:for(;Fe<14;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Q.nlen=(Ie&31)+257,Ie>>>=5,Fe-=5,Q.ndist=(Ie&31)+1,Ie>>>=5,Fe-=5,Q.ncode=(Ie&15)+4,Ie>>>=4,Fe-=4,Q.nlen>286||Q.ndist>30){_e.msg="too many length or distance symbols",Q.mode=U;break}Q.have=0,Q.mode=B;case B:for(;Q.have<Q.ncode;){for(;Fe<3;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.lens[Zr[Q.have++]]=Ie&7,Ie>>>=3,Fe-=3}for(;Q.have<19;)Q.lens[Zr[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,Wt={bits:Q.lenbits},Dr=i(o,Q.lens,0,19,Q.lencode,0,Q.work,Wt),Q.lenbits=Wt.bits,Dr){_e.msg="invalid code lengths set",Q.mode=U;break}Q.have=0,Q.mode=L;case L:for(;Q.have<Q.nlen+Q.ndist;){for(;Qe=Q.lencode[Ie&(1<<Q.lenbits)-1],dt=Qe>>>24,Rt=Qe>>>16&255,Et=Qe&65535,!(dt<=Fe);){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Et<16)Ie>>>=dt,Fe-=dt,Q.lens[Q.have++]=Et;else{if(Et===16){for(Yt=dt+2;Fe<Yt;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Ie>>>=dt,Fe-=dt,Q.have===0){_e.msg="invalid bit length repeat",Q.mode=U;break}Ht=Q.lens[Q.have-1],ye=3+(Ie&3),Ie>>>=2,Fe-=2}else if(Et===17){for(Yt=dt+3;Fe<Yt;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Ie>>>=dt,Fe-=dt,Ht=0,ye=3+(Ie&7),Ie>>>=3,Fe-=3}else{for(Yt=dt+7;Fe<Yt;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Ie>>>=dt,Fe-=dt,Ht=0,ye=11+(Ie&127),Ie>>>=7,Fe-=7}if(Q.have+ye>Q.nlen+Q.ndist){_e.msg="invalid bit length repeat",Q.mode=U;break}for(;ye--;)Q.lens[Q.have++]=Ht}}if(Q.mode===U)break;if(Q.lens[256]===0){_e.msg="invalid code -- missing end-of-block",Q.mode=U;break}if(Q.lenbits=9,Wt={bits:Q.lenbits},Dr=i(s,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,Wt),Q.lenbits=Wt.bits,Dr){_e.msg="invalid literal/lengths set",Q.mode=U;break}if(Q.distbits=6,Q.distcode=Q.distdyn,Wt={bits:Q.distbits},Dr=i(a,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,Wt),Q.distbits=Wt.bits,Dr){_e.msg="invalid distances set",Q.mode=U;break}if(Q.mode=$,Re===f)break e;case $:Q.mode=M;case M:if($e>=6&&ge>=258){_e.next_out=Me,_e.avail_out=ge,_e.next_in=O,_e.avail_in=$e,Q.hold=Ie,Q.bits=Fe,n(_e,he),Me=_e.next_out,tt=_e.output,ge=_e.avail_out,O=_e.next_in,Be=_e.input,$e=_e.avail_in,Ie=Q.hold,Fe=Q.bits,Q.mode===fe&&(Q.back=-1);break}for(Q.back=0;Qe=Q.lencode[Ie&(1<<Q.lenbits)-1],dt=Qe>>>24,Rt=Qe>>>16&255,Et=Qe&65535,!(dt<=Fe);){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Rt&&(Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;Qe=Q.lencode[qn+((Ie&(1<<ar+_i)-1)>>ar)],dt=Qe>>>24,Rt=Qe>>>16&255,Et=Qe&65535,!(ar+dt<=Fe);){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Ie>>>=ar,Fe-=ar,Q.back+=ar}if(Ie>>>=dt,Fe-=dt,Q.back+=dt,Q.length=Et,Rt===0){Q.mode=N;break}if(Rt&32){Q.back=-1,Q.mode=fe;break}if(Rt&64){_e.msg="invalid literal/length code",Q.mode=U;break}Q.extra=Rt&15,Q.mode=G;case G:if(Q.extra){for(Yt=Q.extra;Fe<Yt;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.length+=Ie&(1<<Q.extra)-1,Ie>>>=Q.extra,Fe-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=ne;case ne:for(;Qe=Q.distcode[Ie&(1<<Q.distbits)-1],dt=Qe>>>24,Rt=Qe>>>16&255,Et=Qe&65535,!(dt<=Fe);){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if((Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;Qe=Q.distcode[qn+((Ie&(1<<ar+_i)-1)>>ar)],dt=Qe>>>24,Rt=Qe>>>16&255,Et=Qe&65535,!(ar+dt<=Fe);){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Ie>>>=ar,Fe-=ar,Q.back+=ar}if(Ie>>>=dt,Fe-=dt,Q.back+=dt,Rt&64){_e.msg="invalid distance code",Q.mode=U;break}Q.offset=Et,Q.extra=Rt&15,Q.mode=se;case se:if(Q.extra){for(Yt=Q.extra;Fe<Yt;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}Q.offset+=Ie&(1<<Q.extra)-1,Ie>>>=Q.extra,Fe-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){_e.msg="invalid distance too far back",Q.mode=U;break}Q.mode=z;case z:if(ge===0)break e;if(ye=he-ge,Q.offset>ye){if(ye=Q.offset-ye,ye>Q.whave&&Q.sane){_e.msg="invalid distance too far back",Q.mode=U;break}ye>Q.wnext?(ye-=Q.wnext,Ge=Q.wsize-ye):Ge=Q.wnext-ye,ye>Q.length&&(ye=Q.length),je=Q.window}else je=tt,Ge=Me-Q.offset,ye=Q.length;ye>ge&&(ye=ge),ge-=ye,Q.length-=ye;do tt[Me++]=je[Ge++];while(--ye);Q.length===0&&(Q.mode=M);break;case N:if(ge===0)break e;tt[Me++]=Q.length,ge--,Q.mode=M;break;case F:if(Q.wrap){for(;Fe<32;){if($e===0)break e;$e--,Ie|=Be[O++]<<Fe,Fe+=8}if(he-=ge,_e.total_out+=he,Q.total+=he,he&&(_e.adler=Q.check=Q.flags?t(Q.check,tt,he,Me-he):e(Q.check,tt,he,Me-he)),he=ge,(Q.flags?Ie:be(Ie))!==Q.check){_e.msg="incorrect data check",Q.mode=U;break}Ie=0,Fe=0}Q.mode=le;case le:if(Q.wrap&&Q.flags){for(;Fe<32;){if($e===0)break e;$e--,Ie+=Be[O++]<<Fe,Fe+=8}if(Ie!==(Q.total&4294967295)){_e.msg="incorrect length check",Q.mode=U;break}Ie=0,Fe=0}Q.mode=me;case me:Dr=d;break e;case U:Dr=v;break e;case I:return w;case Z:default:return b}return _e.next_out=Me,_e.avail_out=ge,_e.next_in=O,_e.avail_in=$e,Q.hold=Ie,Q.bits=Fe,(Q.wsize||he!==_e.avail_out&&Q.mode<U&&(Q.mode<F||Re!==u))&&J(_e,_e.output,_e.next_out,he-_e.avail_out),ut-=_e.avail_in,he-=_e.avail_out,_e.total_in+=ut,_e.total_out+=he,Q.total+=he,Q.wrap&&he&&(_e.adler=Q.check=Q.flags?t(Q.check,tt,he,_e.next_out-he):e(Q.check,tt,he,_e.next_out-he)),_e.data_type=Q.bits+(Q.last?64:0)+(Q.mode===fe?128:0)+(Q.mode===$||Q.mode===H?256:0),(ut===0&&he===0||Re===u)&&Dr===h&&(Dr=y),Dr}function oe(_e){if(!_e||!_e.state)return b;var Re=_e.state;return Re.window&&(Re.window=null),_e.state=null,h}function ce(_e,Re){var Q;return!_e||!_e.state||(Q=_e.state,(Q.wrap&2)===0)?b:(Q.head=Re,Re.done=!1,h)}function xe(_e,Re){var Q=Re.length,Be,tt,O;return!_e||!_e.state||(Be=_e.state,Be.wrap!==0&&Be.mode!==q)?b:Be.mode===q&&(tt=1,tt=e(tt,Re,Q,0),tt!==Be.check)?v:(O=J(_e,Re,Q,Q),O?(Be.mode=I,w):(Be.havedict=1,h))}return is.inflateReset=Te,is.inflateReset2=ze,is.inflateResetKeep=De,is.inflateInit=We,is.inflateInit2=He,is.inflate=C,is.inflateEnd=oe,is.inflateGetHeader=ce,is.inflateSetDictionary=xe,is.inflateInfo="pako inflate (from Nodeca project)",is}function I7(){return mL||(mL=!0,d1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),d1}function O7(){if(yL)return et;yL=!0;var r=fn().Buffer,e=zr,t=pt,n=A7(),i=T7(),o=D7(),s=I7();for(var a in s)et[a]=s[a];et.NONE=0,et.DEFLATE=1,et.INFLATE=2,et.GZIP=3,et.GUNZIP=4,et.DEFLATERAW=5,et.INFLATERAW=6,et.UNZIP=7;var u=31,c=139;function f(h){if(typeof h!="number"||h<et.DEFLATE||h>et.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=h,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}return f.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,t(this.init_done,"close before init"),t(this.mode<=et.UNZIP),this.mode===et.DEFLATE||this.mode===et.GZIP||this.mode===et.DEFLATERAW?i.deflateEnd(this.strm):(this.mode===et.INFLATE||this.mode===et.GUNZIP||this.mode===et.INFLATERAW||this.mode===et.UNZIP)&&o.inflateEnd(this.strm),this.mode=et.NONE,this.dictionary=null},f.prototype.write=function(h,d,m,b,v,w,y){return this._write(!0,h,d,m,b,v,w,y)},f.prototype.writeSync=function(h,d,m,b,v,w,y){return this._write(!1,h,d,m,b,v,w,y)},f.prototype._write=function(h,d,m,b,v,w,y,_){if(t.equal(arguments.length,8),t(this.init_done,"write before init"),t(this.mode!==et.NONE,"already finalized"),t.equal(!1,this.write_in_progress,"write already in progress"),t.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,t.equal(!1,d===void 0,"must provide flush value"),this.write_in_progress=!0,d!==et.Z_NO_FLUSH&&d!==et.Z_PARTIAL_FLUSH&&d!==et.Z_SYNC_FLUSH&&d!==et.Z_FULL_FLUSH&&d!==et.Z_FINISH&&d!==et.Z_BLOCK)throw new Error("Invalid flush value");if(m==null&&(m=r.alloc(0),v=0,b=0),this.strm.avail_in=v,this.strm.input=m,this.strm.next_in=b,this.strm.avail_out=_,this.strm.output=w,this.strm.next_out=y,this.flush=d,!h)return this._process(),this._checkError()?this._afterSync():void 0;var E=this;return e.nextTick(function(){E._process(),E._after()}),this},f.prototype._afterSync=function(){var h=this.strm.avail_out,d=this.strm.avail_in;return this.write_in_progress=!1,[d,h]},f.prototype._process=function(){var h=null;switch(this.mode){case et.DEFLATE:case et.GZIP:case et.DEFLATERAW:this.err=i.deflate(this.strm,this.flush);break;case et.UNZIP:switch(this.strm.avail_in>0&&(h=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(h===null)break;if(this.strm.input[h]===u){if(this.gzip_id_bytes_read=1,h++,this.strm.avail_in===1)break}else{this.mode=et.INFLATE;break}case 1:if(h===null)break;this.strm.input[h]===c?(this.gzip_id_bytes_read=2,this.mode=et.GUNZIP):this.mode=et.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case et.INFLATE:case et.GUNZIP:case et.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===et.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===et.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===et.Z_DATA_ERROR&&(this.err=et.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===et.GUNZIP&&this.err===et.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},f.prototype._checkError=function(){switch(this.err){case et.Z_OK:case et.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===et.Z_FINISH)return this._error("unexpected end of file"),!1;break;case et.Z_STREAM_END:break;case et.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},f.prototype._after=function(){if(this._checkError()){var h=this.strm.avail_out,d=this.strm.avail_in;this.write_in_progress=!1,this.callback(d,h),this.pending_close&&this.close()}},f.prototype._error=function(h){this.strm.msg&&(h=this.strm.msg),this.onerror(h,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},f.prototype.init=function(h,d,m,b,v){t(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),t(h>=8&&h<=15,"invalid windowBits"),t(d>=-1&&d<=9,"invalid compression level"),t(m>=1&&m<=9,"invalid memlevel"),t(b===et.Z_FILTERED||b===et.Z_HUFFMAN_ONLY||b===et.Z_RLE||b===et.Z_FIXED||b===et.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(d,h,m,b,v),this._setDictionary()},f.prototype.params=function(){throw new Error("deflateParams Not supported")},f.prototype.reset=function(){this._reset(),this._setDictionary()},f.prototype._init=function(h,d,m,b,v){switch(this.level=h,this.windowBits=d,this.memLevel=m,this.strategy=b,this.flush=et.Z_NO_FLUSH,this.err=et.Z_OK,(this.mode===et.GZIP||this.mode===et.GUNZIP)&&(this.windowBits+=16),this.mode===et.UNZIP&&(this.windowBits+=32),(this.mode===et.DEFLATERAW||this.mode===et.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case et.DEFLATE:case et.GZIP:case et.DEFLATERAW:this.err=i.deflateInit2(this.strm,this.level,et.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case et.INFLATE:case et.GUNZIP:case et.INFLATERAW:case et.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==et.Z_OK&&this._error("Init error"),this.dictionary=v,this.write_in_progress=!1,this.init_done=!0},f.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=et.Z_OK,this.mode){case et.DEFLATE:case et.DEFLATERAW:this.err=i.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==et.Z_OK&&this._error("Failed to set dictionary")}},f.prototype._reset=function(){switch(this.err=et.Z_OK,this.mode){case et.DEFLATE:case et.DEFLATERAW:case et.GZIP:this.err=i.deflateReset(this.strm);break;case et.INFLATE:case et.INFLATERAW:case et.GUNZIP:this.err=o.inflateReset(this.strm);break}this.err!==et.Z_OK&&this._error("Failed to reset stream")},et.Zlib=f,et}function N7(){if(bL)return ht;bL=!0;var r=zr,e=fn().Buffer,t=ii.Transform,n=O7(),i=qe,o=pt.ok,s=fn().kMaxLength,a="Cannot create final Buffer. It would be larger than 0x"+s.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16*1024,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(n),c=0;c<u.length;c++){var f=u[c];f.match(/^Z/)&&Object.defineProperty(ht,f,{enumerable:!0,value:n[f],writable:!1})}for(var h={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},d=Object.keys(h),m=0;m<d.length;m++){var b=d[m];h[h[b]]=b}Object.defineProperty(ht,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),ht.Deflate=y,ht.Inflate=_,ht.Gzip=E,ht.Gunzip=S,ht.DeflateRaw=A,ht.InflateRaw=P,ht.Unzip=R,ht.createDeflate=function(j){return new y(j)},ht.createInflate=function(j){return new _(j)},ht.createDeflateRaw=function(j){return new A(j)},ht.createInflateRaw=function(j){return new P(j)},ht.createGzip=function(j){return new E(j)},ht.createGunzip=function(j){return new S(j)},ht.createUnzip=function(j){return new R(j)},ht.deflate=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new y(q),j,fe)},ht.deflateSync=function(j,q){return w(new y(q),j)},ht.gzip=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new E(q),j,fe)},ht.gzipSync=function(j,q){return w(new E(q),j)},ht.deflateRaw=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new A(q),j,fe)},ht.deflateRawSync=function(j,q){return w(new A(q),j)},ht.unzip=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new R(q),j,fe)},ht.unzipSync=function(j,q){return w(new R(q),j)},ht.inflate=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new _(q),j,fe)},ht.inflateSync=function(j,q){return w(new _(q),j)},ht.gunzip=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new S(q),j,fe)},ht.gunzipSync=function(j,q){return w(new S(q),j)},ht.inflateRaw=function(j,q,fe){return typeof q=="function"&&(fe=q,q={}),v(new P(q),j,fe)},ht.inflateRawSync=function(j,q){return w(new P(q),j)};function v(j,q,fe){var Ee=[],ve=0;j.on("error",D),j.on("end",ee),j.end(q),H();function H(){for(var B;(B=j.read())!==null;)Ee.push(B),ve+=B.length;j.once("readable",H)}function D(B){j.removeListener("end",ee),j.removeListener("readable",H),fe(B)}function ee(){var B,L=null;ve>=s?L=new RangeError(a):B=e.concat(Ee,ve),Ee=[],j.close(),fe(L,B)}}function w(j,q){if(typeof q=="string"&&(q=e.from(q)),!e.isBuffer(q))throw new TypeError("Not a string or buffer");var fe=j._finishFlushFlag;return j._processChunk(q,fe)}function y(j){if(!(this instanceof y))return new y(j);te.call(this,j,n.DEFLATE)}function _(j){if(!(this instanceof _))return new _(j);te.call(this,j,n.INFLATE)}function E(j){if(!(this instanceof E))return new E(j);te.call(this,j,n.GZIP)}function S(j){if(!(this instanceof S))return new S(j);te.call(this,j,n.GUNZIP)}function A(j){if(!(this instanceof A))return new A(j);te.call(this,j,n.DEFLATERAW)}function P(j){if(!(this instanceof P))return new P(j);te.call(this,j,n.INFLATERAW)}function R(j){if(!(this instanceof R))return new R(j);te.call(this,j,n.UNZIP)}function Y(j){return j===n.Z_NO_FLUSH||j===n.Z_PARTIAL_FLUSH||j===n.Z_SYNC_FLUSH||j===n.Z_FULL_FLUSH||j===n.Z_FINISH||j===n.Z_BLOCK}function te(j,q){var fe=this;if(this._opts=j=j||{},this._chunkSize=j.chunkSize||ht.Z_DEFAULT_CHUNK,t.call(this,j),j.flush&&!Y(j.flush))throw new Error("Invalid flush flag: "+j.flush);if(j.finishFlush&&!Y(j.finishFlush))throw new Error("Invalid flush flag: "+j.finishFlush);if(this._flushFlag=j.flush||n.Z_NO_FLUSH,this._finishFlushFlag=typeof j.finishFlush<"u"?j.finishFlush:n.Z_FINISH,j.chunkSize&&(j.chunkSize<ht.Z_MIN_CHUNK||j.chunkSize>ht.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+j.chunkSize);if(j.windowBits&&(j.windowBits<ht.Z_MIN_WINDOWBITS||j.windowBits>ht.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+j.windowBits);if(j.level&&(j.level<ht.Z_MIN_LEVEL||j.level>ht.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+j.level);if(j.memLevel&&(j.memLevel<ht.Z_MIN_MEMLEVEL||j.memLevel>ht.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+j.memLevel);if(j.strategy&&j.strategy!=ht.Z_FILTERED&&j.strategy!=ht.Z_HUFFMAN_ONLY&&j.strategy!=ht.Z_RLE&&j.strategy!=ht.Z_FIXED&&j.strategy!=ht.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+j.strategy);if(j.dictionary&&!e.isBuffer(j.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(q);var Ee=this;this._hadError=!1,this._handle.onerror=function(D,ee){K(Ee),Ee._hadError=!0;var B=new Error(D);B.errno=ee,B.code=ht.codes[ee],Ee.emit("error",B)};var ve=ht.Z_DEFAULT_COMPRESSION;typeof j.level=="number"&&(ve=j.level);var H=ht.Z_DEFAULT_STRATEGY;typeof j.strategy=="number"&&(H=j.strategy),this._handle.init(j.windowBits||ht.Z_DEFAULT_WINDOWBITS,ve,j.memLevel||ht.Z_DEFAULT_MEMLEVEL,H,j.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=ve,this._strategy=H,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!fe._handle},configurable:!0,enumerable:!0})}i.inherits(te,t),te.prototype.params=function(j,q,fe){if(j<ht.Z_MIN_LEVEL||j>ht.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+j);if(q!=ht.Z_FILTERED&&q!=ht.Z_HUFFMAN_ONLY&&q!=ht.Z_RLE&&q!=ht.Z_FIXED&&q!=ht.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+q);if(this._level!==j||this._strategy!==q){var Ee=this;this.flush(n.Z_SYNC_FLUSH,function(){o(Ee._handle,"zlib binding closed"),Ee._handle.params(j,q),Ee._hadError||(Ee._level=j,Ee._strategy=q,fe&&fe())})}else r.nextTick(fe)},te.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},te.prototype._flush=function(j){this._transform(e.alloc(0),"",j)},te.prototype.flush=function(j,q){var fe=this,Ee=this._writableState;(typeof j=="function"||j===void 0&&!q)&&(q=j,j=n.Z_FULL_FLUSH),Ee.ended?q&&r.nextTick(q):Ee.ending?q&&this.once("end",q):Ee.needDrain?q&&this.once("drain",function(){return fe.flush(j,q)}):(this._flushFlag=j,this.write(e.alloc(0),"",q))},te.prototype.close=function(j){K(this,j),r.nextTick(ie,this)};function K(j,q){q&&r.nextTick(q),j._handle&&(j._handle.close(),j._handle=null)}function ie(j){j.emit("close")}return te.prototype._transform=function(j,q,fe){var Ee,ve=this._writableState,H=ve.ending||ve.ended,D=H&&(!j||ve.length===j.length);if(j!==null&&!e.isBuffer(j))return fe(new Error("invalid input"));if(!this._handle)return fe(new Error("zlib binding closed"));D?Ee=this._finishFlushFlag:(Ee=this._flushFlag,j.length>=ve.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),this._processChunk(j,Ee,fe)},te.prototype._processChunk=function(j,q,fe){var Ee=j&&j.length,ve=this._chunkSize-this._offset,H=0,D=this,ee=typeof fe=="function";if(!ee){var B=[],L=0,$;this.on("error",function(z){$=z}),o(this._handle,"zlib binding closed");do var M=this._handle.writeSync(q,j,H,Ee,this._buffer,this._offset,ve);while(!this._hadError&&se(M[0],M[1]));if(this._hadError)throw $;if(L>=s)throw K(this),new RangeError(a);var G=e.concat(B,L);return K(this),G}o(this._handle,"zlib binding closed");var ne=this._handle.write(q,j,H,Ee,this._buffer,this._offset,ve);ne.buffer=j,ne.callback=se;function se(z,N){if(this&&(this.buffer=null,this.callback=null),!D._hadError){var F=ve-N;if(o(F>=0,"have should not go down"),F>0){var le=D._buffer.slice(D._offset,D._offset+F);D._offset+=F,ee?D.push(le):(B.push(le),L+=le.length)}if((N===0||D._offset>=D._chunkSize)&&(ve=D._chunkSize,D._offset=0,D._buffer=e.allocUnsafe(D._chunkSize)),N===0){if(H+=Ee-z,Ee=z,!ee)return!0;var me=D._handle.write(q,j,H,Ee,D._buffer,D._offset,D._chunkSize);me.callback=se,me.buffer=j;return}if(!ee)return!1;fe()}}},i.inherits(y,te),i.inherits(_,te),i.inherits(E,te),i.inherits(S,te),i.inherits(A,te),i.inherits(P,te),i.inherits(R,te),ht}var a1,oL,Pn,aL,Zu,lL,l1,uL,u1,cL,c1,fL,Os,hL,f1,dL,h1,pL,is,gL,d1,mL,et,yL,ht,bL,Ke,k7,L7,P7,M7,B7,F7,U7,j7,$7,z7,W7,q7,H7,G7,V7,Y7,X7,K7,Z7,J7,Q7,ez,tz,rz,nz,iz,sz,oz,az,lz,uz,cz,fz,hz,dz,pz,gz,mz,yz,bz,wz,vz,_z,Ez,Az,xz,Sz,Tz,Cz,Rz,Dz,Iz,Oz,Nz,kz,Lz,Pz,Mz,Bz,Fz,Uz,jz,$z,zz,Wz,qz,Hz,Gz,Vz,EL=Jt(()=>{Oe();ke();Ne();Ff();LE();z_();Bu();W0();cl();G0();Xf();eb();qf();a1={},oL=!1;Pn={},aL=!1;Zu={},lL=!1;l1={},uL=!1;u1={},cL=!1;c1={},fL=!1;Os={},hL=!1;f1={},dL=!1;h1={},pL=!1;is={},gL=!1;d1={},mL=!1;et={},yL=!1;ht={},bL=!1;Ke=N7();Ke.codes;Ke.Deflate;Ke.Inflate;Ke.Gzip;Ke.Gunzip;Ke.DeflateRaw;Ke.InflateRaw;Ke.Unzip;Ke.createDeflate;Ke.createInflate;Ke.createDeflateRaw;Ke.createInflateRaw;Ke.createGzip;Ke.createGunzip;Ke.createUnzip;Ke.deflate;Ke.deflateSync;Ke.gzip;Ke.gzipSync;Ke.deflateRaw;Ke.deflateRawSync;Ke.unzip;Ke.unzipSync;Ke.inflate;Ke.inflateSync;Ke.gunzip;Ke.gunzipSync;Ke.inflateRaw;Ke.inflateRawSync;k7=Ke.Deflate,L7=Ke.DeflateRaw,P7=Ke.Gunzip,M7=Ke.Gzip,B7=Ke.Inflate,F7=Ke.InflateRaw,U7=Ke.Unzip,j7=Ke.Z_BEST_COMPRESSION,$7=Ke.Z_BEST_SPEED,z7=Ke.Z_BINARY,W7=Ke.Z_BLOCK,q7=Ke.Z_BUF_ERROR,H7=Ke.Z_DATA_ERROR,G7=Ke.Z_DEFAULT_CHUNK,V7=Ke.Z_DEFAULT_COMPRESSION,Y7=Ke.Z_DEFAULT_LEVEL,X7=Ke.Z_DEFAULT_MEMLEVEL,K7=Ke.Z_DEFAULT_STRATEGY,Z7=Ke.Z_DEFAULT_WINDOWBITS,J7=Ke.Z_DEFLATED,Q7=Ke.Z_ERRNO,ez=Ke.Z_FILTERED,tz=Ke.Z_FINISH,rz=Ke.Z_FIXED,nz=Ke.Z_FULL_FLUSH,iz=Ke.Z_HUFFMAN_ONLY,sz=Ke.Z_MAX_CHUNK,oz=Ke.Z_MAX_LEVEL,az=Ke.Z_MAX_MEMLEVEL,lz=Ke.Z_MAX_WINDOWBITS,uz=Ke.Z_MIN_CHUNK,cz=Ke.Z_MIN_LEVEL,fz=Ke.Z_MIN_MEMLEVEL,hz=Ke.Z_MIN_WINDOWBITS,dz=Ke.Z_NEED_DICT,pz=Ke.Z_NO_COMPRESSION,gz=Ke.Z_NO_FLUSH,mz=Ke.Z_OK,yz=Ke.Z_PARTIAL_FLUSH,bz=Ke.Z_RLE,wz=Ke.Z_STREAM_END,vz=Ke.Z_STREAM_ERROR,_z=Ke.Z_SYNC_FLUSH,Ez=Ke.Z_TEXT,Az=Ke.Z_TREES,xz=Ke.Z_UNKNOWN,Sz=Ke.Zlib,Tz=Ke.codes,Cz=Ke.createDeflate,Rz=Ke.createDeflateRaw,Dz=Ke.createGunzip,Iz=Ke.createGzip,Oz=Ke.createInflate,Nz=Ke.createInflateRaw,kz=Ke.createUnzip,Lz=Ke.deflate,Pz=Ke.deflateRaw,Mz=Ke.deflateRawSync,Bz=Ke.deflateSync,Fz=Ke.gunzip,Uz=Ke.gunzipSync,jz=Ke.gzip,$z=Ke.gzipSync,zz=Ke.inflate,Wz=Ke.inflateRaw,qz=Ke.inflateRawSync,Hz=Ke.inflateSync,Gz=Ke.unzip,Vz=Ke.unzipSync});function xL(){return AL||(AL=!0,typeof Object.create=="function"?Pb=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Pb=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Pb}var Pb,AL,p1=Jt(()=>{Oe();ke();Ne();Pb={},AL=!1});var lg={};Uo(lg,{TextDecoder:()=>OW,TextEncoder:()=>IW,_extend:()=>oW,callbackify:()=>aW,debuglog:()=>lW,default:()=>gt,deprecate:()=>uW,format:()=>cW,inherits:()=>fW,inspect:()=>hW,isArray:()=>dW,isBoolean:()=>pW,isBuffer:()=>gW,isDate:()=>mW,isError:()=>yW,isFunction:()=>bW,isNull:()=>wW,isNullOrUndefined:()=>vW,isNumber:()=>_W,isObject:()=>EW,isPrimitive:()=>AW,isRegExp:()=>xW,isString:()=>SW,isSymbol:()=>TW,isUndefined:()=>CW,log:()=>RW,promisify:()=>Mb,types:()=>DW});function S1(){if(SL)return g1;SL=!0;var r=n2();return g1=function(){return r()&&!!Symbol.toStringTag},g1}function Yz(){if(TL)return m1;TL=!0;var r=S1()(),e=jp(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},o=(function(){return n(arguments)})();return n.isLegacyArguments=i,m1=o?n:i,m1}function Xz(){if(CL)return y1;CL=!0;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=S1()(),i=Object.getPrototypeOf,o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},s;return y1=function(u){if(typeof u!="function")return!1;if(t.test(e.call(u)))return!0;if(!n){var c=r.call(u);return c==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var f=o();s=f?i(f):!1}return i(u)===s},y1}function Kz(){if(RL)return b1;RL=!0;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(_){_!==n&&(e=null)}else e=null;var i=/^\s*class\b/,o=function(E){try{var S=r.call(E);return i.test(S)}catch{return!1}},s=function(E){try{return o(E)?!1:(r.call(E),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",c="[object Function]",f="[object GeneratorFunction]",h="[object HTMLAllCollection]",d="[object HTML document.all class]",m="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),w=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(w=function(E){if((v||!E)&&(typeof E>"u"||typeof E=="object"))try{var S=a.call(E);return(S===h||S===d||S===m||S===u)&&E("")==null}catch{}return!1})}return b1=e?function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;try{e(E,null,t)}catch(S){if(S!==n)return!1}return!o(E)&&s(E)}:function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;if(b)return s(E);if(o(E))return!1;var S=a.call(E);return S!==c&&S!==f&&!/^\[object HTML/.test(S)?!1:s(E)},b1}function Zz(){if(DL)return w1;DL=!0;var r=Kz(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(u,c,f){for(var h=0,d=u.length;h<d;h++)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},i=function(u,c,f){for(var h=0,d=u.length;h<d;h++)f==null?c(u.charAt(h),h,u):c.call(f,u.charAt(h),h,u)},o=function(u,c,f){for(var h in u)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},s=function(u,c,f){if(!r(c))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=f),e.call(u)==="[object Array]"?n(u,c,h):typeof u=="string"?i(u,c,h):o(u,c,h)};return w1=s,w1}function Jz(){return IL||(IL=!0,v1=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),v1}function eW(){if(OL)return _1;OL=!0;var r=Jz(),e=typeof globalThis>"u"?Qz:globalThis;return _1=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},_1}function BL(){if(NL)return E1;NL=!0;var r=Zz(),e=eW(),t=o2(),n=jp(),i=tb(),o=n("Object.prototype.toString"),s=S1()(),a=typeof globalThis>"u"?tW:globalThis,u=e(),c=n("String.prototype.slice"),f=Object.getPrototypeOf,h=n("Array.prototype.indexOf",!0)||function(w,y){for(var _=0;_<w.length;_+=1)if(w[_]===y)return _;return-1},d={__proto__:null};s&&i&&f?r(u,function(v){var w=new a[v];if(Symbol.toStringTag in w){var y=f(w),_=i(y,Symbol.toStringTag);if(!_){var E=f(y);_=i(E,Symbol.toStringTag)}d["$"+v]=t(_.get)}}):r(u,function(v){var w=new a[v],y=w.slice||w.set;y&&(d["$"+v]=t(y))});var m=function(w){var y=!1;return r(d,function(_,E){if(!y)try{"$"+_(w)===E&&(y=c(E,1))}catch{}}),y},b=function(w){var y=!1;return r(d,function(_,E){if(!y)try{_(w),y=c(E,1)}catch{}}),y};return E1=function(w){if(!w||typeof w!="object")return!1;if(!s){var y=c(o(w),8,-1);return h(u,y)>-1?y:y!=="Object"?!1:b(w)}return i?m(w):null},E1}function rW(){if(kL)return A1;kL=!0;var r=BL();return A1=function(t){return!!r(t)},A1}function nW(){if(LL)return Dt;LL=!0;var r=Yz(),e=Xz(),t=BL(),n=rW();function i(de){return de.call.bind(de)}var o=typeof BigInt<"u",s=typeof Symbol<"u",a=i(Object.prototype.toString),u=i(Number.prototype.valueOf),c=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(o)var h=i(BigInt.prototype.valueOf);if(s)var d=i(Symbol.prototype.valueOf);function m(de,be){if(typeof de!="object")return!1;try{return be(de),!0}catch{return!1}}Dt.isArgumentsObject=r,Dt.isGeneratorFunction=e,Dt.isTypedArray=n;function b(de){return typeof Promise<"u"&&de instanceof Promise||de!==null&&typeof de=="object"&&typeof de.then=="function"&&typeof de.catch=="function"}Dt.isPromise=b;function v(de){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(de):n(de)||$(de)}Dt.isArrayBufferView=v;function w(de){return t(de)==="Uint8Array"}Dt.isUint8Array=w;function y(de){return t(de)==="Uint8ClampedArray"}Dt.isUint8ClampedArray=y;function _(de){return t(de)==="Uint16Array"}Dt.isUint16Array=_;function E(de){return t(de)==="Uint32Array"}Dt.isUint32Array=E;function S(de){return t(de)==="Int8Array"}Dt.isInt8Array=S;function A(de){return t(de)==="Int16Array"}Dt.isInt16Array=A;function P(de){return t(de)==="Int32Array"}Dt.isInt32Array=P;function R(de){return t(de)==="Float32Array"}Dt.isFloat32Array=R;function Y(de){return t(de)==="Float64Array"}Dt.isFloat64Array=Y;function te(de){return t(de)==="BigInt64Array"}Dt.isBigInt64Array=te;function K(de){return t(de)==="BigUint64Array"}Dt.isBigUint64Array=K;function ie(de){return a(de)==="[object Map]"}ie.working=typeof Map<"u"&&ie(new Map);function j(de){return typeof Map>"u"?!1:ie.working?ie(de):de instanceof Map}Dt.isMap=j;function q(de){return a(de)==="[object Set]"}q.working=typeof Set<"u"&&q(new Set);function fe(de){return typeof Set>"u"?!1:q.working?q(de):de instanceof Set}Dt.isSet=fe;function Ee(de){return a(de)==="[object WeakMap]"}Ee.working=typeof WeakMap<"u"&&Ee(new WeakMap);function ve(de){return typeof WeakMap>"u"?!1:Ee.working?Ee(de):de instanceof WeakMap}Dt.isWeakMap=ve;function H(de){return a(de)==="[object WeakSet]"}H.working=typeof WeakSet<"u"&&H(new WeakSet);function D(de){return H(de)}Dt.isWeakSet=D;function ee(de){return a(de)==="[object ArrayBuffer]"}ee.working=typeof ArrayBuffer<"u"&&ee(new ArrayBuffer);function B(de){return typeof ArrayBuffer>"u"?!1:ee.working?ee(de):de instanceof ArrayBuffer}Dt.isArrayBuffer=B;function L(de){return a(de)==="[object DataView]"}L.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&L(new DataView(new ArrayBuffer(1),0,1));function $(de){return typeof DataView>"u"?!1:L.working?L(de):de instanceof DataView}Dt.isDataView=$;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function G(de){return a(de)==="[object SharedArrayBuffer]"}function ne(de){return typeof M>"u"?!1:(typeof G.working>"u"&&(G.working=G(new M)),G.working?G(de):de instanceof M)}Dt.isSharedArrayBuffer=ne;function se(de){return a(de)==="[object AsyncFunction]"}Dt.isAsyncFunction=se;function z(de){return a(de)==="[object Map Iterator]"}Dt.isMapIterator=z;function N(de){return a(de)==="[object Set Iterator]"}Dt.isSetIterator=N;function F(de){return a(de)==="[object Generator]"}Dt.isGeneratorObject=F;function le(de){return a(de)==="[object WebAssembly.Module]"}Dt.isWebAssemblyCompiledModule=le;function me(de){return m(de,u)}Dt.isNumberObject=me;function U(de){return m(de,c)}Dt.isStringObject=U;function I(de){return m(de,f)}Dt.isBooleanObject=I;function Z(de){return o&&m(de,h)}Dt.isBigIntObject=Z;function ue(de){return s&&m(de,d)}Dt.isSymbolObject=ue;function Se(de){return me(de)||U(de)||I(de)||Z(de)||ue(de)}Dt.isBoxedPrimitive=Se;function Ae(de){return typeof Uint8Array<"u"&&(B(de)||ne(de))}return Dt.isAnyArrayBuffer=Ae,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(de){Object.defineProperty(Dt,de,{enumerable:!1,value:function(){throw new Error(de+" is not supported in userland")}})}),Dt}function iW(){return PL||(PL=!0,x1=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),x1}function sW(){if(ML)return It;ML=!0;var r=zr,e=Object.getOwnPropertyDescriptors||function(M){for(var G=Object.keys(M),ne={},se=0;se<G.length;se++)ne[G[se]]=Object.getOwnPropertyDescriptor(M,G[se]);return ne},t=/%[sdj%]/g;It.format=function($){if(!A($)){for(var M=[],G=0;G<arguments.length;G++)M.push(s(arguments[G]));return M.join(" ")}for(var G=1,ne=arguments,se=ne.length,z=String($).replace(t,function(F){if(F==="%%")return"%";if(G>=se)return F;switch(F){case"%s":return String(ne[G++]);case"%d":return Number(ne[G++]);case"%j":try{return JSON.stringify(ne[G++])}catch{return"[Circular]"}default:return F}}),N=ne[G];G<se;N=ne[++G])_(N)||!te(N)?z+=" "+N:z+=" "+s(N);return z},It.deprecate=function($,M){if(typeof r<"u"&&r.noDeprecation===!0)return $;if(typeof r>"u")return function(){return It.deprecate($,M).apply(this||ag,arguments)};var G=!1;function ne(){if(!G){if(r.throwDeprecation)throw new Error(M);r.traceDeprecation?console.trace(M):console.error(M),G=!0}return $.apply(this||ag,arguments)}return ne};var n={},i=/^$/;if(r.env.NODE_DEBUG){var o=r.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}It.debuglog=function($){if($=$.toUpperCase(),!n[$])if(i.test($)){var M=r.pid;n[$]=function(){var G=It.format.apply(It,arguments);console.error("%s %d: %s",$,M,G)}}else n[$]=function(){};return n[$]};function s($,M){var G={seen:[],stylize:u};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),y(M)?G.showHidden=M:M&&It._extend(G,M),R(G.showHidden)&&(G.showHidden=!1),R(G.depth)&&(G.depth=2),R(G.colors)&&(G.colors=!1),R(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=a),f(G,$,G.depth)}It.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a($,M){var G=s.styles[M];return G?"\x1B["+s.colors[G][0]+"m"+$+"\x1B["+s.colors[G][1]+"m":$}function u($,M){return $}function c($){var M={};return $.forEach(function(G,ne){M[G]=!0}),M}function f($,M,G){if($.customInspect&&M&&j(M.inspect)&&M.inspect!==It.inspect&&!(M.constructor&&M.constructor.prototype===M)){var ne=M.inspect(G,$);return A(ne)||(ne=f($,ne,G)),ne}var se=h($,M);if(se)return se;var z=Object.keys(M),N=c(z);if($.showHidden&&(z=Object.getOwnPropertyNames(M)),ie(M)&&(z.indexOf("message")>=0||z.indexOf("description")>=0))return d(M);if(z.length===0){if(j(M)){var F=M.name?": "+M.name:"";return $.stylize("[Function"+F+"]","special")}if(Y(M))return $.stylize(RegExp.prototype.toString.call(M),"regexp");if(K(M))return $.stylize(Date.prototype.toString.call(M),"date");if(ie(M))return d(M)}var le="",me=!1,U=["{","}"];if(w(M)&&(me=!0,U=["[","]"]),j(M)){var I=M.name?": "+M.name:"";le=" [Function"+I+"]"}if(Y(M)&&(le=" "+RegExp.prototype.toString.call(M)),K(M)&&(le=" "+Date.prototype.toUTCString.call(M)),ie(M)&&(le=" "+d(M)),z.length===0&&(!me||M.length==0))return U[0]+le+U[1];if(G<0)return Y(M)?$.stylize(RegExp.prototype.toString.call(M),"regexp"):$.stylize("[Object]","special");$.seen.push(M);var Z;return me?Z=m($,M,G,N,z):Z=z.map(function(ue){return b($,M,G,N,ue,me)}),$.seen.pop(),v(Z,le,U)}function h($,M){if(R(M))return $.stylize("undefined","undefined");if(A(M)){var G="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return $.stylize(G,"string")}if(S(M))return $.stylize(""+M,"number");if(y(M))return $.stylize(""+M,"boolean");if(_(M))return $.stylize("null","null")}function d($){return"["+Error.prototype.toString.call($)+"]"}function m($,M,G,ne,se){for(var z=[],N=0,F=M.length;N<F;++N)D(M,String(N))?z.push(b($,M,G,ne,String(N),!0)):z.push("");return se.forEach(function(le){le.match(/^\d+$/)||z.push(b($,M,G,ne,le,!0))}),z}function b($,M,G,ne,se,z){var N,F,le;if(le=Object.getOwnPropertyDescriptor(M,se)||{value:M[se]},le.get?le.set?F=$.stylize("[Getter/Setter]","special"):F=$.stylize("[Getter]","special"):le.set&&(F=$.stylize("[Setter]","special")),D(ne,se)||(N="["+se+"]"),F||($.seen.indexOf(le.value)<0?(_(G)?F=f($,le.value,null):F=f($,le.value,G-1),F.indexOf(`
`)>-1&&(z?F=F.split(`
`).map(function(me){return"  "+me}).join(`
`).slice(2):F=`
`+F.split(`
`).map(function(me){return"   "+me}).join(`
`))):F=$.stylize("[Circular]","special")),R(N)){if(z&&se.match(/^\d+$/))return F;N=JSON.stringify(""+se),N.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(N=N.slice(1,-1),N=$.stylize(N,"name")):(N=N.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),N=$.stylize(N,"string"))}return N+": "+F}function v($,M,G){var ne=$.reduce(function(se,z){return z.indexOf(`
`)>=0,se+z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ne>60?G[0]+(M===""?"":M+`
 `)+" "+$.join(`,
  `)+" "+G[1]:G[0]+M+" "+$.join(", ")+" "+G[1]}It.types=nW();function w($){return Array.isArray($)}It.isArray=w;function y($){return typeof $=="boolean"}It.isBoolean=y;function _($){return $===null}It.isNull=_;function E($){return $==null}It.isNullOrUndefined=E;function S($){return typeof $=="number"}It.isNumber=S;function A($){return typeof $=="string"}It.isString=A;function P($){return typeof $=="symbol"}It.isSymbol=P;function R($){return $===void 0}It.isUndefined=R;function Y($){return te($)&&fe($)==="[object RegExp]"}It.isRegExp=Y,It.types.isRegExp=Y;function te($){return typeof $=="object"&&$!==null}It.isObject=te;function K($){return te($)&&fe($)==="[object Date]"}It.isDate=K,It.types.isDate=K;function ie($){return te($)&&(fe($)==="[object Error]"||$ instanceof Error)}It.isError=ie,It.types.isNativeError=ie;function j($){return typeof $=="function"}It.isFunction=j;function q($){return $===null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||typeof $=="symbol"||typeof $>"u"}It.isPrimitive=q,It.isBuffer=iW();function fe($){return Object.prototype.toString.call($)}function Ee($){return $<10?"0"+$.toString(10):$.toString(10)}var ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var $=new Date,M=[Ee($.getHours()),Ee($.getMinutes()),Ee($.getSeconds())].join(":");return[$.getDate(),ve[$.getMonth()],M].join(" ")}It.log=function(){console.log("%s - %s",H(),It.format.apply(It,arguments))},It.inherits=xL(),It._extend=function($,M){if(!M||!te(M))return $;for(var G=Object.keys(M),ne=G.length;ne--;)$[G[ne]]=M[G[ne]];return $};function D($,M){return Object.prototype.hasOwnProperty.call($,M)}var ee=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;It.promisify=function(M){if(typeof M!="function")throw new TypeError('The "original" argument must be of type Function');if(ee&&M[ee]){if(G=M[ee],typeof G!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(G,ee,{value:G,enumerable:!1,writable:!1,configurable:!0}),G}function G(){for(var ne,se,z=new Promise(function(le,me){ne=le,se=me}),N=[],F=0;F<arguments.length;F++)N.push(arguments[F]);N.push(function(le,me){le?se(le):ne(me)});try{M.apply(this||ag,N)}catch(le){se(le)}return z}return Object.setPrototypeOf(G,Object.getPrototypeOf(M)),ee&&Object.defineProperty(G,ee,{value:G,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(G,e(M))},It.promisify.custom=ee;function B($,M){if(!$){var G=new Error("Promise was rejected with a falsy value");G.reason=$,$=G}return M($)}function L($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');function M(){for(var G=[],ne=0;ne<arguments.length;ne++)G.push(arguments[ne]);var se=G.pop();if(typeof se!="function")throw new TypeError("The last argument must be of type Function");var z=this||ag,N=function(){return se.apply(z,arguments)};$.apply(this||ag,G).then(function(F){r.nextTick(N.bind(null,null,F))},function(F){r.nextTick(B.bind(null,F,N))})}return Object.setPrototypeOf(M,Object.getPrototypeOf($)),Object.defineProperties(M,e($)),M}return It.callbackify=L,It}var g1,SL,m1,TL,y1,CL,b1,RL,w1,DL,v1,IL,_1,OL,Qz,E1,NL,tW,A1,kL,Dt,LL,x1,PL,It,ML,ag,gt,oW,aW,lW,uW,cW,fW,hW,dW,pW,gW,mW,yW,bW,wW,vW,_W,EW,AW,xW,SW,TW,CW,RW,Mb,DW,IW,OW,yh=Jt(()=>{Oe();ke();Ne();$p();p1();Bu();g1={},SL=!1;m1={},TL=!1;y1={},CL=!1;b1={},RL=!1;w1={},DL=!1;v1={},IL=!1;_1={},OL=!1,Qz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;E1={},NL=!1,tW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;A1={},kL=!1;Dt={},LL=!1;x1={},PL=!1;It={},ML=!1,ag=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;gt=sW();gt.format;gt.deprecate;gt.debuglog;gt.inspect;gt.types;gt.isArray;gt.isBoolean;gt.isNull;gt.isNullOrUndefined;gt.isNumber;gt.isString;gt.isSymbol;gt.isUndefined;gt.isRegExp;gt.isObject;gt.isDate;gt.isError;gt.isFunction;gt.isPrimitive;gt.isBuffer;gt.log;gt.inherits;gt._extend;gt.promisify;gt.callbackify;oW=gt._extend,aW=gt.callbackify,lW=gt.debuglog,uW=gt.deprecate,cW=gt.format,fW=gt.inherits,hW=gt.inspect,dW=gt.isArray,pW=gt.isBoolean,gW=gt.isBuffer,mW=gt.isDate,yW=gt.isError,bW=gt.isFunction,wW=gt.isNull,vW=gt.isNullOrUndefined,_W=gt.isNumber,EW=gt.isObject,AW=gt.isPrimitive,xW=gt.isRegExp,SW=gt.isString,TW=gt.isSymbol,CW=gt.isUndefined,RW=gt.log,Mb=gt.promisify,DW=gt.types,IW=gt.TextEncoder=globalThis.TextEncoder,OW=gt.TextDecoder=globalThis.TextDecoder});var ug={};Uo(ug,{EventEmitter:()=>kW,default:()=>ao,defaultMaxListeners:()=>LW,init:()=>PW,listenerCount:()=>MW,on:()=>BW,once:()=>FW});function NW(){if(FL)return Bb;FL=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,P,R){return Function.prototype.apply.call(A,P,R)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:t=function(A){return Object.getOwnPropertyNames(A)};function n(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}Bb=o,Bb.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(A){for(var P=[],R=1;R<arguments.length;R++)P.push(arguments[R]);var Y=A==="error",te=this._events;if(te!==void 0)Y=Y&&te.error===void 0;else if(!Y)return!1;if(Y){var K;if(P.length>0&&(K=P[0]),K instanceof Error)throw K;var ie=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw ie.context=K,ie}var j=te[A];if(j===void 0)return!1;if(typeof j=="function")e(j,this,P);else for(var q=j.length,fe=b(j,q),R=0;R<q;++R)e(fe[R],this,P);return!0};function c(S,A,P,R){var Y,te,K;if(a(P),te=S._events,te===void 0?(te=S._events=Object.create(null),S._eventsCount=0):(te.newListener!==void 0&&(S.emit("newListener",A,P.listener?P.listener:P),te=S._events),K=te[A]),K===void 0)K=te[A]=P,++S._eventsCount;else if(typeof K=="function"?K=te[A]=R?[P,K]:[K,P]:R?K.unshift(P):K.push(P),Y=u(S),Y>0&&K.length>Y&&!K.warned){K.warned=!0;var ie=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");ie.name="MaxListenersExceededWarning",ie.emitter=S,ie.type=A,ie.count=K.length,n(ie)}return S}o.prototype.addListener=function(A,P){return c(this,A,P,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,P){return c(this,A,P,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(S,A,P){var R={fired:!1,wrapFn:void 0,target:S,type:A,listener:P},Y=f.bind(R);return Y.listener=P,R.wrapFn=Y,Y}o.prototype.once=function(A,P){return a(P),this.on(A,h(this,A,P)),this},o.prototype.prependOnceListener=function(A,P){return a(P),this.prependListener(A,h(this,A,P)),this},o.prototype.removeListener=function(A,P){var R,Y,te,K,ie;if(a(P),Y=this._events,Y===void 0)return this;if(R=Y[A],R===void 0)return this;if(R===P||R.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete Y[A],Y.removeListener&&this.emit("removeListener",A,R.listener||P));else if(typeof R!="function"){for(te=-1,K=R.length-1;K>=0;K--)if(R[K]===P||R[K].listener===P){ie=R[K].listener,te=K;break}if(te<0)return this;te===0?R.shift():v(R,te),R.length===1&&(Y[A]=R[0]),Y.removeListener!==void 0&&this.emit("removeListener",A,ie||P)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var P,R,Y;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[A]),this;if(arguments.length===0){var te=Object.keys(R),K;for(Y=0;Y<te.length;++Y)K=te[Y],K!=="removeListener"&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=R[A],typeof P=="function")this.removeListener(A,P);else if(P!==void 0)for(Y=P.length-1;Y>=0;Y--)this.removeListener(A,P[Y]);return this};function d(S,A,P){var R=S._events;if(R===void 0)return[];var Y=R[A];return Y===void 0?[]:typeof Y=="function"?P?[Y.listener||Y]:[Y]:P?w(Y):b(Y,Y.length)}o.prototype.listeners=function(A){return d(this,A,!0)},o.prototype.rawListeners=function(A){return d(this,A,!1)},o.listenerCount=function(S,A){return typeof S.listenerCount=="function"?S.listenerCount(A):m.call(S,A)},o.prototype.listenerCount=m;function m(S){var A=this._events;if(A!==void 0){var P=A[S];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(S,A){for(var P=new Array(A),R=0;R<A;++R)P[R]=S[R];return P}function v(S,A){for(;A+1<S.length;A++)S[A]=S[A+1];S.pop()}function w(S){for(var A=new Array(S.length),P=0;P<A.length;++P)A[P]=S[P].listener||S[P];return A}function y(S,A){return new Promise(function(P,R){function Y(K){S.removeListener(A,te),R(K)}function te(){typeof S.removeListener=="function"&&S.removeListener("error",Y),P([].slice.call(arguments))}E(S,A,te,{once:!0}),A!=="error"&&_(S,Y,{once:!0})})}function _(S,A,P){typeof S.on=="function"&&E(S,"error",A,P)}function E(S,A,P,R){if(typeof S.on=="function")R.once?S.once(A,P):S.on(A,P);else if(typeof S.addEventListener=="function")S.addEventListener(A,function Y(te){R.once&&S.removeEventListener(A,Y),P(te)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Bb}var Bb,FL,ao,kW,LW,PW,MW,BW,FW,bh=Jt(()=>{Oe();ke();Ne();Bb={},FL=!1;ao=NW();ao.once;ao.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};ao.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}};({EventEmitter:kW,defaultMaxListeners:LW,init:PW,listenerCount:MW,on:BW,once:FW}=ao)});function UW(){if(UL)return cg;UL=!0;var r=fn(),e=r.Buffer;function t(i,o){for(var s in i)o[s]=i[s]}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?cg=r:(t(r,cg),cg.Buffer=n);function n(i,o,s){return e(i,o,s)}return n.prototype=Object.create(e.prototype),t(e,n),n.from=function(i,o,s){if(typeof i=="number")throw new TypeError("Argument must not be a number");return e(i,o,s)},n.alloc=function(i,o,s){if(typeof i!="number")throw new TypeError("Argument must be a number");var a=e(i);return o!==void 0?typeof s=="string"?a.fill(o,s):a.fill(o):a.fill(0),a},n.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return e(i)},n.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(i)},cg}function jW(){if(jL)return T1;jL=!0;var r=UW().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function n(y){var _=t(y);if(typeof _!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return _||y}T1.StringDecoder=i;function i(y){this.encoding=n(y);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=d,_=4;break;case"utf8":this.fillLast=u,_=4;break;case"base64":this.text=m,this.end=b,_=3;break;default:this.write=v,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(_)}i.prototype.write=function(y){if(y.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?_?_+this.text(y,E):this.text(y,E):_||""},i.prototype.end=f,i.prototype.text=c,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,_,E){var S=_.length-1;if(S<E)return 0;var A=o(_[S]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(y.lastNeed=A-2),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,_,E){if((_[0]&192)!==128)return y.lastNeed=0,"\uFFFD";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"\uFFFD";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,"\uFFFD"}}function u(y){var _=this.lastTotal-this.lastNeed,E=a(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function c(y,_){var E=s(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=E;var S=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,S),y.toString("utf8",_,S)}function f(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"\uFFFD":_}function h(y,_){if((y.length-_)%2===0){var E=y.toString("utf16le",_);if(E){var S=E.charCodeAt(E.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function d(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function m(y,_){var E=(y.length-_)%3;return E===0?y.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-E))}function b(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(y){return y.toString(this.encoding)}function w(y){return y&&y.length?this.write(y):""}return T1}var cg,UL,T1,jL,Fb,bee,$L=Jt(()=>{Oe();ke();Ne();Ff();cg={},UL=!1;T1={},jL=!1;Fb=jW();Fb.StringDecoder;bee=Fb.StringDecoder});var gg={};Uo(gg,{Duplex:()=>GW,PassThrough:()=>YW,Readable:()=>G1,Stream:()=>ZW,Transform:()=>VW,Writable:()=>HW,default:()=>ur,finished:()=>XW,pipeline:()=>KW,promises:()=>JW});function Nr(){return zL||(zL=!0,C1={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,e){return r.includes(e)},ArrayPrototypeIndexOf(r,e){return r.indexOf(e)},ArrayPrototypeJoin(r,e){return r.join(e)},ArrayPrototypeMap(r,e){return r.map(e)},ArrayPrototypePop(r,e){return r.pop(e)},ArrayPrototypePush(r,e){return r.push(e)},ArrayPrototypeSlice(r,e,t){return r.slice(e,t)},Error,FunctionPrototypeCall(r,e,...t){return r.call(e,...t)},FunctionPrototypeSymbolHasInstance(r,e){return Function.prototype[Symbol.hasInstance].call(r,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,e){return Object.defineProperties(r,e)},ObjectDefineProperty(r,e,t){return Object.defineProperty(r,e,t)},ObjectGetOwnPropertyDescriptor(r,e){return Object.getOwnPropertyDescriptor(r,e)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,e){return Object.setPrototypeOf(r,e)},Promise,PromisePrototypeCatch(r,e){return r.catch(e)},PromisePrototypeThen(r,e,t){return r.then(e,t)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,e){return r.test(e)},SafeSet:Set,String,StringPrototypeSlice(r,e,t){return r.slice(e,t)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,e,t){return r.set(e,t)},Boolean,Uint8Array}),C1}function dg(){if(WL)return fg;WL=!0;let{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return fg=r,fg.AbortSignal=e,fg.default=r,fg}function Vn(){if(qL)return Ub;qL=!0;let r=fn(),{kResistStopPropagation:e,SymbolDispose:t}=Nr(),n=globalThis.AbortSignal||dg().AbortSignal,i=globalThis.AbortController||dg().AbortController,o=Object.getPrototypeOf(async function(){}).constructor,s=globalThis.Blob||r.Blob,a=typeof s<"u"?function(d){return d instanceof s}:function(d){return!1},u=(h,d)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE(d,"AbortSignal",h)},c=(h,d)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE(d,"Function",h)};class f extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let m="";for(let b=0;b<d.length;b++)m+=`    ${d[b].stack}
`;super(m),this.name="AggregateError",this.errors=d}}return Ub={AggregateError:f,kEmptyObject:Object.freeze({}),once(h){let d=!1;return function(...m){d||(d=!0,h.apply(this,m))}},createDeferredPromise:function(){let h,d;return{promise:new Promise((b,v)=>{h=b,d=v}),resolve:h,reject:d}},promisify(h){return new Promise((d,m)=>{h((b,...v)=>b?m(b):d(...v))})},debuglog(){return function(){}},format(h,...d){return h.replace(/%([sdifj])/g,function(...[m,b]){let v=d.shift();return b==="f"?v.toFixed(6):b==="j"?JSON.stringify(v):b==="s"&&typeof v=="object"?`${v.constructor!==Object?v.constructor.name:""} {}`.trim():v.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}},types:{isAsyncFunction(h){return h instanceof o},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:a,deprecate(h,d){return h},addAbortListener:ao.addAbortListener||function(d,m){if(d===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",d);u(d,"signal"),c(m,"listener");let b;return d.aborted?queueMicrotask(()=>m()):(d.addEventListener("abort",m,{__proto__:null,once:!0,[e]:!0}),b=()=>{d.removeEventListener("abort",m)}),{__proto__:null,[t](){var v;(v=b)===null||v===void 0||v()}}},AbortSignalAny:n.any||function(d){if(d.length===1)return d[0];let m=new i,b=()=>m.abort();return d.forEach(v=>{u(v,"signals"),v.addEventListener("abort",b,{once:!0})}),m.signal.addEventListener("abort",()=>{d.forEach(v=>v.removeEventListener("abort",b))},{once:!0}),m.signal}},Ub.promisify.custom=Symbol.for("nodejs.util.promisify.custom"),Ub}function fi(){if(HL)return R1;HL=!0;let{format:r,inspect:e,AggregateError:t}=Vn(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",u={};function c(w,y){if(!w)throw new u.ERR_INTERNAL_ASSERTION(y)}function f(w){let y="",_=w.length,E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)y=`_${w.slice(_-3,_)}${y}`;return`${w.slice(0,_)}${y}`}function h(w,y,_){if(typeof y=="function")return c(y.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${y.length}).`),y(..._);let E=(y.match(/%[dfijoOs]/g)||[]).length;return c(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?y:r(y,..._)}function d(w,y,_){_||(_=Error);class E extends _{constructor(...A){super(h(w,y,A))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[i]=!0,u[w]=E}function m(w){let y=a+w.name;return Object.defineProperty(w,"name",{value:y}),w}function b(w,y){if(w&&y&&w!==y){if(Array.isArray(y.errors))return y.errors.push(w),y;let _=new n([y,w],y.message);return _.code=y.code,_}return w||y}class v extends Error{constructor(y="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(y,_),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(w,y,_)=>{c(typeof w=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";let S=[],A=[],P=[];for(let Y of y)c(typeof Y=="string","All expected entries have to be of type string"),o.includes(Y)?S.push(Y.toLowerCase()):s.test(Y)?A.push(Y):(c(Y!=="object",'The value "object" should be written as "Object"'),P.push(Y));if(A.length>0){let Y=S.indexOf("object");Y!==-1&&(S.splice(S,Y,1),A.push("Object"))}if(S.length>0){switch(S.length){case 1:E+=`of type ${S[0]}`;break;case 2:E+=`one of type ${S[0]} or ${S[1]}`;break;default:{let Y=S.pop();E+=`one of type ${S.join(", ")}, or ${Y}`}}(A.length>0||P.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{let Y=A.pop();E+=`an instance of ${A.join(", ")}, or ${Y}`}}P.length>0&&(E+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(E+="an "),E+=`${P[0]}`;break;case 2:E+=`one of ${P[0]} or ${P[1]}`;break;default:{let Y=P.pop();E+=`one of ${P.join(", ")}, or ${Y}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var R;if((R=_.constructor)!==null&&R!==void 0&&R.name)E+=`. Received an instance of ${_.constructor.name}`;else{let Y=e(_,{depth:-1});E+=`. Received ${Y}`}}else{let Y=e(_,{colors:!1});Y.length>25&&(Y=`${Y.slice(0,25)}...`),E+=`. Received type ${typeof _} (${Y})`}return E},TypeError),d("ERR_INVALID_ARG_VALUE",(w,y,_="is invalid")=>{let E=e(y);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(w,y,_)=>{var E;let S=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${y}" function but got ${S}.`},TypeError),d("ERR_MISSING_ARGS",(...w)=>{c(w.length>0,"At least one arg needs to be specified");let y,_=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:y+=`The ${w[0]} argument`;break;case 2:y+=`The ${w[0]} and ${w[1]} arguments`;break;default:{let E=w.pop();y+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${y} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(w,y,_)=>{c(y,'Missing "range" argument');let E;return Number.isInteger(_)&&Math.abs(_)>2**32?E=f(String(_)):typeof _=="bigint"?(E=String(_),(_>2n**32n||_<-(2n**32n))&&(E=f(E)),E+="n"):E=e(_),`The value of "${w}" is out of range. It must be ${y}. Received ${E}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),R1={AbortError:v,aggregateTwoErrors:m(b),hideStackFrames:m,codes:u},R1}function pg(){if(GL)return D1;GL=!0;let{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:d,StringPrototypeTrim:m}=Nr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=fi(),{normalizeEncoding:S}=Vn(),{isAsyncFunction:A,isArrayBufferView:P}=Vn().types,R={};function Y(be){return be===(be|0)}function te(be){return be===be>>>0}let K=/^[0-7]+$/,ie="must be a 32-bit unsigned integer or an octal string";function j(be,Le,De){if(typeof be>"u"&&(be=De),typeof be=="string"){if(f(K,be)===null)throw new y(Le,be,ie);be=u(be,8)}return Ee(be,Le),be}let q=b((be,Le,De=a,Te=s)=>{if(typeof be!="number")throw new w(Le,"number",be);if(!i(be))throw new _(Le,"an integer",be);if(be<De||be>Te)throw new _(Le,`>= ${De} && <= ${Te}`,be)}),fe=b((be,Le,De=-2147483648,Te=2147483647)=>{if(typeof be!="number")throw new w(Le,"number",be);if(!i(be))throw new _(Le,"an integer",be);if(be<De||be>Te)throw new _(Le,`>= ${De} && <= ${Te}`,be)}),Ee=b((be,Le,De=!1)=>{if(typeof be!="number")throw new w(Le,"number",be);if(!i(be))throw new _(Le,"an integer",be);let Te=De?1:0,ze=4294967295;if(be<Te||be>ze)throw new _(Le,`>= ${Te} && <= ${ze}`,be)});function ve(be,Le){if(typeof be!="string")throw new w(Le,"string",be)}function H(be,Le,De=void 0,Te){if(typeof be!="number")throw new w(Le,"number",be);if(De!=null&&be<De||Te!=null&&be>Te||(De!=null||Te!=null)&&o(be))throw new _(Le,`${De!=null?`>= ${De}`:""}${De!=null&&Te!=null?" && ":""}${Te!=null?`<= ${Te}`:""}`,be)}let D=b((be,Le,De)=>{if(!e(De,be)){let ze="must be one of: "+t(n(De,He=>typeof He=="string"?`'${He}'`:h(He)),", ");throw new y(Le,be,ze)}});function ee(be,Le){if(typeof be!="boolean")throw new w(Le,"boolean",be)}function B(be,Le,De){return be==null||!c(be,Le)?De:be[Le]}let L=b((be,Le,De=null)=>{let Te=B(De,"allowArray",!1),ze=B(De,"allowFunction",!1);if(!B(De,"nullable",!1)&&be===null||!Te&&r(be)||typeof be!="object"&&(!ze||typeof be!="function"))throw new w(Le,"Object",be)}),$=b((be,Le)=>{if(be!=null&&typeof be!="object"&&typeof be!="function")throw new w(Le,"a dictionary",be)}),M=b((be,Le,De=0)=>{if(!r(be))throw new w(Le,"Array",be);if(be.length<De){let Te=`must be longer than ${De}`;throw new y(Le,be,Te)}});function G(be,Le){M(be,Le);for(let De=0;De<be.length;De++)ve(be[De],`${Le}[${De}]`)}function ne(be,Le){M(be,Le);for(let De=0;De<be.length;De++)ee(be[De],`${Le}[${De}]`)}function se(be,Le){M(be,Le);for(let De=0;De<be.length;De++){let Te=be[De],ze=`${Le}[${De}]`;if(Te==null)throw new w(ze,"AbortSignal",Te);me(Te,ze)}}function z(be,Le="signal"){if(ve(be,Le),R[be]===void 0)throw R[d(be)]!==void 0?new E(be+" (signals must use all capital letters)"):new E(be)}let N=b((be,Le="buffer")=>{if(!P(be))throw new w(Le,["Buffer","TypedArray","DataView"],be)});function F(be,Le){let De=S(Le),Te=be.length;if(De==="hex"&&Te%2!==0)throw new y("encoding",Le,`is invalid for data of length ${Te}`)}function le(be,Le="Port",De=!0){if(typeof be!="number"&&typeof be!="string"||typeof be=="string"&&m(be).length===0||+be!==+be>>>0||be>65535||be===0&&!De)throw new v(Le,be,De);return be|0}let me=b((be,Le)=>{if(be!==void 0&&(be===null||typeof be!="object"||!("aborted"in be)))throw new w(Le,"AbortSignal",be)}),U=b((be,Le)=>{if(typeof be!="function")throw new w(Le,"Function",be)}),I=b((be,Le)=>{if(typeof be!="function"||A(be))throw new w(Le,"Function",be)}),Z=b((be,Le)=>{if(be!==void 0)throw new w(Le,"undefined",be)});function ue(be,Le,De){if(!e(De,be))throw new w(Le,`('${t(De,"|")}')`,be)}let Se=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ae(be,Le){if(typeof be>"u"||!f(Se,be))throw new y(Le,be,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function de(be){if(typeof be=="string")return Ae(be,"hints"),be;if(r(be)){let Le=be.length,De="";if(Le===0)return De;for(let Te=0;Te<Le;Te++){let ze=be[Te];Ae(ze,"hints"),De+=ze,Te!==Le-1&&(De+=", ")}return De}throw new y("hints",be,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return D1={isInt32:Y,isUint32:te,parseFileMode:j,validateArray:M,validateStringArray:G,validateBooleanArray:ne,validateAbortSignalArray:se,validateBoolean:ee,validateBuffer:N,validateDictionary:$,validateEncoding:F,validateFunction:U,validateInt32:fe,validateInteger:q,validateNumber:H,validateObject:L,validateOneOf:D,validatePlainFunction:I,validatePort:le,validateSignalName:z,validateString:ve,validateUint32:Ee,validateUndefined:Z,validateUnion:ue,validateAbortSignal:me,validateLinkHeaderValue:de},D1}function oa(){if(VL)return I1;VL=!0;let{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Nr(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),o=t("nodejs.stream.readable"),s=t("nodejs.stream.writable"),a=t("nodejs.stream.disturbed"),u=t("nodejs.webstream.isClosedPromise"),c=t("nodejs.webstream.controllerErrorFunction");function f(B,L=!1){var $;return!!(B&&typeof B.pipe=="function"&&typeof B.on=="function"&&(!L||typeof B.pause=="function"&&typeof B.resume=="function")&&(!B._writableState||(($=B._readableState)===null||$===void 0?void 0:$.readable)!==!1)&&(!B._writableState||B._readableState))}function h(B){var L;return!!(B&&typeof B.write=="function"&&typeof B.on=="function"&&(!B._readableState||((L=B._writableState)===null||L===void 0?void 0:L.writable)!==!1))}function d(B){return!!(B&&typeof B.pipe=="function"&&B._readableState&&typeof B.on=="function"&&typeof B.write=="function")}function m(B){return B&&(B._readableState||B._writableState||typeof B.write=="function"&&typeof B.on=="function"||typeof B.pipe=="function"&&typeof B.on=="function")}function b(B){return!!(B&&!m(B)&&typeof B.pipeThrough=="function"&&typeof B.getReader=="function"&&typeof B.cancel=="function")}function v(B){return!!(B&&!m(B)&&typeof B.getWriter=="function"&&typeof B.abort=="function")}function w(B){return!!(B&&!m(B)&&typeof B.readable=="object"&&typeof B.writable=="object")}function y(B){return b(B)||v(B)||w(B)}function _(B,L){return B==null?!1:L===!0?typeof B[r]=="function":L===!1?typeof B[e]=="function":typeof B[r]=="function"||typeof B[e]=="function"}function E(B){if(!m(B))return null;let L=B._writableState,$=B._readableState,M=L||$;return!!(B.destroyed||B[n]||M!=null&&M.destroyed)}function S(B){if(!h(B))return null;if(B.writableEnded===!0)return!0;let L=B._writableState;return L!=null&&L.errored?!1:typeof L?.ended!="boolean"?null:L.ended}function A(B,L){if(!h(B))return null;if(B.writableFinished===!0)return!0;let $=B._writableState;return $!=null&&$.errored?!1:typeof $?.finished!="boolean"?null:!!($.finished||L===!1&&$.ended===!0&&$.length===0)}function P(B){if(!f(B))return null;if(B.readableEnded===!0)return!0;let L=B._readableState;return!L||L.errored?!1:typeof L?.ended!="boolean"?null:L.ended}function R(B,L){if(!f(B))return null;let $=B._readableState;return $!=null&&$.errored?!1:typeof $?.endEmitted!="boolean"?null:!!($.endEmitted||L===!1&&$.ended===!0&&$.length===0)}function Y(B){return B&&B[o]!=null?B[o]:typeof B?.readable!="boolean"?null:E(B)?!1:f(B)&&B.readable&&!R(B)}function te(B){return B&&B[s]!=null?B[s]:typeof B?.writable!="boolean"?null:E(B)?!1:h(B)&&B.writable&&!S(B)}function K(B,L){return m(B)?E(B)?!0:!(L?.readable!==!1&&Y(B)||L?.writable!==!1&&te(B)):null}function ie(B){var L,$;return m(B)?B.writableErrored?B.writableErrored:(L=($=B._writableState)===null||$===void 0?void 0:$.errored)!==null&&L!==void 0?L:null:null}function j(B){var L,$;return m(B)?B.readableErrored?B.readableErrored:(L=($=B._readableState)===null||$===void 0?void 0:$.errored)!==null&&L!==void 0?L:null:null}function q(B){if(!m(B))return null;if(typeof B.closed=="boolean")return B.closed;let L=B._writableState,$=B._readableState;return typeof L?.closed=="boolean"||typeof $?.closed=="boolean"?L?.closed||$?.closed:typeof B._closed=="boolean"&&fe(B)?B._closed:null}function fe(B){return typeof B._closed=="boolean"&&typeof B._defaultKeepAlive=="boolean"&&typeof B._removedConnection=="boolean"&&typeof B._removedContLen=="boolean"}function Ee(B){return typeof B._sent100=="boolean"&&fe(B)}function ve(B){var L;return typeof B._consuming=="boolean"&&typeof B._dumped=="boolean"&&((L=B.req)===null||L===void 0?void 0:L.upgradeOrConnect)===void 0}function H(B){if(!m(B))return null;let L=B._writableState,$=B._readableState,M=L||$;return!M&&Ee(B)||!!(M&&M.autoDestroy&&M.emitClose&&M.closed===!1)}function D(B){var L;return!!(B&&((L=B[a])!==null&&L!==void 0?L:B.readableDidRead||B.readableAborted))}function ee(B){var L,$,M,G,ne,se,z,N,F,le;return!!(B&&((L=($=(M=(G=(ne=(se=B[i])!==null&&se!==void 0?se:B.readableErrored)!==null&&ne!==void 0?ne:B.writableErrored)!==null&&G!==void 0?G:(z=B._readableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&M!==void 0?M:(N=B._writableState)===null||N===void 0?void 0:N.errorEmitted)!==null&&$!==void 0?$:(F=B._readableState)===null||F===void 0?void 0:F.errored)!==null&&L!==void 0?L:!((le=B._writableState)===null||le===void 0)&&le.errored))}return I1={isDestroyed:E,kIsDestroyed:n,isDisturbed:D,kIsDisturbed:a,isErrored:ee,kIsErrored:i,isReadable:Y,kIsReadable:o,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:s,isClosed:q,isDuplexNodeStream:d,isFinished:K,isIterable:_,isReadableNodeStream:f,isReadableStream:b,isReadableEnded:P,isReadableFinished:R,isReadableErrored:j,isNodeStream:m,isWebStream:y,isWritable:te,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:S,isWritableFinished:A,isWritableErrored:ie,isServerRequest:ve,isServerResponse:Ee,willEmitClose:H,isTransformStream:w},I1}function vl(){if(YL)return jb;YL=!0;let r=zr,{AbortError:e,codes:t}=fi(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:o,once:s}=Vn(),{validateAbortSignal:a,validateFunction:u,validateObject:c,validateBoolean:f}=pg(),{Promise:h,PromisePrototypeThen:d,SymbolDispose:m}=Nr(),{isClosed:b,isReadable:v,isReadableNodeStream:w,isReadableStream:y,isReadableFinished:_,isReadableErrored:E,isWritable:S,isWritableNodeStream:A,isWritableStream:P,isWritableFinished:R,isWritableErrored:Y,isNodeStream:te,willEmitClose:K,kIsClosedPromise:ie}=oa(),j;function q(D){return D.setHeader&&typeof D.abort=="function"}let fe=()=>{};function Ee(D,ee,B){var L,$;if(arguments.length===2?(B=ee,ee=o):ee==null?ee=o:c(ee,"options"),u(B,"callback"),a(ee.signal,"options.signal"),B=s(B),y(D)||P(D))return ve(D,ee,B);if(!te(D))throw new n("stream",["ReadableStream","WritableStream","Stream"],D);let M=(L=ee.readable)!==null&&L!==void 0?L:w(D),G=($=ee.writable)!==null&&$!==void 0?$:A(D),ne=D._writableState,se=D._readableState,z=()=>{D.writable||le()},N=K(D)&&w(D)===M&&A(D)===G,F=R(D,!1),le=()=>{F=!0,D.destroyed&&(N=!1),!(N&&(!D.readable||M))&&(!M||me)&&B.call(D)},me=_(D,!1),U=()=>{me=!0,D.destroyed&&(N=!1),!(N&&(!D.writable||G))&&(!G||F)&&B.call(D)},I=be=>{B.call(D,be)},Z=b(D),ue=()=>{Z=!0;let be=Y(D)||E(D);if(be&&typeof be!="boolean")return B.call(D,be);if(M&&!me&&w(D,!0)&&!_(D,!1))return B.call(D,new i);if(G&&!F&&!R(D,!1))return B.call(D,new i);B.call(D)},Se=()=>{Z=!0;let be=Y(D)||E(D);if(be&&typeof be!="boolean")return B.call(D,be);B.call(D)},Ae=()=>{D.req.on("finish",le)};q(D)?(D.on("complete",le),N||D.on("abort",ue),D.req?Ae():D.on("request",Ae)):G&&!ne&&(D.on("end",z),D.on("close",z)),!N&&typeof D.aborted=="boolean"&&D.on("aborted",ue),D.on("end",U),D.on("finish",le),ee.error!==!1&&D.on("error",I),D.on("close",ue),Z?r.nextTick(ue):ne!=null&&ne.errorEmitted||se!=null&&se.errorEmitted?N||r.nextTick(Se):(!M&&(!N||v(D))&&(F||S(D)===!1)||!G&&(!N||S(D))&&(me||v(D)===!1)||se&&D.req&&D.aborted)&&r.nextTick(Se);let de=()=>{B=fe,D.removeListener("aborted",ue),D.removeListener("complete",le),D.removeListener("abort",ue),D.removeListener("request",Ae),D.req&&D.req.removeListener("finish",le),D.removeListener("end",z),D.removeListener("close",z),D.removeListener("finish",le),D.removeListener("end",U),D.removeListener("error",I),D.removeListener("close",ue)};if(ee.signal&&!Z){let be=()=>{let Le=B;de(),Le.call(D,new e(void 0,{cause:ee.signal.reason}))};if(ee.signal.aborted)r.nextTick(be);else{j=j||Vn().addAbortListener;let Le=j(ee.signal,be),De=B;B=s((...Te)=>{Le[m](),De.apply(D,Te)})}}return de}function ve(D,ee,B){let L=!1,$=fe;if(ee.signal)if($=()=>{L=!0,B.call(D,new e(void 0,{cause:ee.signal.reason}))},ee.signal.aborted)r.nextTick($);else{j=j||Vn().addAbortListener;let G=j(ee.signal,$),ne=B;B=s((...se)=>{G[m](),ne.apply(D,se)})}let M=(...G)=>{L||r.nextTick(()=>B.apply(D,G))};return d(D[ie].promise,M,M),fe}function H(D,ee){var B;let L=!1;return ee===null&&(ee=o),(B=ee)!==null&&B!==void 0&&B.cleanup&&(f(ee.cleanup,"cleanup"),L=ee.cleanup),new h(($,M)=>{let G=Ee(D,ee,ne=>{L&&G(),ne?M(ne):$()})})}return jb=Ee,jb.finished=H,jb}function wh(){if(XL)return O1;XL=!0;let r=zr,{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=fi(),{Symbol:i}=Nr(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:u}=oa(),c=i("kDestroy"),f=i("kConstruct");function h(K,ie,j){K&&(K.stack,ie&&!ie.errored&&(ie.errored=K),j&&!j.errored&&(j.errored=K))}function d(K,ie){let j=this._readableState,q=this._writableState,fe=q||j;return q!=null&&q.destroyed||j!=null&&j.destroyed?(typeof ie=="function"&&ie(),this):(h(K,q,j),q&&(q.destroyed=!0),j&&(j.destroyed=!0),fe.constructed?m(this,K,ie):this.once(c,function(Ee){m(this,e(Ee,K),ie)}),this)}function m(K,ie,j){let q=!1;function fe(Ee){if(q)return;q=!0;let ve=K._readableState,H=K._writableState;h(Ee,H,ve),H&&(H.closed=!0),ve&&(ve.closed=!0),typeof j=="function"&&j(Ee),Ee?r.nextTick(b,K,Ee):r.nextTick(v,K)}try{K._destroy(ie||null,fe)}catch(Ee){fe(Ee)}}function b(K,ie){w(K,ie),v(K)}function v(K){let ie=K._readableState,j=K._writableState;j&&(j.closeEmitted=!0),ie&&(ie.closeEmitted=!0),(j!=null&&j.emitClose||ie!=null&&ie.emitClose)&&K.emit("close")}function w(K,ie){let j=K._readableState,q=K._writableState;q!=null&&q.errorEmitted||j!=null&&j.errorEmitted||(q&&(q.errorEmitted=!0),j&&(j.errorEmitted=!0),K.emit("error",ie))}function y(){let K=this._readableState,ie=this._writableState;K&&(K.constructed=!0,K.closed=!1,K.closeEmitted=!1,K.destroyed=!1,K.errored=null,K.errorEmitted=!1,K.reading=!1,K.ended=K.readable===!1,K.endEmitted=K.readable===!1),ie&&(ie.constructed=!0,ie.destroyed=!1,ie.closed=!1,ie.closeEmitted=!1,ie.errored=null,ie.errorEmitted=!1,ie.finalCalled=!1,ie.prefinished=!1,ie.ended=ie.writable===!1,ie.ending=ie.writable===!1,ie.finished=ie.writable===!1)}function _(K,ie,j){let q=K._readableState,fe=K._writableState;if(fe!=null&&fe.destroyed||q!=null&&q.destroyed)return this;q!=null&&q.autoDestroy||fe!=null&&fe.autoDestroy?K.destroy(ie):ie&&(ie.stack,fe&&!fe.errored&&(fe.errored=ie),q&&!q.errored&&(q.errored=ie),j?r.nextTick(w,K,ie):w(K,ie))}function E(K,ie){if(typeof K._construct!="function")return;let j=K._readableState,q=K._writableState;j&&(j.constructed=!1),q&&(q.constructed=!1),K.once(f,ie),!(K.listenerCount(f)>1)&&r.nextTick(S,K)}function S(K){let ie=!1;function j(q){if(ie){_(K,q??new t);return}ie=!0;let fe=K._readableState,Ee=K._writableState,ve=Ee||fe;fe&&(fe.constructed=!0),Ee&&(Ee.constructed=!0),ve.destroyed?K.emit(c,q):q?_(K,q,!0):r.nextTick(A,K)}try{K._construct(q=>{r.nextTick(j,q)})}catch(q){r.nextTick(j,q)}}function A(K){K.emit(f)}function P(K){return K?.setHeader&&typeof K.abort=="function"}function R(K){K.emit("close")}function Y(K,ie){K.emit("error",ie),r.nextTick(R,K)}function te(K,ie){!K||s(K)||(!ie&&!a(K)&&(ie=new n),u(K)?(K.socket=null,K.destroy(ie)):P(K)?K.abort():P(K.req)?K.req.abort():typeof K.destroy=="function"?K.destroy(ie):typeof K.close=="function"?K.close():ie?r.nextTick(Y,K,ie):r.nextTick(R,K),K.destroyed||(K[o]=!0))}return O1={construct:E,destroyer:te,destroy:d,undestroy:y,errorOrDestroy:_},O1}function V1(){if(KL)return N1;KL=!0;let{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Nr(),{EventEmitter:t}=ao;function n(o){t.call(this,o)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(o,s){let a=this;function u(v){o.writable&&o.write(v)===!1&&a.pause&&a.pause()}a.on("data",u);function c(){a.readable&&a.resume&&a.resume()}o.on("drain",c),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",h),a.on("close",d));let f=!1;function h(){f||(f=!0,o.end())}function d(){f||(f=!0,typeof o.destroy=="function"&&o.destroy())}function m(v){b(),t.listenerCount(this,"error")===0&&this.emit("error",v)}i(a,"error",m),i(o,"error",m);function b(){a.removeListener("data",u),o.removeListener("drain",c),a.removeListener("end",h),a.removeListener("close",d),a.removeListener("error",m),o.removeListener("error",m),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):r(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return N1={Stream:n,prependListener:i},N1}function zb(){if(ZL)return hg;ZL=!0;let{SymbolDispose:r}=Nr(),{AbortError:e,codes:t}=fi(),{isNodeStream:n,isWebStream:i,kControllerErrorFunction:o}=oa(),s=vl(),{ERR_INVALID_ARG_TYPE:a}=t,u,c=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new a(h,"AbortSignal",f)};return hg.addAbortSignal=function(h,d){if(c(h,"signal"),!n(d)&&!i(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return hg.addAbortSignalNoValidate(h,d)},hg.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;let d=n(h)?()=>{h.destroy(new e(void 0,{cause:f.reason}))}:()=>{h[o](new e(void 0,{cause:f.reason}))};if(f.aborted)d();else{u=u||Vn().addAbortListener;let m=u(f,d);s(h,m[r])}return h},hg}function $W(){if(JL)return k1;JL=!0;let{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Nr(),{Buffer:i}=fn(),{inspect:o}=Vn();return k1=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let u={data:a,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(a){let u={data:a,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=a+u.data;return c}concat(a){if(this.length===0)return i.alloc(0);let u=i.allocUnsafe(a>>>0),c=this.head,f=0;for(;c;)t(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(a,u){let c=this.head.data;if(a<c.length){let f=c.slice(0,a);return this.head.data=c.slice(a),f}return a===c.length?this.shift():u?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[e](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let u="",c=this.head,f=0;do{let h=c.data;if(a>h.length)u+=h,a-=h.length;else{a===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=r(h,0,a),this.head=c,c.data=r(h,a));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(a){let u=i.allocUnsafe(a),c=a,f=this.head,h=0;do{let d=f.data;if(a>d.length)t(u,d,c-a),a-=d.length;else{a===d.length?(t(u,d,c-a),++h,f.next?this.head=f.next:this.head=this.tail=null):(t(u,new n(d.buffer,d.byteOffset,a),c-a),this.head=f,f.data=d.slice(a));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](a,u){return o(this,{...u,depth:0,customInspect:!1})}},k1}function Wb(){if(QL)return L1;QL=!0;let{MathFloor:r,NumberIsInteger:e}=Nr(),{validateInteger:t}=pg(),{ERR_INVALID_ARG_VALUE:n}=fi().codes,i=16*1024,o=16;function s(f,h,d){return f.highWaterMark!=null?f.highWaterMark:h?f[d]:null}function a(f){return f?o:i}function u(f,h){t(h,"value",0),f?o=h:i=h}function c(f,h,d,m){let b=s(h,m,d);if(b!=null){if(!e(b)||b<0){let v=m?`options.${d}`:"options.highWaterMark";throw new n(v,b)}return r(b)}return a(f.objectMode)}return L1={getHighWaterMark:c,getDefaultHighWaterMark:a,setDefaultHighWaterMark:u},L1}function pP(){if(eP)return P1;eP=!0;let r=zr,{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Nr(),{Buffer:i}=fn(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=fi().codes;function a(u,c,f){let h;if(typeof c=="string"||c instanceof i)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let d;if(c&&c[t])d=!0,h=c[t]();else if(c&&c[n])d=!1,h=c[n]();else throw new o("iterable",["Iterable"],c);let m=new u({objectMode:!0,highWaterMark:1,...f}),b=!1;m._read=function(){b||(b=!0,w())},m._destroy=function(y,_){e(v(y),()=>r.nextTick(_,y),E=>r.nextTick(_,E||y))};async function v(y){let _=y!=null,E=typeof h.throw=="function";if(_&&E){let{value:S,done:A}=await h.throw(y);if(await S,A)return}if(typeof h.return=="function"){let{value:S}=await h.return();await S}}async function w(){for(;;){try{let{value:y,done:_}=d?await h.next():h.next();if(_)m.push(null);else{let E=y&&typeof y.then=="function"?await y:y;if(E===null)throw b=!1,new s;if(m.push(E))continue;b=!1}}catch(y){m.destroy(y)}break}}return m}return P1=a,P1}function qb(){if(tP)return M1;tP=!0;let r=zr,{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:d}=Nr();M1=Te,Te.ReadableState=De;let{EventEmitter:m}=ao,{Stream:b,prependListener:v}=V1(),{Buffer:w}=fn(),{addAbortSignal:y}=zb(),_=vl(),E=Vn().debuglog("stream",he=>{E=he}),S=$W(),A=wh(),{getHighWaterMark:P,getDefaultHighWaterMark:R}=Wb(),{aggregateTwoErrors:Y,codes:{ERR_INVALID_ARG_TYPE:te,ERR_METHOD_NOT_IMPLEMENTED:K,ERR_OUT_OF_RANGE:ie,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:q},AbortError:fe}=fi(),{validateObject:Ee}=pg(),ve=d("kPaused"),{StringDecoder:H}=Fb,D=pP();a(Te.prototype,b.prototype),a(Te,b);let ee=()=>{},{errorOrDestroy:B}=A,L=1,$=2,M=4,G=8,ne=16,se=32,z=64,N=128,F=256,le=512,me=1024,U=2048,I=4096,Z=8192,ue=16384,Se=32768,Ae=65536,de=1<<17,be=1<<18;function Le(he){return{enumerable:!1,get(){return((this||Ve).state&he)!==0},set(ye){ye?(this||Ve).state|=he:(this||Ve).state&=~he}}}o(De.prototype,{objectMode:Le(L),ended:Le($),endEmitted:Le(M),reading:Le(G),constructed:Le(ne),sync:Le(se),needReadable:Le(z),emittedReadable:Le(N),readableListening:Le(F),resumeScheduled:Le(le),errorEmitted:Le(me),emitClose:Le(U),autoDestroy:Le(I),destroyed:Le(Z),closed:Le(ue),closeEmitted:Le(Se),multiAwaitDrain:Le(Ae),readingMore:Le(de),dataEmitted:Le(be)});function De(he,ye,Ge){typeof Ge!="boolean"&&(Ge=ye instanceof sa()),(this||Ve).state=U|I|ne|se,he&&he.objectMode&&((this||Ve).state|=L),Ge&&he&&he.readableObjectMode&&((this||Ve).state|=L),(this||Ve).highWaterMark=he?P(this||Ve,he,"readableHighWaterMark",Ge):R(!1),(this||Ve).buffer=new S,(this||Ve).length=0,(this||Ve).pipes=[],(this||Ve).flowing=null,(this||Ve)[ve]=null,he&&he.emitClose===!1&&((this||Ve).state&=~U),he&&he.autoDestroy===!1&&((this||Ve).state&=~I),(this||Ve).errored=null,(this||Ve).defaultEncoding=he&&he.defaultEncoding||"utf8",(this||Ve).awaitDrainWriters=null,(this||Ve).decoder=null,(this||Ve).encoding=null,he&&he.encoding&&((this||Ve).decoder=new H(he.encoding),(this||Ve).encoding=he.encoding)}function Te(he){if(!((this||Ve)instanceof Te))return new Te(he);let ye=(this||Ve)instanceof sa();(this||Ve)._readableState=new De(he,this||Ve,ye),he&&(typeof he.read=="function"&&((this||Ve)._read=he.read),typeof he.destroy=="function"&&((this||Ve)._destroy=he.destroy),typeof he.construct=="function"&&((this||Ve)._construct=he.construct),he.signal&&!ye&&y(he.signal,this||Ve)),b.call(this||Ve,he),A.construct(this||Ve,()=>{(this||Ve)._readableState.needReadable&&C(this||Ve,(this||Ve)._readableState)})}Te.prototype.destroy=A.destroy,Te.prototype._undestroy=A.undestroy,Te.prototype._destroy=function(he,ye){ye(he)},Te.prototype[m.captureRejectionSymbol]=function(he){this.destroy(he)},Te.prototype[f]=function(){let he;return(this||Ve).destroyed||(he=(this||Ve).readableEnded?null:new fe,this.destroy(he)),new u((ye,Ge)=>_(this||Ve,je=>je&&je!==he?Ge(je):ye(null)))},Te.prototype.push=function(he,ye){return ze(this||Ve,he,ye,!1)},Te.prototype.unshift=function(he,ye){return ze(this||Ve,he,ye,!0)};function ze(he,ye,Ge,je){E("readableAddChunk",ye);let Qe=he._readableState,dt;if((Qe.state&L)===0&&(typeof ye=="string"?(Ge=Ge||Qe.defaultEncoding,Qe.encoding!==Ge&&(je&&Qe.encoding?ye=w.from(ye,Ge).toString(Qe.encoding):(ye=w.from(ye,Ge),Ge=""))):ye instanceof w?Ge="":b._isUint8Array(ye)?(ye=b._uint8ArrayToBuffer(ye),Ge=""):ye!=null&&(dt=new te("chunk",["string","Buffer","Uint8Array"],ye))),dt)B(he,dt);else if(ye===null)Qe.state&=~G,p(he,Qe);else if((Qe.state&L)!==0||ye&&ye.length>0)if(je)if((Qe.state&M)!==0)B(he,new q);else{if(Qe.destroyed||Qe.errored)return!1;He(he,Qe,ye,!0)}else if(Qe.ended)B(he,new j);else{if(Qe.destroyed||Qe.errored)return!1;Qe.state&=~G,Qe.decoder&&!Ge?(ye=Qe.decoder.write(ye),Qe.objectMode||ye.length!==0?He(he,Qe,ye,!1):C(he,Qe)):He(he,Qe,ye,!1)}else je||(Qe.state&=~G,C(he,Qe));return!Qe.ended&&(Qe.length<Qe.highWaterMark||Qe.length===0)}function He(he,ye,Ge,je){ye.flowing&&ye.length===0&&!ye.sync&&he.listenerCount("data")>0?((ye.state&Ae)!==0?ye.awaitDrainWriters.clear():ye.awaitDrainWriters=null,ye.dataEmitted=!0,he.emit("data",Ge)):(ye.length+=ye.objectMode?1:Ge.length,je?ye.buffer.unshift(Ge):ye.buffer.push(Ge),(ye.state&z)!==0&&T(he)),C(he,ye)}Te.prototype.isPaused=function(){let he=(this||Ve)._readableState;return he[ve]===!0||he.flowing===!1},Te.prototype.setEncoding=function(he){let ye=new H(he);(this||Ve)._readableState.decoder=ye,(this||Ve)._readableState.encoding=(this||Ve)._readableState.decoder.encoding;let Ge=(this||Ve)._readableState.buffer,je="";for(let Qe of Ge)je+=ye.write(Qe);return Ge.clear(),je!==""&&Ge.push(je),(this||Ve)._readableState.length=je.length,this||Ve};let We=1073741824;function x(he){if(he>We)throw new ie("size","<= 1GiB",he);return he--,he|=he>>>1,he|=he>>>2,he|=he>>>4,he|=he>>>8,he|=he>>>16,he++,he}function g(he,ye){return he<=0||ye.length===0&&ye.ended?0:(ye.state&L)!==0?1:n(he)?ye.flowing&&ye.length?ye.buffer.first().length:ye.length:he<=ye.length?he:ye.ended?ye.length:0}Te.prototype.read=function(he){E("read",he),he===void 0?he=NaN:t(he)||(he=i(he,10));let ye=(this||Ve)._readableState,Ge=he;if(he>ye.highWaterMark&&(ye.highWaterMark=x(he)),he!==0&&(ye.state&=~N),he===0&&ye.needReadable&&((ye.highWaterMark!==0?ye.length>=ye.highWaterMark:ye.length>0)||ye.ended))return E("read: emitReadable",ye.length,ye.ended),ye.length===0&&ye.ended?$e(this||Ve):T(this||Ve),null;if(he=g(he,ye),he===0&&ye.ended)return ye.length===0&&$e(this||Ve),null;let je=(ye.state&z)!==0;if(E("need readable",je),(ye.length===0||ye.length-he<ye.highWaterMark)&&(je=!0,E("length less than watermark",je)),ye.ended||ye.reading||ye.destroyed||ye.errored||!ye.constructed)je=!1,E("reading, ended or constructing",je);else if(je){E("do read"),ye.state|=G|se,ye.length===0&&(ye.state|=z);try{this._read(ye.highWaterMark)}catch(dt){B(this||Ve,dt)}ye.state&=~se,ye.reading||(he=g(Ge,ye))}let Qe;return he>0?Qe=Me(he,ye):Qe=null,Qe===null?(ye.needReadable=ye.length<=ye.highWaterMark,he=0):(ye.length-=he,ye.multiAwaitDrain?ye.awaitDrainWriters.clear():ye.awaitDrainWriters=null),ye.length===0&&(ye.ended||(ye.needReadable=!0),Ge!==he&&ye.ended&&$e(this||Ve)),Qe!==null&&!ye.errorEmitted&&!ye.closeEmitted&&(ye.dataEmitted=!0,this.emit("data",Qe)),Qe};function p(he,ye){if(E("onEofChunk"),!ye.ended){if(ye.decoder){let Ge=ye.decoder.end();Ge&&Ge.length&&(ye.buffer.push(Ge),ye.length+=ye.objectMode?1:Ge.length)}ye.ended=!0,ye.sync?T(he):(ye.needReadable=!1,ye.emittedReadable=!0,J(he))}}function T(he){let ye=he._readableState;E("emitReadable",ye.needReadable,ye.emittedReadable),ye.needReadable=!1,ye.emittedReadable||(E("emitReadable",ye.flowing),ye.emittedReadable=!0,r.nextTick(J,he))}function J(he){let ye=he._readableState;E("emitReadable_",ye.destroyed,ye.length,ye.ended),!ye.destroyed&&!ye.errored&&(ye.length||ye.ended)&&(he.emit("readable"),ye.emittedReadable=!1),ye.needReadable=!ye.flowing&&!ye.ended&&ye.length<=ye.highWaterMark,Be(he)}function C(he,ye){!ye.readingMore&&ye.constructed&&(ye.readingMore=!0,r.nextTick(oe,he,ye))}function oe(he,ye){for(;!ye.reading&&!ye.ended&&(ye.length<ye.highWaterMark||ye.flowing&&ye.length===0);){let Ge=ye.length;if(E("maybeReadMore read 0"),he.read(0),Ge===ye.length)break}ye.readingMore=!1}Te.prototype._read=function(he){throw new K("_read()")},Te.prototype.pipe=function(he,ye){let Ge=this||Ve,je=(this||Ve)._readableState;je.pipes.length===1&&(je.multiAwaitDrain||(je.multiAwaitDrain=!0,je.awaitDrainWriters=new c(je.awaitDrainWriters?[je.awaitDrainWriters]:[]))),je.pipes.push(he),E("pipe count=%d opts=%j",je.pipes.length,ye);let dt=(!ye||ye.end!==!1)&&he!==r.stdout&&he!==r.stderr?Et:Zr;je.endEmitted?r.nextTick(dt):Ge.once("end",dt),he.on("unpipe",Rt);function Rt(Jr,Qr){E("onunpipe"),Jr===Ge&&Qr&&Qr.hasUnpiped===!1&&(Qr.hasUnpiped=!0,qn())}function Et(){E("onend"),he.end()}let ar,_i=!1;function qn(){E("cleanup"),he.removeListener("close",Wt),he.removeListener("finish",Yt),ar&&he.removeListener("drain",ar),he.removeListener("error",yr),he.removeListener("unpipe",Rt),Ge.removeListener("end",Et),Ge.removeListener("end",Zr),Ge.removeListener("data",Dr),_i=!0,ar&&je.awaitDrainWriters&&(!he._writableState||he._writableState.needDrain)&&ar()}function Ht(){_i||(je.pipes.length===1&&je.pipes[0]===he?(E("false write response, pause",0),je.awaitDrainWriters=he,je.multiAwaitDrain=!1):je.pipes.length>1&&je.pipes.includes(he)&&(E("false write response, pause",je.awaitDrainWriters.size),je.awaitDrainWriters.add(he)),Ge.pause()),ar||(ar=ce(Ge,he),he.on("drain",ar))}Ge.on("data",Dr);function Dr(Jr){E("ondata");let Qr=he.write(Jr);E("dest.write",Qr),Qr===!1&&Ht()}function yr(Jr){if(E("onerror",Jr),Zr(),he.removeListener("error",yr),he.listenerCount("error")===0){let Qr=he._writableState||he._readableState;Qr&&!Qr.errorEmitted?B(he,Jr):he.emit("error",Jr)}}v(he,"error",yr);function Wt(){he.removeListener("finish",Yt),Zr()}he.once("close",Wt);function Yt(){E("onfinish"),he.removeListener("close",Wt),Zr()}he.once("finish",Yt);function Zr(){E("unpipe"),Ge.unpipe(he)}return he.emit("pipe",Ge),he.writableNeedDrain===!0?Ht():je.flowing||(E("pipe resume"),Ge.resume()),he};function ce(he,ye){return function(){let je=he._readableState;je.awaitDrainWriters===ye?(E("pipeOnDrain",1),je.awaitDrainWriters=null):je.multiAwaitDrain&&(E("pipeOnDrain",je.awaitDrainWriters.size),je.awaitDrainWriters.delete(ye)),(!je.awaitDrainWriters||je.awaitDrainWriters.size===0)&&he.listenerCount("data")&&he.resume()}}Te.prototype.unpipe=function(he){let ye=(this||Ve)._readableState,Ge={hasUnpiped:!1};if(ye.pipes.length===0)return this||Ve;if(!he){let Qe=ye.pipes;ye.pipes=[],this.pause();for(let dt=0;dt<Qe.length;dt++)Qe[dt].emit("unpipe",this||Ve,{hasUnpiped:!1});return this||Ve}let je=e(ye.pipes,he);return je===-1?this||Ve:(ye.pipes.splice(je,1),ye.pipes.length===0&&this.pause(),he.emit("unpipe",this||Ve,Ge),this||Ve)},Te.prototype.on=function(he,ye){let Ge=b.prototype.on.call(this||Ve,he,ye),je=(this||Ve)._readableState;return he==="data"?(je.readableListening=this.listenerCount("readable")>0,je.flowing!==!1&&this.resume()):he==="readable"&&!je.endEmitted&&!je.readableListening&&(je.readableListening=je.needReadable=!0,je.flowing=!1,je.emittedReadable=!1,E("on readable",je.length,je.reading),je.length?T(this||Ve):je.reading||r.nextTick(_e,this||Ve)),Ge},Te.prototype.addListener=Te.prototype.on,Te.prototype.removeListener=function(he,ye){let Ge=b.prototype.removeListener.call(this||Ve,he,ye);return he==="readable"&&r.nextTick(xe,this||Ve),Ge},Te.prototype.off=Te.prototype.removeListener,Te.prototype.removeAllListeners=function(he){let ye=b.prototype.removeAllListeners.apply(this||Ve,arguments);return(he==="readable"||he===void 0)&&r.nextTick(xe,this||Ve),ye};function xe(he){let ye=he._readableState;ye.readableListening=he.listenerCount("readable")>0,ye.resumeScheduled&&ye[ve]===!1?ye.flowing=!0:he.listenerCount("data")>0?he.resume():ye.readableListening||(ye.flowing=null)}function _e(he){E("readable nexttick read 0"),he.read(0)}Te.prototype.resume=function(){let he=(this||Ve)._readableState;return he.flowing||(E("resume"),he.flowing=!he.readableListening,Re(this||Ve,he)),he[ve]=!1,this||Ve};function Re(he,ye){ye.resumeScheduled||(ye.resumeScheduled=!0,r.nextTick(Q,he,ye))}function Q(he,ye){E("resume",ye.reading),ye.reading||he.read(0),ye.resumeScheduled=!1,he.emit("resume"),Be(he),ye.flowing&&!ye.reading&&he.read(0)}Te.prototype.pause=function(){return E("call pause flowing=%j",(this||Ve)._readableState.flowing),(this||Ve)._readableState.flowing!==!1&&(E("pause"),(this||Ve)._readableState.flowing=!1,this.emit("pause")),(this||Ve)._readableState[ve]=!0,this||Ve};function Be(he){let ye=he._readableState;for(E("flow",ye.flowing);ye.flowing&&he.read()!==null;);}Te.prototype.wrap=function(he){let ye=!1;he.on("data",je=>{!this.push(je)&&he.pause&&(ye=!0,he.pause())}),he.on("end",()=>{this.push(null)}),he.on("error",je=>{B(this||Ve,je)}),he.on("close",()=>{this.destroy()}),he.on("destroy",()=>{this.destroy()}),(this||Ve)._read=()=>{ye&&he.resume&&(ye=!1,he.resume())};let Ge=s(he);for(let je=1;je<Ge.length;je++){let Qe=Ge[je];(this||Ve)[Qe]===void 0&&typeof he[Qe]=="function"&&((this||Ve)[Qe]=he[Qe].bind(he))}return this||Ve},Te.prototype[h]=function(){return tt(this||Ve)},Te.prototype.iterator=function(he){return he!==void 0&&Ee(he,"options"),tt(this||Ve,he)};function tt(he,ye){typeof he.read!="function"&&(he=Te.wrap(he,{objectMode:!0}));let Ge=O(he,ye);return Ge.stream=he,Ge}async function*O(he,ye){let Ge=ee;function je(Rt){(this||Ve)===he?(Ge(),Ge=ee):Ge=Rt}he.on("readable",je);let Qe,dt=_(he,{writable:!1},Rt=>{Qe=Rt?Y(Qe,Rt):null,Ge(),Ge=ee});try{for(;;){let Rt=he.destroyed?null:he.read();if(Rt!==null)yield Rt;else{if(Qe)throw Qe;if(Qe===null)return;await new u(je)}}}catch(Rt){throw Qe=Y(Qe,Rt),Qe}finally{(Qe||ye?.destroyOnReturn!==!1)&&(Qe===void 0||he._readableState.autoDestroy)?A.destroyer(he,null):(he.off("readable",je),dt())}}o(Te.prototype,{readable:{__proto__:null,get(){let he=(this||Ve)._readableState;return!!he&&he.readable!==!1&&!he.destroyed&&!he.errorEmitted&&!he.endEmitted},set(he){(this||Ve)._readableState&&((this||Ve)._readableState.readable=!!he)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return(this||Ve)._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||Ve)._readableState.readable!==!1&&((this||Ve)._readableState.destroyed||(this||Ve)._readableState.errored)&&!(this||Ve)._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return(this||Ve)._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return(this||Ve)._readableState&&(this||Ve)._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return(this||Ve)._readableState.flowing},set:function(he){(this||Ve)._readableState&&((this||Ve)._readableState.flowing=he)}},readableLength:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState?(this||Ve)._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState?(this||Ve)._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState?(this||Ve)._readableState.errored:null}},closed:{__proto__:null,get(){return(this||Ve)._readableState?(this||Ve)._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState?(this||Ve)._readableState.destroyed:!1},set(he){(this||Ve)._readableState&&((this||Ve)._readableState.destroyed=he)}},readableEnded:{__proto__:null,enumerable:!1,get(){return(this||Ve)._readableState?(this||Ve)._readableState.endEmitted:!1}}}),o(De.prototype,{pipesCount:{__proto__:null,get(){return(this||Ve).pipes.length}},paused:{__proto__:null,get(){return(this||Ve)[ve]!==!1},set(he){(this||Ve)[ve]=!!he}}}),Te._fromList=Me;function Me(he,ye){if(ye.length===0)return null;let Ge;return ye.objectMode?Ge=ye.buffer.shift():!he||he>=ye.length?(ye.decoder?Ge=ye.buffer.join(""):ye.buffer.length===1?Ge=ye.buffer.first():Ge=ye.buffer.concat(ye.length),ye.buffer.clear()):Ge=ye.buffer.consume(he,ye.decoder),Ge}function $e(he){let ye=he._readableState;E("endReadable",ye.endEmitted),ye.endEmitted||(ye.ended=!0,r.nextTick(ge,ye,he))}function ge(he,ye){if(E("endReadableNT",he.endEmitted,he.length),!he.errored&&!he.closeEmitted&&!he.endEmitted&&he.length===0){if(he.endEmitted=!0,ye.emit("end"),ye.writable&&ye.allowHalfOpen===!1)r.nextTick(Ie,ye);else if(he.autoDestroy){let Ge=ye._writableState;(!Ge||Ge.autoDestroy&&(Ge.finished||Ge.writable===!1))&&ye.destroy()}}}function Ie(he){he.writable&&!he.writableEnded&&!he.destroyed&&he.end()}Te.from=function(he,ye){return D(Te,he,ye)};let Fe;function ut(){return Fe===void 0&&(Fe={}),Fe}return Te.fromWeb=function(he,ye){return ut().newStreamReadableFromReadableStream(he,ye)},Te.toWeb=function(he,ye){return ut().newReadableStreamFromStreamReadable(he,ye)},Te.wrap=function(he,ye){var Ge,je;return new Te({objectMode:(Ge=(je=he.readableObjectMode)!==null&&je!==void 0?je:he.objectMode)!==null&&Ge!==void 0?Ge:!0,...ye,destroy(Qe,dt){A.destroyer(he,Qe),dt(Qe)}}).wrap(he)},M1}function Y1(){if(rP)return B1;rP=!0;let r=zr,{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:u,SymbolHasInstance:c}=Nr();B1=Ee,Ee.WritableState=q;let{EventEmitter:f}=ao,h=V1().Stream,{Buffer:d}=fn(),m=wh(),{addAbortSignal:b}=zb(),{getHighWaterMark:v,getDefaultHighWaterMark:w}=Wb(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:Y,ERR_UNKNOWN_ENCODING:te}=fi().codes,{errorOrDestroy:K}=m;s(Ee.prototype,h.prototype),s(Ee,h);function ie(){}let j=u("kOnFinished");function q(I,Z,ue){typeof ue!="boolean"&&(ue=Z instanceof sa()),(this||Ze).objectMode=!!(I&&I.objectMode),ue&&((this||Ze).objectMode=(this||Ze).objectMode||!!(I&&I.writableObjectMode)),(this||Ze).highWaterMark=I?v(this||Ze,I,"writableHighWaterMark",ue):w(!1),(this||Ze).finalCalled=!1,(this||Ze).needDrain=!1,(this||Ze).ending=!1,(this||Ze).ended=!1,(this||Ze).finished=!1,(this||Ze).destroyed=!1;let Se=!!(I&&I.decodeStrings===!1);(this||Ze).decodeStrings=!Se,(this||Ze).defaultEncoding=I&&I.defaultEncoding||"utf8",(this||Ze).length=0,(this||Ze).writing=!1,(this||Ze).corked=0,(this||Ze).sync=!0,(this||Ze).bufferProcessing=!1,(this||Ze).onwrite=B.bind(void 0,Z),(this||Ze).writecb=null,(this||Ze).writelen=0,(this||Ze).afterWriteTickInfo=null,fe(this||Ze),(this||Ze).pendingcb=0,(this||Ze).constructed=!0,(this||Ze).prefinished=!1,(this||Ze).errorEmitted=!1,(this||Ze).emitClose=!I||I.emitClose!==!1,(this||Ze).autoDestroy=!I||I.autoDestroy!==!1,(this||Ze).errored=null,(this||Ze).closed=!1,(this||Ze).closeEmitted=!1,(this||Ze)[j]=[]}function fe(I){I.buffered=[],I.bufferedIndex=0,I.allBuffers=!0,I.allNoop=!0}q.prototype.getBuffer=function(){return e((this||Ze).buffered,(this||Ze).bufferedIndex)},i(q.prototype,"bufferedRequestCount",{__proto__:null,get(){return(this||Ze).buffered.length-(this||Ze).bufferedIndex}});function Ee(I){let Z=(this||Ze)instanceof sa();if(!Z&&!n(Ee,this||Ze))return new Ee(I);(this||Ze)._writableState=new q(I,this||Ze,Z),I&&(typeof I.write=="function"&&((this||Ze)._write=I.write),typeof I.writev=="function"&&((this||Ze)._writev=I.writev),typeof I.destroy=="function"&&((this||Ze)._destroy=I.destroy),typeof I.final=="function"&&((this||Ze)._final=I.final),typeof I.construct=="function"&&((this||Ze)._construct=I.construct),I.signal&&b(I.signal,this||Ze)),h.call(this||Ze,I),m.construct(this||Ze,()=>{let ue=(this||Ze)._writableState;ue.writing||G(this||Ze,ue),N(this||Ze,ue)})}i(Ee,c,{__proto__:null,value:function(I){return n(this||Ze,I)?!0:(this||Ze)!==Ee?!1:I&&I._writableState instanceof q}}),Ee.prototype.pipe=function(){K(this||Ze,new S)};function ve(I,Z,ue,Se){let Ae=I._writableState;if(typeof ue=="function")Se=ue,ue=Ae.defaultEncoding;else{if(!ue)ue=Ae.defaultEncoding;else if(ue!=="buffer"&&!d.isEncoding(ue))throw new te(ue);typeof Se!="function"&&(Se=ie)}if(Z===null)throw new R;if(!Ae.objectMode)if(typeof Z=="string")Ae.decodeStrings!==!1&&(Z=d.from(Z,ue),ue="buffer");else if(Z instanceof d)ue="buffer";else if(h._isUint8Array(Z))Z=h._uint8ArrayToBuffer(Z),ue="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],Z);let de;return Ae.ending?de=new Y:Ae.destroyed&&(de=new A("write")),de?(r.nextTick(Se,de),K(I,de,!0),de):(Ae.pendingcb++,H(I,Ae,Z,ue,Se))}Ee.prototype.write=function(I,Z,ue){return ve(this||Ze,I,Z,ue)===!0},Ee.prototype.cork=function(){(this||Ze)._writableState.corked++},Ee.prototype.uncork=function(){let I=(this||Ze)._writableState;I.corked&&(I.corked--,I.writing||G(this||Ze,I))},Ee.prototype.setDefaultEncoding=function(Z){if(typeof Z=="string"&&(Z=a(Z)),!d.isEncoding(Z))throw new te(Z);return(this||Ze)._writableState.defaultEncoding=Z,this||Ze};function H(I,Z,ue,Se,Ae){let de=Z.objectMode?1:ue.length;Z.length+=de;let be=Z.length<Z.highWaterMark;return be||(Z.needDrain=!0),Z.writing||Z.corked||Z.errored||!Z.constructed?(Z.buffered.push({chunk:ue,encoding:Se,callback:Ae}),Z.allBuffers&&Se!=="buffer"&&(Z.allBuffers=!1),Z.allNoop&&Ae!==ie&&(Z.allNoop=!1)):(Z.writelen=de,Z.writecb=Ae,Z.writing=!0,Z.sync=!0,I._write(ue,Se,Z.onwrite),Z.sync=!1),be&&!Z.errored&&!Z.destroyed}function D(I,Z,ue,Se,Ae,de,be){Z.writelen=Se,Z.writecb=be,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new A("write")):ue?I._writev(Ae,Z.onwrite):I._write(Ae,de,Z.onwrite),Z.sync=!1}function ee(I,Z,ue,Se){--Z.pendingcb,Se(ue),M(Z),K(I,ue)}function B(I,Z){let ue=I._writableState,Se=ue.sync,Ae=ue.writecb;if(typeof Ae!="function"){K(I,new E);return}ue.writing=!1,ue.writecb=null,ue.length-=ue.writelen,ue.writelen=0,Z?(Z.stack,ue.errored||(ue.errored=Z),I._readableState&&!I._readableState.errored&&(I._readableState.errored=Z),Se?r.nextTick(ee,I,ue,Z,Ae):ee(I,ue,Z,Ae)):(ue.buffered.length>ue.bufferedIndex&&G(I,ue),Se?ue.afterWriteTickInfo!==null&&ue.afterWriteTickInfo.cb===Ae?ue.afterWriteTickInfo.count++:(ue.afterWriteTickInfo={count:1,cb:Ae,stream:I,state:ue},r.nextTick(L,ue.afterWriteTickInfo)):$(I,ue,1,Ae))}function L({stream:I,state:Z,count:ue,cb:Se}){return Z.afterWriteTickInfo=null,$(I,Z,ue,Se)}function $(I,Z,ue,Se){for(!Z.ending&&!I.destroyed&&Z.length===0&&Z.needDrain&&(Z.needDrain=!1,I.emit("drain"));ue-- >0;)Z.pendingcb--,Se();Z.destroyed&&M(Z),N(I,Z)}function M(I){if(I.writing)return;for(let Ae=I.bufferedIndex;Ae<I.buffered.length;++Ae){var Z;let{chunk:de,callback:be}=I.buffered[Ae],Le=I.objectMode?1:de.length;I.length-=Le,be((Z=I.errored)!==null&&Z!==void 0?Z:new A("write"))}let ue=I[j].splice(0);for(let Ae=0;Ae<ue.length;Ae++){var Se;ue[Ae]((Se=I.errored)!==null&&Se!==void 0?Se:new A("end"))}fe(I)}function G(I,Z){if(Z.corked||Z.bufferProcessing||Z.destroyed||!Z.constructed)return;let{buffered:ue,bufferedIndex:Se,objectMode:Ae}=Z,de=ue.length-Se;if(!de)return;let be=Se;if(Z.bufferProcessing=!0,de>1&&I._writev){Z.pendingcb-=de-1;let Le=Z.allNoop?ie:Te=>{for(let ze=be;ze<ue.length;++ze)ue[ze].callback(Te)},De=Z.allNoop&&be===0?ue:e(ue,be);De.allBuffers=Z.allBuffers,D(I,Z,!0,Z.length,De,"",Le),fe(Z)}else{do{let{chunk:Le,encoding:De,callback:Te}=ue[be];ue[be++]=null;let ze=Ae?1:Le.length;D(I,Z,!1,ze,Le,De,Te)}while(be<ue.length&&!Z.writing);be===ue.length?fe(Z):be>256?(ue.splice(0,be),Z.bufferedIndex=0):Z.bufferedIndex=be}Z.bufferProcessing=!1}Ee.prototype._write=function(I,Z,ue){if((this||Ze)._writev)this._writev([{chunk:I,encoding:Z}],ue);else throw new _("_write()")},Ee.prototype._writev=null,Ee.prototype.end=function(I,Z,ue){let Se=(this||Ze)._writableState;typeof I=="function"?(ue=I,I=null,Z=null):typeof Z=="function"&&(ue=Z,Z=null);let Ae;if(I!=null){let de=ve(this||Ze,I,Z);de instanceof t&&(Ae=de)}return Se.corked&&(Se.corked=1,this.uncork()),Ae||(!Se.errored&&!Se.ending?(Se.ending=!0,N(this||Ze,Se,!0),Se.ended=!0):Se.finished?Ae=new P("end"):Se.destroyed&&(Ae=new A("end"))),typeof ue=="function"&&(Ae||Se.finished?r.nextTick(ue,Ae):Se[j].push(ue)),this||Ze};function ne(I){return I.ending&&!I.destroyed&&I.constructed&&I.length===0&&!I.errored&&I.buffered.length===0&&!I.finished&&!I.writing&&!I.errorEmitted&&!I.closeEmitted}function se(I,Z){let ue=!1;function Se(Ae){if(ue){K(I,Ae??E());return}if(ue=!0,Z.pendingcb--,Ae){let de=Z[j].splice(0);for(let be=0;be<de.length;be++)de[be](Ae);K(I,Ae,Z.sync)}else ne(Z)&&(Z.prefinished=!0,I.emit("prefinish"),Z.pendingcb++,r.nextTick(F,I,Z))}Z.sync=!0,Z.pendingcb++;try{I._final(Se)}catch(Ae){Se(Ae)}Z.sync=!1}function z(I,Z){!Z.prefinished&&!Z.finalCalled&&(typeof I._final=="function"&&!Z.destroyed?(Z.finalCalled=!0,se(I,Z)):(Z.prefinished=!0,I.emit("prefinish")))}function N(I,Z,ue){ne(Z)&&(z(I,Z),Z.pendingcb===0&&(ue?(Z.pendingcb++,r.nextTick((Se,Ae)=>{ne(Ae)?F(Se,Ae):Ae.pendingcb--},I,Z)):ne(Z)&&(Z.pendingcb++,F(I,Z))))}function F(I,Z){Z.pendingcb--,Z.finished=!0;let ue=Z[j].splice(0);for(let Se=0;Se<ue.length;Se++)ue[Se]();if(I.emit("finish"),Z.autoDestroy){let Se=I._readableState;(!Se||Se.autoDestroy&&(Se.endEmitted||Se.readable===!1))&&I.destroy()}}o(Ee.prototype,{closed:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.closed:!1}},destroyed:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.destroyed:!1},set(I){(this||Ze)._writableState&&((this||Ze)._writableState.destroyed=I)}},writable:{__proto__:null,get(){let I=(this||Ze)._writableState;return!!I&&I.writable!==!1&&!I.destroyed&&!I.errored&&!I.ending&&!I.ended},set(I){(this||Ze)._writableState&&((this||Ze)._writableState.writable=!!I)}},writableFinished:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return(this||Ze)._writableState&&(this||Ze)._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let I=(this||Ze)._writableState;return I?!I.destroyed&&!I.ending&&I.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return(this||Ze)._writableState&&(this||Ze)._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return(this||Ze)._writableState?(this||Ze)._writableState.corked:0}},writableLength:{__proto__:null,get(){return(this||Ze)._writableState&&(this||Ze)._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return(this||Ze)._writableState?(this||Ze)._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||Ze)._writableState.writable!==!1&&((this||Ze)._writableState.destroyed||(this||Ze)._writableState.errored)&&!(this||Ze)._writableState.finished)}}});let le=m.destroy;Ee.prototype.destroy=function(I,Z){let ue=(this||Ze)._writableState;return!ue.destroyed&&(ue.bufferedIndex<ue.buffered.length||ue[j].length)&&r.nextTick(M,ue),le.call(this||Ze,I,Z),this||Ze},Ee.prototype._undestroy=m.undestroy,Ee.prototype._destroy=function(I,Z){Z(I)},Ee.prototype[f.captureRejectionSymbol]=function(I){this.destroy(I)};let me;function U(){return me===void 0&&(me={}),me}return Ee.fromWeb=function(I,Z){return U().newStreamWritableFromWritableStream(I,Z)},Ee.toWeb=function(I){return U().newWritableStreamFromStreamWritable(I)},B1}function zW(){if(nP)return F1;nP=!0;let r=zr,e=fn(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=oa(),h=vl(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=fi(),{destroyer:v}=wh(),w=sa(),y=qb(),_=Y1(),{createDeferredPromise:E}=Vn(),S=pP(),A=globalThis.Blob||e.Blob,P=typeof A<"u"?function(q){return q instanceof A}:function(q){return!1},R=globalThis.AbortController||dg().AbortController,{FunctionPrototypeCall:Y}=Nr();class te extends w{constructor(q){super(q),q?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),q?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}F1=function j(q,fe){if(u(q))return q;if(s(q))return ie({readable:q});if(a(q))return ie({writable:q});if(o(q))return ie({writable:!1,readable:!1});if(c(q))return ie({readable:y.fromWeb(q)});if(f(q))return ie({writable:_.fromWeb(q)});if(typeof q=="function"){let{value:ve,write:H,final:D,destroy:ee}=K(q);if(i(ve))return S(te,ve,{objectMode:!0,write:H,final:D,destroy:ee});let B=ve?.then;if(typeof B=="function"){let L,$=Y(B,ve,M=>{if(M!=null)throw new b("nully","body",M)},M=>{v(L,M)});return L=new te({objectMode:!0,readable:!1,write:H,final(M){D(async()=>{try{await $,r.nextTick(M,null)}catch(G){r.nextTick(M,G)}})},destroy:ee})}throw new b("Iterable, AsyncIterable or AsyncFunction",fe,ve)}if(P(q))return j(q.arrayBuffer());if(i(q))return S(te,q,{objectMode:!0,writable:!1});if(c(q?.readable)&&f(q?.writable))return te.fromWeb(q);if(typeof q?.writable=="object"||typeof q?.readable=="object"){let ve=q!=null&&q.readable?s(q?.readable)?q?.readable:j(q.readable):void 0,H=q!=null&&q.writable?a(q?.writable)?q?.writable:j(q.writable):void 0;return ie({readable:ve,writable:H})}let Ee=q?.then;if(typeof Ee=="function"){let ve;return Y(Ee,q,H=>{H!=null&&ve.push(H),ve.push(null)},H=>{v(ve,H)}),ve=new te({objectMode:!0,writable:!1,read(){}})}throw new m(fe,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],q)};function K(j){let{promise:q,resolve:fe}=E(),Ee=new R,ve=Ee.signal;return{value:j((async function*(){for(;;){let D=q;q=null;let{chunk:ee,done:B,cb:L}=await D;if(r.nextTick(L),B)return;if(ve.aborted)throw new d(void 0,{cause:ve.reason});({promise:q,resolve:fe}=E()),yield ee}})(),{signal:ve}),write(D,ee,B){let L=fe;fe=null,L({chunk:D,done:!1,cb:B})},final(D){let ee=fe;fe=null,ee({done:!0,cb:D})},destroy(D,ee){Ee.abort(),ee(D)}}}function ie(j){let q=j.readable&&typeof j.readable.read!="function"?y.wrap(j.readable):j.readable,fe=j.writable,Ee=!!t(q),ve=!!n(fe),H,D,ee,B,L;function $(M){let G=B;B=null,G?G(M):M&&L.destroy(M)}return L=new te({readableObjectMode:!!(q!=null&&q.readableObjectMode),writableObjectMode:!!(fe!=null&&fe.writableObjectMode),readable:Ee,writable:ve}),ve&&(h(fe,M=>{ve=!1,M&&v(q,M),$(M)}),L._write=function(M,G,ne){fe.write(M,G)?ne():H=ne},L._final=function(M){fe.end(),D=M},fe.on("drain",function(){if(H){let M=H;H=null,M()}}),fe.on("finish",function(){if(D){let M=D;D=null,M()}})),Ee&&(h(q,M=>{Ee=!1,M&&v(q,M),$(M)}),q.on("readable",function(){if(ee){let M=ee;ee=null,M()}}),q.on("end",function(){L.push(null)}),L._read=function(){for(;;){let M=q.read();if(M===null){ee=L._read;return}if(!L.push(M))return}}),L._destroy=function(M,G){!M&&B!==null&&(M=new d),ee=null,H=null,D=null,B===null?G(M):(B=G,v(fe,M),v(q,M))},L}return F1}function sa(){if(iP)return U1;iP=!0;let{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Nr();U1=s;let i=qb(),o=Y1();n(s.prototype,i.prototype),n(s,i);{let f=t(o.prototype);for(let h=0;h<f.length;h++){let d=f[h];s.prototype[d]||(s.prototype[d]=o.prototype[d])}}function s(f){if(!(this instanceof s))return new s(f);i.call(this,f),o.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(s.prototype,{writable:{__proto__:null,...e(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(o.prototype,"writableLength")},writableFinished:{__proto__:null,...e(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let a;function u(){return a===void 0&&(a={}),a}s.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},s.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return s.from=function(f){return c||(c=zW()),c(f,"body")},U1}function gP(){if(sP)return j1;sP=!0;let{ObjectSetPrototypeOf:r,Symbol:e}=Nr();j1=s;let{ERR_METHOD_NOT_IMPLEMENTED:t}=fi().codes,n=sa(),{getHighWaterMark:i}=Wb();r(s.prototype,n.prototype),r(s,n);let o=e("kCallback");function s(c){if(!(this instanceof s))return new s(c);let f=c?i(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),n.call(this,c),this._readableState.sync=!1,this[o]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function a(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(c,f,h){throw new t("_transform()")},s.prototype._write=function(c,f,h){let d=this._readableState,m=this._writableState,b=d.length;this._transform(c,f,(v,w)=>{if(v){h(v);return}w!=null&&this.push(w),m.ended||b===d.length||d.length<d.highWaterMark?h():this[o]=h})},s.prototype._read=function(){if(this[o]){let c=this[o];this[o]=null,c()}},j1}function mP(){if(oP)return $1;oP=!0;let{ObjectSetPrototypeOf:r}=Nr();$1=t;let e=gP();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,o){o(null,n)},$1}function X1(){if(aP)return z1;aP=!0;let r=zr,{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=Nr(),o=vl(),{once:s}=Vn(),a=wh(),u=sa(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:v}=fi(),{validateFunction:w,validateAbortSignal:y}=pg(),{isIterable:_,isReadable:E,isReadableNodeStream:S,isNodeStream:A,isTransformStream:P,isWebStream:R,isReadableStream:Y,isReadableFinished:te}=oa(),K=globalThis.AbortController||dg().AbortController,ie,j,q;function fe(M,G,ne){let se=!1;M.on("close",()=>{se=!0});let z=o(M,{readable:G,writable:ne},N=>{se=!N});return{destroy:N=>{se||(se=!0,a.destroyer(M,N||new m("pipe")))},cleanup:z}}function Ee(M){return w(M[M.length-1],"streams[stream.length - 1]"),M.pop()}function ve(M){if(_(M))return M;if(S(M))return H(M);throw new f("val",["Readable","Iterable","AsyncIterable"],M)}async function*H(M){j||(j=qb()),yield*j.prototype[n].call(M)}async function D(M,G,ne,{end:se}){let z,N=null,F=U=>{if(U&&(z=U),N){let I=N;N=null,I()}},le=()=>new t((U,I)=>{z?I(z):N=()=>{z?I(z):U()}});G.on("drain",F);let me=o(G,{readable:!1},F);try{G.writableNeedDrain&&await le();for await(let U of M)G.write(U)||await le();se&&(G.end(),await le()),ne()}catch(U){ne(z!==U?c(z,U):U)}finally{me(),G.off("drain",F)}}async function ee(M,G,ne,{end:se}){P(G)&&(G=G.writable);let z=G.getWriter();try{for await(let N of M)await z.ready,z.write(N).catch(()=>{});await z.ready,se&&await z.close(),ne()}catch(N){try{await z.abort(N),ne(N)}catch(F){ne(F)}}}function B(...M){return L(M,s(Ee(M)))}function L(M,G,ne){if(M.length===1&&e(M[0])&&(M=M[0]),M.length<2)throw new d("streams");let se=new K,z=se.signal,N=ne?.signal,F=[];y(N,"options.signal");function le(){Ae(new v)}q=q||Vn().addAbortListener;let me;N&&(me=q(N,le));let U,I,Z=[],ue=0;function Se(De){Ae(De,--ue===0)}function Ae(De,Te){var ze;if(De&&(!U||U.code==="ERR_STREAM_PREMATURE_CLOSE")&&(U=De),!(!U&&!Te)){for(;Z.length;)Z.shift()(U);(ze=me)===null||ze===void 0||ze[i](),se.abort(),Te&&(U||F.forEach(He=>He()),r.nextTick(G,U,I))}}let de;for(let De=0;De<M.length;De++){let Te=M[De],ze=De<M.length-1,He=De>0,We=ze||ne?.end!==!1,x=De===M.length-1;if(A(Te)){let g=function(p){p&&p.name!=="AbortError"&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Se(p)};if(We){let{destroy:p,cleanup:T}=fe(Te,ze,He);Z.push(p),E(Te)&&x&&F.push(T)}Te.on("error",g),E(Te)&&x&&F.push(()=>{Te.removeListener("error",g)})}if(De===0)if(typeof Te=="function"){if(de=Te({signal:z}),!_(de))throw new h("Iterable, AsyncIterable or Stream","source",de)}else _(Te)||S(Te)||P(Te)?de=Te:de=u.from(Te);else if(typeof Te=="function"){if(P(de)){var be;de=ve((be=de)===null||be===void 0?void 0:be.readable)}else de=ve(de);if(de=Te(de,{signal:z}),ze){if(!_(de,!0))throw new h("AsyncIterable",`transform[${De-1}]`,de)}else{var Le;ie||(ie=mP());let g=new ie({objectMode:!0}),p=(Le=de)===null||Le===void 0?void 0:Le.then;if(typeof p=="function")ue++,p.call(de,C=>{I=C,C!=null&&g.write(C),We&&g.end(),r.nextTick(Se)},C=>{g.destroy(C),r.nextTick(Se,C)});else if(_(de,!0))ue++,D(de,g,Se,{end:We});else if(Y(de)||P(de)){let C=de.readable||de;ue++,D(C,g,Se,{end:We})}else throw new h("AsyncIterable or Promise","destination",de);de=g;let{destroy:T,cleanup:J}=fe(de,!1,!0);Z.push(T),x&&F.push(J)}}else if(A(Te)){if(S(de)){ue+=2;let g=$(de,Te,Se,{end:We});E(Te)&&x&&F.push(g)}else if(P(de)||Y(de)){let g=de.readable||de;ue++,D(g,Te,Se,{end:We})}else if(_(de))ue++,D(de,Te,Se,{end:We});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],de);de=Te}else if(R(Te)){if(S(de))ue++,ee(ve(de),Te,Se,{end:We});else if(Y(de)||_(de))ue++,ee(de,Te,Se,{end:We});else if(P(de))ue++,ee(de.readable,Te,Se,{end:We});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],de);de=Te}else de=u.from(Te)}return(z!=null&&z.aborted||N!=null&&N.aborted)&&r.nextTick(le),de}function $(M,G,ne,{end:se}){let z=!1;if(G.on("close",()=>{z||ne(new b)}),M.pipe(G,{end:!1}),se){let N=function(){z=!0,G.end()};te(M)?r.nextTick(N):M.once("end",N)}else ne();return o(M,{readable:!0,writable:!1},N=>{let F=M._readableState;N&&N.code==="ERR_STREAM_PREMATURE_CLOSE"&&F&&F.ended&&!F.errored&&!F.errorEmitted?M.once("end",ne).once("error",ne):ne(N)}),o(G,{readable:!1,writable:!0},ne)}return z1={pipelineImpl:L,pipeline:B},z1}function yP(){if(lP)return W1;lP=!0;let{pipeline:r}=X1(),e=sa(),{destroyer:t}=wh(),{isNodeStream:n,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:u,isReadableStream:c}=oa(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:d}}=fi(),m=vl();return W1=function(...v){if(v.length===0)throw new d("streams");if(v.length===1)return e.from(v[0]);let w=[...v];if(typeof v[0]=="function"&&(v[0]=e.from(v[0])),typeof v[v.length-1]=="function"){let ie=v.length-1;v[ie]=e.from(v[ie])}for(let ie=0;ie<v.length;++ie)if(!(!n(v[ie])&&!s(v[ie]))){if(ie<v.length-1&&!(i(v[ie])||c(v[ie])||a(v[ie])))throw new h(`streams[${ie}]`,w[ie],"must be readable");if(ie>0&&!(o(v[ie])||u(v[ie])||a(v[ie])))throw new h(`streams[${ie}]`,w[ie],"must be writable")}let y,_,E,S,A;function P(ie){let j=S;S=null,j?j(ie):ie?A.destroy(ie):!K&&!te&&A.destroy()}let R=v[0],Y=r(v,P),te=!!(o(R)||u(R)||a(R)),K=!!(i(Y)||c(Y)||a(Y));if(A=new e({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(Y!=null&&Y.readableObjectMode),writable:te,readable:K}),te){if(n(R))A._write=function(j,q,fe){R.write(j,q)?fe():y=fe},A._final=function(j){R.end(),_=j},R.on("drain",function(){if(y){let j=y;y=null,j()}});else if(s(R)){let q=(a(R)?R.writable:R).getWriter();A._write=async function(fe,Ee,ve){try{await q.ready,q.write(fe).catch(()=>{}),ve()}catch(H){ve(H)}},A._final=async function(fe){try{await q.ready,q.close().catch(()=>{}),_=fe}catch(Ee){fe(Ee)}}}let ie=a(Y)?Y.readable:Y;m(ie,()=>{if(_){let j=_;_=null,j()}})}if(K){if(n(Y))Y.on("readable",function(){if(E){let ie=E;E=null,ie()}}),Y.on("end",function(){A.push(null)}),A._read=function(){for(;;){let ie=Y.read();if(ie===null){E=A._read;return}if(!A.push(ie))return}};else if(s(Y)){let j=(a(Y)?Y.readable:Y).getReader();A._read=async function(){for(;;)try{let{value:q,done:fe}=await j.read();if(!A.push(q))return;if(fe){A.push(null);return}}catch{return}}}}return A._destroy=function(ie,j){!ie&&S!==null&&(ie=new f),E=null,y=null,_=null,S===null?j(ie):(S=j,n(Y)&&t(Y,ie))},A},W1}function WW(){if(uP)return $b;uP=!0;let r=globalThis.AbortController||dg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:o}=fi(),{validateAbortSignal:s,validateInteger:a,validateObject:u}=pg(),c=Nr().Symbol("kWeak"),f=Nr().Symbol("kResistStopPropagation"),{finished:h}=vl(),d=yP(),{addAbortSignalNoValidate:m}=zb(),{isWritable:b,isNodeStream:v}=oa(),{deprecate:w}=Vn(),{ArrayPrototypePush:y,Boolean:_,MathFloor:E,Number:S,NumberIsNaN:A,Promise:P,PromiseReject:R,PromiseResolve:Y,PromisePrototypeThen:te,Symbol:K}=Nr(),ie=K("kEmpty"),j=K("kEof");function q(N,F){if(F!=null&&u(F,"options"),F?.signal!=null&&s(F.signal,"options.signal"),v(N)&&!b(N))throw new e("stream",N,"must be writable");let le=d(this,N);return F!=null&&F.signal&&m(F.signal,le),le}function fe(N,F){if(typeof N!="function")throw new t("fn",["Function","AsyncFunction"],N);F!=null&&u(F,"options"),F?.signal!=null&&s(F.signal,"options.signal");let le=1;F?.concurrency!=null&&(le=E(F.concurrency));let me=le-1;return F?.highWaterMark!=null&&(me=E(F.highWaterMark)),a(le,"options.concurrency",1),a(me,"options.highWaterMark",0),me+=le,async function*(){let I=Vn().AbortSignalAny([F?.signal].filter(_)),Z=this,ue=[],Se={signal:I},Ae,de,be=!1,Le=0;function De(){be=!0,Te()}function Te(){Le-=1,ze()}function ze(){de&&!be&&Le<le&&ue.length<me&&(de(),de=null)}async function He(){try{for await(let We of Z){if(be)return;if(I.aborted)throw new o;try{if(We=N(We,Se),We===ie)continue;We=Y(We)}catch(x){We=R(x)}Le+=1,te(We,Te,De),ue.push(We),Ae&&(Ae(),Ae=null),!be&&(ue.length>=me||Le>=le)&&await new P(x=>{de=x})}ue.push(j)}catch(We){let x=R(We);te(x,Te,De),ue.push(x)}finally{be=!0,Ae&&(Ae(),Ae=null)}}He();try{for(;;){for(;ue.length>0;){let We=await ue[0];if(We===j)return;if(I.aborted)throw new o;We!==ie&&(yield We),ue.shift(),ze()}await new P(We=>{Ae=We})}}finally{be=!0,de&&(de(),de=null)}}.call(this)}function Ee(N=void 0){return N!=null&&u(N,"options"),N?.signal!=null&&s(N.signal,"options.signal"),async function*(){let le=0;for await(let U of this){var me;if(N!=null&&(me=N.signal)!==null&&me!==void 0&&me.aborted)throw new o({cause:N.signal.reason});yield[le++,U]}}.call(this)}async function ve(N,F=void 0){for await(let le of B.call(this,N,F))return!0;return!1}async function H(N,F=void 0){if(typeof N!="function")throw new t("fn",["Function","AsyncFunction"],N);return!await ve.call(this,async(...le)=>!await N(...le),F)}async function D(N,F){for await(let le of B.call(this,N,F))return le}async function ee(N,F){if(typeof N!="function")throw new t("fn",["Function","AsyncFunction"],N);async function le(me,U){return await N(me,U),ie}for await(let me of fe.call(this,le,F));}function B(N,F){if(typeof N!="function")throw new t("fn",["Function","AsyncFunction"],N);async function le(me,U){return await N(me,U)?me:ie}return fe.call(this,le,F)}class L extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function $(N,F,le){var me;if(typeof N!="function")throw new t("reducer",["Function","AsyncFunction"],N);le!=null&&u(le,"options"),le?.signal!=null&&s(le.signal,"options.signal");let U=arguments.length>1;if(le!=null&&(me=le.signal)!==null&&me!==void 0&&me.aborted){let Ae=new o(void 0,{cause:le.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(Ae)),Ae}let I=new r,Z=I.signal;if(le!=null&&le.signal){let Ae={once:!0,[c]:this,[f]:!0};le.signal.addEventListener("abort",()=>I.abort(),Ae)}let ue=!1;try{for await(let Ae of this){var Se;if(ue=!0,le!=null&&(Se=le.signal)!==null&&Se!==void 0&&Se.aborted)throw new o;U?F=await N(F,Ae,{signal:Z}):(F=Ae,U=!0)}if(!ue&&!U)throw new L}finally{I.abort()}return F}async function M(N){N!=null&&u(N,"options"),N?.signal!=null&&s(N.signal,"options.signal");let F=[];for await(let me of this){var le;if(N!=null&&(le=N.signal)!==null&&le!==void 0&&le.aborted)throw new o(void 0,{cause:N.signal.reason});y(F,me)}return F}function G(N,F){let le=fe.call(this,N,F);return async function*(){for await(let U of le)yield*U}.call(this)}function ne(N){if(N=S(N),A(N))return 0;if(N<0)throw new i("number",">= 0",N);return N}function se(N,F=void 0){return F!=null&&u(F,"options"),F?.signal!=null&&s(F.signal,"options.signal"),N=ne(N),async function*(){var me;if(F!=null&&(me=F.signal)!==null&&me!==void 0&&me.aborted)throw new o;for await(let I of this){var U;if(F!=null&&(U=F.signal)!==null&&U!==void 0&&U.aborted)throw new o;N--<=0&&(yield I)}}.call(this)}function z(N,F=void 0){return F!=null&&u(F,"options"),F?.signal!=null&&s(F.signal,"options.signal"),N=ne(N),async function*(){var me;if(F!=null&&(me=F.signal)!==null&&me!==void 0&&me.aborted)throw new o;for await(let I of this){var U;if(F!=null&&(U=F.signal)!==null&&U!==void 0&&U.aborted)throw new o;if(N-- >0&&(yield I),N<=0)return}}.call(this)}return $b.streamReturningOperators={asIndexedPairs:w(Ee,"readable.asIndexedPairs will be removed in a future version."),drop:se,filter:B,flatMap:G,map:fe,take:z,compose:q},$b.promiseReturningOperators={every:H,forEach:ee,reduce:$,toArray:M,some:ve,find:D},$b}function bP(){if(cP)return q1;cP=!0;let{ArrayPrototypePop:r,Promise:e}=Nr(),{isIterable:t,isNodeStream:n,isWebStream:i}=oa(),{pipelineImpl:o}=X1(),{finished:s}=vl();wP();function a(...u){return new e((c,f)=>{let h,d,m=u[u.length-1];if(m&&typeof m=="object"&&!n(m)&&!t(m)&&!i(m)){let b=r(u);h=b.signal,d=b.end}o(u,(b,v)=>{b?f(b):c(v)},{signal:h,end:d})})}return q1={finished:s,pipeline:a},q1}function wP(){if(fP)return H1;fP=!0;let{Buffer:r}=fn(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Nr(),{promisify:{custom:i}}=Vn(),{streamReturningOperators:o,promiseReturningOperators:s}=WW(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=fi(),u=yP(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Wb(),{pipeline:h}=X1(),{destroyer:d}=wh(),m=vl(),b=bP(),v=oa(),w=H1=V1().Stream;w.isDestroyed=v.isDestroyed,w.isDisturbed=v.isDisturbed,w.isErrored=v.isErrored,w.isReadable=v.isReadable,w.isWritable=v.isWritable,w.Readable=qb();for(let _ of t(o)){let S=function(...A){if(new.target)throw a();return w.Readable.from(n(E,this||hP,A))},E=o[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let _ of t(s)){let S=function(...A){if(new.target)throw a();return n(E,this||hP,A)},E=s[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}w.Writable=Y1(),w.Duplex=sa(),w.Transform=gP(),w.PassThrough=mP(),w.pipeline=h;let{addAbortSignal:y}=zb();return w.addAbortSignal=y,w.finished=m,w.destroy=d,w.compose=u,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=f,e(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),e(h,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),e(m,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),w.Stream=w,w._isUint8Array=function(E){return E instanceof Uint8Array},w._uint8ArrayToBuffer=function(E){return r.from(E.buffer,E.byteOffset,E.byteLength)},H1}function qW(){if(dP)return Or;dP=!0;let r=wP(),e=bP(),t=r.Readable.destroy;return Or=r.Readable,Or._uint8ArrayToBuffer=r._uint8ArrayToBuffer,Or._isUint8Array=r._isUint8Array,Or.isDisturbed=r.isDisturbed,Or.isErrored=r.isErrored,Or.isReadable=r.isReadable,Or.Readable=r.Readable,Or.Writable=r.Writable,Or.Duplex=r.Duplex,Or.Transform=r.Transform,Or.PassThrough=r.PassThrough,Or.addAbortSignal=r.addAbortSignal,Or.finished=r.finished,Or.destroy=r.destroy,Or.destroy=t,Or.pipeline=r.pipeline,Or.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Or.Stream=r.Stream,Or.default=Or,Or}var C1,zL,fg,WL,Ub,qL,R1,HL,D1,GL,I1,VL,jb,YL,O1,XL,N1,KL,hg,ZL,k1,JL,L1,QL,P1,eP,M1,tP,Ve,B1,rP,Ze,F1,nP,U1,iP,j1,sP,$1,oP,z1,aP,W1,lP,$b,uP,q1,cP,H1,fP,hP,Or,dP,ur,G1,HW,GW,VW,YW,XW,KW,ZW,JW,mg=Jt(()=>{Oe();ke();Ne();Ff();bh();Bu();$L();yh();$p();p1();C1={},zL=!1;fg={},WL=!1;Ub={},qL=!1;R1={},HL=!1;D1={},GL=!1;I1={},VL=!1;jb={},YL=!1;O1={},XL=!1;N1={},KL=!1;hg={},ZL=!1;k1={},JL=!1;L1={},QL=!1;P1={},eP=!1;M1={},tP=!1,Ve=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;B1={},rP=!1,Ze=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;F1={},nP=!1;U1={},iP=!1;j1={},sP=!1;$1={},oP=!1;z1={},aP=!1;W1={},lP=!1;$b={},uP=!1;q1={},cP=!1;H1={},fP=!1,hP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Or={},dP=!1;ur=qW();ur._uint8ArrayToBuffer;ur._isUint8Array;ur.isDisturbed;ur.isErrored;ur.isReadable;ur.Readable;ur.Writable;ur.Duplex;ur.Transform;ur.PassThrough;ur.addAbortSignal;ur.finished;ur.destroy;ur.pipeline;ur.compose;ur.Stream;G1=ur.Readable;G1.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new G1(e).wrap(r)};HW=ur.Writable,GW=ur.Duplex,VW=ur.Transform,YW=ur.PassThrough,XW=ur.finished,KW=ur.pipeline,ZW=ur.Stream,JW={finished:Mb(ur.finished),pipeline:Mb(ur.pipeline)}});var AP=st((Lee,EP)=>{Oe();ke();Ne();EP.exports=Hb;function Hb(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Hb.prototype.go=function(r){this.pending<this.max?_P(this,r):this.waiting.push(r)};Hb.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};Hb.prototype.hold=function(){return vP(this)};function vP(r){r.pending+=1;var e=!1;return t;function t(i){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||i,r.pending-=1,r.waiting.length>0&&r.pending<r.max)_P(r,r.waiting.shift());else if(r.pending===0){var o=r.listeners;r.listeners=[],o.forEach(n)}}function n(i){i(r.error)}}function _P(r,e){e(vP(r))}});var SP=st(bg=>{Oe();ke();Ne();var yg=(Gp(),Ir(Hp)),Gb=(yh(),Ir(lg)),K1=(mg(),Ir(gg)),xP=K1.Readable,Z1=K1.Writable,QW=K1.PassThrough,eq=AP(),Vb=(bh(),Ir(ug)).EventEmitter;bg.createFromBuffer=tq;bg.createFromFd=rq;bg.BufferSlicer=la;bg.FdSlicer=aa;Gb.inherits(aa,Vb);function aa(r,e){e=e||{},Vb.call(this),this.fd=r,this.pend=new eq,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}aa.prototype.read=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.read(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.write=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.write(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.createReadStream=function(r){return new Yb(this,r)};aa.prototype.createWriteStream=function(r){return new Xb(this,r)};aa.prototype.ref=function(){this.refCount+=1};aa.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&yg.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};Gb.inherits(Yb,xP);function Yb(r,e){e=e||{},xP.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Yb.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(t);yg.read(e.context.fd,i,0,t,e.pos,function(o,s){o?e.destroy(o):s===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=s,e.push(i.slice(0,s))),n()})})}};Yb.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};Gb.inherits(Xb,Z1);function Xb(r,e){e=e||{},Z1.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Xb.prototype._write=function(r,e,t){var n=this;if(!n.destroyed){if(n.pos+r.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),t(i);return}n.context.pend.go(function(o){if(n.destroyed)return o();yg.write(n.context.fd,r,0,r.length,n.pos,function(s,a){s?(n.destroy(),o(),t(s)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),o(),t())})})}};Xb.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};Gb.inherits(la,Vb);function la(r,e){Vb.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}la.prototype.read=function(r,e,t,n,i){if(!(0<=e&&e<=r.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+r.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+t>r.length&&(t=r.length-e),n+t>this.buffer.length&&(t=this.buffer.length-n),t<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(r,e,n,n+t),setImmediate(function(){i(null,t)})};la.prototype.write=function(r,e,t,n,i){r.copy(this.buffer,n,e,e+t),setImmediate(function(){i(null,t,r)})};la.prototype.createReadStream=function(r){r=r||{};var e=new QW(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=t.length){n<t.length&&e.write(t.slice(n,t.length));break}e.write(t.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};la.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new Z1(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(n,i,o){if(!t.destroyed){var s=t.pos+n.length;if(s>t.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",t.destroyed=!0,o(a);return}n.copy(e.buffer,t.pos,0,n.length),t.bytesWritten+=n.length,t.pos=s,t.emit("progress"),o()}},t.destroy=function(){t.destroyed=!0},t};la.prototype.ref=function(){this.refCount+=1};la.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function tq(r,e){return new la(r,e)}function rq(r,e){return new aa(r,e)}});var RP=st((zee,CP)=>{Oe();ke();Ne();var _l=(ll(),Ir(Uf)).Buffer,J1=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(J1=new Int32Array(J1));function TP(r){if(_l.isBuffer(r))return r;var e=typeof _l.alloc=="function"&&typeof _l.from=="function";if(typeof r=="number")return e?_l.alloc(r):new _l(r);if(typeof r=="string")return e?_l.from(r):new _l(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function nq(r){var e=TP(4);return e.writeInt32BE(r,0),e}function Q1(r,e){r=TP(r),_l.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<r.length;n++)t=J1[(t^r[n])&255]^t>>>8;return t^-1}function eA(){return nq(Q1.apply(null,arguments))}eA.signed=function(){return Q1.apply(null,arguments)};eA.unsigned=function(){return Q1.apply(null,arguments)>>>0};CP.exports=eA});var FP=st(Ti=>{Oe();ke();Ne();var tA=(Gp(),Ir(Hp)),iq=(EL(),Ir(_L)),DP=SP(),sq=RP(),Jb=(yh(),Ir(lg)),Qb=(bh(),Ir(ug)).EventEmitter,IP=(mg(),Ir(gg)).Transform,nA=(mg(),Ir(gg)).PassThrough,oq=(mg(),Ir(gg)).Writable;Ti.open=aq;Ti.fromFd=OP;Ti.fromBuffer=lq;Ti.fromRandomAccessReader=iA;Ti.dosDateTimeToDate=LP;Ti.getFileNameLowLevel=PP;Ti.validateFileName=MP;Ti.parseExtraFields=BP;Ti.ZipFile=uo;Ti.Entry=wg;Ti.LocalFileHeader=kP;Ti.RandomAccessReader=El;function aq(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Zb),tA.open(r,"r",function(n,i){if(n)return t(n);OP(i,e,function(o,s){o&&tA.close(i,Zb),t(o,s)})})}function OP(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Zb),tA.fstat(r,function(n,i){if(n)return t(n);var o=DP.createFromFd(r,{autoClose:!0});iA(o,i.size,e,t)})}function lq(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=DP.createFromBuffer(r,{maxChunkSize:65536});iA(n,r.length,e,t)}function iA(r,e,t,n){typeof t=="function"&&(n=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var i=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),n==null&&(n=Zb),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var o=22,s=20,a=65535,u=Math.min(s+o+a,e),c=ua(u),f=e-c.length;_h(r,c,0,u,f,function(h){if(h)return n(h);for(var d=u-o;d>=0;d-=1)if(c.readUInt32LE(d)===101010256){var m=c.subarray(d),b=m.readUInt16LE(4),v=m.readUInt16LE(10),w=m.readUInt32LE(16),y=m.readUInt16LE(20),_=m.length-o;if(y!==_)return n(new Error("Invalid comment length. Expected: "+_+". Found: "+y+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var E=i?Kb(m.subarray(22),!1):m.subarray(22);if(d-s>=0&&c.readUInt32LE(d-s)===117853008){var S=c.subarray(d-s,d-s+s),A=vh(S,8),P=ua(56);return _h(r,P,0,P.length,A,function(R){return R?n(R):P.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(b=P.readUInt32LE(16),b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):(v=vh(P,32),w=vh(P,48),n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))))})}return b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}Jb.inherits(uo,Qb);function uo(r,e,t,n,i,o,s,a,u,c){var f=this;Qb.call(f),f.reader=r,f.reader.on("error",function(h){NP(f,h)}),f.reader.once("close",function(){f.emit("close")}),f.readEntryCursor=e,f.fileSize=t,f.entryCount=n,f.comment=i,f.entriesRead=0,f.autoClose=!!o,f.lazyEntries=!!s,f.decodeStrings=!!a,f.validateEntrySizes=!!u,f.strictFileNames=!!c,f.isOpen=!0,f.emittedError=!1,f.lazyEntries||f._readEntry()}uo.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function lo(r,e){r.autoClose&&r.close(),NP(r,e)}function NP(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}uo.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};uo.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=ua(46);_h(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return lo(r,t);if(!r.emittedError){var n=new wg,i=e.readUInt32LE(0);if(i!==33639248)return lo(r,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return lo(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=ua(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),_h(r.reader,e,0,e.length,r.readEntryCursor,function(o){if(o)return lo(r,o);if(!r.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var s=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,s),n.fileCommentRaw=e.subarray(s,s+n.fileCommentLength);try{n.extraFields=BP(n.extraFieldRaw)}catch(v){return lo(r,v)}if(r.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=Kb(n.fileCommentRaw,a),n.fileName=PP(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,r.strictFileNames);var u=MP(n.fileName);if(u!=null)return lo(r,new Error(u))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1;for(var c=0;c<n.extraFields.length;c++){var f=n.extraFields[c];if(f.id===1){var h=f.data,d=0;if(n.uncompressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=vh(h,d),d+=8}if(n.compressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=vh(h,d),d+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=vh(h,d),d+=8}break}}if(r.validateEntrySizes&&n.compressionMethod===0){var m=n.uncompressedSize;if(n.isEncrypted()&&(m+=12),n.compressedSize!==m){var b="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return lo(r,new Error(b))}}r.emit("entry",n),r.lazyEntries||r._readEntry()}})}})}};uo.prototype.openReadStream=function(r,e,t){var n=this,i=0,o=r.compressedSize;if(t==null&&(t=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(o=e.end,o<0)throw new Error("options.end < 0");if(o>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));var s;if(r.compressionMethod===0)s=!1;else if(r.compressionMethod===8)s=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));n.readLocalFileHeader(r,{minimal:!0},function(a,u){if(a)return t(a);n.openReadStreamLowLevel(u.fileDataStart,r.compressedSize,i,o,s,r.uncompressedSize,t)})};uo.prototype.openReadStreamLowLevel=function(r,e,t,n,i,o,s){var a=this,u=r+e,c=a.reader.createReadStream({start:r+t,end:r+n}),f=c;if(i){var h=!1,d=iq.createInflateRaw();c.on("error",function(m){setImmediate(function(){h||d.emit("error",m)})}),c.pipe(d),a.validateEntrySizes?(f=new vg(o),d.on("error",function(m){setImmediate(function(){h||f.emit("error",m)})}),d.pipe(f)):f=d,rA(f,function(){h=!0,d!==f&&d.unpipe(f),c.unpipe(d),c.destroy()})}s(null,f)};uo.prototype.readLocalFileHeader=function(r,e,t){var n=this;t==null&&(t=e,e=null),e==null&&(e={}),n.reader.ref();var i=ua(30);_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader,function(o){try{if(o)return t(o);var s=i.readUInt32LE(0);if(s!==67324752)return t(new Error("invalid local file header signature: 0x"+s.toString(16)));var a=i.readUInt16LE(26),u=i.readUInt16LE(28),c=r.relativeOffsetOfLocalHeader+30+a+u;if(c+r.compressedSize>n.fileSize)return t(new Error("file data overflows file bounds: "+c+" + "+r.compressedSize+" > "+n.fileSize));if(e.minimal)return t(null,{fileDataStart:c});var f=new kP;f.fileDataStart=c,f.versionNeededToExtract=i.readUInt16LE(4),f.generalPurposeBitFlag=i.readUInt16LE(6),f.compressionMethod=i.readUInt16LE(8),f.lastModFileTime=i.readUInt16LE(10),f.lastModFileDate=i.readUInt16LE(12),f.crc32=i.readUInt32LE(14),f.compressedSize=i.readUInt32LE(18),f.uncompressedSize=i.readUInt32LE(22),f.fileNameLength=a,f.extraFieldLength=u,i=ua(a+u),n.reader.ref(),_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader+30,function(h){try{return h?t(h):(f.fileName=i.subarray(0,a),f.extraField=i.subarray(a),t(null,f))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function wg(){}wg.prototype.getLastModDate=function(){return LP(this.lastModFileDate,this.lastModFileTime)};wg.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};wg.prototype.isCompressed=function(){return this.compressionMethod===8};function kP(){}function LP(r,e){var t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,s=(e&31)*2,a=e>>5&63,u=e>>11&31;return new Date(i,n,t,u,a,s,o)}function PP(r,e,t,n){for(var i=null,o=0;o<t.length;o++){var s=t[o];if(s.id===28789){if(s.data.length<6||s.data.readUInt8(0)!==1)continue;var a=s.data.readUInt32LE(1);if(sq.unsigned(e)!==a)continue;i=Kb(s.data.subarray(5),!0);break}}if(i==null){var u=(r&2048)!==0;i=Kb(e,u)}return n||(i=i.replace(/\\/g,"/")),i}function MP(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function BP(r){for(var e=[],t=0;t<r.length-3;){var n=r.readUInt16LE(t+0),i=r.readUInt16LE(t+2),o=t+4,s=o+i;if(s>r.length)throw new Error("extra field length exceeds extra field buffer size");var a=r.subarray(o,s);e.push({id:n,data:a}),t=s}return e}function _h(r,e,t,n,i,o){if(n===0)return setImmediate(function(){o(null,ua(0))});r.read(e,t,n,i,function(s,a){if(s)return o(s);if(a<n)return o(new Error("unexpected EOF"));o()})}Jb.inherits(vg,IP);function vg(r){IP.call(this),this.actualByteCount=0,this.expectedByteCount=r}vg.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(n))}t(null,r)};vg.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};Jb.inherits(El,Qb);function El(){Qb.call(this),this.refCount=0}El.prototype.ref=function(){this.refCount+=1};El.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};El.prototype.createReadStream=function(r){r==null&&(r={});var e=r.start,t=r.end;if(e===t){var n=new nA;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,t),o=!1,s=new ew(this);i.on("error",function(u){setImmediate(function(){o||s.emit("error",u)})}),rA(s,function(){i.unpipe(s),s.unref(),i.destroy()});var a=new vg(t-e);return s.on("error",function(u){setImmediate(function(){o||a.emit("error",u)})}),rA(a,function(){o=!0,s.unpipe(a),s.destroy()}),i.pipe(s).pipe(a)};El.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};El.prototype.read=function(r,e,t,n,i){var o=this.createReadStream({start:n,end:n+t}),s=new oq,a=0;s._write=function(u,c,f){u.copy(r,e+a,0,u.length),a+=u.length,f()},s.on("finish",i),o.on("error",function(u){i(u)}),o.pipe(s)};El.prototype.close=function(r){setImmediate(r)};Jb.inherits(ew,nA);function ew(r){nA.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}ew.prototype._flush=function(r){this.unref(),r()};ew.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var uq="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Kb(r,e){if(e)return r.toString("utf8");for(var t="",n=0;n<r.length;n++)t+=uq[r[n]];return t}function vh(r,e){var t=r.readUInt32LE(e),n=r.readUInt32LE(e+4);return n*4294967296+t}var ua;typeof Buffer.allocUnsafe=="function"?ua=function(r){return Buffer.allocUnsafe(r)}:ua=function(r){return new Buffer(r)};function rA(r,e){typeof r.destroy=="function"?r._destroy=function(t,n){e(),n?.(t)}:r.destroy=e}function Zb(r){if(r)throw r}});var sA=st((Kee,UP)=>{Oe();ke();Ne();UP.exports=(bh(),Ir(ug)).EventEmitter});var HP=st((ete,qP)=>{"use strict";Oe();ke();Ne();function jP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function $P(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(t),!0).forEach(function(n){cq(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cq(r,e,t){return e=WP(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fq(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function zP(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,WP(n.key),n)}}function hq(r,e,t){return e&&zP(r.prototype,e),t&&zP(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function WP(r){var e=dq(r,"string");return typeof e=="symbol"?e:String(e)}function dq(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var pq=(ll(),Ir(Uf)),tw=pq.Buffer,gq=(yh(),Ir(lg)),oA=gq.inspect,mq=oA&&oA.custom||"inspect";function yq(r,e,t){tw.prototype.copy.call(r,e,t)}qP.exports=(function(){function r(){fq(this,r),this.head=null,this.tail=null,this.length=0}return hq(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return tw.alloc(0);for(var n=tw.allocUnsafe(t>>>0),i=this.head,o=0;i;)yq(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?o+=s:o+=s.slice(0,t),t-=a,t===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=tw.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),t-=a,t===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:mq,value:function(t,n){return oA(this,$P($P({},n),{},{depth:0,customInspect:!1}))}}]),r})()});var lA=st((ite,VP)=>{"use strict";Oe();ke();Ne();function bq(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(aA,this,r)):process.nextTick(aA,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?process.nextTick(rw,t):(t._writableState.errorEmitted=!0,process.nextTick(GP,t,o)):process.nextTick(GP,t,o):e?(process.nextTick(rw,t),e(o)):process.nextTick(rw,t)}),this)}function GP(r,e){aA(r,e),rw(r)}function rw(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function wq(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function aA(r,e){r.emit("error",e)}function vq(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}VP.exports={destroy:bq,undestroy:wq,errorOrDestroy:vq}});var Ju=st((lte,KP)=>{"use strict";Oe();ke();Ne();function _q(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var XP={};function ss(r,e,t){t||(t=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=(function(o){_q(s,o);function s(a,u,c){return o.call(this,n(a,u,c))||this}return s})(t);i.prototype.name=t.name,i.prototype.code=r,XP[r]=i}function YP(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function Eq(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function Aq(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function xq(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}ss("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);ss("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&Eq(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Aq(r," argument"))i="The ".concat(r," ").concat(n," ").concat(YP(e,"type"));else{var o=xq(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(YP(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);ss("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ss("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});ss("ERR_STREAM_PREMATURE_CLOSE","Premature close");ss("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});ss("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ss("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ss("ERR_STREAM_WRITE_AFTER_END","write after end");ss("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ss("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);ss("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");KP.exports.codes=XP});var uA=st((hte,ZP)=>{"use strict";Oe();ke();Ne();var Sq=Ju().codes.ERR_INVALID_OPT_VALUE;function Tq(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function Cq(r,e,t,n){var i=Tq(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new Sq(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}ZP.exports={getHighWaterMark:Cq}});var Qu=st((mte,cA)=>{Oe();ke();Ne();typeof Object.create=="function"?cA.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:cA.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var QP=st((vte,JP)=>{Oe();ke();Ne();JP.exports=Rq;function Rq(r,e){if(fA("noDeprecation"))return r;var t=!1;function n(){if(!t){if(fA("throwDeprecation"))throw new Error(e);fA("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function fA(r){try{if(!window.localStorage)return!1}catch{return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var pA=st((xte,sM)=>{"use strict";Oe();ke();Ne();sM.exports=kr;function tM(r){var e=this;this.next=null,this.entry=null,this.finish=function(){tH(e,r)}}var Eh;kr.WritableState=Eg;var Dq={deprecate:QP()},rM=sA(),iw=(ll(),Ir(Uf)).Buffer,Iq=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Oq(r){return iw.from(r)}function Nq(r){return iw.isBuffer(r)||r instanceof Iq}var dA=lA(),kq=uA(),Lq=kq.getHighWaterMark,Al=Ju().codes,Pq=Al.ERR_INVALID_ARG_TYPE,Mq=Al.ERR_METHOD_NOT_IMPLEMENTED,Bq=Al.ERR_MULTIPLE_CALLBACK,Fq=Al.ERR_STREAM_CANNOT_PIPE,Uq=Al.ERR_STREAM_DESTROYED,jq=Al.ERR_STREAM_NULL_VALUES,$q=Al.ERR_STREAM_WRITE_AFTER_END,zq=Al.ERR_UNKNOWN_ENCODING,Ah=dA.errorOrDestroy;Qu()(kr,rM);function Wq(){}function Eg(r,e,t){Eh=Eh||ec(),r=r||{},typeof t!="boolean"&&(t=e instanceof Eh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=Lq(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Kq(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new tM(this)}Eg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Eg.prototype,"buffer",{get:Dq.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var nw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(nw=Function.prototype[Symbol.hasInstance],Object.defineProperty(kr,Symbol.hasInstance,{value:function(e){return nw.call(this,e)?!0:this!==kr?!1:e&&e._writableState instanceof Eg}})):nw=function(e){return e instanceof this};function kr(r){Eh=Eh||ec();var e=this instanceof Eh;if(!e&&!nw.call(kr,this))return new kr(r);this._writableState=new Eg(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),rM.call(this)}kr.prototype.pipe=function(){Ah(this,new Fq)};function qq(r,e){var t=new $q;Ah(r,t),process.nextTick(e,t)}function Hq(r,e,t,n){var i;return t===null?i=new jq:typeof t!="string"&&!e.objectMode&&(i=new Pq("chunk",["string","Buffer"],t)),i?(Ah(r,i),process.nextTick(n,i),!1):!0}kr.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&Nq(r);return o&&!iw.isBuffer(r)&&(r=Oq(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Wq),n.ending?qq(this,t):(o||Hq(this,n,r,t))&&(n.pendingcb++,i=Vq(this,n,o,r,e,t)),i};kr.prototype.cork=function(){this._writableState.corked++};kr.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&nM(this,r))};kr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zq(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(kr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Gq(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=iw.from(e,t)),e}Object.defineProperty(kr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Vq(r,e,t,n,i,o){if(!t){var s=Gq(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else hA(r,e,!1,a,n,i,o);return u}function hA(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Uq("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function Yq(r,e,t,n,i){--e.pendingcb,t?(process.nextTick(i,n),process.nextTick(_g,r,e),r._writableState.errorEmitted=!0,Ah(r,n)):(i(n),r._writableState.errorEmitted=!0,Ah(r,n),_g(r,e))}function Xq(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function Kq(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Bq;if(Xq(t),e)Yq(r,t,n,e,i);else{var o=iM(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&nM(r,t),n?process.nextTick(eM,r,t,o,i):eM(r,t,o,i)}}function eM(r,e,t,n){t||Zq(r,e),e.pendingcb--,n(),_g(r,e)}function Zq(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function nM(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,a=!0;t;)i[s]=t,t.isBuf||(a=!1),t=t.next,s+=1;i.allBuffers=a,hA(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new tM(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,f=t.callback,h=e.objectMode?1:u.length;if(hA(r,e,!1,h,u,c,f),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}kr.prototype._write=function(r,e,t){t(new Mq("_write()"))};kr.prototype._writev=null;kr.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||eH(this,n,t),this};Object.defineProperty(kr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function iM(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function Jq(r,e){r._final(function(t){e.pendingcb--,t&&Ah(r,t),e.prefinished=!0,r.emit("prefinish"),_g(r,e)})}function Qq(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Jq,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function _g(r,e){var t=iM(e);if(t&&(Qq(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function eH(r,e,t){e.ending=!0,_g(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function tH(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(kr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});kr.prototype.destroy=dA.destroy;kr.prototype._undestroy=dA.undestroy;kr.prototype._destroy=function(r,e){e(r)}});var ec=st((Rte,aM)=>{"use strict";Oe();ke();Ne();var rH=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};aM.exports=co;var oM=yA(),mA=pA();Qu()(co,oM);for(gA=rH(mA.prototype),sw=0;sw<gA.length;sw++)ow=gA[sw],co.prototype[ow]||(co.prototype[ow]=mA.prototype[ow]);var gA,ow,sw;function co(r){if(!(this instanceof co))return new co(r);oM.call(this,r),mA.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nH)))}Object.defineProperty(co.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(co.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(co.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nH(){this._writableState.ended||process.nextTick(iH,this)}function iH(r){r.end()}Object.defineProperty(co.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var cM=st((bA,uM)=>{Oe();ke();Ne();var aw=(ll(),Ir(Uf)),ca=aw.Buffer;function lM(r,e){for(var t in r)e[t]=r[t]}ca.from&&ca.alloc&&ca.allocUnsafe&&ca.allocUnsafeSlow?uM.exports=aw:(lM(aw,bA),bA.Buffer=xh);function xh(r,e,t){return ca(r,e,t)}lM(ca,xh);xh.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ca(r,e,t)};xh.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ca(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};xh.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ca(r)};xh.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return aw.SlowBuffer(r)}});var _A=st(hM=>{"use strict";Oe();ke();Ne();var vA=cM().Buffer,fM=vA.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function sH(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function oH(r){var e=sH(r);if(typeof e!="string"&&(vA.isEncoding===fM||!fM(r)))throw new Error("Unknown encoding: "+r);return e||r}hM.StringDecoder=Ag;function Ag(r){this.encoding=oH(r);var e;switch(this.encoding){case"utf16le":this.text=hH,this.end=dH,e=4;break;case"utf8":this.fillLast=uH,e=4;break;case"base64":this.text=pH,this.end=gH,e=3;break;default:this.write=mH,this.end=yH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=vA.allocUnsafe(e)}Ag.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Ag.prototype.end=fH;Ag.prototype.text=cH;Ag.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function wA(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function aH(r,e,t){var n=e.length-1;if(n<t)return 0;var i=wA(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=wA(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=wA(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function lH(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function uH(r){var e=this.lastTotal-this.lastNeed,t=lH(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function cH(r,e){var t=aH(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function fH(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function hH(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function dH(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function pH(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function gH(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function mH(r){return r.toString(this.encoding)}function yH(r){return r&&r.length?this.write(r):""}});var lw=st((Ute,gM)=>{"use strict";Oe();ke();Ne();var dM=Ju().codes.ERR_STREAM_PREMATURE_CLOSE;function bH(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function wH(){}function vH(r){return r.setHeader&&typeof r.abort=="function"}function pM(r,e,t){if(typeof e=="function")return pM(r,null,e);e||(e={}),t=bH(t||wH);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||a()},s=r._writableState&&r._writableState.finished,a=function(){i=!1,s=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,c=function(){n=!1,u=!0,i||t.call(r)},f=function(b){t.call(r,b)},h=function(){var b;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(b=new dM),t.call(r,b);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(b=new dM),t.call(r,b)},d=function(){r.req.on("finish",a)};return vH(r)?(r.on("complete",a),r.on("abort",h),r.req?d():r.on("request",d)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",c),r.on("finish",a),e.error!==!1&&r.on("error",f),r.on("close",h),function(){r.removeListener("complete",a),r.removeListener("abort",h),r.removeListener("request",d),r.req&&r.req.removeListener("finish",a),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",a),r.removeListener("end",c),r.removeListener("error",f),r.removeListener("close",h)}}gM.exports=pM});var yM=st((Wte,mM)=>{"use strict";Oe();ke();Ne();var uw;function xl(r,e,t){return e=_H(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _H(r){var e=EH(r,"string");return typeof e=="symbol"?e:String(e)}function EH(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var AH=lw(),Sl=Symbol("lastResolve"),tc=Symbol("lastReject"),xg=Symbol("error"),cw=Symbol("ended"),rc=Symbol("lastPromise"),EA=Symbol("handlePromise"),nc=Symbol("stream");function Tl(r,e){return{value:r,done:e}}function xH(r){var e=r[Sl];if(e!==null){var t=r[nc].read();t!==null&&(r[rc]=null,r[Sl]=null,r[tc]=null,e(Tl(t,!1)))}}function SH(r){process.nextTick(xH,r)}function TH(r,e){return function(t,n){r.then(function(){if(e[cw]){t(Tl(void 0,!0));return}e[EA](t,n)},n)}}var CH=Object.getPrototypeOf(function(){}),RH=Object.setPrototypeOf((uw={get stream(){return this[nc]},next:function(){var e=this,t=this[xg];if(t!==null)return Promise.reject(t);if(this[cw])return Promise.resolve(Tl(void 0,!0));if(this[nc].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[xg]?a(e[xg]):s(Tl(void 0,!0))})});var n=this[rc],i;if(n)i=new Promise(TH(n,this));else{var o=this[nc].read();if(o!==null)return Promise.resolve(Tl(o,!1));i=new Promise(this[EA])}return this[rc]=i,i}},xl(uw,Symbol.asyncIterator,function(){return this}),xl(uw,"return",function(){var e=this;return new Promise(function(t,n){e[nc].destroy(null,function(i){if(i){n(i);return}t(Tl(void 0,!0))})})}),uw),CH),DH=function(e){var t,n=Object.create(RH,(t={},xl(t,nc,{value:e,writable:!0}),xl(t,Sl,{value:null,writable:!0}),xl(t,tc,{value:null,writable:!0}),xl(t,xg,{value:null,writable:!0}),xl(t,cw,{value:e._readableState.endEmitted,writable:!0}),xl(t,EA,{value:function(o,s){var a=n[nc].read();a?(n[rc]=null,n[Sl]=null,n[tc]=null,o(Tl(a,!1))):(n[Sl]=o,n[tc]=s)},writable:!0}),t));return n[rc]=null,AH(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[tc];o!==null&&(n[rc]=null,n[Sl]=null,n[tc]=null,o(i)),n[xg]=i;return}var s=n[Sl];s!==null&&(n[rc]=null,n[Sl]=null,n[tc]=null,s(Tl(void 0,!0))),n[cw]=!0}),e.on("readable",SH.bind(null,n)),n};mM.exports=DH});var wM=st((Vte,bM)=>{Oe();ke();Ne();bM.exports=function(){throw new Error("Readable.from is not available in the browser")}});var yA=st((Jte,DM)=>{"use strict";Oe();ke();Ne();DM.exports=jt;var Sh;jt.ReadableState=AM;var Zte=(bh(),Ir(ug)).EventEmitter,EM=function(e,t){return e.listeners(t).length},Tg=sA(),fw=(ll(),Ir(Uf)).Buffer,IH=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function OH(r){return fw.from(r)}function NH(r){return fw.isBuffer(r)||r instanceof IH}var AA=(yh(),Ir(lg)),Ot;AA&&AA.debuglog?Ot=AA.debuglog("stream"):Ot=function(){};var kH=HP(),IA=lA(),LH=uA(),PH=LH.getHighWaterMark,hw=Ju().codes,MH=hw.ERR_INVALID_ARG_TYPE,BH=hw.ERR_STREAM_PUSH_AFTER_EOF,FH=hw.ERR_METHOD_NOT_IMPLEMENTED,UH=hw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Th,xA,SA;Qu()(jt,Tg);var Sg=IA.errorOrDestroy,TA=["error","close","destroy","pause","resume"];function jH(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function AM(r,e,t){Sh=Sh||ec(),r=r||{},typeof t!="boolean"&&(t=e instanceof Sh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=PH(this,r,"readableHighWaterMark",t),this.buffer=new kH,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Th||(Th=_A().StringDecoder),this.decoder=new Th(r.encoding),this.encoding=r.encoding)}function jt(r){if(Sh=Sh||ec(),!(this instanceof jt))return new jt(r);var e=this instanceof Sh;this._readableState=new AM(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Tg.call(this)}Object.defineProperty(jt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});jt.prototype.destroy=IA.destroy;jt.prototype._undestroy=IA.undestroy;jt.prototype._destroy=function(r,e){e(r)};jt.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=fw.from(r,e),e=""),n=!0),xM(this,r,e,!1,n)};jt.prototype.unshift=function(r){return xM(this,r,null,!0,!1)};function xM(r,e,t,n,i){Ot("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,WH(r,o);else{var s;if(i||(s=$H(o,e)),s)Sg(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==fw.prototype&&(e=OH(e)),n)o.endEmitted?Sg(r,new UH):CA(r,o,e,!0);else if(o.ended)Sg(r,new BH);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?CA(r,o,e,!1):DA(r,o)):CA(r,o,e,!1)}else n||(o.reading=!1,DA(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function CA(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&dw(r)),DA(r,e)}function $H(r,e){var t;return!NH(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new MH("chunk",["string","Buffer","Uint8Array"],e)),t}jt.prototype.isPaused=function(){return this._readableState.flowing===!1};jt.prototype.setEncoding=function(r){Th||(Th=_A().StringDecoder);var e=new Th(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var vM=1073741824;function zH(r){return r>=vM?r=vM:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function _M(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=zH(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}jt.prototype.read=function(r){Ot("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ot("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?RA(this):dw(this),null;if(r=_M(r,e),r===0&&e.ended)return e.length===0&&RA(this),null;var n=e.needReadable;Ot("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,Ot("length less than watermark",n)),e.ended||e.reading?(n=!1,Ot("reading or ended",n)):n&&(Ot("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=_M(t,e)));var i;return r>0?i=CM(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&RA(this)),i!==null&&this.emit("data",i),i};function WH(r,e){if(Ot("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?dw(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,SM(r)))}}function dw(r){var e=r._readableState;Ot("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ot("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(SM,r))}function SM(r){var e=r._readableState;Ot("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,OA(r)}function DA(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(qH,r,e))}function qH(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(Ot("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}jt.prototype._read=function(r){Sg(this,new FH("_read()"))};jt.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,Ot("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,o=i?a:v;n.endEmitted?process.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(w,y){Ot("onunpipe"),w===t&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,f())}function a(){Ot("onend"),r.end()}var u=HH(t);r.on("drain",u);var c=!1;function f(){Ot("cleanup"),r.removeListener("close",m),r.removeListener("finish",b),r.removeListener("drain",u),r.removeListener("error",d),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",v),t.removeListener("data",h),c=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",h);function h(w){Ot("ondata");var y=r.write(w);Ot("dest.write",y),y===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&RM(n.pipes,r)!==-1)&&!c&&(Ot("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function d(w){Ot("onerror",w),v(),r.removeListener("error",d),EM(r,"error")===0&&Sg(r,w)}jH(r,"error",d);function m(){r.removeListener("finish",b),v()}r.once("close",m);function b(){Ot("onfinish"),r.removeListener("close",m),v()}r.once("finish",b);function v(){Ot("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(Ot("pipe resume"),t.resume()),r};function HH(r){return function(){var t=r._readableState;Ot("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&EM(r,"data")&&(t.flowing=!0,OA(r))}}jt.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=RM(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};jt.prototype.on=function(r,e){var t=Tg.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ot("on readable",n.length,n.reading),n.length?dw(this):n.reading||process.nextTick(GH,this)),t};jt.prototype.addListener=jt.prototype.on;jt.prototype.removeListener=function(r,e){var t=Tg.prototype.removeListener.call(this,r,e);return r==="readable"&&process.nextTick(TM,this),t};jt.prototype.removeAllListeners=function(r){var e=Tg.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process.nextTick(TM,this),e};function TM(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function GH(r){Ot("readable nexttick read 0"),r.read(0)}jt.prototype.resume=function(){var r=this._readableState;return r.flowing||(Ot("resume"),r.flowing=!r.readableListening,VH(this,r)),r.paused=!1,this};function VH(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(YH,r,e))}function YH(r,e){Ot("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),OA(r),e.flowing&&!e.reading&&r.read(0)}jt.prototype.pause=function(){return Ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function OA(r){var e=r._readableState;for(Ot("flow",e.flowing);e.flowing&&r.read()!==null;);}jt.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(Ot("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(Ot("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=(function(a){return function(){return r[a].apply(r,arguments)}})(i));for(var o=0;o<TA.length;o++)r.on(TA[o],this.emit.bind(this,TA[o]));return this._read=function(s){Ot("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(jt.prototype[Symbol.asyncIterator]=function(){return xA===void 0&&(xA=yM()),xA(this)});Object.defineProperty(jt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(jt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(jt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});jt._fromList=CM;Object.defineProperty(jt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function CM(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function RA(r){var e=r._readableState;Ot("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(XH,e,r))}function XH(r,e){if(Ot("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(jt.from=function(r,e){return SA===void 0&&(SA=wM()),SA(jt,r,e)});function RM(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var NA=st((rre,OM)=>{"use strict";Oe();ke();Ne();OM.exports=fa;var pw=Ju().codes,KH=pw.ERR_METHOD_NOT_IMPLEMENTED,ZH=pw.ERR_MULTIPLE_CALLBACK,JH=pw.ERR_TRANSFORM_ALREADY_TRANSFORMING,QH=pw.ERR_TRANSFORM_WITH_LENGTH_0,gw=ec();Qu()(fa,gw);function eG(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new ZH);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function fa(r){if(!(this instanceof fa))return new fa(r);gw.call(this,r),this._transformState={afterTransform:eG.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",tG)}function tG(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){IM(r,e,t)}):IM(this,null,null)}fa.prototype.push=function(r,e){return this._transformState.needTransform=!1,gw.prototype.push.call(this,r,e)};fa.prototype._transform=function(r,e,t){t(new KH("_transform()"))};fa.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};fa.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};fa.prototype._destroy=function(r,e){gw.prototype._destroy.call(this,r,function(t){e(t)})};function IM(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new QH;if(r._transformState.transforming)throw new JH;return r.push(null)}});var LM=st((ore,kM)=>{"use strict";Oe();ke();Ne();kM.exports=Cg;var NM=NA();Qu()(Cg,NM);function Cg(r){if(!(this instanceof Cg))return new Cg(r);NM.call(this,r)}Cg.prototype._transform=function(r,e,t){t(null,r)}});var UM=st((cre,FM)=>{"use strict";Oe();ke();Ne();var kA;function rG(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var BM=Ju().codes,nG=BM.ERR_MISSING_ARGS,iG=BM.ERR_STREAM_DESTROYED;function PM(r){if(r)throw r}function sG(r){return r.setHeader&&typeof r.abort=="function"}function oG(r,e,t,n){n=rG(n);var i=!1;r.on("close",function(){i=!0}),kA===void 0&&(kA=lw()),kA(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,sG(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new iG("pipe"))}}}function MM(r){r()}function aG(r,e){return r.pipe(e)}function lG(r){return!r.length||typeof r[r.length-1]!="function"?PM:r.pop()}function uG(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=lG(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new nG("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return oG(s,u,c,function(f){i||(i=f),f&&o.forEach(MM),!u&&(o.forEach(MM),n(i))})});return e.reduce(aG)}FM.exports=uG});var $M=st((os,jM)=>{Oe();ke();Ne();os=jM.exports=yA();os.Stream=os;os.Readable=os;os.Writable=pA();os.Duplex=ec();os.Transform=NA();os.PassThrough=LM();os.finished=lw();os.pipeline=UM()});var WM=st((yre,zM)=>{Oe();ke();Ne();var cG=Object.prototype.toString,LA=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function fG(r){return cG.call(r).slice(8,-1)==="ArrayBuffer"}function hG(r,e,t){e>>>=0;var n=r.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return LA?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function dG(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return LA?Buffer.from(r,e):new Buffer(r,e)}function pG(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return fG(r)?hG(r,e,t):typeof r=="string"?dG(r,e):LA?Buffer.from(r):new Buffer(r)}zM.exports=pG});var XM=st(bt=>{Oe();ke();Ne();var qM=void 0,gG=1e5,vr=(function(){var r=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(t){return r.call(t).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,n){return n in t},HasOwnProperty:function(t,n){return e.call(t,n)},IsCallable:function(t){return typeof t=="function"},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}})(),mG=Math.LN2,yG=Math.abs,mw=Math.floor,bG=Math.log,wG=Math.min,Ns=Math.pow,vG=Math.round;function PA(r){if(HM&&Ch){var e=HM(r),t;for(t=0;t<e.length;t+=1)Ch(r,e[t],{value:r[e[t]],writable:!1,enumerable:!1,configurable:!1})}}var Ch;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?Ch=Object.defineProperty:Ch=function(r,e,t){if(!r===Object(r))throw new TypeError("Object.defineProperty called on non-object");return vr.HasProperty(t,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(r,e,t.get),vr.HasProperty(t,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(r,e,t.set),vr.HasProperty(t,"value")&&(r[e]=t.value),r};var HM=Object.getOwnPropertyNames||function(r){if(r!==Object(r))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],t;for(t in r)vr.HasOwnProperty(r,t)&&e.push(t);return e};function _G(r){if(!Ch)return;if(r.length>gG)throw new RangeError("Array too large for polyfill");function e(n){Ch(r,n,{get:function(){return r._getter(n)},set:function(i){r._setter(n,i)},enumerable:!0,configurable:!1})}var t;for(t=0;t<r.length;t+=1)e(t)}function MA(r,e){var t=32-e;return r<<t>>t}function BA(r,e){var t=32-e;return r<<t>>>t}function EG(r){return[r&255]}function AG(r){return MA(r[0],8)}function xG(r){return[r&255]}function GM(r){return BA(r[0],8)}function SG(r){return r=vG(Number(r)),[r<0?0:r>255?255:r&255]}function TG(r){return[r>>8&255,r&255]}function CG(r){return MA(r[0]<<8|r[1],16)}function RG(r){return[r>>8&255,r&255]}function DG(r){return BA(r[0]<<8|r[1],16)}function IG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function OG(r){return MA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function NG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function kG(r){return BA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function VM(r,e,t){var n=(1<<e-1)-1,i,o,s,a,u,c,f,h;function d(m){var b=mw(m),v=m-b;return v<.5?b:v>.5||b%2?b+1:b}for(r!==r?(o=(1<<e)-1,s=Ns(2,t-1),i=0):r===1/0||r===-1/0?(o=(1<<e)-1,s=0,i=r<0?1:0):r===0?(o=0,s=0,i=1/r===-1/0?1:0):(i=r<0,r=yG(r),r>=Ns(2,1-n)?(o=wG(mw(bG(r)/mG),1023),s=d(r/Ns(2,o)*Ns(2,t)),s/Ns(2,t)>=2&&(o=o+1,s=1),o>n?(o=(1<<e)-1,s=0):(o=o+n,s=s-Ns(2,t))):(o=0,s=d(r/Ns(2,1-n-t)))),c=[],u=t;u;u-=1)c.push(s%2?1:0),s=mw(s/2);for(u=e;u;u-=1)c.push(o%2?1:0),o=mw(o/2);for(c.push(i?1:0),c.reverse(),f=c.join(""),h=[];f.length;)h.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return h}function YM(r,e,t){var n=[],i,o,s,a,u,c,f,h;for(i=r.length;i;i-=1)for(s=r[i-1],o=8;o;o-=1)n.push(s%2?1:0),s=s>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,f=parseInt(a.substring(1,1+e),2),h=parseInt(a.substring(1+e),2),f===(1<<e)-1?h!==0?NaN:c*(1/0):f>0?c*Ns(2,f-u)*(1+h/Ns(2,t)):h!==0?c*Ns(2,-(u-1))*(h/Ns(2,t)):c<0?-0:0}function LG(r){return YM(r,11,52)}function PG(r){return VM(r,11,52)}function MG(r){return YM(r,8,23)}function BG(r){return VM(r,8,23)}(function(){var r=function(m){if(m=vr.ToInt32(m),m<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=m,this._bytes=[],this._bytes.length=m;var b;for(b=0;b<this.byteLength;b+=1)this._bytes[b]=0;PA(this)};bt.ArrayBuffer=bt.ArrayBuffer||r;var e=function(){};function t(d,m,b){var v;return v=function(w,y,_){var E,S,A,P;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=vr.ToInt32(arguments[0]),_<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===v)for(E=arguments[0],this.length=E.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)this._setter(A,E._getter(A));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer"))for(S=arguments[0],this.length=vr.ToUint32(S.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)P=S[A],this._setter(A,Number(P));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=w,this.byteOffset=vr.ToUint32(y),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=vr.ToUint32(_),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=v,PA(this),_G(this)},v.prototype=new e,v.prototype.BYTES_PER_ELEMENT=d,v.prototype._pack=m,v.prototype._unpack=b,v.BYTES_PER_ELEMENT=d,v.prototype._getter=function(w){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return qM;var y=[],_,E;for(_=0,E=this.byteOffset+w*this.BYTES_PER_ELEMENT;_<this.BYTES_PER_ELEMENT;_+=1,E+=1)y.push(this.buffer._bytes[E]);return this._unpack(y)},v.prototype.get=v.prototype._getter,v.prototype._setter=function(w,y){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return qM;var _=this._pack(y),E,S;for(E=0,S=this.byteOffset+w*this.BYTES_PER_ELEMENT;E<this.BYTES_PER_ELEMENT;E+=1,S+=1)this.buffer._bytes[S]=_[E]},v.prototype.set=function(w,y){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var _,E,S,A,P,R,Y,te,K,ie;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(_=arguments[0],S=vr.ToUint32(arguments[1]),S+_.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(te=this.byteOffset+S*this.BYTES_PER_ELEMENT,K=_.length*this.BYTES_PER_ELEMENT,_.buffer===this.buffer){for(ie=[],P=0,R=_.byteOffset;P<K;P+=1,R+=1)ie[P]=_.buffer._bytes[R];for(P=0,Y=te;P<K;P+=1,Y+=1)this.buffer._bytes[Y]=ie[P]}else for(P=0,R=_.byteOffset,Y=te;P<K;P+=1,R+=1,Y+=1)this.buffer._bytes[Y]=_.buffer._bytes[R]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(E=arguments[0],A=vr.ToUint32(E.length),S=vr.ToUint32(arguments[1]),S+A>this.length)throw new RangeError("Offset plus length of array is out of range");for(P=0;P<A;P+=1)R=E[P],this._setter(S+P,Number(R))}else throw new TypeError("Unexpected argument type(s)")},v.prototype.subarray=function(w,y){function _(S,A,P){return S<A?A:S>P?P:S}w=vr.ToInt32(w),y=vr.ToInt32(y),arguments.length<1&&(w=0),arguments.length<2&&(y=this.length),w<0&&(w=this.length+w),y<0&&(y=this.length+y),w=_(w,0,this.length),y=_(y,0,this.length);var E=y-w;return E<0&&(E=0),new this.constructor(this.buffer,this.byteOffset+w*this.BYTES_PER_ELEMENT,E)},v}var n=t(1,EG,AG),i=t(1,xG,GM),o=t(1,SG,GM),s=t(2,TG,CG),a=t(2,RG,DG),u=t(4,IG,OG),c=t(4,NG,kG),f=t(4,BG,MG),h=t(8,PG,LG);bt.Int8Array=bt.Int8Array||n,bt.Uint8Array=bt.Uint8Array||i,bt.Uint8ClampedArray=bt.Uint8ClampedArray||o,bt.Int16Array=bt.Int16Array||s,bt.Uint16Array=bt.Uint16Array||a,bt.Int32Array=bt.Int32Array||u,bt.Uint32Array=bt.Uint32Array||c,bt.Float32Array=bt.Float32Array||f,bt.Float64Array=bt.Float64Array||h})();(function(){function r(o,s){return vr.IsCallable(o.get)?o.get(s):o[s]}var e=(function(){var o=new bt.Uint16Array([4660]),s=new bt.Uint8Array(o.buffer);return r(s,0)===18})(),t=function(s,a,u){if(arguments.length===0)s=new bt.ArrayBuffer(0);else if(!(s instanceof bt.ArrayBuffer||vr.Class(s)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=s||new bt.ArrayBuffer(0),this.byteOffset=vr.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=vr.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");PA(this)};function n(o){return function(s,a){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");s+=this.byteOffset;var u=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),c=[],f;for(f=0;f<o.BYTES_PER_ELEMENT;f+=1)c.push(r(u,f));return!!a==!!e&&c.reverse(),r(new o(new bt.Uint8Array(c).buffer),0)}}t.prototype.getUint8=n(bt.Uint8Array),t.prototype.getInt8=n(bt.Int8Array),t.prototype.getUint16=n(bt.Uint16Array),t.prototype.getInt16=n(bt.Int16Array),t.prototype.getUint32=n(bt.Uint32Array),t.prototype.getInt32=n(bt.Int32Array),t.prototype.getFloat32=n(bt.Float32Array),t.prototype.getFloat64=n(bt.Float64Array);function i(o){return function(s,a,u){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new o([a]),f=new bt.Uint8Array(c.buffer),h=[],d,m;for(d=0;d<o.BYTES_PER_ELEMENT;d+=1)h.push(r(f,d));!!u==!!e&&h.reverse(),m=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),m.set(h)}}t.prototype.setUint8=i(bt.Uint8Array),t.prototype.setInt8=i(bt.Int8Array),t.prototype.setUint16=i(bt.Uint16Array),t.prototype.setInt16=i(bt.Int16Array),t.prototype.setUint32=i(bt.Uint32Array),t.prototype.setInt32=i(bt.Int32Array),t.prototype.setFloat32=i(bt.Float32Array),t.prototype.setFloat64=i(bt.Float64Array),bt.DataView=bt.DataView||t})()});var QM=st((Sre,JM)=>{Oe();ke();Ne();var KM=$M().Writable,FG=Qu(),Rg=WM();typeof Uint8Array>"u"?yw=XM().Uint8Array:yw=Uint8Array;var yw;function ic(r,e){if(!(this instanceof ic))return new ic(r,e);typeof r=="function"&&(e=r,r={}),r||(r={});var t=r.encoding,n=!1;t?(t=String(t).toLowerCase(),(t==="u8"||t==="uint8")&&(t="uint8array")):n=!0,KM.call(this,{objectMode:!0}),this.encoding=t,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}JM.exports=ic;FG(ic,KM);ic.prototype._write=function(r,e,t){this.body.push(r),t()};ic.prototype.inferEncoding=function(r){var e=r===void 0?this.body[0]:r;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};ic.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?zG(this.body):this.encoding==="string"?jG(this.body):this.encoding==="buffer"?$G(this.body):this.encoding==="uint8array"?WG(this.body):this.body)};function UG(r){return/Array\]$/.test(Object.prototype.toString.call(r))}function ZM(r){return typeof r=="string"||UG(r)||r&&typeof r.subarray=="function"}function jG(r){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):ZM(i)?e.push(Rg(i)):e.push(Rg(String(i)))}return Buffer.isBuffer(r[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function $G(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];Buffer.isBuffer(n)?e.push(n):ZM(n)?e.push(Rg(n)):e.push(Rg(String(n)))}return Buffer.concat(e)}function zG(r){for(var e=[],t=0;t<r.length;t++)e.push.apply(e,r[t]);return e}function WG(r){for(var e=0,t=0;t<r.length;t++)typeof r[t]=="string"&&(r[t]=Rg(r[t])),e+=r[t].length;for(var n=new yw(e),t=0,i=0;t<r.length;t++)for(var o=r[t],s=0;s<o.length;s++)n[i++]=o[s];return n}});var x3={};Uo(x3,{AbortException:()=>Ys,AnnotationEditorLayer:()=>$v,AnnotationEditorParamsType:()=>Mt,AnnotationEditorType:()=>vt,AnnotationEditorUIManager:()=>vu,AnnotationLayer:()=>Lv,AnnotationMode:()=>Za,AnnotationType:()=>qr,CSSConstants:()=>cv,ColorPicker:()=>hm,DOMSVGFactory:()=>Of,DrawLayer:()=>zv,FeatureTest:()=>Ur,GlobalWorkerOptions:()=>_s,ImageKind:()=>tm,InvalidPDFException:()=>bp,MathClamp:()=>Wn,OPS:()=>yp,OutputScale:()=>Bo,PDFDataRangeTransport:()=>fm,PDFDateString:()=>Rf,PDFWorker:()=>_p,PasswordResponses:()=>xB,PermissionFlag:()=>AB,PixelsPerInch:()=>tl,RenderingCancelledException:()=>wp,ResponseException:()=>Df,SignatureExtractor:()=>Es,SupportedImageMimeTypes:()=>uv,TextLayer:()=>vp,TouchManager:()=>lm,Util:()=>it,VerbosityLevel:()=>u0,XfaLayer:()=>om,applyOpacity:()=>OB,build:()=>OF,createValidAbsoluteUrl:()=>vT,fetchData:()=>Ep,findContrastColor:()=>NB,getDocument:()=>CF,getFilenameFromUrl:()=>RB,getPdfFilenameFromUrl:()=>DB,getRGB:()=>Ap,getUuid:()=>ET,getXfaPageViewport:()=>IB,isDataScheme:()=>f0,isPdfFile:()=>c_,isValidExplicitDest:()=>hF,noContextMenu:()=>Zi,normalizeUnicode:()=>TB,renderRichText:()=>AT,setLayerDimensions:()=>wu,shadow:()=>wt,stopEvent:()=>Cr,updateUrlHash:()=>_T,version:()=>IF});function HG(r){Number.isInteger(r)&&(l_=r)}function GG(){return l_}function u_(r){l_>=u0.INFOS&&console.info(`Info: ${r}`)}function _t(r){l_>=u0.WARNINGS&&console.warn(`Warning: ${r}`)}function dr(r){throw new Error(r)}function Bt(r,e){r||dr(e)}function VG(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function vT(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=ZG(r)}catch{}let n=e?URL.parse(r,e):URL.parse(r);return VG(n)?n:null}function _T(r,e,t=!1){let n=URL.parse(r);return n?(n.hash=e,n.href):t&&vT(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function wt(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}function SB(r){(typeof r!="object"||r?.length===void 0)&&dr("Invalid argument for bytesToString");let e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);let n=[];for(let i=0;i<e;i+=t){let o=Math.min(i+t,e),s=r.subarray(i,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function c0(r){typeof r!="string"&&dr("Invalid argument for stringToBytes");let e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function YG(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function XG(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function KG(){try{return new Function(""),!0}catch{return!1}}function ZG(r){return decodeURIComponent(escape(r))}function TB(r){return UA||(UA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,iB=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(UA,(e,t,n)=>t?t.normalize("NFKC"):iB.get(n))}function ET(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);return crypto.getRandomValues(r),SB(r)}function JG(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;let[n,i,...o]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;let s=o.length,a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let u of o)if(!(typeof u=="number"||a&&u===null))return!1;return!0}function Wn(r,e,t){return Math.min(Math.max(r,e),t)}function CB(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(SB(r))}function QG(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):c0(atob(r))}async function Ep(r,e="text"){if(Lg(r,document.baseURI)){let t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}function f0(r){let e=r.length,t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function c_(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function RB(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function DB(r,e="document.pdf"){if(typeof r!="string")return e;if(f0(r))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;let i=a=>{try{let u=decodeURIComponent(a);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:a):u}catch{return a}},o=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(o.test(s))return i(s);if(n.searchParams.size>0){let a=Array.from(n.searchParams.values()).reverse();for(let c of a)if(o.test(c))return i(c);let u=Array.from(n.searchParams.keys()).reverse();for(let c of u)if(o.test(c))return i(c)}if(n.hash){let u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return i(u[0])}return e}function Lg(r,e){let t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function Zi(r){r.preventDefault()}function Cr(r){r.preventDefault(),r.stopPropagation()}function eV(r){console.log("Deprecated API usage: "+r)}function IB(r,{scale:e=1,rotation:t=0}){let{width:n,height:i}=r.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new am({viewBox:o,userUnit:1,scale:e,rotation:t})}function Ap(r){if(r.startsWith("#")){let e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_t(`Not a valid color format: "${r}"`),[0,0,0])}function tV(r){let e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(let t of r.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;r.set(t,Ap(n))}e.remove()}function Tr(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform();return[e,t,n,i,o,s]}function fo(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform().invertSelf();return[e,t,n,i,o,s]}function wu(r,e,t=!1,n=!0){if(e instanceof am){let{pageWidth:i,pageHeight:o}=e.rawDims,{style:s}=r,a=Ur.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${o}px`,f=a?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(s.width=f,s.height=h):(s.width=h,s.height=f)}n&&r.setAttribute("data-main-rotation",e.rotation)}function OB(r,e,t,n){n=Math.min(Math.max(n??1,0),1);let i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function sB(r,e){let t=r[0]/255,n=r[1]/255,i=r[2]/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=(o+s)/2;if(o===s)e[0]=e[1]=0;else{let u=o-s;switch(e[1]=a<.5?u/(o+s):u/(2-o-s),o){case t:e[0]=((n-i)/u+(n<i?6:0))*60;break;case n:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-n)/u+4)*60;break}}e[2]=a}function XA(r,e){let t=r[0],n=r[1],i=r[2],o=(1-Math.abs(2*i-1))*n,s=o*(1-Math.abs(t/60%2-1)),a=i-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 1:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 2:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 3:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 4:e[0]=s+a,e[1]=a,e[2]=o+a;break;case 5:case 6:e[0]=o+a,e[1]=a,e[2]=s+a;break}}function oB(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function aB(r,e,t){XA(r,t),t.map(oB);let n=.2126*t[0]+.7152*t[1]+.0722*t[2];XA(e,t),t.map(oB);let i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}function NB(r,e){let t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776,n=lB.get(t);if(n)return n;let i=new Float32Array(9),o=i.subarray(0,3),s=i.subarray(3,6);sB(r,s);let a=i.subarray(6,9);sB(e,a);let u=a[2]<.5,c=u?12:4.5;if(s[2]=u?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),aB(s,a,o)<c){let f,h;u?(f=s[2],h=1):(f=0,h=s[2]);let d=.005;for(;h-f>d;){let m=s[2]=(f+h)/2;u===aB(s,a,o)<c?f=m:h=m}s[2]=u?h:f}return XA(s,o),n=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),lB.set(t,n),n}function AT({html:r,dir:e,className:t},n){let i=document.createDocumentFragment();if(typeof r=="string"){let o=document.createElement("p");o.dir=e||"auto";let s=r.split(/(?:\r\n?|\n)/);for(let a=0,u=s.length;a<u;++a){let c=s[a];o.append(document.createTextNode(c)),a<u-1&&o.append(document.createElement("br"))}i.append(o)}else om.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function kB(r){let e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case Dg.moveTo:e.moveTo(r[t++],r[t++]);break;case Dg.lineTo:e.lineTo(r[t++],r[t++]);break;case Dg.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Dg.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Dg.closePath:e.closePath();break;default:_t(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}function UB(r,e,t){for(let n of t)e.addEventListener(n,r[n].bind(r))}function rV(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Qn)return r;let e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nV(r){if(Qn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return c0(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bw(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}function cB(){}function hi(r){if(r instanceof Ys||r instanceof bp||r instanceof av||r instanceof Df||r instanceof rm)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ys(r.message);case"InvalidPDFException":return new bp(r.message);case"PasswordException":return new av(r.message,r.code);case"ResponseException":return new Df(r.message,r.status,r.missing);case"UnknownErrorException":return new rm(r.message,r.details)}return new rm(r.message,r.toString())}async function xT(r){let t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}function vw(r,e,t,n,i,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],o)}function Bx(r,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}function jA(r,e,t,n,i,o,s,a){let u=e.coords,c=e.colors,f=r.data,h=r.width*4,d;u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d),u[n+1]>u[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d);let m=(u[t]+e.offsetX)*e.scaleX,b=(u[t+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,y=(u[i]+e.offsetX)*e.scaleX,_=(u[i+1]+e.offsetY)*e.scaleY;if(b>=_)return;let E=c[o],S=c[o+1],A=c[o+2],P=c[s],R=c[s+1],Y=c[s+2],te=c[a],K=c[a+1],ie=c[a+2],j=Math.round(b),q=Math.round(_),fe,Ee,ve,H,D,ee,B,L;for(let $=j;$<=q;$++){if($<w){let z=$<b?0:(b-$)/(b-w);fe=m-(m-v)*z,Ee=E-(E-P)*z,ve=S-(S-R)*z,H=A-(A-Y)*z}else{let z;$>_?z=1:w===_?z=0:z=(w-$)/(w-_),fe=v-(v-y)*z,Ee=P-(P-te)*z,ve=R-(R-K)*z,H=Y-(Y-ie)*z}let M;$<b?M=0:$>_?M=1:M=(b-$)/(b-_),D=m-(m-y)*M,ee=E-(E-te)*M,B=S-(S-K)*M,L=A-(A-ie)*M;let G=Math.round(Math.min(fe,D)),ne=Math.round(Math.max(fe,D)),se=h*$+G*4;for(let z=G;z<=ne;z++)M=(fe-z)/(fe-D),M<0?M=0:M>1&&(M=1),f[se++]=Ee-(Ee-ee)*M|0,f[se++]=ve-(ve-B)*M|0,f[se++]=H-(H-L)*M|0,f[se++]=255}}function sV(r,e,t){let n=e.coords,i=e.colors,o,s;switch(e.type){case HA.LATTICE:let a=e.verticesPerRow,u=Math.floor(n.length/a)-1,c=a-1;for(o=0;o<u;o++){let f=o*a;for(let h=0;h<c;h++,f++)jA(r,t,n[f],n[f+1],n[f+a],i[f],i[f+1],i[f+a]),jA(r,t,n[f+a+1],n[f+1],n[f+a],i[f+a+1],i[f+1],i[f+a])}break;case HA.TRIANGLES:for(o=0,s=n.length;o<s;o+=3)jA(r,t,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}function oV(r){switch(r[0]){case"RadialAxial":return new Fx(r);case"Mesh":return new Ux(r);case"Dummy":return new jx}throw new Error(`Unknown IR type: ${r[0]}`)}function aV({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let a=Ur.isLittleEndian?4278190080:255,[u,c]=s?[o,a]:[a,o],f=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let m=0;for(let b=0;b<i;b++){for(let w=e+f;e<w;e++){let y=e<d?r[e]:255;t[m++]=y&128?c:u,t[m++]=y&64?c:u,t[m++]=y&32?c:u,t[m++]=y&16?c:u,t[m++]=y&8?c:u,t[m++]=y&4?c:u,t[m++]=y&2?c:u,t[m++]=y&1?c:u}if(h===0)continue;let v=e<d?r[e++]:255;for(let w=0;w<h;w++)t[m++]=v&1<<7-w?c:u}return{srcPos:e,destPos:m}}function uV(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,o,s,a){e.transform(t,n,i,o,s,a),this.__originalTransform(t,n,i,o,s,a)},r.setTransform=function(t,n,i,o,s,a){e.setTransform(t,n,i,o,s,a),this.__originalSetTransform(t,n,i,o,s,a)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,o,s,a){e.bezierCurveTo(t,n,i,o,s,a),this.__originalBezierCurveTo(t,n,i,o,s,a)},r.rect=function(t,n,i,o){e.rect(t,n,i,o),this.__originalRect(t,n,i,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}function Ew(r,e,t,n,i,o,s,a,u,c){let[f,h,d,m,b,v]=Tr(r);if(h===0&&d===0){let _=s*f+b,E=Math.round(_),S=a*m+v,A=Math.round(S),P=(s+u)*f+b,R=Math.abs(Math.round(P)-E)||1,Y=(a+c)*m+v,te=Math.abs(Math.round(Y)-A)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(m),E,A),r.drawImage(e,t,n,i,o,0,0,R,te),r.setTransform(f,h,d,m,b,v),[R,te]}if(f===0&&m===0){let _=a*d+b,E=Math.round(_),S=s*h+v,A=Math.round(S),P=(a+c)*d+b,R=Math.abs(Math.round(P)-E)||1,Y=(s+u)*h+v,te=Math.abs(Math.round(Y)-A)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,E,A),r.drawImage(e,t,n,i,o,0,0,te,R),r.setTransform(f,h,d,m,b,v),[te,R]}r.drawImage(e,t,n,i,o,s,a,u,c);let w=Math.hypot(f,h),y=Math.hypot(d,m);return[w*u,y*c]}function yB(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c,f=e.data,h=a.data,d,m,b,v;if(e.kind===tm.GRAYSCALE_1BPP){let w=f.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),_=y.length,E=n+7>>3,S=4294967295,A=Ur.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(b=d<o?vi:i,c=0,m=0;m<b;m++){let P=w-u,R=0,Y=P>E?n:P*8-7,te=Y&-8,K=0,ie=0;for(;R<te;R+=8)ie=f[u++],y[c++]=ie&128?S:A,y[c++]=ie&64?S:A,y[c++]=ie&32?S:A,y[c++]=ie&16?S:A,y[c++]=ie&8?S:A,y[c++]=ie&4?S:A,y[c++]=ie&2?S:A,y[c++]=ie&1?S:A;for(;R<Y;R++)K===0&&(ie=f[u++],K=128),y[c++]=ie&K?S:A,K>>=1}for(;c<_;)y[c++]=0;r.putImageData(a,0,d*vi)}}else if(e.kind===tm.RGBA_32BPP){for(m=0,v=n*vi*4,d=0;d<o;d++)h.set(f.subarray(u,u+v)),u+=v,r.putImageData(a,0,m),m+=vi;d<s&&(v=n*i*4,h.set(f.subarray(u,u+v)),r.putImageData(a,0,m))}else if(e.kind===tm.RGB_24BPP)for(b=vi,v=n*b,d=0;d<s;d++){for(d>=o&&(b=i,v=n*b),c=0,m=v;m--;)h[c++]=f[u++],h[c++]=f[u++],h[c++]=f[u++],h[c++]=255;r.putImageData(a,0,d*vi)}else throw new Error(`bad image kind: ${e.kind}`)}function bB(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c=e.data,f=a.data;for(let h=0;h<s;h++){let d=h<o?vi:i;({srcPos:u}=aV({src:c,srcPos:u,dest:f,width:n,height:d,nonBlackColor:0})),r.putImageData(a,0,h*vi)}}function Ig(r,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Aw(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);let{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function wB(r,e){if(e)return!0;it.singularValueDecompose2dScale(r,Yi);let t=Math.fround(Bo.pixelRatio*tl.PDF_TO_CSS_UNITS);return Yi[0]<=t&&Yi[1]<=t}function dV(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let f=a(t);return f=unescape(f),f=u(f),f=c(f),o(f)}if(t=s(r),t){let f=c(t);return o(f)}if(t=n("filename","i").exec(r),t){t=t[1];let f=a(t);return f=c(f),o(f)}function n(f,h){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(f,h){if(f){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let d=new TextDecoder(f,{fatal:!0}),m=c0(h);h=d.decode(m),e=!1}catch{}}return h}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function s(f){let h=[],d,m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=m.exec(f))!==null;){let[,v,w,y]=d;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[w,y]}let b=[];for(let v=0;v<h.length&&v in h;++v){let[w,y]=h[v];y=a(y),w&&(y=unescape(y),v===0&&(y=u(y))),b.push(y)}return b.join("")}function a(f){if(f.startsWith('"')){let h=f.slice(1).split('\\"');for(let d=0;d<h.length;++d){let m=h[d].indexOf('"');m!==-1&&(h[d]=h[d].slice(0,m),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}f=h.join('"')}return f}function u(f){let h=f.indexOf("'");if(h===-1)return f;let d=f.slice(0,h),b=f.slice(h+1).replace(/^[^']*'/,"");return i(d,b)}function c(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,m,b){if(m==="q"||m==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(d,b);try{b=atob(b)}catch{}return i(d,b)})}return""}function yF(r,e){let t=new Headers;if(!r||!e||typeof e!="object")return t;for(let n in e){let i=e[n];i!==void 0&&t.append(n,i)}return t}function f_(r){return URL.parse(r)?.origin??null}function bF({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){let i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function wF(r){let e=r.get("Content-Disposition");if(e){let t=dV(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(c_(t))return t}return null}function h0(r,e){return new Df(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function vF(r){return r===200||r===206}function _F(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EF(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}function pV(r){let e=r.response;return typeof e!="string"?e:c0(e).buffer}function mV(r){if(gV.test(r))return new URL(r);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}function CF(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let e=new hS,{docId:t}=e,n=r.url?rV(r.url):null,i=r.data?nV(r.data):null,o=r.httpHeaders||null,s=r.withCredentials===!0,a=r.password??null,u=r.range instanceof fm?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16,f=r.worker instanceof _p?r.worker:null,h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!f0(r.docBaseUrl)?r.docBaseUrl:null,m=bw(r.cMapUrl),b=r.cMapPacked!==!1,v=r.CMapReaderFactory||(Qn?Ix:bv),w=bw(r.iccUrl),y=bw(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Qn?Ox:_v),E=bw(r.wasmUrl),S=r.WasmFactory||(Qn?Nx:Av),A=r.stopAtErrors!==!0,P=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,R=r.isEvalSupported!==!1,Y=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Qn,te=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Qn&&(Ur.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,ie=typeof r.disableFontFace=="boolean"?r.disableFontFace:Qn,j=r.fontExtraProperties===!0,q=r.enableXfa===!0,fe=r.ownerDocument||globalThis.document,Ee=r.disableRange===!0,ve=r.disableStream===!0,H=r.disableAutoFetch===!0,D=r.pdfBug===!0,ee=r.CanvasFactory||(Qn?Dx:xx),B=r.FilterFactory||(Qn?Rx:Sx),L=r.enableHWA===!0,$=r.useWasm!==!1,M=u?u.length:r.length??NaN,G=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Qn&&!ie,ne=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===bv&&_===_v&&S===Av&&m&&y&&E&&Lg(m,document.baseURI)&&Lg(y,document.baseURI)&&Lg(E,document.baseURI)),se=null;HG(h);let z={canvasFactory:new ee({ownerDocument:fe,enableHWA:L}),filterFactory:new B({docId:t,ownerDocument:fe}),cMapReaderFactory:ne?null:new v({baseUrl:m,isCompressed:b}),standardFontDataFactory:ne?null:new _({baseUrl:y}),wasmFactory:ne?null:new S({baseUrl:E})};f||(f=_p.create({verbosity:h,port:_s.workerPort}),e._worker=f);let N={docId:t,apiVersion:"5.4.530",data:i,password:a,disableAutoFetch:H,rangeChunkSize:c,length:M,docBaseUrl:d,enableXfa:q,evaluatorOptions:{maxImageSize:P,disableFontFace:ie,ignoreErrors:A,isEvalSupported:R,isOffscreenCanvasSupported:Y,isImageDecoderSupported:te,canvasMaxAreaInBytes:K,fontExtraProperties:j,useSystemFonts:G,useWasm:$,useWorkerFetch:ne,cMapUrl:m,iccUrl:w,standardFontDataUrl:y,wasmUrl:E}},F={ownerDocument:fe,pdfBug:D,styleElement:se,loadingParams:{disableAutoFetch:H,enableXfa:q}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let le=f.messageHandler.sendWithPromise("GetDocRequest",N,i?[i.buffer]:null),me;if(u)me=new Kx(u,{disableRange:Ee,disableStream:ve});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let U=Lg(n)?Qx:Qn?oS:nS;me=new U({url:n,length:M,httpHeaders:o,withCredentials:s,rangeChunkSize:c,disableRange:Ee,disableStream:ve})}return le.then(U=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let I=new fc(t,U,f.port),Z=new gS(I,e,me,F,z,L);e._transport=Z,I.send("Ready",null)})}).catch(e._capability.reject),e}function EB(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Ng(r){return Math.max(0,Math.min(255,255*r))}var Tw,Qn,qA,Cw,qG,Qre,Vi,Za,im,vt,Mt,AB,HA,on,tm,qr,Dh,u0,yp,Dg,xB,l_,Lf,av,rm,bp,Df,GA,Ys,Ur,FA,Ja,Rw,VA,it,UA,iB,Bh,sm,om,ha,lc,tl,am,wp,lv,wm,Rf,Bo,uv,YA,cv,lB,Dl,Il,us,cs,vm,Ol,Hh,Gh,_m,Wv,LB,On,PB,MB,Ih,Pg,ga,KA,Em,hc,ya,nl,BB,FB,JA,ZA,dc,pc,Vh,gc,tr,Bn,qv,QA,Yh,Am,Fn,Xh,Dw,ST,ex,Hr,Nl,xm,Sr,tx,Hv,jB,If,Gv,rx,Kh,Ri,Zh,Lr,ln,Jh,fs,Qh,hs,Un,kl,Ll,ed,Pl,go,ds,mc,Sm,Tm,td,Cm,mo,Ml,rd,Bl,yo,Vv,Fl,nd,Rm,Ul,yc,id,jl,Dm,Xr,Kt,ba,$l,zl,Im,sd,Om,Wl,bo,wa,Nm,km,ps,nt,Iw,nx,$B,zB,Mg,WB,qB,HB,ix,GB,VB,YB,XB,Yn,da,KB,ZB,sx,JB,Bg,ox,jh,vu,gn,wo,Ps,od,vo,Di,ad,_o,pi,va,bc,Eo,ql,Vs,Fg,Ow,Xn,fv,xn,gs,wc,gr,Lm,vc,Ms,_c,Ec,Ac,Pm,ax,Fh,ld,xc,Mm,Bm,Fm,Um,jm,_a,Sc,Ea,Tc,Aa,_u,QB,eF,tF,TT,lm,Cc,Bs,Er,cr,xa,ud,Hl,$m,Sn,Rc,Sa,ms,Gl,zm,Dc,Ii,Wm,Ic,Ta,Ao,cd,fd,ys,Oc,qm,Yv,mt,lx,Hm,ux,Nw,rF,nF,cx,kw,fx,iF,sF,oF,hx,aF,dx,lF,uF,cF,px,Ug,At,mr,gx,uB,as,ho,hv,mx,Nc,kc,Ca,Tn,Xv,fF,um,Gm,dv,hd,yx,rr,bx,dd,pd,Vm,gd,Lw,$h,pv,Vl,xo,Lc,Pc,jg,zh,gv,md,yd,bd,wd,Oi,So,Ym,nr,Fr,ks,Pw,$g,St,wx,Xm,Km,Zm,Jm,Qm,ey,ty,ry,pr,vx,vd,_x,Ex,iV,hF,Ra,Kv,Ax,ww,Yr,_d,xs,dF,pF,gF,Mw,fc,ny,mv,xx,yv,bv,wv,Mc,Ed,Da,Ia,jn,Bc,Fc,lt,Mn,zg,Oh,Bw,Nh,mF,Tx,kh,Wg,qg,Cx,Hg,Sx,vv,_v,Ev,Av,Rx,Dx,Ix,Ox,Nx,Rh,fB,hB,kx,Ad,Yl,Lx,_w,gi,mi,Uc,Fs,jc,Oa,Zt,ir,Na,yi,iy,xd,$c,zc,ka,$n,To,sy,Mx,Px,fr,Pr,Us,Sd,Td,CT,xv,ls,Dn,cm,Fx,Ux,jx,dB,Zv,$x,pB,gB,lV,mB,vi,$A,Yi,Uh,zx,Sv,cV,fV,hV,vB,Xs,Wx,qx,Hx,RT,qh,oy,ay,_s,Cd,ly,Gx,Lh,uy,cy,fy,Rd,Vx,Xl,sr,Dd,Id,hy,Xx,Yx,Kx,Zx,Jx,Qx,eS,tS,zA,WA,rS,nS,iS,sS,gV,oS,aS,lS,Og,Ni,dy,uS,Tv,yV,_B,Kl,ki,py,gy,Wc,La,my,yy,qc,by,Od,Zl,Nd,wy,kd,Hc,vy,_y,Ld,Gc,Ey,Pd,Md,il,AF,xF,cS,Ki,Fw,fS,SF,TF,An,vp,bV,Jv,Qv,hS,Vc,Ay,xy,Sy,Ty,fm,dS,Pa,Yc,Gg,pS,Jl,js,Ma,Xc,e_,Kc,Zc,ei,Uw,RF,DF,Vg,Bd,jw,_r,_p,Ba,Co,Fd,Ud,Fa,Jc,Yg,gS,Ql,mS,eu,Qc,uc,yS,IF,OF,Li,ef,jd,un,Cy,$d,Ua,Ry,tu,$s,Dy,or,bS,wS,vS,sc,NF,Rl,di,hm,Ro,Iy,zd,Oy,cc,Cv,Rv,_S,Of,wV,Nf,vV,nm,tf,Wd,bs,Ny,ES,DT,Rr,AS,Xi,oc,kF,LF,dm,xS,rl,SS,TS,CS,Dv,RS,DS,ky,IS,pm,Pi,ru,t_,r_,qd,Hd,Mr,Do,nu,rf,Gd,Vd,Io,Mi,ja,$a,Br,za,iu,Ly,Wa,Yd,nf,su,mn,ou,Ct,$w,NS,kS,LS,zw,PS,PF,MF,BF,FF,Ww,qw,MS,OS,Iv,Py,BS,My,FS,By,US,Fy,Ov,jS,$S,Uy,sf,jy,zS,gm,Nv,WS,qS,HS,kv,$y,zy,VS,GS,of,af,Xd,au,Wy,lf,Bi,qy,Qa,Hw,YS,IT,Lv,xw,Fi,Hy,uf,Ui,Kr,UF,jF,$F,Gw,el,Vw,Yw,zF,KS,WF,wr,XS,at,ji,zs,Kd,Zd,Oo,Nt,cf,ff,Gy,Vy,Jd,Qd,lu,Yy,n_,i_,cn,Xg,qF,HF,GF,VF,YF,XF,ma,Pv,ep,hf,qa,Xy,$i,Ky,Gr,s_,KF,Mv,Zy,Jy,Qy,uu,Ws,ti,ZF,Xw,JF,QF,ZS,mm,e0,tp,JS,ym,QS,rp,t0,Ha,df,r0,bi,n0,i0,pf,zi,Wi,Cn,np,ip,zn,sp,ws,s0,Tt,eT,Kw,e3,t3,r3,tT,ac,As,Ph,n3,Zw,Jw,i3,s3,o3,a3,l3,qt,Bv,gf,Fv,qi,op,yn,mf,yf,$t,rT,nT,iT,Kg,u3,Qw,Zg,Mh,Pt,Uv,No,bn,wn,bf,ap,Kn,Rn,vs,wf,vf,_f,lp,ev,sT,Zn,o0,a0,Hi,ko,Lo,up,cp,Ef,In,pa,c3,f3,h3,kf,jv,o_,d3,Wh,oT,bm,Sw,kg,Af,Vt,aT,qs,p3,g3,lT,tv,m3,y3,b3,uT,cT,w3,Es,fT,hT,cu,Po,fu,xf,Ci,dT,Ar,vn,hu,Ga,du,fp,Va,Sf,Mo,Gi,hp,zt,Qg,em,rv,nv,iv,pT,sv,v3,Jg,Tf,dp,pu,gu,Ya,wi,mu,pp,gp,Hs,Xa,_n,Ka,yu,mp,ft,bu,hr,gT,_3,po,mT,yT,ov,Ls,$v,Gs,Jn,Cf,l0,a_,E3,Fo,bT,A3,wT,an,zv,S3=Jt(()=>{Oe();ke();Ne();Tw={};Tw.d=(r,e)=>{for(var t in e)Tw.o(e,t)&&!Tw.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};Tw.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);Qn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qA=[.001,0,0,.001,0,0],Cw=1.35,qG=.35,Qre=qG/Cw,Vi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},im="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},AB={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},HA={TRIANGLES:1,LATTICE:2,PATCH:3},on={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Dh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},u0={ERRORS:0,WARNINGS:1,INFOS:5},yp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Dg={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},xB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},l_=u0.WARNINGS;Lf=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})(),av=class extends Lf{constructor(e,t){super(e,"PasswordException"),this.code=t}},rm=class extends Lf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},bp=class extends Lf{constructor(e){super(e,"InvalidPDFException")}},Df=class extends Lf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}},GA=class extends Lf{constructor(e){super(e,"FormatError")}},Ys=class extends Lf{constructor(e){super(e,"AbortException")}};Ur=class{static get isLittleEndian(){return wt(this,"isLittleEndian",XG())}static get isEvalSupported(){return wt(this,"isEvalSupported",KG())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return wt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return wt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){let{platform:e,userAgent:t}=navigator;return wt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},FA=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),it=class{static makeHexColor(e,t,n){return`#${FA[e]}${FA[t]}${FA[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){let i=e[n],o=e[n+1];e[n]=i*t[0]+o*t[2]+t[4],e[n+1]=i*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5];for(let f=0;f<6;f+=2){let h=e[n+f],d=e[n+f+1];e[n+f]=h*i+d*s+u,e[n+f+1]=h*o+d*a+c}}static applyInverseTransform(e,t){let n=e[0],i=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5],f=e[0],h=e[1],d=e[2],m=e[3],b=i*f+u,v=b,w=i*d+u,y=w,_=a*h+c,E=_,S=a*m+c,A=S;if(o!==0||s!==0){let P=o*f,R=o*d,Y=s*h,te=s*m;b+=Y,y+=Y,w+=te,v+=te,_+=P,A+=P,S+=R,E+=R}n[0]=Math.min(n[0],b,w,v,y),n[1]=Math.min(n[1],_,S,E,A),n[2]=Math.max(n[2],b,w,v,y),n[3]=Math.max(n[3],_,S,E,A)}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){let n=e[0],i=e[1],o=e[2],s=e[3],a=n**2+i**2,u=n*o+i*s,c=o**2+s**2,f=(a+c)/2,h=Math.sqrt(f**2-(a*c-u**2));t[0]=Math.sqrt(f+h||1),t[1]=Math.sqrt(f-h||1)}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;let o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>s?null:[n,o,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,i),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,i)}static bezierBoundingBox(e,t,n,i,o,s,a,u,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,u),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,u),re(this,Ja,VA).call(this,e,n,o,a,t,i,s,u,3*(-e+3*(n-o)+a),6*(e-2*n+o),3*(n-e),c),re(this,Ja,VA).call(this,e,n,o,a,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),c)}};Ja=new WeakSet,Rw=function(e,t,n,i,o,s,a,u,c,f){if(c<=0||c>=1)return;let h=1-c,d=c*c,m=d*c,b=h*(h*(h*e+3*c*t)+3*d*n)+m*i,v=h*(h*(h*o+3*c*s)+3*d*a)+m*u;f[0]=Math.min(f[0],b),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],b),f[3]=Math.max(f[3],v)},VA=function(e,t,n,i,o,s,a,u,c,f,h,d){if(Math.abs(c)<1e-12){Math.abs(f)>=1e-12&&re(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,-h/f,d);return}let m=f**2-4*h*c;if(m<0)return;let b=Math.sqrt(m),v=2*c;re(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,(-f+b)/v,d),re(this,Ja,Rw).call(this,e,t,n,i,o,s,a,u,(-f-b)/v,d)},V(it,Ja);UA=null,iB=null;Bh="pdfjs_internal_id_";typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});sm=class r{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function i(o){if(!o)return;let s=null,a=o.name;if(a==="#text")s=o.value;else if(r.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&t.push({str:s}),!!o.children)for(let u of o.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},om=class{static setupStorage(e,t,n,i,o){let s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(let a of n.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{let u=a.target.options,c=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:o}){let{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(let[u,c]of Object.entries(s))if(c!=null)switch(u){case"class":c.length&&e.setAttribute(u,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,c)}a&&o.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,o=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:o,linkService:n});let a=o!=="richText",u=e.div;if(u.append(s),e.viewport){let h=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=h}a&&u.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let h=document.createTextNode(i.value);s.append(h),a&&sm.shouldBuildText(i.name)&&c.push(h)}return{textDivs:c}}let f=[[i,-1,s]];for(;f.length>0;){let[h,d,m]=f.at(-1);if(d+1===h.children.length){f.pop();continue}let b=h.children[++f.at(-1)[1]];if(b===null)continue;let{name:v}=b;if(v==="#text"){let y=document.createTextNode(b.value);c.push(y),m.append(y);continue}let w=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(m.append(w),b.attributes&&this.setAttributes({html:w,element:b,storage:t,intent:o,linkService:n}),b.children?.length>0)f.push([b,-1,w]);else if(b.value){let y=document.createTextNode(b.value);a&&sm.shouldBuildText(v)&&c.push(y),w.append(y)}}for(let h of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},ha="http://www.w3.org/2000/svg",lc=class lc{};Je(lc,"CSS",96),Je(lc,"PDF",72),Je(lc,"PDF_TO_CSS_UNITS",lc.CSS/lc.PDF);tl=lc;am=class r{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=s,n*=t;let u=(e[2]+e[0])/2,c=(e[3]+e[1])/2,f,h,d,m;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,h=0,d=0,m=1;break;case 90:f=0,h=1,d=1,m=0;break;case 270:f=0,h=-1,d=-1,m=0;break;case 0:f=1,h=0,d=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,m=-m);let b,v,w,y;f===0?(b=Math.abs(c-e[1])*n+o,v=Math.abs(u-e[0])*n+s,w=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(b=Math.abs(u-e[0])*n+o,v=Math.abs(c-e[1])*n+s,w=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[f*n,h*n,d*n,m*n,b-f*n*u-d*n*c,v-h*n*u-m*n*c],this.width=w,this.height=y}get rawDims(){let e=this.viewBox;return wt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){let n=[e,t];return it.applyTransform(n,this.transform),n}convertToViewportRectangle(e){let t=[e[0],e[1]];it.applyTransform(t,this.transform);let n=[e[2],e[3]];return it.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){let n=[e,t];return it.applyInverseTransform(n,this.transform),n}},wp=class extends Lf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};lv=class{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(e){e in this.started&&_t(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_t(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:i,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-i}ms
`);return e.join("")}};Rf=class{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,wm)||k(this,wm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=l(this,wm).exec(e);if(!t)return null;let n=parseInt(t[1],10),i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;let c=t[7]||"Z",f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=f,a+=h):c==="+"&&(s-=f,a-=h),new Date(Date.UTC(n,i,o,s,a,u))}};wm=new WeakMap,V(Rf,wm);Bo=class r{constructor(){let{pixelRatio:e}=r;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,o=-1){let s=1/0,a=1/0,u=1/0;n=r.capPixels(n,o),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(a=i/e,u=i/t);let c=Math.min(s,a,u);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){let n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}},uv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],YA=class{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},cv=class{static get commentForegroundColor(){let e=document.createElement("span");e.classList.add("comment","sidebar");let{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);let{color:n}=window.getComputedStyle(e);return e.remove(),wt(this,"commentForegroundColor",Ap(n))}};lB=new Map;ga=class ga{constructor(e){V(this,On);V(this,Dl,null);V(this,Il,null);V(this,us);V(this,cs,null);V(this,vm,null);V(this,Ol,null);V(this,Hh,null);V(this,Gh,null);k(this,us,e),l(ga,_m)||k(ga,_m,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){let e=k(this,Dl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=l(this,us)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Zi,{signal:t}),e.addEventListener("pointerdown",re(ga,Wv,LB),{signal:t}));let n=k(this,cs,document.createElement("div"));n.className="buttons",e.append(n);let i=l(this,us).toolbarPosition;if(i){let{style:o}=e,s=l(this,us)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,Dl)}hide(){l(this,Dl).classList.add("hidden"),l(this,Il)?.hideDropdown()}show(){l(this,Dl).classList.remove("hidden"),l(this,vm)?.shown(),l(this,Ol)?.shown()}addDeleteButton(){let{editorType:e,_uiManager:t}=l(this,us),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(ga,_m)[e]),re(this,On,Ih).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,cs).append(n)}async addAltText(e){let t=await e.render();re(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg)),k(this,vm,e)}addComment(e,t=null){if(l(this,Ol))return;let n=e.renderForToolbar();if(!n)return;re(this,On,Ih).call(this,n);let i=k(this,Hh,l(this,On,Pg));t?(l(this,cs).insertBefore(n,t),l(this,cs).insertBefore(i,t)):l(this,cs).append(n,i),k(this,Ol,e),e.toolbar=this}addColorPicker(e){if(l(this,Il))return;k(this,Il,e);let t=e.renderButton();re(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg))}async addEditSignatureButton(e){let t=k(this,Gh,await e.renderEditButton(l(this,us)));re(this,On,Ih).call(this,t),l(this,cs).append(t,l(this,On,Pg))}removeButton(e){e==="comment"&&(l(this,Ol)?.removeToolbarCommentButton(),k(this,Ol,null),l(this,Hh)?.remove(),k(this,Hh,null))}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;let i=l(this,cs).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){l(this,Gh)&&(l(this,Gh).title=e)}remove(){l(this,Dl).remove(),l(this,Il)?.destroy(),k(this,Il,null)}};Dl=new WeakMap,Il=new WeakMap,us=new WeakMap,cs=new WeakMap,vm=new WeakMap,Ol=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,_m=new WeakMap,Wv=new WeakSet,LB=function(e){e.stopPropagation()},On=new WeakSet,PB=function(e){l(this,us)._focusEventsAllowed=!1,Cr(e)},MB=function(e){l(this,us)._focusEventsAllowed=!0,Cr(e)},Ih=function(e){let t=l(this,us)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",re(this,On,PB).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",re(this,On,MB).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Zi,{signal:t}),!0)},Pg=function(){let e=document.createElement("div");return e.className="divider",e},V(ga,Wv),V(ga,_m,null);KA=ga,ZA=class{constructor(e){V(this,nl);V(this,Em,null);V(this,hc,null);V(this,ya);k(this,ya,e)}show(e,t,n){let[i,o]=re(this,nl,FB).call(this,t,n),{style:s}=l(this,hc)||k(this,hc,re(this,nl,BB).call(this));e.append(l(this,hc)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,hc).remove()}};Em=new WeakMap,hc=new WeakMap,ya=new WeakMap,nl=new WeakSet,BB=function(){let e=k(this,hc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");let t=l(this,ya)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Zi,{signal:t});let n=k(this,Em,document.createElement("div"));return n.className="buttons",e.append(n),l(this,ya).hasCommentManager()&&re(this,nl,JA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,ya).commentSelection("floating_button")}),re(this,nl,JA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,ya).highlightSelection("floating_button")}),e},FB=function(e,t){let n=0,i=0;for(let o of e){let s=o.y+o.height;if(s<n)continue;let a=o.x+(t?o.width:0);if(s>n){i=a,n=s;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]},JA=function(e,t,n,i){let o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);let s=document.createElement("span");o.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);let a=l(this,ya)._signal;a instanceof AbortSignal&&!a.aborted&&(o.addEventListener("contextmenu",Zi,{signal:a}),o.addEventListener("click",i,{signal:a})),l(this,Em).append(o)};tr=class tr{static initializeAndAddPointerId(e){(l(tr,pc)||k(tr,pc,new Set)).add(e)}static setPointer(e,t){l(tr,dc)||k(tr,dc,t),l(tr,gc)??k(tr,gc,e)}static setTimeStamp(e){k(tr,Vh,e)}static isSamePointerId(e){return l(tr,dc)===e}static isSamePointerIdOrRemove(e){return l(tr,dc)===e?!0:(l(tr,pc)?.delete(e),!1)}static isSamePointerType(e){return l(tr,gc)===e}static isInitializedAndDifferentPointerType(e){return l(tr,gc)!==null&&!tr.isSamePointerType(e)}static isSameTimeStamp(e){return l(tr,Vh)===e}static isUsingMultiplePointers(){return l(tr,pc)?.size>=1}static clearPointerType(){k(tr,gc,null)}static clearPointerIds(){k(tr,dc,NaN),k(tr,pc,null)}static clearTimeStamp(){k(tr,Vh,NaN)}};dc=new WeakMap,pc=new WeakMap,Vh=new WeakMap,gc=new WeakMap,V(tr,dc,NaN),V(tr,pc,null),V(tr,Vh,NaN),V(tr,gc,null);Bn=tr,QA=class{constructor(){V(this,qv,0)}get id(){return`${im}${tn(this,qv)._++}`}};qv=new WeakMap;ST=class ST{constructor(){V(this,Xh);V(this,Yh,ET());V(this,Am,0);V(this,Fn,null)}static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;let o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async getFromFile(e){let{lastModified:t,name:n,size:i,type:o}=e;return re(this,Xh,Dw).call(this,`${t}_${n}_${i}_${o}`,e)}async getFromUrl(e){return re(this,Xh,Dw).call(this,e,e)}async getFromBlob(e,t){let n=await t;return re(this,Xh,Dw).call(this,e,n)}async getFromId(e){l(this,Fn)||k(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Fn)||k(this,Fn,new Map);let n=l(this,Fn).get(e);if(n?.bitmap)return n.refCounter+=1,n;let i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Yh)}_${tn(this,Am)._++}`,refCounter:1,isSvg:!1},l(this,Fn).set(e,n),l(this,Fn).set(n.id,n),n}getSvgUrl(e){let t=l(this,Fn).get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){l(this,Fn)||k(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Yh)}_`)}};Yh=new WeakMap,Am=new WeakMap,Fn=new WeakMap,Xh=new WeakSet,Dw=async function(e,t){l(this,Fn)||k(this,Fn,new Map);let n=l(this,Fn).get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Yh)}_${tn(this,Am)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await Ep(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){let o=ST._isSVGFittingCanvas,s=new FileReader,a=new Image,u=new Promise((c,f)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},s.onload=async()=>{let h=n.svgUrl=s.result;a.src=await o?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=s.onerror=f});s.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){_t(i),n=null}return l(this,Fn).set(e,n),n&&l(this,Fn).set(n.id,n),n};ex=ST,tx=class{constructor(e=128){V(this,Hr,[]);V(this,Nl,!1);V(this,xm);V(this,Sr,-1);k(this,xm,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(i&&e(),l(this,Nl))return;let u={cmd:e,undo:t,post:n,type:o};if(l(this,Sr)===-1){l(this,Hr).length>0&&(l(this,Hr).length=0),k(this,Sr,0),l(this,Hr).push(u);return}if(s&&l(this,Hr)[l(this,Sr)].type===o){a&&(u.undo=l(this,Hr)[l(this,Sr)].undo),l(this,Hr)[l(this,Sr)]=u;return}let c=l(this,Sr)+1;c===l(this,xm)?l(this,Hr).splice(0,1):(k(this,Sr,c),c<l(this,Hr).length&&l(this,Hr).splice(c)),l(this,Hr).push(u)}undo(){if(l(this,Sr)===-1)return;k(this,Nl,!0);let{undo:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),k(this,Nl,!1),k(this,Sr,l(this,Sr)-1)}redo(){if(l(this,Sr)<l(this,Hr).length-1){k(this,Sr,l(this,Sr)+1),k(this,Nl,!0);let{cmd:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),k(this,Nl,!1)}}hasSomethingToUndo(){return l(this,Sr)!==-1}hasSomethingToRedo(){return l(this,Sr)<l(this,Hr).length-1}cleanType(e){if(l(this,Sr)!==-1){for(let t=l(this,Sr);t>=0;t--)if(l(this,Hr)[t].type!==e){l(this,Hr).splice(t+1,l(this,Sr)-t),k(this,Sr,t);return}l(this,Hr).length=0,k(this,Sr,-1)}}destroy(){k(this,Hr,null)}};Hr=new WeakMap,Nl=new WeakMap,xm=new WeakMap,Sr=new WeakMap;If=class{constructor(e){V(this,Hv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=Ur.platform;for(let[n,i,o={}]of e)for(let s of n){let a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(re(this,Hv,jB).call(this,t));if(!n)return;let{callback:i,options:{bubbles:o=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),o||Cr(t))}};Hv=new WeakSet,jB=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t};Gv=class Gv{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return tV(e),wt(this,"_colors",e)}convert(e){let t=Ap(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,i]of this._colors)if(i.every((o,s)=>o===t[s]))return Gv._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?it.makeHexColor(...t):e}};Je(Gv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));rx=Gv,jh=class jh{constructor(e,t,n,i,o,s,a,u,c,f,h,d,m,b,v,w){V(this,nt);V(this,Kh,new AbortController);V(this,Ri,null);V(this,Zh,null);V(this,Lr,new Map);V(this,ln,new Map);V(this,Jh,null);V(this,fs,null);V(this,Qh,null);V(this,hs,new tx);V(this,Un,null);V(this,kl,null);V(this,Ll,null);V(this,ed,0);V(this,Pl,new Set);V(this,go,null);V(this,ds,null);V(this,mc,new Set);Je(this,"_editorUndoBar",null);V(this,Sm,!1);V(this,Tm,!1);V(this,td,!1);V(this,Cm,null);V(this,mo,null);V(this,Ml,null);V(this,rd,null);V(this,Bl,!1);V(this,yo,null);V(this,Vv,new QA);V(this,Fl,!1);V(this,nd,!1);V(this,Rm,!1);V(this,Ul,null);V(this,yc,null);V(this,id,null);V(this,jl,null);V(this,Dm,null);V(this,Xr,vt.NONE);V(this,Kt,new Set);V(this,ba,null);V(this,$l,null);V(this,zl,null);V(this,Im,null);V(this,sd,null);V(this,Om,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});V(this,Wl,[0,0]);V(this,bo,null);V(this,wa,null);V(this,Nm,null);V(this,km,null);V(this,ps,null);let y=this._signal=l(this,Kh).signal;k(this,wa,e),k(this,Nm,t),k(this,km,n),k(this,Jh,i),k(this,Un,o),k(this,$l,s),k(this,sd,u),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:y}),window.addEventListener("pointerdown",()=>{k(this,nd,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{k(this,nd,!1)},{capture:!0,signal:y}),re(this,nt,WB).call(this),re(this,nt,XB).call(this),re(this,nt,ix).call(this),k(this,fs,u.annotationStorage),k(this,Cm,u.filterFactory),k(this,zl,c),k(this,rd,f||null),k(this,Sm,h),k(this,Tm,d),k(this,td,m),k(this,Dm,b||null),this.viewParameters={realScale:tl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1,o?.setSidebarUiManager(this)}static get _keyboardManager(){let e=jh.prototype,t=s=>l(s,wa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:a})=>{if(a instanceof HTMLInputElement){let{type:u}=a;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){l(this,ps)?.resolve(),k(this,ps,null),l(this,Kh)?.abort(),k(this,Kh,null),this._signal=null;for(let e of l(this,ln).values())e.destroy();l(this,ln).clear(),l(this,Lr).clear(),l(this,mc).clear(),l(this,jl)?.clear(),k(this,Ri,null),l(this,Kt).clear(),l(this,hs).destroy(),l(this,Jh)?.destroy(),l(this,Un)?.destroy(),l(this,$l)?.destroy(),l(this,yo)?.hide(),k(this,yo,null),l(this,id)?.destroy(),k(this,id,null),k(this,Zh,null),l(this,mo)&&(clearTimeout(l(this,mo)),k(this,mo,null)),l(this,bo)&&(clearTimeout(l(this,bo)),k(this,bo,null)),this._editorUndoBar?.destroy(),k(this,sd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Dm)}get useNewAltTextFlow(){return l(this,Tm)}get useNewAltTextWhenAddingImage(){return l(this,td)}get hcmFilter(){return wt(this,"hcmFilter",l(this,zl)?l(this,Cm).addHCMFilter(l(this,zl).foreground,l(this,zl).background):"none")}get direction(){return wt(this,"direction",getComputedStyle(l(this,wa)).direction)}get _highlightColors(){return wt(this,"_highlightColors",l(this,rd)?new Map(l(this,rd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return wt(this,"highlightColors",null);let t=new Map,n=!!l(this,zl);for(let[i,o]of e){let s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),o);continue}!n&&!s&&t.set(i,o)}return wt(this,"highlightColors",t)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(this,Ll,e)}setMainHighlightColorPicker(e){k(this,id,e)}editAltText(e,t=!1){l(this,Jh)?.editAltText(this,e,t)}hasCommentManager(){return!!l(this,Un)}editComment(e,t,n,i){l(this,Un)?.showDialog(this,e,t,n,i)}selectComment(e,t){l(this,ln).get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){l(this,Un)?.updateComment(e.getData())}updatePopupColor(e){l(this,Un)?.updatePopupColor(e)}removeComment(e){l(this,Un)?.removeComments([e.uid])}toggleComment(e,t,n=void 0){l(this,Un)?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&l(this,Un)?.makeCommentColor(e,t)||null}getCommentDialogElement(){return l(this,Un)?.dialogElement||null}async waitForEditorsRendered(e){if(l(this,ln).has(e-1))return;let{resolve:t,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){l(this,$l)?.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,$l)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&k(this,td,t)}onPageChanging({pageNumber:e}){k(this,ed,e-1)}focusMainContainer(){l(this,wa).focus()}findParent(e,t){for(let n of l(this,ln).values()){let{x:i,y:o,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=o&&t<=o+a)return n}return null}disableUserSelect(e=!1){l(this,Nm).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,mc).add(e)}removeShouldRescale(e){l(this,mc).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*tl.PDF_TO_CSS_UNITS;for(let t of l(this,mc))t.onScaleChanging();l(this,Ll)?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a}=n,u=n.toString(),f=re(this,nt,Iw).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(f);if(!h)return;n.empty();let d=re(this,nt,nx).call(this,f),m=l(this,Xr)===vt.NONE,b=()=>{let v=d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a,text:u});m&&this.showAllEditors("highlight",!0,!0),t&&v?.editComment()};if(m){this.switchToMode(vt.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,fs))return null;let t=`${im}${e}`,n=l(this,fs).getRawValue(t);return n&&l(this,fs).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&l(this,fs)&&!l(this,fs).has(e.id)&&l(this,fs).setValue(e.id,e)}a11yAlert(e,t=null){let n=l(this,km);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Bl)&&(k(this,Bl,!1),re(this,nt,Mg).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of l(this,Kt))if(t.div.contains(e)){k(this,yc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,yc))return;let[e,t]=l(this,yc);k(this,yc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){re(this,nt,ix).call(this),this.setEditingState(!0)}removeEditListeners(){re(this,nt,GB).call(this),this.setEditingState(!1)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let n of l(this,ds))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let n of l(this,ds))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),l(this,Ri)?.commitOrRemove(),!this.hasSelection)return;let t=[];for(let n of l(this,Kt)){let i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let o of t.items)for(let s of l(this,ds))if(s.isHandlingMimeForPasting(o.type)){s.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){_t(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let i=this.currentLayer;try{let o=[];for(let u of n){let c=await i.deserialize(u);if(!c)return;o.push(c)}let s=()=>{for(let u of o)re(this,nt,sx).call(this,u);re(this,nt,ox).call(this,o)},a=()=>{for(let u of o)u.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(o){_t(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Xr)!==vt.NONE&&!this.isEditorHandlingKeyboard&&jh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Bl)&&(k(this,Bl,!1),re(this,nt,Mg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(re(this,nt,qB).call(this),re(this,nt,VB).call(this),re(this,nt,Yn).call(this,{isEditing:l(this,Xr)!==vt.NONE,isEmpty:re(this,nt,Bg).call(this),hasSomethingToUndo:l(this,hs).hasSomethingToUndo(),hasSomethingToRedo:l(this,hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(re(this,nt,HB).call(this),re(this,nt,YB).call(this),re(this,nt,Yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ds)){k(this,ds,e);for(let t of l(this,ds))re(this,nt,da).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Vv).id}get currentLayer(){return l(this,ln).get(l(this,ed))}getLayer(e){return l(this,ln).get(e)}get currentPageIndex(){return l(this,ed)}addLayer(e){l(this,ln).set(e.pageIndex,e),l(this,Fl)?e.enable():e.disable()}removeLayer(e){l(this,ln).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,o=!1,s=!1){if(l(this,Xr)!==e&&!(l(this,ps)&&(await l(this,ps).promise,!l(this,ps)))){if(k(this,ps,Promise.withResolvers()),l(this,Ll)?.commitOrRemove(),l(this,Xr)===vt.POPUP&&l(this,Un)?.hideSidebar(),l(this,Un)?.destroyPopup(),k(this,Xr,e),e===vt.NONE){this.setEditingState(!1),re(this,nt,ZB).call(this);for(let a of l(this,Lr).values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),l(this,ps).resolve();return}for(let a of l(this,Lr).values())a.addStandaloneCommentButton();e===vt.SIGNATURE&&await l(this,$l)?.loadSignatures(),n&&Bn.clearPointerType(),this.setEditingState(!0),await re(this,nt,KB).call(this),this.unselectAll();for(let a of l(this,ln).values())a.updateMode(e);if(e===vt.POPUP){l(this,Zh)||k(this,Zh,await l(this,sd).getAnnotationsByType(new Set(l(this,ds).map(c=>c._editorType))));let a=new Set,u=[];for(let c of l(this,Lr).values()){let{annotationElementId:f,hasComment:h,deleted:d}=c;f&&a.add(f),h&&!d&&u.push(c.getData())}for(let c of l(this,Zh)){let{id:f,popupRef:h,contentsObj:d}=c;h&&d?.str&&!a.has(f)&&!l(this,Pl).has(f)&&u.push(c)}l(this,Un)?.showSidebar(u)}if(!t){i&&this.addNewEditorFromKeyboard(),l(this,ps).resolve();return}for(let a of l(this,Lr).values())a.uid===t?(this.setSelected(a),s?a.editComment():o?a.enterInEditMode():a.focus()):a.unselect();l(this,ps).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Xr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,ds)){switch(e){case Mt.CREATE:this.currentLayer.addNewEditor(t);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Im)||k(this,Im,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(let n of l(this,Kt))n.updateParams(e,t);else for(let n of l(this,ds))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(let o of l(this,Lr).values())o.editorType===e&&o.show(t);(l(this,Im)?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&re(this,nt,da).call(this,[[Mt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Rm)!==e){k(this,Rm,e);for(let t of l(this,ln).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(let t of l(this,Lr).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,Lr).get(e)}addEditor(e){l(this,Lr).set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(l(this,mo)&&clearTimeout(l(this,mo)),k(this,mo,setTimeout(()=>{this.focusMainContainer(),k(this,mo,null)},0))),l(this,Lr).delete(e.id),e.annotationElementId&&l(this,jl)?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!l(this,Pl).has(e.annotationElementId))&&l(this,fs)?.remove(e.id)}addDeletedAnnotationElement(e){l(this,Pl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Pl).has(e)}removeDeletedAnnotationElement(e){l(this,Pl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Ri)!==e&&(k(this,Ri,e),e&&re(this,nt,da).call(this,e.propertiesToUpdate))}updateUI(e){l(this,nt,JB)===e&&re(this,nt,da).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){re(this,nt,da).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Kt).has(e)){l(this,Kt).delete(e),e.unselect(),re(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Kt).add(e),e.select(),re(this,nt,da).call(this,e.propertiesToUpdate),re(this,nt,Yn).call(this,{hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),l(this,Ll)?.commitOrRemove();for(let t of l(this,Kt))t!==e&&t.unselect();l(this,Kt).clear(),l(this,Kt).add(e),e.select(),re(this,nt,da).call(this,e.propertiesToUpdate),re(this,nt,Yn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Kt).has(e)}get firstSelectedEditor(){return l(this,Kt).values().next().value}unselect(e){e.unselect(),l(this,Kt).delete(e),re(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Kt).size!==0}get isEnterHandled(){return l(this,Kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,hs).undo(),re(this,nt,Yn).call(this,{hasSomethingToUndo:l(this,hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:re(this,nt,Bg).call(this)}),this._editorUndoBar?.hide()}redo(){l(this,hs).redo(),re(this,nt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,hs).hasSomethingToRedo(),isEmpty:re(this,nt,Bg).call(this)})}addCommands(e){l(this,hs).add(e),re(this,nt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:re(this,nt,Bg).call(this)})}cleanUndoStack(e){l(this,hs).cleanType(e)}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let t=e?[e]:[...l(this,Kt)],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(let o of t)o.remove()},i=()=>{for(let o of t)re(this,nt,sx).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){l(this,Ri)?.commitOrRemove()}hasSomethingToControl(){return l(this,Ri)||this.hasSelection}selectAll(){for(let e of l(this,Kt))e.commit();re(this,nt,ox).call(this,l(this,Lr).values())}unselectAll(){if(!(l(this,Ri)&&(l(this,Ri).commitOrRemove(),l(this,Xr)!==vt.NONE))&&!l(this,Ll)?.commitOrRemove()&&this.hasSelection){for(let e of l(this,Kt))e.unselect();l(this,Kt).clear(),re(this,nt,Yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Wl)[0]+=e,l(this,Wl)[1]+=t;let[i,o]=l(this,Wl),s=[...l(this,Kt)],a=1e3;l(this,bo)&&clearTimeout(l(this,bo)),k(this,bo,setTimeout(()=>{k(this,bo,null),l(this,Wl)[0]=l(this,Wl)[1]=0,this.addCommands({cmd:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(i,o),u.translationDone())},undo:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(-i,-o),u.translationDone())},mustExec:!1})},a));for(let u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,go,new Map);for(let e of l(this,Kt))l(this,go).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,go))return!1;this.disableUserSelect(!1);let e=l(this,go);k(this,go,null);let t=!1;for(let[{x:i,y:o,pageIndex:s},a]of e)a.newX=i,a.newY=o,a.newPageIndex=s,t||(t=i!==a.savedX||o!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;let n=(i,o,s,a)=>{if(l(this,Lr).has(i.id)){let u=l(this,ln).get(a);u?i._setParentAndPosition(u,o,s):(i.pageIndex=a,i.x=o,i.y=s)}};return this.addCommands({cmd:()=>{for(let[i,{newX:o,newY:s,newPageIndex:a}]of e)n(i,o,s,a)},undo:()=>{for(let[i,{savedX:o,savedY:s,savedPageIndex:a}]of e)n(i,o,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,go))for(let n of l(this,go).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||l(this,Kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Ri)===e}getActive(){return l(this,Ri)}getMode(){return l(this,Xr)}isEditingMode(){return l(this,Xr)!==vt.NONE}get imageManager(){return wt(this,"imageManager",new ex)}getSelectionBoxes(e){if(!e)return null;let t=document.getSelection();for(let c=0,f=t.rangeCount;c<f;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;let{x:n,y:i,width:o,height:s}=e.getBoundingClientRect(),a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,f,h,d)=>({x:(f-i)/s,y:1-(c+h-n)/o,width:d/s,height:h/o});break;case"180":a=(c,f,h,d)=>({x:1-(c+h-n)/o,y:1-(f+d-i)/s,width:h/o,height:d/s});break;case"270":a=(c,f,h,d)=>({x:1-(f+d-i)/s,y:(c-n)/o,width:d/s,height:h/o});break;default:a=(c,f,h,d)=>({x:(c-n)/o,y:(f-i)/s,width:h/o,height:d/s});break}let u=[];for(let c=0,f=t.rangeCount;c<f;c++){let h=t.getRangeAt(c);if(!h.collapsed)for(let{x:d,y:m,width:b,height:v}of h.getClientRects())b===0||v===0||u.push(a(d,m,b,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Qh)||k(this,Qh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){l(this,Qh)?.delete(e)}renderAnnotationElement(e){let t=l(this,Qh)?.get(e.data.id);if(!t)return;let n=l(this,fs).getRawValue(t);n&&(l(this,Xr)===vt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){let i=l(this,jl)?.get(e);i&&(i.setCanvas(t,n),l(this,jl).delete(e))}addMissingCanvas(e,t){(l(this,jl)||k(this,jl,new Map)).set(e,t)}};Kh=new WeakMap,Ri=new WeakMap,Zh=new WeakMap,Lr=new WeakMap,ln=new WeakMap,Jh=new WeakMap,fs=new WeakMap,Qh=new WeakMap,hs=new WeakMap,Un=new WeakMap,kl=new WeakMap,Ll=new WeakMap,ed=new WeakMap,Pl=new WeakMap,go=new WeakMap,ds=new WeakMap,mc=new WeakMap,Sm=new WeakMap,Tm=new WeakMap,td=new WeakMap,Cm=new WeakMap,mo=new WeakMap,Ml=new WeakMap,rd=new WeakMap,Bl=new WeakMap,yo=new WeakMap,Vv=new WeakMap,Fl=new WeakMap,nd=new WeakMap,Rm=new WeakMap,Ul=new WeakMap,yc=new WeakMap,id=new WeakMap,jl=new WeakMap,Dm=new WeakMap,Xr=new WeakMap,Kt=new WeakMap,ba=new WeakMap,$l=new WeakMap,zl=new WeakMap,Im=new WeakMap,sd=new WeakMap,Om=new WeakMap,Wl=new WeakMap,bo=new WeakMap,wa=new WeakMap,Nm=new WeakMap,km=new WeakMap,ps=new WeakMap,nt=new WeakSet,Iw=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},nx=function(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let n of l(this,ln).values())if(n.hasTextLayer(e))return n;return null},$B=function(){let e=document.getSelection();if(!e||e.isCollapsed)return;let n=re(this,nt,Iw).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,yo)||k(this,yo,new ZA(this)),l(this,yo).show(n,i,this.direction==="ltr"))},zB=function(){let e=document.getSelection();if(!e||e.isCollapsed){l(this,ba)&&(l(this,yo)?.hide(),k(this,ba,null),re(this,nt,Yn).call(this,{hasSelectedText:!1}));return}let{anchorNode:t}=e;if(t===l(this,ba))return;let i=re(this,nt,Iw).call(this,e).closest(".textLayer");if(!i){l(this,ba)&&(l(this,yo)?.hide(),k(this,ba,null),re(this,nt,Yn).call(this,{hasSelectedText:!1}));return}if(l(this,yo)?.hide(),k(this,ba,t),re(this,nt,Yn).call(this,{hasSelectedText:!0}),!(l(this,Xr)!==vt.HIGHLIGHT&&l(this,Xr)!==vt.NONE)&&(l(this,Xr)===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,Bl,this.isShiftKeyDown),!this.isShiftKeyDown)){let o=l(this,Xr)===vt.HIGHLIGHT?re(this,nt,nx).call(this,i):null;if(o?.toggleDrawing(),l(this,nd)){let s=new AbortController,a=this.combinedSignal(s),u=c=>{c.type==="pointerup"&&c.button!==0||(s.abort(),o?.toggleDrawing(!0),c.type==="pointerup"&&re(this,nt,Mg).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}else o?.toggleDrawing(!0),re(this,nt,Mg).call(this,"main_toolbar")}},Mg=function(e=""){l(this,Xr)===vt.HIGHLIGHT?this.highlightSelection(e):l(this,Sm)&&re(this,nt,$B).call(this)},WB=function(){document.addEventListener("selectionchange",re(this,nt,zB).bind(this),{signal:this._signal})},qB=function(){if(l(this,Ml))return;k(this,Ml,new AbortController);let e=this.combinedSignal(l(this,Ml));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},HB=function(){l(this,Ml)?.abort(),k(this,Ml,null)},ix=function(){if(l(this,Ul))return;k(this,Ul,new AbortController);let e=this.combinedSignal(l(this,Ul));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},GB=function(){l(this,Ul)?.abort(),k(this,Ul,null)},VB=function(){if(l(this,kl))return;k(this,kl,new AbortController);let e=this.combinedSignal(l(this,kl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},YB=function(){l(this,kl)?.abort(),k(this,kl,null)},XB=function(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Yn=function(e){Object.entries(e).some(([n,i])=>l(this,Om)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Om),e)}),l(this,Xr)===vt.HIGHLIGHT&&e.hasSelectedEditor===!1&&re(this,nt,da).call(this,[[Mt.HIGHLIGHT_FREE,!0]]))},da=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},KB=async function(){if(!l(this,Fl)){k(this,Fl,!0);let e=[];for(let t of l(this,ln).values())e.push(t.enable());await Promise.all(e);for(let t of l(this,Lr).values())t.enable()}},ZB=function(){if(this.unselectAll(),l(this,Fl)){k(this,Fl,!1);for(let e of l(this,ln).values())e.disable();for(let e of l(this,Lr).values())e.disable()}},sx=function(e){let t=l(this,ln).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},JB=function(){let e=null;for(e of l(this,Kt));return e},Bg=function(){if(l(this,Lr).size===0)return!0;if(l(this,Lr).size===1)for(let e of l(this,Lr).values())return e.isEmpty();return!1},ox=function(e){for(let t of l(this,Kt))t.unselect();l(this,Kt).clear();for(let t of e)t.isEmpty()||(l(this,Kt).add(t),t.select());re(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection})},Je(jh,"TRANSLATE_SMALL",1),Je(jh,"TRANSLATE_BIG",10);vu=jh,Xn=class Xn{constructor(e){V(this,Vs);V(this,gn,null);V(this,wo,!1);V(this,Ps,null);V(this,od,null);V(this,vo,null);V(this,Di,null);V(this,ad,!1);V(this,_o,null);V(this,pi,null);V(this,va,null);V(this,bc,null);V(this,Eo,!1);k(this,pi,e),k(this,Eo,e._uiManager.useNewAltTextFlow),l(Xn,ql)||k(Xn,ql,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Xn._l10n??(Xn._l10n=e)}async render(){let e=k(this,Ps,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=k(this,od,document.createElement("span"));e.append(t),l(this,Eo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Xn,ql).missing),t.setAttribute("data-l10n-id",l(Xn,ql)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=l(this,pi)._uiManager._signal;e.addEventListener("contextmenu",Zi,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),l(this,pi)._uiManager.editAltText(l(this,pi)),l(this,Eo)&&l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Vs,Fg)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(k(this,ad,!0),i(o))},{signal:n}),await re(this,Vs,Ow).call(this),e}finish(){l(this,Ps)&&(l(this,Ps).focus({focusVisible:l(this,ad)}),k(this,ad,!1))}isEmpty(){return l(this,Eo)?l(this,gn)===null:!l(this,gn)&&!l(this,wo)}hasData(){return l(this,Eo)?l(this,gn)!==null||!!l(this,va):this.isEmpty()}get guessedText(){return l(this,va)}async setGuessedText(e){l(this,gn)===null&&(k(this,va,e),k(this,bc,await Xn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),re(this,Vs,Ow).call(this))}toggleAltTextBadge(e=!1){if(!l(this,Eo)||l(this,gn)){l(this,_o)?.remove(),k(this,_o,null);return}if(!l(this,_o)){let t=k(this,_o,document.createElement("div"));t.className="noAltTextBadge",l(this,pi).div.append(t)}l(this,_o).classList.toggle("hidden",!e)}serialize(e){let t=l(this,gn);return!e&&l(this,va)===t&&(t=l(this,bc)),{altText:t,decorative:l(this,wo),guessedText:l(this,va),textWithDisclaimer:l(this,bc)}}get data(){return{altText:l(this,gn),decorative:l(this,wo)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(k(this,va,n),k(this,bc,i)),!(l(this,gn)===e&&l(this,wo)===t)&&(o||(k(this,gn,e),k(this,wo,t)),re(this,Vs,Ow).call(this))}toggle(e=!1){l(this,Ps)&&(!e&&l(this,Di)&&(clearTimeout(l(this,Di)),k(this,Di,null)),l(this,Ps).disabled=!e)}shown(){l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Vs,Fg)}})}destroy(){l(this,Ps)?.remove(),k(this,Ps,null),k(this,od,null),k(this,vo,null),l(this,_o)?.remove(),k(this,_o,null)}};gn=new WeakMap,wo=new WeakMap,Ps=new WeakMap,od=new WeakMap,vo=new WeakMap,Di=new WeakMap,ad=new WeakMap,_o=new WeakMap,pi=new WeakMap,va=new WeakMap,bc=new WeakMap,Eo=new WeakMap,ql=new WeakMap,Vs=new WeakSet,Fg=function(){return l(this,gn)&&"added"||l(this,gn)===null&&this.guessedText&&"review"||"missing"},Ow=async function(){let e=l(this,Ps);if(!e)return;if(l(this,Eo)){if(e.classList.toggle("done",!!l(this,gn)),e.setAttribute("data-l10n-id",l(Xn,ql)[l(this,Vs,Fg)]),l(this,od)?.setAttribute("data-l10n-id",l(Xn,ql)[`${l(this,Vs,Fg)}-label`]),!l(this,gn)){l(this,vo)?.remove();return}}else{if(!l(this,gn)&&!l(this,wo)){e.classList.remove("done"),l(this,vo)?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,vo);if(!t){k(this,vo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,pi).id}`;let i=100,o=l(this,pi)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Di)),k(this,Di,null)},{once:!0}),e.addEventListener("mouseenter",()=>{k(this,Di,setTimeout(()=>{k(this,Di,null),l(this,vo).classList.add("show"),l(this,pi)._reportTelemetry({action:"alt_text_tooltip"})},i))},{signal:o}),e.addEventListener("mouseleave",()=>{l(this,Di)&&(clearTimeout(l(this,Di)),k(this,Di,null)),l(this,vo)?.classList.remove("show")},{signal:o})}l(this,wo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,gn)),t.parentNode||e.append(t),l(this,pi).getElementForAltText()?.setAttribute("aria-describedby",t.id)},V(Xn,ql,null),Je(Xn,"_l10n",null);fv=Xn,Fh=class{constructor(e){V(this,Pm);V(this,xn,null);V(this,gs,null);V(this,wc,!1);V(this,gr,null);V(this,Lm,null);V(this,vc,null);V(this,Ms,null);V(this,_c,null);V(this,Ec,!1);V(this,Ac,null);k(this,gr,e)}renderForToolbar(){let e=k(this,gs,document.createElement("button"));return e.className="comment",re(this,Pm,ax).call(this,e,!1)}renderForStandalone(){let e=k(this,xn,document.createElement("button"));e.className="annotationCommentButton";let t=l(this,gr).commentButtonPosition;if(t){let{style:n}=e;n.insetInlineEnd=`calc(${100*(l(this,gr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;let i=l(this,gr).commentButtonColor;i&&(n.backgroundColor=i)}return re(this,Pm,ax).call(this,e,!0)}focusButton(){setTimeout(()=>{(l(this,xn)??l(this,gs))?.focus()},0)}onUpdatedColor(){if(!l(this,xn))return;let e=l(this,gr).commentButtonColor;e&&(l(this,xn).style.backgroundColor=e),l(this,gr)._uiManager.updatePopupColor(l(this,gr))}get commentButtonWidth(){return(l(this,xn)?.getBoundingClientRect().width??0)/l(this,gr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Ac))return l(this,Ac);if(!l(this,xn))return null;let{x:e,y:t,height:n}=l(this,xn).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,gr).parent.boundingClientRect;return[(e-i)/s,(t+n-o)/a]}set commentPopupPositionInLayer(e){k(this,Ac,e)}hasDefaultPopupPosition(){return l(this,Ac)===null}removeStandaloneCommentButton(){l(this,xn)?.remove(),k(this,xn,null)}removeToolbarCommentButton(){l(this,gs)?.remove(),k(this,gs,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,xn)&&(l(this,xn).classList.toggle("selected",e),l(this,xn).ariaExpanded=t)}edit(e){let t=this.commentPopupPositionInLayer,n,i;if(t)[n,i]=t;else{[n,i]=l(this,gr).commentButtonPosition;let{width:f,height:h,x:d,y:m}=l(this,gr);n=d+n*f,i=m+i*h}let o=l(this,gr).parent.boundingClientRect,{x:s,y:a,width:u,height:c}=o;l(this,gr)._uiManager.editComment(l(this,gr),s+n*u,a+i*c,{...e,parentDimensions:o})}finish(){l(this,gs)&&(l(this,gs).focus({focusVisible:l(this,wc)}),k(this,wc,!1))}isDeleted(){return l(this,Ec)||l(this,Ms)===""}isEmpty(){return l(this,Ms)===null}hasBeenEdited(){return this.isDeleted()||l(this,Ms)!==l(this,Lm)}serialize(){return this.data}get data(){return{text:l(this,Ms),richText:l(this,vc),date:l(this,_c),deleted:this.isDeleted()}}set data(e){if(e!==l(this,Ms)&&k(this,vc,null),e===null){k(this,Ms,""),k(this,Ec,!0);return}k(this,Ms,e),k(this,_c,new Date),k(this,Ec,!1)}setInitialText(e,t=null){k(this,Lm,e),this.data=e,k(this,_c,null),k(this,vc,t)}shown(){}destroy(){l(this,gs)?.remove(),k(this,gs,null),l(this,xn)?.remove(),k(this,xn,null),k(this,Ms,""),k(this,vc,null),k(this,_c,null),k(this,gr,null),k(this,wc,!1),k(this,Ec,!1)}};xn=new WeakMap,gs=new WeakMap,wc=new WeakMap,gr=new WeakMap,Lm=new WeakMap,vc=new WeakMap,Ms=new WeakMap,_c=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,Pm=new WeakSet,ax=function(e,t){if(!l(this,gr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,gr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));let n=l(this,gr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Zi,{signal:n}),t&&(e.addEventListener("focusin",o=>{l(this,gr)._focusEventsAllowed=!1,Cr(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{l(this,gr)._focusEventsAllowed=!0,Cr(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),e===l(this,gs)?this.edit():l(this,gr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(k(this,wc,!0),i(o))},{signal:n}),e.addEventListener("pointerenter",()=>{l(this,gr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{l(this,gr).toggleComment(!1,!1)},{signal:n}),e};TT=class TT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){V(this,_u);V(this,ld);V(this,xc,!1);V(this,Mm,null);V(this,Bm);V(this,Fm);V(this,Um);V(this,jm);V(this,_a,null);V(this,Sc);V(this,Ea,null);V(this,Tc);V(this,Aa,null);k(this,ld,e),k(this,Mm,n),k(this,Bm,t),k(this,Fm,i),k(this,Um,o),k(this,jm,s),k(this,Tc,new AbortController),k(this,Sc,AbortSignal.any([a,l(this,Tc).signal])),e.addEventListener("touchstart",re(this,_u,QB).bind(this),{passive:!1,signal:l(this,Sc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Bo.pixelRatio}destroy(){l(this,Tc)?.abort(),k(this,Tc,null),l(this,_a)?.abort(),k(this,_a,null)}};ld=new WeakMap,xc=new WeakMap,Mm=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,Um=new WeakMap,jm=new WeakMap,_a=new WeakMap,Sc=new WeakMap,Ea=new WeakMap,Tc=new WeakMap,Aa=new WeakMap,_u=new WeakSet,QB=function(e){var i,o,s;if((i=l(this,Bm))!=null&&i.call(this))return;if(e.touches.length===1){if(l(this,_a))return;let a=k(this,_a,new AbortController),u=AbortSignal.any([l(this,Sc),a.signal]),c=l(this,ld),f={capture:!0,signal:u,passive:!1},h=d=>{d.pointerType==="touch"&&(l(this,_a)?.abort(),k(this,_a,null))};c.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Cr(d),h(d))},f),c.addEventListener("pointerup",h,f),c.addEventListener("pointercancel",h,f);return}if(!l(this,Aa)){k(this,Aa,new AbortController);let a=AbortSignal.any([l(this,Sc),l(this,Aa).signal]),u=l(this,ld),c={signal:a,capture:!1,passive:!1};u.addEventListener("touchmove",re(this,_u,eF).bind(this),c);let f=re(this,_u,tF).bind(this);u.addEventListener("touchend",f,c),u.addEventListener("touchcancel",f,c),c.capture=!0,u.addEventListener("pointerdown",Cr,c),u.addEventListener("pointermove",Cr,c),u.addEventListener("pointercancel",Cr,c),u.addEventListener("pointerup",Cr,c),(o=l(this,Fm))==null||o.call(this)}if(Cr(e),e.touches.length!==2||(s=l(this,Mm))!=null&&s.call(this)){k(this,Ea,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),k(this,Ea,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},eF=function(e){var S;if(!l(this,Ea)||e.touches.length!==2)return;Cr(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);let{screenX:i,screenY:o}=t,{screenX:s,screenY:a}=n,u=l(this,Ea),{touch0X:c,touch0Y:f,touch1X:h,touch1Y:d}=u,m=h-c,b=d-f,v=s-i,w=a-o,y=Math.hypot(v,w)||1,_=Math.hypot(m,b)||1;if(!l(this,xc)&&Math.abs(_-y)<=TT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=o,u.touch1X=s,u.touch1Y=a,!l(this,xc)){k(this,xc,!0);return}let E=[(i+s)/2,(o+a)/2];(S=l(this,Um))==null||S.call(this,E,_,y)},tF=function(e){var t;e.touches.length>=2||(l(this,Aa)&&(l(this,Aa).abort(),k(this,Aa,null),(t=l(this,jm))==null||t.call(this)),l(this,Ea)&&(Cr(e),k(this,Ea,null),k(this,xc,!1)))};lm=TT,At=class At{constructor(e){V(this,mt);V(this,Cc,null);V(this,Bs,null);V(this,Er,null);V(this,cr,null);V(this,xa,null);V(this,ud,!1);V(this,Hl,null);V(this,$m,"");V(this,Sn,null);V(this,Rc,null);V(this,Sa,null);V(this,ms,null);V(this,Gl,null);V(this,zm,"");V(this,Dc,!1);V(this,Ii,null);V(this,Wm,!1);V(this,Ic,!1);V(this,Ta,!1);V(this,Ao,null);V(this,cd,0);V(this,fd,0);V(this,ys,null);V(this,Oc,null);Je(this,"isSelected",!1);Je(this,"_isCopy",!1);Je(this,"_editToolbar",null);Je(this,"_initialOptions",Object.create(null));Je(this,"_initialData",null);Je(this,"_isVisible",!0);Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);V(this,qm,!1);V(this,Yv,At._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;let{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,s];let[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){let e=At.prototype._resizeWithKeyboard,t=vu.TRANSLATE_SMALL,n=vu.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],At.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new gx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(At._l10n??(At._l10n=e),At._l10nResizer||(At._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),At._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,qm)}set _isDraggable(e){k(this,qm,e),this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Yv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(re(this,mt,Ug).call(this),l(this,ms)?.remove(),k(this,ms,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Dc)?k(this,Dc,!1):this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){let[o,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/o,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){let[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){re(this,mt,lx).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Ii)||k(this,Ii,[this.x,this.y,this.width,this.height]),re(this,mt,lx).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,Ii)||k(this,Ii,[this.x,this.y,this.width,this.height]);let{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[u,c]=this.getBaseTranslation();s+=u,a+=c;let{style:f}=n;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,Ii)&&(l(this,Ii)[0]!==this.x||l(this,Ii)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Ii)&&(l(this,Ii)[2]!==this.width||l(this,Ii)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=At,i=n/e,o=n/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,i]}=this,{x:o,y:s,width:a,height:u}=this;if(a*=n,u*=i,o*=n,s*=i,this._mustFixPosition)switch(e){case 0:o=Wn(o,0,n-a),s=Wn(s,0,i-u);break;case 90:o=Wn(o,0,n-u),s=Wn(s,a,i);break;case 180:o=Wn(o,a,n),s=Wn(s,u,i);break;case 270:o=Wn(o,u,n),s=Wn(s,0,i-a);break}this.x=o/=n,this.y=s/=i;let[c,f]=this.getBaseTranslation();o+=c,s+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return re(n=At,Hm,ux).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return re(n=At,Hm,ux).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){let{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){l(this,Er)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Ic))return this._editToolbar;this._editToolbar=new KA(this),this.div.append(this._editToolbar.render());let{toolbarButtons:e}=this;if(e)for(let[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,l(this,Er)?.destroy()}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Er)||(fv.initialize(At._l10n),k(this,Er,new fv(this)),l(this,Cc)&&(l(this,Er).data=l(this,Cc),k(this,Cc,null))),l(this,Er)}get altTextData(){return l(this,Er)?.data}set altTextData(e){l(this,Er)&&(l(this,Er).data=e)}get guessedAltText(){return l(this,Er)?.guessedText}async setGuessedAltText(e){await l(this,Er)?.setGuessedText(e)}serializeAltText(e){return l(this,Er)?.serialize(e)}hasAltText(){return!!l(this,Er)&&!l(this,Er).isEmpty()}hasAltTextData(){return l(this,Er)?.hasData()??!1}focusCommentButton(){l(this,cr)?.focusButton()}addCommentButton(){return this.canAddComment?l(this,cr)||k(this,cr,new Fh(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,xa)){this._uiManager.isEditingMode()&&l(this,xa).classList.remove("hidden");return}this.hasComment&&(k(this,xa,l(this,cr).renderForStandalone()),this.div.append(l(this,xa)))}}removeStandaloneCommentButton(){l(this,cr).removeStandaloneCommentButton(),k(this,xa,null)}hideStandaloneCommentButton(){l(this,xa)?.classList.add("hidden")}get comment(){let{data:{richText:e,text:t,date:n,deleted:i}}=l(this,cr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).setInitialText(e,n),!this.annotationElementId))return;let i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return l(this,cr)?.hasBeenEdited()}get hasDeletedComment(){return l(this,cr)?.isDeleted()}get hasComment(){return!!l(this,cr)&&!l(this,cr).isEmpty()&&!l(this,cr).isDeleted()}async editComment(e){l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,cr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){let[,,,i]=e.rect,[o]=this.pageDimensions,[s]=this.pageTranslation,a=s+o+1,u=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,u,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,cr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,ud)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),re(this,mt,dx).call(this);let[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);let[i,o]=this.getInitialTranslation();return this.translate(i,o),UB(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Oc)||k(this,Oc,new lm({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:re(this,mt,iF).bind(this),onPinching:re(this,mt,sF).bind(this),onPinchEnd:re(this,mt,oF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}pointerdown(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(k(this,Dc,!0),this._isDraggable){re(this,mt,aF).call(this,e);return}re(this,mt,hx).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Ao)&&clearTimeout(l(this,Ao)),k(this,Ao,setTimeout(()=>{k(this,Ao,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let i=this.parentScale,[o,s]=this.pageDimensions,[a,u]=this.pageTranslation,c=e/i,f=t/i,h=this.x*o,d=this.y*s,m=this.width*o,b=this.height*s;switch(n){case 0:return[h+c+a,s-d-f-b+u,h+c+m+a,s-d-f+u];case 90:return[h+f+a,s-d+c+u,h+f+b+a,s-d+c+m+u];case 180:return[h-c-m+a,s-d+f+u,h-c+a,s-d+f+b+u];case 270:return[h-f-b+a,s-d-c-m+u,h-f+a,s-d-c+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,i,o,s]=e,a=o-n,u=s-i;switch(this.rotation){case 0:return[n,t-s,a,u];case 90:return[n,t-i,u,a];case 180:return[o,t-i,a,u];case 270:return[o,t-s,u,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&At._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){l(this,cr)?.onUpdatedColor()}getData(){let{comment:{text:e,color:t,date:n,opacity:i,deleted:o,richText:s},uid:a,pageIndex:u,creationDate:c,modificationDate:f}=this;return{id:a,pageIndex:u,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:c,modificationDate:n||f,popupRef:!o,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),k(this,Ic,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),k(this,Ic,!1),!0):!1}isInEditMode(){return l(this,Ic)}shouldGetKeyboardEvents(){return l(this,Ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return t<s&&i>0&&e<o&&n>0}rebuild(){re(this,mt,dx).call(this)}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){let i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,k(i,Cc,e.accessibilityData),i._isCopy=e.isCopy||!1;let[o,s]=i.pageDimensions,[a,u,c,f]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/o,i.y=u/s,i.width=c/o,i.height=f/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(l(this,Gl)?.abort(),k(this,Gl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Ao)&&(clearTimeout(l(this,Ao)),k(this,Ao,null)),re(this,mt,Ug).call(this),this.removeEditToolbar(),l(this,ys)){for(let e of l(this,ys).values())clearTimeout(e);k(this,ys,null)}this.parent=null,l(this,Oc)?.destroy(),k(this,Oc,null),l(this,ms)?.remove(),k(this,ms,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(re(this,mt,rF).call(this),l(this,Sn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[e,t]}=this,[n,i,o,s]=this.getPDFRect();return[At._round(n+(o-n)*e),At._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,cr).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,cr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,cr).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,cr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,cr)?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=l(this,Sn).children;if(!l(this,Bs)){k(this,Bs,Array.from(t));let s=re(this,mt,lF).bind(this),a=re(this,mt,uF).bind(this),u=this._uiManager._signal;for(let c of l(this,Bs)){let f=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:u}),c.addEventListener("blur",a,{signal:u}),c.addEventListener("focus",re(this,mt,cF).bind(this,f),{signal:u}),c.setAttribute("data-l10n-id",At._l10nResizer[f])}}let n=l(this,Bs)[0],i=0;for(let s of t){if(s===n)break;i++}let o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Bs).length/4);if(o!==i){if(o<i)for(let a=0;a<i-o;a++)l(this,Sn).append(l(this,Sn).firstElementChild);else if(o>i)for(let a=0;a<o-i;a++)l(this,Sn).firstElementChild.before(l(this,Sn).lastElementChild);let s=0;for(let a of t){let c=l(this,Bs)[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",At._l10nResizer[c])}}re(this,mt,px).call(this,0),k(this,Ta,!0),l(this,Sn).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ta)&&re(this,mt,fx).call(this,l(this,zm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){re(this,mt,Ug).call(this),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),l(this,Er)?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,l(this,Sn)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),l(this,Er)?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Wm)}set isEditing(e){k(this,Wm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ys)||k(this,ys,new Map);let{action:n}=e,i=l(this,ys).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,ys).delete(n),l(this,ys).size===0&&k(this,ys,null)},At._telemetryTimeout),l(this,ys).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),k(this,ud,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,ud,!0)}updateFakeAnnotationElement(e){if(!l(this,ms)&&!this.deleted){k(this,ms,e.addFakeAnnotation(this));return}if(this.deleted){l(this,ms).remove(),k(this,ms,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,ms).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Cc=new WeakMap,Bs=new WeakMap,Er=new WeakMap,cr=new WeakMap,xa=new WeakMap,ud=new WeakMap,Hl=new WeakMap,$m=new WeakMap,Sn=new WeakMap,Rc=new WeakMap,Sa=new WeakMap,ms=new WeakMap,Gl=new WeakMap,zm=new WeakMap,Dc=new WeakMap,Ii=new WeakMap,Wm=new WeakMap,Ic=new WeakMap,Ta=new WeakMap,Ao=new WeakMap,cd=new WeakMap,fd=new WeakMap,ys=new WeakMap,Oc=new WeakMap,qm=new WeakMap,Yv=new WeakMap,mt=new WeakSet,lx=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Hm=new WeakSet,ux=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Nw=function(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},rF=function(){if(l(this,Sn))return;k(this,Sn,document.createElement("div")),l(this,Sn).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let i=document.createElement("div");l(this,Sn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",re(this,mt,nF).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Zi,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,Sn))},nF=function(e,t){t.preventDefault();let{isMac:n}=Ur.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,Er)?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,k(this,Rc,[t.screenX,t.screenY]);let o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",re(this,mt,fx).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Cr,{passive:!1,signal:s}),window.addEventListener("contextmenu",Zi,{signal:s}),k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let a=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let c=()=>{o.abort(),this.parent.togglePointerEvents(!0),l(this,Er)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=u,re(this,mt,kw).call(this)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},cx=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},kw=function(){if(!l(this,Sa))return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=l(this,Sa);k(this,Sa,null);let o=this.x,s=this.y,a=this.width,u=this.height;o===e&&s===t&&a===n&&u===i||this.addCommands({cmd:re(this,mt,cx).bind(this,o,s,a,u),undo:re(this,mt,cx).bind(this,e,t,n,i),mustExec:!0})},fx=function(e,t){let[n,i]=this.parentDimensions,o=this.x,s=this.y,a=this.width,u=this.height,c=At.MIN_SIZE/n,f=At.MIN_SIZE/i,h=re(this,mt,Nw).call(this,this.rotation),d=(ve,H)=>[h[0]*ve+h[2]*H,h[1]*ve+h[3]*H],m=re(this,mt,Nw).call(this,360-this.rotation),b=(ve,H)=>[m[0]*ve+m[2]*H,m[1]*ve+m[3]*H],v,w,y=!1,_=!1;switch(e){case"topLeft":y=!0,v=(ve,H)=>[0,0],w=(ve,H)=>[ve,H];break;case"topMiddle":v=(ve,H)=>[ve/2,0],w=(ve,H)=>[ve/2,H];break;case"topRight":y=!0,v=(ve,H)=>[ve,0],w=(ve,H)=>[0,H];break;case"middleRight":_=!0,v=(ve,H)=>[ve,H/2],w=(ve,H)=>[0,H/2];break;case"bottomRight":y=!0,v=(ve,H)=>[ve,H],w=(ve,H)=>[0,0];break;case"bottomMiddle":v=(ve,H)=>[ve/2,H],w=(ve,H)=>[ve/2,0];break;case"bottomLeft":y=!0,v=(ve,H)=>[0,H],w=(ve,H)=>[ve,0];break;case"middleLeft":_=!0,v=(ve,H)=>[0,H/2],w=(ve,H)=>[ve,H/2];break}let E=v(a,u),S=w(a,u),A=d(...S),P=At._round(o+A[0]),R=At._round(s+A[1]),Y=1,te=1,K,ie;if(t.fromKeyboard)({deltaX:K,deltaY:ie}=t);else{let{screenX:ve,screenY:H}=t,[D,ee]=l(this,Rc);[K,ie]=this.screenToPageTranslation(ve-D,H-ee),l(this,Rc)[0]=ve,l(this,Rc)[1]=H}if([K,ie]=b(K/n,ie/i),y){let ve=Math.hypot(a,u);Y=te=Math.max(Math.min(Math.hypot(S[0]-E[0]-K,S[1]-E[1]-ie)/ve,1/a,1/u),c/a,f/u)}else _?Y=Wn(Math.abs(S[0]-E[0]-K),c,1)/a:te=Wn(Math.abs(S[1]-E[1]-ie),f,1)/u;let j=At._round(a*Y),q=At._round(u*te);A=d(...w(j,q));let fe=P-A[0],Ee=R-A[1];l(this,Ii)||k(this,Ii,[this.x,this.y,this.width,this.height]),this.width=j,this.height=q,this.x=fe,this.y=Ee,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iF=function(){k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),l(this,Er)?.toggle(!1),this.parent.togglePointerEvents(!1)},sF=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;let s=re(this,mt,Nw).call(this,this.rotation),a=(P,R)=>[s[0]*P+s[2]*R,s[1]*P+s[3]*R],[u,c]=this.parentDimensions,f=this.x,h=this.y,d=this.width,m=this.height,b=At.MIN_SIZE/u,v=At.MIN_SIZE/c;o=Math.max(Math.min(o,1/d,1/m),b/d,v/m);let w=At._round(d*o),y=At._round(m*o);if(w===d&&y===m)return;l(this,Ii)||k(this,Ii,[f,h,d,m]);let _=a(d/2,m/2),E=At._round(f+_[0]),S=At._round(h+_[1]),A=a(w/2,y/2);this.x=E-A[0],this.y=S-A[1],this.width=w,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},oF=function(){l(this,Er)?.toggle(!0),this.parent.togglePointerEvents(!0),re(this,mt,kw).call(this)},hx=function(e){let{isMac:t}=Ur.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},aF=function(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,i=new AbortController,o=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:o},a=c=>{i.abort(),k(this,Hl,null),k(this,Dc,!1),this._uiManager.endDragSession()||re(this,mt,hx).call(this,c),n&&this._onStopDragging()};t&&(k(this,cd,e.clientX),k(this,fd,e.clientY),k(this,Hl,e.pointerId),k(this,$m,e.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:f,clientY:h,pointerId:d}=c;if(d!==l(this,Hl)){Cr(c);return}let[m,b]=this.screenToPageTranslation(f-l(this,cd),h-l(this,fd));k(this,cd,f),k(this,fd,h),this._uiManager.dragSelectedEditors(m,b)},s),window.addEventListener("touchmove",Cr,s),window.addEventListener("pointerdown",c=>{c.pointerType===l(this,$m)&&(l(this,Oc)||c.isPrimary)&&a(c),Cr(c)},s));let u=c=>{if(!l(this,Hl)||l(this,Hl)===c.pointerId){a(c);return}Cr(c)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},dx=function(){if(l(this,Gl)||!this.div)return;k(this,Gl,new AbortController);let e=this._uiManager.combinedSignal(l(this,Gl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},lF=function(e){At._resizerKeyboardManager.exec(this,e)},uF=function(e){l(this,Ta)&&e.relatedTarget?.parentNode!==l(this,Sn)&&re(this,mt,Ug).call(this)},cF=function(e){k(this,zm,l(this,Ta)?e:"")},px=function(e){if(l(this,Bs))for(let t of l(this,Bs))t.tabIndex=e},Ug=function(){k(this,Ta,!1),re(this,mt,px).call(this,-1),re(this,mt,kw).call(this)},V(At,Hm),Je(At,"_l10n",null),Je(At,"_l10nResizer",null),Je(At,"_borderLineWidth",-1),Je(At,"_colorManager",new rx),Je(At,"_zIndex",1),Je(At,"_telemetryTimeout",1e3);mr=At,gx=class extends mr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},uB=3285377520,as=4294901760,ho=65535,hv=class{constructor(e){this.h1=e?e&4294967295:uB,this.h2=e?e&4294967295:uB}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){let y=e.charCodeAt(v);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=n>>2,o=n-i*4,s=new Uint32Array(t.buffer,0,i),a=0,u=0,c=this.h1,f=this.h2,h=3432918353,d=461845907,m=h&ho,b=d&ho;for(let v=0;v<i;v++)v&1?(a=s[v],a=a*h&as|a*m&ho,a=a<<15|a>>>17,a=a*d&as|a*b&ho,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(u=s[v],u=u*h&as|u*m&ho,u=u<<15|u>>>17,u=u*d&as|u*b&ho,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(a=0,o){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&as|a*m&ho,a=a<<15|a>>>17,a=a*d&as|a*b&ho,i&1?c^=a:f^=a}this.h1=c,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&as|e*36045&ho,t=t*4283543511&as|((t<<16|e>>>16)*2950163797&as)>>>16,e^=t>>>1,e=e*444984403&as|e*60499&ho,t=t*3301882366&as|((t<<16|e>>>16)*3120437893&as)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},mx=Object.freeze({map:null,hash:"",transfer:void 0}),um=class{constructor(){V(this,Xv);V(this,Nc,!1);V(this,kc,null);V(this,Ca,null);V(this,Tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=l(this,Tn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,Tn).get(e)}remove(e){let t=l(this,Tn).get(e);if(t!==void 0&&(t instanceof mr&&l(this,Ca).delete(t.annotationElementId),l(this,Tn).delete(e),l(this,Tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let n of l(this,Tn).values())if(n instanceof mr)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=l(this,Tn).get(e),i=!1;if(n!==void 0)for(let[o,s]of Object.entries(t))n[o]!==s&&(i=!0,n[o]=s);else i=!0,l(this,Tn).set(e,t);i&&re(this,Xv,fF).call(this),t instanceof mr&&((l(this,Ca)||k(this,Ca,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,Tn).has(e)}get size(){return l(this,Tn).size}resetModified(){l(this,Nc)&&(k(this,Nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dv(this)}get serializable(){if(l(this,Tn).size===0)return mx;let e=new Map,t=new hv,n=[],i=Object.create(null),o=!1;for(let[s,a]of l(this,Tn)){let u=a instanceof mr?a.serialize(!1,i):a;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),o||(o=!!u.bitmap))}if(o)for(let s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:mx}get editorStats(){let e=null,t=new Map,n=0,i=0;for(let o of l(this,Tn).values()){if(!(o instanceof mr)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);let s=o.telemetryFinalData;if(!s)continue;let{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(o).constructor),e||(e=Object.create(null));let u=e[a]||(e[a]=new Map);for(let[c,f]of Object.entries(s)){if(c==="type")continue;let h=u.get(c);h||(h=new Map,u.set(c,h));let d=h.get(f)??0;h.set(f,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(let[o,s]of t)e[o]=s.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){k(this,kc,null)}updateEditor(e,t){let n=l(this,Ca)?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return l(this,Ca)?.get(e)||null}get modifiedIds(){if(l(this,kc))return l(this,kc);let e=[];if(l(this,Ca))for(let t of l(this,Ca).values())t.serialize()&&e.push(t.annotationElementId);return k(this,kc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,Tn).entries()}};Nc=new WeakMap,kc=new WeakMap,Ca=new WeakMap,Tn=new WeakMap,Xv=new WeakSet,fF=function(){l(this,Nc)||(k(this,Nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};dv=class extends um{constructor(t){super();V(this,Gm);let{map:n,hash:i,transfer:o}=t.serializable,s=structuredClone(n,o?{transfer:o}:null);k(this,Gm,{map:s,hash:i,transfer:o})}get print(){dr("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Gm)}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}};Gm=new WeakMap;yx=class{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){V(this,hd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,hd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||l(this,hd).has(e.loadedName))){if(Bt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:i,src:o,style:s}=e,a=new FontFace(i,o,s);this.addNativeFontFace(a);try{await a.load(),l(this,hd).add(i),n?.(e)}catch{_t(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw _t(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{let i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Qn||Ur.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){let o=n.shift();setTimeout(o.callback,0)}}let{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,A){return S.charCodeAt(A)<<24|S.charCodeAt(A+1)<<16|S.charCodeAt(A+2)<<8|S.charCodeAt(A+3)&255}function i(S,A,P,R){let Y=S.substring(0,A),te=S.substring(A+P);return Y+R+te}let o,s,a=this._document.createElement("canvas");a.width=1,a.height=1;let u=a.getContext("2d"),c=0;function f(S,A){if(++c>30){_t("Load test font never loaded."),A();return}if(u.font="30px "+S,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(f.bind(null,S,A))}let h=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=i(d,976,h.length,h);let b=16,v=1482184792,w=n(d,b);for(o=0,s=h.length-3;o<s;o+=4)w=w-v+n(h,o)|0;o<h.length&&(w=w-v+n(h+"XXX",o)|0),d=i(d,b,4,YG(w));let y=`url(data:font/opentype;base64,${btoa(d)});`,_=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(_);let E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(let S of[e.loadedName,h]){let A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=S,E.append(A)}this._document.body.append(E),f(h,()=>{E.remove(),t.complete()})}};hd=new WeakMap;bx=class{constructor(e,t=null,n,i){V(this,rr);this.compiledGlyphs=Object.create(null),k(this,rr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${CB(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t,i;try{i=e.get(n)}catch(s){_t(`getPathGenerator - ignoring character: "${s}".`)}let o=kB(i?.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return l(this,rr).black}get bold(){return l(this,rr).bold}get disableFontFace(){return l(this,rr).disableFontFace??!1}set disableFontFace(e){wt(this,"disableFontFace",!!e)}get fontExtraProperties(){return l(this,rr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,rr).isInvalidPDFjsFont}get isType3Font(){return l(this,rr).isType3Font}get italic(){return l(this,rr).italic}get missingFile(){return l(this,rr).missingFile}get remeasure(){return l(this,rr).remeasure}get vertical(){return l(this,rr).vertical}get ascent(){return l(this,rr).ascent}get defaultWidth(){return l(this,rr).defaultWidth}get descent(){return l(this,rr).descent}get bbox(){return l(this,rr).bbox}set bbox(e){wt(this,"bbox",e)}get fontMatrix(){return l(this,rr).fontMatrix}get fallbackName(){return l(this,rr).fallbackName}get loadedName(){return l(this,rr).loadedName}get mimetype(){return l(this,rr).mimetype}get name(){return l(this,rr).name}get data(){return l(this,rr).data}clearData(){l(this,rr).clearData()}get cssFontInfo(){return l(this,rr).cssFontInfo}get systemFontInfo(){return l(this,rr).systemFontInfo}get defaultVMetrics(){return l(this,rr).defaultVMetrics}};rr=new WeakMap;$h=class $h{constructor(e){V(this,gd);V(this,dd);V(this,pd);V(this,Vm);k(this,dd,e),k(this,pd,new DataView(l(this,dd))),k(this,Vm,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let c of $h.strings){let f=t.encode(e[c]);n[c]=f,i+=4+f.length}let o=new ArrayBuffer(i),s=new Uint8Array(o),a=new DataView(o),u=0;for(let c of $h.strings){let f=n[c],h=f.length;a.setUint32(u,h),s.set(f,u+4),u+=4+h}return Bt(u===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return re(this,gd,Lw).call(this,0)}get fontWeight(){return re(this,gd,Lw).call(this,1)}get italicAngle(){return re(this,gd,Lw).call(this,2)}};dd=new WeakMap,pd=new WeakMap,Vm=new WeakMap,gd=new WeakSet,Lw=function(e){Bt(e<$h.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=l(this,pd).getUint32(t)+4;let n=l(this,pd).getUint32(t);return l(this,Vm).decode(new Uint8Array(l(this,dd),t+4,n))},Je($h,"strings",["fontFamily","fontWeight","italicAngle"]);pv=$h,zh=class zh{constructor(e){V(this,Pc);V(this,Vl);V(this,xo);V(this,Lc);k(this,Vl,e),k(this,xo,new DataView(l(this,Vl))),k(this,Lc,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let d of zh.strings){let m=t.encode(e[d]);n[d]=m,i+=4+m.length}i+=4;let o,s,a=1+i;e.style&&(o=t.encode(e.style.style),s=t.encode(e.style.weight),a+=4+o.length+4+s.length);let u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0;f.setUint8(h++,e.guessFallback?1:0),f.setUint32(h,0),h+=4,i=0;for(let d of zh.strings){let m=n[d],b=m.length;i+=4+b,f.setUint32(h,b),c.set(m,h+4),h+=4+b}return f.setUint32(h-i-4,i),e.style&&(f.setUint32(h,o.length),c.set(o,h+4),h+=4+o.length,f.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length),Bt(h<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(h)}get guessFallback(){return l(this,xo).getUint8(0)!==0}get css(){return re(this,Pc,jg).call(this,0)}get loadedName(){return re(this,Pc,jg).call(this,1)}get baseFontName(){return re(this,Pc,jg).call(this,2)}get src(){return re(this,Pc,jg).call(this,3)}get style(){let e=1;e+=4+l(this,xo).getUint32(e);let t=l(this,xo).getUint32(e),n=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,t));e+=4+t;let i=l(this,xo).getUint32(e),o=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,i));return{style:n,weight:o}}};Vl=new WeakMap,xo=new WeakMap,Lc=new WeakMap,Pc=new WeakSet,jg=function(e){Bt(e<zh.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=l(this,xo).getUint32(t)+4;let n=l(this,xo).getUint32(t);return l(this,Lc).decode(new Uint8Array(l(this,Vl),t+4,n))},Je(zh,"strings",["css","loadedName","baseFontName","src"]);gv=zh,St=class St{constructor({data:e,extra:t}){V(this,Fr);V(this,So);V(this,Ym);V(this,nr);k(this,So,e),k(this,Ym,new TextDecoder),k(this,nr,new DataView(l(this,So))),t&&Object.assign(this,t)}get black(){return re(this,Fr,ks).call(this,0)}get bold(){return re(this,Fr,ks).call(this,1)}get disableFontFace(){return re(this,Fr,ks).call(this,2)}get fontExtraProperties(){return re(this,Fr,ks).call(this,3)}get isInvalidPDFjsFont(){return re(this,Fr,ks).call(this,4)}get isType3Font(){return re(this,Fr,ks).call(this,5)}get italic(){return re(this,Fr,ks).call(this,6)}get missingFile(){return re(this,Fr,ks).call(this,7)}get remeasure(){return re(this,Fr,ks).call(this,8)}get vertical(){return re(this,Fr,ks).call(this,9)}get ascent(){return re(this,Fr,Pw).call(this,0)}get defaultWidth(){return re(this,Fr,Pw).call(this,1)}get descent(){return re(this,Fr,Pw).call(this,2)}get bbox(){let e=l(St,yd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<4;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=l(St,bd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<6;i++)n.push(l(this,nr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=l(St,wd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<3;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return re(this,Fr,$g).call(this,0)}get loadedName(){return re(this,Fr,$g).call(this,1)}get mimetype(){return re(this,Fr,$g).call(this,2)}get name(){return re(this,Fr,$g).call(this,3)}get data(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);if(o!==0)return new Uint8Array(l(this,So),e+4,o)}clearData(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);new Uint8Array(l(this,So),e+4,o).fill(0),l(this,nr).setUint32(e,0)}get cssFontInfo(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);if(i===0)return null;let o=new Uint8Array(i);return o.set(new Uint8Array(l(this,So),e+4,i)),new pv(o.buffer)}get systemFontInfo(){let e=l(St,Oi),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);if(n===0)return null;let i=new Uint8Array(n);return i.set(new Uint8Array(l(this,So),e+4,n)),new gv(i.buffer)}static write(e){let t=e.systemFontInfo?gv.write(e.systemFontInfo):null,n=e.cssFontInfo?pv.write(e.cssFontInfo):null,i=new TextEncoder,o={},s=0;for(let v of St.strings)o[v]=i.encode(e[v]),s+=4+o[v].length;let a=l(St,Oi)+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0,d=St.bools.length,m=0,b=0;for(let v=0;v<d;v++){let w=e[St.bools[v]];m|=(w===void 0?0:w?2:1)<<b,b+=2,(b===8||v===d-1)&&(f.setUint8(h++,m),m=0,b=0)}Bt(h===l(St,md),"FontInfo.write: Boolean properties offset mismatch");for(let v of St.numbers)f.setFloat64(h,e[v]),h+=8;if(Bt(h===l(St,yd),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(h++,4);for(let v of e.bbox)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=8;if(Bt(h===l(St,bd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(h++,6);for(let v of e.fontMatrix)f.setFloat64(h,v,!0),h+=8}else f.setUint8(h++,0),h+=48;if(Bt(h===l(St,wd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(h++,1);for(let v of e.defaultVMetrics)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=6;Bt(h===l(St,Oi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(l(St,Oi),0),h+=4;for(let v of St.strings){let w=o[v],y=w.length;f.setUint32(h,y),c.set(w,h+4),h+=4+y}if(f.setUint32(l(St,Oi),h-l(St,Oi)-4),!t)f.setUint32(h,0),h+=4;else{let v=t.byteLength;f.setUint32(h,v),Bt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),h+4),h+=4+v}if(!n)f.setUint32(h,0),h+=4;else{let v=n.byteLength;f.setUint32(h,v),Bt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(n),h+4),h+=4+v}return e.data===void 0?(f.setUint32(h,0),h+=4):(f.setUint32(h,e.data.length),c.set(e.data,h+4),h+=4+e.data.length),Bt(h<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(h)}};md=new WeakMap,yd=new WeakMap,bd=new WeakMap,wd=new WeakMap,Oi=new WeakMap,So=new WeakMap,Ym=new WeakMap,nr=new WeakMap,Fr=new WeakSet,ks=function(e){Bt(e<St.bools.length,"Invalid boolean index");let t=Math.floor(e/4),n=e*2%8,i=l(this,nr).getUint8(t)>>n&3;return i===0?void 0:i===2},Pw=function(e){return Bt(e<St.numbers.length,"Invalid number index"),l(this,nr).getFloat64(l(St,md)+e*8)},$g=function(e){Bt(e<St.strings.length,"Invalid string index");let t=l(St,Oi)+4;for(let o=0;o<e;o++)t+=l(this,nr).getUint32(t)+4;let n=l(this,nr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,So),t+4,n)),l(this,Ym).decode(i)},Je(St,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Je(St,"numbers",["ascent","defaultWidth","descent"]),Je(St,"strings",["fallbackName","loadedName","mimetype","name"]),V(St,md,Math.ceil(St.bools.length*2/8)),V(St,yd,l(St,md)+St.numbers.length*8),V(St,bd,l(St,yd)+1+8),V(St,wd,l(St,bd)+1+48),V(St,Oi,l(St,wd)+1+6);wx=St,pr=class pr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],o=[],s=[],a=[],u=null,c=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],s=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,u=e[1],i=e[2],o=e[3],a=e[4]||[],n=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}let f=Math.floor(i.length/2),h=Math.floor(o.length/3),d=s.length,m=a.length,b=0;for(let A of a)b+=1,b=Math.ceil(b/4)*4,b+=4+A.coords.length*4,b+=4+A.colors.length*4,A.verticesPerRow!==void 0&&(b+=4);let v=20+f*8+h*3+d*8+(n?16:0)+(c?3:0)+b,w=new ArrayBuffer(v),y=new DataView(w),_=new Uint8Array(w);y.setUint8(l(pr,Xm),t),y.setUint8(l(pr,Km),n?1:0),y.setUint8(l(pr,Zm),c?1:0),y.setUint8(l(pr,Jm),u),y.setUint32(l(pr,Qm),f,!0),y.setUint32(l(pr,ey),h,!0),y.setUint32(l(pr,ty),d,!0),y.setUint32(l(pr,ry),m,!0);let E=20;new Float32Array(w,E,f*2).set(i),E+=f*8,_.set(o,E),E+=h*3;for(let[A,P]of s)y.setFloat32(E,A,!0),E+=4,y.setUint32(E,parseInt(P.slice(1),16),!0),E+=4;if(n)for(let A of n)y.setFloat32(E,A,!0),E+=4;c&&(_.set(c,E),E+=3);for(let A=0;A<a.length;A++){let P=a[A];y.setUint8(E,P.type),E+=1,E=Math.ceil(E/4)*4,y.setUint32(E,P.coords.length,!0),E+=4,new Int32Array(w,E,P.coords.length).set(P.coords),E+=P.coords.length*4,y.setUint32(E,P.colors.length,!0),E+=4,new Int32Array(w,E,P.colors.length).set(P.colors),E+=P.colors.length*4,P.verticesPerRow!==void 0&&(y.setUint32(E,P.verticesPerRow,!0),E+=4)}return w}getIR(){let e=this.view,t=this.data[l(pr,Xm)],n=!!this.data[l(pr,Km)],i=!!this.data[l(pr,Zm)],o=e.getUint32(l(pr,Qm),!0),s=e.getUint32(l(pr,ey),!0),a=e.getUint32(l(pr,ty),!0),u=e.getUint32(l(pr,ry),!0),c=20,f=new Float32Array(this.buffer,c,o*2);c+=o*8;let h=new Uint8Array(this.buffer,c,s*3);c+=s*3;let d=[];for(let w=0;w<a;++w){let y=e.getFloat32(c,!0);c+=4;let _=e.getUint32(c,!0);c+=4,d.push([y,`#${_.toString(16).padStart(6,"0")}`])}let m=null;if(n){m=[];for(let w=0;w<4;++w)m.push(e.getFloat32(c,!0)),c+=4}let b=null;i&&(b=new Uint8Array(this.buffer,c,3),c+=3);let v=[];for(let w=0;w<u;++w){let y=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;let _=e.getUint32(c,!0);c+=4;let E=new Int32Array(this.buffer,c,_);c+=_*4;let S=e.getUint32(c,!0);c+=4;let A=new Int32Array(this.buffer,c,S);c+=S*4;let P={type:y,coords:E,colors:A};y===HA.LATTICE&&(P.verticesPerRow=e.getUint32(c,!0),c+=4),v.push(P)}if(t===1)return["RadialAxial","axial",m,d,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,d,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){let w=this.data[l(pr,Jm)],y=null;if(f.length>0){let _=f[0],E=f[0],S=f[1],A=f[1];for(let P=0;P<f.length;P+=2){let R=f[P],Y=f[P+1];_=_>R?R:_,S=S>Y?Y:S,E=E<R?R:E,A=A<Y?Y:A}y=[_,S,E,A]}return["Mesh",w,f,h,v,y,m,b]}throw new Error(`Unsupported pattern kind: ${t}`)}};Xm=new WeakMap,Km=new WeakMap,Zm=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,ey=new WeakMap,ty=new WeakMap,ry=new WeakMap,V(pr,Xm,0),V(pr,Km,1),V(pr,Zm,2),V(pr,Jm,3),V(pr,Qm,4),V(pr,ey,8),V(pr,ty,12),V(pr,ry,16);vx=pr,_x=class{constructor(e){V(this,vd);k(this,vd,e)}static write(e){let t,n;return Ur.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return Ur.isFloat16ArraySupported?new Float16Array(l(this,vd)):new Float32Array(l(this,vd))}};vd=new WeakMap;Ex=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,iV=r=>typeof r=="object"&&typeof r?.name=="string",hF=JG.bind(null,Ex,iV),Ax=class{constructor(){V(this,Ra,new Map);V(this,Kv,Promise.resolve())}postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};l(this,Kv).then(()=>{for(let[i]of l(this,Ra))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){let{signal:o}=n;if(o.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}l(this,Ra).set(t,i)}removeEventListener(e,t){l(this,Ra).get(t)?.(),l(this,Ra).delete(t)}terminate(){for(let[,e]of l(this,Ra))e?.();l(this,Ra).clear()}};Ra=new WeakMap,Kv=new WeakMap;ww={DATA:1,ERROR:2},Yr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};fc=class{constructor(e,t,n){V(this,xs);V(this,_d,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",re(this,xs,dF).bind(this),{signal:l(this,_d).signal})}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,n,i){let o=this.streamId++,s=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:c=>{let f=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:a,action:e,streamId:o,data:t,desiredSize:c.desiredSize},i),f.promise},pull:c=>{let f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,u.postMessage({sourceName:s,targetName:a,stream:Yr.PULL,streamId:o,desiredSize:c.desiredSize}),f.promise},cancel:c=>{Bt(c instanceof Error,"cancel must have a valid reason");let f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:s,targetName:a,stream:Yr.CANCEL,streamId:o,reason:hi(c)}),f.promise}},n)}destroy(){l(this,_d)?.abort(),k(this,_d,null)}};_d=new WeakMap,xs=new WeakSet,dF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){re(this,xs,gF).call(this,e);return}if(e.callback){let n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===ww.DATA)i.resolve(e.data);else if(e.callback===ww.ERROR)i.reject(hi(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(s){o.postMessage({sourceName:n,targetName:i,callback:ww.DATA,callbackId:e.callbackId,data:s})},function(s){o.postMessage({sourceName:n,targetName:i,callback:ww.ERROR,callbackId:e.callbackId,reason:hi(s)})});return}if(e.streamId){re(this,xs,pF).call(this,e);return}t(e.data)},pF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this,a=this.actionHandler[e.action],u={enqueue(c,f=1,h){if(this.isCancelled)return;let d=this.desiredSize;this.desiredSize-=f,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:Yr.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(c){Bt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.ERROR,streamId:t,reason:hi(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(a,e.data,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,reason:hi(c)})})},gF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Yr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(hi(e.reason));break;case Yr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(hi(e.reason));break;case Yr.PULL:if(!a){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||cB).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,reason:hi(c)})});break;case Yr.ENQUEUE:if(Bt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Yr.CLOSE:if(Bt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),re(this,xs,Mw).call(this,s,t);break;case Yr.ERROR:Bt(s,"error should have stream controller"),s.controller.error(hi(e.reason)),re(this,xs,Mw).call(this,s,t);break;case Yr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(hi(e.reason)),re(this,xs,Mw).call(this,s,t);break;case Yr.CANCEL:if(!a)break;let u=hi(e.reason);Promise.try(a.onCancel||cB,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,reason:hi(c)})}),a.sinkCapability.reject(u),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Mw=async function(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]};mv=class{constructor({enableHWA:e=!1}){V(this,ny,!1);k(this,ny,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,ny)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){dr("Abstract method `_createCanvas` called.")}};ny=new WeakMap;xx=class extends mv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},yv=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},bv=class extends yv{async _fetch(e){let t=await Ep(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):c0(t)}},wv=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,o){return"none"}destroy(e=!1){}},Sx=class extends wv{constructor({docId:t,ownerDocument:n=globalThis.document}){super();V(this,lt);V(this,Mc);V(this,Ed);V(this,Da);V(this,Ia);V(this,jn);V(this,Bc);V(this,Fc,0);k(this,Ia,t),k(this,jn,n)}addFilter(t){if(!t)return"none";let n=l(this,lt,Mn).get(t);if(n)return n;let[i,o,s]=re(this,lt,Bw).call(this,t),a=t.length===1?i:`${i}${o}${s}`;if(n=l(this,lt,Mn).get(a),n)return l(this,lt,Mn).set(t,n),n;let u=`g_${l(this,Ia)}_transfer_map_${tn(this,Fc)._++}`,c=re(this,lt,Nh).call(this,u);l(this,lt,Mn).set(t,c),l(this,lt,Mn).set(a,c);let f=re(this,lt,kh).call(this,u);return re(this,lt,qg).call(this,i,o,s,f),c}addHCMFilter(t,n){let i=`${t}-${n}`,o="base",s=l(this,lt,zg).get(o);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},l(this,lt,zg).set(o,s)),!t||!n))return s.url;let a=re(this,lt,Hg).call(this,t);t=it.makeHexColor(...a);let u=re(this,lt,Hg).call(this,n);if(n=it.makeHexColor(...u),l(this,lt,Oh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return s.url;let c=new Array(256);for(let b=0;b<=255;b++){let v=b/255;c[b]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}let f=c.join(","),h=`g_${l(this,Ia)}_hcm_filter`,d=s.filter=re(this,lt,kh).call(this,h);re(this,lt,qg).call(this,f,f,f,d),re(this,lt,Tx).call(this,d);let m=(b,v)=>{let w=a[b]/255,y=u[b]/255,_=new Array(v+1);for(let E=0;E<=v;E++)_[E]=w+E/v*(y-w);return _.join(",")};return re(this,lt,qg).call(this,m(0,5),m(1,5),m(2,5),d),s.url=re(this,lt,Nh).call(this,h),s.url}addAlphaFilter(t){let n=l(this,lt,Mn).get(t);if(n)return n;let[i]=re(this,lt,Bw).call(this,[t]),o=`alpha_${i}`;if(n=l(this,lt,Mn).get(o),n)return l(this,lt,Mn).set(t,n),n;let s=`g_${l(this,Ia)}_alpha_map_${tn(this,Fc)._++}`,a=re(this,lt,Nh).call(this,s);l(this,lt,Mn).set(t,a),l(this,lt,Mn).set(o,a);let u=re(this,lt,kh).call(this,s);return re(this,lt,Cx).call(this,i,u),a}addLuminosityFilter(t){let n=l(this,lt,Mn).get(t||"luminosity");if(n)return n;let i,o;if(t?([i]=re(this,lt,Bw).call(this,[t]),o=`luminosity_${i}`):o="luminosity",n=l(this,lt,Mn).get(o),n)return l(this,lt,Mn).set(t,n),n;let s=`g_${l(this,Ia)}_luminosity_map_${tn(this,Fc)._++}`,a=re(this,lt,Nh).call(this,s);l(this,lt,Mn).set(t,a),l(this,lt,Mn).set(o,a);let u=re(this,lt,kh).call(this,s);return re(this,lt,mF).call(this,u),t&&re(this,lt,Cx).call(this,i,u),a}addHighlightHCMFilter(t,n,i,o,s){let a=`${n}-${i}-${o}-${s}`,u=l(this,lt,zg).get(t);if(u?.key===a||(u?(u.filter?.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},l(this,lt,zg).set(t,u)),!n||!i))return u.url;let[c,f]=[n,i].map(re(this,lt,Hg).bind(this)),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[m,b]=[o,s].map(re(this,lt,Hg).bind(this));d<h&&([h,d,m,b]=[d,h,b,m]),l(this,lt,Oh).style.color="";let v=(_,E,S)=>{let A=new Array(256),P=(d-h)/S,R=_/255,Y=(E-_)/(255*S),te=0;for(let K=0;K<=S;K++){let ie=Math.round(h+K*P),j=R+K*Y;for(let q=te;q<=ie;q++)A[q]=j;te=ie+1}for(let K=te;K<256;K++)A[K]=A[te-1];return A.join(",")},w=`g_${l(this,Ia)}_hcm_${t}_filter`,y=u.filter=re(this,lt,kh).call(this,w);return re(this,lt,Tx).call(this,y),re(this,lt,qg).call(this,v(m[0],b[0],5),v(m[1],b[1],5),v(m[2],b[2],5),y),u.url=re(this,lt,Nh).call(this,w),u.url}destroy(t=!1){t&&l(this,Bc)?.size||(l(this,Da)?.parentNode.parentNode.remove(),k(this,Da,null),l(this,Ed)?.clear(),k(this,Ed,null),l(this,Bc)?.clear(),k(this,Bc,null),k(this,Fc,0))}};Mc=new WeakMap,Ed=new WeakMap,Da=new WeakMap,Ia=new WeakMap,jn=new WeakMap,Bc=new WeakMap,Fc=new WeakMap,lt=new WeakSet,Mn=function(){return l(this,Ed)||k(this,Ed,new Map)},zg=function(){return l(this,Bc)||k(this,Bc,new Map)},Oh=function(){if(!l(this,Da)){let t=l(this,jn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;let i=l(this,jn).createElementNS(ha,"svg");i.setAttribute("width",0),i.setAttribute("height",0),k(this,Da,l(this,jn).createElementNS(ha,"defs")),t.append(i),i.append(l(this,Da)),l(this,jn).body.append(t)}return l(this,Da)},Bw=function(t){if(t.length===1){let c=t[0],f=new Array(256);for(let d=0;d<256;d++)f[d]=c[d]/255;let h=f.join(",");return[h,h,h]}let[n,i,o]=t,s=new Array(256),a=new Array(256),u=new Array(256);for(let c=0;c<256;c++)s[c]=n[c]/255,a[c]=i[c]/255,u[c]=o[c]/255;return[s.join(","),a.join(","),u.join(",")]},Nh=function(t){if(l(this,Mc)===void 0){k(this,Mc,"");let n=l(this,jn).URL;n!==l(this,jn).baseURI&&(f0(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,Mc,_T(n,"")))}return`url(${l(this,Mc)}#${t})`},mF=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Tx=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},kh=function(t){let n=l(this,jn).createElementNS(ha,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,lt,Oh).append(n),n},Wg=function(t,n,i){let o=l(this,jn).createElementNS(ha,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),t.append(o)},qg=function(t,n,i,o){let s=l(this,jn).createElementNS(ha,"feComponentTransfer");o.append(s),re(this,lt,Wg).call(this,s,"feFuncR",t),re(this,lt,Wg).call(this,s,"feFuncG",n),re(this,lt,Wg).call(this,s,"feFuncB",i)},Cx=function(t,n){let i=l(this,jn).createElementNS(ha,"feComponentTransfer");n.append(i),re(this,lt,Wg).call(this,i,"feFuncA",t)},Hg=function(t){return l(this,lt,Oh).style.color=t,Ap(getComputedStyle(l(this,lt,Oh)).getPropertyValue("color"))};vv=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},_v=class extends vv{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}},Ev=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},Av=class extends Ev{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}};Qn&&_t("Please use the `legacy` build in Node.js environments.");Rx=class extends wv{},Dx=class extends mv{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("")("@napi-rs/canvas").createCanvas(e,t)}},Ix=class extends yv{async _fetch(e){return xT(e)}},Ox=class extends vv{async _fetch(e){return xT(e)}},Nx=class extends Ev{async _fetch(e){return xT(e)}},Rh="__forcedDependency",{floor:fB,ceil:hB}=Math;kx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],Lx=class{constructor(e,t){V(this,Ad);V(this,Yl);k(this,Ad,e),k(this,Yl,t)}get length(){return l(this,Ad).length}isEmpty(e){return l(this,Ad)[e]===kx}minX(e){return l(this,Yl)[e*4+0]/256}minY(e){return l(this,Yl)[e*4+1]/256}maxX(e){return(l(this,Yl)[e*4+2]+1)/256}maxY(e){return(l(this,Yl)[e*4+3]+1)/256}};Ad=new WeakMap,Yl=new WeakMap;_w=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t},Px=class{constructor(e,t,n=!1){V(this,sy);V(this,gi,{__proto__:null});V(this,mi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Rh]:[]});V(this,Uc,new Map);V(this,Fs,[]);V(this,jc,[]);V(this,Oa,[[1,0,0,1,0,0]]);V(this,Zt,[-1/0,-1/0,1/0,1/0]);V(this,ir,new Float64Array([1/0,1/0,-1/0,-1/0]));V(this,Na,-1);V(this,yi,new Set);V(this,iy,new Map);V(this,xd,new Map);V(this,$c);V(this,zc);V(this,ka);V(this,$n);V(this,To);k(this,$c,e.width),k(this,zc,e.height),re(this,sy,Mx).call(this,t),n&&k(this,To,new Map)}growOperationsCount(e){e>=l(this,$n).length&&re(this,sy,Mx).call(this,e,l(this,$n))}save(e){return k(this,gi,{__proto__:l(this,gi)}),k(this,mi,{__proto__:l(this,mi),transform:{__proto__:l(this,mi).transform},moveText:{__proto__:l(this,mi).moveText},sameLineText:{__proto__:l(this,mi).sameLineText},[Rh]:{__proto__:l(this,mi)[Rh]}}),k(this,Zt,{__proto__:l(this,Zt)}),l(this,Fs).push(e),this}restore(e){let t=Object.getPrototypeOf(l(this,gi));if(t===null)return this;k(this,gi,t),k(this,mi,Object.getPrototypeOf(l(this,mi))),k(this,Zt,Object.getPrototypeOf(l(this,Zt)));let n=l(this,Fs).pop();return n!==void 0&&(_w(l(this,To),e)?.dependencies.add(n),l(this,$n)[e]=l(this,$n)[n]),this}recordOpenMarker(e){return l(this,Fs).push(e),this}getOpenMarker(){return l(this,Fs).length===0?null:l(this,Fs).at(-1)}recordCloseMarker(e){let t=l(this,Fs).pop();return t!==void 0&&(_w(l(this,To),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}beginMarkedContent(e){return l(this,jc).push(e),this}endMarkedContent(e){let t=l(this,jc).pop();return t!==void 0&&(_w(l(this,To),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}pushBaseTransform(e){return l(this,Oa).push(it.multiplyByDOMMatrix(l(this,Oa).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,Oa).length>1&&l(this,Oa).pop(),this}recordSimpleData(e,t){return l(this,gi)[e]=t,this}recordIncrementalData(e,t){return l(this,mi)[e].push(t),this}resetIncrementalData(e,t){return l(this,mi)[e].length=0,this}recordNamedData(e,t){return l(this,Uc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){l(this,gi)[e]=l(this,Uc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Rh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(let t of e)t in l(this,gi)&&this.recordFutureForcedDependency(t,l(this,gi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let e of l(this,yi))this.recordFutureForcedDependency(Rh,e);return this}resetBBox(e){return l(this,Na)!==e&&(k(this,Na,e),l(this,ir)[0]=1/0,l(this,ir)[1]=1/0,l(this,ir)[2]=-1/0,l(this,ir)[3]=-1/0),this}recordClipBox(e,t,n,i,o,s){let a=it.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([n,o,i,s],a,u);let c=it.intersect(l(this,Zt),u);return c?(l(this,Zt)[0]=c[0],l(this,Zt)[1]=c[1],l(this,Zt)[2]=c[2],l(this,Zt)[3]=c[3]):(l(this,Zt)[0]=l(this,Zt)[1]=1/0,l(this,Zt)[2]=l(this,Zt)[3]=-1/0),this}recordBBox(e,t,n,i,o,s){let a=l(this,Zt);if(a[0]===1/0)return this;let u=it.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform());if(a[0]===-1/0)return it.axialAlignedBoundingBox([n,o,i,s],u,l(this,ir)),this;let c=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([n,o,i,s],u,c),l(this,ir)[0]=Math.min(l(this,ir)[0],Math.max(c[0],a[0])),l(this,ir)[1]=Math.min(l(this,ir)[1],Math.max(c[1],a[1])),l(this,ir)[2]=Math.max(l(this,ir)[2],Math.min(c[2],a[2])),l(this,ir)[3]=Math.max(l(this,ir)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,n,i=1,o=0,s=0,a){let u=n.bbox,c,f;if(u&&(c=u[2]!==u[0]&&u[3]!==u[1]&&l(this,xd).get(n),c!==!1&&(f=[0,0,0,0],it.axialAlignedBoundingBox(u,n.fontMatrix,f),(i!==1||o!==0||s!==0)&&it.scaleMinMax([i,0,0,-i,o,s],f),c)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!a)return this.recordFullPageBBox(e);let h=a();return u&&f&&c===void 0&&(c=f[0]<=o-h.actualBoundingBoxLeft&&f[2]>=o+h.actualBoundingBoxRight&&f[1]<=s-h.actualBoundingBoxAscent&&f[3]>=s+h.actualBoundingBoxDescent,l(this,xd).set(n,c),c)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-h.actualBoundingBoxLeft,o+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,ir)[0]=Math.max(0,l(this,Zt)[0]),l(this,ir)[1]=Math.max(0,l(this,Zt)[1]),l(this,ir)[2]=Math.min(l(this,$c),l(this,Zt)[2]),l(this,ir)[3]=Math.min(l(this,zc),l(this,Zt)[3]),this}getSimpleIndex(e){return l(this,gi)[e]}recordDependencies(e,t){let n=l(this,yi),i=l(this,gi),o=l(this,mi);for(let s of t)s in l(this,gi)?n.add(i[s]):s in o&&o[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return l(this,Uc).has(t)&&l(this,yi).add(l(this,Uc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Rh]),l(this,To)){let n=_w(l(this,To),e),{dependencies:i}=n;l(this,yi).forEach(i.add,i),l(this,Fs).forEach(i.add,i),l(this,jc).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(l(this,Na)===e){let n=fB(l(this,ir)[0]*256/l(this,$c)),i=fB(l(this,ir)[1]*256/l(this,zc)),o=hB(l(this,ir)[2]*256/l(this,$c)),s=hB(l(this,ir)[3]*256/l(this,zc));vw(l(this,ka),e,n,i,o,s);for(let a of l(this,yi))a!==e&&vw(l(this,ka),a,n,i,o,s);for(let a of l(this,Fs))a!==e&&vw(l(this,ka),a,n,i,o,s);for(let a of l(this,jc))a!==e&&vw(l(this,ka),a,n,i,o,s);t||(l(this,yi).clear(),k(this,Na,-1))}return this}recordShowTextOperation(e,t=!1){let n=Array.from(l(this,yi));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(let i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Na)===e&&(k(this,Na,-1),l(this,Zt)[0]=Math.max(l(this,Zt)[0],l(this,ir)[0]),l(this,Zt)[1]=Math.max(l(this,Zt)[1],l(this,ir)[1]),l(this,Zt)[2]=Math.min(l(this,Zt)[2],l(this,ir)[2]),l(this,Zt)[3]=Math.min(l(this,Zt)[3],l(this,ir)[3]),t||l(this,yi).clear()),this}_takePendingDependencies(){let e=l(this,yi);return k(this,yi,new Set),e}_extractOperation(e){let t=l(this,iy).get(e);return l(this,iy).delete(e),t}_pushPendingDependencies(e){for(let t of e)l(this,yi).add(t)}take(){return l(this,xd).clear(),new Lx(l(this,$n),l(this,ka))}takeDebugMetadata(){return l(this,To)}};gi=new WeakMap,mi=new WeakMap,Uc=new WeakMap,Fs=new WeakMap,jc=new WeakMap,Oa=new WeakMap,Zt=new WeakMap,ir=new WeakMap,Na=new WeakMap,yi=new WeakMap,iy=new WeakMap,xd=new WeakMap,$c=new WeakMap,zc=new WeakMap,ka=new WeakMap,$n=new WeakMap,To=new WeakMap,sy=new WeakSet,Mx=function(e,t){let n=new ArrayBuffer(e*4);k(this,ka,new Uint8ClampedArray(n)),k(this,$n,new Uint32Array(n)),t&&t.length>0?(l(this,$n).set(t),l(this,$n).fill(kx,t.length)):l(this,$n).fill(kx)};CT=class CT{constructor(e,t,n){V(this,fr);V(this,Pr);V(this,Us);V(this,Sd,0);V(this,Td,0);if(e instanceof CT&&l(e,Us)===!!n)return e;k(this,fr,e),k(this,Pr,t),k(this,Us,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return tn(this,Td)._++,l(this,fr).save(l(this,Pr)),this}restore(e){return l(this,Td)>0&&(l(this,fr).restore(l(this,Pr)),tn(this,Td)._--),this}recordOpenMarker(e){return tn(this,Sd)._++,this}getOpenMarker(){return l(this,Sd)>0?l(this,Pr):l(this,fr).getOpenMarker()}recordCloseMarker(e){return tn(this,Sd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,fr).pushBaseTransform(e),this}popBaseTransform(){return l(this,fr).popBaseTransform(),this}recordSimpleData(e,t){return l(this,fr).recordSimpleData(e,l(this,Pr)),this}recordIncrementalData(e,t){return l(this,fr).recordIncrementalData(e,l(this,Pr)),this}resetIncrementalData(e,t){return l(this,fr).resetIncrementalData(e,l(this,Pr)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return l(this,fr).recordSimpleDataFromNamed(e,t,l(this,Pr)),this}recordFutureForcedDependency(e,t){return l(this,fr).recordFutureForcedDependency(e,l(this,Pr)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,fr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,fr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,Us)||l(this,fr).resetBBox(l(this,Pr)),this}recordClipBox(e,t,n,i,o,s){return l(this,Us)||l(this,fr).recordClipBox(l(this,Pr),t,n,i,o,s),this}recordBBox(e,t,n,i,o,s){return l(this,Us)||l(this,fr).recordBBox(l(this,Pr),t,n,i,o,s),this}recordCharacterBBox(e,t,n,i,o,s,a){return l(this,Us)||l(this,fr).recordCharacterBBox(l(this,Pr),t,n,i,o,s,a),this}recordFullPageBBox(e){return l(this,Us)||l(this,fr).recordFullPageBBox(l(this,Pr)),this}getSimpleIndex(e){return l(this,fr).getSimpleIndex(e)}recordDependencies(e,t){return l(this,fr).recordDependencies(l(this,Pr),t),this}recordNamedDependency(e,t){return l(this,fr).recordNamedDependency(l(this,Pr),t),this}recordOperation(e){return l(this,fr).recordOperation(l(this,Pr),!0),this}recordShowTextOperation(e){return l(this,fr).recordShowTextOperation(l(this,Pr),!0),this}bboxToClipBoxDropOperation(e){return l(this,Us)||l(this,fr).bboxToClipBoxDropOperation(l(this,Pr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};fr=new WeakMap,Pr=new WeakMap,Us=new WeakMap,Sd=new WeakMap,Td=new WeakMap;xv=CT,ls={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};cm=class{isModifyingCurrentTransform(){return!1}getPattern(){dr("Abstract method `getPattern` called.")}},Fx=class extends cm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,i=this._p0,o=this._p1;if(t&&(i=i.slice(),o=o.slice(),it.applyTransform(i,t),it.applyTransform(o,t)),this._type==="axial")n=e.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let s=this._r0,a=this._r1;if(t){let u=new Float32Array(2);it.singularValueDecompose2dScale(t,u),s*=u[0],a*=u[0]}n=e.createRadialGradient(i[0],i[1],s,o[0],o[1],a)}for(let s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(e,t,n,i){let o;if(i===Dn.STROKE||i===Dn.FILL){if(this.isOriginBased()){let d=it.transform(n,t.baseTransform);this.matrix&&(d=it.transform(d,this.matrix));let m=.001,b=Math.hypot(d[0],d[1]),v=Math.hypot(d[2],d[3]),w=(d[0]*d[2]+d[1]*d[3])/(b*v);if(Math.abs(w)<m)if(this.isRadial()){if(Math.abs(b-v)<m)return this._createGradient(e,d)}else return this._createGradient(e,d)}let s=t.current.getClippedPathBoundingBox(i,Tr(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,u),f=c.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-s[0],-s[1]),n=it.transform(n,[1,0,0,1,s[0],s[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Bx(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(n);o.setTransform(h)}else Bx(e,this._bbox),o=this._createGradient(e);return o}};Ux=class extends cm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){let a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,f=Math.ceil(this._bounds[3])-u,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),m=c/h,b=f/d,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/m,scaleY:1/b},w=h+4,y=d+4,_=n.getCanvas("mesh",w,y),E=_.context,S=E.createImageData(h,d);if(t){let P=S.data;for(let R=0,Y=P.length;R<Y;R+=4)P[R]=t[0],P[R+1]=t[1],P[R+2]=t[2],P[R+3]=255}for(let P of this._figures)sV(S,P,v);return E.putImageData(S,2,2),{canvas:_.canvas,offsetX:a-2*m,offsetY:u-2*b,scaleX:m,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Bx(e,this._bbox);let o=new Float32Array(2);if(i===Dn.SHADING)it.singularValueDecompose2dScale(Tr(e),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);let[a,u]=o;it.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=a,o[1]*=u}else it.singularValueDecompose2dScale(t.baseTransform,o);let s=this._createMeshCanvas(o,i===Dn.SHADING?null:this._background,t.cachedCanvases);return i!==Dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}},jx=class extends cm{getPattern(){return"hotpink"}};dB={COLORED:1,UNCOLORED:2},Zv=class Zv{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){let{bbox:n,operatorList:i,paintType:o,tilingType:s,color:a,canvasGraphicsFactory:u}=this,{xstep:c,ystep:f}=this;c=Math.abs(c),f=Math.abs(f),u_("TilingType: "+s);let h=n[0],d=n[1],m=n[2],b=n[3],v=m-h,w=b-d,y=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,y);let[_,E]=y;it.singularValueDecompose2dScale(this.baseTransform,y);let S=_*y[0],A=E*y[1],P=v,R=w,Y=!1,te=!1,K=Math.ceil(c*S),ie=Math.ceil(f*A),j=Math.ceil(v*S),q=Math.ceil(w*A);K>=j?P=c:Y=!0,ie>=q?R=f:te=!0;let fe=this.getSizeAndScale(P,this.ctx.canvas.width,S),Ee=this.getSizeAndScale(R,this.ctx.canvas.height,A),ve=e.cachedCanvases.getCanvas("pattern",fe.size,Ee.size),H=ve.context,D=u.createCanvasGraphics(H,t);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,o,a),H.translate(-fe.scale*h,-Ee.scale*d),D.transform(0,fe.scale,0,0,Ee.scale,0,0),H.save(),D.dependencyTracker?.save(),this.clipBbox(D,h,d,m,b),D.baseTransform=Tr(D.ctx),D.executeOperatorList(i),D.endDrawing(),D.dependencyTracker?.restore(),H.restore(),Y||te){let ee=ve.canvas;Y&&(P=c),te&&(R=f);let B=this.getSizeAndScale(P,this.ctx.canvas.width,S),L=this.getSizeAndScale(R,this.ctx.canvas.height,A),$=B.size,M=L.size,G=e.cachedCanvases.getCanvas("pattern-workaround",$,M),ne=G.context,se=Y?Math.floor(v/c):0,z=te?Math.floor(w/f):0;for(let N=0;N<=se;N++)for(let F=0;F<=z;F++)ne.drawImage(ee,$*N,M*F,$,M,0,0,$,M);return{canvas:G.canvas,scaleX:B.scale,scaleY:L.scale,offsetX:h,offsetY:d}}return{canvas:ve.canvas,scaleX:fe.scale,scaleY:Ee.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){let i=Math.max(Zv.MAX_PATTERN_SIZE,t),o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,i,o){let s=i-t,a=o-n;e.ctx.rect(t,n,s,a),it.axialAlignedBoundingBox([t,n,i,o],Tr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let i=e.ctx,o=e.current;switch(t){case dB.COLORED:let{fillStyle:s,strokeStyle:a}=this.ctx;i.fillStyle=o.fillColor=s,i.strokeStyle=o.strokeColor=a;break;case dB.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new GA(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,o){let s=n;i!==Dn.SHADING&&(s=it.transform(s,t.baseTransform),this.matrix&&(s=it.transform(s,this.matrix)));let a=this.createPatternCanvas(t,o),u=new DOMMatrix(s);u=u.translate(a.offsetX,a.offsetY),u=u.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(u),c}};Je(Zv,"MAX_PATTERN_SIZE",3e3);$x=Zv;pB=16,gB=100,lV=15,mB=10,vi=16,$A=new DOMMatrix,Yi=new Float32Array(2),Uh=new Float32Array([1/0,1/0,-1/0,-1/0]);zx=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};Sv=class{constructor(e,t,n){Je(this,"alphaIsShape",!1);Je(this,"fontSize",0);Je(this,"fontSizeScale",1);Je(this,"textMatrix",null);Je(this,"textMatrixScale",1);Je(this,"fontMatrix",qA);Je(this,"leading",0);Je(this,"x",0);Je(this,"y",0);Je(this,"lineX",0);Je(this,"lineY",0);Je(this,"charSpacing",0);Je(this,"wordSpacing",0);Je(this,"textHScale",1);Je(this,"textRenderingMode",on.FILL);Je(this,"textRise",0);Je(this,"fillColor","#000000");Je(this,"strokeColor","#000000");Je(this,"patternFill",!1);Je(this,"patternStroke",!1);Je(this,"fillAlpha",1);Je(this,"strokeAlpha",1);Je(this,"lineWidth",1);Je(this,"activeSMask",null);Je(this,"transferMaps","none");n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Uh.slice()}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Dn.FILL,t=null){let n=this.minMax.slice();if(e===Dn.STROKE){t||dr("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(t,Yi);let i=Yi[0]*this.lineWidth/2,o=Yi[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){let e=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Uh,0)}getClippedPathBoundingBox(e=Dn.FILL,t=null){return it.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};cV=["butt","round","square"],fV=["miter","round","bevel"],hV={},vB={},RT=class RT{constructor(e,t,n,i,o,{optionalContentConfig:s,markedContentStack:a=null},u,c,f){V(this,Xs);this.ctx=e,this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new zx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){let o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,n){let u=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Tr(this.compositeCtx))}this.ctx.save(),Aw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Tr(this.ctx)}executeOperatorList(e,t,n,i,o){let s=e.argsArray,a=e.fnArray,u=t||0,c=s.length;if(c===u)return u;let f=c-u>mB&&typeof n=="function",h=f?Date.now()+lV:0,d=0,m=this.commonObjs,b=this.objs,v,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(!o||o(u))if(v=a[u],w=s[u]??null,v!==yp.dependency)w===null?this[v](u):this[v](u,...w);else for(let y of w){this.dependencyTracker?.recordNamedData(y,u);let _=y.startsWith("g_")?m:b;if(!_.has(y))return _.get(y,n),u}if(u++,u===c)return u;if(f&&++d>mB){if(Date.now()>h)return n(),u;d=0}}}endDrawing(){re(this,Xs,Wx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),re(this,Xs,qx).call(this)}_scaleImage(e,t){let n=e.width??e.displayWidth,i=e.height??e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=n,u=i,c="prescale1",f,h;for(;o>2&&a>1||s>2&&u>1;){let d=a,m=u;o>2&&a>1&&(d=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/d),s>2&&u>1&&(m=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/m),f=this.cachedCanvases.getCanvas(c,d,m),h=f.context,h.clearRect(0,0,d,m),h.drawImage(e,0,0,a,u,0,0,d,m),e=f.canvas,a=d,u=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e,t){let n=this.ctx,{width:i,height:o}=t,s=this.current.fillColor,a=this.current.patternFill,u=Tr(n),c,f,h,d;if((t.bitmap||t.data)&&t.count>1){let K=t.bitmap||t.data.buffer;f=JSON.stringify(a?u:[u.slice(0,4),s]),c=this._cachedBitmapsMap.get(K),c||(c=new Map,this._cachedBitmapsMap.set(K,c));let ie=c.get(f);if(ie&&!a){let j=Math.round(Math.min(u[0],u[2])+u[4]),q=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,ls.transformAndFill),{canvas:ie,offsetX:j,offsetY:q}}h=ie}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,o),bB(d.context,t));let m=it.transform(u,[1/i,0,0,-1/o,0,0]);m=it.transform(m,[1,0,0,1,0,-o]);let b=Uh.slice();it.axialAlignedBoundingBox([0,0,i,o],m,b);let[v,w,y,_]=b,E=Math.round(y-v)||1,S=Math.round(_-w)||1,A=this.cachedCanvases.getCanvas("fillCanvas",E,S),P=A.context,R=v,Y=w;P.translate(-R,-Y),P.transform(...m),h||(h=this._scaleImage(d.canvas,fo(P)),h=h.img,c&&a&&c.set(f,h)),P.imageSmoothingEnabled=wB(Tr(P),t.interpolate),Ew(P,h,0,0,h.width,h.height,0,0,i,o),P.globalCompositeOperation="source-in";let te=it.transform(fo(P),[1,0,0,1,-R,-Y]);return P.fillStyle=a?s.getPattern(n,this,te,Dn.FILL,e):s,P.fillRect(0,0,i,o),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(f,A.canvas)),this.dependencyTracker?.recordDependencies(e,ls.transformAndFill),{canvas:A.canvas,offsetX:Math.round(R),offsetY:Math.round(Y)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=cV[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=fV[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(let[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;let s=this.ctx=o.context;s.setTransform(this.suspendedCtx.getTransform()),Ig(this.suspendedCtx,s),uV(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ig(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){let o=i[0],s=i[1],a=i[2]-o,u=i[3]-s;a===0||u===0||(this.genericComposeSMask(t.context,n,a,u,t.subtype,t.backdrop,t.transferMap,o,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,o,s,a,u,c,f,h){let d=e.canvas,m=u-f,b=c-h;if(s)if(m<0||b<0||m+n>d.width||b+i>d.height){let w=this.cachedCanvases.getCanvas("maskExtension",n,i),y=w.context;y.drawImage(d,-m,-b),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",d=w.canvas,m=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let w=new Path2D;w.rect(m,b,n,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(m,b,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));let v=new Path2D;v.rect(u,c,n,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(d,m,b,n,i,u,c,n,i),t.restore()}save(e){this.inSMaskMode&&Ig(this.ctx,this.suspendedCtx),this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ig(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,o,s,a){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,o,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[o]=n;if(!i){o||(o=n[0]=new Path2D),this[t](e,o);return}if(this.dependencyTracker!==null){let s=t===yp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}o instanceof Path2D||(o=n[0]=kB(o)),it.axialAlignedBoundingBox(i,Tr(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){let i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){let s=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,fo(i),Dn.STROKE,e),s){let a=new Path2D;a.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=a}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,ls.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Dn.STROKE,Tr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){let i=this.ctx,o=this.current.fillColor,s=this.current.patternFill,a=!1;if(s){let c=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=o.getPattern(i,this,fo(i),Dn.FILL,e),c){let f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=f}a=!0}let u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,ls.fill),a&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,ls.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=hV}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=vB}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){let t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){let{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){let i=new Path2D,o=n.getTransform().invertSelf();for(let{transform:s,x:a,y:u,fontSize:c,path:f}of t)f&&i.addPath(f,new DOMMatrix(s).preMultiplySelf(o).translate(a,u).scale(c,-c));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);let i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||qA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;let s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`,u="normal";i.black?u="900":i.bold&&(u="bold");let c=i.italic?"italic":"normal",f=n;n<pB?f=pB:n>gB&&(f=gB),this.current.fontSizeScale=n/f,this.ctx.font=`${c} ${u} ${f}px ${a}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);let{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,o,s){let a=this.ctx,u=this.current,c=u.font,f=u.textRenderingMode,h=u.fontSize/u.fontSizeScale,d=f&on.FILL_STROKE_MASK,m=!!(f&on.ADD_TO_PATH_FLAG),b=u.patternFill&&!c.missingFile,v=u.patternStroke&&!c.missingFile,w;if((c.disableFontFace||m||b||v)&&!c.missingFile&&(w=c.getPathGenerator(this.commonObjs,t)),w&&(c.disableFontFace||b||v)){a.save(),a.translate(n,i),a.scale(h,-h),this.dependencyTracker?.recordCharacterBBox(e,a,c);let y;if(d===on.FILL||d===on.FILL_STROKE)if(o){y=a.getTransform(),a.setTransform(...o);let _=re(this,Xs,Hx).call(this,w,y,o);a.fill(_)}else a.fill(w);if(d===on.STROKE||d===on.FILL_STROKE)if(s){y||(y=a.getTransform()),a.setTransform(...s);let{a:_,b:E,c:S,d:A}=y,P=it.inverseTransform(s),R=it.transform([_,E,S,A,0,0],P);it.singularValueDecompose2dScale(R,Yi),a.lineWidth*=Math.max(Yi[0],Yi[1])/h,a.stroke(re(this,Xs,Hx).call(this,w,y,s))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(d===on.FILL||d===on.FILL_STROKE)&&(a.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t))),(d===on.STROKE||d===on.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t)).recordDependencies(e,ls.stroke),a.strokeText(t,n,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Tr(a),x:n,y:i,fontSize:h,path:w}),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i))}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return wt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ls.showText).resetBBox(e),this.current.textRenderingMode&on.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());let n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}let o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}let s=this.ctx,a=n.fontSizeScale,u=n.charSpacing,c=n.wordSpacing,f=n.fontDirection,h=n.textHScale*f,d=t.length,m=i.vertical,b=m?1:-1,v=i.defaultVMetrics,w=o*n.fontMatrix[0],y=n.textRenderingMode===on.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),f>0?s.scale(h,-1):s.scale(h,1);let _,E,S=n.textRenderingMode&on.FILL_STROKE_MASK,A=S===on.FILL||S===on.FILL_STROKE,P=S===on.STROKE||S===on.FILL_STROKE;if(A&&n.patternFill){s.save();let ie=n.fillColor.getPattern(s,this,fo(s),Dn.FILL,e);_=Tr(s),s.restore(),s.fillStyle=ie}if(P&&n.patternStroke){s.save();let ie=n.strokeColor.getPattern(s,this,fo(s),Dn.STROKE,e);E=Tr(s),s.restore(),s.strokeStyle=ie}let R=n.lineWidth,Y=n.textMatrixScale;if(Y===0||R===0?P&&(R=this.getSinglePixelWidth()):R/=Y,a!==1&&(s.scale(a,a),R/=a),s.lineWidth=R,i.isInvalidPDFjsFont){let ie=[],j=0;for(let fe of t)ie.push(fe.unicode),j+=fe.width;let q=ie.join("");if(s.fillText(q,0,0),this.dependencyTracker!==null){let fe=s.measureText(q);this.dependencyTracker.recordBBox(e,this.ctx,-fe.actualBoundingBoxLeft,fe.actualBoundingBoxRight,-fe.actualBoundingBoxAscent,fe.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=j*w*h,s.restore(),this.compose();return}let te=0,K;for(K=0;K<d;++K){let ie=t[K];if(typeof ie=="number"){te+=b*ie*o/1e3;continue}let j=!1,q=(ie.isSpace?c:0)+u,fe=ie.fontChar,Ee=ie.accent,ve,H,D=ie.width;if(m){let L=ie.vmetric||v,$=-(ie.vmetric?L[1]:D*.5)*w,M=L[2]*w;D=L?-L[0]:D,ve=$/a,H=(te+M)/a}else ve=te/a,H=0;let ee;if(i.remeasure&&D>0){ee=s.measureText(fe);let L=ee.width*1e3/o*a;if(D<L&&this.isFontSubpixelAAEnabled){let $=D/L;j=!0,s.save(),s.scale($,1),ve/=$}else D!==L&&(ve+=(D-L)/2e3*o/a)}if(this.contentVisible&&(ie.isInFont||i.missingFile)){if(y&&!Ee)s.fillText(fe,ve,H),this.dependencyTracker?.recordCharacterBBox(e,s,ee?{bbox:null}:i,o/a,ve,H,()=>ee??s.measureText(fe));else if(this.paintChar(e,fe,ve,H,_,E),Ee){let L=ve+o*Ee.offset.x/a,$=H-o*Ee.offset.y/a;this.paintChar(e,Ee.fontChar,L,$,_,E)}}let B=m?D*w-q*f:D*w+q*f;te+=B,j&&s.restore()}m?n.y-=te:n.x+=te*h,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){let n=this.ctx,i=this.current,o=i.font,s=i.fontSize,a=i.fontDirection,u=o.vertical?1:-1,c=i.charSpacing,f=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||qA,m=t.length,b=i.textRenderingMode===on.INVISIBLE,v,w,y,_;if(b||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,a);let E=this.dependencyTracker;for(this.dependencyTracker=E?new xv(E,e):null,v=0;v<m;++v){if(w=t[v],typeof w=="number"){_=u*w*s/1e3,this.ctx.translate(_,0),i.x+=_*h;continue}let S=(w.isSpace?f:0)+c,A=o.charProcOperatorList[w.operatorListId];A?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...d),this.executeOperatorList(A),this.restore()):_t(`Type3 character "${w.operatorListId}" is not available.`);let P=[w.width,0];it.applyTransform(P,d),y=P[0]*s+S,n.translate(y,0),i.x+=y*h}n.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,o,s,a){let u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,o,a).recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){let i=this.baseTransform||Tr(this.ctx),o={createCanvasGraphics:(s,a)=>new RT(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new xv(this.dependencyTracker,a,!0):null)};n=new $x(t,this.ctx,o,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=oV(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;let n=this.ctx;this.save(e);let i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,fo(n),Dn.SHADING,e);let o=fo(n);if(o){let{width:s,height:a}=n.canvas,u=Uh.slice();it.axialAlignedBoundingBox([0,0,s,a],o,u);let[c,f,h,d]=u;this.ctx.fillRect(c,f,h-c,d-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ls.transform).recordDependencies(e,ls.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){dr("Should not call beginInlineImage")}beginImageData(){dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Tr(this.ctx),n)){it.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);let[i,o,s,a]=n,u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let n=this.ctx;t.isolated||u_("TODO: Support non-isolated groups."),t.knockout&&_t("Knockout groups not supported.");let i=Tr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=Uh.slice();it.axialAlignedBoundingBox(t.bbox,Tr(n),o);let s=[0,0,n.canvas.width,n.canvas.height];o=it.intersect(o,s)||[0,0,0,0];let a=Math.floor(o[0]),u=Math.floor(o[1]),c=Math.max(Math.ceil(o[2])-a,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,c,f]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(h,c,f),m=d.context;m.translate(-a,-u),m.transform(...i);let b=new Path2D,[v,w,y,_]=t.bbox;if(b.rect(v,w,y-v,_-w),t.matrix){let E=new Path2D;E.addPath(b,new DOMMatrix(t.matrix)),b=E}m.clip(b),t.smask&&this.smaskStack.push({canvas:d.canvas,context:m,offsetX:a,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,u),n.save()),Ig(n,m),this.ctx=m,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;let n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let o=Tr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);let s=Uh.slice();it.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,s),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,i,o,s){if(re(this,Xs,Wx).call(this),Aw(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){let a=n[2]-n[0],u=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=u,it.singularValueDecompose2dScale(Tr(this.ctx),Yi);let{viewportScale:c}=this,f=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(u*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(f,h);let{canvas:d,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Yi[0],0,0,-Yi[1],0,u*Yi[1]),Aw(this.ctx)}else{Aw(this.ctx),this.endPath(e);let c=new Path2D;c.rect(n[0],n[1],a,u),this.ctx.clip(c)}}this.current=new Sv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),re(this,Xs,qx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;let n=t.count;t=this.getObject(e,t.data,t),t.count=n;let i=this.ctx,o=this._createMaskCanvas(e,t),s=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+s.width,o.offsetY,o.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,o=0,s,a){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);let u=this.ctx;u.save();let c=Tr(u);u.transform(n,i,o,s,0,0);let f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-c[4],f.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let h=0,d=a.length;h<d;h+=2){let m=it.transform(c,[n,i,o,s,a[h],a[h+1]]);u.drawImage(f.canvas,m[4],m[5]),this.dependencyTracker?.recordBBox(e,this.ctx,m[4],m[4]+f.canvas.width,m[5],m[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,ls.transformAndFill);for(let s of t){let{data:a,width:u,height:c,transform:f}=s,h=this.cachedCanvases.getCanvas("maskCanvas",u,c),d=h.context;d.save();let m=this.getObject(e,a,s);bB(d,m),d.globalCompositeOperation="source-in",d.fillStyle=o?i.getPattern(d,this,fo(n),Dn.FILL,e):i,d.fillRect(0,0,u,c),d.restore(),n.save(),n.transform(...f),n.scale(1,-1),Ew(n,h.canvas,0,0,u,c,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,u,0,c),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;let n=this.getObject(e,t);if(!n){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,o){if(!this.contentVisible)return;let s=this.getObject(e,t);if(!s){_t("Dependent image isn't ready yet");return}let a=s.width,u=s.height,c=[];for(let f=0,h=o.length;f<h;f+=2)c.push({transform:[n,0,0,i,o[f],o[f+1]],x:0,y:0,w:a,h:u});this.paintInlineImageXObjectGroup(e,s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,i),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;let n=t.width,i=t.height,o=this.ctx;this.save(e);let{filter:s}=o;s!=="none"&&s!==""&&(o.filter="none"),o.scale(1/n,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{let f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;yB(f,t),a=this.applyTransferMapsToCanvas(f)}let u=this._scaleImage(a,fo(o));o.imageSmoothingEnabled=wB(Tr(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-i,0).recordDependencies(e,ls.imageXObject).recordOperation(e),Ew(o,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;let i=this.ctx,o;if(t.bitmap)o=t.bitmap;else{let s=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",s,a).context;yB(c,t),o=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(e);for(let s of n)i.save(),i.transform(...s.transform),i.scale(1,-1),Ew(i,o,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ls.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){let i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);let o=this.ctx;this.pendingClip?(i||(this.pendingClip===vB?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Tr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:i,d:o}=this.ctx.getTransform(),s,a;if(n===0&&i===0){let u=Math.abs(t),c=Math.abs(o);if(u===c)if(e===0)s=a=1/u;else{let f=u*e;s=a=f<1?1/f:1}else if(e===0)s=1/u,a=1/c;else{let f=u*e,h=c*e;s=f<1?1/f:1,a=h<1?1/h:1}}else{let u=Math.abs(t*o-n*i),c=Math.hypot(t,n),f=Math.hypot(i,o);if(e===0)s=f/u,a=c/u;else{let h=e*u;s=f>h?f/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){let{ctx:n,current:{lineWidth:i}}=this,[o,s]=this.getScaleForStroking();if(o===s){n.lineWidth=(i||1)*o,n.stroke(e);return}let a=n.getLineDash();t&&n.save(),n.scale(o,s),$A.a=1/o,$A.d=1/s;let u=new Path2D;if(u.addPath(e,$A),a.length>0){let c=Math.max(o,s);n.setLineDash(a.map(f=>f/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Xs=new WeakSet,Wx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},qx=function(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Hx=function(e,t,n){let i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};qh=RT;for(let r in yp)qh.prototype[r]!==void 0&&(qh.prototype[yp[r]]=qh.prototype[r]);_s=class{static get workerPort(){return l(this,oy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");k(this,oy,e)}static get workerSrc(){return l(this,ay)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");k(this,ay,e)}};oy=new WeakMap,ay=new WeakMap,V(_s,oy,null),V(_s,ay,"");Gx=class{constructor({parsedData:e,rawData:t}){V(this,Cd);V(this,ly);k(this,Cd,e),k(this,ly,t)}getRaw(){return l(this,ly)}get(e){return l(this,Cd).get(e)??null}[Symbol.iterator](){return l(this,Cd).entries()}};Cd=new WeakMap,ly=new WeakMap;Lh=Symbol("INTERNAL"),Vx=class{constructor(e,{name:t,intent:n,usage:i,rbGroups:o}){V(this,uy,!1);V(this,cy,!1);V(this,fy,!1);V(this,Rd,!0);k(this,uy,!!(e&Vi.DISPLAY)),k(this,cy,!!(e&Vi.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(l(this,fy))return l(this,Rd);if(!l(this,Rd))return!1;let{print:e,view:t}=this.usage;return l(this,uy)?t?.viewState!=="OFF":l(this,cy)?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Lh&&dr("Internal method `_setVisible` called."),k(this,fy,n),k(this,Rd,t)}};uy=new WeakMap,cy=new WeakMap,fy=new WeakMap,Rd=new WeakMap;Yx=class{constructor(e,t=Vi.DISPLAY){V(this,hy);V(this,Xl,null);V(this,sr,new Map);V(this,Dd,null);V(this,Id,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,k(this,Id,e.order);for(let n of e.groups)l(this,sr).set(n.id,new Vx(t,n));if(e.baseState==="OFF")for(let n of l(this,sr).values())n._setVisible(Lh,!1);for(let n of e.on)l(this,sr).get(n)._setVisible(Lh,!0);for(let n of e.off)l(this,sr).get(n)._setVisible(Lh,!1);k(this,Dd,this.getHash())}}isVisible(e){if(l(this,sr).size===0)return!0;if(!e)return u_("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,sr).has(e.id)?l(this,sr).get(e.id).visible:(_t(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return re(this,hy,Xx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!1}return!0}return _t(`Unknown optional content policy ${e.policy}.`),!0}return _t(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let i=l(this,sr).get(e);if(!i){_t(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(let o of i.rbGroups)for(let s of o)s!==e&&l(this,sr).get(s)?._setVisible(Lh,!1,!0);i._setVisible(Lh,!!t,!0),k(this,Xl,null)}setOCGState({state:e,preserveRB:t}){let n;for(let i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}let o=l(this,sr).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}k(this,Xl,null)}get hasInitialVisibility(){return l(this,Dd)===null||this.getHash()===l(this,Dd)}getOrder(){return l(this,sr).size?l(this,Id)?l(this,Id).slice():[...l(this,sr).keys()]:null}getGroup(e){return l(this,sr).get(e)||null}getHash(){if(l(this,Xl)!==null)return l(this,Xl);let e=new hv;for(let[t,n]of l(this,sr))e.update(`${t}:${n.visible}`);return k(this,Xl,e.hexdigest())}[Symbol.iterator](){return l(this,sr).entries()}};Xl=new WeakMap,sr=new WeakMap,Dd=new WeakMap,Id=new WeakMap,hy=new WeakSet,Xx=function(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let i=1;i<t;i++){let o=e[i],s;if(Array.isArray(o))s=re(this,hy,Xx).call(this,o);else if(l(this,sr).has(o))s=l(this,sr).get(o).visible;else return _t(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};Kx=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:o,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){let u=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,c)=>{this._onReceiveData({begin:u,chunk:c})}),e.addProgressListener((u,c)=>{this._onProgress({loaded:u,total:c})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Bt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new Zx(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Jx(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},Zx=class{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=c_(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Jx=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};Qx=class{constructor(e){Je(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new eS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new tS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},eS=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),i=t.url;fetch(i,_F(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=f_(o.url),!vF(o.status))throw h0(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();let s=o.headers,{allowRangeRequests:a,suggestedLength:u}=bF({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=wF(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ys("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:EF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},tS=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);let s=i.url;fetch(s,_F(o,this._withCredentials,this._abortController)).then(a=>{let u=f_(a.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!vF(a.status))throw h0(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:EF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},zA=200,WA=206;rS=class{constructor({url:e,httpHeaders:t,withCredentials:n}){Je(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yF(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[o,s]of this.headers)t.setRequestHeader(o,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=WA):i.expectedStatus=zA,t.responseType="arraybuffer",Bt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}let o=i.status||zA;if(!(o===zA&&n.expectedStatus===WA)&&o!==n.expectedStatus){n.onError(i.status);return}let a=pV(i);if(o===WA){let u=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(_t('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},nS=class{constructor(e){this._source=e,this._manager=new rS(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iS(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new sS(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},iS=class{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=f_(t.responseURL);let n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[u,...c]=a.split(": ");return[u,c.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=bF({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=wF(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=h0(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},sS=class{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=f_(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=h0(e,this._url));for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},gV=/^[a-z][a-z0-9\-+.]+:/i;oS=class{constructor(e){this.source=e,this.url=mV(e.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new aS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new lS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},aS=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=h0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ys("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},lS=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=e.source;this._isStreamingSupported=!i.disableStream;let o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Og=Symbol("INITIAL_DATA"),Tv=class{constructor(){V(this,dy);V(this,Ni,Object.create(null))}get(e,t=null){if(t){let i=re(this,dy,uS).call(this,e);return i.promise.then(()=>t(i.data)),null}let n=l(this,Ni)[e];if(!n||n.data===Og)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=l(this,Ni)[e];return!!t&&t.data!==Og}delete(e){let t=l(this,Ni)[e];return!t||t.data===Og?!1:(delete l(this,Ni)[e],!0)}resolve(e,t=null){let n=re(this,dy,uS).call(this,e);n.data=t,n.resolve()}clear(){for(let e in l(this,Ni)){let{data:t}=l(this,Ni)[e];t?.bitmap?.close()}k(this,Ni,Object.create(null))}*[Symbol.iterator](){for(let e in l(this,Ni)){let{data:t}=l(this,Ni)[e];t!==Og&&(yield[e,t])}}};Ni=new WeakMap,dy=new WeakSet,uS=function(e){var t;return(t=l(this,Ni))[e]||(t[e]={...Promise.withResolvers(),data:Og})};yV=1e5,_B=30,An=class An{constructor({textContentSource:e,container:t,viewport:n}){V(this,il);V(this,Kl,Promise.withResolvers());V(this,ki,null);V(this,py,!1);V(this,gy,!!globalThis.FontInspector?.enabled);V(this,Wc,null);V(this,La,null);V(this,my,0);V(this,yy,0);V(this,qc,null);V(this,by,null);V(this,Od,0);V(this,Zl,0);V(this,Nd,Object.create(null));V(this,wy,[]);V(this,kd,null);V(this,Hc,[]);V(this,vy,new WeakMap);V(this,_y,null);var u;if(e instanceof ReadableStream)k(this,kd,e);else if(typeof e=="object")k(this,kd,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,ki,k(this,by,t)),k(this,Zl,n.scale*Bo.pixelRatio),k(this,Od,n.rotation),k(this,La,{div:null,properties:null,ctx:null});let{pageWidth:i,pageHeight:o,pageX:s,pageY:a}=n.rawDims;k(this,_y,[1,0,0,-1,-s,a+o]),k(this,yy,i),k(this,my,o),re(u=An,Ki,SF).call(u),t.style.setProperty("--min-font-size",l(An,Pd)),wu(t,n),l(this,Kl).promise.finally(()=>{l(An,Md).delete(this),k(this,La,null),k(this,Nd,null)}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=Ur.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{l(this,qc).read().then(({value:t,done:n})=>{if(n){l(this,Kl).resolve();return}l(this,Wc)??k(this,Wc,t.lang),Object.assign(l(this,Nd),t.styles),re(this,il,AF).call(this,t.items),e()},l(this,Kl).reject)};return k(this,qc,l(this,kd).getReader()),l(An,Md).add(this),e(),l(this,Kl).promise}update({viewport:e,onBefore:t=null}){var o;let n=e.scale*Bo.pixelRatio,i=e.rotation;if(i!==l(this,Od)&&(t?.(),k(this,Od,i),wu(l(this,by),{rotation:i})),n!==l(this,Zl)){t?.(),k(this,Zl,n);let s={div:null,properties:null,ctx:re(o=An,Ki,Fw).call(o,l(this,Wc))};for(let a of l(this,Hc))s.properties=l(this,vy).get(a),s.div=a,re(this,il,cS).call(this,s)}}cancel(){let e=new Ys("TextLayer task cancelled.");l(this,qc)?.cancel(e).catch(()=>{}),k(this,qc,null),l(this,Kl).reject(e)}get textDivs(){return l(this,Hc)}get textContentItemsStr(){return l(this,wy)}static cleanup(){if(!(l(this,Md).size>0)){l(this,Ld).clear();for(let{canvas:e}of l(this,Gc).values())e.remove();l(this,Gc).clear()}}};Kl=new WeakMap,ki=new WeakMap,py=new WeakMap,gy=new WeakMap,Wc=new WeakMap,La=new WeakMap,my=new WeakMap,yy=new WeakMap,qc=new WeakMap,by=new WeakMap,Od=new WeakMap,Zl=new WeakMap,Nd=new WeakMap,wy=new WeakMap,kd=new WeakMap,Hc=new WeakMap,vy=new WeakMap,_y=new WeakMap,Ld=new WeakMap,Gc=new WeakMap,Ey=new WeakMap,Pd=new WeakMap,Md=new WeakMap,il=new WeakSet,AF=function(e){var i,o;if(l(this,py))return;(o=l(this,La)).ctx??(o.ctx=re(i=An,Ki,Fw).call(i,l(this,Wc)));let t=l(this,Hc),n=l(this,wy);for(let s of e){if(t.length>yV){_t("Ignoring additional textDivs for performance reasons."),k(this,py,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let a=l(this,ki);k(this,ki,document.createElement("span")),l(this,ki).classList.add("markedContent"),s.id&&l(this,ki).setAttribute("id",`${s.id}`),a.append(l(this,ki))}else s.type==="endMarkedContent"&&k(this,ki,l(this,ki).parentNode);continue}n.push(s.str),re(this,il,xF).call(this,s)}},xF=function(e){var b;let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Hc).push(t);let i=it.transform(l(this,_y),e.transform),o=Math.atan2(i[1],i[0]),s=l(this,Nd)[e.fontName];s.vertical&&(o+=Math.PI/2);let a=l(this,gy)&&s.fontSubstitution||s.fontFamily;a=An.fontFamilyMap.get(a)||a;let u=Math.hypot(i[2],i[3]),c=u*re(b=An,Ki,TF).call(b,a,s,l(this,Wc)),f,h;o===0?(f=i[4],h=i[5]-c):(f=i[4]+c*Math.sin(o),h=i[5]-c*Math.cos(o));let d=t.style;d.left=`${(100*f/l(this,yy)).toFixed(2)}%`,d.top=`${(100*h/l(this,my)).toFixed(2)}%`,d.setProperty("--font-height",`${u.toFixed(2)}px`),d.fontFamily=a,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,gy)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let v=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);v!==w&&Math.max(v,w)/Math.min(v,w)>1.5&&(m=!0)}if(m&&(n.canvasWidth=s.vertical?e.height:e.width),l(this,vy).set(t,n),l(this,La).div=t,l(this,La).properties=n,re(this,il,cS).call(this,l(this,La)),n.hasText&&l(this,ki).append(t),n.hasEOL){let v=document.createElement("br");v.setAttribute("role","presentation"),l(this,ki).append(v)}},cS=function(e){var s;let{div:t,properties:n,ctx:i}=e,{style:o}=t;if(n.canvasWidth!==0&&n.hasText){let{fontFamily:a}=o,{canvasWidth:u,fontSize:c}=n;re(s=An,Ki,fS).call(s,i,c*l(this,Zl),a);let{width:f}=i.measureText(t.textContent);f>0&&o.setProperty("--scale-x",u*l(this,Zl)/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},Ki=new WeakSet,Fw=function(e=null){let t=l(this,Gc).get(e||(e=""));if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Gc).set(e,t),l(this,Ey).set(t,{size:0,family:""})}return t},fS=function(e,t,n){let i=l(this,Ey).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},SF=function(){if(l(this,Pd)!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),k(this,Pd,e.getBoundingClientRect().height),e.remove()},TF=function(e,t,n){let i=l(this,Ld).get(e);if(i)return i;let o=re(this,Ki,Fw).call(this,n);o.canvas.width=o.canvas.height=_B,re(this,Ki,fS).call(this,o,_B,e);let s=o.measureText(""),a=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let c=.8;return a?c=a/(a+u):(Ur.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),l(this,Ld).set(e,c),c},V(An,Ki),V(An,Ld,new Map),V(An,Gc,new Map),V(An,Ey,new WeakMap),V(An,Pd,null),V(An,Md,new Set);vp=An,bV=100;Qv=class Qv{constructor(){Je(this,"_capability",Promise.withResolvers());Je(this,"_transport",null);Je(this,"_worker",null);Je(this,"docId",`d${tn(Qv,Jv)._++}`);Je(this,"destroyed",!1);Je(this,"onPassword",null);Je(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Jv=new WeakMap,V(Qv,Jv,0);hS=Qv,fm=class{constructor(e,t,n=!1,i=null){V(this,Vc,Promise.withResolvers());V(this,Ay,[]);V(this,xy,[]);V(this,Sy,[]);V(this,Ty,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){l(this,Ty).push(e)}addProgressListener(e){l(this,Sy).push(e)}addProgressiveReadListener(e){l(this,xy).push(e)}addProgressiveDoneListener(e){l(this,Ay).push(e)}onDataRange(e,t){for(let n of l(this,Ty))n(e,t)}onDataProgress(e,t){l(this,Vc).promise.then(()=>{for(let n of l(this,Sy))n(e,t)})}onDataProgressiveRead(e){l(this,Vc).promise.then(()=>{for(let t of l(this,xy))t(e)})}onDataProgressiveDone(){l(this,Vc).promise.then(()=>{for(let e of l(this,Ay))e()})}transportReady(){l(this,Vc).resolve()}requestDataRange(e,t){dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};Vc=new WeakMap,Ay=new WeakMap,xy=new WeakMap,Sy=new WeakMap,Ty=new WeakMap;dS=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},pS=class{constructor(e,t,n,i=!1){V(this,Yc);V(this,Pa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new lv:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Tv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new am({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:o=Za.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:u=null,annotationCanvasMap:c=null,pageColors:f=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:m=!1,operationsFilter:b=null}){this._stats?.time("Overall");let v=this._transport.getRenderingIntent(i,o,h,d),{renderingIntent:w,cacheKey:y}=v;k(this,Pa,!1),u||(u=this._transport.getOptionalContentConfig(w));let _=this._intentStates.get(y);_||(_=Object.create(null),this._intentStates.set(y,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);let E=!!(w&Vi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));let S=!!(this._pdfBug&&globalThis.StepperManager?.enabled),A=!this.recordedBBoxes&&(m||S),P=te=>{if(_.renderTasks.delete(R),A){let K=R.gfx?.dependencyTracker.take();K&&(R.stepper&&R.stepper.setOperatorBBoxes(K,R.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=K))}E&&k(this,Pa,!0),re(this,Yc,Gg).call(this),te?(R.capability.reject(te),this._abortOperatorList({intentState:_,reason:te instanceof Error?te:new Error(te)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new yS({callback:P,params:{canvas:t,canvasContext:e,dependencyTracker:A?new Px(t,_.operatorList.length,S):null,viewport:n,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:b});(_.renderTasks||(_.renderTasks=new Set)).add(R);let Y=R.task;return Promise.all([_.displayReadyCapability.promise,u]).then(([te,K])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(K.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:te,optionalContentConfig:K}),R.operatorListChanged()}).catch(P),Y}getOperatorList({intent:e="display",annotationMode:t=Za.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}let s=this._transport.getRenderingIntent(e,t,n,i,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>sm.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,i){function o(){s.read().then(function({value:u,done:c}){if(c){n(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),o()},i)}let s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),k(this,Pa,!1),Promise.all(e)}cleanup(e=!1){k(this,Pa,!0);let t=re(this,Yc,Gg).call(this);return e&&t&&this._stats&&(this._stats=new lv),t}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&re(this,Yc,Gg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){let{map:o,transfer:s}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},s).getReader(),c=this._intentStates.get(t);c.streamReader=u;let f=()=>{u.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),f())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let d of c.renderTasks)d.operatorListChanged();re(this,Yc,Gg).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof wp){let i=bV;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ys(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}};Pa=new WeakMap,Yc=new WeakSet,Gg=function(){if(!l(this,Pa)||this.destroyed)return!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,Pa,!1),!0};_r=class _r{constructor({name:e=null,port:t=null,verbosity:n=GG()}={}){V(this,ei);V(this,Jl,Promise.withResolvers());V(this,js,null);V(this,Ma,null);V(this,Xc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(l(_r,Zc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(_r,Zc).set(t,this),re(this,ei,RF).call(this,t)}else re(this,ei,DF).call(this)}get promise(){return l(this,Jl).promise}get port(){return l(this,Ma)}get messageHandler(){return l(this,js)}destroy(){this.destroyed=!0,l(this,Xc)?.terminate(),k(this,Xc,null),l(_r,Zc).delete(l(this,Ma)),k(this,Ma,null),l(this,js)?.destroy(),k(this,js,null)}static create(e){let t=l(this,Zc).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _r(e)}static get workerSrc(){if(_s.workerSrc)return _s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Bd,jw)?l(this,Bd,jw):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jl=new WeakMap,js=new WeakMap,Ma=new WeakMap,Xc=new WeakMap,e_=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,ei=new WeakSet,Uw=function(){l(this,Jl).resolve(),l(this,js).send("configure",{verbosity:this.verbosity})},RF=function(e){k(this,Ma,e),k(this,js,new fc("main","worker",e)),l(this,js).on("ready",()=>{}),re(this,ei,Uw).call(this)},DF=function(){if(l(_r,Kc)||l(_r,Bd,jw)){re(this,ei,Vg).call(this);return}let{workerSrc:e}=_r;try{_r._isSameOrigin(window.location,e)||(e=_r._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new fc("main","worker",t),i=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?l(this,Jl).reject(new Error("Worker was destroyed")):re(this,ei,Vg).call(this)},o=new AbortController;t.addEventListener("error",()=>{l(this,Xc)||i()},{signal:o.signal}),n.on("test",a=>{if(o.abort(),this.destroyed||!a){i();return}k(this,js,n),k(this,Ma,t),k(this,Xc,t),re(this,ei,Uw).call(this)}),n.on("ready",a=>{if(o.abort(),this.destroyed){i();return}try{s()}catch{re(this,ei,Vg).call(this)}});let s=()=>{let a=new Uint8Array;n.send("test",a,[a.buffer])};s();return}catch{u_("The worker has been disabled.")}re(this,ei,Vg).call(this)},Vg=function(){l(_r,Kc)||(_t("Setting up fake worker."),k(_r,Kc,!0)),_r._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,Jl).reject(new Error("Worker was destroyed"));return}let t=new Ax;k(this,Ma,t);let n=`fake${tn(_r,e_)._++}`,i=new fc(n+"_worker",n,t);e.setup(i,t),k(this,js,new fc(n,n+"_worker",t)),re(this,ei,Uw).call(this)}).catch(e=>{l(this,Jl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Bd=new WeakSet,jw=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},V(_r,Bd),V(_r,e_,0),V(_r,Kc,!1),V(_r,Zc,new WeakMap),Qn&&(k(_r,Kc,!0),_s.workerSrc||(_s.workerSrc="./pdf.worker.mjs")),_r._isSameOrigin=(e,t)=>{let n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;let i=new URL(t,n);return n.origin===i.origin},_r._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},_r.fromPort=e=>{if(eV("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _r.create(e)};_p=_r,gS=class{constructor(e,t,n,i,o,s){V(this,Jc);V(this,Ba,new Map);V(this,Co,new Map);V(this,Fd,new Map);V(this,Ud,new Map);V(this,Fa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Tv,this.fontLoader=new yx({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return wt(this,"annotationStorage",new um)}getRenderingIntent(e,t=Za.ENABLE,n=null,i=!1,o=!1){let s=Vi.DISPLAY,a=mx;switch(e){case"any":s=Vi.ANY;break;case"display":break;case"print":s=Vi.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${e}`)}let u=s&Vi.PRINT&&n instanceof dv?n:this.annotationStorage;switch(t){case Za.DISABLE:s+=Vi.ANNOTATIONS_DISABLE;break;case Za.ENABLE:break;case Za.ENABLE_FORMS:s+=Vi.ANNOTATIONS_FORMS;break;case Za.ENABLE_STORAGE:s+=Vi.ANNOTATIONS_STORAGE,a=u.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Vi.IS_EDITING),o&&(s+=Vi.OPLIST);let{ids:c,hash:f}=u.modifiedIds,h=[s,a.hash,f];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),l(this,Fa)?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of l(this,Co).values())e.push(n._destroy());l(this,Co).clear(),l(this,Fd).clear(),l(this,Ud).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ba).clear(),this.filterFactory.destroy(),vp.cleanup(),this._networkStream?.cancelAllRequests(new Ys("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){i.close();return}Bt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:o,contentLength:s}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){i.close();return}Bt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{o.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new dS(n,this))}),e.on("DocException",n=>{t._capability.reject(hi(n))}),e.on("PasswordRequest",n=>{k(this,Fa,Promise.withResolvers());try{if(!t.onPassword)throw hi(n);let i=o=>{o instanceof Error?l(this,Fa).reject(o):l(this,Fa).resolve({password:o})};t.onPassword(i,n.code)}catch(i){l(this,Fa).reject(i)}return l(this,Fa).promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Co).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){let h=o.error;_t(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}let s=new wx(o),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,u=new bx(s,a,o.extra,o.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":let{imageRef:c}=o;Bt(c,"The imageRef must be defined.");for(let h of l(this,Co).values())for(let[,d]of h.objs)if(d?.ref===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new _x(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":let f=new vx(o);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,o,s])=>{if(this.destroyed)return;let a=l(this,Co).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=l(this,Fd).get(t);if(n)return n;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ud).set(o.refStr,e);let s=new pS(t,o,this,this._params.pdfBug);return l(this,Co).set(t,s),s});return l(this,Fd).set(t,i),i}getPageIndex(e){return Ex(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return re(this,Jc,Yg).call(this,"GetFieldObjects")}hasJSActions(){return re(this,Jc,Yg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return re(this,Jc,Yg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return re(this,Jc,Yg).call(this,"GetOptionalContentConfig").then(t=>new Yx(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=l(this,Ba).get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new Gx(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return l(this,Ba).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let t of l(this,Co).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ba).clear(),this.filterFactory.destroy(!0),vp.cleanup()}}cachedPageNumber(e){if(!Ex(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Ud).get(t)??null}};Ba=new WeakMap,Co=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,Fa=new WeakMap,Jc=new WeakSet,Yg=function(e,t=null){let n=l(this,Ba).get(e);if(n)return n;let i=this.messageHandler.sendWithPromise(e,t);return l(this,Ba).set(e,i),i};mS=class{constructor(e){V(this,Ql,null);Je(this,"onContinue",null);Je(this,"onError",null);k(this,Ql,e)}get promise(){return l(this,Ql).capability.promise}cancel(e=0){l(this,Ql).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=l(this,Ql).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=l(this,Ql);return e.form||e.canvas&&t?.size>0}};Ql=new WeakMap;uc=class uc{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:u,filterFactory:c,useRequestAnimationFrame:f=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:m=!1,operationsFilter:b=null}){V(this,eu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new mS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(l(uc,Qc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(uc,Qc).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:n,transform:i,background:o,dependencyTracker:s}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new qh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),l(this,eu)&&(window.cancelAnimationFrame(l(this,eu)),k(this,eu,null)),l(uc,Qc).delete(this._canvas),e||(e=new wp(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,eu,window.requestAnimationFrame(()=>{k(this,eu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(uc,Qc).delete(this._canvas),this.callback())))}};eu=new WeakMap,Qc=new WeakMap,V(uc,Qc,new WeakSet);yS=uc,IF="5.4.530",OF="50cc4adac",di=class di{constructor({editor:e=null,uiManager:t=null}){V(this,or);V(this,Li,null);V(this,ef,null);V(this,jd);V(this,un,null);V(this,Cy,!1);V(this,$d,!1);V(this,Ua,null);V(this,Ry);V(this,tu,null);V(this,$s,null);e?(k(this,$d,!1),k(this,Ua,e)):k(this,$d,!0),k(this,$s,e?._uiManager||t),k(this,Ry,l(this,$s)._eventBus),k(this,jd,e?.color?.toUpperCase()||l(this,$s)?.highlightColors.values().next().value||"#FFFF98"),l(di,Dy)||k(di,Dy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return wt(this,"_keyboardManager",new If([[["Escape","mac+Escape"],di.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],di.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],di.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],di.prototype._moveToPrevious],[["Home","mac+Home"],di.prototype._moveToBeginning],[["End","mac+End"],di.prototype._moveToEnd]]))}renderButton(){let e=k(this,Li,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Ua)&&(e.ariaControls=`${l(this,Ua).id}_colorpicker_dropdown`);let t=l(this,$s)._signal;e.addEventListener("click",re(this,or,sc).bind(this),{signal:t}),e.addEventListener("keydown",re(this,or,vS).bind(this),{signal:t});let n=k(this,ef,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,jd),e.append(n),e}renderMainDropdown(){let e=k(this,un,re(this,or,bS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,Li)){re(this,or,sc).call(this,e);return}let t=e.target.getAttribute("data-color");t&&re(this,or,wS).call(this,t,e)}_moveToNext(e){if(!l(this,or,Rl)){re(this,or,sc).call(this,e);return}if(e.target===l(this,Li)){l(this,un).firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===l(this,un)?.firstElementChild||e.target===l(this,Li)){l(this,or,Rl)&&this._hideDropdownFromKeyboard();return}l(this,or,Rl)||re(this,or,sc).call(this,e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!l(this,or,Rl)){re(this,or,sc).call(this,e);return}l(this,un).firstElementChild?.focus()}_moveToEnd(e){if(!l(this,or,Rl)){re(this,or,sc).call(this,e);return}l(this,un).lastElementChild?.focus()}hideDropdown(){l(this,un)?.classList.add("hidden"),l(this,Li).ariaExpanded="false",l(this,tu)?.abort(),k(this,tu,null)}_hideDropdownFromKeyboard(){if(!l(this,$d)){if(!l(this,or,Rl)){l(this,Ua)?.unselect();return}this.hideDropdown(),l(this,Li).focus({preventScroll:!0,focusVisible:l(this,Cy)})}}updateColor(e){if(l(this,ef)&&(l(this,ef).style.backgroundColor=e),!l(this,un))return;let t=l(this,$s).highlightColors.values();for(let n of l(this,un).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){l(this,Li)?.remove(),k(this,Li,null),k(this,ef,null),l(this,un)?.remove(),k(this,un,null)}};Li=new WeakMap,ef=new WeakMap,jd=new WeakMap,un=new WeakMap,Cy=new WeakMap,$d=new WeakMap,Ua=new WeakMap,Ry=new WeakMap,tu=new WeakMap,$s=new WeakMap,Dy=new WeakMap,or=new WeakSet,bS=function(){let e=document.createElement("div"),t=l(this,$s)._signal;e.addEventListener("contextmenu",Zi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Ua)&&(e.id=`${l(this,Ua).id}_colorpicker_dropdown`);for(let[n,i]of l(this,$s).highlightColors){let o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",l(di,Dy)[n]);let s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=i,o.ariaSelected=i===l(this,jd),o.addEventListener("click",re(this,or,wS).bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",re(this,or,vS).bind(this),{signal:t}),e},wS=function(e,t){t.stopPropagation(),l(this,Ry).dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},vS=function(e){di._keyboardManager.exec(this,e)},sc=function(e){if(l(this,or,Rl)){this.hideDropdown();return}if(k(this,Cy,e.detail===0),l(this,tu)||(k(this,tu,new AbortController),window.addEventListener("pointerdown",re(this,or,NF).bind(this),{signal:l(this,$s).combinedSignal(l(this,tu))})),l(this,Li).ariaExpanded="true",l(this,un)){l(this,un).classList.remove("hidden");return}let t=k(this,un,re(this,or,bS).call(this));l(this,Li).append(t)},NF=function(e){l(this,un)?.contains(e.target)||this.hideDropdown()},Rl=function(){return l(this,un)&&!l(this,un).classList.contains("hidden")},V(di,Dy,null);hm=di,cc=class cc{constructor(e){V(this,Ro,null);V(this,Iy,null);V(this,zd,null);k(this,Iy,e),k(this,zd,e._uiManager),l(cc,Oy)||k(cc,Oy,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Ro))return l(this,Ro);let{editorType:e,colorType:t,color:n}=l(this,Iy),i=k(this,Ro,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(cc,Oy)[e]),i.addEventListener("input",()=>{l(this,zd).updateParams(t,i.value)},{signal:l(this,zd)._signal}),i}update(e){l(this,Ro)&&(l(this,Ro).value=e)}destroy(){l(this,Ro)?.remove(),k(this,Ro,null)}hideDropdown(){}};Ro=new WeakMap,Iy=new WeakMap,zd=new WeakMap,Oy=new WeakMap,V(cc,Oy,null);Cv=cc;Rv=class{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ng(e),[e,e,e]}static G_HTML([e]){let t=EB(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Ng)}static RGB_HTML(e){return`#${e.map(EB).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Ng(1-Math.min(1,e+i)),Ng(1-Math.min(1,n+i)),Ng(1-Math.min(1,t+i))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let i=1-e,o=1-t,s=1-n,a=Math.min(i,o,s);return["CMYK",i,o,s,a]}},_S=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){dr("Abstract method `_createSVG` called.")}},Of=class extends _S{_createSVG(e){return document.createElementNS(ha,e)}},wV=9,Nf=new WeakSet,vV=new Date().getTimezoneOffset()*60*1e3,nm=class{static create(e){switch(e.data.annotationType){case qr.LINK:return new dm(e);case qr.TEXT:return new xS(e);case qr.WIDGET:switch(e.data.fieldType){case"Tx":return new SS(e);case"Btn":return e.data.radioButton?new Dv(e):e.data.checkBox?new CS(e):new RS(e);case"Ch":return new DS(e);case"Sig":return new TS(e)}return new rl(e);case qr.POPUP:return new pm(e);case qr.FREETEXT:return new Iv(e);case qr.LINE:return new BS(e);case qr.SQUARE:return new FS(e);case qr.CIRCLE:return new US(e);case qr.POLYLINE:return new Ov(e);case qr.CARET:return new $S(e);case qr.INK:return new gm(e);case qr.POLYGON:return new jS(e);case qr.HIGHLIGHT:return new Nv(e);case qr.UNDERLINE:return new WS(e);case qr.SQUIGGLY:return new qS(e);case qr.STRIKEOUT:return new HS(e);case qr.STAMP:return new kv(e);case qr.FILEATTACHMENT:return new GS(e);default:return new Rr(e)}}},DT=class DT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){V(this,Ny);V(this,tf,null);V(this,Wd,!1);V(this,bs,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return DT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;let{quadPoints:t,inkLists:n,rect:i}=this.data,o=-1/0,s=-1/0;if(t?.length>=8){for(let a=0;a<t.length;a+=8)t[a+1]>s?(s=t[a+1],o=t[a+2]):t[a+1]===s&&(o=Math.max(o,t[a+2]));return[o,s]}if(n?.length>=1){for(let a of n)for(let u=0,c=a.length;u<c;u+=2)a[u+1]>s?(s=a[u+1],o=a[u]):a[u+1]===s&&(o=Math.max(o,a[u]));if(o!==1/0)return[o,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){let{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){let{data:e}=this;return this.annotationStorage.getRawValue(`${im}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){let{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${im}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(l(this,bs)?.popup||this.popup)?.remove(),k(this,bs,this.popup=null)}updateEdited(e){if(!this.container)return;e.rect&&(l(this,tf)||k(this,tf,{rect:this.data.rect.slice(0)}));let{rect:t,popup:n}=e;t&&re(this,Ny,ES).call(this,t);let i=l(this,bs)?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=l(this,bs).popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),k(this,bs,null),this.popup=null))}resetEdited(){l(this,tf)&&(re(this,Ny,ES).call(this,l(this,tf).rect),l(this,bs)?.popup.resetEdited(),k(this,tf,null))}_createContainer(e){let{data:t,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof rl)&&!(this instanceof dm)&&(o.tabIndex=0);let{style:s}=o;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof pm){let{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,o),o}let{width:a,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;let v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){let _=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof Dv){let _=`calc(${a}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case Dh.SOLID:s.borderStyle="solid";break;case Dh.DASHED:s.borderStyle="dashed";break;case Dh.BEVELED:_t("Unimplemented border style: beveled");break;case Dh.INSET:_t("Unimplemented border style: inset");break;case Dh.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let y=t.borderColor||null;y?(k(this,Wd,!0),s.borderColor=it.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}let c=it.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:h,pageX:d,pageY:m}=i.rawDims;s.left=`${100*(c[0]-d)/f}%`,s.top=`${100*(c[1]-m)/h}%`;let{rotation:b}=t;return t.hasOwnCanvas||b===0?(s.width=`${100*a/f}%`,s.height=`${100*u/h}%`):this.setRotation(b,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:s}=this;e%180!==0&&([o,s]=[s,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,i)=>{let o=i.detail[t],s=o[0],a=o.slice(1);i.target.style[n]=Rv[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Rv[`${s}_rgb`](a)})};return wt(this,"_commonActions",{display:t=>{let{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[i,o]of Object.entries(t)){let s=n[i];if(s){let a={detail:{[i]:o},target:e};s(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,i,o]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){let[v,w,y,_]=e.subarray(2,6);if(i===v&&o===w&&t===y&&n===_)return}let{style:s}=this.container,a;if(l(this,Wd)){let{borderColor:v,borderWidth:w}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}let u=i-t,c=o-n,{svgFactory:f}=this,h=f.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";let d=f.createElement("defs");h.append(d);let m=f.createElement("clipPath"),b=`clippath_${this.data.id}`;m.setAttribute("id",b),m.setAttribute("clipPathUnits","objectBoundingBox"),d.append(m);for(let v=2,w=e.length;v<w;v+=8){let y=e[v],_=e[v+1],E=e[v+2],S=e[v+3],A=f.createElement("rect"),P=(E-t)/u,R=(o-_)/c,Y=(y-E)/u,te=(_-S)/c;A.setAttribute("x",P),A.setAttribute("y",R),A.setAttribute("width",Y),A.setAttribute("height",te),m.append(A),a?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${R}" width="${Y}" height="${te}"/>`)}l(this,Wd)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){let{data:t}=this,n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),k(this,bs,new pm({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,bs)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,bs)}render(){dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let i=this._fieldObjects[e];if(i)for(let{page:o,id:s,exportValues:a}of i){if(o===-1||s===t)continue;let u=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!Nf.has(c)){_t(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:u,domElement:c})}return n}for(let i of document.getElementsByName(e)){let{exportValue:o}=i,s=i.getAttribute("data-element-id");s!==t&&Nf.has(i)&&n.push({id:s,exportValue:o,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};tf=new WeakMap,Wd=new WeakMap,bs=new WeakMap,Ny=new WeakSet,ES=function(e){let{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-a)/o}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};Rr=DT,AS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},dm=class extends Rr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0});V(this,Xi);this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),o=!0):t.attachment?(re(this,Xi,kF).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),o=!0):t.setOCGState?(re(this,Xi,LF).call(this,i,t.setOCGState,t.overlaidText),o=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),o=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&re(this,Xi,oc).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),re(this,Xi,oc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let o of Object.keys(n.actions)){let s=i.get(o);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),re(this,Xi,oc).call(this)}_bindResetFormAction(t,n){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),re(this,Xi,oc).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:o,refs:s,include:a}=n,u=[];if(o.length!==0||s.length!==0){let h=new Set(s);for(let d of o){let m=this._fieldObjects[d]||[];for(let{id:b}of m)h.add(b)}for(let d of Object.values(this._fieldObjects))for(let m of d)h.has(m.id)===a&&u.push(m)}else for(let h of Object.values(this._fieldObjects))u.push(...h);let c=this.annotationStorage,f=[];for(let h of u){let{id:d}=h;switch(f.push(d),h.type){case"text":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}case"checkbox":case"radiobutton":{let b=h.defaultValue===h.exportValues;c.setValue(d,{value:b});break}case"combobox":case"listbox":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}default:continue}let m=document.querySelector(`[data-element-id="${d}"]`);if(m){if(!Nf.has(m)){_t(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}};Xi=new WeakSet,oc=function(){this.container.setAttribute("data-internal-link","")},kF=function(t,n,i="",o=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,o),!1),re(this,Xi,oc).call(this)},LF=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),re(this,Xi,oc).call(this)};xS=class extends Rr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}},rl=class extends Rr{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ur.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,o){n.includes("mouse")?e.addEventListener(n,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s)}})})}_setEventListeners(e,t,n,i){for(let[o,s]of n)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":it.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||wV,o=e.style,s,a=2,u=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),f=Math.round(c/(Cw*i))||1,h=c/f;s=Math.min(i,u(h/Cw))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(i,u(c/Cw))}o.fontSize=`calc(${s}px * var(--total-scale-factor))`,o.color=it.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},SS=class extends rl{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){let o=this.annotationStorage;for(let s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),o.setValue(s.id,{[i]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let i=e.getValue(t,{value:this.data.fieldValue}),o=i.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let u={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nf.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;let{datetimeFormat:c,datetimeType:f,timeStep:h}=this.data,d=!!f&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",b=>{let v=this.data.defaultFieldValue??"";n.value=u.userValue=v,u.formattedValue=null});let m=b=>{let{formattedValue:v}=u;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{if(u.focused)return;let{target:w}=v;if(d&&(w.type=f,h&&(w.step=h)),u.userValue){let y=u.userValue;if(d)if(f==="time"){let _=new Date(y),E=[_.getHours(),_.getMinutes(),_.getSeconds()];w.value=E.map(S=>S.toString().padStart(2,"0")).join(":")}else w.value=new Date(y-vV).toISOString().split(f==="date"?"T":".",1)[0];else w.value=y}u.lastCommittedValue=w.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);let w={value(y){u.userValue=y.detail.value??"",d||e.setValue(t,{value:u.userValue.toString()}),y.target.value=u.userValue},formattedValue(y){let{formattedValue:_}=y.detail;u.formattedValue=_,_!=null&&y.target!==document.activeElement&&(y.target.value=_);let E={formattedValue:_};d&&(E.value=_),e.setValue(t,E)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{let{charLimit:_}=y.detail,{target:E}=y;if(_===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",_);let S=u.userValue;!S||S.length<=_||(S=S.slice(0,_),E.value=u.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),n.addEventListener("keydown",v=>{u.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(u.commitKey=3),w===-1)return;let{value:y}=v.target;u.lastCommittedValue!==y&&(u.lastCommittedValue=y,u.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});let b=m;m=null,n.addEventListener("blur",v=>{if(!u.focused||!v.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);let{target:w}=v,{value:y}=w;if(d){if(y&&f==="time"){let _=y.split(":").map(E=>parseInt(E,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();w.type="text"}u.userValue=y,u.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:u.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),b(v)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",v=>{u.lastCommittedValue=null;let{data:w,target:y}=v,{value:_,selectionStart:E,selectionEnd:S}=y,A=E,P=S;switch(v.inputType){case"deleteWordBackward":{let R=_.substring(0,E).match(/\w*[^\w]*$/);R&&(A-=R[0].length);break}case"deleteWordForward":{let R=_.substring(E).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":E===S&&(A-=1);break;case"deleteContentForward":E===S&&(P+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:w||"",willCommit:!1,selStart:A,selEnd:P}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){let v=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},TS=class extends rl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},CS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let o=document.createElement("input");return Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n)){let f=u&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=f),e.setValue(c.id,{value:f})}e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{let a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},Dv=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(let s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});let o=document.createElement("input");if(Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;o.addEventListener("updatefromsandbox",a=>{let u={value:c=>{let f=s===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let d=f&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},RS=class extends dm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},DS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Nf.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{let h=this.data.defaultFieldValue;for(let d of i.options)d.selected=d.value===h});for(let f of this.data.options){let h=document.createElement("option");h.textContent=f.displayValue,h.value=f.exportValue,n.value.includes(f.exportValue)&&(h.setAttribute("selected",!0),o=!1),i.append(h)}let s=null;if(o){let f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),s=()=>{f.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}let a=f=>{let h=f?"value":"textContent",{options:d,multiple:m}=i;return m?Array.prototype.filter.call(d,b=>b.selected).map(b=>b[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]},u=a(!1),c=f=>{let h=f.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{let h={value(d){s?.();let m=d.detail.value,b=new Set(Array.isArray(m)?m:[m]);for(let v of i.options)v.selected=b.has(v.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(d){i.multiple=!0},remove(d){let m=i.options,b=d.detail.remove;m[b].selected=!1,i.remove(b),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(d){let{index:m,displayValue:b,exportValue:v}=d.detail.insert,w=i.children[m],y=document.createElement("option");y.textContent=b,y.value=v,w?w.before(y):i.append(y),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},items(d){let{items:m}=d.detail;for(;i.length!==0;)i.remove(0);for(let b of m){let{displayValue:v,exportValue:w}=b,y=document.createElement("option");y.textContent=v,y.value=w,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},indices(d){let m=new Set(d.detail.indices);for(let b of d.target.options)b.selected=m.has(b.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,f)}),i.addEventListener("input",f=>{let h=a(!0),d=a(!1);e.setValue(t,{value:h}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},pm=class extends Rr{constructor(t){let{data:n,elements:i,parent:o}=t,s=!!o._commentManager;super(t,{isRenderable:!s&&Rr._hasPopupData(n)});V(this,ky);if(this.elements=i,s&&Rr._hasPopupData(n)){let a=this.popup=re(this,ky,IS).call(this);for(let u of i)u.popup=a}else this.popup=null}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let n=this.popup=re(this,ky,IS).call(this),i=[];for(let o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${Bh}${o}`).join(",")),this.container}};ky=new WeakSet,IS=function(){return new OS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};OS=class{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:u,rect:c,parentRect:f,open:h,commentManager:d=null}){V(this,Ct);V(this,Pi,null);V(this,ru,re(this,Ct,BF).bind(this));V(this,t_,re(this,Ct,MS).bind(this));V(this,r_,re(this,Ct,qw).bind(this));V(this,qd,re(this,Ct,Ww).bind(this));V(this,Hd,null);V(this,Mr,null);V(this,Do,null);V(this,nu,null);V(this,rf,null);V(this,Gd,null);V(this,Vd,null);V(this,Io,!1);V(this,Mi,null);V(this,ja,null);V(this,$a,null);V(this,Br,null);V(this,za,null);V(this,iu,null);V(this,Ly,null);V(this,Wa,null);V(this,Yd,null);V(this,nf,null);V(this,su,!1);V(this,mn,null);V(this,ou,null);k(this,Mr,e),k(this,Yd,i),k(this,Do,s),k(this,Wa,a),k(this,Gd,u),k(this,Hd,t),k(this,Ly,c),k(this,Vd,f),k(this,rf,n),k(this,Pi,d),k(this,mn,n[0]),k(this,nu,Rf.toDateObject(o)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),d||(re(this,Ct,$w).call(this),l(this,Mr).hidden=!0,h&&re(this,Ct,Ww).call(this))}renderCommentButton(){if(l(this,Br)){l(this,Br).parentNode||l(this,mn).container.after(l(this,Br));return}if(l(this,za)||re(this,Ct,NS).call(this),!l(this,za))return;let{signal:e}=k(this,ja,new AbortController),t=l(this,mn).hasOwnCommentButton,n=()=>{l(this,Pi).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{l(this,Pi).toggleCommentPopup(this,!1,!0,!t)},o=()=>{l(this,Pi).toggleCommentPopup(this,!1,!1)};if(t){k(this,Br,l(this,mn).container);for(let s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),s.classList.add("popupTriggerArea")}else{let s=k(this,Br,document.createElement("button"));s.className="annotationCommentButton";let a=l(this,mn).container;s.style.zIndex=a.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),re(this,Ct,LS).call(this),re(this,Ct,kS).call(this),s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),a.after(s)}}get commentButtonColor(){let{color:e,opacity:t}=l(this,mn).commentData;return e?l(this,Gd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{l(this,Br)?.focus()},0)}getData(){let{richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}=l(this,mn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return l(this,Br)}get comment(){return l(this,ou)||k(this,ou,l(this,mn).commentText),l(this,ou)}set comment(e){e!==this.comment&&(l(this,mn).commentText=k(this,ou,e))}focus(){l(this,mn).container?.focus()}get parentBoundingClientRect(){return l(this,mn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Br)&&(l(this,Br).classList.toggle("selected",e),l(this,Br).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Br).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,iu))return l(this,iu);let{x:e,y:t,height:n}=l(this,Br).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,mn).layer.getBoundingClientRect();return[(e-i)/s,(t+n-o)/a]}set commentPopupPosition(e){k(this,iu,e)}hasDefaultPopupPosition(){return l(this,iu)===null}get commentButtonPosition(){return l(this,za)}get commentButtonWidth(){return l(this,Br).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){let[t,n]=l(this,iu)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:o,y:s,width:a,height:u}=i;l(this,Pi).showDialog(null,this,o+t*a,s+n*u,{...e,parentDimensions:i})}render(){if(l(this,Mi))return;let e=k(this,Mi,document.createElement("div"));if(e.className="popup",l(this,Hd)){let n=e.style.outlineColor=it.makeHexColor(...l(this,Hd));e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}let t=document.createElement("span");if(t.className="header",l(this,Yd)?.str){let n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=l(this,Yd)}if(e.append(t),l(this,nu)){let n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,nu).valueOf()})),n.dateTime=l(this,nu).toISOString(),t.append(n)}AT({html:l(this,Ct,zw)||l(this,Do).str,dir:l(this,Do)?.dir,className:"popupContent"},e),l(this,Mr).append(e)}updateEdited({rect:e,popup:t,deleted:n}){if(l(this,Pi)){n?(this.remove(),k(this,ou,null)):t&&(t.deleted?this.remove():(re(this,Ct,LS).call(this),k(this,ou,t.text))),e&&(k(this,za,null),re(this,Ct,NS).call(this),re(this,Ct,kS).call(this));return}if(n||t?.deleted){this.remove();return}re(this,Ct,$w).call(this),l(this,nf)||k(this,nf,{contentsObj:l(this,Do),richText:l(this,Wa)}),e&&k(this,$a,null),t&&t.text&&(k(this,Wa,re(this,Ct,MF).call(this,t.text)),k(this,nu,Rf.toDateObject(t.date)),k(this,Do,null)),l(this,Mi)?.remove(),k(this,Mi,null)}resetEdited(){l(this,nf)&&({contentsObj:tn(this,Do)._,richText:tn(this,Wa)._}=l(this,nf),k(this,nf,null),l(this,Mi)?.remove(),k(this,Mi,null),k(this,$a,null))}remove(){if(l(this,ja)?.abort(),k(this,ja,null),l(this,Mi)?.remove(),k(this,Mi,null),k(this,su,!1),k(this,Io,!1),l(this,Br)?.remove(),k(this,Br,null),this.trigger)for(let e of this.trigger)e.classList.remove("popupTriggerArea")}forceHide(){k(this,su,this.isVisible),l(this,su)&&(l(this,Mr).hidden=!0)}maybeShow(){l(this,Pi)||(re(this,Ct,$w).call(this),l(this,su)&&(l(this,Mi)||re(this,Ct,qw).call(this),k(this,su,!1),l(this,Mr).hidden=!1))}get isVisible(){return l(this,Pi)?!1:l(this,Mr).hidden===!1}};Pi=new WeakMap,ru=new WeakMap,t_=new WeakMap,r_=new WeakMap,qd=new WeakMap,Hd=new WeakMap,Mr=new WeakMap,Do=new WeakMap,nu=new WeakMap,rf=new WeakMap,Gd=new WeakMap,Vd=new WeakMap,Io=new WeakMap,Mi=new WeakMap,ja=new WeakMap,$a=new WeakMap,Br=new WeakMap,za=new WeakMap,iu=new WeakMap,Ly=new WeakMap,Wa=new WeakMap,Yd=new WeakMap,nf=new WeakMap,su=new WeakMap,mn=new WeakMap,ou=new WeakMap,Ct=new WeakSet,$w=function(){if(l(this,ja))return;k(this,ja,new AbortController);let{signal:e}=l(this,ja);for(let t of this.trigger)t.addEventListener("click",l(this,qd),{signal:e}),t.addEventListener("pointerenter",l(this,r_),{signal:e}),t.addEventListener("pointerleave",l(this,t_),{signal:e}),t.classList.add("popupTriggerArea");for(let t of l(this,rf))t.container?.addEventListener("keydown",l(this,ru),{signal:e})},NS=function(){let e=l(this,rf).find(t=>t.hasCommentButton);e&&k(this,za,e._normalizePoint(e.commentButtonPosition))},kS=function(){if(l(this,mn).extraPopupElement&&!l(this,mn).editor)return;l(this,Br)||this.renderCommentButton();let[e,t]=l(this,za),{style:n}=l(this,Br);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},LS=function(){l(this,mn).extraPopupElement||(l(this,Br)||this.renderCommentButton(),l(this,Br).style.backgroundColor=this.commentButtonColor||"")},zw=function(){let e=l(this,Wa),t=l(this,Do);return e?.str&&(!t?.str||t.str===e.str)&&l(this,Wa).html||null},PS=function(){return l(this,Ct,zw)?.attributes?.style?.fontSize||0},PF=function(){return l(this,Ct,zw)?.attributes?.style?.color||null},MF=function(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,Ct,PF),fontSize:l(this,Ct,PS)?`calc(${l(this,Ct,PS)}px * var(--total-scale-factor))`:""}};for(let o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return n},BF=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Io))&&re(this,Ct,Ww).call(this)},FF=function(){if(l(this,$a)!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=l(this,Gd),s=!!l(this,Vd),a=s?l(this,Vd):l(this,Ly);for(let b of l(this,rf))if(!a||it.intersect(b.data.rect,a)!==null){a=b.data.rect,s=!0;break}let u=it.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),f=s?a[2]-a[0]+5:0,h=u[0]+f,d=u[1];k(this,$a,[100*(h-i)/t,100*(d-o)/n]);let{style:m}=l(this,Mr);m.left=`${l(this,$a)[0]}%`,m.top=`${l(this,$a)[1]}%`},Ww=function(){if(l(this,Pi)){l(this,Pi).toggleCommentPopup(this,!1);return}k(this,Io,!l(this,Io)),l(this,Io)?(re(this,Ct,qw).call(this),l(this,Mr).addEventListener("click",l(this,qd)),l(this,Mr).addEventListener("keydown",l(this,ru))):(re(this,Ct,MS).call(this),l(this,Mr).removeEventListener("click",l(this,qd)),l(this,Mr).removeEventListener("keydown",l(this,ru)))},qw=function(){l(this,Mi)||this.render(),this.isVisible?l(this,Io)&&l(this,Mr).classList.add("focused"):(re(this,Ct,FF).call(this),l(this,Mr).hidden=!1,l(this,Mr).style.zIndex=parseInt(l(this,Mr).style.zIndex)+1e3)},MS=function(){l(this,Mr).classList.remove("focused"),!(l(this,Io)||!this.isVisible)&&(l(this,Mr).hidden=!0,l(this,Mr).style.zIndex=parseInt(l(this,Mr).style.zIndex)-1e3)};Iv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},BS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Py,null)}render(){this.container.classList.add("lineAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=k(this,Py,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),o.append(s),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Py)}addHighlightArea(){this.container.classList.add("highlightArea")}};Py=new WeakMap;FS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,My,null)}render(){this.container.classList.add("squareAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=k(this,My,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,My)}addHighlightArea(){this.container.classList.add("highlightArea")}};My=new WeakMap;US=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,By,null)}render(){this.container.classList.add("circleAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=k(this,By,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,By)}addHighlightArea(){this.container.classList.add("highlightArea")}};By=new WeakMap;Ov=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Fy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:n,borderStyle:i,popupRef:o},width:s,height:a}=this;if(!n)return this.container;let u=this.svgFactory.create(s,a,!0),c=[];for(let h=0,d=n.length;h<d;h+=2){let m=n[h]-t[0],b=t[3]-n[h+1];c.push(`${m},${b}`)}c=c.join(" ");let f=k(this,Fy,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",c),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Fy)}addHighlightArea(){this.container.classList.add("highlightArea")}};Fy=new WeakMap;jS=class extends Ov{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},$S=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},gm=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,jy);V(this,Uy,null);V(this,sf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:n,inkLists:i,borderStyle:o,popupRef:s}}=this,{transform:a,width:u,height:c}=re(this,jy,zS).call(this,n,t),f=this.svgFactory.create(u,c,!0),h=k(this,Uy,this.svgFactory.createElement("svg:g"));f.append(h),h.setAttribute("stroke-width",o.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let d=0,m=i.length;d<m;d++){let b=this.svgFactory.createElement(this.svgElementName);l(this,sf).push(b),b.setAttribute("points",i[d].join(",")),h.append(b)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:n,points:i,rect:o}=t,s=l(this,Uy);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,u=l(this,sf).length;a<u;a++)l(this,sf)[a].setAttribute("points",i[a].join(","));if(o){let{transform:a,width:u,height:c}=re(this,jy,zS).call(this,this.data.rotation,o);s.parentElement.setAttribute("viewBox",`0 0 ${u} ${c}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,sf)}addHighlightArea(){this.container.classList.add("highlightArea")}};Uy=new WeakMap,sf=new WeakMap,jy=new WeakSet,zS=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};Nv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){let n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},WS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},qS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},HS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){let n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},kv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},GS=class extends Rr{constructor(t){super(t,{isRenderable:!0});V(this,zy);V(this,$y,null);let{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:n}=this,i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",re(this,zy,VS).bind(this)),k(this,$y,i);let{isMac:o}=Ur.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(o?s.metaKey:s.ctrlKey)&&re(this,zy,VS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}};$y=new WeakMap,zy=new WeakSet,VS=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)};IT=class IT{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:s,structTreeLayer:a,commentManager:u,linkService:c,annotationStorage:f}){V(this,Qa);V(this,of,null);V(this,af,null);V(this,Xd,null);V(this,au,new Map);V(this,Wy,null);V(this,lf,null);V(this,Bi,[]);V(this,qy,!1);this.div=e,k(this,of,t),k(this,af,n),k(this,Wy,a||null),k(this,lf,c||null),k(this,Xd,f||new um),this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return l(this,au).size>0}async render(e){let{annotations:t}=e,n=this.div;wu(n,this.viewport);let i=new Map,o=[],s={data:null,layer:n,linkService:l(this,lf),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Of,annotationStorage:l(this,Xd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let a of t){if(a.noHTML)continue;let u=a.annotationType===qr.POPUP;if(u){let h=i.get(a.id);if(!h)continue;if(!this._commentManager){o.push(a);continue}s.elements=h}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;let c=nm.create(s);if(!c.isRenderable)continue;if(!u&&(l(this,Bi).push(c),a.popupRef)){let h=i.get(a.popupRef);h?h.push(c):i.set(a.popupRef,[c])}let f=c.render();a.hidden&&(f.style.visibility="hidden"),c._isEditable&&(l(this,au).set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}await re(this,Qa,Hw).call(this);for(let a of o){let u=s.elements=i.get(a.id);s.data=a;let c=nm.create(s);if(!c.isRenderable)continue;let f=c.render();c.contentElement.id=`${Bh}${a.id}`,a.hidden&&(f.style.visibility="hidden"),u.at(-1).container.after(f)}re(this,Qa,YS).call(this)}async addLinkAnnotations(e){let t={data:null,layer:this.div,linkService:l(this,lf),svgFactory:new Of,parent:this};for(let n of e){n.borderStyle||(n.borderStyle=IT._defaultBorderStyle),t.data=n;let i=nm.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${Bh}${n.id}`,l(this,Bi).push(i))}await re(this,Qa,Hw).call(this)}update({viewport:e}){let t=this.div;this.viewport=e,wu(t,{rotation:e.rotation}),re(this,Qa,YS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,au).values())}getEditableAnnotation(e){return l(this,au).get(e)}addFakeAnnotation(e){let{div:t}=this,{id:n,rotation:i}=e,o=new AS({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,lf),annotationStorage:l(this,Xd)});return o.render(),o.contentElement.id=`${Bh}${n}`,o.createOrUpdatePopup(),l(this,Bi).push(o),o}removeAnnotation(e){let t=l(this,Bi).findIndex(i=>i.data.id===e);if(t<0)return;let[n]=l(this,Bi).splice(t,1);l(this,of)?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(let t of e)t.updateFakeAnnotationElement(this);re(this,Qa,Hw).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Dh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};of=new WeakMap,af=new WeakMap,Xd=new WeakMap,au=new WeakMap,Wy=new WeakMap,lf=new WeakMap,Bi=new WeakMap,qy=new WeakMap,Qa=new WeakSet,Hw=async function(){if(l(this,Bi).length===0)return;this.div.replaceChildren();let e=[];if(!l(this,qy)){k(this,qy,!0);for(let{contentElement:n,data:{id:i}}of l(this,Bi)){let o=n.id=`${Bh}${i}`;e.push(l(this,Wy)?.getAriaAttributes(o).then(s=>{if(s)for(let[a,u]of s)n.setAttribute(a,u)}))}}l(this,Bi).sort(({data:{rect:[n,i,o,s]}},{data:{rect:[a,u,c,f]}})=>{if(n===o&&i===s)return 1;if(a===c&&u===f)return-1;let h=s,d=i,m=(i+s)/2,b=f,v=u,w=(u+f)/2;if(m>=b&&w<=d)return-1;if(w>=h&&m<=v)return 1;let y=(n+o)/2,_=(a+c)/2;return y-_});let t=document.createDocumentFragment();for(let n of l(this,Bi))t.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&t.append(n.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),l(this,of))for(let n of l(this,Bi))l(this,of).addPointerInTextLayer(n.contentElement,!1)},YS=function(){if(!l(this,af))return;let e=this.div;for(let[t,n]of l(this,af)){let i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";let{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);let s=l(this,au).get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),s._hasNoCanvas=!1):s.canvas=n)}l(this,af).clear()};Lv=IT,xw=/\r\n?|\n/g,wr=class wr extends mr{constructor(t){super({...t,name:"freeTextEditor"});V(this,Kr);V(this,Fi,"");V(this,Hy,`${this.id}-editor`);V(this,uf,null);V(this,Ui);Je(this,"_colorPicker",null);this.color=t.color||wr._defaultColor||mr._defaultLineColor,k(this,Ui,t.fontSize||wr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){let t=wr.prototype,n=s=>s.isEmpty(),i=vu.TRANSLATE_SMALL,o=vu.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){mr.initialize(t,n);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Mt.FREETEXT_SIZE:wr._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:wr._defaultColor=n;break}}updateParams(t,n){switch(t){case Mt.FREETEXT_SIZE:re(this,Kr,UF).call(this,n);break;case Mt.FREETEXT_COLOR:re(this,Kr,jF).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,wr._defaultFontSize],[Mt.FREETEXT_COLOR,wr._defaultColor||mr._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,l(this,Ui)],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Cv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){let t=this.parentScale;return[-wr._internalPadding*t,-(wr._internalPadding+l(this,Ui))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,uf,new AbortController);let t=this._uiManager.combinedSignal(l(this,uf));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Hy)),this._isDraggable=!0,l(this,uf)?.abort(),k(this,uf,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=l(this,Fi),n=k(this,Fi,re(this,Kr,$F).call(this).trimEnd());if(t===n)return;let i=o=>{if(k(this,Fi,o),!o){this.remove();return}re(this,Kr,Yw).call(this),this._uiManager.rebuild(this),re(this,Kr,Gw).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),re(this,Kr,Gw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){wr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Hy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Ui)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[o,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[u,c]=this.getInitialTranslation();[u,c]=this.pageTranslationToScreen(u,c);let[f,h]=this.pageDimensions,[d,m]=this.pageTranslation,b,v;switch(this.rotation){case 0:b=t+(a[0]-d)/f,v=n+this.height-(a[1]-m)/h;break;case 90:b=t+(a[0]-d)/f,v=n-(a[1]-m)/h,[u,c]=[c,-u];break;case 180:b=t-this.width+(a[0]-d)/f,v=n-(a[1]-m)/h,[u,c]=[-u,-c];break;case 270:b=t+(a[0]-d-this.height*h)/f,v=n+(a[1]-m-this.width*f)/h,[u,c]=[-c,u];break}this.setAt(b*o,v*s,u,c)}else this._moveAfterPaste(t,n);re(this,Kr,Yw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,v,w;let n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let o=re(b=wr,el,KS).call(b,n.getData("text")||"").replaceAll(xw,`
`);if(!o)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:u,startOffset:c}=a,f=[],h=[];if(u.nodeType===Node.TEXT_NODE){let y=u.parentElement;if(h.push(u.nodeValue.slice(c).replaceAll(xw,"")),y!==this.editorDiv){let _=f;for(let E of this.editorDiv.childNodes){if(E===y){_=h;continue}_.push(re(v=wr,el,Vw).call(v,E))}}f.push(u.nodeValue.slice(0,c).replaceAll(xw,""))}else if(u===this.editorDiv){let y=f,_=0;for(let E of this.editorDiv.childNodes)_++===c&&(y=h),y.push(re(w=wr,el,Vw).call(w,E))}k(this,Fi,`${f.join(`
`)}${o}${h.join(`
`)}`),re(this,Kr,Yw).call(this);let d=new Range,m=Math.sumPrecise(f.map(y=>y.length));for(let{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){let _=y.nodeValue.length;if(m<=_){d.setStart(y,m),d.setEnd(y,m);break}m-=_}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){let t=wr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var a;let o=null;if(t instanceof Iv){let{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:f,rotation:h,id:d,popupRef:m,richText:b,contentsObj:v,creationDate:w,modificationDate:y},textContent:_,textPosition:E,parent:{page:{pageNumber:S}}}=t;if(!_||_.length===0)return null;o=t={annotationType:vt.FREETEXT,color:Array.from(c),fontSize:u,value:_.join(`
`),position:E,pageIndex:S-1,rect:f.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:m,comment:v?.str||null,richText:b,creationDate:w,modificationDate:y}}let s=await super.deserialize(t,n,i);return k(s,Ui,t.fontSize),s.color=it.makeHexColor(...t.color),k(s,Fi,re(a=wr,el,KS).call(a,t.value)),s._initialData=o,t.comment&&s.setCommentData(t),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:l(this,Ui),value:re(this,Kr,zF).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!re(this,Kr,WF).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){let n=super.renderAnnotationElement(t);if(!n)return null;let{style:i}=n;i.fontSize=`calc(${l(this,Ui)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(let o of l(this,Fi).split(`
`)){let s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),n.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Fi)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Fi=new WeakMap,Hy=new WeakMap,uf=new WeakMap,Ui=new WeakMap,Kr=new WeakSet,UF=function(t){let n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Ui))*this.parentScale),k(this,Ui,o),re(this,Kr,Gw).call(this)},i=l(this,Ui);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},jF=function(t){let n=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$F=function(){var i;let t=[];this.editorDiv.normalize();let n=null;for(let o of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(re(i=wr,el,Vw).call(i,o)),n=o);return t.join(`
`)},Gw=function(){let[t,n]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:o,div:s}=this,a=s.style.display,u=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",o.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},el=new WeakSet,Vw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xw,"")},Yw=function(){if(this.editorDiv.replaceChildren(),!!l(this,Fi))for(let t of l(this,Fi).split(`
`)){let n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},zF=function(){return l(this,Fi).replaceAll("\xA0"," ")},KS=function(t){return t.replaceAll(" ","\xA0")},WF=function(t){let{value:n,fontSize:i,color:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((a,u)=>a!==o[u])||t.pageIndex!==s},V(wr,el),Je(wr,"_freeTextDefaultContent",""),Je(wr,"_internalPadding",0),Je(wr,"_defaultColor",null),Je(wr,"_defaultFontSize",10),Je(wr,"_type","freetext"),Je(wr,"_editorType",vt.FREETEXT);XS=wr,at=class{toSVGPath(){dr("Abstract method `toSVGPath` must be implemented.")}get box(){dr("Abstract getter `box` must be implemented.")}serialize(e,t){dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*o;return s}static _rescaleAndSwap(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*o;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let o=0,s=e.length;o<s;o+=2)i[o]=t+e[o],i[o+1]=n+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,o){switch(o){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,o,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+o)/6,(5*i+s)/6,(n+o)/2,(i+s)/2]}};Je(at,"PRECISION",1e-4);ma=class ma{constructor({x:e,y:t},n,i,o,s,a=0){V(this,cn);V(this,ji);V(this,zs,[]);V(this,Kd);V(this,Zd);V(this,Oo,[]);V(this,Nt,new Float32Array(18));V(this,cf);V(this,ff);V(this,Gy);V(this,Vy);V(this,Jd);V(this,Qd);V(this,lu,[]);k(this,ji,n),k(this,Qd,o*i),k(this,Zd,s),l(this,Nt).set([NaN,NaN,NaN,NaN,e,t],6),k(this,Kd,a),k(this,Vy,l(ma,Yy)*i),k(this,Gy,l(ma,i_)*i),k(this,Jd,i),l(this,lu).push(e,t)}isEmpty(){return isNaN(l(this,Nt)[8])}add({x:e,y:t}){k(this,cf,e),k(this,ff,t);let[n,i,o,s]=l(this,ji),[a,u,c,f]=l(this,Nt).subarray(8,12),h=e-c,d=t-f,m=Math.hypot(h,d);if(m<l(this,Gy))return!1;let b=m-l(this,Vy),v=b/m,w=v*h,y=v*d,_=a,E=u;a=c,u=f,c+=w,f+=y,l(this,lu)?.push(e,t);let S=-y/b,A=w/b,P=S*l(this,Qd),R=A*l(this,Qd);return l(this,Nt).set(l(this,Nt).subarray(2,8),0),l(this,Nt).set([c+P,f+R],4),l(this,Nt).set(l(this,Nt).subarray(14,18),12),l(this,Nt).set([c-P,f-R],16),isNaN(l(this,Nt)[6])?(l(this,Oo).length===0&&(l(this,Nt).set([a+P,u+R],2),l(this,Oo).push(NaN,NaN,NaN,NaN,(a+P-n)/o,(u+R-i)/s),l(this,Nt).set([a-P,u-R],14),l(this,zs).push(NaN,NaN,NaN,NaN,(a-P-n)/o,(u-R-i)/s)),l(this,Nt).set([_,E,a,u,c,f],6),!this.isEmpty()):(l(this,Nt).set([_,E,a,u,c,f],6),Math.abs(Math.atan2(E-u,_-a)-Math.atan2(y,w))<Math.PI/2?([a,u,c,f]=l(this,Nt).subarray(2,6),l(this,Oo).push(NaN,NaN,NaN,NaN,((a+c)/2-n)/o,((u+f)/2-i)/s),[a,u,_,E]=l(this,Nt).subarray(14,18),l(this,zs).push(NaN,NaN,NaN,NaN,((_+a)/2-n)/o,((E+u)/2-i)/s),!0):([_,E,a,u,c,f]=l(this,Nt).subarray(0,6),l(this,Oo).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),[c,f,a,u,_,E]=l(this,Nt).subarray(12,18),l(this,zs).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let e=l(this,Oo),t=l(this,zs);if(isNaN(l(this,Nt)[6])&&!this.isEmpty())return re(this,cn,qF).call(this);let n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);re(this,cn,GF).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return re(this,cn,HF).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,o,s){return new Mv(e,t,n,i,o,s)}getOutlines(){let e=l(this,Oo),t=l(this,zs),n=l(this,Nt),[i,o,s,a]=l(this,ji),u=new Float32Array((l(this,lu)?.length??0)+2);for(let h=0,d=u.length-2;h<d;h+=2)u[h]=(l(this,lu)[h]-i)/s,u[h+1]=(l(this,lu)[h+1]-o)/a;if(u[u.length-2]=(l(this,cf)-i)/s,u[u.length-1]=(l(this,ff)-o)/a,isNaN(n[6])&&!this.isEmpty())return re(this,cn,VF).call(this,u);let c=new Float32Array(l(this,Oo).length+24+l(this,zs).length),f=e.length;for(let h=0;h<f;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}f=re(this,cn,XF).call(this,c,f);for(let h=t.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(t[h+d])){c[f]=c[f+1]=NaN,f+=2;continue}c[f]=t[h+d],c[f+1]=t[h+d+1],f+=2}return re(this,cn,YF).call(this,c,f),this.newFreeDrawOutline(c,u,l(this,ji),l(this,Jd),l(this,Kd),l(this,Zd))}};ji=new WeakMap,zs=new WeakMap,Kd=new WeakMap,Zd=new WeakMap,Oo=new WeakMap,Nt=new WeakMap,cf=new WeakMap,ff=new WeakMap,Gy=new WeakMap,Vy=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,lu=new WeakMap,Yy=new WeakMap,n_=new WeakMap,i_=new WeakMap,cn=new WeakSet,Xg=function(){let e=l(this,Nt).subarray(4,6),t=l(this,Nt).subarray(16,18),[n,i,o,s]=l(this,ji);return[(l(this,cf)+(e[0]-t[0])/2-n)/o,(l(this,ff)+(e[1]-t[1])/2-i)/s,(l(this,cf)+(t[0]-e[0])/2-n)/o,(l(this,ff)+(t[1]-e[1])/2-i)/s]},qF=function(){let[e,t,n,i]=l(this,ji),[o,s,a,u]=re(this,cn,Xg).call(this);return`M${(l(this,Nt)[2]-e)/n} ${(l(this,Nt)[3]-t)/i} L${(l(this,Nt)[4]-e)/n} ${(l(this,Nt)[5]-t)/i} L${o} ${s} L${a} ${u} L${(l(this,Nt)[16]-e)/n} ${(l(this,Nt)[17]-t)/i} L${(l(this,Nt)[14]-e)/n} ${(l(this,Nt)[15]-t)/i} Z`},HF=function(e){let t=l(this,zs);e.push(`L${t[4]} ${t[5]} Z`)},GF=function(e){let[t,n,i,o]=l(this,ji),s=l(this,Nt).subarray(4,6),a=l(this,Nt).subarray(16,18),[u,c,f,h]=re(this,cn,Xg).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-n)/o} L${u} ${c} L${f} ${h} L${(a[0]-t)/i} ${(a[1]-n)/o}`)},VF=function(e){let t=l(this,Nt),[n,i,o,s]=l(this,ji),[a,u,c,f]=re(this,cn,Xg).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,l(this,ji),l(this,Jd),l(this,Kd),l(this,Zd))},YF=function(e,t){let n=l(this,zs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},XF=function(e,t){let n=l(this,Nt).subarray(4,6),i=l(this,Nt).subarray(16,18),[o,s,a,u]=l(this,ji),[c,f,h,d]=re(this,cn,Xg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-s)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-s)/u],t),t+=24},V(ma,Yy,8),V(ma,n_,2),V(ma,i_,l(ma,Yy)+l(ma,n_));Pv=ma,Mv=class extends at{constructor(t,n,i,o,s,a){super();V(this,s_);V(this,ep);V(this,hf,new Float32Array(4));V(this,qa);V(this,Xy);V(this,$i);V(this,Ky);V(this,Gr);k(this,Gr,t),k(this,$i,n),k(this,ep,i),k(this,Ky,o),k(this,qa,s),k(this,Xy,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],re(this,s_,KF).call(this,a);let[u,c,f,h]=l(this,hf);for(let d=0,m=t.length;d<m;d+=2)t[d]=(t[d]-u)/f,t[d+1]=(t[d+1]-c)/h;for(let d=0,m=n.length;d<m;d+=2)n[d]=(n[d]-u)/f,n[d+1]=(n[d+1]-c)/h}toSVGPath(){let t=[`M${l(this,Gr)[4]} ${l(this,Gr)[5]}`];for(let n=6,i=l(this,Gr).length;n<i;n+=6){if(isNaN(l(this,Gr)[n])){t.push(`L${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`);continue}t.push(`C${l(this,Gr)[n]} ${l(this,Gr)[n+1]} ${l(this,Gr)[n+2]} ${l(this,Gr)[n+3]} ${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,o],s){let a=i-t,u=o-n,c,f;switch(s){case 0:c=at._rescale(l(this,Gr),t,o,a,-u),f=at._rescale(l(this,$i),t,o,a,-u);break;case 90:c=at._rescaleAndSwap(l(this,Gr),t,n,a,u),f=at._rescaleAndSwap(l(this,$i),t,n,a,u);break;case 180:c=at._rescale(l(this,Gr),i,n,-a,u),f=at._rescale(l(this,$i),i,n,-a,u);break;case 270:c=at._rescaleAndSwap(l(this,Gr),i,o,-a,-u),f=at._rescaleAndSwap(l(this,$i),i,o,-a,-u);break}return{outline:Array.from(c),points:[Array.from(f)]}}get box(){return l(this,hf)}newOutliner(t,n,i,o,s,a=0){return new Pv(t,n,i,o,s,a)}getNewOutline(t,n){let[i,o,s,a]=l(this,hf),[u,c,f,h]=l(this,ep),d=s*f,m=a*h,b=i*f+u,v=o*h+c,w=this.newOutliner({x:l(this,$i)[0]*d+b,y:l(this,$i)[1]*m+v},l(this,ep),l(this,Ky),t,l(this,Xy),n??l(this,qa));for(let y=2;y<l(this,$i).length;y+=2)w.add({x:l(this,$i)[y]*d+b,y:l(this,$i)[y+1]*m+v});return w.getOutlines()}};ep=new WeakMap,hf=new WeakMap,qa=new WeakMap,Xy=new WeakMap,$i=new WeakMap,Ky=new WeakMap,Gr=new WeakMap,s_=new WeakSet,KF=function(t){let n=l(this,Gr),i=n[4],o=n[5],s=[i,o,i,o],a=i,u=o,c=i,f=o,h=t?Math.max:Math.min,d=new Float32Array(4);for(let b=6,v=n.length;b<v;b+=6){let w=n[b+4],y=n[b+5];isNaN(n[b])?(it.pointBoundingBox(w,y,s),u>y?(a=w,u=y):u===y&&(a=h(a,w)),f<y?(c=w,f=y):f===y&&(c=h(c,w))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,it.bezierBoundingBox(i,o,...n.slice(b,b+6),d),it.rectBoundingBox(d[0],d[1],d[2],d[3],s),u>d[1]?(a=d[0],u=d[1]):u===d[1]&&(a=h(a,d[0])),f<d[3]?(c=d[2],f=d[3]):f===d[3]&&(c=h(c,d[2]))),i=w,o=y}let m=l(this,hf);m[0]=s[0]-l(this,qa),m[1]=s[1]-l(this,qa),m[2]=s[2]-s[0]+2*l(this,qa),m[3]=s[3]-s[1]+2*l(this,qa),this.firstPoint=[a,u],this.lastPoint=[c,f]};mm=class{constructor(e,t=0,n=0,i=!0){V(this,ti);V(this,Zy);V(this,Jy);V(this,Qy);V(this,uu,[]);V(this,Ws,[]);let o=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:w,y,width:_,height:E}of e){let S=Math.floor((w-t)/a)*a,A=Math.ceil((w+_+t)/a)*a,P=Math.floor((y-t)/a)*a,R=Math.ceil((y+E+t)/a)*a,Y=[S,P,R,!0],te=[A,P,R,!1];l(this,uu).push(Y,te),it.rectBoundingBox(S,P,A,R,o)}let u=o[2]-o[0]+2*n,c=o[3]-o[1]+2*n,f=o[0]-n,h=o[1]-n,d=i?-1/0:1/0,m=1/0,b=l(this,uu).at(i?-1:-2),v=[b[0],b[2]];for(let w of l(this,uu)){let[y,_,E,S]=w;!S&&i?_<m?(m=_,d=y):_===m&&(d=Math.max(d,y)):S&&!i&&(_<m?(m=_,d=y):_===m&&(d=Math.min(d,y))),w[0]=(y-f)/u,w[1]=(_-h)/c,w[2]=(E-h)/c}k(this,Zy,new Float32Array([f,h,u,c])),k(this,Jy,[d,m]),k(this,Qy,v)}getOutlines(){l(this,uu).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of l(this,uu))t[3]?(e.push(...re(this,ti,ZS).call(this,t)),re(this,ti,JF).call(this,t)):(re(this,ti,QF).call(this,t),e.push(...re(this,ti,ZS).call(this,t)));return re(this,ti,ZF).call(this,e)}};Zy=new WeakMap,Jy=new WeakMap,Qy=new WeakMap,uu=new WeakMap,Ws=new WeakMap,ti=new WeakSet,ZF=function(e){let t=[],n=new Set;for(let s of e){let[a,u,c]=s;t.push([a,u,s],[a,c,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){let u=t[s][2],c=t[s+1][2];u.push(c),c.push(u),n.add(u),n.add(c)}let i=[],o;for(;n.size>0;){let s=n.values().next().value,[a,u,c,f,h]=s;n.delete(s);let d=a,m=u;for(o=[a,c],i.push(o);;){let b;if(n.has(f))b=f;else if(n.has(h))b=h;else break;n.delete(b),[a,u,c,f,h]=b,d!==a&&(o.push(d,m,a,m===u?u:c),d=a),m=m===u?c:u}o.push(d,m)}return new JS(i,l(this,Zy),l(this,Jy),l(this,Qy))},Xw=function(e){let t=l(this,Ws),n=0,i=t.length-1;for(;n<=i;){let o=n+i>>1,s=t[o][0];if(s===e)return o;s<e?n=o+1:i=o-1}return i+1},JF=function([,e,t]){let n=re(this,ti,Xw).call(this,e);l(this,Ws).splice(n,0,[e,t])},QF=function([,e,t]){let n=re(this,ti,Xw).call(this,e);for(let i=n;i<l(this,Ws).length;i++){let[o,s]=l(this,Ws)[i];if(o!==e)break;if(o===e&&s===t){l(this,Ws).splice(i,1);return}}for(let i=n-1;i>=0;i--){let[o,s]=l(this,Ws)[i];if(o!==e)break;if(o===e&&s===t){l(this,Ws).splice(i,1);return}}},ZS=function(e){let[t,n,i]=e,o=[[t,n,i]],s=re(this,ti,Xw).call(this,i);for(let a=0;a<s;a++){let[u,c]=l(this,Ws)[a];for(let f=0,h=o.length;f<h;f++){let[,d,m]=o[f];if(!(c<=d||m<=u)){if(d>=u){if(m>c)o[f][1]=c;else{if(h===1)return[];o.splice(f,1),f--,h--}continue}o[f][2]=u,m>c&&o.push([t,c,m])}}}return o};JS=class extends at{constructor(t,n,i,o){super();V(this,e0);V(this,tp);k(this,tp,t),k(this,e0,n),this.firstPoint=i,this.lastPoint=o}toSVGPath(){let t=[];for(let n of l(this,tp)){let[i,o]=n;t.push(`M${i} ${o}`);for(let s=2;s<n.length;s+=2){let a=n[s],u=n[s+1];a===i?(t.push(`V${u}`),o=u):u===o&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,n,i,o],s){let a=[],u=i-t,c=o-n;for(let f of l(this,tp)){let h=new Array(f.length);for(let d=0;d<f.length;d+=2)h[d]=t+f[d]*u,h[d+1]=o-f[d+1]*c;a.push(h)}return a}get box(){return l(this,e0)}get classNamesForOutlining(){return["highlightOutline"]}};e0=new WeakMap,tp=new WeakMap;ym=class extends Pv{newFreeDrawOutline(e,t,n,i,o,s){return new QS(e,t,n,i,o,s)}},QS=class extends Mv{newOutliner(e,t,n,i,o,s=0){return new ym(e,t,n,i,o,s)}},qt=class qt extends mr{constructor(t){super({...t,name:"highlightEditor"});V(this,Tt);V(this,rp,null);V(this,t0,0);V(this,Ha);V(this,df,null);V(this,r0,null);V(this,bi,null);V(this,n0,null);V(this,i0,0);V(this,pf,null);V(this,zi,null);V(this,Wi,null);V(this,Cn,!1);V(this,np,null);V(this,ip,null);V(this,zn,null);V(this,sp,"");V(this,ws);V(this,s0,"");this.color=t.color||qt._defaultColor,k(this,ws,t.thickness||qt._defaultThickness),this.opacity=t.opacity||qt._defaultOpacity,k(this,Ha,t.boxes||null),k(this,s0,t.methodOfCreation||""),k(this,sp,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(k(this,Cn,!0),re(this,Tt,Kw).call(this,t),re(this,Tt,ac).call(this)):l(this,Ha)&&(k(this,rp,t.anchorNode),k(this,t0,t.anchorOffset),k(this,n0,t.focusNode),k(this,i0,t.focusOffset),re(this,Tt,eT).call(this),re(this,Tt,ac).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){let t=qt.prototype;return wt(this,"_keyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Cn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,ws),methodOfCreation:l(this,s0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){mr.initialize(t,n),qt._defaultColor||(qt._defaultColor=n.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:qt._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:qt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,ip)}get commentButtonPosition(){return l(this,np)}updateParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:re(this,Tt,e3).call(this,n);break;case Mt.HIGHLIGHT_THICKNESS:re(this,Tt,t3).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,qt._defaultColor],[Mt.HIGHLIGHT_THICKNESS,qt._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||qt._defaultColor],[Mt.HIGHLIGHT_THICKNESS,l(this,ws)||qt._defaultThickness],[Mt.HIGHLIGHT_FREE,l(this,Cn)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(l(this,Wi),{root:{fill:this.color,"fill-opacity":this.opacity}}),l(this,r0)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",k(this,r0,new hm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(re(this,Tt,Jw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,re(this,Tt,Jw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){re(this,Tt,tT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(re(this,Tt,ac).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?re(this,Tt,tT).call(this):t&&(re(this,Tt,ac).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,s,a;let{drawLayer:n}=this.parent,i;l(this,Cn)?(t=(t-this.rotation+360)%360,i=re(o=qt,As,Ph).call(o,l(this,zi).box,t)):i=re(s=qt,As,Ph).call(s,[this.x,this.y,this.width,this.height],t),n.updateProperties(l(this,Wi),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(l(this,zn),{bbox:re(a=qt,As,Ph).call(a,l(this,bi).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();l(this,sp)&&(t.setAttribute("aria-label",l(this,sp)),t.setAttribute("role","mark")),l(this,Cn)?t.classList.add("free"):this.div.addEventListener("keydown",re(this,Tt,n3).bind(this),{signal:this._uiManager._signal});let n=k(this,pf,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,df),this.setDims(),UB(this,l(this,pf),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:re(this,Tt,Zw).call(this,!0);break;case 1:case 3:re(this,Tt,Zw).call(this,!1);break}}select(){super.select(),l(this,zn)&&this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),l(this,zn)&&(this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{selected:!1}}),l(this,Cn)||re(this,Tt,Zw).call(this,!1))}get _mustFixPosition(){return!l(this,Cn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Wi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,zn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:o,y:s}){let{x:a,y:u,width:c,height:f}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),m=b=>{h.abort(),re(this,As,a3).call(this,t,b)};window.addEventListener("blur",m,{signal:d}),window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("pointerdown",Cr,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Zi,{signal:d}),i.addEventListener("pointermove",re(this,As,o3).bind(this,t),{signal:d}),this._freeHighlight=new ym({x:o,y:s},[a,u,c,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var v,w,y,_;let o=null;if(t instanceof Nv){let{data:{quadPoints:E,rect:S,rotation:A,id:P,color:R,opacity:Y,popupRef:te,richText:K,contentsObj:ie,creationDate:j,modificationDate:q},parent:{page:{pageNumber:fe}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(R),opacity:Y,quadPoints:E,boxes:null,pageIndex:fe-1,rect:S.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:te,richText:K,comment:ie?.str||null,creationDate:j,modificationDate:q}}else if(t instanceof gm){let{data:{inkLists:E,rect:S,rotation:A,id:P,color:R,borderStyle:{rawWidth:Y},popupRef:te,richText:K,contentsObj:ie,creationDate:j,modificationDate:q},parent:{page:{pageNumber:fe}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(R),thickness:Y,inkLists:E,boxes:null,pageIndex:fe-1,rect:S.slice(0),rotation:A,annotationElementId:P,id:P,deleted:!1,popupRef:te,richText:K,comment:ie?.str||null,creationDate:j,modificationDate:q}}let{color:s,quadPoints:a,inkLists:u,opacity:c}=t,f=await super.deserialize(t,n,i);f.color=it.makeHexColor(...s),f.opacity=c||1,u&&k(f,ws,t.thickness),f._initialData=o,t.comment&&f.setCommentData(t);let[h,d]=f.pageDimensions,[m,b]=f.pageTranslation;if(a){let E=k(f,Ha,[]);for(let S=0;S<a.length;S+=8)E.push({x:(a[S]-m)/h,y:1-(a[S+1]-b)/d,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/d});re(v=f,Tt,eT).call(v),re(w=f,Tt,ac).call(w),f.rotate(f.rotation)}else if(u){k(f,Cn,!0);let E=u[0],S={x:E[0]-m,y:d-(E[1]-b)},A=new ym(S,[0,0,h,d],1,l(f,ws)/2,!0,.001);for(let Y=0,te=E.length;Y<te;Y+=2)S.x=E[Y]-m,S.y=d-(E[Y+1]-b),A.add(S);let{id:P,clipPathId:R}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);re(y=f,Tt,Kw).call(y,{highlightOutlines:A.getOutlines(),highlightId:P,clipPathId:R}),re(_=f,Tt,ac).call(_),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,ws),quadPoints:re(this,Tt,i3).call(this),outlines:re(this,Tt,s3).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!re(this,Tt,l3).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};rp=new WeakMap,t0=new WeakMap,Ha=new WeakMap,df=new WeakMap,r0=new WeakMap,bi=new WeakMap,n0=new WeakMap,i0=new WeakMap,pf=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Cn=new WeakMap,np=new WeakMap,ip=new WeakMap,zn=new WeakMap,sp=new WeakMap,ws=new WeakMap,s0=new WeakMap,Tt=new WeakSet,eT=function(){let t=new mm(l(this,Ha),.001);k(this,zi,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,zi).box;let n=new mm(l(this,Ha),.0025,.001,this._uiManager.direction==="ltr");k(this,bi,n.getOutlines());let{firstPoint:i}=l(this,zi);k(this,np,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);let{lastPoint:o}=l(this,bi);k(this,ip,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Kw=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,m;if(k(this,zi,t),k(this,bi,t.getNewOutline(l(this,ws)/2+1.5,.0025)),n>=0)k(this,Wi,n),k(this,df,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),k(this,zn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},!0));else if(this.parent){let b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Wi),{bbox:re(d=qt,As,Ph).call(d,l(this,zi).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,zn),{bbox:re(m=qt,As,Ph).call(m,l(this,bi).box,b),path:{d:l(this,bi).toSVGPath()}})}let[s,a,u,c]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=u,this.height=c;break;case 90:{let[b,v]=this.parentDimensions;this.x=a,this.y=1-s,this.width=u*v/b,this.height=c*b/v;break}case 180:this.x=1-s,this.y=1-a,this.width=u,this.height=c;break;case 270:{let[b,v]=this.parentDimensions;this.x=1-a,this.y=s,this.width=u*v/b,this.height=c*b/v;break}}let{firstPoint:f}=t;k(this,np,[(f[0]-s)/u,(f[1]-a)/c]);let{lastPoint:h}=l(this,bi);k(this,ip,[(h[0]-s)/u,(h[1]-a)/c])},e3=function(t){let n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,t,qt._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},t3=function(t){let n=l(this,ws),i=o=>{k(this,ws,o),re(this,Tt,r3).call(this,o)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},r3=function(t){l(this,Cn)&&(re(this,Tt,Kw).call(this,{highlightOutlines:l(this,zi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},tT=function(){l(this,Wi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Wi)),k(this,Wi,null),this.parent.drawLayer.remove(l(this,zn)),k(this,zn,null))},ac=function(t=this.parent){l(this,Wi)===null&&({id:tn(this,Wi)._,clipPathId:tn(this,df)._}=t.drawLayer.draw({bbox:l(this,zi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Cn)},path:{d:l(this,zi).toSVGPath()}},!1,!0),k(this,zn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Cn)},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},l(this,Cn))),l(this,pf)&&(l(this,pf).style.clipPath=l(this,df)))},As=new WeakSet,Ph=function([t,n,i,o],s){switch(s){case 90:return[1-n-o,t,o,i];case 180:return[1-t-i,1-n-o,i,o];case 270:return[n,1-t-i,o,i]}return[t,n,i,o]},n3=function(t){qt._keyboardManager.exec(this,t)},Zw=function(t){if(!l(this,rp))return;let n=window.getSelection();t?n.setPosition(l(this,rp),l(this,t0)):n.setPosition(l(this,n0),l(this,i0))},Jw=function(){return l(this,Cn)?this.rotation:0},i3=function(){if(l(this,Cn))return null;let[t,n]=this.pageDimensions,[i,o]=this.pageTranslation,s=l(this,Ha),a=new Float32Array(s.length*8),u=0;for(let{x:c,y:f,width:h,height:d}of s){let m=c*t+i,b=(1-f)*n+o;a[u]=a[u+4]=m,a[u+1]=a[u+3]=b,a[u+2]=a[u+6]=m+h*t,a[u+5]=a[u+7]=b-d*n,u+=8}return a},s3=function(t){return l(this,zi).serialize(t,re(this,Tt,Jw).call(this))},o3=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},a3=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},l3=function(t){let{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,o)=>i!==n[o])},V(qt,As),Je(qt,"_defaultColor",null),Je(qt,"_defaultOpacity",1),Je(qt,"_defaultThickness",12),Je(qt,"_type","highlight"),Je(qt,"_editorType",vt.HIGHLIGHT),Je(qt,"_freeHighlightId",-1),Je(qt,"_freeHighlight",null),Je(qt,"_freeHighlightClipId","");Bv=qt,Fv=class{constructor(){V(this,gf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){l(this,gf)[e]=t}toSVGProperties(){let e=l(this,gf);return k(this,gf,Object.create(null)),{root:e}}reset(){k(this,gf,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){dr("Not implemented")}};gf=new WeakMap;Pt=class Pt extends mr{constructor(t){super(t);V(this,$t);V(this,qi,null);V(this,op);Je(this,"_colorPicker",null);Je(this,"_drawId",null);k(this,op,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(re(this,$t,rT).call(this,t),re(this,$t,Kg).call(this))}static _mergeSVGProperties(t,n){let i=new Set(Object.keys(t));for(let[o,s]of Object.entries(n))i.has(o)?Object.assign(t[o],s):t[o]=s;return t}static getDefaultDrawingOptions(t){dr("Not implemented")}static get typesMap(){dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(Pt,yn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){let i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){let t=[],n=this._defaultDrawingOptions;for(let[i,o]of this.typesMap)t.push([i,n[o]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:n}=this;for(let[i,o]of this.constructor.typesMap)t.push([i,n[o]]);return t}_updateProperty(t,n,i){let o=this._drawingOptions,s=o[n],a=u=>{o.updateProperty(n,u);let c=l(this,qi).updateProperty(n,u);c&&re(this,$t,Zg).call(this,c),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathResizingSVGProperties(re(this,$t,Qw).call(this)),{bbox:re(this,$t,Mh).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathResizedSVGProperties(re(this,$t,Qw).call(this)),{bbox:re(this,$t,Mh).call(this)}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:re(this,$t,Mh).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,qi).getPathTranslatedSVGProperties(re(this,$t,Qw).call(this),this.parentDimensions),{bbox:re(this,$t,Mh).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,op)&&(k(this,op,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){re(this,$t,iT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(re(this,$t,Kg).call(this),re(this,$t,Zg).call(this,l(this,qi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),re(this,$t,iT).call(this)):t&&(this._uiManager.addShouldRescale(this),re(this,$t,Kg).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:re(this,$t,Mh).call(this)},l(this,qi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&re(this,$t,Zg).call(this,l(this,qi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);let i=super.render();i.classList.add("draw");let o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,o,s){dr("Not implemented")}static startDrawing(t,n,i,o){let{target:s,offsetX:a,offsetY:u,pointerId:c,pointerType:f}=o;if(Bn.isInitializedAndDifferentPointerType(f))return;let{viewport:{rotation:h}}=t,{width:d,height:m}=s.getBoundingClientRect(),b=k(Pt,mf,new AbortController),v=t.combinedSignal(b);if(Bn.setPointer(f,c),window.addEventListener("pointerup",w=>{Bn.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:v}),window.addEventListener("pointercancel",w=>{Bn.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",w=>{Bn.isSamePointerType(w.pointerType)&&(Bn.initializeAndAddPointerId(w.pointerId),l(Pt,yn).isCancellable()&&(l(Pt,yn).removeLastElement(),l(Pt,yn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Zi,{signal:v}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),s.addEventListener("touchmove",w=>{Bn.isSameTimeStamp(w.timeStamp)&&Cr(w)},{signal:v}),t.toggleDrawing(),n._editorUndoBar?.hide(),l(Pt,yn)){t.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).startNew(a,u,d,m,h));return}n.updateUIForDefaultProperties(this),k(Pt,yn,this.createDrawerInstance(a,u,d,m,h)),k(Pt,yf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(Pt,yf).toSVGProperties(),l(Pt,yn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Bn.isSameTimeStamp(t.timeStamp),!l(Pt,yn))return;let{offsetX:n,offsetY:i,pointerId:o}=t;if(Bn.isSamePointerId(o)){if(Bn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).add(n,i)),Bn.setTimeStamp(t.timeStamp),Cr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,k(Pt,yn,null),k(Pt,yf,null),Bn.clearTimeStamp()),l(Pt,mf)&&(l(Pt,mf).abort(),k(Pt,mf,null),Bn.clearPointerIds())}static _endDraw(t){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let i=l(Pt,yn),o=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Mt.DRAW_STEP),!l(Pt,yn).isEmpty()){let{pageDimensions:[i,o],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Pt,yn).getOutlines(i*s,o*s,s,this._INNER_MARGIN),drawingOptions:l(Pt,yf),mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,o,s,a){dr("Not implemented")}static async deserialize(t,n,i){var h,d;let{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}=n.viewport,c=this.deserializeDraw(a,u,o,s,this._INNER_MARGIN,t),f=await super.deserialize(t,n,i);return f.createDrawingOptions(t),re(h=f,$t,rT).call(h,{drawOutlines:c}),re(d=f,$t,Kg).call(d),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){let[n,i]=this.pageTranslation,[o,s]=this.pageDimensions;return l(this,qi).serialize([n,i,o,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};qi=new WeakMap,op=new WeakMap,yn=new WeakMap,mf=new WeakMap,yf=new WeakMap,$t=new WeakSet,rT=function({drawOutlines:t,drawId:n,drawingOptions:i}){k(this,qi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=re(this,$t,nT).call(this,t,this.parent),re(this,$t,Zg).call(this,t.box)},nT=function(t,n){let{id:i}=n.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},iT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=re(this,$t,nT).call(this,l(this,qi),t)}},u3=function([t,n,i,o]){let{parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[n,1-t,i*(a/s),o*(s/a)];case 180:return[1-t,1-n,i,o];case 270:return[1-n,t,i*(a/s),o*(s/a)];default:return[t,n,i,o]}},Qw=function(){let{x:t,y:n,width:i,height:o,parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[1-n,t,i*(s/a),o*(a/s)];case 180:return[1-t,1-n,i,o];case 270:return[n,1-t,i*(s/a),o*(a/s)];default:return[t,n,i,o]}},Zg=function(t){[this.x,this.y,this.width,this.height]=re(this,$t,u3).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mh=function(){let{x:t,y:n,width:i,height:o,rotation:s,parentRotation:a,parentDimensions:[u,c]}=this;switch((s*4+a)/90){case 1:return[1-n-o,t,o,i];case 2:return[1-t-i,1-n-o,i,o];case 3:return[n,1-t-i,o,i];case 4:return[t,n-i*(u/c),o*(c/u),i*(u/c)];case 5:return[1-n,t,i*(u/c),o*(c/u)];case 6:return[1-t-o*(c/u),1-n,o*(c/u),i*(u/c)];case 7:return[n-i*(u/c),1-t-o*(c/u),i*(u/c),o*(c/u)];case 8:return[t-i,n-o,i,o];case 9:return[1-n,t-i,o,i];case 10:return[1-t,1-n,i,o];case 11:return[n-o,1-t,o,i];case 12:return[t-o*(c/u),n,o*(c/u),i*(u/c)];case 13:return[1-n-i*(u/c),t-o*(c/u),i*(u/c),o*(c/u)];case 14:return[1-t,1-n-i*(u/c),o*(c/u),i*(u/c)];case 15:return[n,1-t,i*(u/c),o*(c/u)];default:return[t,n,i,o]}},Je(Pt,"_currentDrawId",-1),Je(Pt,"_currentParent",null),V(Pt,yn,null),V(Pt,mf,null),V(Pt,yf,null),Je(Pt,"_INNER_MARGIN",3);Uv=Pt,sT=class{constructor(e,t,n,i,o,s){V(this,lp);V(this,No,new Float64Array(6));V(this,bn);V(this,wn);V(this,bf);V(this,ap);V(this,Kn);V(this,Rn,"");V(this,vs,0);V(this,wf,new kf);V(this,vf);V(this,_f);k(this,vf,n),k(this,_f,i),k(this,bf,o),k(this,ap,s),[e,t]=re(this,lp,ev).call(this,e,t);let a=k(this,bn,[NaN,NaN,NaN,NaN,e,t]);k(this,Kn,[e,t]),k(this,wn,[{line:a,points:l(this,Kn)}]),l(this,No).set(a,0)}updateProperty(e,t){e==="stroke-width"&&k(this,ap,t)}isEmpty(){return!l(this,wn)||l(this,wn).length===0}isCancellable(){return l(this,Kn).length<=10}add(e,t){[e,t]=re(this,lp,ev).call(this,e,t);let[n,i,o,s]=l(this,No).subarray(2,6),a=e-o,u=t-s;return Math.hypot(l(this,vf)*a,l(this,_f)*u)<=2?null:(l(this,Kn).push(e,t),isNaN(n)?(l(this,No).set([o,s,e,t],2),l(this,bn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,No)[0])&&l(this,bn).splice(6,6),l(this,No).set([n,i,o,s,e,t],0),l(this,bn).push(...at.createBezierPoints(n,i,o,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let n=this.add(e,t);return n||(l(this,Kn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){k(this,vf,n),k(this,_f,i),k(this,bf,o),[e,t]=re(this,lp,ev).call(this,e,t);let s=k(this,bn,[NaN,NaN,NaN,NaN,e,t]);k(this,Kn,[e,t]);let a=l(this,wn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,wn).push({line:s,points:l(this,Kn)}),l(this,No).set(s,0),k(this,vs,0),this.toSVGPath(),null}getLastElement(){return l(this,wn).at(-1)}setLastElement(e){return l(this,wn)?(l(this,wn).push(e),k(this,bn,e.line),k(this,Kn,e.points),k(this,vs,0),{path:{d:this.toSVGPath()}}):l(this,wf).setLastElement(e)}removeLastElement(){if(!l(this,wn))return l(this,wf).removeLastElement();l(this,wn).pop(),k(this,Rn,"");for(let e=0,t=l(this,wn).length;e<t;e++){let{line:n,points:i}=l(this,wn)[e];k(this,bn,n),k(this,Kn,i),k(this,vs,0),this.toSVGPath()}return{path:{d:l(this,Rn)}}}toSVGPath(){let e=at.svgRound(l(this,bn)[4]),t=at.svgRound(l(this,bn)[5]);if(l(this,Kn).length===2)return k(this,Rn,`${l(this,Rn)} M ${e} ${t} Z`),l(this,Rn);if(l(this,Kn).length<=6){let i=l(this,Rn).lastIndexOf("M");k(this,Rn,`${l(this,Rn).slice(0,i)} M ${e} ${t}`),k(this,vs,6)}if(l(this,Kn).length===4){let i=at.svgRound(l(this,bn)[10]),o=at.svgRound(l(this,bn)[11]);return k(this,Rn,`${l(this,Rn)} L ${i} ${o}`),k(this,vs,12),l(this,Rn)}let n=[];l(this,vs)===0&&(n.push(`M ${e} ${t}`),k(this,vs,6));for(let i=l(this,vs),o=l(this,bn).length;i<o;i+=6){let[s,a,u,c,f,h]=l(this,bn).slice(i,i+6).map(at.svgRound);n.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}return k(this,Rn,l(this,Rn)+n.join(" ")),k(this,vs,l(this,bn).length),l(this,Rn)}getOutlines(e,t,n,i){let o=l(this,wn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,wf).build(l(this,wn),e,t,n,l(this,bf),l(this,ap),i),k(this,No,null),k(this,bn,null),k(this,wn,null),k(this,Rn,null),l(this,wf)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}};No=new WeakMap,bn=new WeakMap,wn=new WeakMap,bf=new WeakMap,ap=new WeakMap,Kn=new WeakMap,Rn=new WeakMap,vs=new WeakMap,wf=new WeakMap,vf=new WeakMap,_f=new WeakMap,lp=new WeakSet,ev=function(e,t){return at._normalizePoint(e,t,l(this,vf),l(this,_f),l(this,bf))};kf=class extends at{constructor(){super(...arguments);V(this,In);V(this,Zn);V(this,o0,0);V(this,a0);V(this,Hi);V(this,ko);V(this,Lo);V(this,up);V(this,cp);V(this,Ef)}build(t,n,i,o,s,a,u){k(this,ko,n),k(this,Lo,i),k(this,up,o),k(this,cp,s),k(this,Ef,a),k(this,a0,u??0),k(this,Hi,t),re(this,In,f3).call(this)}get thickness(){return l(this,Ef)}setLastElement(t){return l(this,Hi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Hi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:n}of l(this,Hi)){if(t.push(`M${at.svgRound(n[4])} ${at.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${at.svgRound(n[10])} ${at.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){let[s,a,u,c,f,h]=n.subarray(i,i+6).map(at.svgRound);t.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}}return t.join("")}serialize([t,n,i,o],s){let a=[],u=[],[c,f,h,d]=re(this,In,c3).call(this),m,b,v,w,y,_,E,S,A;switch(l(this,cp)){case 0:A=at._rescale,m=t,b=n+o,v=i,w=-o,y=t+c*i,_=n+(1-f-d)*o,E=t+(c+h)*i,S=n+(1-f)*o;break;case 90:A=at._rescaleAndSwap,m=t,b=n,v=i,w=o,y=t+f*i,_=n+c*o,E=t+(f+d)*i,S=n+(c+h)*o;break;case 180:A=at._rescale,m=t+i,b=n,v=-i,w=o,y=t+(1-c-h)*i,_=n+f*o,E=t+(1-c)*i,S=n+(f+d)*o;break;case 270:A=at._rescaleAndSwap,m=t+i,b=n+o,v=-i,w=-o,y=t+(1-f-d)*i,_=n+(1-c-h)*o,E=t+(1-f)*i,S=n+(1-c)*o;break}for(let{line:P,points:R}of l(this,Hi))a.push(A(P,m,b,v,w,s?new Array(P.length):null)),u.push(A(R,m,b,v,w,s?new Array(R.length):null));return{lines:a,points:u,rect:[y,_,E,S]}}static deserialize(t,n,i,o,s,{paths:{lines:a,points:u},rotation:c,thickness:f}){let h=[],d,m,b,v,w;switch(c){case 0:w=at._rescale,d=-t/i,m=n/o+1,b=1/i,v=-1/o;break;case 90:w=at._rescaleAndSwap,d=-n/o,m=-t/i,b=1/o,v=1/i;break;case 180:w=at._rescale,d=t/i+1,m=-n/o,b=-1/i,v=1/o;break;case 270:w=at._rescaleAndSwap,d=n/o+1,m=t/i+1,b=-1/o,v=-1/i;break}if(!a){a=[];for(let _ of u){let E=_.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}let S=new Float32Array(3*(E-2));a.push(S);let[A,P,R,Y]=_.subarray(0,4);S.set([NaN,NaN,NaN,NaN,A,P],0);for(let te=4;te<E;te+=2){let K=_[te],ie=_[te+1];S.set(at.createBezierPoints(A,P,R,Y,K,ie),(te-2)*3),[A,P,R,Y]=[R,Y,K,ie]}}}for(let _=0,E=a.length;_<E;_++)h.push({line:w(a[_].map(S=>S??NaN),d,m,b,v),points:w(u[_].map(S=>S??NaN),d,m,b,v)});let y=new this.prototype.constructor;return y.build(h,i,o,1,c,f,s),y}get box(){return l(this,Zn)}updateProperty(t,n){return t==="stroke-width"?re(this,In,h3).call(this,n):null}updateParentDimensions([t,n],i){let[o,s]=re(this,In,pa).call(this);k(this,ko,t),k(this,Lo,n),k(this,up,i);let[a,u]=re(this,In,pa).call(this),c=a-o,f=u-s,h=l(this,Zn);return h[0]-=c,h[1]-=f,h[2]+=2*c,h[3]+=2*f,h}updateRotation(t){return k(this,o0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Zn).map(at.svgRound).join(" ")}get defaultProperties(){let[t,n]=l(this,Zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`}}}get rotationTransform(){let[,,t,n]=l(this,Zn),i=0,o=0,s=0,a=0,u=0,c=0;switch(l(this,o0)){case 90:o=n/t,s=-t/n,u=t;break;case 180:i=-1,a=-1,u=t,c=n;break;case 270:o=-n/t,s=t/n,c=n;break;default:return""}return`matrix(${i} ${o} ${s} ${a} ${at.svgRound(u)} ${at.svgRound(c)})`}getPathResizingSVGProperties([t,n,i,o]){let[s,a]=re(this,In,pa).call(this),[u,c,f,h]=l(this,Zn);if(Math.abs(f-s)<=at.PRECISION||Math.abs(h-a)<=at.PRECISION){let w=t+i/2-(u+f/2),y=n+o/2-(c+h/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${y})`}}}let d=(i-2*s)/(f-2*s),m=(o-2*a)/(h-2*a),b=f/i,v=h/o;return{path:{"transform-origin":`${at.svgRound(u)} ${at.svgRound(c)}`,transform:`${this.rotationTransform} scale(${b} ${v}) translate(${at.svgRound(s)} ${at.svgRound(a)}) scale(${d} ${m}) translate(${at.svgRound(-s)} ${at.svgRound(-a)})`}}}getPathResizedSVGProperties([t,n,i,o]){let[s,a]=re(this,In,pa).call(this),u=l(this,Zn),[c,f,h,d]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=o,Math.abs(h-s)<=at.PRECISION||Math.abs(d-a)<=at.PRECISION){let y=t+i/2-(c+h/2),_=n+o/2-(f+d/2);for(let{line:E,points:S}of l(this,Hi))at._translate(E,y,_,E),at._translate(S,y,_,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let m=(i-2*s)/(h-2*s),b=(o-2*a)/(d-2*a),v=-m*(c+s)+t+s,w=-b*(f+a)+n+a;if(m!==1||b!==1||v!==0||w!==0)for(let{line:y,points:_}of l(this,Hi))at._rescale(y,v,w,m,b,y),at._rescale(_,v,w,m,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){let[o,s]=i,a=l(this,Zn),u=t-a[0],c=n-a[1];if(l(this,ko)===o&&l(this,Lo)===s)for(let{line:f,points:h}of l(this,Hi))at._translate(f,u,c,f),at._translate(h,u,c,h);else{let f=l(this,ko)/o,h=l(this,Lo)/s;k(this,ko,o),k(this,Lo,s);for(let{line:d,points:m}of l(this,Hi))at._rescale(d,u,c,f,h,d),at._rescale(m,u,c,f,h,m);a[2]*=f,a[3]*=h}return a[0]=t,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`}}}get defaultSVGProperties(){let t=l(this,Zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Zn=new WeakMap,o0=new WeakMap,a0=new WeakMap,Hi=new WeakMap,ko=new WeakMap,Lo=new WeakMap,up=new WeakMap,cp=new WeakMap,Ef=new WeakMap,In=new WeakSet,pa=function(t=l(this,Ef)){let n=l(this,a0)+t/2*l(this,up);return l(this,cp)%180===0?[n/l(this,ko),n/l(this,Lo)]:[n/l(this,Lo),n/l(this,ko)]},c3=function(){let[t,n,i,o]=l(this,Zn),[s,a]=re(this,In,pa).call(this,0);return[t+s,n+a,i-2*s,o-2*a]},f3=function(){let t=k(this,Zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:o}of l(this,Hi)){if(o.length<=12){for(let u=4,c=o.length;u<c;u+=6)it.pointBoundingBox(o[u],o[u+1],t);continue}let s=o[4],a=o[5];for(let u=6,c=o.length;u<c;u+=6){let[f,h,d,m,b,v]=o.subarray(u,u+6);it.bezierBoundingBox(s,a,f,h,d,m,b,v,t),s=b,a=v}}let[n,i]=re(this,In,pa).call(this);t[0]=Wn(t[0]-n,0,1),t[1]=Wn(t[1]-i,0,1),t[2]=Wn(t[2]+n,0,1),t[3]=Wn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},h3=function(t){let[n,i]=re(this,In,pa).call(this);k(this,Ef,t);let[o,s]=re(this,In,pa).call(this),[a,u]=[o-n,s-i],c=l(this,Zn);return c[0]-=a,c[1]-=u,c[2]+=2*a,c[3]+=2*u,c};jv=class r extends Fv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:mr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Wh=class Wh extends Uv{constructor(t){super({...t,name:"inkEditor"});V(this,o_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new jv(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,o,s){return new sT(t,n,i,o,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,o,s,a){return kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=null;if(t instanceof gm){let{data:{inkLists:a,rect:u,rotation:c,id:f,color:h,opacity:d,borderStyle:{rawWidth:m},popupRef:b,richText:v,contentsObj:w,creationDate:y,modificationDate:_},parent:{page:{pageNumber:E}}}=t;o=t={annotationType:vt.INK,color:Array.from(h),thickness:m,opacity:d,paths:{points:a},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:c,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:v,comment:w?.str||null,creationDate:y,modificationDate:_}}let s=await super.deserialize(t,n,i);return s._initialData=o,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Cv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Wh.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,u=Object.assign(super.serialize(t),{color:mr._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!re(this,o_,d3).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};o_=new WeakSet,d3=function(t){let{color:n,thickness:i,opacity:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,u)=>a!==n[u])||t.thickness!==i||t.opacity!==o||t.pageIndex!==s},Je(Wh,"_type","ink"),Je(Wh,"_editorType",vt.INK),Je(Wh,"_defaultDrawingOptions",null);oT=Wh,bm=class extends kf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}},Sw=8,kg=3,Es=class{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},o,s,a,u){let c=new OffscreenCanvas(1,1),f=c.getContext("2d",{alpha:!1}),h=200,d=f.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:b,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:y,fontBoundingBoxDescent:_,width:E}=f.measureText(e),S=1.5,A=Math.ceil(Math.max(Math.abs(m)+Math.abs(b)||0,E)*S),P=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||h,Math.abs(y)+Math.abs(_)||h)*S);c=new OffscreenCanvas(A,P),f=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=d,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,A,P),f.fillStyle="black",f.fillText(e,A*(S-1)/2,P*(3-S)/2);let R=re(this,Vt,uT).call(this,f.getImageData(0,0,A,P).data),Y=re(this,Vt,b3).call(this,R),te=re(this,Vt,cT).call(this,Y),K=re(this,Vt,lT).call(this,R,A,P,te);return this.processDrawnLines({lines:{curves:K,width:A,height:P},pageWidth:o,pageHeight:s,rotation:a,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,o){let[s,a,u]=re(this,Vt,w3).call(this,e),[c,f]=re(this,Vt,y3).call(this,s,a,u,Math.hypot(a,u)*l(this,Af).sigmaSFactor,l(this,Af).sigmaR,l(this,Af).kernelSize),h=re(this,Vt,cT).call(this,f),d=re(this,Vt,lT).call(this,c,a,u,h);return this.processDrawnLines({lines:{curves:d,width:a,height:u},pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:s,areContours:a}){i%180!==0&&([t,n]=[n,t]);let{curves:u,width:c,height:f}=e,h=e.thickness??0,d=[],m=Math.min(t/c,n/f),b=m/t,v=m/n,w=[];for(let{points:_}of u){let E=s?re(this,Vt,m3).call(this,_):_;if(!E)continue;w.push(E);let S=E.length,A=new Float32Array(S),P=new Float32Array(3*(S===2?2:S-2));if(d.push({line:P,points:A}),S===2){A[0]=E[0]*b,A[1]=E[1]*v,P.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[R,Y,te,K]=E;R*=b,Y*=v,te*=b,K*=v,A.set([R,Y,te,K],0),P.set([NaN,NaN,NaN,NaN,R,Y],0);for(let ie=4;ie<S;ie+=2){let j=A[ie]=E[ie]*b,q=A[ie+1]=E[ie+1]*v;P.set(at.createBezierPoints(R,Y,te,K,j,q),(ie-2)*3),[R,Y,te,K]=[te,K,j,q]}}if(d.length===0)return null;let y=a?new bm:new kf;return y.build(d,t,n,1,i,a?0:h,o),{outline:y,newCurves:w,areContours:a,thickness:h,width:c,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:o}){let s=1/0,a=-1/0,u=0;for(let E of e){u+=E.length;for(let S=2,A=E.length;S<A;S++){let P=E[S]-E[S-2];s=Math.min(s,P),a=Math.max(a,P)}}let c;s>=-128&&a<=127?c=Int8Array:s>=-32768&&a<=32767?c=Int16Array:c=Int32Array;let f=e.length,h=Sw+kg*f,d=new Uint32Array(h),m=0;d[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*c.BYTES_PER_ELEMENT,d[m++]=0,d[m++]=i,d[m++]=o,d[m++]=t?0:1,d[m++]=Math.max(0,Math.floor(n??0)),d[m++]=f,d[m++]=c.BYTES_PER_ELEMENT;for(let E of e)d[m++]=E.length-2,d[m++]=E[0],d[m++]=E[1];let b=new CompressionStream("deflate-raw"),v=b.writable.getWriter();await v.ready,v.write(d);let w=c.prototype.constructor;for(let E of e){let S=new w(E.length-2);for(let A=2,P=E.length;A<P;A++)S[A-2]=E[A]-E[A-2];v.write(S)}v.close();let y=await new Response(b.readable).arrayBuffer(),_=new Uint8Array(y);return CB(_)}static async decompressSignature(e){try{let t=QG(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let s=null,a=0;for await(let E of n)s||(s=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),s.set(E,a),a+=E.length;let u=new Uint32Array(s.buffer,0,s.length>>2),c=u[1];if(c!==0)throw new Error(`Invalid version: ${c}`);let f=u[2],h=u[3],d=u[4]===0,m=u[5],b=u[6],v=u[7],w=[],y=(Sw+kg*b)*Uint32Array.BYTES_PER_ELEMENT,_;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,y);break}a=0;for(let E=0;E<b;E++){let S=u[kg*E+Sw],A=new Float32Array(S+2);w.push(A);for(let P=0;P<kg-1;P++)A[P]=u[kg*E+Sw+P+1];for(let P=0;P<S;P++)A[P+2]=A[P]+_[a++]}return{areContours:d,thickness:m,outlines:w,width:f,height:h}}catch(t){return _t(`decompressSignature: ${t}`),null}}};Af=new WeakMap,Vt=new WeakSet,aT=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},qs=new WeakMap,p3=function(e,t,n,i,o,s,a){let u=re(this,Vt,aT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(-c+u-a+16)%8,h=l(this,qs)[2*f],d=l(this,qs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},g3=function(e,t,n,i,o,s,a){let u=re(this,Vt,aT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(c+u+a+16)%8,h=l(this,qs)[2*f],d=l(this,qs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},lT=function(e,t,n,i){let o=e.length,s=new Int32Array(o);for(let f=0;f<o;f++)s[f]=e[f]<=i?1:0;for(let f=1;f<n-1;f++)s[f*t]=s[f*t+t-1]=0;for(let f=0;f<t;f++)s[f]=s[t*n-1-f]=0;let a=1,u,c=[];for(let f=1;f<n-1;f++){u=1;for(let h=1;h<t-1;h++){let d=f*t+h,m=s[d];if(m===0)continue;let b=f,v=h;if(m===1&&s[d-1]===0)a+=1,v-=1;else if(m>=1&&s[d+1]===0)a+=1,v+=1,m>1&&(u=m);else{m!==1&&(u=Math.abs(m));continue}let w=[h,f],y=v===h+1,_={isHole:y,points:w,id:a,parent:0};c.push(_);let E;for(let ie of c)if(ie.id===u){E=ie;break}E?E.isHole?_.parent=y?E.parent:u:_.parent=y?u:E.parent:_.parent=y?u:0;let S=re(this,Vt,p3).call(this,s,t,f,h,b,v,0);if(S===-1){s[d]=-a,s[d]!==1&&(u=Math.abs(s[d]));continue}let A=l(this,qs)[2*S],P=l(this,qs)[2*S+1],R=f+A,Y=h+P;b=R,v=Y;let te=f,K=h;for(;;){let ie=re(this,Vt,g3).call(this,s,t,te,K,b,v,1);A=l(this,qs)[2*ie],P=l(this,qs)[2*ie+1];let j=te+A,q=K+P;w.push(q,j);let fe=te*t+K;if(s[fe+1]===0?s[fe]=-a:s[fe]===1&&(s[fe]=a),j===f&&q===h&&te===R&&K===Y){s[d]!==1&&(u=Math.abs(s[d]));break}else b=te,v=K,te=j,K=q}}}return c},tv=function(e,t,n,i){if(n-t<=4){for(let R=t;R<n-2;R+=2)i.push(e[R],e[R+1]);return}let o=e[t],s=e[t+1],a=e[n-4]-o,u=e[n-3]-s,c=Math.hypot(a,u),f=a/c,h=u/c,d=f*s-h*o,m=u/a,b=1/c,v=Math.atan(m),w=Math.cos(v),y=Math.sin(v),_=b*(Math.abs(w)+Math.abs(y)),E=b*(1-_+_**2),S=Math.max(Math.atan(Math.abs(y+w)*E),Math.atan(Math.abs(y-w)*E)),A=0,P=t;for(let R=t+2;R<n-2;R+=2){let Y=Math.abs(d-f*e[R+1]+h*e[R]);Y>A&&(P=R,A=Y)}A>(c*S)**2?(re(this,Vt,tv).call(this,e,t,P+2,i),re(this,Vt,tv).call(this,e,P,n,i)):i.push(o,s)},m3=function(e){let t=[],n=e.length;return re(this,Vt,tv).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},y3=function(e,t,n,i,o,s){let a=new Float32Array(s**2),u=-2*i**2,c=s>>1;for(let v=0;v<s;v++){let w=(v-c)**2;for(let y=0;y<s;y++)a[v*s+y]=Math.exp((w+(y-c)**2)/u)}let f=new Float32Array(256),h=-2*o**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/h);let d=e.length,m=new Uint8Array(d),b=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){let y=v*t+w,_=e[y],E=0,S=0;for(let P=0;P<s;P++){let R=v+P-c;if(!(R<0||R>=n))for(let Y=0;Y<s;Y++){let te=w+Y-c;if(te<0||te>=t)continue;let K=e[R*t+te],ie=a[P*s+Y]*f[Math.abs(K-_)];E+=K*ie,S+=ie}}let A=m[y]=Math.round(E/S);b[A]++}return[m,b]},b3=function(e){let t=new Uint32Array(256);for(let n of e)t[n]++;return t},uT=function(e){let t=e.length,n=new Uint8ClampedArray(t>>2),i=-1/0,o=1/0;for(let a=0,u=n.length;a<u;a++){let c=n[a]=e[a<<2];i=Math.max(i,c),o=Math.min(o,c)}let s=255/(i-o);for(let a=0,u=n.length;a<u;a++)n[a]=(n[a]-o)*s;return n},cT=function(e){let t,n=-1/0,i=-1/0,o=e.findIndex(u=>u!==0),s=o,a=o;for(t=o;t<256;t++){let u=e[t];u>n&&(t-s>i&&(i=t-s,a=t-1),n=u,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},w3=function(e){let t=e,{width:n,height:i}=e,{maxDim:o}=l(this,Af),s=n,a=i;if(n>o||i>o){let d=n,m=i,b=Math.log2(Math.max(n,i)/o),v=Math.floor(b);b=b===v?v-1:v;for(let y=0;y<b;y++){s=Math.ceil(d/2),a=Math.ceil(m/2);let _=new OffscreenCanvas(s,a);_.getContext("2d").drawImage(e,0,0,d,m,0,0,s,a),d=s,m=a,e!==t&&e.close(),e=_.transferToImageBitmap()}let w=Math.min(o/s,o/a);s=Math.round(s*w),a=Math.round(a*w)}let c=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,s,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,s,a);let f=c.getImageData(0,0,s,a).data;return[re(this,Vt,uT).call(this,f),s,a]},V(Es,Vt),V(Es,Af,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),V(Es,qs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));fT=class r extends Fv{constructor(){super(),super.updateProperties({fill:mr._defaultLineColor,"stroke-width":0})}clone(){let e=new r;return e.updateAll(this),e}},hT=class r extends jv{constructor(e){super(e),super.updateProperties({stroke:mr._defaultLineColor,"stroke-width":1})}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Ci=class Ci extends Uv{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});V(this,cu,!1);V(this,Po,null);V(this,fu,null);V(this,xf,null);this._willKeepAspectRatio=!0,k(this,fu,t.signatureData||null),k(this,Po,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new fT,this._defaultDrawnSignatureOptions=new hT(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Po)}}static computeTelemetryFinalData(t){let n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n,{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,fu)){let{lines:o,mustSmooth:s,areContours:a,description:u,uuid:c,heightInPage:f}=l(this,fu),{rawDims:{pageWidth:h,pageHeight:d},rotation:m}=this.parent.viewport,b=Es.processDrawnLines({lines:o,pageWidth:h,pageHeight:d,rotation:m,innerMargin:Ci._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(b,f,u,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Po)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){k(this,xf,t),this.addEditToolbar()}getUuid(){return l(this,xf)}get description(){return l(this,Po)}set description(t){k(this,Po,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:n,thickness:i,width:o,height:s}=l(this,fu),a=Math.max(o,s),u=Es.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:o,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,o){let{x:s,y:a}=this,{outline:u}=k(this,fu,t);k(this,cu,u instanceof bm),this.description=i;let c;l(this,cu)?c=Ci.getDefaultDrawingOptions():(c=Ci._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:c});let[,f]=this.pageDimensions,h=n/f;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Es.process(t,n,i,o,Ci._INNER_MARGIN)}getFromText(t,n){let{rawDims:{pageWidth:i,pageHeight:o},rotation:s}=this.parent.viewport;return Es.extractContoursFromText(t,n,i,o,s,Ci._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return Es.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:o,innerMargin:Ci._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ci.getDefaultDrawingOptions():(this._drawingOptions=Ci._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,cu),color:[0,0,0],thickness:l(this,cu)?0:o});return this.addComment(s),t?(s.paths={lines:n,points:i},s.uuid=l(this,xf),s.isCopy=!0):s.lines=n,l(this,Po)&&(s.accessibilityData={type:"Figure",alt:l(this,Po)}),s}static deserializeDraw(t,n,i,o,s,a){return a.areContours?bm.deserialize(t,n,i,o,s,a):kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=await super.deserialize(t,n,i);return k(o,cu,t.areContours),o.description=t.accessibilityData?.alt||"",k(o,xf,t.uuid),o}};cu=new WeakMap,Po=new WeakMap,fu=new WeakMap,xf=new WeakMap,Je(Ci,"_type","signature"),Je(Ci,"_editorType",vt.SIGNATURE),Je(Ci,"_defaultDrawingOptions",null);dT=Ci,Jg=class extends mr{constructor(t){super({...t,name:"stampEditor"});V(this,zt);V(this,Ar,null);V(this,vn,null);V(this,hu,null);V(this,Ga,null);V(this,du,null);V(this,fp,"");V(this,Va,null);V(this,Sf,!1);V(this,Mo,null);V(this,Gi,!1);V(this,hp,!1);k(this,Ga,t.bitmapUrl),k(this,du,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){mr.initialize(t,n)}static isHandlingMimeForPasting(t){return uv.includes(t)}static paste(t,n){n.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:o,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:o,width:s,height:a,channels:o.length/(s*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");let c=u.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){l(this,vn)&&(k(this,Ar,null),this._uiManager.imageManager.deleteId(l(this,vn)),l(this,Va)?.remove(),k(this,Va,null),l(this,Mo)&&(clearTimeout(l(this,Mo)),k(this,Mo,null))),super.remove()}rebuild(){if(!this.parent){l(this,vn)&&re(this,zt,rv).call(this);return}super.rebuild(),this.div!==null&&(l(this,vn)&&l(this,Va)===null&&re(this,zt,rv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,hu)||l(this,Ar)||l(this,Ga)||l(this,du)||l(this,vn)||l(this,Sf))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Sf)||(l(this,Ar)?re(this,zt,nv).call(this):re(this,zt,rv).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){let{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(k(this,vn,i),o&&k(this,Ar,o),k(this,Sf,!1),re(this,zt,nv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Mo)!==null&&clearTimeout(l(this,Mo)),k(this,Mo,setTimeout(()=>{k(this,Mo,null),re(this,zt,pT).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);let{width:o,height:s}=l(this,Ar),a=new Bo,u=l(this,Ar),c=o,f=s,h=null;if(n){if(o>n||s>n){let R=Math.min(n/o,n/s);c=Math.floor(o*R),f=Math.floor(s*R)}h=document.createElement("canvas");let m=h.width=Math.ceil(c*a.sx),b=h.height=Math.ceil(f*a.sy);l(this,Gi)||(u=re(this,zt,iv).call(this,m,b));let v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":YA.isDarkMode&&(w="#8f8f9d",y="#42414d");let _=15,E=_*a.sx,S=_*a.sy,A=new OffscreenCanvas(E*2,S*2),P=A.getContext("2d");P.fillStyle=w,P.fillRect(0,0,E*2,S*2),P.fillStyle=y,P.fillRect(0,0,E,S),P.fillRect(E,S,E,S),v.fillStyle=v.createPattern(A,"repeat"),v.fillRect(0,0,m,b),v.drawImage(u,0,0,u.width,u.height,0,0,m,b)}let d=null;if(i){let m,b;if(a.symmetric&&u.width<t&&u.height<t)m=u.width,b=u.height;else if(u=l(this,Ar),o>t||s>t){let y=Math.min(t/o,t/s);m=Math.floor(o*y),b=Math.floor(s*y),l(this,Gi)||(u=re(this,zt,iv).call(this,m,b))}let w=new OffscreenCanvas(m,b).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,m,b),d={width:m,height:b,data:w.getImageData(0,0,m,b).data}}return{canvas:h,width:c,height:f,imageData:d}}static async deserialize(t,n,i){let o=null,s=!1;if(t instanceof kv){let{data:{rect:w,rotation:y,id:_,structParent:E,popupRef:S,richText:A,contentsObj:P,creationDate:R,modificationDate:Y},container:te,parent:{page:{pageNumber:K}},canvas:ie}=t,j,q;ie?(delete t.canvas,{id:j,bitmap:q}=i.imageManager.getFromCanvas(te.id,ie),ie.remove()):(s=!0,t._hasNoCanvas=!0);let fe=(await n._structTree.getAriaAttributes(`${Bh}${_}`))?.get("aria-label")||"";o=t={annotationType:vt.STAMP,bitmapId:j,bitmap:q,pageIndex:K-1,rect:w.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:fe},isSvg:!1,structParent:E,popupRef:S,richText:A,comment:P?.str||null,creationDate:R,modificationDate:Y}}let a=await super.deserialize(t,n,i),{rect:u,bitmap:c,bitmapUrl:f,bitmapId:h,isSvg:d,accessibilityData:m}=t;s?(i.addMissingCanvas(t.id,a),k(a,Sf,!0)):h&&i.imageManager.isValidId(h)?(k(a,vn,h),c&&k(a,Ar,c)):k(a,Ga,f),k(a,Gi,d);let[b,v]=a.pageDimensions;return a.width=(u[2]-u[0])/b,a.height=(u[3]-u[1])/v,m&&(a.altTextData=m),a._initialData=o,t.comment&&a.setCommentData(t),k(a,hp,!!o),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(t),{bitmapId:l(this,vn),isSvg:l(this,Gi)});if(this.addComment(i),t)return i.bitmapUrl=re(this,zt,sv).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:o,altText:s}=this.serializeAltText(!1);if(!o&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let u=re(this,zt,v3).call(this,i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);let a=l(this,Gi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,vn)))n.stamps.set(l(this,vn),{area:a,serialized:i}),i.bitmap=re(this,zt,sv).call(this,!1);else if(l(this,Gi)){let u=n.stamps.get(l(this,vn));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=re(this,zt,sv).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}};Ar=new WeakMap,vn=new WeakMap,hu=new WeakMap,Ga=new WeakMap,du=new WeakMap,fp=new WeakMap,Va=new WeakMap,Sf=new WeakMap,Mo=new WeakMap,Gi=new WeakMap,hp=new WeakMap,zt=new WeakSet,Qg=function(t,n=!1){if(!t){this.remove();return}k(this,Ar,t.bitmap),n||(k(this,vn,t.id),k(this,Gi,t.isSvg)),t.file&&k(this,fp,t.file.name),re(this,zt,nv).call(this)},em=function(){if(k(this,hu,null),this._uiManager.enableWaiting(!1),!!l(this,Va)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rv=function(){if(l(this,vn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,vn)).then(i=>re(this,zt,Qg).call(this,i,!0)).finally(()=>re(this,zt,em).call(this));return}if(l(this,Ga)){let i=l(this,Ga);k(this,Ga,null),this._uiManager.enableWaiting(!0),k(this,hu,this._uiManager.imageManager.getFromUrl(i).then(o=>re(this,zt,Qg).call(this,o)).finally(()=>re(this,zt,em).call(this)));return}if(l(this,du)){let i=l(this,du);k(this,du,null),this._uiManager.enableWaiting(!0),k(this,hu,this._uiManager.imageManager.getFromFile(i).then(o=>re(this,zt,Qg).call(this,o)).finally(()=>re(this,zt,em).call(this)));return}let t=document.createElement("input");t.type="file",t.accept=uv.join(",");let n=this._uiManager._signal;k(this,hu,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),re(this,zt,Qg).call(this,o)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>re(this,zt,em).call(this))),t.click()},nv=function(){let{div:t}=this,{width:n,height:i}=l(this,Ar),[o,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*o,i=this.height*s;else if(n>a*o||i>a*s){let c=Math.min(a*o/n,a*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);let u=k(this,Va,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/o,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),re(this,zt,pT).call(this),l(this,hp)||(this.parent.addUndoableEditor(this),k(this,hp,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fp)&&this.div.setAttribute("aria-description",l(this,fp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},iv=function(t,n){let{width:i,height:o}=l(this,Ar),s=i,a=o,u=l(this,Ar);for(;s>2*t||a>2*n;){let c=s,f=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(u,0,0,c,f,0,0,s,a),u=h.transferToImageBitmap()}return u},pT=function(){let[t,n]=this.parentDimensions,{width:i,height:o}=this,s=new Bo,a=Math.ceil(i*t*s.sx),u=Math.ceil(o*n*s.sy),c=l(this,Va);if(!c||c.width===a&&c.height===u)return;c.width=a,c.height=u;let f=l(this,Gi)?l(this,Ar):re(this,zt,iv).call(this,a,u),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(f,0,0,f.width,f.height,0,0,a,u)},sv=function(t){if(t){if(l(this,Gi)){let o=this._uiManager.imageManager.getSvgUrl(l(this,vn));if(o)return o}let n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Ar),n.getContext("2d").drawImage(l(this,Ar),0,0),n.toDataURL()}if(l(this,Gi)){let[n,i]=this.pageDimensions,o=Math.round(this.width*n*tl.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*tl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,s);return a.getContext("2d").drawImage(l(this,Ar),0,0,l(this,Ar).width,l(this,Ar).height,0,0,o,s),a.transferToImageBitmap()}return structuredClone(l(this,Ar))},v3=function(t){let{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=t.pageIndex===n,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&s,isSameAltText:s}},Je(Jg,"_type","stamp"),Je(Jg,"_editorType",vt.STAMP);Ls=class Ls{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:s,drawLayer:a,textLayer:u,viewport:c,l10n:f}){V(this,hr);V(this,Tf);V(this,dp,!1);V(this,pu,null);V(this,gu,null);V(this,Ya,null);V(this,wi,new Map);V(this,mu,!1);V(this,pp,!1);V(this,gp,!1);V(this,Hs,null);V(this,Xa,null);V(this,_n,null);V(this,Ka,null);V(this,yu,null);V(this,mp,-1);V(this,ft);let h=[...l(Ls,bu).values()];if(!Ls._initialized){Ls._initialized=!0;for(let d of h)d.initialize(f,e)}e.registerEditorTypes(h),k(this,ft,e),this.pageIndex=t,this.div=n,k(this,Tf,o),k(this,pu,s),this.viewport=c,k(this,_n,u),this.drawLayer=a,this._structTree=i,l(this,ft).addLayer(this)}get isEmpty(){return l(this,wi).size===0}get isInvisible(){return this.isEmpty&&l(this,ft).getMode()===vt.NONE}updateToolbar(e){l(this,ft).updateToolbar(e)}updateMode(e=l(this,ft).getMode()){switch(re(this,hr,ov).call(this),e){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===vt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(let n of l(Ls,bu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===l(this,_n)?.div}setEditingState(e){l(this,ft).setEditingState(e)}addCommands(e){l(this,ft).addCommands(e)}cleanUndoStack(e){l(this,ft).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){l(this,pu)?.togglePointerEvents(e)}async enable(){k(this,gp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),l(this,yu)?.abort(),k(this,yu,null);let e=new Set;for(let n of l(this,hr,gT))n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,ft).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));let t=l(this,pu);if(t)for(let n of t.getEditableAnnotations()){if(n.hide(),l(this,ft).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}k(this,gp,!1),l(this,ft)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(k(this,pp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,_n)&&!l(this,yu)){k(this,yu,new AbortController);let i=l(this,ft).combinedSignal(l(this,yu));l(this,_n).div.addEventListener("pointerdown",o=>{let{clientX:a,clientY:u,timeStamp:c}=o,f=l(this,mp);if(c-f>500){k(this,mp,c);return}k(this,mp,-1);let{classList:h}=this.div;h.toggle("getElements",!0);let d=document.elementsFromPoint(a,u);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let m,b=new RegExp(`^${im}[0-9]+$`);for(let w of d)if(b.test(w.id)){m=w.id;break}if(!m)return;let v=l(this,wi).get(m);v?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),v.dblclick(o))},{signal:i,capture:!0})}let e=l(this,pu),t=[];if(e){let i=new Map,o=new Map;for(let a of l(this,hr,gT)){if(a.disableEditing(),!a.annotationElementId){t.push(a);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else o.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}let s=e.getEditableAnnotations();for(let a of s){let{id:u}=a.data;if(l(this,ft).isDeletedAnnotationElement(u)){a.updateEdited({deleted:!0});continue}let c=o.get(u);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=i.get(u),c&&(l(this,ft).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}re(this,hr,ov).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let i of l(Ls,bu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),k(this,pp,!1)}getEditableAnnotation(e){return l(this,pu)?.getEditableAnnotation(e)||null}setActiveEditor(e){l(this,ft).getActive()!==e&&l(this,ft).setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,l(this,_n)?.div&&!l(this,Ka)){k(this,Ka,new AbortController);let e=l(this,ft).combinedSignal(l(this,Ka));l(this,_n).div.addEventListener("pointerdown",re(this,hr,_3).bind(this),{signal:e}),l(this,_n).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,l(this,_n)?.div&&l(this,Ka)&&(l(this,Ka).abort(),k(this,Ka,null),l(this,_n).div.classList.remove("highlighting"))}enableClick(){if(l(this,gu))return;k(this,gu,new AbortController);let e=l(this,ft).combinedSignal(l(this,gu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){l(this,gu)?.abort(),k(this,gu,null)}attach(e){l(this,wi).set(e.id,e);let{annotationElementId:t}=e;t&&l(this,ft).isDeletedAnnotationElement(t)&&l(this,ft).removeDeletedAnnotationElement(e)}detach(e){l(this,wi).delete(e.id),l(this,Tf)?.removePointerInTextLayer(e.contentDiv),!l(this,pp)&&e.annotationElementId&&l(this,ft).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ft).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ft).addDeletedAnnotationElement(e),mr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ft).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,gp)),l(this,ft).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:t}=document;e.div.contains(t)&&!l(this,Ya)&&(e._focusEventsAllowed=!1,k(this,Ya,setTimeout(()=>{k(this,Ya,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ft)._signal}),t.focus())},0))),e._structTreeParentId=l(this,Tf)?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(let t of l(this,wi).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ft).getId()}combinedSignal(e){return l(this,ft).combinedSignal(e)}canCreateNewEmptyEditor(){return l(this,hr,po)?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ft).updateMode(e.mode);let{offsetX:n,offsetY:i}=re(this,hr,yT).call(this),o=this.getNextId(),s=re(this,hr,mT).call(this,{parent:this,id:o,x:n,y:i,uiManager:l(this,ft),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await l(Ls,bu).get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,l(this,ft))||null}createAndAddNewEditor(e,t,n={}){let i=this.getNextId(),o=re(this,hr,mT).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,ft),isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(re(this,hr,yT).call(this),!0,e)}setSelected(e){l(this,ft).setSelected(e)}toggleSelected(e){l(this,ft).toggleSelected(e)}unselect(e){l(this,ft).unselect(e)}pointerup(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,mu)||(k(this,mu,!1),l(this,hr,po)?.isDrawer&&l(this,hr,po).supportMultipleDrawings))return;if(!l(this,dp)){k(this,dp,!0);return}let n=l(this,ft).getMode();if(n===vt.STAMP||n===vt.SIGNATURE){l(this,ft).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(l(this,ft).getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),l(this,mu)){k(this,mu,!1);return}let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(k(this,mu,!0),l(this,hr,po)?.isDrawer){this.startDrawingSession(e);return}let n=l(this,ft).getActive();k(this,dp,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Hs)){l(this,hr,po).startDrawing(this,l(this,ft),!1,e);return}l(this,ft).setCurrentDrawingSession(this),k(this,Hs,new AbortController);let t=l(this,ft).combinedSignal(l(this,Hs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(k(this,Xa,null),this.commitOrRemove())},{signal:t}),l(this,hr,po).startDrawing(this,l(this,ft),!1,e)}pause(e){if(e){let{activeElement:t}=document;this.div.contains(t)&&k(this,Xa,t);return}l(this,Xa)&&setTimeout(()=>{l(this,Xa)?.focus(),k(this,Xa,null)},0)}endDrawingSession(e=!1){return l(this,Hs)?(l(this,ft).setCurrentDrawingSession(null),l(this,Hs).abort(),k(this,Hs,null),k(this,Xa,null),l(this,hr,po).endDrawing(e)):null}findNewParent(e,t,n){let i=l(this,ft).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return l(this,Hs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Hs)&&l(this,hr,po).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),l(this,ft).getActive()?.parent===this&&(l(this,ft).commitOrRemove(),l(this,ft).setActiveEditor(null)),l(this,Ya)&&(clearTimeout(l(this,Ya)),k(this,Ya,null));for(let e of l(this,wi).values())l(this,Tf)?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,l(this,wi).clear(),l(this,ft).removeLayer(this)}render({viewport:e}){this.viewport=e,wu(this.div,e);for(let t of l(this,ft).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ft).commitOrRemove(),re(this,hr,ov).call(this);let t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,wu(this.div,{rotation:n}),t!==n)for(let i of l(this,wi).values())i.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ft).viewParameters.realScale}};Tf=new WeakMap,dp=new WeakMap,pu=new WeakMap,gu=new WeakMap,Ya=new WeakMap,wi=new WeakMap,mu=new WeakMap,pp=new WeakMap,gp=new WeakMap,Hs=new WeakMap,Xa=new WeakMap,_n=new WeakMap,Ka=new WeakMap,yu=new WeakMap,mp=new WeakMap,ft=new WeakMap,bu=new WeakMap,hr=new WeakSet,gT=function(){return l(this,wi).size!==0?l(this,wi).values():l(this,ft).getEditors(this.pageIndex)},_3=function(e){l(this,ft).unselectAll();let{target:t}=e;if(t===l(this,_n).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,_n).div.contains(t)){let{isMac:n}=Ur.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,ft).showAllEditors("highlight",!0,!0),l(this,_n).div.classList.add("free"),this.toggleDrawing(),Bv.startHighlighting(this,l(this,ft).direction==="ltr",{target:l(this,_n).div,x:e.x,y:e.y}),l(this,_n).div.addEventListener("pointerup",()=>{l(this,_n).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ft)._signal}),e.preventDefault()}},po=function(){return l(Ls,bu).get(l(this,ft).getMode())},mT=function(e){let t=l(this,hr,po);return t?new t.prototype.constructor(e):null},yT=function(){let{x:e,y:t,width:n,height:i}=this.boundingClientRect,o=Math.max(0,e),s=Math.max(0,t),a=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+i),c=(o+a)/2-e,f=(s+u)/2-t,[h,d]=this.viewport.rotation%180===0?[c,f]:[f,c];return{offsetX:h,offsetY:d}},ov=function(){for(let e of l(this,wi).values())e.isEmpty()&&e.remove()},Je(Ls,"_initialized",!1),V(Ls,bu,new Map([XS,oT,Jg,Bv,dT].map(e=>[e._editorType,e])));$v=Ls,an=class an{constructor({pageIndex:e}){V(this,Fo);V(this,Gs,null);V(this,Jn,new Map);V(this,Cf,new Map);this.pageIndex=e}setParent(e){if(!l(this,Gs)){k(this,Gs,e);return}if(l(this,Gs)!==e){if(l(this,Jn).size>0)for(let t of l(this,Jn).values())t.remove(),e.append(t);k(this,Gs,e)}}static get _svgFactory(){return wt(this,"_svgFactory",new Of)}draw(e,t=!1,n=!1){let i=tn(an,l0)._++,o=re(this,Fo,bT).call(this),s=an._svgFactory.createElement("defs");o.append(s);let a=an._svgFactory.createElement("path");s.append(a);let u=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Cf).set(i,a);let c=n?re(this,Fo,A3).call(this,s,u):null,f=an._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(o,e),l(this,Jn).set(i,o),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){let n=tn(an,l0)._++,i=re(this,Fo,bT).call(this),o=an._svgFactory.createElement("defs");i.append(o);let s=an._svgFactory.createElement("path");o.append(s);let a=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){let h=an._svgFactory.createElement("mask");o.append(h),u=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",u),h.setAttribute("maskUnits","objectBoundingBox");let d=an._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let m=an._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}let c=an._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),u&&c.setAttribute("mask",`url(#${u})`);let f=c.cloneNode();return i.append(f),c.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),l(this,Jn).set(n,i),n}finalizeDraw(e,t){l(this,Cf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;let{root:n,bbox:i,rootClass:o,path:s}=t,a=typeof e=="number"?l(this,Jn).get(e):e;if(a){if(n&&re(this,Fo,wT).call(this,a,n),i&&re(u=an,a_,E3).call(u,a,i),o){let{classList:c}=a;for(let[f,h]of Object.entries(o))c.toggle(f,h)}if(s){let f=a.firstElementChild.firstElementChild;re(this,Fo,wT).call(this,f,s)}}}updateParent(e,t){if(t===this)return;let n=l(this,Jn).get(e);n&&(l(t,Gs).append(n),l(this,Jn).delete(e),l(t,Jn).set(e,n))}remove(e){l(this,Cf).delete(e),l(this,Gs)!==null&&(l(this,Jn).get(e).remove(),l(this,Jn).delete(e))}destroy(){k(this,Gs,null);for(let e of l(this,Jn).values())e.remove();l(this,Jn).clear(),l(this,Cf).clear()}};Gs=new WeakMap,Jn=new WeakMap,Cf=new WeakMap,l0=new WeakMap,a_=new WeakSet,E3=function(e,[t,n,i,o]){let{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*o}%`},Fo=new WeakSet,bT=function(){let e=an._svgFactory.create(1,1,!0);return l(this,Gs).append(e),e.setAttribute("aria-hidden",!0),e},A3=function(e,t){let n=an._svgFactory.createElement("clipPath");e.append(n);let i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");let o=an._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i},wT=function(e,t){for(let[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},V(an,a_),V(an,l0,0);zv=an;globalThis._pdfjsTestingUtils={HighlightOutliner:mm};globalThis.pdfjsLib={AbortException:Ys,AnnotationEditorLayer:$v,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:vu,AnnotationLayer:Lv,AnnotationMode:Za,AnnotationType:qr,applyOpacity:OB,build:OF,ColorPicker:hm,createValidAbsoluteUrl:vT,CSSConstants:cv,DOMSVGFactory:Of,DrawLayer:zv,FeatureTest:Ur,fetchData:Ep,findContrastColor:NB,getDocument:CF,getFilenameFromUrl:RB,getPdfFilenameFromUrl:DB,getRGB:Ap,getUuid:ET,getXfaPageViewport:IB,GlobalWorkerOptions:_s,ImageKind:tm,InvalidPDFException:bp,isDataScheme:f0,isPdfFile:c_,isValidExplicitDest:hF,MathClamp:Wn,noContextMenu:Zi,normalizeUnicode:TB,OPS:yp,OutputScale:Bo,PasswordResponses:xB,PDFDataRangeTransport:fm,PDFDateString:Rf,PDFWorker:_p,PermissionFlag:AB,PixelsPerInch:tl,RenderingCancelledException:wp,renderRichText:AT,ResponseException:Df,setLayerDimensions:wu,shadow:wt,SignatureExtractor:Es,stopEvent:Cr,SupportedImageMimeTypes:uv,TextLayer:vp,TouchManager:lm,updateUrlHash:_T,Util:it,VerbosityLevel:u0,version:IF,XfaLayer:om}});var PV={};Uo(PV,{OfficeParser:()=>Pf,default:()=>kV,parseOffice:()=>NV});Oe();ke();Ne();Oe();ke();Ne();var k3=Su(wN());Gp();Oe();ke();Ne();Oe();ke();Ne();Oe();ke();Ne();var dk=Su(Ib()),Ut=r=>new dk.DOMParser().parseFromString(r,"text/xml"),Ce=(r,e)=>Array.from(r.getElementsByTagName(e)),En=(r,e)=>{let t=[];if(!r.childNodes)return t;for(let n=0;n<r.childNodes.length;n++){let i=r.childNodes[n];i.nodeType===1&&i.tagName===e&&t.push(i)}return t},wl=r=>{let e=Ut(r),t={},n=Ce(e,"cp:coreProperties")[0];if(n){let o=Ce(n,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Ce(n,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Ce(n,"cp:lastModifiedBy")[0];a&&a.textContent&&(t.lastModifiedBy=a.textContent);let u=Ce(n,"dcterms:created")[0];u&&u.textContent&&(t.created=new Date(u.textContent));let c=Ce(n,"dcterms:modified")[0];return c&&c.textContent&&(t.modified=new Date(c.textContent)),t}let i=Ce(e,"office:meta")[0];if(i){let o=Ce(i,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Ce(i,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Ce(i,"dc:description")[0];a&&a.textContent&&(t.description=a.textContent);let u=Ce(i,"dc:subject")[0];u&&u.textContent&&(t.subject=u.textContent);let c=Ce(i,"meta:creation-date")[0];c&&c.textContent&&(t.created=new Date(c.textContent));let f=Ce(i,"dc:date")[0];f&&f.textContent&&(t.modified=new Date(f.textContent))}return t};var na=(r,e)=>{let t=r.localName===e||r.tagName===e?r:r.getElementsByTagName(e)[0];if(!t)return;let n=t.getElementsByTagName("c:rich"),i=t.getElementsByTagName("a:p"),o=n.length>0?Array.from(n):Array.from(i);if(o.length>0){let a="";for(let u of o){let c=u.getElementsByTagName("a:t");for(let f=0;f<c.length;f++)a+=(c[f].textContent||"")+" "}if(a.trim())return a.trim()}let s=t.getElementsByTagName("c:v")[0];if(s&&s.textContent)return s.textContent.trim()||void 0},$9=r=>{let e=r.toString("utf8"),n=Ut(e).documentElement,i=na(n,"c:title"),o,s,a=n.getElementsByTagName("c:catAx");a.length>0&&(o=na(a[0],"c:title"));let u=n.getElementsByTagName("c:valAx");u.length>0&&(s=na(u[0],"c:title"));let c=n.getElementsByTagName("c:ser"),f=[],h=[];for(let m=0;m<c.length;m++){let b=c[m],v=na(b,"c:tx"),w=[],y=b.getElementsByTagName("c:val")[0]||b.getElementsByTagName("c:yVal")[0];if(y){let A=y.getElementsByTagName("c:v");for(let P=0;P<A.length;P++){let R=A[P].textContent?.trim();R&&w.push(R)}}let _=[],E=b.getElementsByTagName("c:dLbl");for(let A=0;A<E.length;A++){let P=na(E[A],"c:tx");P&&_.push(P)}let S=b.getElementsByTagName("c:cat")[0]||b.getElementsByTagName("c:xVal")[0];if(S){let A=S.getElementsByTagName("c:v"),P=[];for(let R=0;R<A.length;R++){let Y=A[R].textContent?.trim();Y&&P.push(Y)}P.length>0&&h.length===0&&h.push(...P)}f.push({name:v,values:w,pointLabels:_})}let d=[];for(let m of f)m.name&&d.push(m.name),d.push(...h),d.push(...m.values);return{title:i,xAxisTitle:o,yAxisTitle:s,dataSets:f,labels:h,rawTexts:d}},z9=r=>{let e=r.toString("utf8"),t=Ut(e),n=Ce(t,"chart:chart")[0]||t.documentElement,i=Ce(n,"chart:title")[0],o=i&&Ce(i,"text:p")[0]?.textContent||void 0,s=Ce(n,"table:table")[0],a=[],u=[],c=[];if(s){let m=[],b=En(s,"table:table-header-rows")[0];if(b&&m.push(...En(b,"table:table-row")),m.push(...En(s,"table:table-row")),m.length>0){let v=En(m[0],"table:table-cell");for(let w=1;w<v.length;w++){let y=parseInt(v[w].getAttribute("table:number-columns-repeated")||"1"),_=En(v[w],"text:p")[0]?.textContent||void 0;for(let E=0;E<y;E++)a.push({name:_,values:[],pointLabels:[]})}for(let w=1;w<m.length;w++){let y=En(m[w],"table:table-cell");if(y.length>0){let _=En(y[0],"text:p")[0]?.textContent||void 0;_&&u.push(_);let E=0;for(let S=1;S<y.length;S++){let A=parseInt(y[S].getAttribute("table:number-columns-repeated")||"1"),P=y[S].getAttribute("office:value")||En(y[S],"text:p")[0]?.textContent||"";for(let R=0;R<A;R++)a[E]&&a[E].values.push(P),E++}}}}}else{let m=Ce(n,"chart:series");for(let v of m){let w=v.getAttribute("chart:label-cell-address"),y=v.getAttribute("chart:values-cell-range-address"),_,E=Ce(v,"text:p");E.length>0&&(_=E[0].textContent||void 0),!_&&w&&(_=`Series ${w.split(".").pop()?.replace(/\$/g,"")||w}`);let S={name:_,values:[],pointLabels:[]};y&&S.values.push(`[${y}]`),a.push(S)}let b=Ce(n,"chart:categories")[0];if(b){let v=b.getAttribute("table:cell-range-address");v&&u.push(`[${v}]`)}}let f=Ce(t,"chart:axis"),h,d;for(let m of f){let b=m.getAttribute("chart:dimension"),v=Ce(m,"chart:title")[0],w=v&&Ce(v,"text:p")[0]?.textContent||void 0;b==="x"?h=w:b==="y"&&(d=w)}o&&c.push(o);for(let m of a)m.name&&c.push(m.name),c.push(...u),c.push(...m.values);return{title:o,xAxisTitle:h,yAxisTitle:d,dataSets:a,labels:u,rawTexts:c}},W9=r=>{let e=r.toString("utf8"),t=Ut(e),n=Ce(t,"cx:plotArea")[0];if(!n)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let i=Ce(n,"cx:plotAreaRegion")[0];if(!i)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let o=Ce(i,"cx:series");if(o.length===0)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let s=Ce(t,"cx:chartData")[0];if(!s)return{title:void 0,xAxisTitle:void 0,yAxisTitle:void 0,dataSets:[],labels:[],rawTexts:[]};let a={},u=Ce(s,"cx:data");for(let y of u){let _=y.getAttribute("id")||"0";a[_]=y}let c=[],f=[],h=[];for(let y of o){let _=Ce(y,"cx:dataId")[0],E=_&&_.getAttribute("val")||"0",S=a[E];if(!S)continue;let A=[],P=Ce(S,"cx:strDim")[0];if(P&&P.getAttribute("type")==="cat"){let ie=Ce(P,"cx:lvl");if(ie.length>0){let q=ie[0],fe=parseInt(q.getAttribute("ptCount")||"0",10);for(let Ee=0;Ee<fe;Ee++){let ve=[];for(let H of ie){let D=Ce(H,"cx:pt"),ee=Array.from(D).find(B=>parseInt(B.getAttribute("idx")||"-1",10)===Ee);if(ee){let B=ee.textContent||"";ve.push(B)}}if(ve.length>0){let H=ve[0];A.push(H)}}}}if(A.length===0){let ie=Array.from(Ce(S,"cx:numDim")).find(j=>j.getAttribute("type")==="catVal");if(ie){let j=Ce(ie,"cx:lvl")[0];if(j){let q=Ce(j,"cx:pt");for(let fe of q){let Ee=fe.textContent||"";Ee&&A.push(Ee)}}}}let R=[],Y=Array.from(Ce(S,"cx:numDim")).find(ie=>ie.getAttribute("type")==="size"||ie.getAttribute("type")==="val");if(Y){let ie=Ce(Y,"cx:lvl")[0];if(ie){let j=Ce(ie,"cx:pt");for(let q of j){let fe=q.textContent||"";fe&&R.push(fe)}}}let te,K=Ce(y,"c:tx")[0];K&&(te=na(K,"c:tx")),(A.length>0||R.length>0)&&(c.push({name:te,values:R,pointLabels:[]}),A.length>0&&f.length===0&&f.push(...A))}let d=na(t.documentElement,"c:title"),m,b,v=Ce(t.documentElement,"c:catAx");v.length>0&&(m=na(v[0],"c:title"));let w=Ce(t.documentElement,"c:valAx");w.length>0&&(b=na(w[0],"c:title")),d&&h.push(d);for(let y of c)y.name&&h.push(y.name),h.push(...f),h.push(...y.values);return{title:d,xAxisTitle:m,yAxisTitle:b,dataSets:c,labels:f,rawTexts:h}},Xu=r=>{let e=r.toString("utf8",0,500);return e.includes("cx:")||e.includes("cx:plotArea")||e.includes("cx:chartData")?W9(r):e.includes("urn:oasis:names:tc:opendocument:xmlns:chart:1.0")?z9(r):$9(r)};Oe();ke();Ne();var mh="[OfficeParser]: ";var q9={EXTENSION_UNSUPPORTED:r=>`Sorry, OfficeParser currently supports docx, pptx, xlsx, odt, odp, ods, pdf, rtf files only. Create a ticket in Issues on github to add support for ${r} files. Stay tuned for further updates.`,FILE_CORRUPTED:r=>`Your file ${r} seems to be corrupted. If you are sure it is fine, please create a ticket in Issues on github with the file to reproduce error.`,FILE_DOES_NOT_EXIST:r=>`File ${r} could not be found! Check if the file exists or verify if the relative path to the file is correct from your terminal's location.`,LOCATION_NOT_FOUND:r=>`Entered location ${r} is not reachable! Please make sure that the entered directory location exists. Check relative paths and reenter.`,IMPROPER_ARGUMENTS:"Improper arguments",IMPROPER_BUFFERS:"Error occured while reading the file buffers",INVALID_INPUT:"Invalid input type: Expected a Buffer or a valid file path",PDF_WORKER_MISSING:'Missing PDF worker configuration. PDF parsing in browser environments requires a worker source. Please provide "pdfWorkerSrc" in your configuration.'},pk=(r,e)=>{let t=q9[r];return typeof t=="function"?t(e):t},ia=(r,e,t)=>{let n=pk(r,t);return e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},gk=(r,e,t)=>{let n=r.message||r;return t&&(n.includes("end of central directory record")||n.includes("invalid XML")||n.includes("Failed to open zip file")||n.includes("invalid distance too far back"))&&(n=pk("FILE_CORRUPTED",t)),e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},ci=(r,e,t)=>{e.outputErrorToConsole&&(t?console.warn(mh+r,t):console.warn(mh+r))};Oe();ke();Ne();var H9=r=>{switch(r.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";default:return"application/octet-stream"}},G9=r=>{if(!(r.length<4)){if(r[0]===137&&r[1]===80&&r[2]===78&&r[3]===71)return"image/png";if(r[0]===255&&r[1]===216&&r[2]===255)return"image/jpeg";if(r[0]===71&&r[1]===73&&r[2]===70&&r[3]===56)return"image/gif";if(r[0]===66&&r[1]===77)return"image/bmp";if(r[0]===73&&r[1]===73&&r[2]===42&&r[3]===0||r[0]===77&&r[1]===77&&r[2]===0&&r[3]===42)return"image/tiff";if(r.length>=12&&r[0]===82&&r[1]===73&&r[2]===70&&r[3]===70&&r[8]===87&&r[9]===69&&r[10]===66&&r[11]===80)return"image/webp"}},Is=(r,e)=>{let t=r.split(".").pop()||"",n=G9(e);return n||(n=H9(t)),{type:"image",mimeType:n,data:e.toString("base64"),name:r,extension:t}};Oe();ke();Ne();var sL=Su(iL()),ns=async(r,e="eng")=>{let t=await(0,sL.createWorker)(e,1,{logger:()=>{}}),n=r;typeof window<"u"&&typeof Blob<"u"&&Buffer.isBuffer(r)&&(n=new Blob([r],{type:"image/bmp"}));let i=await t.recognize(n);return await t.terminate(),i.data.text};Oe();ke();Ne();var eB=Su(FP()),tB=Su(QM()),Cl=(r,e)=>new Promise((t,n)=>{eB.default.fromBuffer(r,{lazyEntries:!0},(i,o)=>{if(i)return n(i);if(!o)return n(new Error("Failed to open zip file"));let s=[];o.readEntry(),o.on("entry",a=>{e(a.fileName)?o.openReadStream(a,(u,c)=>{if(u)return n(u);if(!c)return n(new Error("Failed to open read stream"));c.pipe((0,tB.default)(f=>{s.push({path:a.fileName,content:f}),o.readEntry()}))}):o.readEntry()}),o.on("end",()=>t(s)),o.on("error",n)})});var rB=async(r,e)=>{let t=/xl\/worksheets\/sheet\d+.xml/g,n=/xl\/drawings\/drawing\d+.xml/g,i=/xl\/charts\/chart\d+.xml/g,o="xl/sharedStrings.xml",s=/xl\/media\/.*/,a=/docProps\/core\.xml/,u=/xl\/worksheets\/_rels\/sheet\d+\.xml\.rels/g,c=/xl\/drawings\/_rels\/drawing\d+\.xml\.rels/g,f=await Cl(r,L=>!!L.match(t)||!!L.match(n)||!!L.match(i)||L===o||L==="xl/styles.xml"||L==="xl/workbook.xml"||L==="xl/_rels/workbook.xml.rels"||!!L.match(a)||!!e.extractAttachments&&(!!L.match(s)||!!L.match(u)||!!L.match(c))),h=f.find(L=>L.path===o),d=[];if(h){let L=Ut(h.content.toString()),$=Ce(L,"si");for(let M of $){let G=Ce(M,"r");if(G.length>0){let ne=[];for(let se of G){let z=Ce(se,"t")[0];if(z){let N=z.textContent||"",F=Ce(se,"rPr")[0],le={};if(F){Ce(F,"b").length>0&&(le.bold=!0),Ce(F,"i").length>0&&(le.italic=!0),Ce(F,"u").length>0&&(le.underline=!0),Ce(F,"strike").length>0&&(le.strikethrough=!0);let me=Ce(F,"sz")[0];me&&(le.size=me.getAttribute("val")+"pt");let U=Ce(F,"color")[0];if(U){let ue=U.getAttribute("rgb");ue&&(le.color="#"+ue.substring(2))}let I=Ce(F,"rFont")[0];I&&(le.font=I.getAttribute("val")||void 0);let Z=Ce(F,"vertAlign")[0];if(Z){let ue=Z.getAttribute("val");ue==="subscript"&&(le.subscript=!0),ue==="superscript"&&(le.superscript=!0)}}ne.push({type:"text",text:N,formatting:Object.keys(le).length>0?le:void 0})}}d.push(ne)}else{let ne=Ce(M,"t"),se="";for(let z of ne)se+=z.textContent||"";d.push(se)}}}let m=f.find(L=>L.path==="xl/styles.xml"),b={};if(m){let L=Ut(m.content.toString()),$=Ce(L,"fonts")[0],M=[];if($){let z=Ce($,"font");for(let N of z){let F={};Ce(N,"b").length>0&&(F.bold=!0),Ce(N,"i").length>0&&(F.italic=!0),Ce(N,"u").length>0&&(F.underline=!0),Ce(N,"strike").length>0&&(F.strikethrough=!0);let le=Ce(N,"sz")[0];if(le){let Z=le.getAttribute("val");Z&&(F.size=Z+"pt")}let me=Ce(N,"color")[0];if(me){let Z=me.getAttribute("rgb");Z&&(F.color="#"+Z.substring(2))}let U=Ce(N,"name")[0];if(U){let Z=U.getAttribute("val");Z&&(F.font=Z)}let I=Ce(N,"vertAlign")[0];if(I){let Z=I.getAttribute("val");Z==="subscript"&&(F.subscript=!0),Z==="superscript"&&(F.superscript=!0)}M.push(F)}}let G=Ce(L,"fills")[0],ne=[];if(G){let z=Ce(G,"fill");for(let N of z){let F={},le=Ce(N,"patternFill")[0];if(le){let me=Ce(le,"fgColor")[0];if(me){let U=me.getAttribute("rgb"),I=me.getAttribute("theme");if(U&&U!=="00000000")F.backgroundColor="#"+U.substring(2);else if(I){let Z=parseInt(I);Z===0?F.backgroundColor="#FFFFFF":Z===1?F.backgroundColor="#000000":Z===2?F.backgroundColor="#EEECE1":Z===3&&(F.backgroundColor="#1F497D")}}}ne.push(F)}}let se=Ce(L,"cellXfs")[0];if(se){let z=Ce(se,"xf");for(let N=0;N<z.length;N++){let F=z[N],le={},me=F.getAttribute("fontId");if(me){let Z=parseInt(me);M[Z]&&Object.assign(le,M[Z])}let U=F.getAttribute("fillId");if(U){let Z=parseInt(U);ne[Z]&&ne[Z].backgroundColor&&(le.backgroundColor=ne[Z].backgroundColor)}let I=Ce(F,"alignment")[0];if(I){let Z=I.getAttribute("horizontal");(Z==="center"||Z==="right"||Z==="justify"||Z==="left")&&(le.alignment=Z)}b[N]=le}}}let v=[],w=f.filter(L=>L.path.match(/xl\/media\/.*/)),y=f.filter(L=>L.path.match(i)),_={};if(e.extractAttachments){let L=f.filter(M=>M.path.match(c));for(let M of L){let ne=`xl/drawings/${M.path.split("/").pop()?.replace(".rels","")||""}`,se=Ut(M.content.toString()),z=Ce(se,"Relationship");_[ne]||(_[ne]={});for(let N of z){let F=N.getAttribute("Id"),le=N.getAttribute("Target");if(F&&le&&le.includes("media/")){let me="xl/"+le.replace("../","");_[ne][F]={path:me}}}}let $=f.filter(M=>M.path.match(n));for(let M of $){let G=Ut(M.content.toString()),ne=Ce(G,"xdr:pic"),se=_[M.path]||{};for(let z of ne){let N=Ce(z,"xdr:blipFill")[0],F=N?Ce(N,"a:blip")[0]:null,le=F?F.getAttribute("r:embed"):null,me=Ce(z,"xdr:nvPicPr")[0],U=me?Ce(me,"xdr:cNvPr")[0]:null,I=U?U.getAttribute("descr")||U.getAttribute("name"):void 0;le&&se[le]&&(se[le].altText=I||"")}}for(let M of w){let G=Is(M.path.split("/").pop()||"image",M.content),ne="";for(let se in _){for(let z in _[se])if(_[se][z].path===M.path){ne=_[se][z].altText||"";break}if(ne)break}if(ne&&(G.altText=ne),v.push(G),e.ocr&&G.mimeType.startsWith("image/"))try{let se=await ns(M.content,e.ocrLanguage);se.trim()&&(G.ocrText=se.trim())}catch(se){ci(`OCR failed for ${G.name}:`,e,se)}}for(let M of y){let G={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:M.content.toString("base64"),name:M.path.split("/").pop()||"",extension:"xml"};try{let ne=Xu(M.content);G.chartData=ne}catch(ne){ci(`Failed to extract chart data from ${M.path}:`,e,ne)}v.push(G)}}let E={};if(e.extractAttachments){let L=f.filter($=>$.path.match(c));for(let $ of L){let G=`xl/drawings/${$.path.split("/").pop()?.replace(".rels","")||""}`,ne=Ut($.content.toString()),se=Ce(ne,"Relationship");E[G]||(E[G]={});for(let z of se){let N=z.getAttribute("Id"),F=z.getAttribute("Target"),le=z.getAttribute("Type");if(N&&F&&le&&le.includes("chart")){let me=F.split("/").pop()||"";E[G][N]=me}}}}let S={},A=f.find(L=>L.path==="xl/workbook.xml"),P=f.find(L=>L.path==="xl/_rels/workbook.xml.rels");if(A&&P){let L=Ut(P.content.toString()),$=Ce(L,"Relationship"),M={};for(let se of $){let z=se.getAttribute("Id"),N=se.getAttribute("Target");if(z&&N){let F=N.split("/").pop()||"";M[z]=F}}let G=Ut(A.content.toString()),ne=Ce(G,"sheet");for(let se of ne){let z=se.getAttribute("name"),N=se.getAttribute("r:id");z&&N&&M[N]&&(S[M[N]]=z)}}let R=[],Y=[],te=new Map;for(let L of f)if(!L.path.match(s)&&L.path!==o&&L.path!=="xl/styles.xml"&&!L.path.match(n)&&!L.path.match(i)&&!L.path.match(u)&&!L.path.match(c)&&L.path.match(t)){e.includeRawContent&&Y.push(L.content.toString());let $=[],M=/<row.*?>[\s\S]*?<\/row>/g,G=L.content.toString().match(M);if(G)for(let z of G){let N=[],F=/<c.*?>[\s\S]*?<\/c>/g,le=z.match(F),me=z.match(/r="(\d+)"/),U=me?parseInt(me[1])-1:0;if(le)for(let I of le){let Z=I.match(/t="([a-z]+)"/),ue=Z?Z[1]:"n",Se=I.match(/<v>(.*?)<\/v>/),Ae=I.match(/<t>(.*?)<\/t>/),de="",be=[];if(ue==="s"&&Se){let ze=parseInt(Se[1]),He=d[ze];Array.isArray(He)?(be=JSON.parse(JSON.stringify(He)),de=be.map(We=>We.text).join("")):de=He||""}else ue==="inlineStr"&&Ae?de=Ae[1]:Se&&(de=Se[1]);let Le=I.match(/r="([A-Z]+)(\d+)"/),Te=(Le?Le[1]:"").charCodeAt(0)-65;if(de||be.length>0){let ze=I.match(/s="(\d+)"/),He=ze?parseInt(ze[1]):void 0,We=He!==void 0&&b[He]?b[He]:{};if(be.length>0)for(let g of be)g.formatting||(g.formatting={}),We.backgroundColor&&(g.formatting.backgroundColor=We.backgroundColor),We.alignment&&(g.formatting.alignment=We.alignment),!g.formatting.font&&We.font&&(g.formatting.font=We.font),!g.formatting.size&&We.size&&(g.formatting.size=We.size);else be.push({type:"text",text:de,formatting:We});let x={type:"cell",text:de,children:be,metadata:{row:U,col:Te}};e.includeRawContent&&(x.rawContent=I),N.push(x)}}if(N.length>0){let I={type:"row",children:N,metadata:void 0};e.includeRawContent&&(I.rawContent=z),$.push(I)}}if(e.extractAttachments){let N=`xl/worksheets/_rels/${L.path.split("/").pop()||""}.rels`,F=f.find(U=>U.path===N),le={};if(F){let U=Ut(F.content.toString()),I=Ce(U,"Relationship");for(let Z of I){let ue=Z.getAttribute("Id"),Se=Z.getAttribute("Target"),Ae=Z.getAttribute("Type");ue&&Se&&Ae&&Ae.includes("drawing")&&(le[ue]="xl/drawings/"+Se.replace("../drawings/",""))}}let me=L.content.toString().match(/<drawing r:id="(.*?)"/g);if(me)for(let U of me){let I=U.match(/r:id="(.*?)"/),Z=I?I[1]:null;if(Z&&le[Z]){let ue=le[Z],Se=_[ue];if(Se)for(let de in Se){let be=Se[de],Le=v.find(De=>De.name===be.path.split("/").pop());if(Le){let De={type:"image",text:"",children:[],metadata:{attachmentName:Le.name||"unknown",altText:be.altText||void 0}};$.push(De)}}let Ae=E[ue];if(Ae)for(let de in Ae){let be=Ae[de];if(v.find(De=>De.name===be)){let De={type:"chart",text:"",children:[],metadata:{attachmentName:be}};$.push(De)}}}}}let ne=L.path.split("/").pop()||"Sheet",se=S[ne]||ne;R.push({type:"sheet",children:$,metadata:{sheetName:se},rawContent:e.includeRawContent?L.content.toString():void 0})}let K=f.find(L=>L.path.match(a)),ie=K?wl(K.content.toString()):{},j=L=>{for(let $ of L){if("attachmentName"in($.metadata||{})){let M=$.metadata,G=v.find(ne=>ne.name===M.attachmentName);G&&($.type==="image"&&(G.ocrText&&($.text=G.ocrText),M.altText&&(G.altText=M.altText)),$.type==="chart"&&G.chartData&&($.text=G.chartData.rawTexts.join(e.newlineDelimiter||`
`)))}$.children&&j($.children)}};j(R);let q=L=>{let $=Ce(L,"xdr:from")[0],M=Ce(L,"xdr:to")[0],G=Ce(L,"xdr:ext")[0];if($&&M&&G){let se=Ce($,"xdr:col")[0]?.textContent||"0",z=Ce($,"xdr:row")[0]?.textContent||"0",N=Ce($,"xdr:colOff")[0]?.textContent||"0",F=Ce($,"xdr:rowOff")[0]?.textContent||"0",le=G?parseInt(G.getAttribute("cx")||"0",10):0,me=G?parseInt(G.getAttribute("cy")||"0",10):0,U=parseInt(N,10),I=parseInt(F,10);if(le>0&&me>0)return{x:U,y:I,width:le,height:me}}if($&&G&&!M){let se=Ce($,"xdr:colOff")[0]?.textContent||"0",z=Ce($,"xdr:rowOff")[0]?.textContent||"0",N=G?parseInt(G.getAttribute("cx")||"0",10):0,F=G?parseInt(G.getAttribute("cy")||"0",10):0,le=parseInt(se,10),me=parseInt(z,10);if(N>0&&F>0)return{x:le,y:me,width:N,height:F}}let ne=Ce(L,"xdr:pos")[0];if(ne&&G){let se=parseInt(ne.getAttribute("x")||"0",10),z=parseInt(ne.getAttribute("y")||"0",10),N=parseInt(G.getAttribute("cx")||"0",10),F=parseInt(G.getAttribute("cy")||"0",10);if(N>0&&F>0)return{x:se,y:z,width:N,height:F}}};if(e.extractAttachments){let L=f.filter($=>$.path.match(n));for(let $ of L){let M=Ut($.content.toString()),G=Ce(M,"xdr:twoCellAnchor"),ne=Ce(M,"xdr:oneCellAnchor"),se=Ce(M,"xdr:absoluteAnchor"),z=[...G,...ne,...se];for(let N of z){let F=Ce(N,"xdr:graphicFrame")[0],le=Ce(N,"xdr:pic")[0];if(F){let U=Ce(F,"c:chart")[0]?.getAttribute("r:id");if(U){let I=$.path,Z=E[I];if(Z&&Z[U]){let ue=Z[U],Se=de=>{for(let be of de){if(be.type==="chart"&&be.metadata?.attachmentName===ue)return be;if(be.children){let Le=Se(be.children);if(Le)return Le}}return null},Ae=Se(R);Ae&&te.set(Ae,N)}}}if(le){let me=Ce(le,"xdr:blipFill")[0],U=me?Ce(me,"a:blip")[0]:null,I=U?U.getAttribute("r:embed"):null;if(I){let Z=$.path,ue=_[Z];if(ue&&ue[I]){let Ae=ue[I].path.split("/").pop(),de=Le=>{for(let De of Le){if(De.type==="image"&&De.metadata?.attachmentName===Ae)return De;if(De.children){let Te=de(De.children);if(Te)return Te}}return null},be=de(R);be&&te.set(be,N)}}}}}}let fe=(L,$)=>{let M=[];if(L.children){for(let G of L.children)if(G.type==="row"&&G.children){let ne=[];for(let se of G.children)if(se.type==="cell"){let z=F=>{let le=F.text||"";if(F.children&&F.children.length>0){let me=F.children.map(z).filter(U=>U!=="");me.length>0&&(le+=(le?" ":"")+me.join(" "))}return le},N=z(se);ne.push({value:N})}ne.length>0&&M.push({cols:ne})}}return{type:"table",rows:M,...$?{position:$}:{}}},Ee=(L,$,M)=>{if(L.type!=="chart")return null;let G=L.metadata;if(G?.attachmentName){let ne=$.find(se=>se.name===G.attachmentName&&se.type==="chart");if(ne?.chartData)return{type:"chart",chartData:ne.chartData,...M?{position:M}:{}}}return null},ve=(L,$,M)=>{let G=[],ne=se=>{let z=M.get(se),N=z?q(z):void 0;if(se.type==="chart"){let F=Ee(se,$,N);F&&G.push(F);return}else if(se.type==="image"){let le=se.metadata?.attachmentName;if(le){let me=$.find(U=>U.name===le&&U.type==="image");if(me){let U=Buffer.from(me.data,"base64");G.push({type:"image",buffer:U,mimeType:me.mimeType,filename:me.name,...N?{position:N}:{}})}}return}else if(se.type==="sheet"){let F=[],le=[];if(se.children)for(let me of se.children)me.type==="row"&&(!me.children||me.children.every(I=>I.type==="cell"))?F.push(me):le.push(me);if(F.length>0){let me={...se,children:F},U=fe(me,N);U.rows.length>0&&G.push(U)}for(let me of le)ne(me);for(let me of F)if(me.children){for(let U of me.children)if(U.type==="cell"&&U.text&&U.text.trim()){let I=M.get(U),Z=I?q(I):void 0;G.push({type:"text",content:U.text.trim(),...Z?{position:Z}:{}})}}return}else se.type==="cell"&&se.text&&se.text.trim()&&G.push({type:"text",content:se.text.trim(),...N?{position:N}:{}});if(se.children)for(let F of se.children)ne(F)};for(let se of L)ne(se);return G},H=L=>L.filter($=>$.type==="image").map($=>({buffer:Buffer.from($.data,"base64"),mimeType:$.mimeType,filename:$.name})),D=R.map(L=>{let $=M=>{let G="";return M.children?G+=M.children.map($).filter(ne=>ne!="").join(M.children[0]?.children?e.newlineDelimiter??`
`:""):G+=M.text||"",G};return $(L)}).filter(L=>L!="").join(e.newlineDelimiter??`
`),ee=ve(R,v,te),B=H(v);return console.log("Excel Document blocks",ee.filter(L=>L.type==="chart").map(L=>L.chartData)),{type:"xlsx",metadata:ie,content:R,attachments:v,fullText:D,blocks:ee,images:B,toText:()=>D}};Oe();ke();Ne();var nB=async(r,e)=>{let t=/content\.xml/,n=/Object \d+\/content\.xml/,i=/(Pictures|media)\/.*/,o=/meta\.xml/,s=/styles\.xml/,a=/mimetype/,u=await Cl(r,L=>!!L.match(t)||!!L.match(n)||!!L.match(o)||!!L.match(s)||!!L.match(a)||!!e.extractAttachments&&!!L.match(i)),c=u.find(L=>L.path==="mimetype"),f="odt";if(c){let L=c.content.toString().trim();L.includes("spreadsheet")?f="ods":L.includes("presentation")?f="odp":L.includes("text")&&(f="odt")}let h=u.find(L=>L.path==="content.xml")||u.find(L=>L.path.match(t)),d=u.find(L=>L.path==="styles.xml"),m=[],b=[],v={},w={},y={};d&&(L=>{let $=Ut(L),M=Ce($,"style:style");for(let G of M){let ne=G.getAttribute("style:name");if(!ne)continue;let se={},z=Ce(G,"style:paragraph-properties")[0];if(z){let me=z.getAttribute("fo:text-align");if(me){let I={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};I[me]&&(se.alignment=I[me])}Ce(z,"style:drop-cap")[0]&&(se.dropCap=!0)}Object.keys(se).length>0&&(w[ne]=se);let N=Ce(G,"style:text-properties")[0],F=Ce(G,"style:table-cell-properties")[0],le={};if(F){let me=F.getAttribute("fo:background-color");me&&me!=="transparent"&&(le.backgroundColor=me)}if(N){(N.getAttribute("fo:font-weight")==="bold"||N.getAttribute("style:font-weight-asian")==="bold")&&(le.bold=!0),(N.getAttribute("fo:font-style")==="italic"||N.getAttribute("style:font-style-asian")==="italic")&&(le.italic=!0),N.getAttribute("style:text-underline-style")==="solid"&&(le.underline=!0),N.getAttribute("style:text-line-through-style")==="solid"&&(le.strikethrough=!0);let me=N.getAttribute("fo:font-size")||N.getAttribute("style:font-size-asian");me&&(le.size=me);let U=N.getAttribute("fo:color");U&&(le.color=U);let I=N.getAttribute("fo:background-color");I&&I!=="transparent"&&(le.backgroundColor=I);let Z=N.getAttribute("style:font-name")||N.getAttribute("fo:font-family");Z&&(le.font=Z);let ue=N.getAttribute("style:text-position");ue&&(ue.startsWith("sub")&&(le.subscript=!0),ue.startsWith("super")&&(le.superscript=!0)),Object.keys(le).length>0&&(v[ne]=le)}}})(d.content.toString());let E=(L,$,M,G,ne,se={},z)=>{let N=[],F="";if(!L.childNodes)return{text:"",children:[]};for(let le=0;le<L.childNodes.length;le++){let me=L.childNodes[le];if(me.nodeType===3){let U=me.textContent||"";U&&(F+=U,N.push({type:"text",text:U,formatting:se,metadata:z?{...z}:void 0}))}else if(me.nodeType===1){let U=me,I=U.tagName;if(I==="text:s"){let Z=parseInt(U.getAttribute("text:c")||"1"),ue=" ".repeat(Z);F+=ue,N.push({type:"text",text:ue,formatting:se,metadata:z?{...z}:void 0})}else if(I==="text:tab")F+="	",N.push({type:"text",text:"	",formatting:se,metadata:z?{...z}:void 0});else if(I==="text:line-break")F+=`
`,N.push({type:"text",text:`
`,formatting:se,metadata:z?{...z}:void 0});else if(I==="text:span"){let Z=U.getAttribute("text:style-name"),ue=Z?{...se,...$[Z]}:se,Se=E(U,$,M,G,ne,ue,z);F+=Se.text,N.push(...Se.children)}else if(I==="text:a"){let Z=U.getAttribute("xlink:href")||"",ue=Z.startsWith("#")?"internal":"external",Ae=E(U,$,M,G,ne,se,{link:Z,linkType:ue});F+=Ae.text,N.push(...Ae.children)}else if(I==="text:note"&&!M.ignoreNotes){let Z=U.getAttribute("text:note-class")||"footnote",ue=U.getAttribute("text:id")||U.getAttribute("xml:id")||void 0,Se=Ce(U,"text:note-body")[0];if(Se){let Ae=Ce(Se,"text:p"),de=[],be="";for(let De of Ae){let Te=S(De,ne,$,M);be+=(be?" ":"")+Te.text;let ze={type:"paragraph",text:Te.text,children:Te.children,metadata:Te.alignment?{alignment:Te.alignment}:void 0};de.push(ze)}let Le={type:"note",text:be,children:de,metadata:{noteType:Z,noteId:ue}};M.putNotesAtLast?G.push(Le):N.push(Le)}}else if(I==="draw:frame"){let Z=U,ue="",Se=Ce(Z,"svg:title")[0],Ae=Ce(Z,"svg:desc")[0];Se&&Se.textContent?ue=Se.textContent:Ae&&Ae.textContent&&(ue=Ae.textContent);let de="",be=Ce(Z,"draw:image");if(be.length>0&&(de=be[0].getAttribute("xlink:href")||"",de)){let De=de.split("/");de=De[De.length-1]}let Le={type:"image",text:"",children:[],metadata:{attachmentName:de,...ue?{altText:ue}:{}}};M.includeRawContent&&(Le.rawContent=Z.toString()),N.push(Le)}}}return{text:F,children:N}},S=(L,$,M,G)=>{let ne=L.getAttribute("text:style-name"),se=ne?$[ne]:void 0,z=se?.alignment,N=se?.dropCap,F=E(L,M,G,b,$);if(ne&&F.children.forEach(le=>{if(le.type==="text"){le.metadata||(le.metadata={});let me=le.metadata;me.style||(me.style=ne)}}),F.children.length===0&&L.textContent){let le=L.textContent;le.trim()&&(F.text=le,F.children.push({type:"text",text:le}))}if(N&&F.children.length>0){let le=F.children[0];if(le.type==="text"&&le.text)if(le.text.length===1)le.formatting={...le.formatting,size:"58.5pt"};else{let me=le.text[0],U=le.text.substring(1),I={type:"text",text:me,formatting:{...le.formatting,size:"58.5pt"},metadata:le.metadata};le.text=U,F.children.unshift(I)}}return{text:F.text,children:F.children,alignment:z,style:ne||void 0}},A=(L,$,M,G)=>{let ne=[],se=En(L,"table:table-row"),z=0;for(let N of se){let F=[],le=En(N,"table:table-cell"),me=parseInt(N.getAttribute("table:number-rows-repeated")||"1"),U=0;for(let I of le){let Z=[],ue={value:""},Se=parseInt(I.getAttribute("table:number-columns-repeated")||"1"),Ae=parseInt(I.getAttribute("table:number-columns-spanned")||"1"),de=parseInt(I.getAttribute("table:number-rows-spanned")||"1"),be=De=>{if(De.childNodes)for(let Te=0;Te<De.childNodes.length;Te++){let ze=De.childNodes[Te];if(ze.nodeType===1){let He=ze;if(He.tagName==="text:p"||He.tagName==="text:h"){let We=S(He,$,M,G),x={type:He.tagName==="text:h"?"heading":"paragraph",text:We.text,children:We.children,metadata:{...We.alignment?{alignment:We.alignment}:{},...We.style?{style:We.style}:{}}};Object.keys(x.metadata||{}).length===0&&delete x.metadata,He.tagName==="text:h"&&(x.metadata||(x.metadata={}),x.metadata.level=parseInt(He.getAttribute("text:outline-level")||"1")),G.includeRawContent&&(x.rawContent=He.toString()),Z.push(x),ue.value+=We.text,ue.value&&!ue.value.endsWith(`
`)&&(ue.value+=`
`)}else if(He.tagName==="table:table"){let We=A(He,$,M,G);Z.push(We)}else(He.tagName==="draw:frame"||He.tagName==="draw:text-box")&&be(He)}}};be(I);let Le=ue.value;Le.endsWith(`
`)&&(Le=Le.slice(0,-1));for(let De=0;De<Se;De++){let Te={type:"cell",text:Le,children:Z.length>0?De===0?Z:JSON.parse(JSON.stringify(Z)):[],metadata:{row:z,col:U}},ze=Te.metadata;Ae>1&&(ze.colSpan=Ae),de>1&&(ze.rowSpan=de),G.includeRawContent&&(Te.rawContent=I.toString()),F.push(Te),U++}}for(let I=0;I<me;I++){let Z={type:"row",children:I===0?F:JSON.parse(JSON.stringify(F))};I>0&&Z.children?.forEach(ue=>{ue.metadata&&"row"in ue.metadata&&(ue.metadata.row=z)}),G.includeRawContent&&(Z.rawContent=N.toString()),ne.push(Z),z++}}return{type:"table",children:ne}};h&&(L=>{let $=Ut(L),M=Ce($,"office:body")[0],G=Ce($,"office:automatic-styles")[0];if(G){let se=Ce(G,"style:style");for(let z of se){let N=z.getAttribute("style:name");if(!N)continue;let F=Ce(z,"style:paragraph-properties")[0],le={};if(F){let U=F.getAttribute("fo:text-align");if(U){let Z={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};Z[U]&&(le.alignment=Z[U])}Ce(F,"style:drop-cap")[0]&&(le.dropCap=!0)}Object.keys(le).length>0&&(w[N]=le);let me=Ce(z,"style:text-properties")[0];if(me){let U={};(me.getAttribute("fo:font-weight")==="bold"||me.getAttribute("style:font-weight-asian")==="bold")&&(U.bold=!0),(me.getAttribute("fo:font-style")==="italic"||me.getAttribute("style:font-style-asian")==="italic")&&(U.italic=!0),me.getAttribute("style:text-underline-style")==="solid"&&(U.underline=!0),me.getAttribute("style:text-line-through-style")==="solid"&&(U.strikethrough=!0);let I=me.getAttribute("fo:font-size")||me.getAttribute("style:font-size-asian");I&&(U.size=I);let Z=me.getAttribute("fo:color");Z&&(U.color=Z);let ue=me.getAttribute("fo:background-color");ue&&ue!=="transparent"&&(U.backgroundColor=ue);let Se=me.getAttribute("style:font-name")||me.getAttribute("fo:font-family");Se&&(U.font=Se);let Ae=me.getAttribute("style:text-position");Ae&&(Ae.startsWith("sub")&&(U.subscript=!0),Ae.startsWith("super")&&(U.superscript=!0)),Object.keys(U).length>0&&(v[N]=U)}}}let ne=(se,z,N=!1)=>{if(se.tagName==="text:p"){let F=S(se,w,v,e),le=N||(se.getAttribute("text:style-name")||"").toLowerCase().includes("title")?"heading":"paragraph",me={type:le,text:F.text,children:F.children,metadata:{...F.alignment?{alignment:F.alignment}:{},...F.style?{style:F.style}:{}}};le==="heading"&&me.metadata&&(me.metadata.level=me.metadata.level||1),Object.keys(me.metadata||{}).length===0&&delete me.metadata,e.includeRawContent&&(me.rawContent=se.toString()),z.push(me)}else if(se.tagName==="text:h"){let F=parseInt(se.getAttribute("text:outline-level")||"1"),le=S(se,w,v,e),me={type:"heading",text:le.text,children:le.children,metadata:{level:F,...le.alignment?{alignment:le.alignment}:{},...le.style?{style:le.style}:{}}};e.includeRawContent&&(me.rawContent=se.toString()),z.push(me)}else if(se.tagName==="table:table"){let F=A(se,w,v,e);e.includeRawContent&&(F.rawContent=se.toString()),z.push(F)}else if(se.tagName==="text:list"){let F=En(se,"text:list-item"),le=se.getAttribute("text:style-name")||se.getAttribute("xml:id"),me=le||`list-${z.length}`,U="unordered",I=!1,Z=le;if(!Z){let de=se.parentNode;for(;de&&!Z&&!(de.nodeName==="text:list"&&(Z=de.getAttribute("text:style-name"),Z));)de=de.parentNode}if(Z){let de=Ce(Ut(h?.content.toString()||""),"office:automatic-styles")[0];if(de){let be=Ce(de,"text:list-style");for(let Le of be)if(Le.getAttribute("style:name")===Z){let De=Ce(Le,"text:list-level-style-bullet"),Te=Ce(Le,"text:list-level-style-number"),ze=Ce(Le,"text:list-level-style-image");Te.length>0?(U="ordered",I=Te.some(He=>!!He.getAttribute("style:num-format"))):De.length>0&&(U="unordered",I=De.some(He=>!!He.getAttribute("text:bullet-char"))),ze.length>0&&(I=!0);break}}if(d&&!I){let be=Ut(d.content.toString()),Le=Ce(be,"text:list-style");for(let De of Le)if(De.getAttribute("style:name")===Z){let Te=Ce(De,"text:list-level-style-bullet"),ze=Ce(De,"text:list-level-style-number"),He=Ce(De,"text:list-level-style-image");ze.length>0?(U="ordered",I=ze.some(We=>!!We.getAttribute("style:num-format"))):Te.length>0&&(U="unordered",I=Te.some(We=>!!We.getAttribute("text:bullet-char"))),He.length>0&&(I=!0);break}}}if(!I){for(let de=0;de<F.length;de++){let be=F[de];if(be.childNodes)for(let Le=0;Le<be.childNodes.length;Le++){let De=be.childNodes[Le];De.nodeType===1&&ne(De,z,N)}}return}let ue=0,Se=se.parentNode;for(;Se;)Se.nodeName==="text:list"&&ue++,Se=Se.parentNode;y[me]||(y[me]={});let Ae=ue.toString();y[me][Ae]===void 0&&(y[me][Ae]=-1);for(let de=0;de<F.length;de++){let be=F[de];y[me][Ae]++;let Le=y[me][Ae];for(let De=ue+1;De<10;De++)y[me][De.toString()]!==void 0&&(y[me][De.toString()]=-1);if(be.childNodes)for(let De=0;De<be.childNodes.length;De++){let Te=be.childNodes[De];if(Te.nodeType===1){let ze=Te;if(ze.tagName==="text:p"){let He=S(ze,w,v,e),We={type:"list",text:He.text,children:He.children,metadata:{listType:U,indentation:ue,itemIndex:Le,listId:me,alignment:He.alignment||"left",style:He.style}};e.includeRawContent&&(We.rawContent=ze.toString()),z.push(We)}else if(ze.tagName==="text:h"){let He=parseInt(ze.getAttribute("text:outline-level")||"1"),We=S(ze,w,v,e),x={type:"list",text:We.text,children:We.children,metadata:{listType:U,indentation:ue,itemIndex:Le,listId:me,...We.alignment?{alignment:We.alignment}:{},style:We.style}};e.includeRawContent&&(x.rawContent=ze.toString()),z.push(x)}else ze.tagName==="text:list"&&ne(ze,z,N)}}}}else if(se.tagName==="draw:frame"){let F=se.getAttribute("presentation:class"),le=F==="title"||F==="sub-title",me=Ce(se,"draw:text-box")[0],U=Ce(se,"draw:image")[0],I=Ce(se,"table:table")[0],Z=Ce(se,"draw:object")[0];if(me)ne(me,z,le||N);else if(I){let ue=A(I,w,v,e);e.includeRawContent&&(ue.rawContent=I.toString()),z.push(ue)}else if(U){let ue="",Se=Ce(se,"svg:title")[0],Ae=Ce(se,"svg:desc")[0];Se&&Se.textContent?ue=Se.textContent:Ae&&Ae.textContent&&(ue=Ae.textContent);let de=U.getAttribute("xlink:href")||"";if(de){let Le=de.split("/");de=Le[Le.length-1]}let be={type:"image",text:"",children:[],metadata:{attachmentName:de,...ue?{altText:ue}:{}}};e.includeRawContent&&(be.rawContent=se.toString()),z.push(be)}else if(Z){let ue=Z.getAttribute("xlink:href");if(ue){let Se=ue.split("/")[0],Ae=`${Se}/content.xml`,de=u.find(be=>be.path===Ae||be.path.endsWith(Ae));if(de){let be=Xu(de.content),Le={type:"chart",text:be.rawTexts.join(" "),metadata:{attachmentName:Se,chartData:be}};e.includeRawContent&&(Le.rawContent=se.toString()),z.push(Le)}else{let be={type:"chart",text:"",metadata:{attachmentName:Se}};e.includeRawContent&&(be.rawContent=se.toString()),z.push(be)}}}}else if(se.childNodes)for(let F=0;F<se.childNodes.length;F++){let le=se.childNodes[F];le.nodeType===1&&ne(le,z,N)}};if(f==="ods"){let se=Ce(M,"office:spreadsheet")[0];if(se){let z=Ce(se,"table:table");for(let N=0;N<z.length;N++){let F=z[N],le=F.getAttribute("table:name")||`Sheet${N+1}`,me=[],U=Ce(F,"table:table-row"),I=0;for(let ue=0;ue<U.length;ue++){let Se=U[ue],Ae=[],de=Ce(Se,"table:table-cell"),be=0,Le=parseInt(Se.getAttribute("table:number-rows-repeated")||"1");for(let De=0;De<de.length;De++){let Te=de[De],ze=parseInt(Te.getAttribute("table:number-columns-repeated")||"1"),He="",We=[],x=Ce(Te,"text:p");for(let p=0;p<x.length;p++){let T=x[p],J=Ce(T,"text:span");if(J.length>0)for(let C of J){let oe=C.getAttribute("text:style-name"),ce=oe?v[oe]:{},xe=C.textContent||"";He+=xe;let _e={type:"text",text:xe,formatting:ce};We.push(_e)}else{let C=T.textContent||"";if(He+=C,C.trim()){let oe={type:"text",text:C,formatting:{}};We.push(oe)}}p<x.length-1&&(He+=`
`)}let g=Ce(Te,"draw:frame");for(let p of g){let T="",J=Ce(p,"svg:title")[0],C=Ce(p,"svg:desc")[0];J&&J.textContent?T=J.textContent:C&&C.textContent&&(T=C.textContent);let oe="",ce=Ce(p,"draw:image");if(ce.length>0){let Re=ce[0].getAttribute("xlink:href");if(Re){let Q=Re.split("/");oe=Q[Q.length-1]}}let xe="",_e=Ce(p,"draw:object");if(_e.length>0){let Re=_e[0].getAttribute("xlink:href");Re&&(xe=Re.split("/")[0])}if(ce.length>0){let Re={type:"image",text:"",children:[],metadata:{attachmentName:oe,...T?{altText:T}:{}}};e.includeRawContent&&(Re.rawContent=p.toString()),We.push(Re)}else if(xe){let Re={type:"chart",text:"",children:[],metadata:{attachmentName:xe}};We.push(Re)}}for(let p=0;p<ze;p++){if(He||We.length>0||f!=="ods"){let T={type:"cell",text:He,children:We,metadata:{row:I,col:be}};e.includeRawContent&&(T.rawContent=Te.toString()),Ae.push(T)}be++}}if(Ae.length>0)for(let De=0;De<Le;De++){let Te={type:"row",children:JSON.parse(JSON.stringify(Ae)),metadata:void 0};De>0&&Te.children?.forEach(ze=>{ze.metadata&&"row"in ze.metadata&&(ze.metadata.row=I)}),e.includeRawContent&&(Te.rawContent=Se.toString()),me.push(Te),I++}else I+=Le}let Z={type:"sheet",children:me,metadata:{sheetName:le}};e.includeRawContent&&(Z.rawContent=F.toString()),m.push(Z)}}}else if(f==="odp"){let se=Ce(M,"office:presentation")[0];if(se){let z=En(se,"draw:page"),N=[];for(let F=0;F<z.length;F++){let le=z[F],me={type:"slide",children:[],metadata:{slideNumber:F+1}},U,I=le.childNodes;if(I)for(let Z=0;Z<I.length;Z++){let ue=I[Z];if(ue.nodeType===1){let Se=ue;if(Se.tagName==="presentation:notes"){e.ignoreNotes||(U={type:"note",children:[],metadata:{slideNumber:F+1,noteId:`slide-note-${F+1}`}},ne(Se,U.children));continue}ne(Se,me.children)}}e.includeRawContent&&(me.rawContent=le.toString()),m.push(me),U&&U.children&&U.children.length>0&&(e.putNotesAtLast?N.push(U):m.push(U))}N.length>0&&m.push(...N)}}else{let se=Ce(M,"office:text")[0];se&&ne(se,m)}})(h.content.toString());let R=[],Y=u.filter(L=>L.path.match(/(Pictures|media)\/.*/));if(e.extractAttachments){let L=u.filter($=>$.path.match(/Object \d+\/content\.xml/));for(let $ of L){let M=Ut($.content.toString());if(Ce(M,"chart:chart").length>0){let ne=$.path.split("/")[0],se={type:"chart",mimeType:"application/vnd.oasis.opendocument.chart",data:$.content.toString("base64"),name:ne,extension:"xml"},z=Xu($.content);z.rawTexts.length>0&&(se.chartData=z),R.push(se)}}}if(e.extractAttachments)for(let L of Y){let $=Is(L.path.split("/").pop()||"image",L.content);if(R.push($),e.ocr&&$.mimeType.startsWith("image/"))try{$.ocrText=(await ns(L.content,e.ocrLanguage)).trim()}catch(M){ci(`OCR failed for ${$.name}:`,e,M)}}let te=u.find(L=>L.path.match(o)),K=te?wl(te.content.toString()):{},ie=(L,$)=>{let M=ne=>{let se=ne.replace(/^\[|\]$/g,""),[z,N]=se.split(":"),F=z.lastIndexOf(".");if(F===-1)return[ne];let le=z.substring(0,F).replace(/^'|'$/g,""),me=z.substring(F+1).replace(/\$/g,""),U=me;if(N)if(N.startsWith("."))U=N.substring(1).replace(/\$/g,"");else{let de=N.lastIndexOf(".");U=N.substring(de+1).replace(/\$/g,"")}let I=de=>{let be=de.match(/[A-Z]+/),Le=de.match(/\d+/);if(!be||!Le)return null;let De=be[0],Te=0;for(let He=0;He<De.length;He++)Te=Te*26+(De.charCodeAt(He)-65+1);return Te-=1,{r:parseInt(Le[0])-1,c:Te}},Z=I(me),ue=I(U);if(!Z||!ue)return[ne];let Se=$.find(de=>de.type==="sheet"&&de.metadata?.sheetName===le);if(!Se||!Se.children)return[ne];let Ae=[];for(let de of Se.children)if(de.children)for(let be of de.children){let Le=be.metadata;Le&&Le.row>=Z.r&&Le.row<=ue.r&&Le.col>=Z.c&&Le.col<=ue.c&&Ae.push(be.text||"")}return Ae.length>0?Ae:[]};for(let ne of L.dataSets){let se=[];for(let z of ne.values)z.startsWith("[")?se.push(...M(z)):se.push(z);ne.values=se}let G=[];for(let ne of L.labels)ne.startsWith("[")?G.push(...M(ne)):G.push(ne);L.labels=G,L.rawTexts=[],L.title&&L.rawTexts.push(L.title);for(let ne of L.dataSets)ne.name&&L.rawTexts.push(ne.name),L.rawTexts.push(...L.labels),L.rawTexts.push(...ne.values)};for(let L of R)L.type==="chart"&&L.chartData&&ie(L.chartData,m);(L=>{let $=new Set,M=z=>{for(let N of z){if(N.metadata&&"attachmentName"in N.metadata){let F=N.metadata.attachmentName;F&&$.add(F)}N.children&&M(N.children)}};M(L);let G=R.filter(z=>z.type==="image"&&z.name&&!$.has(z.name)),ne=0,se=z=>{if((z.type==="image"||z.type==="chart")&&z.metadata&&"attachmentName"in z.metadata){let N=z.metadata.attachmentName;if(!N&&z.type==="image"&&ne<G.length&&(N=G[ne++].name,z.metadata.attachmentName=N),N){let F=R.find(le=>le.name===N);F&&(F.ocrText&&(z.text=F.ocrText),F.chartData&&z.type==="chart"&&(z.text=F.chartData.rawTexts.join(e.newlineDelimiter??`
`)))}}z.children&&z.children.forEach(se)};L.forEach(se)})(m);let q={};for(let L in v)q[L]={formatting:v[L],alignment:w[L]?.alignment};for(let L in w)q[L]||(q[L]={formatting:{},alignment:w[L]?.alignment});e.putNotesAtLast&&b.length>0&&m.push(...b);let fe=L=>{let $=[];if(L.children){for(let M of L.children)if(M.type==="row"&&M.children){let G=[];for(let ne of M.children)if(ne.type==="cell"){let se=N=>{let F=N.text||"";if(N.children&&N.children.length>0){let le=N.children.map(se).filter(me=>me!=="");le.length>0&&(F+=(F?" ":"")+le.join(" "))}return F},z=se(ne);G.push({value:z})}G.length>0&&$.push({cols:G})}}return{type:"table",rows:$}},Ee=(L,$)=>{if(L.type!=="chart")return null;let M=L.metadata,G=M;if(G?.chartData)return{type:"chart",chartData:G.chartData};if(M?.attachmentName){let ne=$.find(se=>se.name===M.attachmentName&&se.type==="chart");if(ne?.chartData)return{type:"chart",chartData:ne.chartData}}return null},ve=(L,$)=>{let M=[],G=ne=>{if(ne.type==="table")M.push(fe(ne));else if(ne.type==="chart"){let se=Ee(ne,$);se&&M.push(se)}else if(ne.type==="image"){let z=ne.metadata?.attachmentName;if(z){let N=$.find(F=>F.name===z&&F.type==="image");if(N){let F=Buffer.from(N.data,"base64");M.push({type:"image",buffer:F,mimeType:N.mimeType,filename:N.name})}}}else ne.text&&ne.text.trim()&&(!ne.children||ne.children.length===0||ne.text.trim())&&M.push({type:"text",content:ne.text});if(ne.children)for(let se of ne.children)G(se)};for(let ne of L)G(ne);return M},H=L=>L.filter($=>$.type==="image").map($=>({buffer:Buffer.from($.data,"base64"),mimeType:$.mimeType,filename:$.name})),D=m.map(L=>{let $=M=>{let G="";if(M.children&&M.children.length>0){let se=M.children.some(z=>z.children&&z.children.length>0)?e.newlineDelimiter??`
`:"";G+=M.children.map($).filter(z=>z!="").join(se)}else G+=M.text||"";return G};return $(L)}).filter(L=>L!="").join(e.newlineDelimiter??`
`),ee=ve(m,R),B=H(R);return console.log("Document blocks",ee.filter(L=>L.type=="table")),{type:f,metadata:{...K,styleMap:q},content:m,attachments:R,fullText:D,blocks:ee,images:B,toText:()=>D}};Oe();ke();Ne();function T3(r){if(r)try{let e=r.startsWith("D:")?r.slice(2):r,t=parseInt(e.slice(0,4),10),n=parseInt(e.slice(4,6),10)-1,i=parseInt(e.slice(6,8),10)||1,o=parseInt(e.slice(8,10),10)||0,s=parseInt(e.slice(10,12),10)||0,a=parseInt(e.slice(12,14),10)||0,u=e.slice(14).match(/([+-Z])(\d{2})'?(\d{2})?'?/);if(u){let c=u[1]==="-"?-1:1,f=parseInt(u[2],10)||0,h=parseInt(u[3],10)||0,d=c*(f*60+h),m=Date.UTC(t,n,i,o,s,a);return new Date(m-d*6e4)}return new Date(t,n,i,o,s,a)}catch{try{return new Date(r)}catch{return}}}function EV(r){let e=[];for(let i of r)for(let o of i)o.type==="text"&&o.height>0&&e.push(o.height);if(e.length===0)return{median:12,max:12};e.sort((i,o)=>i-o);let t=e[Math.floor(e.length/2)],n=e[e.length-1];return{median:t,max:n}}function AV(r,e){if(r<=e.median*1.2)return 0;let t=r/e.median;return t>=2?1:t>=1.7?2:t>=1.5?3:t>=1.35?4:t>=1.2?5:0}function xV(r,e){let t=r.x+r.width/2,n=r.y+r.height/2;for(let i of e){let[o,s,a,u]=i.rect,c=Math.min(o,a),f=Math.max(o,a),h=Math.min(s,u),d=Math.max(s,u);if(t>=c&&t<=f&&n>=h&&n<=d)return i}}function SV(r,e,t){let n=Math.floor((24*r+31)/32)*4,i=n-r*3,o=54,s=n*e,a=o+s,u=Buffer.alloc(a);u.write("BM",0),u.writeUInt32LE(a,2),u.writeUInt32LE(0,6),u.writeUInt32LE(o,10),u.writeUInt32LE(40,14),u.writeInt32LE(r,18),u.writeInt32LE(-e,22),u.writeUInt16LE(1,26),u.writeUInt16LE(24,28),u.writeUInt32LE(0,30),u.writeUInt32LE(s,34),u.writeInt32LE(2835,38),u.writeInt32LE(2835,42),u.writeUInt32LE(0,46),u.writeUInt32LE(0,50);let c=o;for(let f=0;f<e;f++){for(let h=0;h<r;h++){let d=(f*r+h)*4,m=t[d+0],b=t[d+1],v=t[d+2],y=t[d+3]/255,_=Math.round(m*y+255*(1-y)),E=Math.round(b*y+255*(1-y)),S=Math.round(v*y+255*(1-y));u[c+0]=S,u[c+1]=E,u[c+2]=_,c+=3}for(let h=0;h<i;h++)u[c]=0,c++}return u}function TV(r,e,t,n){let i;if(n===1){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++){let s=r[o];i[o*4]=s,i[o*4+1]=s,i[o*4+2]=s,i[o*4+3]=255}}else if(n===2||r.length===e*t*3){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++)i[o*4]=r[o*3],i[o*4+1]=r[o*3+1],i[o*4+2]=r[o*3+2],i[o*4+3]=255}else i=r instanceof Uint8ClampedArray?r:new Uint8ClampedArray(r);return Buffer.from(i.buffer,i.byteOffset,i.byteLength)}var C3=async(r,e)=>{let t;if(typeof window>"u"){let b=new Function("specifier","return import(specifier)");try{t=await b("pdfjs-dist/legacy/build/pdf.mjs")}catch{t=await b("pdfjs-dist")}}else t=await Promise.resolve().then(()=>(S3(),x3));if(e.pdfWorkerSrc)t.GlobalWorkerOptions.workerSrc=e.pdfWorkerSrc;else if(typeof window<"u")t.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";else try{let b=xu.resolve("pdfjs-dist/legacy/build/pdf.worker.mjs");t.GlobalWorkerOptions.workerSrc=b}catch(b){e.outputErrorToConsole&&console.warn("[PdfParser] Could not auto-resolve local worker path:",b)}let n=new Uint8Array(r),i=t.getDocument({data:n,verbosity:0}),o;try{o=await i.promise}catch(b){throw b.message?.includes("workerSrc")||b.message?.includes('No "GlobalWorkerOptions.workerSrc" specified')?ia("PDF_WORKER_MISSING",e):b}let s=[],a=[],u=o.numPages,c=[],h=(await o.getMetadata().catch(()=>({info:{}}))).info,d={pages:u,title:h?.Title||void 0,author:h?.Author||void 0,subject:h?.Subject||void 0,description:h?.Keywords||void 0,created:T3(h?.CreationDate),modified:T3(h?.ModDate)};try{let b=await o.getAttachments();if(b&&e.extractAttachments)for(let v in b){let w=b[v],y=Buffer.from(w.content),_=Is(w.filename,y);a.push(_)}}catch(b){e.outputErrorToConsole&&console.error("Error extracting embedded attachments:",b)}for(let b=1;b<=u;b++){let v,w,y=[];try{v=await o.getPage(b),w=await v.getTextContent()}catch(E){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${b}:`,E),c.push(y);continue}let _=v.commonObjs;for(let E of w.items){let S=E.transform,A=S[4],P=S[5],R=E.width||0,Y=E.height||Math.abs(S[3])||12,te={},K;if(E.fontName&&_)try{if(_.has(E.fontName)){let ie=await new Promise(j=>{_.get(E.fontName,q=>j(q))});if(ie?.name){K=ie.name.replace(/^[A-Z]{6}\+/,""),te.font=K;let j=ie.name.toLowerCase();j.includes("bold")&&(te.bold=!0),(j.includes("italic")||j.includes("oblique"))&&(te.italic=!0)}}}catch{}Y>0&&(te.size=Math.round(Y).toString()),y.push({type:"text",x:A,y:P,width:R,height:Y,text:E.str,fontName:K,formatting:te})}if(e.extractAttachments||e.ocr)try{let E=await v.getOperatorList(),S=E.fnArray,A=E.argsArray;for(let P=0;P<S.length;P++){let R=S[P];if(R===t.OPS.dependency){let Y=A[P];for(let te of Y)try{if(v.objs.has(te))continue;await new Promise(K=>{let ie=setTimeout(()=>{K()},500);v.objs.get(te,j=>{clearTimeout(ie),K()})})}catch(K){e.outputErrorToConsole&&console.error(`[PdfParser] Failed to load dependency ${te}:`,K)}}if(R===t.OPS.paintImageXObject||R===t.OPS.paintXObject){let Y=A[P][0];try{let te=v.objs.has(Y),K=v.objs;if(!te&&v.commonObjs.has(Y)&&(te=!0,K=v.commonObjs),te){let j=await new Promise(q=>{K.get(Y,fe=>q(fe))});if(typeof window<"u"&&!j.data&&j.bitmap)try{let q=document.createElement("canvas");q.width=j.width,q.height=j.height;let fe=q.getContext("2d");fe&&(fe.drawImage(j.bitmap,0,0),j.data=fe.getImageData(0,0,j.width,j.height).data,j.kind=3)}catch(q){e.outputErrorToConsole&&console.error("[PdfParser] Failed to extract from ImageBitmap:",q)}if(j?.data&&j.width>0&&j.height>0){let q=0,fe=0;for(let Ee=P-1;Ee>=0;Ee--)if(S[Ee]===t.OPS.transform){q=A[Ee][4],fe=A[Ee][5];break}y.push({type:"image",x:q,y:fe,name:Y,data:j.data,width:j.width,height:j.height,kind:j.kind})}}}catch{}}}}catch(E){e.outputErrorToConsole&&console.error(`Error extracting images from page ${b}:`,E)}c.push(y)}let m=EV(c);for(let b=0;b<c.length;b++){let v=b+1,w;try{w=await o.getPage(v)}catch(Y){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${v} in second pass:`,Y);continue}let y=c[b],_=[],E=[];try{let Y=await w.getAnnotations();for(let te of Y)te.subtype==="Link"&&te.rect&&E.push({rect:te.rect,url:te.url,dest:te.dest})}catch(Y){e.outputErrorToConsole&&console.error(`Error extracting annotations from page ${v}:`,Y)}y.sort((Y,te)=>Math.abs(te.y-Y.y)>5?te.y-Y.y:Y.x-te.x);let S=null,A=0,P=-1,R=0;for(let Y of y)if(Y.type==="text"){let te=Y.text;if(!te)continue;if(P!==-1&&Math.abs(Y.y-P)>5&&S&&((S.text||"").trim().length>0&&_.push(S),S=null),!S&&te.trim().length===0){P=Y.y;continue}let ie=AV(Y.height,m);if(S||(ie>0?S={type:"heading",text:"",children:[],metadata:{level:ie}}:S={type:"paragraph",text:"",children:[]},A=Y.height),te.trim().length===0){if(S.children&&S.children.length>0){let Ee=S.children[S.children.length-1];Ee.type==="text"&&Ee.text&&(Ee.text+=te,S.text+=te)}P=Y.y;continue}if(S.text&&S.text.length>0&&!S.text.endsWith(" ")&&(S.text+=" ",S.children&&S.children.length>0)){let Ee=S.children[S.children.length-1];Ee.type==="text"&&Ee.text&&(Ee.text+=" ")}S.text+=te;let j=xV(Y,E),q;j&&(j.url?q={link:j.url,linkType:j.url.startsWith("#")?"internal":"external"}:j.dest&&(q={link:typeof j.dest=="string"?`#${j.dest}`:"#internal",linkType:"internal"}));let fe=!1;if(S.children&&S.children.length>0&&!q){let Ee=S.children[S.children.length-1];Ee.type==="text"&&CV(Ee.formatting,Y.formatting)&&!Ee.metadata&&(Ee.text=(Ee.text||"")+te,fe=!0)}if(!fe){let Ee={type:"text",text:te,formatting:Object.keys(Y.formatting).length>0?Y.formatting:void 0};q&&(Ee.metadata=q),S.children?.push(Ee)}P=Y.y}else if(Y.type==="image"){S&&((S.text||"").trim().length>0&&_.push(S),S=null),R++;let te=`pdf_image_p${v}_${R}.bmp`;if(e.extractAttachments)try{let K=TV(Y.data,Y.width,Y.height,Y.kind),ie=SV(Y.width,Y.height,new Uint8Array(K)),j=Is(te,ie);if(j.mimeType="image/bmp",e.ocr)try{Y.width>=10&&Y.height>=10&&(j.ocrText=(await ns(ie,e.ocrLanguage)).trim())}catch(fe){e.outputErrorToConsole&&console.error(`OCR failed for ${te}:`,fe)}a.push(j);let q={attachmentName:te};_.push({type:"image",text:j.ocrText||"",metadata:{...q}})}catch(K){ci(`Failed to process image ${te}:`,e,K)}}S&&(S.text||"").trim().length>0&&_.push(S),s.push({type:"page",children:_,text:_.map(Y=>Y.text).join(e.newlineDelimiter??`

`),metadata:{pageNumber:v}})}return{type:"pdf",metadata:d,content:s,attachments:a,toText:()=>s.map(b=>b.text).join(e.newlineDelimiter??`

`)}};function CV(r,e){if(!r&&!e)return!0;if(!r||!e)return!1;let t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(t[i]!==n[i]||r[o]!==e[o])return!1}return!0}Oe();ke();Ne();var R3=Su(Ib());var D3=async(r,e)=>{let t=/ppt\/(notesSlides|slides)\/(notesSlide|slide)\d+.xml/g,n=/ppt\/slides\/slide\d+.xml/g,i=/ppt\/slides\/_rels\/slide\d+\.xml\.rels/,o=/lide(\d+)\.xml/,s=/ppt\/media\/.*/,a=/ppt\/charts\/chart\d+\.xml/,u=/docProps\/core\.xml/,c=new R3.XMLSerializer,f=await Cl(r,G=>!!G.match(e.ignoreNotes?n:t)||!!G.match(u)||!!G.match(i)||!!e.extractAttachments&&(!!G.match(s)||!!G.match(a))),h=f.find(G=>G.path.match(u)),d=h?wl(h.content.toString()):{};f.sort((G,ne)=>{let se=G.path.match(o),z=ne.path.match(o),N=se?parseInt(se[1]):0,F=z?parseInt(z[1]):0;return N-F});let m=[],b=[],v={},w=new Map,y=0,_=0,E=!1,S=null,A=0,P={},R=G=>{let ne=Ce(G,"p:xfrm")[0];if(ne||(ne=Ce(G,"a:xfrm")[0]),!ne)return;let se=Ce(ne,"a:off")[0],z=se?parseInt(se.getAttribute("x")||"0",10):0,N=se?parseInt(se.getAttribute("y")||"0",10):0,F=Ce(ne,"a:ext")[0],le=F?parseInt(F.getAttribute("cx")||"0",10):0,me=F?parseInt(F.getAttribute("cy")||"0",10):0,U=ne.getAttribute("rot"),I=U?parseInt(U,10)/6e4:void 0;if(le>0&&me>0)return{x:z,y:N,width:le,height:me,...I!==void 0?{rotation:I}:{}}},Y=G=>{let ne=[],se=Ce(G,"a:tr");for(let z=0;z<se.length;z++){let N=se[z],F=[],le=Ce(N,"a:tc");for(let U=0;U<le.length;U++){let I=le[U],Z=[],ue="",Se=Ce(I,"a:txBody")[0];if(Se){let de=Ce(Se,"a:p");for(let be of de){let Le={type:"paragraph",text:"",children:[],metadata:{}};e.includeRawContent&&(Le.rawContent=be.toString());let De=Ce(be,"a:r");for(let Te of De){let ze=Ce(Te,"a:t")[0];if(ze&&ze.childNodes[0]){let He=ze.childNodes[0].nodeValue||"";Le.text+=He;let We=Ce(Te,"a:rPr")[0],x={};if(We){We.getAttribute("b")==="1"&&(x.bold=!0),We.getAttribute("i")==="1"&&(x.italic=!0),We.getAttribute("u")==="sng"&&(x.underline=!0),We.getAttribute("strike")==="sngStrike"&&(x.strikethrough=!0);let g=We.getAttribute("sz");g&&(x.size=(parseInt(g)/100).toString()+"pt");let p=Ce(We,"a:solidFill")[0];if(p){let J=Ce(p,"a:srgbClr")[0];if(J){let C=J.getAttribute("val");C&&(x.color="#"+C)}}let T=Ce(We,"a:latin")[0];if(T){let J=T.getAttribute("typeface");J&&(x.font=J)}}Le.children?.push({type:"text",text:He,formatting:x})}}Z.push(Le),ue+=Le.text}}let Ae={type:"cell",text:ue,children:Z,metadata:{row:z,col:U}};F.push(Ae)}let me={type:"row",children:F};ne.push(me)}return{type:"table",children:ne}},te=(G,ne)=>{let se=Ce(G,"a:blip")[0];if(!se)return null;let z=se.getAttribute("r:embed");if(!z)return null;let N=v[ne]?.[z];if(!N||N.type!=="image")return null;let F=N.target,le=Ce(G,"p:nvPicPr")[0],U=(le?Ce(le,"p:cNvPr")[0]:null)?.getAttribute("descr")||void 0,I={type:"image",text:"",metadata:{attachmentName:F,altText:U}};return w.set(I,G),I},K=(G,ne)=>{let se=Ce(G,"a:graphicData")[0];if(!se||!(se.getAttribute("uri")==="http://schemas.openxmlformats.org/drawingml/2006/chart"))return null;let F=Ce(se,"c:chart")[0];if(!F)return null;let le=F.getAttribute("r:id");if(!le)return null;let me=v[ne]?.[le];if(!me||me.type!=="chart")return null;let I={type:"chart",text:"",metadata:{attachmentName:me.target}};return e.includeRawContent&&(I.rawContent=c.serializeToString(G)),w.set(I,G),I},ie=(G,ne)=>{let se=Ce(G,"a:tbl")[0];if(se){let z=Y(se);if(w.set(z,G),e.includeRawContent&&(z.rawContent=c.serializeToString(G)),z.children&&z.children.length>0)return z}if(G.getElementsByTagName("c:chart").length>0){let z=K(G,ne);if(z)return z}return null},j=(G,ne)=>{let se=[],z=Ce(G,"p:nvSpPr")[0],N=z?Ce(z,"p:nvPr")[0]:null,F=N?Ce(N,"p:ph")[0]:null,le=F?F.getAttribute("type"):"body",me=le==="title"||le==="ctrTitle",U=Ce(G,"p:txBody")[0];if(U){let I=Ce(U,"a:p");for(let Z=0;Z<I.length;Z++){let ue=I[Z],Se={type:me?"heading":"paragraph",text:"",children:[],metadata:me?{level:1}:{}};w.set(Se,G);let Ae=Ce(ue,"a:pPr")[0],de=!1,be="unordered",Le=0;if(Ae){let Te=Ae.getAttribute("lvl");Te&&(Le=parseInt(Te));let ze=Ce(Ae,"a:buAutoNum")[0],He=Ce(Ae,"a:buChar")[0],We=Ce(Ae,"a:buBlip")[0],x=Ce(Ae,"a:bu")[0];ze?(de=!0,be="ordered"):(He||We||x)&&(de=!0,be="unordered");let g=Ae.getAttribute("algn");if(g){let p={l:"left",ctr:"center",r:"right",just:"justify"};p[g]&&(Se.metadata.alignment=p[g])}}if(de){Se.type="list";let Te=Le;if(!E||be!==S){y++;for(let He in P)delete P[He];_=0,P[Te]=0}else if(Te>A)_=0,P[Te]=0;else if(Te<A){for(let We in P){let x=parseInt(We);x>Te&&delete P[x]}_=(P[Te]||0)+1,P[Te]=_}else _=(P[Te]||0)+1,P[Te]=_;E=!0,S=be,A=Te,Se.metadata={...Se.metadata,listType:be,indentation:Te,listId:y.toString(),itemIndex:_,alignment:Se.metadata?.alignment||"left"}}else E=!1,S=null,A=0;me&&(Se.metadata={...Se.metadata,level:1}),e.includeRawContent&&(Se.rawContent=ue.toString());let De=Ce(ue,"a:r");for(let Te=0;Te<De.length;Te++){let ze=De[Te],He=Ce(ze,"a:t")[0];if(He&&He.childNodes[0]){let We=He.childNodes[0].nodeValue||"";Se.text+=We;let x=Ce(ze,"a:rPr")[0],g={};if(x){x.getAttribute("b")==="1"&&(g.bold=!0),x.getAttribute("i")==="1"&&(g.italic=!0),x.getAttribute("u")==="sng"&&(g.underline=!0),x.getAttribute("strike")==="sngStrike"&&(g.strikethrough=!0);let J=x.getAttribute("sz");J&&(g.size=(parseInt(J)/100).toString()+"pt");let C=Ce(x,"a:solidFill")[0];if(C){let _e=Ce(C,"a:srgbClr")[0];if(_e){let Re=_e.getAttribute("val");Re&&(g.color="#"+Re)}}let oe=Ce(x,"a:highlight")[0];if(oe){let _e=Ce(oe,"a:srgbClr")[0];if(_e){let Re=_e.getAttribute("val");Re&&(g.backgroundColor="#"+Re)}}let ce=Ce(x,"a:latin")[0];if(ce){let _e=ce.getAttribute("typeface");_e&&(g.font=_e)}let xe=x.getAttribute("baseline");if(xe){let _e=parseInt(xe);_e<0&&(g.subscript=!0),_e>0&&(g.superscript=!0)}}let p={type:"text",text:We,formatting:g},T=Ce(ze,"a:hlinkClick")[0];if(T){let J=T.getAttribute("r:id"),C=T.getAttribute("action"),oe,ce;J&&v[ne]&&v[ne][J]&&v[ne][J].type==="hyperlink"?(oe=v[ne][J].target,ce="external"):J&&v[ne]&&v[ne][J]&&v[ne][J].type==="slide"?(oe=v[ne][J].target,ce="internal"):C&&(oe=C,ce="internal"),oe&&(p.metadata={link:oe,linkType:ce})}Se.children?.push(p)}}Se.text&&se.push(Se)}}return se};function q(G,ne){let se=[];for(let z of Array.from(G?.childNodes||[])){if(z.nodeType!==1)continue;let N=z,F=N.tagName;if(F==="p:sp")se.push(...j(N,ne));else if(F==="p:pic"){let le=te(N,ne);le&&se.push(le)}else if(F==="p:graphicFrame"){let le=ie(N,ne);le&&se.push(le)}else if(F==="p:grpSp"){let le=N.getElementsByTagName("p:spTree")[0];se.push(...q(le,ne))}}return se}for(let G of f)if(G.path.match(i)){let ne=G.path.match(/slide(\d+)\.xml\.rels/);if(ne){let se=parseInt(ne[1]);v[se]={};let z=Ut(G.content.toString()),N=Ce(z,"Relationship");for(let F=0;F<N.length;F++){let le=N[F].getAttribute("Id"),me=N[F].getAttribute("Type"),U=N[F].getAttribute("Target");if(le&&me&&U){let I="other";me.includes("relationships/image")?I="image":me.includes("relationships/hyperlink")?I="hyperlink":me.includes("relationships/chart")?I="chart":me.includes("relationships/slide")?I="slide":me.includes("relationships/notesSlide")&&(I="notes");let Z=U;U.startsWith("http://")||U.startsWith("https://")||(Z=Z.split("/").pop()||""),v[se][le]={type:I,target:Z}}}}}for(let G of f){if(G.path.match(s)||G.path.match(a)||G.path.match(i)||G.path.match(u))continue;let ne=G.content.toString(),se=Ut(ne);e.includeRawContent&&b.push(ne);let z=G.path.match(o),N=z?parseInt(z[1]):0,F=G.path.includes("notesSlide"),le={type:F?"note":"slide",children:[],metadata:{slideNumber:N,...F?{noteId:`slide-note-${N}`}:{}}};e.includeRawContent&&(le.rawContent=G.content.toString());let me=Ce(se,"p:spTree")[0];me&&le.children?.push(...q(me,N)),le.children&&le.children.length>0&&m.push(le)}let fe=[],Ee=f.filter(G=>G.path.match(/ppt\/media\/.*/)),ve=f.filter(G=>G.path.match(/ppt\/charts\/chart\d+\.xml/));if(e.extractAttachments){for(let ne of Ee){let se=Is(ne.path.split("/").pop()||"image",ne.content);if(fe.push(se),e.ocr&&se.mimeType.startsWith("image/"))try{se.ocrText=(await ns(ne.content,e.ocrLanguage)).trim()}catch(z){ci(`OCR failed for ${se.name}:`,e,z)}}for(let ne of ve){let se={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:ne.content.toString("base64"),name:ne.path.split("/").pop()||"",extension:"xml"};fe.push(se);try{let z=await Xu(ne.content);se.chartData=z}catch(z){ci(`Failed to extract text from chart ${ne.path}:`,e,z)}}let G=ne=>{for(let se of ne){if("attachmentName"in(se.metadata||{})){let z=se.metadata,N=fe.find(F=>F.name===z.attachmentName);N&&(se.type==="image"&&(N.altText=z.altText,N.ocrText&&(se.text=N.ocrText)),se.type==="chart"&&(se.text=N.chartData?.rawTexts.join(e.newlineDelimiter||`
`)))}se.children&&G(se.children)}};G(m)}!e.ignoreNotes&&e.putNotesAtLast&&m.sort((G,ne)=>{let se=G.type==="note"?1:0,z=ne.type==="note"?1:0;return se-z});let H=(G,ne)=>{let se=[];if(G.children){for(let z of G.children)if(z.type==="row"&&z.children){let N=[];for(let F of z.children)if(F.type==="cell"){let le=U=>{let I=U.text||"";if(U.children&&U.children.length>0){let Z=U.children.map(le).filter(ue=>ue!=="");Z.length>0&&(I+=(I?" ":"")+Z.join(" "))}return I},me=le(F);N.push({value:me})}N.length>0&&se.push({cols:N})}}return{type:"table",rows:se,...ne?{position:ne}:{}}},D=(G,ne,se)=>{if(G.type!=="chart")return null;let z=G.metadata,N=z;if(N?.chartData)return{type:"chart",chartData:N.chartData,...se?{position:se}:{}};if(z?.attachmentName){let F=ne.find(le=>le.name===z.attachmentName&&le.type==="chart");if(F?.chartData)return{type:"chart",chartData:F.chartData,...se?{position:se}:{}}}return null},ee=(G,ne,se)=>{let z=[],N=F=>{let le=se.get(F),me=le?R(le):void 0;if(F.type==="table"){z.push(H(F,me));return}else if(F.type==="chart"){let U=D(F,ne,me);U&&z.push(U);return}else if(F.type==="image"){let I=F.metadata?.attachmentName;if(I){let Z=ne.find(ue=>ue.name===I&&ue.type==="image");if(Z){let ue=Buffer.from(Z.data,"base64");z.push({type:"image",buffer:ue,mimeType:Z.mimeType,filename:Z.name,...me?{position:me}:{}})}}return}if(F.text&&F.text.trim()&&(F.type==="text"||F.type==="paragraph"||F.type==="heading"||F.type==="list")&&z.push({type:"text",content:F.text.trim(),...me?{position:me}:{}}),F.children)for(let U of F.children)N(U)};for(let F of G)N(F);return z},B=G=>G.filter(ne=>ne.type==="image").map(ne=>({buffer:Buffer.from(ne.data,"base64"),mimeType:ne.mimeType,filename:ne.name})),L=m.map(G=>{let ne=se=>{let z="";return se.children?z+=se.children.map(ne).filter(N=>N!="").join(se.children[0]?.children?e.newlineDelimiter??`
`:""):z+=se.text||"",z};return ne(G)}).filter(G=>G!="").join(e.newlineDelimiter??`
`),$=ee(m,fe,w),M=B(fe);return console.log("Document blocks",$.filter(G=>G.type==="table")),{type:"pptx",metadata:d,content:m,attachments:fe,fullText:L,blocks:$,images:M,toText:()=>L}};Oe();ke();Ne();var RV={pngblip:"png",jpegblip:"jpeg",gifblip:"gif",tiffblip:"tiff",dibitmap:"bmp",wbitmap:"bmp"},DV={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",bmp:"image/bmp"},OT=class{constructor(e){this.index=0;this.buffer=e,this.length=e.length}parse(){let e={type:"group",content:[]},t=[e];for(;this.index<this.length;){let n=this.buffer[this.index],i=t[t.length-1];if(n===123){this.index++;let o={type:"group",content:[]};i.content.push(o),t.push(o)}else n===125?(this.index++,t.length>1&&t.pop()):n===92?(this.index++,this.parseControl(i)):n===13||n===10?this.index++:this.parseText(i)}return e}parseControl(e){if(this.index>=this.length)return;let t=this.buffer[this.index];if(t===123||t===125||t===92){e.content.push({type:"text",value:String.fromCharCode(t)}),this.index++;return}if(t===39){if(this.index++,this.index+1<this.length){let a=this.buffer.toString("utf8",this.index,this.index+2),u=parseInt(a,16);if(!isNaN(u)){let f={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}[u]||u;e.content.push({type:"text",value:String.fromCharCode(f)})}this.index+=2}return}if(t===42){e.content.push({type:"control",value:"*"}),this.index++;return}let n="";for(;this.index<this.length;){let a=this.buffer[this.index];if(a>=97&&a<=122||a>=65&&a<=90)n+=String.fromCharCode(a),this.index++;else break}let i,o=!1,s="";for(this.index<this.length&&this.buffer[this.index]===45&&(s+="-",this.index++);this.index<this.length;){let a=this.buffer[this.index];if(a>=48&&a<=57)s+=String.fromCharCode(a),this.index++,o=!0;else break}if(o&&(i=parseInt(s,10)),this.index<this.length&&this.buffer[this.index]===32&&this.index++,n==="bin"&&i!==void 0&&i>0){this.index+=i;return}e.content.push({type:"control",value:n,param:i}),(e.content.length===1&&e.type==="group"||e.content.length===2&&e.content[0].type==="control"&&e.content[0].value==="*")&&(e.destination=n)}parseText(e){let t="";for(;this.index<this.length;){let n=this.buffer[this.index];if(n===123||n===125||n===92||n===13||n===10)break;t+=String.fromCharCode(n),this.index++}t.length>0&&e.content.push({type:"text",value:t})}},I3=async(r,e)=>{try{let n=new OT(r).parse(),i=IV(n),o=OV(n),s=[],a=[],u=[],c="",f=[],h="",d="",m={},b=s,v=0,w="left",y=!1,_,E,S,A,P,R=[],Y=0,te=0,K=()=>R.length>0?R[R.length-1]:void 0,ie=()=>{R.length===0&&R.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})},j=!1,q=!1,fe=0,Ee=[],ve={isMergedContinuation:!1},H=0,D=0,ee={},B=!1,L=!1,$,M,G={},ne=!1,se,z,N={},F={},le,me=(p,T)=>p.bold!==T.bold||p.italic!==T.italic||p.underline!==T.underline||p.strikethrough!==T.strikethrough||p.size!==T.size||p.font!==T.font||p.color!==T.color||p.backgroundColor!==T.backgroundColor||p.subscript!==T.subscript||p.superscript!==T.superscript,U=()=>{if(d){let p={type:"text",text:d,formatting:{...m}};le&&(p.metadata={link:le,linkType:be(le)}),f.push(p),c+=d,d=""}},I=!1,Z=()=>{U();let p=c||f.length>0;if(j&&!q&&!I&&p){let T=c,J=[...f],C=h;c="",f=[],h="",Ae(),c=T,f=J,h=C}if(p){let T="paragraph",J;if(E!==void 0&&E>0)T="heading",J={level:E},A=void 0,P=void 0;else if(y){T="list";let oe=S||A,ce=_||P||"unordered",xe=0;oe&&(F[oe]||(F[oe]={}),F[oe][v]===void 0?F[oe][v]=0:F[oe][v]++,xe=F[oe][v]),J={listType:ce,indentation:v,listId:oe||"",itemIndex:xe,alignment:w},oe&&(A=oe),ce&&(P=ce)}let C={type:T,text:c,children:f,formatting:void 0,metadata:J};e.includeRawContent&&h&&(C.rawContent=h),j&&q?(ie(),K().currentCellContent.push(C)):b.push(C),c="",f=[],h="",v=0,y=!1,_=void 0,E=void 0,S=void 0}},ue=p=>{Z();let T=p||K();if(!T)return;let J={type:"cell",text:T.currentCellContent.map(C=>C.text).join(`
`),children:[...T.currentCellContent],metadata:{row:T.rowIndex,col:T.currentCells.length}};return T.currentCellContent=[],J},Se=p=>{let T=p||K();if(!T)return;let J=ue(T);if(J&&(J.children&&J.children.length>0||J.text)&&T.currentCells.push(J),T.currentCells.length>0){let C={type:"row",text:T.currentCells.map(oe=>oe.text).filter(oe=>oe!=="").join(e.newlineDelimiter??`
`),children:[...T.currentCells]};T.rows.push(C),T.currentCells=[],T.rowIndex++}},Ae=()=>{if(I)return;I=!0;let p=K();if(!p){I=!1;return}if(Se(p),p.rows.length>0){fe++;let T={type:"table",text:p.rows.map(J=>J.text).join(`
`),children:[...p.rows]};R.length>1?R[R.length-2].currentCellContent.push(T):b.push(T)}R.pop(),R.length===0&&(j=!1,q=!1),I=!1},de=p=>{let T,J=C=>{if(C.type==="text"){let oe=C.value,ce=oe.match(/HYPERLINK\s+"([^"]+)"/i);if(ce)return ce[1];let xe=oe.match(/"(https?:\/\/[^"]+|mailto:[^"]+|#[^"]+)"/);if(xe)return xe[1]}else if(C.type==="group"){let oe=!1,ce;for(let xe of C.content)if(xe.type==="text"){xe.value.toUpperCase().includes("HYPERLINK")&&(oe=!0);let Re=xe.value.match(/"([^"]+)"/);Re&&oe&&(ce=Re[1])}else if(xe.type==="group"){let _e=J(xe);_e&&(ce=_e)}if(ce)return ce}};for(let C of p.content)if(C.type==="group"){let oe=J(C);if(oe)return oe}return T},be=p=>{let T=p.trim();return T.startsWith("#")||!/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(T)?"internal":"external"},Le=p=>{let T="",J=C=>{if(C.type==="text")T+=C.value;else if(C.type==="group")for(let oe of C.content)J(oe)};for(let C of p.content)J(C);return T},De=p=>{let T,J="";for(let oe of p.content)if(oe.type==="control"){let ce=RV[oe.value];ce&&(T=ce)}else oe.type==="text"?J+=oe.value.replace(/[^0-9a-fA-F]/g,""):oe.type;if(!T||J.length===0)return;let C=DV[T];if(C)try{let oe=Buffer.from(J,"hex"),ce=T,xe=`image_${u.length+1}.${ce}`;return{type:"image",mimeType:C,data:oe.toString("base64"),name:xe,extension:ce}}catch{return}},Te=p=>{if(!/^[a-zA-Z]/.test(p.value))return`\\${p.value}`;let T=`\\${p.value}`;return p.param!==void 0&&(T+=p.param),T+=" ",T},ze=p=>p.value.replace(/([\\{}])/g,"\\$1"),He=(p,T,J=0)=>{if(p.type==="group"){let C=["fonttbl","colortbl","stylesheet","info","macpict","pmmetafile","wmetafile","dibitmap","bitmap","object","nextGenerator","header","footer","nonshppict","xml","private","upnp","ud","filetbl","operator","author","creatim","revtim","printim","comment","fldinst","listtext","pntext"],oe=!1,ce=!1,xe=!1,_e=!1;if(p.destination){if(p.destination==="footnote")ce=!0;else if(p.destination==="field"){let Be=de(p);Be&&(U(),xe=!0,le=Be)}else if(p.destination==="listtable")B=!0;else if(B&&p.destination==="list")L=!0,$=void 0,M=void 0;else if(p.destination==="listoverridetable")ne=!0;else if(ne&&p.destination==="listoverride")se=void 0,z=void 0;else if(p.destination==="pict")e.extractAttachments?_e=!0:oe=!0;else if(C.includes(p.destination))oe=!0;else if(p.content.length>0&&p.content[0].type==="control"&&p.content[0].value==="*"){let Be=["fldinst","nesttableprops"];e.extractAttachments&&Be.push("shppict","listpicture"),Be.includes(p.destination||"")||(oe=!0)}}if(p.destination==="listtext"||p.destination==="pntext"){y||(v=0),y=!0;let Be=Le(p);if(Be){let tt=Be.trim();["\xB7","\u2022","o","\xA7","\u25A0","\u25A1","\u25CF","\u25CB","\u25C6","\u25C7","\u25BA","\u25B8","\xB7","\u2022","\u25CF","\u25CB"].some($e=>tt.includes($e))||tt.length===1&&!/[0-9a-zA-Z]/.test(tt)?_="unordered":(/^[0-9ivxlcdm]+[\.\)]/i.test(tt)||/^[a-z][\.\)]/i.test(tt))&&(_="ordered")}oe=!0}if(oe)return;if(h+="{",_e){let Be=De(p);Be&&(u.push(Be),!B&&!L&&(Z(),b.push({type:"image",text:"",metadata:{attachmentName:Be.name||`image_${u.length}`}})));for(let tt of p.content)if(tt.type==="control")h+=Te(tt);else if(tt.type==="text")h+=ze(tt);else if(tt.type==="group"){let O=Me=>{for(let $e of Me.content)$e.type==="control"?h+=Te($e):$e.type==="text"?h+=ze($e):$e.type==="group"&&(h+="{",O($e),h+="}")};O(p)}h+="}";return}let Re=b;if(ce){if(e.ignoreNotes)return;Z(),Y++;let Be="footnote";te===1?Be="endnote":te===2&&(Be=p.content.some(Me=>Me.type==="control"&&Me.value==="ftnalt")?"endnote":"footnote");let tt={type:"note",children:[],metadata:{noteId:Y.toString(),noteType:Be}};a.push(tt),b=tt.children}let Q={...T};for(let Be of p.content){if(Be.type==="group"&&Be.destination==="fldinst"){h+="{";let tt=O=>{for(let Me of O.content)Me.type==="control"?h+=Te(Me):Me.type==="text"?h+=ze(Me):Me.type==="group"&&(h+="{",tt(Me),h+="}")};tt(Be),h+="}";continue}He(Be,Q,J+1)}p.destination==="listtable"?B=!1:p.destination==="list"?(L=!1,$!==void 0&&M!==void 0&&(G[$]=M)):p.destination==="listoverridetable"?ne=!1:ne&&p.destination==="listoverride"&&z!==void 0&&se!==void 0&&(N[z]=se),ce&&(Z(),b=Re),xe&&(U(),le=void 0),h+="}"}else if(p.type==="text"){if(B||ne){h+=ze(p);return}me(m,T)&&(U(),m={...T}),d+=p.value,h+=ze(p)}else if(p.type==="control"){if(h+=Te(p),B){if(p.value==="listid")$=p.param;else if(p.value==="levelnfc"||p.value==="levelnfcn"){let C=p.param!==void 0&&(p.param===0||p.param>=0&&p.param<=4);(!M||M==="unordered"&&C)&&(M=C?"ordered":"unordered")}return}if(ne){p.value==="listid"?se=p.param:p.value==="ls"&&(z=p.param);return}if(p.value==="par")Z(),m={...T};else if(p.value==="trowd"){let C=K();j&&C&&C.currentCellContent.length>0?(ie(),R.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})):j||(j=!0,ie()),q=!0,Ee=[],ve={isMergedContinuation:!1},H=0}else if(p.value==="clvmrg")ve.isMergedContinuation=!0;else if(p.value==="clmgf")ve.isMergedContinuation=!1;else if(p.value==="cellx")Ee.push({...ve}),ve={isMergedContinuation:!1};else if(p.value==="cell"){q=!0;let C=!1;H<Ee.length&&(C=Ee[H].isMergedContinuation),H++;let oe=ue();if(oe&&!C){let ce=K();ce&&ce.currentCells.push(oe)}m={...T}}else if(p.value==="nestcell"){if(R.length>1){let oe=K();oe&&(oe.rows.length>0||oe.currentCells.length>0)&&Ae()}q=!0;let C=ue();if(C){let oe=K();oe&&oe.currentCells.push(C)}m={...T}}else if(p.value==="row")Se(),m={...T},H=0,q=!1;else if(p.value==="nestrow")R.length>1&&Ae(),Se(),m={...T},H=0;else if(p.value==="intbl")j=!0,q=!0,ie();else if(p.value==="pard")q=!1,v=0,w="left",y=!1,_=void 0,E=void 0,S=void 0,T.backgroundColor=void 0;else if(p.value==="tab")me(m,T)&&(U(),m={...T}),d+="	";else if(p.value==="line")me(m,T)&&(U(),m={...T}),d+=`
`;else if(p.value==="lquote")me(m,T)&&(U(),m={...T}),d+="\u2018";else if(p.value==="rquote")me(m,T)&&(U(),m={...T}),d+="\u2019";else if(p.value==="ldblquote")me(m,T)&&(U(),m={...T}),d+="\u201C";else if(p.value==="rdblquote")me(m,T)&&(U(),m={...T}),d+="\u201D";else if(p.value==="u"){if(p.param!==void 0){let C=p.param;C<0&&(C+=65536),me(m,T)&&(U(),m={...T}),d+=String.fromCharCode(C)}}else if(p.value==="b")T.bold=p.param!==0;else if(p.value==="i")T.italic=p.param!==0;else if(p.value==="ul")T.underline=p.param!==0;else if(p.value==="ulnone")T.underline=!1;else if(p.value==="strike")T.strikethrough=p.param!==0;else if(p.value==="plain")T.bold=!1,T.italic=!1,T.underline=!1,T.strikethrough=!1,T.subscript=!1,T.superscript=!1,T.size=void 0,T.font=void 0,T.color=void 0,T.backgroundColor=void 0;else if(p.value==="fs")p.param!==void 0&&(T.size=(p.param/2).toString()+"pt");else if(p.value==="f")p.param!==void 0&&i[p.param]&&(T.font=i[p.param]);else if(p.value==="cf")p.param!==void 0&&o[p.param]&&(T.color=o[p.param]);else if(p.value==="fet")p.param!==void 0&&(te=p.param);else if(p.value==="cb"||p.value==="highlight"||p.value==="chcbpat"||p.value==="cbpat")p.param!==void 0&&o[p.param]&&(T.backgroundColor=o[p.param]);else if(p.value==="sub")T.subscript=!0,T.superscript=!1;else if(p.value==="super")T.superscript=!0,T.subscript=!1;else if(p.value==="nosupersub")T.subscript=!1,T.superscript=!1;else if(p.value==="li")p.param!==void 0&&(v=Math.floor(p.param/360));else if(p.value==="ls"){if(p.param!==void 0){y||(v=0),y=!0,ee[p.param]||(D++,ee[p.param]=`rtf-list-${D}`),S=ee[p.param];let C=N[p.param]!==void 0?N[p.param]:p.param;G[C]&&(_=G[C])}}else p.value==="ilvl"?p.param!==void 0&&(y=!0,v=p.param):p.value==="pnlvl"?(y=!0,p.param!==void 0&&(v=p.param)):p.value==="levelnfc"||p.value==="pnf"?p.param!==void 0&&(y=!0,p.param===23?_="unordered":_="ordered"):p.value==="pndec"||p.value==="pnord"||p.value==="pnlcltr"||p.value==="pnucltr"?(y||(v=0),y=!0,_="ordered"):p.value==="pnbullet"||p.value==="pncard"?(y||(v=0),y=!0,_="unordered"):p.value==="s"?p.param!==void 0&&p.param>=1&&p.param<=9&&(E=p.param):p.value==="ql"?w="left":p.value==="qc"?w="center":p.value==="qr"?w="right":p.value==="qj"&&(w="justify")}};He(n,{});let We=K();if((j||We&&(We.rows.length>0||We.currentCells.length>0))&&Ae(),Z(),!e.putNotesAtLast&&a.length>0&&(s.push(...a),a.length=0),e.ocr&&e.extractAttachments){for(let T of u)if(T.mimeType.startsWith("image/"))try{let J=Buffer.from(T.data,"base64");T.ocrText=(await ns(J,e.ocrLanguage)).trim()}catch(J){ci(`OCR failed for ${T.name}:`,e,J)}let p=T=>{for(let J of T){if(J.type==="image"&&J.metadata&&"attachmentName"in J.metadata){let C=J.metadata,oe=u.find(ce=>ce.name===C.attachmentName);oe&&(oe.ocrText&&(J.text=oe.ocrText),oe.altText&&(C.altText=oe.altText))}J.children&&p(J.children)}};p(s)}let x=p=>{for(let T of p){if(T.type==="note"&&T.children){let J=C=>C.children&&C.children.length>0?C.children.map(J).join(""):C.text||"";T.text=T.children.map(J).join("").trim()}T.children&&x(T.children)}};x(s),x(a);let g={type:"rtf",metadata:{},content:s,attachments:u,toText:()=>{let p=s.map(T=>T.text).join(e.newlineDelimiter??`
`);return e.putNotesAtLast&&a.length>0&&(p+=(e.newlineDelimiter??`
`)+a.map(T=>T.text).join(e.newlineDelimiter??`
`)),p}};return e.putNotesAtLast&&a.length>0&&s.push(...a),g}catch(t){throw t}};function IV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="fonttbl"){for(let o of i.content)if(o.type==="group"){let s,a="";for(let u of o.content)u.type==="control"&&u.value==="f"?s=u.param:u.type==="text"&&(a+=u.value);s!==void 0&&a&&(a=a.replace(/;$/,"").trim(),e[s]=a)}return!0}if(t(i))return!0}return!1};return t(r),e}function OV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="colortbl"){let o=0,s=0,a=0,u=0;for(let c of i.content)if(c.type==="control")c.value==="red"&&c.param!==void 0?s=c.param:c.value==="green"&&c.param!==void 0?a=c.param:c.value==="blue"&&c.param!==void 0&&(u=c.param);else if(c.type==="text"&&c.value===";"){let f=`#${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}`;e[o]=f,o++,s=0,a=0,u=0}return!0}if(t(i))return!0}return!1};return t(r),e}Oe();ke();Ne();var O3=Su(Ib());var N3=async(r,e)=>{let t=/word\/document[\d+]?.xml/,n=/word\/footnotes[\d+]?.xml/,i=/word\/endnotes[\d+]?.xml/,o=/word\/numbering[\d+]?.xml/,s=/(word\/)?media\/.*/,a=/docProps\/core[\d+]?.xml/,u=/word\/_rels\/document[\d+]?.xml\.rels/,c=/word\/styles[\d+]?.xml/,f=new O3.XMLSerializer,h=D=>{let ee={},B=f.serializeToString(D),L=(I,Z)=>{let ue=new RegExp(`<${Z}(?:\\s+w:val="([^"]+)")?\\s*\\/?>`),Se=I.match(ue);if(Se){let Ae=Se[1];return Ae===void 0?!0:Ae==="1"||Ae==="true"||Ae==="on"}return null},$=L(B,"w:b");$!==null&&(ee.bold=$);let M=L(B,"w:i");M!==null&&(ee.italic=M);let G=B.match(/<w:u(?: w:val="([^"]+)")?\/?>/);if(G){let I=G[1];(!I||I!=="none")&&(ee.underline=!0)}let ne=L(B,"w:strike"),se=L(B,"w:dstrike");ne!==null?ee.strikethrough=ne:se!==null&&(ee.strikethrough=se);let z=B.match(/<w:sz w:val="(\d+)"/);z&&(ee.size=(parseInt(z[1])/2).toString()+"pt");let N=B.match(/<w:color w:val="([^"]+)"/);N&&N[1]!=="auto"&&(ee.color="#"+N[1]);let F=B.match(/<w:shd[^>]*w:fill="([^"]+)"/);F&&F[1]!=="auto"&&(ee.backgroundColor="#"+F[1]);let le=B.match(/<w:highlight w:val="([^"]+)"/);if(le&&le[1]!=="none"){let I={yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",magenta:"#FF00FF",blue:"#0000FF",red:"#FF0000",darkBlue:"#00008B",darkCyan:"#008B8B",darkGreen:"#006400",darkMagenta:"#8B008B",darkRed:"#8B0000",darkYellow:"#808000",darkGray:"#A9A9A9",lightGray:"#D3D3D3",black:"#000000"};ee.backgroundColor=I[le[1]]||le[1]}let me=B.match(/<w:rFonts[^>]*w:ascii="([^"]+)"/);if(me)ee.font=me[1];else{let I=B.match(/<w:rFonts[^>]*w:hAnsi="([^"]+)"/);I&&(ee.font=I[1])}let U=B.match(/<w:vertAlign w:val="([^"]+)"/);return U&&(U[1]==="subscript"&&(ee.subscript=!0),U[1]==="superscript"&&(ee.superscript=!0)),ee},d=await Cl(r,D=>!!D.match(t)||!!D.match(n)||!!D.match(i)||!!D.match(o)||!!D.match(a)||!!D.match(u)||!!D.match(c)||!!e.extractAttachments&&!!D.match(s)),m=d.find(D=>D.path.match(a)),b=m?wl(m.content.toString()):{},v=new Map,w=new Map,y=[],_=[],E=d.filter(D=>D.path.match(s)),S=d.find(D=>D.path.match(u)),A={};if(S){let D=Ut(S.content.toString()),ee=Ce(D,"Relationship");for(let B=0;B<ee.length;B++){let L=ee[B].getAttribute("Id"),$=ee[B].getAttribute("Target");L&&$&&(A[L]=$)}}let P=d.find(D=>D.path.match(o)),R={};if(P){let D=Ut(P.content.toString()),ee=Ce(D,"w:num"),B=Ce(D,"w:abstractNum"),L={};for(let $=0;$<B.length;$++){let M=B[$].getAttribute("w:abstractNumId");M&&(L[M]=B[$])}for(let $=0;$<ee.length;$++){let M=ee[$].getAttribute("w:numId"),ne=Ce(ee[$],"w:abstractNumId")[0]?.getAttribute("w:val");if(M&&ne&&L[ne]){R[M]={};let se=Ce(L[ne],"w:lvl");for(let z=0;z<se.length;z++){let N=se[z].getAttribute("w:ilvl"),F=Ce(se[z],"w:numFmt")[0],le=Ce(se[z],"w:lvlText")[0];N&&(R[M][N]={numFmt:F?.getAttribute("w:val")||"decimal",lvlText:le?.getAttribute("w:val")||""})}}}}let Y=d.find(D=>D.path.match(c)),te={};if(Y){let D=Ut(Y.content.toString()),ee=Ce(D,"w:style");for(let B=0;B<ee.length;B++){let L=ee[B].getAttribute("w:styleId");if(L){let $=Ce(ee[B],"w:rPr")[0],M=Ce(ee[B],"w:pPr")[0],G=$?h($):{},ne,se;if(M){let z=Ce(M,"w:jc")[0];if(z){let F=z.getAttribute("w:val");(F==="left"||F==="center"||F==="right"||F==="justify")&&(ne=F)}let N=Ce(M,"w:shd")[0];if(N){let F=N.getAttribute("w:fill");F&&F!=="auto"&&(se="#"+F)}}te[L]={formatting:G,alignment:ne,backgroundColor:se}}}}let K={};if(Y){let D=Ut(Y.content.toString()),ee=Ce(D,"w:docDefaults")[0];if(ee){let B=Ce(ee,"w:rPrDefault")[0];if(B){let L=Ce(B,"w:rPr")[0];L&&(K=h(L))}}}let ie;if(Y){let D=Ut(Y.content.toString()),ee=Ce(D,"w:style");for(let B=0;B<ee.length;B++){let L=ee[B].getAttribute("w:type"),$=ee[B].getAttribute("w:default"),M=ee[B].getAttribute("w:styleId");if(L==="paragraph"&&$==="1"&&M){ie=M;break}}!ie&&te.Normal&&(ie="Normal")}let j=[],q=[],fe={},Ee={},ve=D=>{let ee=f.serializeToString(D),B=Ce(D,"w:numPr")[0],L=!!B,$=Ce(D,"w:pPr")[0],M=$?Ce($,"w:pStyle")[0]:null,G=M?M.getAttribute("w:val"):null,ne=G?G.startsWith("Heading")||G==="Title":!1,se=G&&te[G]?te[G]:{formatting:{}},z=se.alignment;if($){let Z=Ce($,"w:jc")[0];if(Z){let ue=Z.getAttribute("w:val");(ue==="left"||ue==="center"||ue==="right"||ue==="justify")&&(z=ue)}}let N=se.backgroundColor;if($){let Z=Ce($,"w:shd")[0];if(Z){let ue=Z.getAttribute("w:fill");ue&&ue!=="auto"&&(N="#"+ue)}}let F={...se.formatting};if($){let Z=Ce($,"w:rPr")[0];if(Z){let ue=h(Z);for(let Se in ue){let Ae=ue[Se];Ae===!1?delete F[Se]:Ae!==void 0&&(F[Se]=Ae)}}}let le="",me=[],U=Z=>{if(Z.nodeName==="w:r"){let ue=Z,Se=Ce(ue,"w:rPr")[0],Ae={};for(let De in F)Ae[De]=F[De];let de=Se?Ce(Se,"w:rStyle")[0]:null,be=de?de.getAttribute("w:val"):G;if(be&&te[be])for(let De in te[be].formatting)Ae[De]=te[be].formatting[De];if(Se){let De=h(Se);for(let Te in De){let ze=De[Te];ze===!1?delete Ae[Te]:ze!==void 0&&(Ae[Te]=ze)}}!Ae.backgroundColor&&N&&(Ae.backgroundColor=N);let Le=Ce(ue,"w:t");for(let De of Le){let Te=De.textContent||"";le+=Te;let ze={type:"text",text:Te,formatting:Ae};e.includeRawContent&&(ze.rawContent=f.serializeToString(De));let He=be||G||ie;He&&(ze.metadata={style:He}),me.push(ze)}if(e.extractAttachments){let De=Ce(ue,"w:drawing"),Te=Ce(ue,"w:pict"),ze=[...De,...Te];for(let He of ze){let We=f.serializeToString(He),x="",g=Ce(He,"wp:docPr")[0];g&&(x=g.getAttribute("descr")||g.getAttribute("title")||"");let p="",T=Ce(He,"a:blip")[0];if(T)p=T.getAttribute("r:embed")||"";else{let J=Ce(He,"v:imagedata")[0];J&&(p=J.getAttribute("r:id")||"")}if(p&&A[p]){let C=A[p].split("/").pop();if(C){let oe={type:"image",text:"",metadata:{attachmentName:C,altText:x}};e.includeRawContent&&(oe.rawContent=We),me.push(oe)}}else{let J={type:"image",text:""};e.includeRawContent&&(J.rawContent=We),me.push(J)}}}if(!e.ignoreNotes){let De=Ce(ue,"w:footnoteReference")[0];if(De){let ze=De.getAttribute("w:id");if(ze&&v.has(ze)){let He=v.get(ze),We={type:"note",text:He.map(x=>x.text).join(" "),children:He,metadata:{noteType:"footnote",noteId:ze}};e.putNotesAtLast?y.push(We):me.push(We)}}let Te=Ce(ue,"w:endnoteReference")[0];if(Te){let ze=Te.getAttribute("w:id");if(ze&&w.has(ze)){let He=w.get(ze),We={type:"note",text:He.map(x=>x.text).join(" "),children:He,metadata:{noteType:"endnote",noteId:ze}};e.putNotesAtLast?y.push(We):me.push(We)}}}}else if(Z.nodeName==="w:hyperlink"){let ue=Z,Se=ue.getAttribute("r:id"),Ae=ue.getAttribute("w:anchor"),de;Ae?de={link:"#"+Ae,linkType:"internal"}:Se&&A[Se]&&(de={link:A[Se],linkType:"external"});let be=Array.from(ue.childNodes);for(let Le of be){let De=me.length;if(U(Le),de)for(let Te=De;Te<me.length;Te++)me[Te].type==="text"&&(me[Te].metadata={...me[Te].metadata??{},...de})}}},I=Array.from(D.childNodes);for(let Z of I)U(Z);if(L){let Z=Ce(B,"w:numId")[0],ue=Ce(B,"w:ilvl")[0],Se=Z&&Z.getAttribute("w:val")||"0",Ae=ue?parseInt(ue.getAttribute("w:val")||"0"):0,de="ordered",be=0;if(Se&&R[Se]){let De=Ae.toString();fe[Se]||(fe[Se]={}),fe[Se][De]||(fe[Se][De]=0),fe[Se][De]++;for(let ze=Ae+1;ze<10;ze++)fe[Se][ze.toString()]&&(fe[Se][ze.toString()]=0);de=(R[Se][De]?.numFmt||"decimal")==="bullet"?"unordered":"ordered",Ee[Se]||(Ee[Se]={}),Ee[Se][De]===void 0?Ee[Se][De]=0:Ee[Se][De]++,be=Ee[Se][De]}let Le={type:"list",text:le,children:me,metadata:{listType:de,indentation:Ae,alignment:z||"left",listId:Se,itemIndex:be,style:G}};return e.includeRawContent&&(Le.rawContent=ee),Le}else if(ne){let Z=G&&parseInt(G.replace("Heading",""))||1,ue={type:"heading",text:le,children:me,metadata:{level:Z,alignment:z,style:G??void 0}};return e.includeRawContent&&(ue.rawContent=ee),ue}else{let Z={type:"paragraph",text:le,children:me,metadata:{alignment:z,style:G??void 0}};return e.includeRawContent&&(Z.rawContent=ee),Z}},H=D=>{let ee=[],B=En(D,"w:tr");for(let L=0;L<B.length;L++){let $=B[L],M=[],G=En($,"w:tc");for(let se=0;se<G.length;se++){let z=G[se],N=[],F="",le=Array.from(z.childNodes);for(let U of le)if(U.nodeName==="w:p"){let I=ve(U);N.push(I),F+=I.text}else if(U.nodeName==="w:tbl"){let I=H(U);N.push(I)}let me={type:"cell",text:F,children:N,metadata:{row:L,col:se}};M.push(me)}let ne={type:"row",children:M};ee.push(ne)}return{type:"table",children:ee}};if(!e.ignoreNotes){let D=d.find(B=>B.path.match(n));if(D){let B=Ut(D.content.toString()),L=Ce(B,"w:footnote");for(let $ of L){let M=$.getAttribute("w:id");if(!M||M==="-1"||M==="0")continue;let G=Ce($,"w:p");v.set(M,G.map(ne=>ve(ne)))}}let ee=d.find(B=>B.path.match(i));if(ee){let B=Ut(ee.content.toString()),L=Ce(B,"w:endnote");for(let $ of L){let M=$.getAttribute("w:id");if(!M||M==="-1"||M==="0")continue;let G=Ce($,"w:p");w.set(M,G.map(ne=>ve(ne)))}}}for(let D of d){if(D.path.match(s)||D.path.match(o)||D.path.match(u)||D.path.match(c)||D.path.match(n)||D.path.match(i))continue;let ee=D.content.toString();e.includeRawContent&&q.push(ee);let B=Ut(ee),L=Ce(B,"w:body")[0];if(L){let $=Array.from(L.childNodes);for(let M of $)M.nodeName==="w:p"?j.push(ve(M)):M.nodeName==="w:tbl"&&j.push(H(M))}}if(e.extractAttachments){for(let D of E){let ee=Is(D.path.split("/").pop()||"image",D.content);if(_.push(ee),e.ocr&&ee.mimeType.startsWith("image/"))try{ee.ocrText=(await ns(D.content,e.ocrLanguage)).trim()}catch(B){ci(`OCR failed for ${ee.name}:`,e,B)}}if(e.ocr){let D=ee=>{for(let B of ee){if(B.type==="image"&&"attachmentName"in(B.metadata||{})){let L=B.metadata,$=_.find(M=>M.name===L.attachmentName);$&&$.ocrText&&(B.text=$.ocrText,$.altText=L.altText)}B.children&&D(B.children)}};D(j)}}return e.putNotesAtLast&&y.length>0&&j.push(...y),{type:"docx",metadata:{...b,formatting:K,styleMap:te},content:j,attachments:_,toText:()=>j.map(D=>{let ee=B=>{let L="";return B.children?L+=B.children.map(ee).filter($=>$!="").join(B.children[0]?.children?e.newlineDelimiter??`
`:""):L+=B.text||"",L};return ee(D)}).filter(D=>D!="").join(e.newlineDelimiter??`
`)}};var Pf=class{static async parseOffice(e,t,n){let i,o={};typeof t=="function"?(i=t,o=n||{}):o=t||{};let s={ignoreNotes:!1,newlineDelimiter:`
`,putNotesAtLast:!1,outputErrorToConsole:!1,extractAttachments:!1,ocr:!1,ocrLanguage:"eng",includeRawContent:!1,pdfWorkerSrc:"",...o},a=Buffer.alloc(0),u="",c;try{if(!e)throw ia("IMPROPER_ARGUMENTS",s);if(e instanceof ArrayBuffer)a=Buffer.from(e);else if(Buffer.isBuffer(e))a=e;else if(typeof e=="string"){if(c=e,!sb(e))throw ia("FILE_DOES_NOT_EXIST",s,e);if(x2(e).isDirectory())throw ia("LOCATION_NOT_FOUND",s,e);a=S2(e),u=e.split(".").pop()?.toLowerCase()||""}else throw ia("INVALID_INPUT",s);if(!u){let h=await k3.fromBuffer(a);if(h)u=h.ext.toLowerCase();else throw ia("IMPROPER_BUFFERS",s)}let f;switch(u){case"docx":f=await N3(a,s);break;case"pptx":f=await D3(a,s);break;case"xlsx":f=await rB(a,s);break;case"odt":case"odp":case"ods":f=await nB(a,s);break;case"pdf":f=await C3(a,s);break;case"rtf":f=await I3(a,s);break;default:throw ia("EXTENSION_UNSUPPORTED",s,u)}return i&&i(f),f}catch(f){let h=gk(f,s,c);throw i&&i(void 0,h),h}}};var NV=Pf.parseOffice;var kV=Pf;if(typeof xu<"u"&&typeof module<"u"&&xu.main===module){let i=function(o){return o.startsWith("--")&&o.includes("=")};LV=i;let r=process.argv.slice(2),e,t=!1,n=[];if(r.forEach(o=>{i(o)?n.push(o):e||(e=o)}),e){let o={};n.forEach(s=>{let[a,u]=s.split("="),c=a.replace("--","");c==="toText"?u.toLowerCase()==="true"?t=!0:u.toLowerCase()==="false"?t=!1:console.log(`Invalid value for toText: ${u}`):u.toLowerCase()==="true"?o[c]=!0:u.toLowerCase()==="false"?o[c]=!1:o[c]=u}),Pf.parseOffice(e,o).then(s=>{console.log(t?s.toText():JSON.stringify(s,null,2))}).catch(console.error)}else console.log("Usage: node officeparser [file] [--option=value]")}var LV;return Ir(PV);})();
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
@jspm/core/nodelibs/browser/chunk-B738Er4n.js:
ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@jspm/core/nodelibs/browser/chunk-CjPlbOtt.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@jspm/core/nodelibs/browser/chunk-CcCWfKp1.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=officeparser.browser.js.map
