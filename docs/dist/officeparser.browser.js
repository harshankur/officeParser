#!/usr/bin/env node

// Shim for setImmediate
if (typeof setImmediate === 'undefined') {
  window.setImmediate = function(callback) {
    return setTimeout(callback, 0);
  };
}

"use strict";var officeParser=(()=>{var j3=Object.create;var xp=Object.defineProperty;var $3=Object.getOwnPropertyDescriptor;var z3=Object.getOwnPropertyNames;var W3=Object.getPrototypeOf,q3=Object.prototype.hasOwnProperty;var BT=r=>{throw TypeError(r)};var H3=(r,e,t)=>e in r?xp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xu=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var Jt=(r,e)=>()=>(r&&(e=r(r=0)),e);var st=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),jo=(r,e)=>{for(var t in e)xp(r,t,{get:e[t],enumerable:!0})},FT=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of z3(e))!q3.call(r,i)&&i!==t&&xp(r,i,{get:()=>e[i],enumerable:!(n=$3(e,i))||n.enumerable});return r};var es=(r,e,t)=>(t=r!=null?j3(W3(r)):{},FT(e||!r||!r.__esModule?xp(t,"default",{value:r,enumerable:!0}):t,r)),Ir=r=>FT(xp({},"__esModule",{value:!0}),r);var Ke=(r,e,t)=>H3(r,typeof e!="symbol"?e+"":e,t),d_=(r,e,t)=>e.has(r)||BT("Cannot "+t);var l=(r,e,t)=>(d_(r,e,"read from private field"),t?t.call(r):e.get(r)),q=(r,e,t)=>e.has(r)?BT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),k=(r,e,t,n)=>(d_(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),ee=(r,e,t)=>(d_(r,e,"access private method"),t);var tn=(r,e,t,n)=>({set _(i){k(r,e,i,t)},get _(){return l(r,e,n)}});var Ce=Jt(()=>{});var process={};jo(process,{_debugEnd:()=>CC,_debugProcess:()=>TC,_events:()=>WC,_eventsCount:()=>qC,_exiting:()=>aC,_fatalExceptions:()=>EC,_getActiveHandles:()=>fC,_getActiveRequests:()=>cC,_kill:()=>dC,_linkedBinding:()=>sC,_maxListeners:()=>zC,_preload_modules:()=>UC,_rawDebug:()=>nC,_startProfilerIdleNotifier:()=>RC,_stopProfilerIdleNotifier:()=>DC,_tickCallback:()=>SC,abort:()=>kC,addListener:()=>HC,allowedNodeEnvironmentFlags:()=>wC,arch:()=>WT,argv:()=>GT,argv0:()=>FC,assert:()=>vC,binding:()=>ZT,browser:()=>rC,chdir:()=>eC,config:()=>lC,cpuUsage:()=>b0,cwd:()=>QT,debugPort:()=>BC,default:()=>eR,dlopen:()=>uC,domain:()=>oC,emit:()=>KC,emitWarning:()=>KT,env:()=>HT,execArgv:()=>VT,execPath:()=>MC,exit:()=>yC,features:()=>_C,hasUncaughtExceptionCaptureCallback:()=>xC,hrtime:()=>y0,kill:()=>mC,listeners:()=>QC,memoryUsage:()=>gC,moduleLoadList:()=>iC,nextTick:()=>jT,off:()=>VC,on:()=>zo,once:()=>GC,openStdin:()=>bC,pid:()=>LC,platform:()=>qT,ppid:()=>PC,prependListener:()=>ZC,prependOnceListener:()=>JC,reallyExit:()=>hC,release:()=>tC,removeAllListeners:()=>XC,removeListener:()=>YC,resourceUsage:()=>pC,setSourceMapsEnabled:()=>jC,setUncaughtExceptionCaptureCallback:()=>AC,stderr:()=>OC,stdin:()=>NC,stdout:()=>IC,title:()=>zT,umask:()=>JT,uptime:()=>$C,version:()=>YT,versions:()=>XT});function m_(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function G3(){!Bf||!Su||(Bf=!1,Su.length?$o=Su.concat($o):m0=-1,$o.length&&UT())}function UT(){if(!Bf){var r=setTimeout(G3,0);Bf=!0;for(var e=$o.length;e;){for(Su=$o,$o=[];++m0<e;)Su&&Su[m0].run();m0=-1,e=$o.length}Su=null,Bf=!1,clearTimeout(r)}}function jT(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];$o.push(new $T(r,e)),$o.length===1&&!Bf&&setTimeout(UT,0)}function $T(r,e){this.fun=r,this.array=e}function Nn(){}function sC(r){m_("_linkedBinding")}function uC(r){m_("dlopen")}function cC(){return[]}function fC(){return[]}function vC(r,e){if(!r)throw new Error(e||"assertion error")}function xC(){return!1}function $C(){return ol.now()/1e3}function y0(r){var e=Math.floor((Date.now()-ol.now())*.001),t=ol.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=g_)),[n,i]}function zo(){return eR}function QC(r){return[]}var $o,Bf,Su,m0,zT,WT,qT,HT,GT,VT,YT,XT,KT,ZT,JT,QT,eC,tC,rC,nC,iC,oC,aC,lC,hC,dC,b0,pC,gC,mC,yC,bC,wC,_C,EC,AC,SC,TC,CC,RC,DC,IC,OC,NC,kC,LC,PC,MC,BC,FC,UC,jC,ol,p_,g_,zC,WC,qC,HC,GC,VC,YC,XC,KC,ZC,JC,eR,tR=Jt(()=>{Ce();De();Re();$o=[],Bf=!1,m0=-1;$T.prototype.run=function(){this.fun.apply(null,this.array)};zT="browser",WT="x64",qT="browser",HT={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},GT=["/usr/bin/node"],VT=[],YT="v16.8.0",XT={},KT=function(r,e){console.warn((e?e+": ":"")+r)},ZT=function(r){m_("binding")},JT=function(r){return 0},QT=function(){return"/"},eC=function(r){},tC={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};rC=!0,nC=Nn,iC=[];oC={},aC=!1,lC={};hC=Nn,dC=Nn,b0=function(){return{}},pC=b0,gC=b0,mC=Nn,yC=Nn,bC=Nn,wC={};_C={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},EC=Nn,AC=Nn;SC=Nn,TC=Nn,CC=Nn,RC=Nn,DC=Nn,IC=void 0,OC=void 0,NC=void 0,kC=Nn,LC=2,PC=1,MC="/bin/usr/node",BC=9229,FC="node",UC=[],jC=Nn,ol={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};ol.now===void 0&&(p_=Date.now(),ol.timing&&ol.timing.navigationStart&&(p_=ol.timing.navigationStart),ol.now=()=>Date.now()-p_);g_=1e9;y0.bigint=function(r){var e=y0(r);return typeof BigInt>"u"?e[0]*g_+e[1]:BigInt(e[0]*g_)+BigInt(e[1])};zC=10,WC={},qC=0;HC=zo,GC=zo,VC=zo,YC=zo,XC=zo,KC=Nn,ZC=zo,JC=zo;eR={version:YT,versions:XT,arch:WT,platform:qT,browser:rC,release:tC,_rawDebug:nC,moduleLoadList:iC,binding:ZT,_linkedBinding:sC,_events:WC,_eventsCount:qC,_maxListeners:zC,on:zo,addListener:HC,once:GC,off:VC,removeListener:YC,removeAllListeners:XC,emit:KC,prependListener:ZC,prependOnceListener:JC,listeners:QC,domain:oC,_exiting:aC,config:lC,dlopen:uC,uptime:$C,_getActiveRequests:cC,_getActiveHandles:fC,reallyExit:hC,_kill:dC,cpuUsage:b0,resourceUsage:pC,memoryUsage:gC,kill:mC,exit:yC,openStdin:bC,allowedNodeEnvironmentFlags:wC,assert:vC,features:_C,_fatalExceptions:EC,setUncaughtExceptionCaptureCallback:AC,hasUncaughtExceptionCaptureCallback:xC,emitWarning:KT,nextTick:jT,_tickCallback:SC,_debugProcess:TC,_debugEnd:CC,_startProfilerIdleNotifier:RC,_stopProfilerIdleNotifier:DC,stdout:IC,stdin:NC,stderr:OC,abort:kC,umask:JT,chdir:eC,cwd:QT,env:HT,title:zT,argv:GT,execArgv:VT,pid:LC,ppid:PC,execPath:MC,debugPort:BC,hrtime:y0,argv0:FC,_preload_modules:UC,setSourceMapsEnabled:jC}});var Re=Jt(()=>{tR()});function V3(){if(rR)return Sp;rR=!0,Sp.byteLength=a,Sp.toByteArray=c,Sp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=m.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(m){var b=s(m),v=b[0],w=b[1];return(v+w)*3/4-w}function u(m,b,v){return(b+v)*3/4-v}function c(m){var b,v=s(m),w=v[0],y=v[1],_=new t(u(m,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[m.charCodeAt(A)]<<18|e[m.charCodeAt(A+1)]<<12|e[m.charCodeAt(A+2)]<<6|e[m.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[m.charCodeAt(A)]<<2|e[m.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[m.charCodeAt(A)]<<10|e[m.charCodeAt(A+1)]<<4|e[m.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(m[_]<<16&16711680)+(m[_+1]<<8&65280)+(m[_+2]&255),y.push(f(w));return y.join("")}function d(m){for(var b,v=m.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(m,E,E+_>S?S:E+_));return w===1?(b=m[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(m[v-2]<<8)+m[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Sp}function Y3(){if(nR)return w0;nR=!0;return w0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)},w0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128},w0}function fn(){if(iR)return Tu;iR=!0;let r=V3(),e=Y3(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Tu.Buffer=s,Tu.SlowBuffer=y,Tu.INSPECT_MAX_BYTES=50;let n=2147483647;Tu.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let T=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(T,g),T.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(T){if(T>n)throw new RangeError('The value "'+T+'" is invalid for option "size"');let g=new Uint8Array(T);return Object.setPrototypeOf(g,s.prototype),g}function s(T,g,p){if(typeof T=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(T)}return a(T,g,p)}s.poolSize=8192;function a(T,g,p){if(typeof T=="string")return h(T,g);if(ArrayBuffer.isView(T))return m(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(ke(T,ArrayBuffer)||T&&ke(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(T,SharedArrayBuffer)||T&&ke(T.buffer,SharedArrayBuffer)))return b(T,g,p);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let R=T.valueOf&&T.valueOf();if(R!=null&&R!==T)return s.from(R,g,p);let J=v(T);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return s.from(T[Symbol.toPrimitive]("string"),g,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}s.from=function(T,g,p){return a(T,g,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function c(T,g,p){return u(T),T<=0?o(T):g!==void 0?typeof p=="string"?o(T).fill(g,p):o(T).fill(g):o(T)}s.alloc=function(T,g,p){return c(T,g,p)};function f(T){return u(T),o(T<0?0:w(T)|0)}s.allocUnsafe=function(T){return f(T)},s.allocUnsafeSlow=function(T){return f(T)};function h(T,g){if((typeof g!="string"||g==="")&&(g="utf8"),!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);let p=_(T,g)|0,R=o(p),J=R.write(T,g);return J!==p&&(R=R.slice(0,J)),R}function d(T){let g=T.length<0?0:w(T.length)|0,p=o(g);for(let R=0;R<g;R+=1)p[R]=T[R]&255;return p}function m(T){if(ke(T,Uint8Array)){let g=new Uint8Array(T);return b(g.buffer,g.byteOffset,g.byteLength)}return d(T)}function b(T,g,p){if(g<0||T.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<g+(p||0))throw new RangeError('"length" is outside of buffer bounds');let R;return g===void 0&&p===void 0?R=new Uint8Array(T):p===void 0?R=new Uint8Array(T,g):R=new Uint8Array(T,g,p),Object.setPrototypeOf(R,s.prototype),R}function v(T){if(s.isBuffer(T)){let g=w(T.length)|0,p=o(g);return p.length===0||T.copy(p,0,0,g),p}if(T.length!==void 0)return typeof T.length!="number"||Oe(T.length)?o(0):d(T);if(T.type==="Buffer"&&Array.isArray(T.data))return d(T.data)}function w(T){if(T>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return T|0}function y(T){return+T!=T&&(T=0),s.alloc(+T)}s.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==s.prototype},s.compare=function(g,p){if(ke(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),ke(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(g)||!s.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===p)return 0;let R=g.length,J=p.length;for(let D=0,ae=Math.min(R,J);D<ae;++D)if(g[D]!==p[D]){R=g[D],J=p[D];break}return R<J?-1:J<R?1:0},s.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(g,p){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return s.alloc(0);let R;if(p===void 0)for(p=0,R=0;R<g.length;++R)p+=g[R].length;let J=s.allocUnsafe(p),D=0;for(R=0;R<g.length;++R){let ae=g[R];if(ke(ae,Uint8Array))D+ae.length>J.length?(s.isBuffer(ae)||(ae=s.from(ae)),ae.copy(J,D)):Uint8Array.prototype.set.call(J,ae,D);else if(s.isBuffer(ae))ae.copy(J,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=ae.length}return J};function _(T,g){if(s.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||ke(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);let p=T.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&p===0)return 0;let J=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Se(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Ae(T).length;default:if(J)return R?-1:Se(T).length;g=(""+g).toLowerCase(),J=!0}}s.byteLength=_;function E(T,g,p){let R=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,g>>>=0,p<=g))return"";for(T||(T="utf8");;)switch(T){case"hex":return x(this,g,p);case"utf8":case"utf-8":return $(this,g,p);case"ascii":return te(this,g,p);case"latin1":case"binary":return N(this,g,p);case"base64":return L(this,g,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,g,p);default:if(R)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),R=!0}}s.prototype._isBuffer=!0;function S(T,g,p){let R=T[g];T[g]=T[p],T[p]=R}s.prototype.swap16=function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<g;p+=2)S(this,p,p+1);return this},s.prototype.swap32=function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<g;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},s.prototype.swap64=function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<g;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},s.prototype.toString=function(){let g=this.length;return g===0?"":arguments.length===0?$(this,0,g):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(g){if(!s.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:s.compare(this,g)===0},s.prototype.inspect=function(){let g="",p=Tu.INSPECT_MAX_BYTES;return g=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(g+=" ... "),"<Buffer "+g+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(g,p,R,J,D){if(ke(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(p===void 0&&(p=0),R===void 0&&(R=g?g.length:0),J===void 0&&(J=0),D===void 0&&(D=this.length),p<0||R>g.length||J<0||D>this.length)throw new RangeError("out of range index");if(J>=D&&p>=R)return 0;if(J>=D)return-1;if(p>=R)return 1;if(p>>>=0,R>>>=0,J>>>=0,D>>>=0,this===g)return 0;let ae=D-J,fe=R-p,Ee=Math.min(ae,fe),ve=this.slice(J,D),Ie=g.slice(p,R);for(let Y=0;Y<Ee;++Y)if(ve[Y]!==Ie[Y]){ae=ve[Y],fe=Ie[Y];break}return ae<fe?-1:fe<ae?1:0};function A(T,g,p,R,J){if(T.length===0)return-1;if(typeof p=="string"?(R=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Oe(p)&&(p=J?0:T.length-1),p<0&&(p=T.length+p),p>=T.length){if(J)return-1;p=T.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof g=="string"&&(g=s.from(g,R)),s.isBuffer(g))return g.length===0?-1:F(T,g,p,R,J);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(T,g,p):Uint8Array.prototype.lastIndexOf.call(T,g,p):F(T,[g],p,R,J);throw new TypeError("val must be string, number or Buffer")}function F(T,g,p,R,J){let D=1,ae=T.length,fe=g.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(T.length<2||g.length<2)return-1;D=2,ae/=2,fe/=2,p/=2}function Ee(Ie,Y){return D===1?Ie[Y]:Ie.readUInt16BE(Y*D)}let ve;if(J){let Ie=-1;for(ve=p;ve<ae;ve++)if(Ee(T,ve)===Ee(g,Ie===-1?0:ve-Ie)){if(Ie===-1&&(Ie=ve),ve-Ie+1===fe)return Ie*D}else Ie!==-1&&(ve-=ve-Ie),Ie=-1}else for(p+fe>ae&&(p=ae-fe),ve=p;ve>=0;ve--){let Ie=!0;for(let Y=0;Y<fe;Y++)if(Ee(T,ve+Y)!==Ee(g,Y)){Ie=!1;break}if(Ie)return ve}return-1}s.prototype.includes=function(g,p,R){return this.indexOf(g,p,R)!==-1},s.prototype.indexOf=function(g,p,R){return A(this,g,p,R,!0)},s.prototype.lastIndexOf=function(g,p,R){return A(this,g,p,R,!1)};function I(T,g,p,R){p=Number(p)||0;let J=T.length-p;R?(R=Number(R),R>J&&(R=J)):R=J;let D=g.length;R>D/2&&(R=D/2);let ae;for(ae=0;ae<R;++ae){let fe=parseInt(g.substr(ae*2,2),16);if(Oe(fe))return ae;T[p+ae]=fe}return ae}function X(T,g,p,R){return $e(Se(g,T.length-p),T,p,R)}function Z(T,g,p,R){return $e(be(g),T,p,R)}function H(T,g,p,R){return $e(Ae(g),T,p,R)}function ne(T,g,p,R){return $e(pe(g,T.length-p),T,p,R)}s.prototype.write=function(g,p,R,J){if(p===void 0)J="utf8",R=this.length,p=0;else if(R===void 0&&typeof p=="string")J=p,R=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(R)?(R=R>>>0,J===void 0&&(J="utf8")):(J=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let D=this.length-p;if((R===void 0||R>D)&&(R=D),g.length>0&&(R<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let ae=!1;for(;;)switch(J){case"hex":return I(this,g,p,R);case"utf8":case"utf-8":return X(this,g,p,R);case"ascii":case"latin1":case"binary":return Z(this,g,p,R);case"base64":return H(this,g,p,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,g,p,R);default:if(ae)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ae=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(T,g,p){return g===0&&p===T.length?r.fromByteArray(T):r.fromByteArray(T.slice(g,p))}function $(T,g,p){p=Math.min(T.length,p);let R=[],J=g;for(;J<p;){let D=T[J],ae=null,fe=D>239?4:D>223?3:D>191?2:1;if(J+fe<=p){let Ee,ve,Ie,Y;switch(fe){case 1:D<128&&(ae=D);break;case 2:Ee=T[J+1],(Ee&192)===128&&(Y=(D&31)<<6|Ee&63,Y>127&&(ae=Y));break;case 3:Ee=T[J+1],ve=T[J+2],(Ee&192)===128&&(ve&192)===128&&(Y=(D&15)<<12|(Ee&63)<<6|ve&63,Y>2047&&(Y<55296||Y>57343)&&(ae=Y));break;case 4:Ee=T[J+1],ve=T[J+2],Ie=T[J+3],(Ee&192)===128&&(ve&192)===128&&(Ie&192)===128&&(Y=(D&15)<<18|(Ee&63)<<12|(ve&63)<<6|Ie&63,Y>65535&&Y<1114112&&(ae=Y))}}ae===null?(ae=65533,fe=1):ae>65535&&(ae-=65536,R.push(ae>>>10&1023|55296),ae=56320|ae&1023),R.push(ae),J+=fe}return le(R)}let K=4096;function le(T){let g=T.length;if(g<=K)return String.fromCharCode.apply(String,T);let p="",R=0;for(;R<g;)p+=String.fromCharCode.apply(String,T.slice(R,R+=K));return p}function te(T,g,p){let R="";p=Math.min(T.length,p);for(let J=g;J<p;++J)R+=String.fromCharCode(T[J]&127);return R}function N(T,g,p){let R="";p=Math.min(T.length,p);for(let J=g;J<p;++J)R+=String.fromCharCode(T[J]);return R}function x(T,g,p){let R=T.length;(!g||g<0)&&(g=0),(!p||p<0||p>R)&&(p=R);let J="";for(let D=g;D<p;++D)J+=Ve[T[D]];return J}function P(T,g,p){let R=T.slice(g,p),J="";for(let D=0;D<R.length-1;D+=2)J+=String.fromCharCode(R[D]+R[D+1]*256);return J}s.prototype.slice=function(g,p){let R=this.length;g=~~g,p=p===void 0?R:~~p,g<0?(g+=R,g<0&&(g=0)):g>R&&(g=R),p<0?(p+=R,p<0&&(p=0)):p>R&&(p=R),p<g&&(p=g);let J=this.subarray(g,p);return Object.setPrototypeOf(J,s.prototype),J};function C(T,g,p){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+g>p)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g],D=1,ae=0;for(;++ae<p&&(D*=256);)J+=this[g+ae]*D;return J},s.prototype.readUintBE=s.prototype.readUIntBE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g+--p],D=1;for(;p>0&&(D*=256);)J+=this[g+--p]*D;return J},s.prototype.readUint8=s.prototype.readUInt8=function(g,p){return g=g>>>0,p||C(g,1,this.length),this[g]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(g,p){return g=g>>>0,p||C(g,2,this.length),this[g]|this[g+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(g,p){return g=g>>>0,p||C(g,2,this.length),this[g]<<8|this[g+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(g,p){return g=g>>>0,p||C(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},s.prototype.readBigUInt64LE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,D=this[++g]+this[++g]*2**8+this[++g]*2**16+R*2**24;return BigInt(J)+(BigInt(D)<<BigInt(32))}),s.prototype.readBigUInt64BE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=p*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],D=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+R;return(BigInt(J)<<BigInt(32))+BigInt(D)}),s.prototype.readIntLE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g],D=1,ae=0;for(;++ae<p&&(D*=256);)J+=this[g+ae]*D;return D*=128,J>=D&&(J-=Math.pow(2,8*p)),J},s.prototype.readIntBE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=p,D=1,ae=this[g+--J];for(;J>0&&(D*=256);)ae+=this[g+--J]*D;return D*=128,ae>=D&&(ae-=Math.pow(2,8*p)),ae},s.prototype.readInt8=function(g,p){return g=g>>>0,p||C(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},s.prototype.readInt16LE=function(g,p){g=g>>>0,p||C(g,2,this.length);let R=this[g]|this[g+1]<<8;return R&32768?R|4294901760:R},s.prototype.readInt16BE=function(g,p){g=g>>>0,p||C(g,2,this.length);let R=this[g+1]|this[g]<<8;return R&32768?R|4294901760:R},s.prototype.readInt32LE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},s.prototype.readInt32BE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},s.prototype.readBigInt64LE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(R<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),s.prototype.readBigInt64BE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=(p<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(J)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+R)}),s.prototype.readFloatLE=function(g,p){return g=g>>>0,p||C(g,4,this.length),e.read(this,g,!0,23,4)},s.prototype.readFloatBE=function(g,p){return g=g>>>0,p||C(g,4,this.length),e.read(this,g,!1,23,4)},s.prototype.readDoubleLE=function(g,p){return g=g>>>0,p||C(g,8,this.length),e.read(this,g,!0,52,8)},s.prototype.readDoubleBE=function(g,p){return g=g>>>0,p||C(g,8,this.length),e.read(this,g,!1,52,8)};function U(T,g,p,R,J,D){if(!s.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>J||g<D)throw new RangeError('"value" argument is out of bounds');if(p+R>T.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(g,p,R,J){if(g=+g,p=p>>>0,R=R>>>0,!J){let fe=Math.pow(2,8*R)-1;U(this,g,p,R,fe,0)}let D=1,ae=0;for(this[p]=g&255;++ae<R&&(D*=256);)this[p+ae]=g/D&255;return p+R},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(g,p,R,J){if(g=+g,p=p>>>0,R=R>>>0,!J){let fe=Math.pow(2,8*R)-1;U(this,g,p,R,fe,0)}let D=R-1,ae=1;for(this[p+D]=g&255;--D>=0&&(ae*=256);)this[p+D]=g/ae&255;return p+R},s.prototype.writeUint8=s.prototype.writeUInt8=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,1,255,0),this[p]=g&255,p+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,65535,0),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,65535,0),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,4294967295,0),this[p+3]=g>>>24,this[p+2]=g>>>16,this[p+1]=g>>>8,this[p]=g&255,p+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,4294967295,0),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4};function j(T,g,p,R,J){xe(g,R,J,T,p,7);let D=Number(g&BigInt(4294967295));T[p++]=D,D=D>>8,T[p++]=D,D=D>>8,T[p++]=D,D=D>>8,T[p++]=D;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return T[p++]=ae,ae=ae>>8,T[p++]=ae,ae=ae>>8,T[p++]=ae,ae=ae>>8,T[p++]=ae,p}function M(T,g,p,R,J){xe(g,R,J,T,p,7);let D=Number(g&BigInt(4294967295));T[p+7]=D,D=D>>8,T[p+6]=D,D=D>>8,T[p+5]=D,D=D>>8,T[p+4]=D;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return T[p+3]=ae,ae=ae>>8,T[p+2]=ae,ae=ae>>8,T[p+1]=ae,ae=ae>>8,T[p]=ae,p+8}s.prototype.writeBigUInt64LE=Je(function(g,p=0){return j(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Je(function(g,p=0){return M(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(g,p,R,J){if(g=+g,p=p>>>0,!J){let Ee=Math.pow(2,8*R-1);U(this,g,p,R,Ee-1,-Ee)}let D=0,ae=1,fe=0;for(this[p]=g&255;++D<R&&(ae*=256);)g<0&&fe===0&&this[p+D-1]!==0&&(fe=1),this[p+D]=(g/ae>>0)-fe&255;return p+R},s.prototype.writeIntBE=function(g,p,R,J){if(g=+g,p=p>>>0,!J){let Ee=Math.pow(2,8*R-1);U(this,g,p,R,Ee-1,-Ee)}let D=R-1,ae=1,fe=0;for(this[p+D]=g&255;--D>=0&&(ae*=256);)g<0&&fe===0&&this[p+D+1]!==0&&(fe=1),this[p+D]=(g/ae>>0)-fe&255;return p+R},s.prototype.writeInt8=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,1,127,-128),g<0&&(g=255+g+1),this[p]=g&255,p+1},s.prototype.writeInt16LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,32767,-32768),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeInt16BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,32767,-32768),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeInt32LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,2147483647,-2147483648),this[p]=g&255,this[p+1]=g>>>8,this[p+2]=g>>>16,this[p+3]=g>>>24,p+4},s.prototype.writeInt32BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4},s.prototype.writeBigInt64LE=Je(function(g,p=0){return j(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Je(function(g,p=0){return M(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(T,g,p,R,J,D){if(p+R>T.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ce(T,g,p,R,J){return g=+g,p=p>>>0,J||Q(T,g,p,4),e.write(T,g,p,R,23,4),p+4}s.prototype.writeFloatLE=function(g,p,R){return ce(this,g,p,!0,R)},s.prototype.writeFloatBE=function(g,p,R){return ce(this,g,p,!1,R)};function _e(T,g,p,R,J){return g=+g,p=p>>>0,J||Q(T,g,p,8),e.write(T,g,p,R,52,8),p+8}s.prototype.writeDoubleLE=function(g,p,R){return _e(this,g,p,!0,R)},s.prototype.writeDoubleBE=function(g,p,R){return _e(this,g,p,!1,R)},s.prototype.copy=function(g,p,R,J){if(!s.isBuffer(g))throw new TypeError("argument should be a Buffer");if(R||(R=0),!J&&J!==0&&(J=this.length),p>=g.length&&(p=g.length),p||(p=0),J>0&&J<R&&(J=R),J===R||g.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),g.length-p<J-R&&(J=g.length-p+R);let D=J-R;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,R,J):Uint8Array.prototype.set.call(g,this.subarray(R,J),p),D},s.prototype.fill=function(g,p,R,J){if(typeof g=="string"){if(typeof p=="string"?(J=p,p=0,R=this.length):typeof R=="string"&&(J=R,R=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!s.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(g.length===1){let ae=g.charCodeAt(0);(J==="utf8"&&ae<128||J==="latin1")&&(g=ae)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(p<0||this.length<p||this.length<R)throw new RangeError("Out of range index");if(R<=p)return this;p=p>>>0,R=R===void 0?this.length:R>>>0,g||(g=0);let D;if(typeof g=="number")for(D=p;D<R;++D)this[D]=g;else{let ae=s.isBuffer(g)?g:s.from(g,J),fe=ae.length;if(fe===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(D=0;D<R-p;++D)this[D+p]=ae[D%fe]}return this};let re={};function W(T,g,p){re[T]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(T,g){return`The "${T}" argument must be of type number. Received type ${typeof g}`},TypeError),W("ERR_OUT_OF_RANGE",function(T,g,p){let R=`The value of "${T}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=oe(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=oe(J)),J+="n"),R+=` It must be ${g}. Received ${J}`,R},RangeError);function oe(T){let g="",p=T.length,R=T[0]==="-"?1:0;for(;p>=R+4;p-=3)g=`_${T.slice(p-3,p)}${g}`;return`${T.slice(0,p)}${g}`}function we(T,g,p){V(g,"offset"),(T[g]===void 0||T[g+p]===void 0)&&B(g,T.length-(p+1))}function xe(T,g,p,R,J,D){if(T>p||T<g){let ae=typeof g=="bigint"?"n":"",fe;throw g===0||g===BigInt(0)?fe=`>= 0${ae} and < 2${ae} ** ${(D+1)*8}${ae}`:fe=`>= -(2${ae} ** ${(D+1)*8-1}${ae}) and < 2 ** ${(D+1)*8-1}${ae}`,new re.ERR_OUT_OF_RANGE("value",fe,T)}we(R,J,D)}function V(T,g){if(typeof T!="number")throw new re.ERR_INVALID_ARG_TYPE(g,"number",T)}function B(T,g,p){throw Math.floor(T)!==T?(V(T,p),new re.ERR_OUT_OF_RANGE("offset","an integer",T)):g<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,T)}let se=/[^+/0-9A-Za-z-_]/g;function ge(T){if(T=T.split("=")[0],T=T.trim().replace(se,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function Se(T,g){g=g||1/0;let p,R=T.length,J=null,D=[];for(let ae=0;ae<R;++ae){if(p=T.charCodeAt(ae),p>55295&&p<57344){if(!J){if(p>56319){(g-=3)>-1&&D.push(239,191,189);continue}else if(ae+1===R){(g-=3)>-1&&D.push(239,191,189);continue}J=p;continue}if(p<56320){(g-=3)>-1&&D.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(g-=3)>-1&&D.push(239,191,189);if(J=null,p<128){if((g-=1)<0)break;D.push(p)}else if(p<2048){if((g-=2)<0)break;D.push(p>>6|192,p&63|128)}else if(p<65536){if((g-=3)<0)break;D.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((g-=4)<0)break;D.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return D}function be(T){let g=[];for(let p=0;p<T.length;++p)g.push(T.charCodeAt(p)&255);return g}function pe(T,g){let p,R,J,D=[];for(let ae=0;ae<T.length&&!((g-=2)<0);++ae)p=T.charCodeAt(ae),R=p>>8,J=p%256,D.push(J),D.push(R);return D}function Ae(T){return r.toByteArray(ge(T))}function $e(T,g,p,R){let J;for(J=0;J<R&&!(J+p>=g.length||J>=T.length);++J)g[J+p]=T[J];return J}function ke(T,g){return T instanceof g||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===g.name}function Oe(T){return T!==T}let Ve=(function(){let T="0123456789abcdef",g=new Array(256);for(let p=0;p<16;++p){let R=p*16;for(let J=0;J<16;++J)g[R+J]=T[p]+T[J]}return g})();function Je(T){return typeof BigInt>"u"?tt:T}function tt(){throw new Error("BigInt not supported")}return Tu}var Sp,rR,w0,nR,Tu,iR,Ff=Jt(()=>{Ce();De();Re();Sp={},rR=!1;w0={},nR=!1;Tu={},iR=!1});var Uf={};jo(Uf,{Buffer:()=>Buffer,INSPECT_MAX_BYTES:()=>X3,default:()=>al,kMaxLength:()=>K3});var al,Buffer,X3,K3,ll=Jt(()=>{Ce();De();Re();Ff();al=fn();al.Buffer;al.SlowBuffer;al.INSPECT_MAX_BYTES;al.kMaxLength;Buffer=al.Buffer,X3=al.INSPECT_MAX_BYTES,K3=al.kMaxLength});var De=Jt(()=>{ll()});function __(){throw new Error("setTimeout has not been defined")}function E_(){throw new Error("clearTimeout has not been defined")}function bR(r){if(qo===setTimeout)return setTimeout(r,0);if((qo===__||!qo)&&setTimeout)return qo=setTimeout,setTimeout(r,0);try{return qo(r,0)}catch{try{return qo.call(null,r,0)}catch{return qo.call(this||$f,r,0)}}}function Z3(){jf&&Ru&&(jf=!1,Ru.length?Go=Ru.concat(Go):S0=-1,Go.length&&wR())}function wR(){if(!jf){var r=bR(Z3);jf=!0;for(var e=Go.length;e;){for(Ru=Go,Go=[];++S0<e;)Ru&&Ru[S0].run();S0=-1,e=Go.length}Ru=null,jf=!1,(function(t){if(Ho===clearTimeout)return clearTimeout(t);if((Ho===E_||!Ho)&&clearTimeout)return Ho=clearTimeout,clearTimeout(t);try{Ho(t)}catch{try{return Ho.call(null,t)}catch{return Ho.call(this||$f,t)}}})(r)}}function sR(r,e){(this||$f).fun=r,(this||$f).array=e}function Wo(){}function Iu(r){return r.call.bind(r)}function Dp(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}function aR(r){return ri&&Ei?ts(r)!==void 0:SR(r)||TR(r)||CR(r)||RR(r)||DR(r)||IR(r)||OR(r)||NR(r)||kR(r)||LR(r)||PR(r)}function SR(r){return ri&&Ei?ts(r)==="Uint8Array":xr(r)==="[object Uint8Array]"||a6(r)&&r.buffer!==void 0}function TR(r){return ri&&Ei?ts(r)==="Uint8ClampedArray":xr(r)==="[object Uint8ClampedArray]"}function CR(r){return ri&&Ei?ts(r)==="Uint16Array":xr(r)==="[object Uint16Array]"}function RR(r){return ri&&Ei?ts(r)==="Uint32Array":xr(r)==="[object Uint32Array]"}function DR(r){return ri&&Ei?ts(r)==="Int8Array":xr(r)==="[object Int8Array]"}function IR(r){return ri&&Ei?ts(r)==="Int16Array":xr(r)==="[object Int16Array]"}function OR(r){return ri&&Ei?ts(r)==="Int32Array":xr(r)==="[object Int32Array]"}function NR(r){return ri&&Ei?ts(r)==="Float32Array":xr(r)==="[object Float32Array]"}function kR(r){return ri&&Ei?ts(r)==="Float64Array":xr(r)==="[object Float64Array]"}function LR(r){return ri&&Ei?ts(r)==="BigInt64Array":xr(r)==="[object BigInt64Array]"}function PR(r){return ri&&Ei?ts(r)==="BigUint64Array":xr(r)==="[object BigUint64Array]"}function v0(r){return xr(r)==="[object Map]"}function _0(r){return xr(r)==="[object Set]"}function E0(r){return xr(r)==="[object WeakMap]"}function y_(r){return xr(r)==="[object WeakSet]"}function C0(r){return xr(r)==="[object ArrayBuffer]"}function lR(r){return typeof ArrayBuffer<"u"&&(C0.working?C0(r):r instanceof ArrayBuffer)}function R0(r){return xr(r)==="[object DataView]"}function uR(r){return typeof DataView<"u"&&(R0.working?R0(r):r instanceof DataView)}function D0(r){return xr(r)==="[object SharedArrayBuffer]"}function cR(r){return typeof SharedArrayBuffer<"u"&&(D0.working?D0(r):r instanceof SharedArrayBuffer)}function fR(r){return Dp(r,h6)}function hR(r){return Dp(r,d6)}function dR(r){return Dp(r,p6)}function pR(r){return xR&&Dp(r,g6)}function gR(r){return x_&&Dp(r,m6)}function ul(r,e){var t={seen:[],stylize:w6};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),S_(e)?t.showHidden=e:e&&ze._extend(t,e),Du(t.showHidden)&&(t.showHidden=!1),Du(t.depth)&&(t.depth=2),Du(t.colors)&&(t.colors=!1),Du(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=b6),I0(t,r,t.depth)}function b6(r,e){var t=ul.styles[e];return t?"\x1B["+ul.colors[t][0]+"m"+r+"\x1B["+ul.colors[t][1]+"m":r}function w6(r,e){return r}function I0(r,e,t){if(r.customInspect&&e&&T0(e.inspect)&&e.inspect!==ze.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(t,r);return O0(n)||(n=I0(r,n,t)),n}var i=(function(d,m){if(Du(m))return d.stylize("undefined","undefined");if(O0(m)){var b="'"+JSON.stringify(m).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(b,"string")}if(FR(m))return d.stylize(""+m,"number");if(S_(m))return d.stylize(""+m,"boolean");if(L0(m))return d.stylize("null","null")})(r,e);if(i)return i;var o=Object.keys(e),s=(function(d){var m={};return d.forEach((function(b,v){m[b]=!0})),m})(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),Rp(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return b_(e);if(o.length===0){if(T0(e)){var a=e.name?": "+e.name:"";return r.stylize("[Function"+a+"]","special")}if(Cp(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(N0(e))return r.stylize(Date.prototype.toString.call(e),"date");if(Rp(e))return b_(e)}var u,c="",f=!1,h=["{","}"];return BR(e)&&(f=!0,h=["[","]"]),T0(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),Cp(e)&&(c=" "+RegExp.prototype.toString.call(e)),N0(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Rp(e)&&(c=" "+b_(e)),o.length!==0||f&&e.length!=0?t<0?Cp(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special"):(r.seen.push(e),u=f?(function(d,m,b,v,w){for(var y=[],_=0,E=m.length;_<E;++_)UR(m,String(_))?y.push(w_(d,m,b,v,String(_),!0)):y.push("");return w.forEach((function(S){S.match(/^\d+$/)||y.push(w_(d,m,b,v,S,!0))})),y})(r,e,t,s,o):o.map((function(d){return w_(r,e,t,s,d,f)})),r.seen.pop(),(function(d,m,b){var v=0;return d.reduce((function(w,y){return v++,y.indexOf(`
`)>=0&&v++,w+y.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?b[0]+(m===""?"":m+`
 `)+" "+d.join(`,
  `)+" "+b[1]:b[0]+m+" "+d.join(", ")+" "+b[1]})(u,c,h)):h[0]+c+h[1]}function b_(r){return"["+Error.prototype.toString.call(r)+"]"}function w_(r,e,t,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):u.set&&(a=r.stylize("[Setter]","special")),UR(n,i)||(s="["+i+"]"),a||(r.seen.indexOf(u.value)<0?(a=L0(t)?I0(r,u.value,null):I0(r,u.value,t-1)).indexOf(`
`)>-1&&(a=o?a.split(`
`).map((function(c){return"  "+c})).join(`
`).substr(2):`
`+a.split(`
`).map((function(c){return"   "+c})).join(`
`)):a=r.stylize("[Circular]","special")),Du(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+a}function BR(r){return Array.isArray(r)}function S_(r){return typeof r=="boolean"}function L0(r){return r===null}function FR(r){return typeof r=="number"}function O0(r){return typeof r=="string"}function Du(r){return r===void 0}function Cp(r){return zf(r)&&T_(r)==="[object RegExp]"}function zf(r){return typeof r=="object"&&r!==null}function N0(r){return zf(r)&&T_(r)==="[object Date]"}function Rp(r){return zf(r)&&(T_(r)==="[object Error]"||r instanceof Error)}function T0(r){return typeof r=="function"}function T_(r){return Object.prototype.toString.call(r)}function v_(r){return r<10?"0"+r.toString(10):r.toString(10)}function _6(){var r=new Date,e=[v_(r.getHours()),v_(r.getMinutes()),v_(r.getSeconds())].join(":");return[r.getDate(),v6[r.getMonth()],e].join(" ")}function UR(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function E6(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}var yR,qo,Ho,$f,$r,Ru,Go,jf,S0,lr,J3,A_,k0,vR,Q3,e6,t6,r6,n6,_R,ER,oR,i6,s6,o6,AR,kt,a6,l6,u6,xR,x_,Ei,ri,c6,xr,h6,d6,p6,Tp,ze,Qs,mR,y6,A0,MR,x0,v6,Cu,nY,cl=Jt(()=>{Ce();De();Re();$f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,$r=yR={};(function(){try{qo=typeof setTimeout=="function"?setTimeout:__}catch{qo=__}try{Ho=typeof clearTimeout=="function"?clearTimeout:E_}catch{Ho=E_}})();Go=[],jf=!1,S0=-1;$r.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Go.push(new sR(r,e)),Go.length!==1||jf||bR(wR)},sR.prototype.run=function(){(this||$f).fun.apply(null,(this||$f).array)},$r.title="browser",$r.browser=!0,$r.env={},$r.argv=[],$r.version="",$r.versions={},$r.on=Wo,$r.addListener=Wo,$r.once=Wo,$r.off=Wo,$r.removeListener=Wo,$r.removeAllListeners=Wo,$r.emit=Wo,$r.prependListener=Wo,$r.prependOnceListener=Wo,$r.listeners=function(r){return[]},$r.binding=function(r){throw new Error("process.binding is not supported")},$r.cwd=function(){return"/"},$r.chdir=function(r){throw new Error("process.chdir is not supported")},$r.umask=function(){return 0};lr=yR;lr.addListener;lr.argv;lr.binding;lr.browser;lr.chdir;lr.cwd;lr.emit;lr.env;lr.listeners;lr.nextTick;lr.off;lr.on;lr.once;lr.prependListener;lr.prependOnceListener;lr.removeAllListeners;lr.removeListener;lr.title;lr.umask;lr.version;lr.versions;J3=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",A_=Object.prototype.toString,k0=function(r){return!(J3&&r&&typeof r=="object"&&Symbol.toStringTag in r)&&A_.call(r)==="[object Arguments]"},vR=function(r){return!!k0(r)||r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&A_.call(r)!=="[object Array]"&&A_.call(r.callee)==="[object Function]"},Q3=(function(){return k0(arguments)})();k0.isLegacyArguments=vR;e6=Q3?k0:vR,t6=Object.prototype.toString,r6=Function.prototype.toString,n6=/^\s*(?:function)?\*/,_R=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ER=Object.getPrototypeOf,oR=(function(){if(!_R)return!1;try{return Function("return function*() {}")()}catch{}})(),i6=oR?ER(oR):{},s6=function(r){return typeof r=="function"&&(!!n6.test(r6.call(r))||(_R?ER(r)===i6:t6.call(r)==="[object GeneratorFunction]"))},o6=typeof Object.create=="function"?function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}},AR=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"},kt={},a6=AR,l6=e6,u6=s6;xR=typeof BigInt<"u",x_=typeof Symbol<"u",Ei=x_&&Symbol.toStringTag!==void 0,ri=typeof Uint8Array<"u",c6=typeof ArrayBuffer<"u";if(ri&&Ei)var f6=Object.getPrototypeOf(Uint8Array.prototype),ts=Iu(Object.getOwnPropertyDescriptor(f6,Symbol.toStringTag).get);xr=Iu(Object.prototype.toString),h6=Iu(Number.prototype.valueOf),d6=Iu(String.prototype.valueOf),p6=Iu(Boolean.prototype.valueOf);if(xR)var g6=Iu(BigInt.prototype.valueOf);if(x_)var m6=Iu(Symbol.prototype.valueOf);kt.isArgumentsObject=l6,kt.isGeneratorFunction=u6,kt.isPromise=function(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"},kt.isArrayBufferView=function(r){return c6&&ArrayBuffer.isView?ArrayBuffer.isView(r):aR(r)||uR(r)},kt.isTypedArray=aR,kt.isUint8Array=SR,kt.isUint8ClampedArray=TR,kt.isUint16Array=CR,kt.isUint32Array=RR,kt.isInt8Array=DR,kt.isInt16Array=IR,kt.isInt32Array=OR,kt.isFloat32Array=NR,kt.isFloat64Array=kR,kt.isBigInt64Array=LR,kt.isBigUint64Array=PR,v0.working=typeof Map<"u"&&v0(new Map),kt.isMap=function(r){return typeof Map<"u"&&(v0.working?v0(r):r instanceof Map)},_0.working=typeof Set<"u"&&_0(new Set),kt.isSet=function(r){return typeof Set<"u"&&(_0.working?_0(r):r instanceof Set)},E0.working=typeof WeakMap<"u"&&E0(new WeakMap),kt.isWeakMap=function(r){return typeof WeakMap<"u"&&(E0.working?E0(r):r instanceof WeakMap)},y_.working=typeof WeakSet<"u"&&y_(new WeakSet),kt.isWeakSet=function(r){return y_(r)},C0.working=typeof ArrayBuffer<"u"&&C0(new ArrayBuffer),kt.isArrayBuffer=lR,R0.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R0(new DataView(new ArrayBuffer(1),0,1)),kt.isDataView=uR,D0.working=typeof SharedArrayBuffer<"u"&&D0(new SharedArrayBuffer),kt.isSharedArrayBuffer=cR,kt.isAsyncFunction=function(r){return xr(r)==="[object AsyncFunction]"},kt.isMapIterator=function(r){return xr(r)==="[object Map Iterator]"},kt.isSetIterator=function(r){return xr(r)==="[object Set Iterator]"},kt.isGeneratorObject=function(r){return xr(r)==="[object Generator]"},kt.isWebAssemblyCompiledModule=function(r){return xr(r)==="[object WebAssembly.Module]"},kt.isNumberObject=fR,kt.isStringObject=hR,kt.isBooleanObject=dR,kt.isBigIntObject=pR,kt.isSymbolObject=gR,kt.isBoxedPrimitive=function(r){return fR(r)||hR(r)||dR(r)||pR(r)||gR(r)},kt.isAnyArrayBuffer=function(r){return ri&&(lR(r)||cR(r))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(r){Object.defineProperty(kt,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})}));Tp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,ze={},Qs=lr,mR=Object.getOwnPropertyDescriptors||function(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++)t[e[n]]=Object.getOwnPropertyDescriptor(r,e[n]);return t},y6=/%[sdj%]/g;ze.format=function(r){if(!O0(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(ul(arguments[t]));return e.join(" ")}t=1;for(var n=arguments,i=n.length,o=String(r).replace(y6,(function(a){if(a==="%%")return"%";if(t>=i)return a;switch(a){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return a}})),s=n[t];t<i;s=n[++t])L0(s)||!zf(s)?o+=" "+s:o+=" "+ul(s);return o},ze.deprecate=function(r,e){if(Qs!==void 0&&Qs.noDeprecation===!0)return r;if(Qs===void 0)return function(){return ze.deprecate(r,e).apply(this||Tp,arguments)};var t=!1;return function(){if(!t){if(Qs.throwDeprecation)throw new Error(e);Qs.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this||Tp,arguments)}};A0={},MR=/^$/;Qs.env.NODE_DEBUG&&(x0=Qs.env.NODE_DEBUG,x0=x0.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),MR=new RegExp("^"+x0+"$","i"));ze.debuglog=function(r){if(r=r.toUpperCase(),!A0[r])if(MR.test(r)){var e=Qs.pid;A0[r]=function(){var t=ze.format.apply(ze,arguments);console.error("%s %d: %s",r,e,t)}}else A0[r]=function(){};return A0[r]},ze.inspect=ul,ul.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ul.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ze.types=kt,ze.isArray=BR,ze.isBoolean=S_,ze.isNull=L0,ze.isNullOrUndefined=function(r){return r==null},ze.isNumber=FR,ze.isString=O0,ze.isSymbol=function(r){return typeof r=="symbol"},ze.isUndefined=Du,ze.isRegExp=Cp,ze.types.isRegExp=Cp,ze.isObject=zf,ze.isDate=N0,ze.types.isDate=N0,ze.isError=Rp,ze.types.isNativeError=Rp,ze.isFunction=T0,ze.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},ze.isBuffer=AR;v6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];ze.log=function(){console.log("%s - %s",_6(),ze.format.apply(ze,arguments))},ze.inherits=o6,ze._extend=function(r,e){if(!e||!zf(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};Cu=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;ze.promisify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');if(Cu&&r[Cu]){var e;if(typeof(e=r[Cu])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,Cu,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var t,n,i=new Promise((function(a,u){t=a,n=u})),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push((function(a,u){a?n(a):t(u)}));try{r.apply(this||Tp,o)}catch(a){n(a)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Cu&&Object.defineProperty(e,Cu,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,mR(r))},ze.promisify.custom=Cu,ze.callbackify=function(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this||Tp,s=function(){return i.apply(o,arguments)};r.apply(this||Tp,t).then((function(a){Qs.nextTick(s.bind(null,null,a))}),(function(a){Qs.nextTick(E6.bind(null,a,s))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,mR(r)),e};ze._extend;ze.callbackify;ze.debuglog;ze.deprecate;ze.format;ze.inherits;ze.inspect;ze.isArray;ze.isBoolean;ze.isBuffer;ze.isDate;ze.isError;ze.isFunction;ze.isNull;ze.isNullOrUndefined;ze.isNumber;ze.isObject;ze.isPrimitive;ze.isRegExp;ze.isString;ze.isSymbol;ze.isUndefined;ze.log;ze.promisify;ze._extend;ze.callbackify;ze.debuglog;ze.deprecate;ze.format;ze.inherits;ze.inspect;ze.isArray;ze.isBoolean;ze.isBuffer;ze.isDate;ze.isError;ze.isFunction;ze.isNull;ze.isNullOrUndefined;ze.isNumber;ze.isObject;ze.isPrimitive;ze.isRegExp;ze.isString;ze.isSymbol;ze.isUndefined;ze.log;nY=ze.promisify;ze.types});function jR(r,e){if(r==null)throw new TypeError("Cannot convert first argument to object");for(var t=Object(r),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var u=o[s],c=Object.getOwnPropertyDescriptor(i,u);c!==void 0&&c.enumerable&&(t[u]=i[u])}}return t}function ID(){if(QR)return k_;function r(c){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function e(c,f){return!f||r(f)!=="object"&&typeof f!="function"?(function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h})(c):f}function t(c){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(c)}function n(c,f){return(n=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h})(c,f)}QR=!0;var i,o,s={};function a(c,f,h){h||(h=Error);var d=(function(m){function b(v,w,y){var _;return(function(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")})(this,b),(_=e(this,t(b).call(this,(function(E,S,A){return typeof f=="string"?f:f(E,S,A)})(v,w,y)))).code=c,_}return(function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),w&&n(v,w)})(b,m),b})(h);s[c]=d}function u(c,f){if(Array.isArray(c)){var h=c.length;return c=c.map((function(d){return String(d)})),h>2?"one of ".concat(f," ").concat(c.slice(0,h-1).join(", "),", or ")+c[h-1]:h===2?"one of ".concat(f," ").concat(c[0]," or ").concat(c[1]):"of ".concat(f," ").concat(c[0])}return"of ".concat(f," ").concat(String(c))}return a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",(function(c,f,h){var d,m,b;if(i===void 0&&(i=U_()),i(typeof c=="string","'name' must be a string"),typeof f=="string"&&(m="not ",f.substr(0,m.length)===m)?(d="must not be",f=f.replace(/^not /,"")):d="must be",(function(w,y,_){return(_===void 0||_>w.length)&&(_=w.length),w.substring(_-y.length,_)===y})(c," argument"))b="The ".concat(c," ").concat(d," ").concat(u(f,"type"));else{var v=(function(w,y,_){return typeof _!="number"&&(_=0),!(_+y.length>w.length)&&w.indexOf(y,_)!==-1})(c,".")?"property":"argument";b='The "'.concat(c,'" ').concat(v," ").concat(d," ").concat(u(f,"type"))}return b+=". Received type ".concat(r(h))}),TypeError),a("ERR_INVALID_ARG_VALUE",(function(c,f){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";o===void 0&&(o=ze);var d=o.inspect(f);return d.length>128&&(d="".concat(d.slice(0,128),"...")),"The argument '".concat(c,"' ").concat(h,". Received ").concat(d)}),TypeError),a("ERR_INVALID_RETURN_VALUE",(function(c,f,h){var d;return d=h&&h.constructor&&h.constructor.name?"instance of ".concat(h.constructor.name):"type ".concat(r(h)),"Expected ".concat(c,' to be returned from the "').concat(f,'"')+" function but got ".concat(d,".")}),TypeError),a("ERR_MISSING_ARGS",(function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];i===void 0&&(i=U_()),i(f.length>0,"At least one arg needs to be specified");var d="The ",m=f.length;switch(f=f.map((function(b){return'"'.concat(b,'"')})),m){case 1:d+="".concat(f[0]," argument");break;case 2:d+="".concat(f[0]," and ").concat(f[1]," arguments");break;default:d+=f.slice(0,m-1).join(", "),d+=", and ".concat(f[m-1]," arguments")}return"".concat(d," must be specified")}),TypeError),k_.codes=s,k_}function a8(){if(tD)return eD;tD=!0;var r=lr;function e(I,X,Z){return X in I?Object.defineProperty(I,X,{value:Z,enumerable:!0,configurable:!0,writable:!0}):I[X]=Z,I}function t(I,X){for(var Z=0;Z<X.length;Z++){var H=X[Z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(I,H.key,H)}}function n(I,X){return!X||f(X)!=="object"&&typeof X!="function"?i(I):X}function i(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function o(I){var X=typeof Map=="function"?new Map:void 0;return(o=function(Z){if(Z===null||(H=Z,Function.toString.call(H).indexOf("[native code]")===-1))return Z;var H;if(typeof Z!="function")throw new TypeError("Super expression must either be null or a function");if(X!==void 0){if(X.has(Z))return X.get(Z);X.set(Z,ne)}function ne(){return a(Z,arguments,c(this).constructor)}return ne.prototype=Object.create(Z.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),u(ne,Z)})(I)}function s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function a(I,X,Z){return(a=s()?Reflect.construct:function(H,ne,L){var $=[null];$.push.apply($,ne);var K=new(Function.bind.apply(H,$));return L&&u(K,L.prototype),K}).apply(null,arguments)}function u(I,X){return(u=Object.setPrototypeOf||function(Z,H){return Z.__proto__=H,Z})(I,X)}function c(I){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)})(I)}function f(I){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(I)}var h=ze.inspect,d=ID().codes.ERR_INVALID_ARG_TYPE;function m(I,X,Z){return(Z===void 0||Z>I.length)&&(Z=I.length),I.substring(Z-X.length,Z)===X}var b="",v="",w="",y="",_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function E(I){var X=Object.keys(I),Z=Object.create(Object.getPrototypeOf(I));return X.forEach((function(H){Z[H]=I[H]})),Object.defineProperty(Z,"message",{value:I.message}),Z}function S(I){return h(I,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function A(I,X,Z){var H="",ne="",L=0,$="",K=!1,le=S(I),te=le.split(`
`),N=S(X).split(`
`),x=0,P="";if(Z==="strictEqual"&&f(I)==="object"&&f(X)==="object"&&I!==null&&X!==null&&(Z="strictEqualObject"),te.length===1&&N.length===1&&te[0]!==N[0]){var C=te[0].length+N[0].length;if(C<=10){if(!(f(I)==="object"&&I!==null||f(X)==="object"&&X!==null||I===0&&X===0))return"".concat(_[Z],`

`)+"".concat(te[0]," !== ").concat(N[0],`
`)}else if(Z!=="strictEqualObject"&&C<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;te[0][x]===N[0][x];)x++;x>2&&(P=`
  `.concat((function(V,B){if(B=Math.floor(B),V.length==0||B==0)return"";var se=V.length*B;for(B=Math.floor(Math.log(B)/Math.log(2));B;)V+=V,B--;return V+=V.substring(0,se-V.length)})(" ",x),"^"),x=0)}}for(var U=te[te.length-1],j=N[N.length-1];U===j&&(x++<2?$=`
  `.concat(U).concat($):H=U,te.pop(),N.pop(),te.length!==0&&N.length!==0);)U=te[te.length-1],j=N[N.length-1];var M=Math.max(te.length,N.length);if(M===0){var Q=le.split(`
`);if(Q.length>30)for(Q[26]="".concat(b,"...").concat(y);Q.length>27;)Q.pop();return"".concat(_.notIdentical,`

`).concat(Q.join(`
`),`
`)}x>3&&($=`
`.concat(b,"...").concat(y).concat($),K=!0),H!==""&&($=`
  `.concat(H).concat($),H="");var ce=0,_e=_[Z]+`
`.concat(v,"+ actual").concat(y," ").concat(w,"- expected").concat(y),re=" ".concat(b,"...").concat(y," Lines skipped");for(x=0;x<M;x++){var W=x-L;if(te.length<x+1)W>1&&x>2&&(W>4?(ne+=`
`.concat(b,"...").concat(y),K=!0):W>3&&(ne+=`
  `.concat(N[x-2]),ce++),ne+=`
  `.concat(N[x-1]),ce++),L=x,H+=`
`.concat(w,"-").concat(y," ").concat(N[x]),ce++;else if(N.length<x+1)W>1&&x>2&&(W>4?(ne+=`
`.concat(b,"...").concat(y),K=!0):W>3&&(ne+=`
  `.concat(te[x-2]),ce++),ne+=`
  `.concat(te[x-1]),ce++),L=x,ne+=`
`.concat(v,"+").concat(y," ").concat(te[x]),ce++;else{var oe=N[x],we=te[x],xe=we!==oe&&(!m(we,",")||we.slice(0,-1)!==oe);xe&&m(oe,",")&&oe.slice(0,-1)===we&&(xe=!1,we+=","),xe?(W>1&&x>2&&(W>4?(ne+=`
`.concat(b,"...").concat(y),K=!0):W>3&&(ne+=`
  `.concat(te[x-2]),ce++),ne+=`
  `.concat(te[x-1]),ce++),L=x,ne+=`
`.concat(v,"+").concat(y," ").concat(we),H+=`
`.concat(w,"-").concat(y," ").concat(oe),ce+=2):(ne+=H,H="",W!==1&&x!==0||(ne+=`
  `.concat(we),ce++))}if(ce>20&&x<M-2)return"".concat(_e).concat(re,`
`).concat(ne,`
`).concat(b,"...").concat(y).concat(H,`
`)+"".concat(b,"...").concat(y)}return"".concat(_e).concat(K?re:"",`
`).concat(ne).concat(H).concat($).concat(P)}var F=(function(I){function X(ne){var L;if((function(Q,ce){if(!(Q instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,X),f(ne)!=="object"||ne===null)throw new d("options","Object",ne);var $=ne.message,K=ne.operator,le=ne.stackStartFn,te=ne.actual,N=ne.expected,x=Error.stackTraceLimit;if(Error.stackTraceLimit=0,$!=null)L=n(this,c(X).call(this,String($)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&r.stderr.getColorDepth()!==1?(b="\x1B[34m",v="\x1B[32m",y="\x1B[39m",w="\x1B[31m"):(b="",v="",y="",w="")),f(te)==="object"&&te!==null&&f(N)==="object"&&N!==null&&"stack"in te&&te instanceof Error&&"stack"in N&&N instanceof Error&&(te=E(te),N=E(N)),K==="deepStrictEqual"||K==="strictEqual")L=n(this,c(X).call(this,A(te,N,K)));else if(K==="notDeepStrictEqual"||K==="notStrictEqual"){var P=_[K],C=S(te).split(`
`);if(K==="notStrictEqual"&&f(te)==="object"&&te!==null&&(P=_.notStrictEqualObject),C.length>30)for(C[26]="".concat(b,"...").concat(y);C.length>27;)C.pop();L=C.length===1?n(this,c(X).call(this,"".concat(P," ").concat(C[0]))):n(this,c(X).call(this,"".concat(P,`

`).concat(C.join(`
`),`
`)))}else{var U=S(te),j="",M=_[K];K==="notDeepEqual"||K==="notEqual"?(U="".concat(_[K],`

`).concat(U)).length>1024&&(U="".concat(U.slice(0,1021),"...")):(j="".concat(S(N)),U.length>512&&(U="".concat(U.slice(0,509),"...")),j.length>512&&(j="".concat(j.slice(0,509),"...")),K==="deepEqual"||K==="equal"?U="".concat(M,`

`).concat(U,`

should equal

`):j=" ".concat(K," ").concat(j)),L=n(this,c(X).call(this,"".concat(U).concat(j)))}return Error.stackTraceLimit=x,L.generatedMessage=!$,Object.defineProperty(i(L),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),L.code="ERR_ASSERTION",L.actual=te,L.expected=N,L.operator=K,Error.captureStackTrace&&Error.captureStackTrace(i(L),le),L.stack,L.name="AssertionError",n(L)}var Z,H;return(function(ne,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(L&&L.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),L&&u(ne,L)})(X,I),Z=X,(H=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(ne,L){return h(this,(function($){for(var K=1;K<arguments.length;K++){var le=arguments[K]!=null?arguments[K]:{},te=Object.keys(le);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(le).filter((function(N){return Object.getOwnPropertyDescriptor(le,N).enumerable})))),te.forEach((function(N){e($,N,le[N])}))}return $})({},L,{customInspect:!1,depth:0}))}}])&&t(Z.prototype,H),X})(o(Error));return eD=F}function rD(r,e){return(function(t){if(Array.isArray(t))return t})(r)||(function(t,n){var i=[],o=!0,s=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done)&&(i.push(u.value),!n||i.length!==n);o=!0);}catch(f){s=!0,a=f}finally{try{o||c.return==null||c.return()}finally{if(s)throw a}}return i})(r,e)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function Cs(r){return(Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function z_(r){return r.call.bind(r)}function m8(r){if(r.length===0||r.length>10)return!0;for(var e=0;e<r.length;e++){var t=r.charCodeAt(e);if(t<48||t>57)return!0}return r.length===10&&r>=Math.pow(2,32)}function F0(r){return Object.keys(r).filter(m8).concat(j0(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function hD(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}function rs(r,e,t,n){if(r===e)return r!==0||!t||iD(r,e);if(t){if(Cs(r)!=="object")return typeof r=="number"&&F_(r)&&F_(e);if(Cs(e)!=="object"||r===null||e===null||Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1}else{if(r===null||Cs(r)!=="object")return(e===null||Cs(e)!=="object")&&r==e;if(e===null||Cs(e)!=="object")return!1}var i,o,s,a,u=sD(r);if(u!==sD(e))return!1;if(Array.isArray(r)){if(r.length!==e.length)return!1;var c=F0(r),f=F0(e);return c.length===f.length&&Np(r,e,t,n,1,c)}if(u==="[object Object]"&&(!M0(r)&&M0(e)||!B0(r)&&B0(e)))return!1;if(oD(r)){if(!oD(e)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(e))return!1}else if(aD(r)){if(!aD(e)||(s=r,a=e,!(l8?s.source===a.source&&s.flags===a.flags:RegExp.prototype.toString.call(s)===RegExp.prototype.toString.call(a))))return!1}else if(f8(r)||r instanceof Error){if(r.message!==e.message||r.name!==e.name)return!1}else{if(c8(r)){if(t||!p8(r)&&!g8(r)){if(!(function(m,b){return m.byteLength===b.byteLength&&hD(new Uint8Array(m.buffer,m.byteOffset,m.byteLength),new Uint8Array(b.buffer,b.byteOffset,b.byteLength))===0})(r,e))return!1}else if(!(function(m,b){if(m.byteLength!==b.byteLength)return!1;for(var v=0;v<m.byteLength;v++)if(m[v]!==b[v])return!1;return!0})(r,e))return!1;var h=F0(r),d=F0(e);return h.length===d.length&&Np(r,e,t,n,0,h)}if(B0(r))return!(!B0(e)||r.size!==e.size)&&Np(r,e,t,n,2);if(M0(r))return!(!M0(e)||r.size!==e.size)&&Np(r,e,t,n,3);if(u8(r)){if(o=e,(i=r).byteLength!==o.byteLength||hD(new Uint8Array(i),new Uint8Array(o))!==0)return!1}else if(h8(r)&&!(function(m,b){return lD(m)?lD(b)&&iD(Number.prototype.valueOf.call(m),Number.prototype.valueOf.call(b)):uD(m)?uD(b)&&String.prototype.valueOf.call(m)===String.prototype.valueOf.call(b):cD(m)?cD(b)&&Boolean.prototype.valueOf.call(m)===Boolean.prototype.valueOf.call(b):fD(m)?fD(b)&&BigInt.prototype.valueOf.call(m)===BigInt.prototype.valueOf.call(b):d8(b)&&Symbol.prototype.valueOf.call(m)===Symbol.prototype.valueOf.call(b)})(r,e))return!1}return Np(r,e,t,n,0)}function dD(r,e){return e.filter((function(t){return $0(r,t)}))}function Np(r,e,t,n,i,o){if(arguments.length===5){o=Object.keys(r);var s=Object.keys(e);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!kp(e,o[a]))return!1;if(t&&arguments.length===5){var u=j0(r);if(u.length!==0){var c=0;for(a=0;a<u.length;a++){var f=u[a];if($0(r,f)){if(!$0(e,f))return!1;o.push(f),c++}else if($0(e,f))return!1}var h=j0(e);if(u.length!==h.length&&dD(e,h).length!==c)return!1}else{var d=j0(e);if(d.length!==0&&dD(e,d).length!==0)return!1}}if(o.length===0&&(i===0||i===1&&r.length===0||r.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var m=n.val1.get(r);if(m!==void 0){var b=n.val2.get(e);if(b!==void 0)return m===b}n.position++}n.val1.set(r,n.position),n.val2.set(e,n.position);var v=w8(r,e,t,o,n,i);return n.val1.delete(r),n.val2.delete(e),v}function pD(r,e,t,n){for(var i=z0(r),o=0;o<i.length;o++){var s=i[o];if(rs(e,s,t,n))return r.delete(s),!0}return!1}function OD(r){switch(Cs(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(F_(r))return!1}return!0}function y8(r,e,t){var n=OD(t);return n??(e.has(n)&&!r.has(n))}function b8(r,e,t,n,i){var o=OD(t);if(o!=null)return o;var s=e.get(o);return!(s===void 0&&!e.has(o)||!rs(n,s,!1,i))&&!r.has(o)&&rs(n,s,!1,i)}function gD(r,e,t,n,i,o){for(var s=z0(r),a=0;a<s.length;a++){var u=s[a];if(rs(t,u,i,o)&&rs(n,e.get(u),i,o))return r.delete(u),!0}return!1}function w8(r,e,t,n,i,o){var s=0;if(o===2){if(!(function(f,h,d,m){for(var b=null,v=z0(f),w=0;w<v.length;w++){var y=v[w];if(Cs(y)==="object"&&y!==null)b===null&&(b=new Set),b.add(y);else if(!h.has(y)){if(d||!y8(f,h,y))return!1;b===null&&(b=new Set),b.add(y)}}if(b!==null){for(var _=z0(h),E=0;E<_.length;E++){var S=_[E];if(Cs(S)==="object"&&S!==null){if(!pD(b,S,d,m))return!1}else if(!d&&!f.has(S)&&!pD(b,S,d,m))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===3){if(!(function(f,h,d,m){for(var b=null,v=nD(f),w=0;w<v.length;w++){var y=rD(v[w],2),_=y[0],E=y[1];if(Cs(_)==="object"&&_!==null)b===null&&(b=new Set),b.add(_);else{var S=h.get(_);if(S===void 0&&!h.has(_)||!rs(E,S,d,m)){if(d||!b8(f,h,_,E,m))return!1;b===null&&(b=new Set),b.add(_)}}}if(b!==null){for(var A=nD(h),F=0;F<A.length;F++){var I=rD(A[F],2),X=(_=I[0],I[1]);if(Cs(_)==="object"&&_!==null){if(!gD(b,f,_,X,d,m))return!1}else if(!(d||f.has(_)&&rs(f.get(_),X,!1,m)||gD(b,f,_,X,!1,m)))return!1}return b.size===0}return!0})(r,e,t,i))return!1}else if(o===1)for(;s<r.length;s++){if(!kp(r,s)){if(kp(e,s))return!1;for(var a=Object.keys(r);s<a.length;s++){var u=a[s];if(!kp(e,u)||!rs(r[u],e[u],t,i))return!1}return a.length===Object.keys(e).length}if(!kp(e,s)||!rs(r[s],e[s],t,i))return!1}for(s=0;s<n.length;s++){var c=n[s];if(!rs(r[c],e[c],t,i))return!1}return!0}function U_(){if(yD)return L_;yD=!0;var r=lr;function e(N){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(N)}var t,n,i=ID().codes,o=i.ERR_AMBIGUOUS_ARGUMENT,s=i.ERR_INVALID_ARG_TYPE,a=i.ERR_INVALID_ARG_VALUE,u=i.ERR_INVALID_RETURN_VALUE,c=i.ERR_MISSING_ARGS,f=a8(),h=ze.inspect,d=ze.types,m=d.isPromise,b=d.isRegExp,v=Object.assign?Object.assign:A6.assign,w=Object.is?Object.is:CD;function y(){t=mD.isDeepEqual,n=mD.isDeepStrictEqual}var _=!1,E=L_=I,S={};function A(N){throw N.message instanceof Error?N.message:new f(N)}function F(N,x,P,C){if(!P){var U=!1;if(x===0)U=!0,C="No value argument passed to `assert.ok()`";else if(C instanceof Error)throw C;var j=new f({actual:P,expected:!0,message:C,operator:"==",stackStartFn:N});throw j.generatedMessage=U,j}}function I(){for(var N=arguments.length,x=new Array(N),P=0;P<N;P++)x[P]=arguments[P];F.apply(void 0,[I,x.length].concat(x))}E.fail=function N(x,P,C,U,j){var M,Q=arguments.length;if(Q===0)M="Failed";else if(Q===1)C=x,x=void 0;else{if(_===!1){_=!0;var ce=r.emitWarning?r.emitWarning:console.warn.bind(console);ce("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}Q===2&&(U="!=")}if(C instanceof Error)throw C;var _e={actual:x,expected:P,operator:U===void 0?"fail":U,stackStartFn:j||N};C!==void 0&&(_e.message=C);var re=new f(_e);throw M&&(re.message=M,re.generatedMessage=!0),re},E.AssertionError=f,E.ok=I,E.equal=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");x!=P&&A({actual:x,expected:P,message:C,operator:"==",stackStartFn:N})},E.notEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");x==P&&A({actual:x,expected:P,message:C,operator:"!=",stackStartFn:N})},E.deepEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(x,P)||A({actual:x,expected:P,message:C,operator:"deepEqual",stackStartFn:N})},E.notDeepEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),t(x,P)&&A({actual:x,expected:P,message:C,operator:"notDeepEqual",stackStartFn:N})},E.deepStrictEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(x,P)||A({actual:x,expected:P,message:C,operator:"deepStrictEqual",stackStartFn:N})},E.notDeepStrictEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");t===void 0&&y(),n(x,P)&&A({actual:x,expected:P,message:C,operator:"notDeepStrictEqual",stackStartFn:N})},E.strictEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");w(x,P)||A({actual:x,expected:P,message:C,operator:"strictEqual",stackStartFn:N})},E.notStrictEqual=function N(x,P,C){if(arguments.length<2)throw new c("actual","expected");w(x,P)&&A({actual:x,expected:P,message:C,operator:"notStrictEqual",stackStartFn:N})};var X=function N(x,P,C){var U=this;(function(j,M){if(!(j instanceof M))throw new TypeError("Cannot call a class as a function")})(this,N),P.forEach((function(j){j in x&&(C!==void 0&&typeof C[j]=="string"&&b(x[j])&&x[j].test(C[j])?U[j]=C[j]:U[j]=x[j])}))};function Z(N,x,P,C,U,j){if(!(P in N)||!n(N[P],x[P])){if(!C){var M=new X(N,U),Q=new X(x,U,N),ce=new f({actual:M,expected:Q,operator:"deepStrictEqual",stackStartFn:j});throw ce.actual=N,ce.expected=x,ce.operator=j.name,ce}A({actual:N,expected:x,message:C,operator:j.name,stackStartFn:j})}}function H(N,x,P,C){if(typeof x!="function"){if(b(x))return x.test(N);if(arguments.length===2)throw new s("expected",["Function","RegExp"],x);if(e(N)!=="object"||N===null){var U=new f({actual:N,expected:x,message:P,operator:"deepStrictEqual",stackStartFn:C});throw U.operator=C.name,U}var j=Object.keys(x);if(x instanceof Error)j.push("name","message");else if(j.length===0)throw new a("error",x,"may not be an empty object");return t===void 0&&y(),j.forEach((function(M){typeof N[M]=="string"&&b(x[M])&&x[M].test(N[M])||Z(N,x,M,P,j,C)})),!0}return x.prototype!==void 0&&N instanceof x||!Error.isPrototypeOf(x)&&x.call({},N)===!0}function ne(N){if(typeof N!="function")throw new s("fn","Function",N);try{N()}catch(x){return x}return S}function L(N){return m(N)||N!==null&&e(N)==="object"&&typeof N.then=="function"&&typeof N.catch=="function"}function $(N){return Promise.resolve().then((function(){var x;if(typeof N=="function"){if(!L(x=N()))throw new u("instance of Promise","promiseFn",x)}else{if(!L(N))throw new s("promiseFn",["Function","Promise"],N);x=N}return Promise.resolve().then((function(){return x})).then((function(){return S})).catch((function(P){return P}))}))}function K(N,x,P,C){if(typeof P=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],P);if(e(x)==="object"&&x!==null){if(x.message===P)throw new o("error/message",'The error message "'.concat(x.message,'" is identical to the message.'))}else if(x===P)throw new o("error/message",'The error "'.concat(x,'" is identical to the message.'));C=P,P=void 0}else if(P!=null&&e(P)!=="object"&&typeof P!="function")throw new s("error",["Object","Error","Function","RegExp"],P);if(x===S){var U="";P&&P.name&&(U+=" (".concat(P.name,")")),U+=C?": ".concat(C):".";var j=N.name==="rejects"?"rejection":"exception";A({actual:void 0,expected:P,operator:N.name,message:"Missing expected ".concat(j).concat(U),stackStartFn:N})}if(P&&!H(x,P,C,N))throw x}function le(N,x,P,C){if(x!==S){if(typeof P=="string"&&(C=P,P=void 0),!P||H(x,P)){var U=C?": ".concat(C):".",j=N.name==="doesNotReject"?"rejection":"exception";A({actual:x,expected:P,operator:N.name,message:"Got unwanted ".concat(j).concat(U,`
`)+'Actual message: "'.concat(x&&x.message,'"'),stackStartFn:N})}throw x}}function te(){for(var N=arguments.length,x=new Array(N),P=0;P<N;P++)x[P]=arguments[P];F.apply(void 0,[te,x.length].concat(x))}return E.throws=function N(x){for(var P=arguments.length,C=new Array(P>1?P-1:0),U=1;U<P;U++)C[U-1]=arguments[U];K.apply(void 0,[N,ne(x)].concat(C))},E.rejects=function N(x){for(var P=arguments.length,C=new Array(P>1?P-1:0),U=1;U<P;U++)C[U-1]=arguments[U];return $(x).then((function(j){return K.apply(void 0,[N,j].concat(C))}))},E.doesNotThrow=function N(x){for(var P=arguments.length,C=new Array(P>1?P-1:0),U=1;U<P;U++)C[U-1]=arguments[U];le.apply(void 0,[N,ne(x)].concat(C))},E.doesNotReject=function N(x){for(var P=arguments.length,C=new Array(P>1?P-1:0),U=1;U<P;U++)C[U-1]=arguments[U];return $(x).then((function(j){return le.apply(void 0,[N,j].concat(C))}))},E.ifError=function N(x){if(x!=null){var P="ifError got unwanted exception: ";e(x)==="object"&&typeof x.message=="string"?x.message.length===0&&x.constructor?P+=x.constructor.name:P+=x.message:P+=h(x);var C=new f({actual:x,expected:null,operator:"ifError",message:P,stackStartFn:N}),U=x.stack;if(typeof U=="string"){var j=U.split(`
`);j.shift();for(var M=C.stack.split(`
`),Q=0;Q<j.length;Q++){var ce=M.indexOf(j[Q]);if(ce!==-1){M=M.slice(0,ce);break}}C.stack="".concat(M.join(`
`),`
`).concat(j.join(`
`))}throw C}},E.strict=v(te,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict,L_}var A6,bD,$R,wD,Ip,C_,zR,R_,WR,qR,Op,P0,HR,GR,x6,S6,T6,VR,U0,YR,C6,R6,D6,I6,O6,P_,vD,N6,_D,W0,k6,XR,L6,P6,M6,D_,B6,F6,ED,Lp,ku,I_,U6,Ou,Nu,O_,N_,KR,j6,$6,z6,W6,q6,AD,ZR,xD,H6,G6,V6,M_,B_,JR,Y6,X6,K6,Z6,J6,SD,Q6,TD,CD,j_,$_,e8,t8,r8,n8,i8,RD,s8,DD,o8,k_,QR,eD,tD,l8,z0,nD,iD,j0,F_,kp,$0,sD,Hn,u8,c8,oD,M0,aD,B0,f8,h8,lD,uD,cD,fD,d8,p8,g8,mD,L_,yD,pt,W_=Jt(()=>{Ce();De();Re();cl();A6={assign:jR,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:jR})}},$R=Object.prototype.toString,wD=function(r){var e=$R.call(r),t=e==="[object Arguments]";return t||(t=e!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&$R.call(r.callee)==="[object Function]"),t};Object.keys||(Ip=Object.prototype.hasOwnProperty,C_=Object.prototype.toString,zR=wD,R_=Object.prototype.propertyIsEnumerable,WR=!R_.call({toString:null},"toString"),qR=R_.call((function(){}),"prototype"),Op=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],P0=function(r){var e=r.constructor;return e&&e.prototype===r},HR={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},GR=(function(){if(typeof window>"u")return!1;for(var r in window)try{if(!HR["$"+r]&&Ip.call(window,r)&&window[r]!==null&&typeof window[r]=="object")try{P0(window[r])}catch{return!0}}catch{return!0}return!1})(),bD=function(r){var e=r!==null&&typeof r=="object",t=C_.call(r)==="[object Function]",n=zR(r),i=e&&C_.call(r)==="[object String]",o=[];if(!e&&!t&&!n)throw new TypeError("Object.keys called on a non-object");var s=qR&&t;if(i&&r.length>0&&!Ip.call(r,0))for(var a=0;a<r.length;++a)o.push(String(a));if(n&&r.length>0)for(var u=0;u<r.length;++u)o.push(String(u));else for(var c in r)s&&c==="prototype"||!Ip.call(r,c)||o.push(String(c));if(WR)for(var f=(function(d){if(typeof window>"u"||!GR)return P0(d);try{return P0(d)}catch{return!1}})(r),h=0;h<Op.length;++h)f&&Op[h]==="constructor"||!Ip.call(r,Op[h])||o.push(Op[h]);return o});x6=bD,S6=Array.prototype.slice,T6=wD,VR=Object.keys,U0=VR?function(r){return VR(r)}:x6,YR=Object.keys;U0.shim=function(){return Object.keys?(function(){var r=Object.keys(arguments);return r&&r.length===arguments.length})(1,2)||(Object.keys=function(r){return T6(r)?YR(S6.call(r)):YR(r)}):Object.keys=U0,Object.keys||U0};C6=U0,R6=C6,D6=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",I6=Object.prototype.toString,O6=Array.prototype.concat,P_=Object.defineProperty,vD=P_&&(function(){var r={};try{for(var e in P_(r,"x",{enumerable:!1,value:r}),r)return!1;return r.x===r}catch{return!1}})(),N6=function(r,e,t,n){var i;(!(e in r)||typeof(i=n)=="function"&&I6.call(i)==="[object Function]"&&n())&&(vD?P_(r,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):r[e]=t)},_D=function(r,e){var t=arguments.length>2?arguments[2]:{},n=R6(e);D6&&(n=O6.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)N6(r,n[i],e[n[i]],t[n[i]])};_D.supportsDescriptors=!!vD;W0=_D,k6=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},e=Symbol("test"),t=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(t)!=="[object Symbol]")return!1;for(e in r[e]=42,r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var n=Object.getOwnPropertySymbols(r);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(r,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(r,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0},XR=(typeof globalThis<"u"?globalThis:typeof self<"u"?self:window).Symbol,L6=k6,P6=function(){return typeof XR=="function"&&typeof Symbol=="function"&&typeof XR("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&L6()},M6="Function.prototype.bind called on incompatible ",D_=Array.prototype.slice,B6=Object.prototype.toString,F6=function(r){var e=this;if(typeof e!="function"||B6.call(e)!=="[object Function]")throw new TypeError(M6+e);for(var t,n=D_.call(arguments,1),i=function(){if(this instanceof t){var c=e.apply(this,n.concat(D_.call(arguments)));return Object(c)===c?c:this}return e.apply(r,n.concat(D_.call(arguments)))},o=Math.max(0,e.length-n.length),s=[],a=0;a<o;a++)s.push("$"+a);if(t=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,t.prototype=new u,u.prototype=null}return t},ED=Function.prototype.bind||F6,Lp=TypeError,ku=Object.getOwnPropertyDescriptor;if(ku)try{ku({},"")}catch{ku=null}I_=function(){throw new Lp},U6=ku?(function(){try{return arguments.callee,I_}catch{try{return ku(arguments,"callee").get}catch{return I_}}})():I_,Ou=P6(),Nu=Object.getPrototypeOf||function(r){return r.__proto__},O_=typeof Uint8Array>"u"?void 0:Nu(Uint8Array),N_={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Ou?Nu([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView>"u"?void 0:DataView,"%DataViewPrototype%":typeof DataView>"u"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array>"u"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array>"u"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array>"u"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array>"u"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array>"u"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ou?Nu(Nu([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%JSONParse%":typeof JSON=="object"?JSON.parse:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Ou?Nu(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map>"u"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%PromisePrototype%":typeof Promise>"u"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise>"u"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise>"u"?void 0:Promise.all,"%Promise_reject%":typeof Promise>"u"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise>"u"?void 0:Promise.resolve,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Ou?Nu(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set>"u"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Ou?Nu(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Ou?Symbol:void 0,"%SymbolPrototype%":Ou?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":U6,"%TypedArray%":O_,"%TypedArrayPrototype%":O_?O_.prototype:void 0,"%TypeError%":Lp,"%TypeErrorPrototype%":Lp.prototype,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array>"u"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array>"u"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array>"u"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap>"u"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet>"u"?void 0:WeakSet.prototype},KR=ED.call(Function.call,String.prototype.replace),j6=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$6=/\\(\\)?/g,z6=function(r){var e=[];return KR(r,j6,(function(t,n,i,o){e[e.length]=i?KR(o,$6,"$1"):n||t})),e},W6=function(r,e){if(!(r in N_))throw new SyntaxError("intrinsic "+r+" does not exist!");if(N_[r]===void 0&&!e)throw new Lp("intrinsic "+r+" exists, but is not available. Please file an issue!");return N_[r]},q6=function(r,e){if(r.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var t=z6(r),n=W6("%"+(t.length>0?t[0]:"")+"%",e),i=1;i<t.length;i+=1)if(n!=null)if(ku&&i+1>=t.length){var o=ku(n,t[i]);if(!(t[i]in n))throw new Lp("base intrinsic for "+r+" exists, but the property is not available.");n=o?o.get||o.value:n[t[i]]}else n=n[t[i]];return n},ZR=ED,xD=q6("%Function%"),H6=xD.apply,G6=xD.call;(AD=function(){return ZR.apply(G6,arguments)}).apply=function(){return ZR.apply(H6,arguments)};V6=AD,JR=function(r){return r!=r},Y6=(M_=function(r,e){return r===0&&e===0?1/r==1/e:r===e||!(!JR(r)||!JR(e))},M_),X6=(B_=function(){return typeof Object.is=="function"?Object.is:Y6},B_),K6=W0,Z6=W0,J6=M_,SD=B_,Q6=function(){var r=X6();return K6(Object,{is:r},{is:function(){return Object.is!==r}}),r},TD=V6(SD(),Object);Z6(TD,{getPolyfill:SD,implementation:J6,shim:Q6});CD=TD;j_=function(r){return r!=r};e8=j_,t8=($_=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:e8},W0),r8=$_,n8=W0,i8=j_,RD=$_,s8=function(){var r=r8();return t8(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r},DD=RD();n8(DD,{getPolyfill:RD,implementation:i8,shim:s8});o8=DD,k_={},QR=!1;eD={},tD=!1;l8=/a/g.flags!==void 0,z0=function(r){var e=[];return r.forEach((function(t){return e.push(t)})),e},nD=function(r){var e=[];return r.forEach((function(t,n){return e.push([n,t])})),e},iD=Object.is?Object.is:CD,j0=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},F_=Number.isNaN?Number.isNaN:o8;kp=z_(Object.prototype.hasOwnProperty),$0=z_(Object.prototype.propertyIsEnumerable),sD=z_(Object.prototype.toString),Hn=ze.types,u8=Hn.isAnyArrayBuffer,c8=Hn.isArrayBufferView,oD=Hn.isDate,M0=Hn.isMap,aD=Hn.isRegExp,B0=Hn.isSet,f8=Hn.isNativeError,h8=Hn.isBoxedPrimitive,lD=Hn.isNumberObject,uD=Hn.isStringObject,cD=Hn.isBooleanObject,fD=Hn.isBigIntObject,d8=Hn.isSymbolObject,p8=Hn.isFloat32Array,g8=Hn.isFloat64Array;mD={isDeepEqual:function(r,e){return rs(r,e,!1)},isDeepStrictEqual:function(r,e){return rs(r,e,!0)}},L_={},yD=!1;pt=U_();pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws;pt.AssertionError;pt.deepEqual;pt.deepStrictEqual;pt.doesNotReject;pt.doesNotThrow;pt.equal;pt.fail;pt.ifError;pt.notDeepEqual;pt.notDeepStrictEqual;pt.notEqual;pt.notStrictEqual;pt.ok;pt.rejects;pt.strict;pt.strictEqual;pt.throws});var q_,q0=Jt(()=>{Ce();De();Re();cl();ze._extend;ze.callbackify;ze.debuglog;ze.deprecate;ze.format;ze.inherits;ze.inspect;ze.isArray;ze.isBoolean;ze.isBuffer;ze.isDate;ze.isError;ze.isFunction;ze.isNull;ze.isNullOrUndefined;ze.isNumber;ze.isObject;ze.isPrimitive;ze.isRegExp;ze.isString;ze.isSymbol;ze.isUndefined;ze.log;q_=ze.promisify;ze.types;ze.TextEncoder=globalThis.TextEncoder;ze.TextDecoder=globalThis.TextDecoder});function v8(){if(ND)return H_;ND=!0;var r=H_={},e,t;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=i}catch{t=i}})();function o(v){if(e===setTimeout)return setTimeout(v,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(v,0);try{return e(v,0)}catch{try{return e.call(null,v,0)}catch{return e.call(this||Wf,v,0)}}}function s(v){if(t===clearTimeout)return clearTimeout(v);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(v);try{return t(v)}catch{try{return t.call(null,v)}catch{return t.call(this||Wf,v)}}}var a=[],u=!1,c,f=-1;function h(){!u||!c||(u=!1,c.length?a=c.concat(a):f=-1,a.length&&d())}function d(){if(!u){var v=o(h);u=!0;for(var w=a.length;w;){for(c=a,a=[];++f<w;)c&&c[f].run();f=-1,w=a.length}c=null,u=!1,s(v)}}r.nextTick=function(v){var w=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)w[y-1]=arguments[y];a.push(new m(v,w)),a.length===1&&!u&&o(d)};function m(v,w){(this||Wf).fun=v,(this||Wf).array=w}m.prototype.run=function(){(this||Wf).fun.apply(null,(this||Wf).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}return r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(v){return[]},r.binding=function(v){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(v){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},H_}var H_,ND,Wf,Gt,qf=Jt(()=>{Ce();De();Re();H_={},ND=!1,Wf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Gt=v8();Gt.platform="browser";Gt.addListener;Gt.argv;Gt.binding;Gt.browser;Gt.chdir;Gt.cwd;Gt.emit;Gt.env;Gt.listeners;Gt.nextTick;Gt.off;Gt.on;Gt.once;Gt.prependListener;Gt.prependOnceListener;Gt.removeAllListeners;Gt.removeListener;Gt.title;Gt.umask;Gt.version;Gt.versions});function _8(){if(kD)return G_;kD=!0;var r=Gt;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,G_=i,G_}function Lu(r){throw new RangeError(S8[r])}function LD(r,e){let t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]);let i=(function(o,s){let a=[],u=o.length;for(;u--;)a[u]=s(o[u]);return a})((r=r.replace(x8,".")).split("."),e).join(".");return n+i}function WD(r){let e=[],t=0,n=r.length;for(;t<n;){let i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){let o=r.charCodeAt(t++);(64512&o)==56320?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),t--)}else e.push(i)}return e}function C8(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function ns(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Mp(r,e,t){if(r&&eo.isObject(r)&&r instanceof ns)return r;var n=new ns;return n.parse(r,e,t),n}function B8(){if($D)return K_;$D=!0;var r=lr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,K_=i,K_}function X8(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return J_?K8(r):Z8(r)}function K8(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(W8,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<$8||n>z8||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Z8(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function J8(r){let e=zD.resolve(r),t=r.charCodeAt(r.length-1);(t===j8||J_&&t===U8)&&e[e.length-1]!==zD.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(q8,"%25")),!J_&&e.includes("\\")&&(e=e.replace(H8,"%5C")),e.includes(`
`)&&(e=e.replace(G8,"%0A")),e.includes("\r")&&(e=e.replace(V8,"%0D")),e.includes("	")&&(e=e.replace(Y8,"%09")),n.pathname=e,n}function c4(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Q_?f4(r):h4(r)}function f4(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(i4,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<r4||n>n4||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function h4(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function d4(r){let e=rn.resolve(r),t=r.charCodeAt(r.length-1);(t===t4||Q_&&t===e4)&&e[e.length-1]!==rn.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(s4,"%25")),!Q_&&e.includes("\\")&&(e=e.replace(o4,"%5C")),e.includes(`
`)&&(e=e.replace(a4,"%0A")),e.includes("\r")&&(e=e.replace(l4,"%0D")),e.includes("	")&&(e=e.replace(u4,"%09")),n.pathname=e,n}var G_,kD,rn,Gf,E8,A8,x8,S8,to,V_,PD,qD,MD,BD,T8,R8,Pp,D8,Vo,Qt,I8,eo,O8,N8,k8,L8,Z_,FD,UD,jD,P8,M8,Y_,Hf,X_,K_,$D,zD,F8,U8,j8,$8,z8,J_,W8,q8,H8,G8,V8,Y8,Q8,e4,t4,r4,n4,Q_,i4,s4,o4,a4,l4,u4,HD=Jt(()=>{Ce();De();Re();cl();qf();G_={},kD=!1;rn=_8(),Gf=2147483647,E8=/^xn--/,A8=/[^\0-\x7E]/,x8=/[\x2E\u3002\uFF0E\uFF61]/g,S8={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},to=Math.floor,V_=String.fromCharCode;PD=function(r,e){return r+22+75*(r<26)-((e!=0)<<5)},qD=function(r,e,t){let n=0;for(r=t?to(r/700):r>>1,r+=to(r/e);r>455;n+=36)r=to(r/35);return to(n+36*r/(r+38))},MD=function(r){let e=[],t=r.length,n=0,i=128,o=72,s=r.lastIndexOf("-");s<0&&(s=0);for(let u=0;u<s;++u)r.charCodeAt(u)>=128&&Lu("not-basic"),e.push(r.charCodeAt(u));for(let u=s>0?s+1:0;u<t;){let c=n;for(let h=1,d=36;;d+=36){u>=t&&Lu("invalid-input");let m=(a=r.charCodeAt(u++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(m>=36||m>to((Gf-n)/h))&&Lu("overflow"),n+=m*h;let b=d<=o?1:d>=o+26?26:d-o;if(m<b)break;let v=36-b;h>to(Gf/v)&&Lu("overflow"),h*=v}let f=e.length+1;o=qD(n-c,f,c==0),to(n/f)>Gf-i&&Lu("overflow"),i+=to(n/f),n%=f,e.splice(n++,0,i)}var a;return String.fromCodePoint(...e)},BD=function(r){let e=[],t=(r=WD(r)).length,n=128,i=0,o=72;for(let u of r)u<128&&e.push(V_(u));let s=e.length,a=s;for(s&&e.push("-");a<t;){let u=Gf;for(let f of r)f>=n&&f<u&&(u=f);let c=a+1;u-n>to((Gf-i)/c)&&Lu("overflow"),i+=(u-n)*c,n=u;for(let f of r)if(f<n&&++i>Gf&&Lu("overflow"),f==n){let h=i;for(let d=36;;d+=36){let m=d<=o?1:d>=o+26?26:d-o;if(h<m)break;let b=h-m,v=36-m;e.push(V_(PD(m+b%v,0))),h=to(b/v)}e.push(V_(PD(h,0))),o=qD(i,c,a==s),i=0,++a}++i,++n}return e.join("")},T8={version:"2.1.0",ucs2:{decode:WD,encode:r=>String.fromCodePoint(...r)},decode:MD,encode:BD,toASCII:function(r){return LD(r,(function(e){return A8.test(e)?"xn--"+BD(e):e}))},toUnicode:function(r){return LD(r,(function(e){return E8.test(e)?MD(e.slice(4).toLowerCase()):e}))}};R8=function(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var c,f,h,d,m=r[u].replace(o,"%20"),b=m.indexOf(t);b>=0?(c=m.substr(0,b),f=m.substr(b+1)):(c=m,f=""),h=decodeURIComponent(c),d=decodeURIComponent(f),C8(i,h)?Array.isArray(i[h])?i[h].push(d):i[h]=[i[h],d]:i[h]=d}return i},Pp=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},D8=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map((function(i){var o=encodeURIComponent(Pp(i))+t;return Array.isArray(r[i])?r[i].map((function(s){return o+encodeURIComponent(Pp(s))})).join(e):o+encodeURIComponent(Pp(r[i]))})).join(e):n?encodeURIComponent(Pp(n))+t+encodeURIComponent(Pp(r)):""},Vo={};Vo.decode=Vo.parse=R8,Vo.encode=Vo.stringify=D8;Vo.decode;Vo.encode;Vo.parse;Vo.stringify;Qt={},I8=T8,eo={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}};Qt.parse=Mp,Qt.resolve=function(r,e){return Mp(r,!1,!0).resolve(e)},Qt.resolveObject=function(r,e){return r?Mp(r,!1,!0).resolveObject(e):e},Qt.format=function(r){return eo.isString(r)&&(r=Mp(r)),r instanceof ns?r.format():ns.prototype.format.call(r)},Qt.Url=ns;O8=/^([a-z0-9.+-]+:)/i,N8=/:[0-9]*$/,k8=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,L8=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Z_=["'"].concat(L8),FD=["%","/","?",";","#"].concat(Z_),UD=["/","?","#"],jD=/^[+a-z0-9A-Z_-]{0,63}$/,P8=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,M8={javascript:!0,"javascript:":!0},Y_={javascript:!0,"javascript:":!0},Hf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},X_=Vo;ns.prototype.parse=function(r,e,t){if(!eo.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(i);o[0]=o[0].replace(/\\/g,"/");var s=r=o.join(i);if(s=s.trim(),!t&&r.split("#").length===1){var a=k8.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?X_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=O8.exec(s);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,s=s.substr(u.length)}if(t||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";!f||u&&Y_[u]||(s=s.substr(2),this.slashes=!0)}if(!Y_[u]&&(f||u&&!Hf[u])){for(var h,d,m=-1,b=0;b<UD.length;b++)(v=s.indexOf(UD[b]))!==-1&&(m===-1||v<m)&&(m=v);for((d=m===-1?s.lastIndexOf("@"):s.lastIndexOf("@",m))!==-1&&(h=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(h)),m=-1,b=0;b<FD.length;b++){var v;(v=s.indexOf(FD[b]))!==-1&&(m===-1||v<m)&&(m=v)}m===-1&&(m=s.length),this.host=s.slice(0,m),s=s.slice(m),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var y=this.hostname.split(/\./),_=(b=0,y.length);b<_;b++){var E=y[b];if(E&&!E.match(jD)){for(var S="",A=0,F=E.length;A<F;A++)E.charCodeAt(A)>127?S+="x":S+=E[A];if(!S.match(jD)){var I=y.slice(0,b),X=y.slice(b+1),Z=E.match(P8);Z&&(I.push(Z[1]),X.unshift(Z[2])),X.length&&(s="/"+X.join(".")+s),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=I8.toASCII(this.hostname));var H=this.port?":"+this.port:"",ne=this.hostname||"";this.host=ne+H,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!M8[c])for(b=0,_=Z_.length;b<_;b++){var L=Z_[b];if(s.indexOf(L)!==-1){var $=encodeURIComponent(L);$===L&&($=escape(L)),s=s.split(L).join($)}}var K=s.indexOf("#");K!==-1&&(this.hash=s.substr(K),s=s.slice(0,K));var le=s.indexOf("?");if(le!==-1?(this.search=s.substr(le),this.query=s.substr(le+1),e&&(this.query=X_.parse(this.query)),s=s.slice(0,le)):e&&(this.search="",this.query={}),s&&(this.pathname=s),Hf[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){H=this.pathname||"";var te=this.search||"";this.path=H+te}return this.href=this.format(),this},ns.prototype.format=function(){var r=this.auth||"";r&&(r=(r=encodeURIComponent(r)).replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&eo.isObject(this.query)&&Object.keys(this.query).length&&(o=X_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Hf[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),e+i+(t=t.replace(/[?#]/g,(function(a){return encodeURIComponent(a)})))+(s=s.replace("#","%23"))+n},ns.prototype.resolve=function(r){return this.resolveObject(Mp(r,!1,!0)).format()},ns.prototype.resolveObject=function(r){if(eo.isString(r)){var e=new ns;e.parse(r,!1,!0),r=e}for(var t=new ns,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return Hf[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Hf[r.protocol]){for(var c=Object.keys(r),f=0;f<c.length;f++){var h=c[f];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||Y_[r.protocol])t.pathname=r.pathname;else{for(var d=(r.pathname||"").split("/");d.length&&!(r.host=d.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),t.pathname=d.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var m=t.pathname||"",b=t.search||"";t.path=m+b}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",w=r.host||r.pathname&&r.pathname.charAt(0)==="/",y=w||v||t.host&&r.pathname,_=y,E=t.pathname&&t.pathname.split("/")||[],S=(d=r.pathname&&r.pathname.split("/")||[],t.protocol&&!Hf[t.protocol]);if(S&&(t.hostname="",t.port=null,t.host&&(E[0]===""?E[0]=t.host:E.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(d[0]===""?d[0]=r.host:d.unshift(r.host)),r.host=null),y=y&&(d[0]===""||E[0]==="")),w)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),t.search=r.search,t.query=r.query;else if(!eo.isNullOrUndefined(r.search))return S&&(t.hostname=t.host=E.shift(),(Z=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=Z.shift(),t.host=t.hostname=Z.shift())),t.search=r.search,t.query=r.query,eo.isNull(t.pathname)&&eo.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!E.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=E.slice(-1)[0],F=(t.host||r.host||E.length>1)&&(A==="."||A==="..")||A==="",I=0,X=E.length;X>=0;X--)(A=E[X])==="."?E.splice(X,1):A===".."?(E.splice(X,1),I++):I&&(E.splice(X,1),I--);if(!y&&!_)for(;I--;I)E.unshift("..");!y||E[0]===""||E[0]&&E[0].charAt(0)==="/"||E.unshift(""),F&&E.join("/").substr(-1)!=="/"&&E.push("");var Z,H=E[0]===""||E[0]&&E[0].charAt(0)==="/";return S&&(t.hostname=t.host=H?"":E.length?E.shift():"",(Z=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=Z.shift(),t.host=t.hostname=Z.shift())),(y=y||t.host&&E.length)&&!H&&E.unshift(""),E.length?t.pathname=E.join("/"):(t.pathname=null,t.path=null),eo.isNull(t.pathname)&&eo.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},ns.prototype.parseHost=function(){var r=this.host,e=N8.exec(r);e&&((e=e[0])!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;K_={},$D=!1;zD=B8(),F8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=J8;Qt.fileURLToPath=X8;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.URL;U8=92,j8=47,$8=97,z8=122,J_=F8==="win32",W8=/\//g,q8=/%/g,H8=/\\/g,G8=/\n/g,V8=/\r/g,Y8=/\t/g;Q8=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;Qt.URL=typeof URL<"u"?URL:null;Qt.pathToFileURL=d4;Qt.fileURLToPath=c4;Qt.Url;Qt.format;Qt.resolve;Qt.resolveObject;Qt.parse;Qt.URL;e4=92,t4=47,r4=97,n4=122,Q_=Q8==="win32",i4=/\//g,s4=/%/g,o4=/\\/g,a4=/\n/g,l4=/\r/g,u4=/\t/g});function nE(r){throw new Error("Node.js process "+r+" is not supported by JSPM core outside of Node.js")}function p4(){!Vf||!Pu||(Vf=!1,Pu.length?Yo=Pu.concat(Yo):H0=-1,Yo.length&&GD())}function GD(){if(!Vf){var r=setTimeout(p4,0);Vf=!0;for(var e=Yo.length;e;){for(Pu=Yo,Yo=[];++H0<e;)Pu&&Pu[H0].run();H0=-1,e=Yo.length}Pu=null,Vf=!1,clearTimeout(r)}}function g4(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Yo.push(new VD(r,e)),Yo.length===1&&!Vf&&setTimeout(GD,0)}function VD(r,e){this.fun=r,this.array=e}function kn(){}function N4(r){nE("_linkedBinding")}function M4(r){nE("dlopen")}function B4(){return[]}function F4(){return[]}function V4(r,e){if(!r)throw new Error(e||"assertion error")}function Z4(){return!1}function p5(){return fl.now()/1e3}function rE(r){var e=Math.floor((Date.now()-fl.now())*.001),t=fl.now()*.001,n=Math.floor(t)+e,i=Math.floor(t%1*1e9);return r&&(n=n-r[0],i=i-r[1],i<0&&(n--,i+=tE)),[n,i]}function hl(){return zr}function T5(r){return[]}var Yo,Vf,Pu,H0,m4,y4,b4,w4,v4,_4,E4,A4,x4,S4,T4,C4,R4,D4,I4,O4,k4,L4,P4,U4,j4,iE,$4,z4,W4,q4,H4,G4,Y4,X4,K4,J4,Q4,e5,t5,r5,n5,i5,s5,o5,a5,l5,u5,c5,f5,h5,d5,fl,eE,tE,g5,m5,y5,b5,w5,v5,_5,E5,A5,x5,S5,zr,Mu=Jt(()=>{Ce();De();Re();Yo=[],Vf=!1,H0=-1;VD.prototype.run=function(){this.fun.apply(null,this.array)};m4="browser",y4="x64",b4="browser",w4={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},v4=["/usr/bin/node"],_4=[],E4="v16.8.0",A4={},x4=function(r,e){console.warn((e?e+": ":"")+r)},S4=function(r){nE("binding")},T4=function(r){return 0},C4=function(){return"/"},R4=function(r){},D4={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};I4=kn,O4=[];k4={},L4=!1,P4={};U4=kn,j4=kn,iE=function(){return{}},$4=iE,z4=iE,W4=kn,q4=kn,H4=kn,G4={};Y4={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},X4=kn,K4=kn;J4=kn,Q4=kn,e5=kn,t5=kn,r5=kn,n5=void 0,i5=void 0,s5=void 0,o5=kn,a5=2,l5=1,u5="/bin/usr/node",c5=9229,f5="node",h5=[],d5=kn,fl={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0};fl.now===void 0&&(eE=Date.now(),fl.timing&&fl.timing.navigationStart&&(eE=fl.timing.navigationStart),fl.now=()=>Date.now()-eE);tE=1e9;rE.bigint=function(r){var e=rE(r);return typeof BigInt>"u"?e[0]*tE+e[1]:BigInt(e[0]*tE)+BigInt(e[1])};g5=10,m5={},y5=0;b5=hl,w5=hl,v5=hl,_5=hl,E5=hl,A5=kn,x5=hl,S5=hl;zr={version:E4,versions:A4,arch:y4,platform:b4,release:D4,_rawDebug:I4,moduleLoadList:O4,binding:S4,_linkedBinding:N4,_events:m5,_eventsCount:y5,_maxListeners:g5,on:hl,addListener:b5,once:w5,off:v5,removeListener:_5,removeAllListeners:E5,emit:A5,prependListener:x5,prependOnceListener:S5,listeners:T5,domain:k4,_exiting:L4,config:P4,dlopen:M4,uptime:p5,_getActiveRequests:B4,_getActiveHandles:F4,reallyExit:U4,_kill:j4,cpuUsage:iE,resourceUsage:$4,memoryUsage:z4,kill:W4,exit:q4,openStdin:H4,allowedNodeEnvironmentFlags:G4,assert:V4,features:Y4,_fatalExceptions:X4,setUncaughtExceptionCaptureCallback:K4,hasUncaughtExceptionCaptureCallback:Z4,emitWarning:x4,nextTick:g4,_tickCallback:J4,_debugProcess:Q4,_debugEnd:e5,_startProfilerIdleNotifier:t5,_stopProfilerIdleNotifier:r5,stdout:n5,stdin:s5,stderr:i5,abort:o5,umask:T4,chdir:R4,cwd:C4,env:w4,title:m4,argv:v4,execArgv:_4,pid:a5,ppid:l5,execPath:u5,debugPort:c5,hrtime:rE,argv0:f5,_preload_modules:h5,setSourceMapsEnabled:d5}});function er(){er.init.call(this)}function G0(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function nI(r){return r._maxListeners===void 0?er.defaultMaxListeners:r._maxListeners}function ZD(r,e,t,n){var i,o,s,a;if(G0(t),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),(i=nI(r))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return r}function C5(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function JD(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=C5.bind(n);return i.listener=t,n.wrapFn=i,i}function QD(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?(function(o){for(var s=new Array(o.length),a=0;a<s.length;++a)s[a]=o[a].listener||o[a];return s})(i):iI(i,i.length)}function eI(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function iI(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}var tI,rI,Yf,YD,XD,KD,nn,Xf=Jt(()=>{Ce();De();Re();Yf=typeof Reflect=="object"?Reflect:null,YD=Yf&&typeof Yf.apply=="function"?Yf.apply:function(r,e,t){return Function.prototype.apply.call(r,e,t)};rI=Yf&&typeof Yf.ownKeys=="function"?Yf.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};XD=Number.isNaN||function(r){return r!=r};tI=er,er.EventEmitter=er,er.prototype._events=void 0,er.prototype._eventsCount=0,er.prototype._maxListeners=void 0;KD=10;Object.defineProperty(er,"defaultMaxListeners",{enumerable:!0,get:function(){return KD},set:function(r){if(typeof r!="number"||r<0||XD(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");KD=r}}),er.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},er.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||XD(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},er.prototype.getMaxListeners=function(){return nI(this)},er.prototype.emit=function(r){for(var e=[],t=1;t<arguments.length;t++)e.push(arguments[t]);var n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[r];if(a===void 0)return!1;if(typeof a=="function")YD(a,this,e);else{var u=a.length,c=iI(a,u);for(t=0;t<u;++t)YD(c[t],this,e)}return!0},er.prototype.addListener=function(r,e){return ZD(this,r,e,!1)},er.prototype.on=er.prototype.addListener,er.prototype.prependListener=function(r,e){return ZD(this,r,e,!0)},er.prototype.once=function(r,e){return G0(e),this.on(r,JD(this,r,e)),this},er.prototype.prependOnceListener=function(r,e){return G0(e),this.prependListener(r,JD(this,r,e)),this},er.prototype.removeListener=function(r,e){var t,n,i,o,s;if(G0(e),(n=this._events)===void 0)return this;if((t=n[r])===void 0)return this;if(t===e||t.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if(typeof t!="function"){for(i=-1,o=t.length-1;o>=0;o--)if(t[o]===e||t[o].listener===e){s=t[o].listener,i=o;break}if(i<0)return this;i===0?t.shift():(function(a,u){for(;u+1<a.length;u++)a[u]=a[u+1];a.pop()})(t,i),t.length===1&&(n[r]=t[0]),n.removeListener!==void 0&&this.emit("removeListener",r,s||e)}return this},er.prototype.off=er.prototype.removeListener,er.prototype.removeAllListeners=function(r){var e,t,n;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[r]),this;if(arguments.length===0){var i,o=Object.keys(t);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=t[r])=="function")this.removeListener(r,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(r,e[n]);return this},er.prototype.listeners=function(r){return QD(this,r,!0)},er.prototype.rawListeners=function(r){return QD(this,r,!1)},er.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):eI.call(r,e)},er.prototype.listenerCount=eI,er.prototype.eventNames=function(){return this._eventsCount>0?rI(this._events):[]};nn=tI;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount;nn.EventEmitter;nn.defaultMaxListeners;nn.init;nn.listenerCount});var V0=Jt(()=>{Ce();De();Re();Xf();nn.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};nn.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}}});function aI(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function R5(r,e,t){for(var n,i,o=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(255&r[s+2]),o.push(Rs[(i=n)>>18&63]+Rs[i>>12&63]+Rs[i>>6&63]+Rs[63&i]);return o.join("")}function Xo(r){if(r>2147483647)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,Ge.prototype),e}function Ge(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return xE(r)}return MI(r,e,t)}function MI(r,e,t){if(typeof r=="string")return(function(o,s){if(typeof s=="string"&&s!==""||(s="utf8"),!Ge.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var a=0|FI(o,s),u=Xo(a),c=u.write(o,s);return c!==a&&(u=u.slice(0,c)),u})(r,e);if(ArrayBuffer.isView(r))return sE(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Ko(r,ArrayBuffer)||r&&Ko(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ko(r,SharedArrayBuffer)||r&&Ko(r.buffer,SharedArrayBuffer)))return uI(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return Ge.from(n,e,t);var i=(function(o){if(Ge.isBuffer(o)){var s=0|RE(o.length),a=Xo(s);return a.length===0||o.copy(a,0,0,s),a}if(o.length!==void 0)return typeof o.length!="number"||DE(o.length)?Xo(0):sE(o);if(o.type==="Buffer"&&Array.isArray(o.data))return sE(o.data)})(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return Ge.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function BI(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function xE(r){return BI(r),Xo(r<0?0:0|RE(r))}function sE(r){for(var e=r.length<0?0:0|RE(r.length),t=Xo(e),n=0;n<e;n+=1)t[n]=255&r[n];return t}function uI(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=e===void 0&&t===void 0?new Uint8Array(r):t===void 0?new Uint8Array(r,e):new Uint8Array(r,e,t),Object.setPrototypeOf(n,Ge.prototype),n}function RE(r){if(r>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function FI(r,e){if(Ge.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Ko(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return SE(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return zI(r).length;default:if(i)return n?-1:SE(r).length;e=(""+e).toLowerCase(),i=!0}}function I5(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(e>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return U5(this,e,t);case"utf8":case"utf-8":return jI(this,e,t);case"ascii":return B5(this,e,t);case"latin1":case"binary":return F5(this,e,t);case"base64":return M5(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j5(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}function Fu(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function cI(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),DE(t=+t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0){if(!i)return-1;t=0}if(typeof e=="string"&&(e=Ge.from(e,n)),Ge.isBuffer(e))return e.length===0?-1:fI(r,e,t,n,i);if(typeof e=="number")return e&=255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):fI(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function fI(r,e,t,n,i){var o,s=1,a=r.length,u=e.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,u/=2,t/=2}function c(m,b){return s===1?m[b]:m.readUInt16BE(b*s)}if(i){var f=-1;for(o=t;o<a;o++)if(c(r,o)===c(e,f===-1?0:o-f)){if(f===-1&&(f=o),o-f+1===u)return f*s}else f!==-1&&(o-=o-f),f=-1}else for(t+u>a&&(t=a-u),o=t;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(r,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function O5(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(DE(a))return s;r[t+s]=a}return s}function N5(r,e,t,n){return Q0(SE(e,r.length-t),r,t,n)}function UI(r,e,t,n){return Q0((function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o})(e),r,t,n)}function k5(r,e,t,n){return UI(r,e,t,n)}function L5(r,e,t,n){return Q0(zI(e),r,t,n)}function P5(r,e,t,n){return Q0((function(i,o){for(var s,a,u,c=[],f=0;f<i.length&&!((o-=2)<0);++f)s=i.charCodeAt(f),a=s>>8,u=s%256,c.push(u),c.push(a);return c})(e,r.length-t),r,t,n)}function M5(r,e,t){return e===0&&t===r.length?AE.fromByteArray(r):AE.fromByteArray(r.slice(e,t))}function jI(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o,s,a,u,c=r[i],f=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=t)switch(h){case 1:c<128&&(f=c);break;case 2:(192&(o=r[i+1]))==128&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=r[i+1],s=r[i+2],(192&o)==128&&(192&s)==128&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=r[i+1],s=r[i+2],a=r[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}f===null?(f=65533,h=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=h}return(function(d){var m=d.length;if(m<=4096)return String.fromCharCode.apply(String,d);for(var b="",v=0;v<m;)b+=String.fromCharCode.apply(String,d.slice(v,v+=4096));return b})(n)}function B5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(127&r[i]);return n}function F5(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function U5(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=z5[r[o]];return i}function j5(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function hn(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}function ni(r,e,t,n,i,o){if(!Ge.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}function $I(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function hI(r,e,t,n,i){return e=+e,t>>>=0,i||$I(r,0,t,4),Kf.write(r,e,t,n,23,4),t+4}function dI(r,e,t,n,i){return e=+e,t>>>=0,i||$I(r,0,t,8),Kf.write(r,e,t,n,52,8),t+8}function SE(r,e){var t;e=e||1/0;for(var n=r.length,i=null,o=[],s=0;s<n;++s){if((t=r.charCodeAt(s))>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function zI(r){return AE.toByteArray((function(e){if((e=(e=e.split("=")[0]).trim().replace($5,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e})(r))}function Q0(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Ko(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function DE(r){return r!=r}function pI(r,e){for(var t in r)e[t]=r[t]}function Uu(r,e,t){return ro(r,e,t)}function Bp(r){var e;switch(this.encoding=(function(t){var n=(function(i){if(!i)return"utf8";for(var o;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}})(t);if(typeof n!="string"&&(CE.isEncoding===gI||!gI(t)))throw new Error("Unknown encoding: "+t);return n||t})(r),this.encoding){case"utf16le":this.text=H5,this.end=G5,e=4;break;case"utf8":this.fillLast=q5,e=4;break;case"base64":this.text=V5,this.end=Y5,e=3;break;default:return this.write=X5,this.end=K5,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=CE.allocUnsafe(e)}function oE(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function q5(r){var e=this.lastTotal-this.lastNeed,t=(function(n,i,o){if((192&i[0])!=128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&i.length>1){if((192&i[1])!=128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&i.length>2&&(192&i[2])!=128)return n.lastNeed=2,"\uFFFD"}})(this,r);return t!==void 0?t:this.lastNeed<=r.length?(r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length,void 0)}function H5(r,e){if((r.length-e)%2==0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function G5(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function V5(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function Y5(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function X5(r){return r.toString(this.encoding)}function K5(r){return r&&r.length?this.write(r):""}function Z5(){if(mI)return Fp;mI=!0,Fp.byteLength=a,Fp.toByteArray=c,Fp.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=m.indexOf("=");v===-1&&(v=b);var w=v===b?0:4-v%4;return[v,w]}function a(m){var b=s(m),v=b[0],w=b[1];return(v+w)*3/4-w}function u(m,b,v){return(b+v)*3/4-v}function c(m){var b,v=s(m),w=v[0],y=v[1],_=new t(u(m,w,y)),E=0,S=y>0?w-4:w,A;for(A=0;A<S;A+=4)b=e[m.charCodeAt(A)]<<18|e[m.charCodeAt(A+1)]<<12|e[m.charCodeAt(A+2)]<<6|e[m.charCodeAt(A+3)],_[E++]=b>>16&255,_[E++]=b>>8&255,_[E++]=b&255;return y===2&&(b=e[m.charCodeAt(A)]<<2|e[m.charCodeAt(A+1)]>>4,_[E++]=b&255),y===1&&(b=e[m.charCodeAt(A)]<<10|e[m.charCodeAt(A+1)]<<4|e[m.charCodeAt(A+2)]>>2,_[E++]=b>>8&255,_[E++]=b&255),_}function f(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,b,v){for(var w,y=[],_=b;_<v;_+=3)w=(m[_]<<16&16711680)+(m[_+1]<<8&65280)+(m[_+2]&255),y.push(f(w));return y.join("")}function d(m){for(var b,v=m.length,w=v%3,y=[],_=16383,E=0,S=v-w;E<S;E+=_)y.push(h(m,E,E+_>S?S:E+_));return w===1?(b=m[v-1],y.push(r[b>>2]+r[b<<4&63]+"==")):w===2&&(b=(m[v-2]<<8)+m[v-1],y.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),y.join("")}return Fp}function J5(){if(yI)return X0;yI=!0;return X0.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)},X0.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128},X0}function Q5(){if(bI)return ju;bI=!0;let r=Z5(),e=J5(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ju.Buffer=s,ju.SlowBuffer=y,ju.INSPECT_MAX_BYTES=50;let n=2147483647;ju.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let T=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(T,g),T.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(T){if(T>n)throw new RangeError('The value "'+T+'" is invalid for option "size"');let g=new Uint8Array(T);return Object.setPrototypeOf(g,s.prototype),g}function s(T,g,p){if(typeof T=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(T)}return a(T,g,p)}s.poolSize=8192;function a(T,g,p){if(typeof T=="string")return h(T,g);if(ArrayBuffer.isView(T))return m(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(ke(T,ArrayBuffer)||T&&ke(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(T,SharedArrayBuffer)||T&&ke(T.buffer,SharedArrayBuffer)))return b(T,g,p);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let R=T.valueOf&&T.valueOf();if(R!=null&&R!==T)return s.from(R,g,p);let J=v(T);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return s.from(T[Symbol.toPrimitive]("string"),g,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}s.from=function(T,g,p){return a(T,g,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function c(T,g,p){return u(T),T<=0?o(T):g!==void 0?typeof p=="string"?o(T).fill(g,p):o(T).fill(g):o(T)}s.alloc=function(T,g,p){return c(T,g,p)};function f(T){return u(T),o(T<0?0:w(T)|0)}s.allocUnsafe=function(T){return f(T)},s.allocUnsafeSlow=function(T){return f(T)};function h(T,g){if((typeof g!="string"||g==="")&&(g="utf8"),!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);let p=_(T,g)|0,R=o(p),J=R.write(T,g);return J!==p&&(R=R.slice(0,J)),R}function d(T){let g=T.length<0?0:w(T.length)|0,p=o(g);for(let R=0;R<g;R+=1)p[R]=T[R]&255;return p}function m(T){if(ke(T,Uint8Array)){let g=new Uint8Array(T);return b(g.buffer,g.byteOffset,g.byteLength)}return d(T)}function b(T,g,p){if(g<0||T.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<g+(p||0))throw new RangeError('"length" is outside of buffer bounds');let R;return g===void 0&&p===void 0?R=new Uint8Array(T):p===void 0?R=new Uint8Array(T,g):R=new Uint8Array(T,g,p),Object.setPrototypeOf(R,s.prototype),R}function v(T){if(s.isBuffer(T)){let g=w(T.length)|0,p=o(g);return p.length===0||T.copy(p,0,0,g),p}if(T.length!==void 0)return typeof T.length!="number"||Oe(T.length)?o(0):d(T);if(T.type==="Buffer"&&Array.isArray(T.data))return d(T.data)}function w(T){if(T>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return T|0}function y(T){return+T!=T&&(T=0),s.alloc(+T)}s.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==s.prototype},s.compare=function(g,p){if(ke(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),ke(p,Uint8Array)&&(p=s.from(p,p.offset,p.byteLength)),!s.isBuffer(g)||!s.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===p)return 0;let R=g.length,J=p.length;for(let D=0,ae=Math.min(R,J);D<ae;++D)if(g[D]!==p[D]){R=g[D],J=p[D];break}return R<J?-1:J<R?1:0},s.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(g,p){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return s.alloc(0);let R;if(p===void 0)for(p=0,R=0;R<g.length;++R)p+=g[R].length;let J=s.allocUnsafe(p),D=0;for(R=0;R<g.length;++R){let ae=g[R];if(ke(ae,Uint8Array))D+ae.length>J.length?(s.isBuffer(ae)||(ae=s.from(ae)),ae.copy(J,D)):Uint8Array.prototype.set.call(J,ae,D);else if(s.isBuffer(ae))ae.copy(J,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=ae.length}return J};function _(T,g){if(s.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||ke(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);let p=T.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&p===0)return 0;let J=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Se(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Ae(T).length;default:if(J)return R?-1:Se(T).length;g=(""+g).toLowerCase(),J=!0}}s.byteLength=_;function E(T,g,p){let R=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,g>>>=0,p<=g))return"";for(T||(T="utf8");;)switch(T){case"hex":return x(this,g,p);case"utf8":case"utf-8":return $(this,g,p);case"ascii":return te(this,g,p);case"latin1":case"binary":return N(this,g,p);case"base64":return L(this,g,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,g,p);default:if(R)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),R=!0}}s.prototype._isBuffer=!0;function S(T,g,p){let R=T[g];T[g]=T[p],T[p]=R}s.prototype.swap16=function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<g;p+=2)S(this,p,p+1);return this},s.prototype.swap32=function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<g;p+=4)S(this,p,p+3),S(this,p+1,p+2);return this},s.prototype.swap64=function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<g;p+=8)S(this,p,p+7),S(this,p+1,p+6),S(this,p+2,p+5),S(this,p+3,p+4);return this},s.prototype.toString=function(){let g=this.length;return g===0?"":arguments.length===0?$(this,0,g):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(g){if(!s.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:s.compare(this,g)===0},s.prototype.inspect=function(){let g="",p=ju.INSPECT_MAX_BYTES;return g=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(g+=" ... "),"<Buffer "+g+">"},t&&(s.prototype[t]=s.prototype.inspect),s.prototype.compare=function(g,p,R,J,D){if(ke(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(p===void 0&&(p=0),R===void 0&&(R=g?g.length:0),J===void 0&&(J=0),D===void 0&&(D=this.length),p<0||R>g.length||J<0||D>this.length)throw new RangeError("out of range index");if(J>=D&&p>=R)return 0;if(J>=D)return-1;if(p>=R)return 1;if(p>>>=0,R>>>=0,J>>>=0,D>>>=0,this===g)return 0;let ae=D-J,fe=R-p,Ee=Math.min(ae,fe),ve=this.slice(J,D),Ie=g.slice(p,R);for(let Y=0;Y<Ee;++Y)if(ve[Y]!==Ie[Y]){ae=ve[Y],fe=Ie[Y];break}return ae<fe?-1:fe<ae?1:0};function A(T,g,p,R,J){if(T.length===0)return-1;if(typeof p=="string"?(R=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Oe(p)&&(p=J?0:T.length-1),p<0&&(p=T.length+p),p>=T.length){if(J)return-1;p=T.length-1}else if(p<0)if(J)p=0;else return-1;if(typeof g=="string"&&(g=s.from(g,R)),s.isBuffer(g))return g.length===0?-1:F(T,g,p,R,J);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(T,g,p):Uint8Array.prototype.lastIndexOf.call(T,g,p):F(T,[g],p,R,J);throw new TypeError("val must be string, number or Buffer")}function F(T,g,p,R,J){let D=1,ae=T.length,fe=g.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(T.length<2||g.length<2)return-1;D=2,ae/=2,fe/=2,p/=2}function Ee(Ie,Y){return D===1?Ie[Y]:Ie.readUInt16BE(Y*D)}let ve;if(J){let Ie=-1;for(ve=p;ve<ae;ve++)if(Ee(T,ve)===Ee(g,Ie===-1?0:ve-Ie)){if(Ie===-1&&(Ie=ve),ve-Ie+1===fe)return Ie*D}else Ie!==-1&&(ve-=ve-Ie),Ie=-1}else for(p+fe>ae&&(p=ae-fe),ve=p;ve>=0;ve--){let Ie=!0;for(let Y=0;Y<fe;Y++)if(Ee(T,ve+Y)!==Ee(g,Y)){Ie=!1;break}if(Ie)return ve}return-1}s.prototype.includes=function(g,p,R){return this.indexOf(g,p,R)!==-1},s.prototype.indexOf=function(g,p,R){return A(this,g,p,R,!0)},s.prototype.lastIndexOf=function(g,p,R){return A(this,g,p,R,!1)};function I(T,g,p,R){p=Number(p)||0;let J=T.length-p;R?(R=Number(R),R>J&&(R=J)):R=J;let D=g.length;R>D/2&&(R=D/2);let ae;for(ae=0;ae<R;++ae){let fe=parseInt(g.substr(ae*2,2),16);if(Oe(fe))return ae;T[p+ae]=fe}return ae}function X(T,g,p,R){return $e(Se(g,T.length-p),T,p,R)}function Z(T,g,p,R){return $e(be(g),T,p,R)}function H(T,g,p,R){return $e(Ae(g),T,p,R)}function ne(T,g,p,R){return $e(pe(g,T.length-p),T,p,R)}s.prototype.write=function(g,p,R,J){if(p===void 0)J="utf8",R=this.length,p=0;else if(R===void 0&&typeof p=="string")J=p,R=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(R)?(R=R>>>0,J===void 0&&(J="utf8")):(J=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let D=this.length-p;if((R===void 0||R>D)&&(R=D),g.length>0&&(R<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let ae=!1;for(;;)switch(J){case"hex":return I(this,g,p,R);case"utf8":case"utf-8":return X(this,g,p,R);case"ascii":case"latin1":case"binary":return Z(this,g,p,R);case"base64":return H(this,g,p,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,g,p,R);default:if(ae)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ae=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(T,g,p){return g===0&&p===T.length?r.fromByteArray(T):r.fromByteArray(T.slice(g,p))}function $(T,g,p){p=Math.min(T.length,p);let R=[],J=g;for(;J<p;){let D=T[J],ae=null,fe=D>239?4:D>223?3:D>191?2:1;if(J+fe<=p){let Ee,ve,Ie,Y;switch(fe){case 1:D<128&&(ae=D);break;case 2:Ee=T[J+1],(Ee&192)===128&&(Y=(D&31)<<6|Ee&63,Y>127&&(ae=Y));break;case 3:Ee=T[J+1],ve=T[J+2],(Ee&192)===128&&(ve&192)===128&&(Y=(D&15)<<12|(Ee&63)<<6|ve&63,Y>2047&&(Y<55296||Y>57343)&&(ae=Y));break;case 4:Ee=T[J+1],ve=T[J+2],Ie=T[J+3],(Ee&192)===128&&(ve&192)===128&&(Ie&192)===128&&(Y=(D&15)<<18|(Ee&63)<<12|(ve&63)<<6|Ie&63,Y>65535&&Y<1114112&&(ae=Y))}}ae===null?(ae=65533,fe=1):ae>65535&&(ae-=65536,R.push(ae>>>10&1023|55296),ae=56320|ae&1023),R.push(ae),J+=fe}return le(R)}let K=4096;function le(T){let g=T.length;if(g<=K)return String.fromCharCode.apply(String,T);let p="",R=0;for(;R<g;)p+=String.fromCharCode.apply(String,T.slice(R,R+=K));return p}function te(T,g,p){let R="";p=Math.min(T.length,p);for(let J=g;J<p;++J)R+=String.fromCharCode(T[J]&127);return R}function N(T,g,p){let R="";p=Math.min(T.length,p);for(let J=g;J<p;++J)R+=String.fromCharCode(T[J]);return R}function x(T,g,p){let R=T.length;(!g||g<0)&&(g=0),(!p||p<0||p>R)&&(p=R);let J="";for(let D=g;D<p;++D)J+=Ve[T[D]];return J}function P(T,g,p){let R=T.slice(g,p),J="";for(let D=0;D<R.length-1;D+=2)J+=String.fromCharCode(R[D]+R[D+1]*256);return J}s.prototype.slice=function(g,p){let R=this.length;g=~~g,p=p===void 0?R:~~p,g<0?(g+=R,g<0&&(g=0)):g>R&&(g=R),p<0?(p+=R,p<0&&(p=0)):p>R&&(p=R),p<g&&(p=g);let J=this.subarray(g,p);return Object.setPrototypeOf(J,s.prototype),J};function C(T,g,p){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+g>p)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g],D=1,ae=0;for(;++ae<p&&(D*=256);)J+=this[g+ae]*D;return J},s.prototype.readUintBE=s.prototype.readUIntBE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g+--p],D=1;for(;p>0&&(D*=256);)J+=this[g+--p]*D;return J},s.prototype.readUint8=s.prototype.readUInt8=function(g,p){return g=g>>>0,p||C(g,1,this.length),this[g]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(g,p){return g=g>>>0,p||C(g,2,this.length),this[g]|this[g+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(g,p){return g=g>>>0,p||C(g,2,this.length),this[g]<<8|this[g+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(g,p){return g=g>>>0,p||C(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},s.prototype.readBigUInt64LE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,D=this[++g]+this[++g]*2**8+this[++g]*2**16+R*2**24;return BigInt(J)+(BigInt(D)<<BigInt(32))}),s.prototype.readBigUInt64BE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=p*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],D=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+R;return(BigInt(J)<<BigInt(32))+BigInt(D)}),s.prototype.readIntLE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=this[g],D=1,ae=0;for(;++ae<p&&(D*=256);)J+=this[g+ae]*D;return D*=128,J>=D&&(J-=Math.pow(2,8*p)),J},s.prototype.readIntBE=function(g,p,R){g=g>>>0,p=p>>>0,R||C(g,p,this.length);let J=p,D=1,ae=this[g+--J];for(;J>0&&(D*=256);)ae+=this[g+--J]*D;return D*=128,ae>=D&&(ae-=Math.pow(2,8*p)),ae},s.prototype.readInt8=function(g,p){return g=g>>>0,p||C(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},s.prototype.readInt16LE=function(g,p){g=g>>>0,p||C(g,2,this.length);let R=this[g]|this[g+1]<<8;return R&32768?R|4294901760:R},s.prototype.readInt16BE=function(g,p){g=g>>>0,p||C(g,2,this.length);let R=this[g+1]|this[g]<<8;return R&32768?R|4294901760:R},s.prototype.readInt32LE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},s.prototype.readInt32BE=function(g,p){return g=g>>>0,p||C(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},s.prototype.readBigInt64LE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(R<<24);return(BigInt(J)<<BigInt(32))+BigInt(p+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),s.prototype.readBigInt64BE=Je(function(g){g=g>>>0,V(g,"offset");let p=this[g],R=this[g+7];(p===void 0||R===void 0)&&B(g,this.length-8);let J=(p<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(J)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+R)}),s.prototype.readFloatLE=function(g,p){return g=g>>>0,p||C(g,4,this.length),e.read(this,g,!0,23,4)},s.prototype.readFloatBE=function(g,p){return g=g>>>0,p||C(g,4,this.length),e.read(this,g,!1,23,4)},s.prototype.readDoubleLE=function(g,p){return g=g>>>0,p||C(g,8,this.length),e.read(this,g,!0,52,8)},s.prototype.readDoubleBE=function(g,p){return g=g>>>0,p||C(g,8,this.length),e.read(this,g,!1,52,8)};function U(T,g,p,R,J,D){if(!s.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>J||g<D)throw new RangeError('"value" argument is out of bounds');if(p+R>T.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(g,p,R,J){if(g=+g,p=p>>>0,R=R>>>0,!J){let fe=Math.pow(2,8*R)-1;U(this,g,p,R,fe,0)}let D=1,ae=0;for(this[p]=g&255;++ae<R&&(D*=256);)this[p+ae]=g/D&255;return p+R},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(g,p,R,J){if(g=+g,p=p>>>0,R=R>>>0,!J){let fe=Math.pow(2,8*R)-1;U(this,g,p,R,fe,0)}let D=R-1,ae=1;for(this[p+D]=g&255;--D>=0&&(ae*=256);)this[p+D]=g/ae&255;return p+R},s.prototype.writeUint8=s.prototype.writeUInt8=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,1,255,0),this[p]=g&255,p+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,65535,0),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,65535,0),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,4294967295,0),this[p+3]=g>>>24,this[p+2]=g>>>16,this[p+1]=g>>>8,this[p]=g&255,p+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,4294967295,0),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4};function j(T,g,p,R,J){xe(g,R,J,T,p,7);let D=Number(g&BigInt(4294967295));T[p++]=D,D=D>>8,T[p++]=D,D=D>>8,T[p++]=D,D=D>>8,T[p++]=D;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return T[p++]=ae,ae=ae>>8,T[p++]=ae,ae=ae>>8,T[p++]=ae,ae=ae>>8,T[p++]=ae,p}function M(T,g,p,R,J){xe(g,R,J,T,p,7);let D=Number(g&BigInt(4294967295));T[p+7]=D,D=D>>8,T[p+6]=D,D=D>>8,T[p+5]=D,D=D>>8,T[p+4]=D;let ae=Number(g>>BigInt(32)&BigInt(4294967295));return T[p+3]=ae,ae=ae>>8,T[p+2]=ae,ae=ae>>8,T[p+1]=ae,ae=ae>>8,T[p]=ae,p+8}s.prototype.writeBigUInt64LE=Je(function(g,p=0){return j(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Je(function(g,p=0){return M(this,g,p,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(g,p,R,J){if(g=+g,p=p>>>0,!J){let Ee=Math.pow(2,8*R-1);U(this,g,p,R,Ee-1,-Ee)}let D=0,ae=1,fe=0;for(this[p]=g&255;++D<R&&(ae*=256);)g<0&&fe===0&&this[p+D-1]!==0&&(fe=1),this[p+D]=(g/ae>>0)-fe&255;return p+R},s.prototype.writeIntBE=function(g,p,R,J){if(g=+g,p=p>>>0,!J){let Ee=Math.pow(2,8*R-1);U(this,g,p,R,Ee-1,-Ee)}let D=R-1,ae=1,fe=0;for(this[p+D]=g&255;--D>=0&&(ae*=256);)g<0&&fe===0&&this[p+D+1]!==0&&(fe=1),this[p+D]=(g/ae>>0)-fe&255;return p+R},s.prototype.writeInt8=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,1,127,-128),g<0&&(g=255+g+1),this[p]=g&255,p+1},s.prototype.writeInt16LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,32767,-32768),this[p]=g&255,this[p+1]=g>>>8,p+2},s.prototype.writeInt16BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,2,32767,-32768),this[p]=g>>>8,this[p+1]=g&255,p+2},s.prototype.writeInt32LE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,2147483647,-2147483648),this[p]=g&255,this[p+1]=g>>>8,this[p+2]=g>>>16,this[p+3]=g>>>24,p+4},s.prototype.writeInt32BE=function(g,p,R){return g=+g,p=p>>>0,R||U(this,g,p,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[p]=g>>>24,this[p+1]=g>>>16,this[p+2]=g>>>8,this[p+3]=g&255,p+4},s.prototype.writeBigInt64LE=Je(function(g,p=0){return j(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Je(function(g,p=0){return M(this,g,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(T,g,p,R,J,D){if(p+R>T.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function ce(T,g,p,R,J){return g=+g,p=p>>>0,J||Q(T,g,p,4),e.write(T,g,p,R,23,4),p+4}s.prototype.writeFloatLE=function(g,p,R){return ce(this,g,p,!0,R)},s.prototype.writeFloatBE=function(g,p,R){return ce(this,g,p,!1,R)};function _e(T,g,p,R,J){return g=+g,p=p>>>0,J||Q(T,g,p,8),e.write(T,g,p,R,52,8),p+8}s.prototype.writeDoubleLE=function(g,p,R){return _e(this,g,p,!0,R)},s.prototype.writeDoubleBE=function(g,p,R){return _e(this,g,p,!1,R)},s.prototype.copy=function(g,p,R,J){if(!s.isBuffer(g))throw new TypeError("argument should be a Buffer");if(R||(R=0),!J&&J!==0&&(J=this.length),p>=g.length&&(p=g.length),p||(p=0),J>0&&J<R&&(J=R),J===R||g.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),g.length-p<J-R&&(J=g.length-p+R);let D=J-R;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,R,J):Uint8Array.prototype.set.call(g,this.subarray(R,J),p),D},s.prototype.fill=function(g,p,R,J){if(typeof g=="string"){if(typeof p=="string"?(J=p,p=0,R=this.length):typeof R=="string"&&(J=R,R=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!s.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(g.length===1){let ae=g.charCodeAt(0);(J==="utf8"&&ae<128||J==="latin1")&&(g=ae)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(p<0||this.length<p||this.length<R)throw new RangeError("Out of range index");if(R<=p)return this;p=p>>>0,R=R===void 0?this.length:R>>>0,g||(g=0);let D;if(typeof g=="number")for(D=p;D<R;++D)this[D]=g;else{let ae=s.isBuffer(g)?g:s.from(g,J),fe=ae.length;if(fe===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(D=0;D<R-p;++D)this[D+p]=ae[D%fe]}return this};let re={};function W(T,g,p){re[T]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(T,g){return`The "${T}" argument must be of type number. Received type ${typeof g}`},TypeError),W("ERR_OUT_OF_RANGE",function(T,g,p){let R=`The value of "${T}" is out of range.`,J=p;return Number.isInteger(p)&&Math.abs(p)>2**32?J=oe(String(p)):typeof p=="bigint"&&(J=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(J=oe(J)),J+="n"),R+=` It must be ${g}. Received ${J}`,R},RangeError);function oe(T){let g="",p=T.length,R=T[0]==="-"?1:0;for(;p>=R+4;p-=3)g=`_${T.slice(p-3,p)}${g}`;return`${T.slice(0,p)}${g}`}function we(T,g,p){V(g,"offset"),(T[g]===void 0||T[g+p]===void 0)&&B(g,T.length-(p+1))}function xe(T,g,p,R,J,D){if(T>p||T<g){let ae=typeof g=="bigint"?"n":"",fe;throw g===0||g===BigInt(0)?fe=`>= 0${ae} and < 2${ae} ** ${(D+1)*8}${ae}`:fe=`>= -(2${ae} ** ${(D+1)*8-1}${ae}) and < 2 ** ${(D+1)*8-1}${ae}`,new re.ERR_OUT_OF_RANGE("value",fe,T)}we(R,J,D)}function V(T,g){if(typeof T!="number")throw new re.ERR_INVALID_ARG_TYPE(g,"number",T)}function B(T,g,p){throw Math.floor(T)!==T?(V(T,p),new re.ERR_OUT_OF_RANGE("offset","an integer",T)):g<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,T)}let se=/[^+/0-9A-Za-z-_]/g;function ge(T){if(T=T.split("=")[0],T=T.trim().replace(se,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function Se(T,g){g=g||1/0;let p,R=T.length,J=null,D=[];for(let ae=0;ae<R;++ae){if(p=T.charCodeAt(ae),p>55295&&p<57344){if(!J){if(p>56319){(g-=3)>-1&&D.push(239,191,189);continue}else if(ae+1===R){(g-=3)>-1&&D.push(239,191,189);continue}J=p;continue}if(p<56320){(g-=3)>-1&&D.push(239,191,189),J=p;continue}p=(J-55296<<10|p-56320)+65536}else J&&(g-=3)>-1&&D.push(239,191,189);if(J=null,p<128){if((g-=1)<0)break;D.push(p)}else if(p<2048){if((g-=2)<0)break;D.push(p>>6|192,p&63|128)}else if(p<65536){if((g-=3)<0)break;D.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((g-=4)<0)break;D.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return D}function be(T){let g=[];for(let p=0;p<T.length;++p)g.push(T.charCodeAt(p)&255);return g}function pe(T,g){let p,R,J,D=[];for(let ae=0;ae<T.length&&!((g-=2)<0);++ae)p=T.charCodeAt(ae),R=p>>8,J=p%256,D.push(J),D.push(R);return D}function Ae(T){return r.toByteArray(ge(T))}function $e(T,g,p,R){let J;for(J=0;J<R&&!(J+p>=g.length||J>=T.length);++J)g[J+p]=T[J];return J}function ke(T,g){return T instanceof g||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===g.name}function Oe(T){return T!==T}let Ve=(function(){let T="0123456789abcdef",g=new Array(256);for(let p=0;p<16;++p){let R=p*16;for(let J=0;J<16;++J)g[R+J]=T[p]+T[J]}return g})();function Je(T){return typeof BigInt>"u"?tt:T}function tt(){throw new Error("BigInt not supported")}return ju}function zu(){return wI||(wI=!0,typeof Object.create=="function"?K0=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:K0=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),K0}function WI(){return vI||(vI=!0,aE=nn.EventEmitter),aE}function eU(){if(_I)return lE;_I=!0;function r(d,m){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);m&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(d,w).enumerable})),b.push.apply(b,v)}return b}function e(d){for(var m=1;m<arguments.length;m++){var b=arguments[m]!=null?arguments[m]:{};m%2?r(Object(b),!0).forEach(function(v){t(d,v,b[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):r(Object(b)).forEach(function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(b,v))})}return d}function t(d,m,b){return m in d?Object.defineProperty(d,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[m]=b,d}function n(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}function i(d,m){for(var b=0;b<m.length;b++){var v=m[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function o(d,m,b){return m&&i(d.prototype,m),d}var s=Zf,a=s.Buffer,u=ze,c=u.inspect,f=c&&c.custom||"inspect";function h(d,m,b){a.prototype.copy.call(d,m,b)}return lE=(function(){function d(){n(this,d),this.head=null,this.tail=null,this.length=0}return o(d,[{key:"push",value:function(b){var v={data:b,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(b){var v={data:b,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var v=this.head,w=""+v.data;v=v.next;)w+=b+v.data;return w}},{key:"concat",value:function(b){if(this.length===0)return a.alloc(0);for(var v=a.allocUnsafe(b>>>0),w=this.head,y=0;w;)h(w.data,v,y),y+=w.data.length,w=w.next;return v}},{key:"consume",value:function(b,v){var w;return b<this.head.data.length?(w=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?w=this.shift():w=v?this._getString(b):this._getBuffer(b),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var v=this.head,w=1,y=v.data;for(b-=y.length;v=v.next;){var _=v.data,E=b>_.length?_.length:b;if(E===_.length?y+=_:y+=_.slice(0,b),b-=E,b===0){E===_.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=_.slice(E));break}++w}return this.length-=w,y}},{key:"_getBuffer",value:function(b){var v=a.allocUnsafe(b),w=this.head,y=1;for(w.data.copy(v),b-=w.data.length;w=w.next;){var _=w.data,E=b>_.length?_.length:b;if(_.copy(v,v.length-b,0,E),b-=E,b===0){E===_.length?(++y,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=_.slice(E));break}++y}return this.length-=y,v}},{key:f,value:function(b,v){return c(this,e({},v,{depth:0,customInspect:!1}))}}]),d})(),lE}function qI(){if(EI)return uE;EI=!0;var r=Gt;function e(a,u){var c=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(u?u(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,a)):r.nextTick(o,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(d){!u&&d?c._writableState?c._writableState.errorEmitted?r.nextTick(n,c):(c._writableState.errorEmitted=!0,r.nextTick(t,c,d)):r.nextTick(t,c,d):u?(r.nextTick(n,c),u(d)):r.nextTick(n,c)}),this)}function t(a,u){o(a,u),n(a)}function n(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(a,u){a.emit("error",u)}function s(a,u){var c=a._readableState,f=a._writableState;c&&c.autoDestroy||f&&f.autoDestroy?a.destroy(u):a.emit("error",u)}return uE={destroy:e,undestroy:i,errorOrDestroy:s},uE}function Jf(){if(AI)return cE;AI=!0;let r={};function e(s,a,u){u||(u=Error);function c(h,d,m){return typeof a=="string"?a:a(h,d,m)}class f extends u{constructor(d,m,b){super(c(d,m,b))}}f.prototype.name=u.name,f.prototype.code=s,r[s]=f}function t(s,a){if(Array.isArray(s)){let u=s.length;return s=s.map(c=>String(c)),u>2?`one of ${a} ${s.slice(0,u-1).join(", ")}, or `+s[u-1]:u===2?`one of ${a} ${s[0]} or ${s[1]}`:`of ${a} ${s[0]}`}else return`of ${a} ${String(s)}`}function n(s,a,u){return s.substr(0,a.length)===a}function i(s,a,u){return(u===void 0||u>s.length)&&(u=s.length),s.substring(u-a.length,u)===a}function o(s,a,u){return typeof u!="number"&&(u=0),u+a.length>s.length?!1:s.indexOf(a,u)!==-1}return e("ERR_INVALID_OPT_VALUE",function(s,a){return'The value "'+a+'" is invalid for option "'+s+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(s,a,u){let c;typeof a=="string"&&n(a,"not ")?(c="must not be",a=a.replace(/^not /,"")):c="must be";let f;if(i(s," argument"))f=`The ${s} ${c} ${t(a,"type")}`;else{let h=o(s,".")?"property":"argument";f=`The "${s}" ${h} ${c} ${t(a,"type")}`}return f+=`. Received type ${typeof u}`,f},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),cE.codes=r,cE}function HI(){if(xI)return fE;xI=!0;var r=Jf().codes.ERR_INVALID_OPT_VALUE;function e(n,i,o){return n.highWaterMark!=null?n.highWaterMark:i?n[o]:null}function t(n,i,o,s){var a=e(i,s,o);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var u=s?o:"highWaterMark";throw new r(u,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return fE={getHighWaterMark:t},fE}function tU(){if(SI)return hE;SI=!0,hE=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function o(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this||dE,arguments)}return o}function e(t){try{if(!dE.localStorage)return!1}catch{return!1}var n=dE.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return hE}function IE(){if(TI)return pE;TI=!0;var r=Gt;pE=Z;function e(re){var W=this;this.next=null,this.entry=null,this.finish=function(){_e(W,re)}}var t;Z.WritableState=I;var n={deprecate:tU()},i=WI(),o=Zf.Buffer,s=rU.Uint8Array||function(){};function a(re){return o.from(re)}function u(re){return o.isBuffer(re)||re instanceof s}var c=qI(),f=HI(),h=f.getHighWaterMark,d=Jf().codes,m=d.ERR_INVALID_ARG_TYPE,b=d.ERR_METHOD_NOT_IMPLEMENTED,v=d.ERR_MULTIPLE_CALLBACK,w=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,_=d.ERR_STREAM_NULL_VALUES,E=d.ERR_STREAM_WRITE_AFTER_END,S=d.ERR_UNKNOWN_ENCODING,A=c.errorOrDestroy;zu()(Z,i);function F(){}function I(re,W,oe){t=t||$u(),re=re||{},typeof oe!="boolean"&&(oe=W instanceof t),this.objectMode=!!re.objectMode,oe&&(this.objectMode=this.objectMode||!!re.writableObjectMode),this.highWaterMark=h(this,re,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var we=re.decodeStrings===!1;this.decodeStrings=!we,this.defaultEncoding=re.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(xe){N(W,xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=re.emitClose!==!1,this.autoDestroy=!!re.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}I.prototype.getBuffer=function(){for(var W=this.bufferedRequest,oe=[];W;)oe.push(W),W=W.next;return oe},(function(){try{Object.defineProperty(I.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var X;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(X=Function.prototype[Symbol.hasInstance],Object.defineProperty(Z,Symbol.hasInstance,{value:function(W){return X.call(this,W)?!0:this!==Z?!1:W&&W._writableState instanceof I}})):X=function(W){return W instanceof this};function Z(re){t=t||$u();var W=this instanceof t;if(!W&&!X.call(Z,this))return new Z(re);this._writableState=new I(re,this,W),this.writable=!0,re&&(typeof re.write=="function"&&(this._write=re.write),typeof re.writev=="function"&&(this._writev=re.writev),typeof re.destroy=="function"&&(this._destroy=re.destroy),typeof re.final=="function"&&(this._final=re.final)),i.call(this)}Z.prototype.pipe=function(){A(this,new w)};function H(re,W){var oe=new E;A(re,oe),r.nextTick(W,oe)}function ne(re,W,oe,we){var xe;return oe===null?xe=new _:typeof oe!="string"&&!W.objectMode&&(xe=new m("chunk",["string","Buffer"],oe)),xe?(A(re,xe),r.nextTick(we,xe),!1):!0}Z.prototype.write=function(re,W,oe){var we=this._writableState,xe=!1,V=!we.objectMode&&u(re);return V&&!o.isBuffer(re)&&(re=a(re)),typeof W=="function"&&(oe=W,W=null),V?W="buffer":W||(W=we.defaultEncoding),typeof oe!="function"&&(oe=F),we.ending?H(this,oe):(V||ne(this,we,re,oe))&&(we.pendingcb++,xe=$(this,we,V,re,W,oe)),xe},Z.prototype.cork=function(){this._writableState.corked++},Z.prototype.uncork=function(){var re=this._writableState;re.corked&&(re.corked--,!re.writing&&!re.corked&&!re.bufferProcessing&&re.bufferedRequest&&C(this,re))},Z.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=W.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((W+"").toLowerCase())>-1))throw new S(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(Z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function L(re,W,oe){return!re.objectMode&&re.decodeStrings!==!1&&typeof W=="string"&&(W=o.from(W,oe)),W}Object.defineProperty(Z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function $(re,W,oe,we,xe,V){if(!oe){var B=L(W,we,xe);we!==B&&(oe=!0,xe="buffer",we=B)}var se=W.objectMode?1:we.length;W.length+=se;var ge=W.length<W.highWaterMark;if(ge||(W.needDrain=!0),W.writing||W.corked){var Se=W.lastBufferedRequest;W.lastBufferedRequest={chunk:we,encoding:xe,isBuf:oe,callback:V,next:null},Se?Se.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else K(re,W,!1,se,we,xe,V);return ge}function K(re,W,oe,we,xe,V,B){W.writelen=we,W.writecb=B,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new y("write")):oe?re._writev(xe,W.onwrite):re._write(xe,V,W.onwrite),W.sync=!1}function le(re,W,oe,we,xe){--W.pendingcb,oe?(r.nextTick(xe,we),r.nextTick(Q,re,W),re._writableState.errorEmitted=!0,A(re,we)):(xe(we),re._writableState.errorEmitted=!0,A(re,we),Q(re,W))}function te(re){re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0}function N(re,W){var oe=re._writableState,we=oe.sync,xe=oe.writecb;if(typeof xe!="function")throw new v;if(te(oe),W)le(re,oe,we,W,xe);else{var V=U(oe)||re.destroyed;!V&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&C(re,oe),we?r.nextTick(x,re,oe,V,xe):x(re,oe,V,xe)}}function x(re,W,oe,we){oe||P(re,W),W.pendingcb--,we(),Q(re,W)}function P(re,W){W.length===0&&W.needDrain&&(W.needDrain=!1,re.emit("drain"))}function C(re,W){W.bufferProcessing=!0;var oe=W.bufferedRequest;if(re._writev&&oe&&oe.next){var we=W.bufferedRequestCount,xe=new Array(we),V=W.corkedRequestsFree;V.entry=oe;for(var B=0,se=!0;oe;)xe[B]=oe,oe.isBuf||(se=!1),oe=oe.next,B+=1;xe.allBuffers=se,K(re,W,!0,W.length,xe,"",V.finish),W.pendingcb++,W.lastBufferedRequest=null,V.next?(W.corkedRequestsFree=V.next,V.next=null):W.corkedRequestsFree=new e(W),W.bufferedRequestCount=0}else{for(;oe;){var ge=oe.chunk,Se=oe.encoding,be=oe.callback,pe=W.objectMode?1:ge.length;if(K(re,W,!1,pe,ge,Se,be),oe=oe.next,W.bufferedRequestCount--,W.writing)break}oe===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=oe,W.bufferProcessing=!1}Z.prototype._write=function(re,W,oe){oe(new b("_write()"))},Z.prototype._writev=null,Z.prototype.end=function(re,W,oe){var we=this._writableState;return typeof re=="function"?(oe=re,re=null,W=null):typeof W=="function"&&(oe=W,W=null),re!=null&&this.write(re,W),we.corked&&(we.corked=1,this.uncork()),we.ending||ce(this,we,oe),this},Object.defineProperty(Z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function U(re){return re.ending&&re.length===0&&re.bufferedRequest===null&&!re.finished&&!re.writing}function j(re,W){re._final(function(oe){W.pendingcb--,oe&&A(re,oe),W.prefinished=!0,re.emit("prefinish"),Q(re,W)})}function M(re,W){!W.prefinished&&!W.finalCalled&&(typeof re._final=="function"&&!W.destroyed?(W.pendingcb++,W.finalCalled=!0,r.nextTick(j,re,W)):(W.prefinished=!0,re.emit("prefinish")))}function Q(re,W){var oe=U(W);if(oe&&(M(re,W),W.pendingcb===0&&(W.finished=!0,re.emit("finish"),W.autoDestroy))){var we=re._readableState;(!we||we.autoDestroy&&we.endEmitted)&&re.destroy()}return oe}function ce(re,W,oe){W.ending=!0,Q(re,W),oe&&(W.finished?r.nextTick(oe):re.once("finish",oe)),W.ended=!0,re.writable=!1}function _e(re,W,oe){var we=re.entry;for(re.entry=null;we;){var xe=we.callback;W.pendingcb--,xe(oe),we=we.next}W.corkedRequestsFree.next=re}return Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),Z.prototype.destroy=c.destroy,Z.prototype._undestroy=c.undestroy,Z.prototype._destroy=function(re,W){W(re)},pE}function $u(){if(CI)return gE;CI=!0;var r=Gt,e=Object.keys||function(f){var h=[];for(var d in f)h.push(d);return h};gE=a;var t=OE(),n=IE();zu()(a,t);for(var i=e(n.prototype),o=0;o<i.length;o++){var s=i[o];a.prototype[s]||(a.prototype[s]=n.prototype[s])}function a(f){if(!(this instanceof a))return new a(f);t.call(this,f),n.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||r.nextTick(c,this)}function c(f){f.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),gE}function eb(){if(RI)return mE;RI=!0;var r=Jf().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];o.apply(this,u)}}}function t(){}function n(o){return o.setHeader&&typeof o.abort=="function"}function i(o,s,a){if(typeof s=="function")return i(o,null,s);s||(s={}),a=e(a||t);var u=s.readable||s.readable!==!1&&o.readable,c=s.writable||s.writable!==!1&&o.writable,f=function(){o.writable||d()},h=o._writableState&&o._writableState.finished,d=function(){c=!1,h=!0,u||a.call(o)},m=o._readableState&&o._readableState.endEmitted,b=function(){u=!1,m=!0,c||a.call(o)},v=function(E){a.call(o,E)},w=function(){var E;if(u&&!m)return(!o._readableState||!o._readableState.ended)&&(E=new r),a.call(o,E);if(c&&!h)return(!o._writableState||!o._writableState.ended)&&(E=new r),a.call(o,E)},y=function(){o.req.on("finish",d)};return n(o)?(o.on("complete",d),o.on("abort",w),o.req?y():o.on("request",y)):c&&!o._writableState&&(o.on("end",f),o.on("close",f)),o.on("end",b),o.on("finish",d),s.error!==!1&&o.on("error",v),o.on("close",w),function(){o.removeListener("complete",d),o.removeListener("abort",w),o.removeListener("request",y),o.req&&o.req.removeListener("finish",d),o.removeListener("end",f),o.removeListener("close",f),o.removeListener("finish",d),o.removeListener("end",b),o.removeListener("error",v),o.removeListener("close",w)}}return mE=i,mE}function nU(){if(DI)return yE;DI=!0;var r=Gt,e;function t(_,E,S){return E in _?Object.defineProperty(_,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[E]=S,_}var n=eb(),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(_,E){return{value:_,done:E}}function d(_){var E=_[i];if(E!==null){var S=_[f].read();S!==null&&(_[u]=null,_[i]=null,_[o]=null,E(h(S,!1)))}}function m(_){r.nextTick(d,_)}function b(_,E){return function(S,A){_.then(function(){if(E[a]){S(h(void 0,!0));return}E[c](S,A)},A)}}var v=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((e={get stream(){return this[f]},next:function(){var E=this,S=this[s];if(S!==null)return Promise.reject(S);if(this[a])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(X,Z){r.nextTick(function(){E[s]?Z(E[s]):X(h(void 0,!0))})});var A=this[u],F;if(A)F=new Promise(b(A,this));else{var I=this[f].read();if(I!==null)return Promise.resolve(h(I,!1));F=new Promise(this[c])}return this[u]=F,F}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var E=this;return new Promise(function(S,A){E[f].destroy(null,function(F){if(F){A(F);return}S(h(void 0,!0))})})}),e),v),y=function(E){var S,A=Object.create(w,(S={},t(S,f,{value:E,writable:!0}),t(S,i,{value:null,writable:!0}),t(S,o,{value:null,writable:!0}),t(S,s,{value:null,writable:!0}),t(S,a,{value:E._readableState.endEmitted,writable:!0}),t(S,c,{value:function(I,X){var Z=A[f].read();Z?(A[u]=null,A[i]=null,A[o]=null,I(h(Z,!1))):(A[i]=I,A[o]=X)},writable:!0}),S));return A[u]=null,n(E,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var I=A[o];I!==null&&(A[u]=null,A[i]=null,A[o]=null,I(F)),A[s]=F;return}var X=A[i];X!==null&&(A[u]=null,A[i]=null,A[o]=null,X(h(void 0,!0))),A[a]=!0}),E.on("readable",m.bind(null,A)),A};return yE=y,yE}function iU(){return II||(II=!0,bE=function(){throw new Error("Readable.from is not available in the browser")}),bE}function OE(){if(OI)return wE;OI=!0;var r=Gt;wE=H;var e;H.ReadableState=Z,nn.EventEmitter;var t=function(B,se){return B.listeners(se).length},n=WI(),i=Zf.Buffer,o=sU.Uint8Array||function(){};function s(V){return i.from(V)}function a(V){return i.isBuffer(V)||V instanceof o}var u=ze,c;u&&u.debuglog?c=u.debuglog("stream"):c=function(){};var f=eU(),h=qI(),d=HI(),m=d.getHighWaterMark,b=Jf().codes,v=b.ERR_INVALID_ARG_TYPE,w=b.ERR_STREAM_PUSH_AFTER_EOF,y=b.ERR_METHOD_NOT_IMPLEMENTED,_=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,S,A;zu()(H,n);var F=h.errorOrDestroy,I=["error","close","destroy","pause","resume"];function X(V,B,se){if(typeof V.prependListener=="function")return V.prependListener(B,se);!V._events||!V._events[B]?V.on(B,se):Array.isArray(V._events[B])?V._events[B].unshift(se):V._events[B]=[se,V._events[B]]}function Z(V,B,se){e=e||$u(),V=V||{},typeof se!="boolean"&&(se=B instanceof e),this.objectMode=!!V.objectMode,se&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=m(this,V,"readableHighWaterMark",se),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(E||(E=TE.StringDecoder),this.decoder=new E(V.encoding),this.encoding=V.encoding)}function H(V){if(e=e||$u(),!(this instanceof H))return new H(V);var B=this instanceof e;this._readableState=new Z(V,this,B),this.readable=!0,V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy)),n.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),H.prototype.destroy=h.destroy,H.prototype._undestroy=h.undestroy,H.prototype._destroy=function(V,B){B(V)},H.prototype.push=function(V,B){var se=this._readableState,ge;return se.objectMode?ge=!0:typeof V=="string"&&(B=B||se.defaultEncoding,B!==se.encoding&&(V=i.from(V,B),B=""),ge=!0),ne(this,V,B,!1,ge)},H.prototype.unshift=function(V){return ne(this,V,null,!0,!1)};function ne(V,B,se,ge,Se){c("readableAddChunk",B);var be=V._readableState;if(B===null)be.reading=!1,N(V,be);else{var pe;if(Se||(pe=$(be,B)),pe)F(V,pe);else if(be.objectMode||B&&B.length>0)if(typeof B!="string"&&!be.objectMode&&Object.getPrototypeOf(B)!==i.prototype&&(B=s(B)),ge)be.endEmitted?F(V,new _):L(V,be,B,!0);else if(be.ended)F(V,new w);else{if(be.destroyed)return!1;be.reading=!1,be.decoder&&!se?(B=be.decoder.write(B),be.objectMode||B.length!==0?L(V,be,B,!1):C(V,be)):L(V,be,B,!1)}else ge||(be.reading=!1,C(V,be))}return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function L(V,B,se,ge){B.flowing&&B.length===0&&!B.sync?(B.awaitDrain=0,V.emit("data",se)):(B.length+=B.objectMode?1:se.length,ge?B.buffer.unshift(se):B.buffer.push(se),B.needReadable&&x(V)),C(V,B)}function $(V,B){var se;return!a(B)&&typeof B!="string"&&B!==void 0&&!V.objectMode&&(se=new v("chunk",["string","Buffer","Uint8Array"],B)),se}H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(V){E||(E=TE.StringDecoder);var B=new E(V);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ge="";se!==null;)ge+=B.write(se.data),se=se.next;return this._readableState.buffer.clear(),ge!==""&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var K=1073741824;function le(V){return V>=K?V=K:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}function te(V,B){return V<=0||B.length===0&&B.ended?0:B.objectMode?1:V!==V?B.flowing&&B.length?B.buffer.head.data.length:B.length:(V>B.highWaterMark&&(B.highWaterMark=le(V)),V<=B.length?V:B.ended?B.length:(B.needReadable=!0,0))}H.prototype.read=function(V){c("read",V),V=parseInt(V,10);var B=this._readableState,se=V;if(V!==0&&(B.emittedReadable=!1),V===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return c("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?oe(this):x(this),null;if(V=te(V,B),V===0&&B.ended)return B.length===0&&oe(this),null;var ge=B.needReadable;c("need readable",ge),(B.length===0||B.length-V<B.highWaterMark)&&(ge=!0,c("length less than watermark",ge)),B.ended||B.reading?(ge=!1,c("reading or ended",ge)):ge&&(c("do read"),B.reading=!0,B.sync=!0,B.length===0&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(V=te(se,B)));var Se;return V>0?Se=W(V,B):Se=null,Se===null?(B.needReadable=B.length<=B.highWaterMark,V=0):(B.length-=V,B.awaitDrain=0),B.length===0&&(B.ended||(B.needReadable=!0),se!==V&&B.ended&&oe(this)),Se!==null&&this.emit("data",Se),Se};function N(V,B){if(c("onEofChunk"),!B.ended){if(B.decoder){var se=B.decoder.end();se&&se.length&&(B.buffer.push(se),B.length+=B.objectMode?1:se.length)}B.ended=!0,B.sync?x(V):(B.needReadable=!1,B.emittedReadable||(B.emittedReadable=!0,P(V)))}}function x(V){var B=V._readableState;c("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(c("emitReadable",B.flowing),B.emittedReadable=!0,r.nextTick(P,V))}function P(V){var B=V._readableState;c("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&(B.length||B.ended)&&(V.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,re(V)}function C(V,B){B.readingMore||(B.readingMore=!0,r.nextTick(U,V,B))}function U(V,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){var se=B.length;if(c("maybeReadMore read 0"),V.read(0),se===B.length)break}B.readingMore=!1}H.prototype._read=function(V){F(this,new y("_read()"))},H.prototype.pipe=function(V,B){var se=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=V;break;case 1:ge.pipes=[ge.pipes,V];break;default:ge.pipes.push(V);break}ge.pipesCount+=1,c("pipe count=%d opts=%j",ge.pipesCount,B);var Se=(!B||B.end!==!1)&&V!==r.stdout&&V!==r.stderr,be=Se?Ae:g;ge.endEmitted?r.nextTick(be):se.once("end",be),V.on("unpipe",pe);function pe(p,R){c("onunpipe"),p===se&&R&&R.hasUnpiped===!1&&(R.hasUnpiped=!0,Oe())}function Ae(){c("onend"),V.end()}var $e=j(se);V.on("drain",$e);var ke=!1;function Oe(){c("cleanup"),V.removeListener("close",tt),V.removeListener("finish",T),V.removeListener("drain",$e),V.removeListener("error",Je),V.removeListener("unpipe",pe),se.removeListener("end",Ae),se.removeListener("end",g),se.removeListener("data",Ve),ke=!0,ge.awaitDrain&&(!V._writableState||V._writableState.needDrain)&&$e()}se.on("data",Ve);function Ve(p){c("ondata");var R=V.write(p);c("dest.write",R),R===!1&&((ge.pipesCount===1&&ge.pipes===V||ge.pipesCount>1&&xe(ge.pipes,V)!==-1)&&!ke&&(c("false write response, pause",ge.awaitDrain),ge.awaitDrain++),se.pause())}function Je(p){c("onerror",p),g(),V.removeListener("error",Je),t(V,"error")===0&&F(V,p)}X(V,"error",Je);function tt(){V.removeListener("finish",T),g()}V.once("close",tt);function T(){c("onfinish"),V.removeListener("close",tt),g()}V.once("finish",T);function g(){c("unpipe"),se.unpipe(V)}return V.emit("pipe",se),ge.flowing||(c("pipe resume"),se.resume()),V};function j(V){return function(){var se=V._readableState;c("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&t(V,"data")&&(se.flowing=!0,re(V))}}H.prototype.unpipe=function(V){var B=this._readableState,se={hasUnpiped:!1};if(B.pipesCount===0)return this;if(B.pipesCount===1)return V&&V!==B.pipes?this:(V||(V=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,V&&V.emit("unpipe",this,se),this);if(!V){var ge=B.pipes,Se=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var be=0;be<Se;be++)ge[be].emit("unpipe",this,{hasUnpiped:!1});return this}var pe=xe(B.pipes,V);return pe===-1?this:(B.pipes.splice(pe,1),B.pipesCount-=1,B.pipesCount===1&&(B.pipes=B.pipes[0]),V.emit("unpipe",this,se),this)},H.prototype.on=function(V,B){var se=n.prototype.on.call(this,V,B),ge=this._readableState;return V==="data"?(ge.readableListening=this.listenerCount("readable")>0,ge.flowing!==!1&&this.resume()):V==="readable"&&!ge.endEmitted&&!ge.readableListening&&(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,c("on readable",ge.length,ge.reading),ge.length?x(this):ge.reading||r.nextTick(Q,this)),se},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(V,B){var se=n.prototype.removeListener.call(this,V,B);return V==="readable"&&r.nextTick(M,this),se},H.prototype.removeAllListeners=function(V){var B=n.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&r.nextTick(M,this),B};function M(V){var B=V._readableState;B.readableListening=V.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:V.listenerCount("data")>0&&V.resume()}function Q(V){c("readable nexttick read 0"),V.read(0)}H.prototype.resume=function(){var V=this._readableState;return V.flowing||(c("resume"),V.flowing=!V.readableListening,ce(this,V)),V.paused=!1,this};function ce(V,B){B.resumeScheduled||(B.resumeScheduled=!0,r.nextTick(_e,V,B))}function _e(V,B){c("resume",B.reading),B.reading||V.read(0),B.resumeScheduled=!1,V.emit("resume"),re(V),B.flowing&&!B.reading&&V.read(0)}H.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function re(V){var B=V._readableState;for(c("flow",B.flowing);B.flowing&&V.read()!==null;);}H.prototype.wrap=function(V){var B=this,se=this._readableState,ge=!1;V.on("end",function(){if(c("wrapped end"),se.decoder&&!se.ended){var pe=se.decoder.end();pe&&pe.length&&B.push(pe)}B.push(null)}),V.on("data",function(pe){if(c("wrapped data"),se.decoder&&(pe=se.decoder.write(pe)),!(se.objectMode&&pe==null)&&!(!se.objectMode&&(!pe||!pe.length))){var Ae=B.push(pe);Ae||(ge=!0,V.pause())}});for(var Se in V)this[Se]===void 0&&typeof V[Se]=="function"&&(this[Se]=(function(Ae){return function(){return V[Ae].apply(V,arguments)}})(Se));for(var be=0;be<I.length;be++)V.on(I[be],this.emit.bind(this,I[be]));return this._read=function(pe){c("wrapped _read",pe),ge&&(ge=!1,V.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return S===void 0&&(S=nU()),S(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),H._fromList=W,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function W(V,B){if(B.length===0)return null;var se;return B.objectMode?se=B.buffer.shift():!V||V>=B.length?(B.decoder?se=B.buffer.join(""):B.buffer.length===1?se=B.buffer.first():se=B.buffer.concat(B.length),B.buffer.clear()):se=B.buffer.consume(V,B.decoder),se}function oe(V){var B=V._readableState;c("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,r.nextTick(we,B,V))}function we(V,B){if(c("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&V.length===0&&(V.endEmitted=!0,B.readable=!1,B.emit("end"),V.autoDestroy)){var se=B._writableState;(!se||se.autoDestroy&&se.finished)&&B.destroy()}}typeof Symbol=="function"&&(H.from=function(V,B){return A===void 0&&(A=iU()),A(H,V,B)});function xe(V,B){for(var se=0,ge=V.length;se<ge;se++)if(V[se]===B)return se;return-1}return wE}function NE(){if(NI)return vE;NI=!0,vE=a;var r=Jf().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,o=$u();zu()(a,o);function s(f,h){var d=this._transformState;d.transforming=!1;var m=d.writecb;if(m===null)return this.emit("error",new t);d.writechunk=null,d.writecb=null,h!=null&&this.push(h),m(f);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function a(f){if(!(this instanceof a))return new a(f);o.call(this,f),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",u)}function u(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,d){c(f,h,d)}):c(this,null,null)}a.prototype.push=function(f,h){return this._transformState.needTransform=!1,o.prototype.push.call(this,f,h)},a.prototype._transform=function(f,h,d){d(new e("_transform()"))},a.prototype._write=function(f,h,d){var m=this._transformState;if(m.writecb=d,m.writechunk=f,m.writeencoding=h,!m.transforming){var b=this._readableState;(m.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(f){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(f,h){o.prototype._destroy.call(this,f,function(d){h(d)})};function c(f,h,d){if(h)return f.emit("error",h);if(d!=null&&f.push(d),f._writableState.length)throw new i;if(f._transformState.transforming)throw new n;return f.push(null)}return vE}function GI(){if(kI)return _E;kI=!0,_E=e;var r=NE();zu()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},_E}function VI(){if(LI)return EE;LI=!0;var r;function e(d){var m=!1;return function(){m||(m=!0,d.apply(void 0,arguments))}}var t=Jf().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function o(d){if(d)throw d}function s(d){return d.setHeader&&typeof d.abort=="function"}function a(d,m,b,v){v=e(v);var w=!1;d.on("close",function(){w=!0}),r===void 0&&(r=eb()),r(d,{readable:m,writable:b},function(_){if(_)return v(_);w=!0,v()});var y=!1;return function(_){if(!w&&!y){if(y=!0,s(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();v(_||new i("pipe"))}}}function u(d){d()}function c(d,m){return d.pipe(m)}function f(d){return!d.length||typeof d[d.length-1]!="function"?o:d.pop()}function h(){for(var d=arguments.length,m=new Array(d),b=0;b<d;b++)m[b]=arguments[b];var v=f(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new n("streams");var w,y=m.map(function(_,E){var S=E<m.length-1,A=E>0;return a(_,S,A,function(F){w||(w=F),F&&y.forEach(u),!S&&(y.forEach(u),v(w))})});return m.reduce(c)}return EE=h,EE}var PI,Rs,Ai,sI,Y0,Bu,oI,D5,Zo,AE,Kf,lI,$5,z5,Z0,J0,ro,W5,TE,CE,gI,Fp,mI,X0,yI,ju,bI,Zf,K0,wI,aE,vI,lE,_I,uE,EI,cE,AI,fE,xI,hE,SI,dE,pE,TI,rU,gE,CI,mE,RI,yE,DI,bE,II,wE,OI,sU,vE,NI,_E,kI,EE,LI,tb=Jt(()=>{Ce();De();Re();Xf();cl();qf();for(PI={byteLength:function(r){var e=aI(r),t=e[0],n=e[1];return 3*(t+n)/4-n},toByteArray:function(r){var e,t,n=aI(r),i=n[0],o=n[1],s=new sI((function(c,f,h){return 3*(f+h)/4-h})(0,i,o)),a=0,u=o>0?i-4:i;for(t=0;t<u;t+=4)e=Ai[r.charCodeAt(t)]<<18|Ai[r.charCodeAt(t+1)]<<12|Ai[r.charCodeAt(t+2)]<<6|Ai[r.charCodeAt(t+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return o===2&&(e=Ai[r.charCodeAt(t)]<<2|Ai[r.charCodeAt(t+1)]>>4,s[a++]=255&e),o===1&&(e=Ai[r.charCodeAt(t)]<<10|Ai[r.charCodeAt(t+1)]<<4|Ai[r.charCodeAt(t+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},fromByteArray:function(r){for(var e,t=r.length,n=t%3,i=[],o=0,s=t-n;o<s;o+=16383)i.push(R5(r,o,o+16383>s?s:o+16383));return n===1?(e=r[t-1],i.push(Rs[e>>2]+Rs[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Rs[e>>10]+Rs[e>>4&63]+Rs[e<<2&63]+"=")),i.join("")}},Rs=[],Ai=[],sI=typeof Uint8Array<"u"?Uint8Array:Array,Y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bu=0,oI=Y0.length;Bu<oI;++Bu)Rs[Bu]=Y0[Bu],Ai[Y0.charCodeAt(Bu)]=Bu;Ai[45]=62,Ai[95]=63;D5={read:function(r,e,t,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=256*o+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:1/0*(m?-1:1);s+=Math.pow(2,n),o-=c}return(m?-1:1)*s*Math.pow(2,o-n)},write:function(r,e,t,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=255&a,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=255&s,m+=b,s/=256,c-=8);r[t+m-b]|=128*v}},Zo={},AE=PI,Kf=D5,lI=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Zo.Buffer=Ge,Zo.SlowBuffer=function(r){return+r!=r&&(r=0),Ge.alloc(+r)},Zo.INSPECT_MAX_BYTES=50;Zo.kMaxLength=2147483647,Ge.TYPED_ARRAY_SUPPORT=(function(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}})(),Ge.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Ge.prototype,"parent",{enumerable:!0,get:function(){if(Ge.isBuffer(this))return this.buffer}}),Object.defineProperty(Ge.prototype,"offset",{enumerable:!0,get:function(){if(Ge.isBuffer(this))return this.byteOffset}}),Ge.poolSize=8192,Ge.from=function(r,e,t){return MI(r,e,t)},Object.setPrototypeOf(Ge.prototype,Uint8Array.prototype),Object.setPrototypeOf(Ge,Uint8Array),Ge.alloc=function(r,e,t){return(function(n,i,o){return BI(n),n<=0?Xo(n):i!==void 0?typeof o=="string"?Xo(n).fill(i,o):Xo(n).fill(i):Xo(n)})(r,e,t)},Ge.allocUnsafe=function(r){return xE(r)},Ge.allocUnsafeSlow=function(r){return xE(r)},Ge.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==Ge.prototype},Ge.compare=function(r,e){if(Ko(r,Uint8Array)&&(r=Ge.from(r,r.offset,r.byteLength)),Ko(e,Uint8Array)&&(e=Ge.from(e,e.offset,e.byteLength)),!Ge.isBuffer(r)||!Ge.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===e)return 0;for(var t=r.length,n=e.length,i=0,o=Math.min(t,n);i<o;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0},Ge.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ge.concat=function(r,e){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return Ge.alloc(0);var t;if(e===void 0)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var n=Ge.allocUnsafe(e),i=0;for(t=0;t<r.length;++t){var o=r[t];if(Ko(o,Uint8Array)&&(o=Ge.from(o)),!Ge.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},Ge.byteLength=FI,Ge.prototype._isBuffer=!0,Ge.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)Fu(this,e,e+1);return this},Ge.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)Fu(this,e,e+3),Fu(this,e+1,e+2);return this},Ge.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)Fu(this,e,e+7),Fu(this,e+1,e+6),Fu(this,e+2,e+5),Fu(this,e+3,e+4);return this},Ge.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?jI(this,0,r):I5.apply(this,arguments)},Ge.prototype.toLocaleString=Ge.prototype.toString,Ge.prototype.equals=function(r){if(!Ge.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||Ge.compare(this,r)===0},Ge.prototype.inspect=function(){var r="",e=Zo.INSPECT_MAX_BYTES;return r=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(r+=" ... "),"<Buffer "+r+">"},lI&&(Ge.prototype[lI]=Ge.prototype.inspect),Ge.prototype.compare=function(r,e,t,n,i){if(Ko(r,Uint8Array)&&(r=Ge.from(r,r.offset,r.byteLength)),!Ge.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(e===void 0&&(e=0),t===void 0&&(t=r?r.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),e<0||t>r.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=t)return 0;if(n>=i)return-1;if(e>=t)return 1;if(this===r)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(t>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=r.slice(e,t),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},Ge.prototype.includes=function(r,e,t){return this.indexOf(r,e,t)!==-1},Ge.prototype.indexOf=function(r,e,t){return cI(this,r,e,t,!0)},Ge.prototype.lastIndexOf=function(r,e,t){return cI(this,r,e,t,!1)},Ge.prototype.write=function(r,e,t,n){if(e===void 0)n="utf8",t=this.length,e=0;else if(t===void 0&&typeof e=="string")n=e,t=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(t)?(t>>>=0,n===void 0&&(n="utf8")):(n=t,t=void 0)}var i=this.length-e;if((t===void 0||t>i)&&(t=i),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return O5(this,r,e,t);case"utf8":case"utf-8":return N5(this,r,e,t);case"ascii":return UI(this,r,e,t);case"latin1":case"binary":return k5(this,r,e,t);case"base64":return L5(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P5(this,r,e,t);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Ge.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};Ge.prototype.slice=function(r,e){var t=this.length;(r=~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),(e=e===void 0?t:~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),e<r&&(e=r);var n=this.subarray(r,e);return Object.setPrototypeOf(n,Ge.prototype),n},Ge.prototype.readUIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n},Ge.prototype.readUIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r+--e],i=1;e>0&&(i*=256);)n+=this[r+--e]*i;return n},Ge.prototype.readUInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),this[r]},Ge.prototype.readUInt16LE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]|this[r+1]<<8},Ge.prototype.readUInt16BE=function(r,e){return r>>>=0,e||hn(r,2,this.length),this[r]<<8|this[r+1]},Ge.prototype.readUInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},Ge.prototype.readUInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},Ge.prototype.readIntLE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=this[r],i=1,o=0;++o<e&&(i*=256);)n+=this[r+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},Ge.prototype.readIntBE=function(r,e,t){r>>>=0,e>>>=0,t||hn(r,e,this.length);for(var n=e,i=1,o=this[r+--n];n>0&&(i*=256);)o+=this[r+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},Ge.prototype.readInt8=function(r,e){return r>>>=0,e||hn(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},Ge.prototype.readInt16LE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r]|this[r+1]<<8;return 32768&t?4294901760|t:t},Ge.prototype.readInt16BE=function(r,e){r>>>=0,e||hn(r,2,this.length);var t=this[r+1]|this[r]<<8;return 32768&t?4294901760|t:t},Ge.prototype.readInt32LE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},Ge.prototype.readInt32BE=function(r,e){return r>>>=0,e||hn(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},Ge.prototype.readFloatLE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!0,23,4)},Ge.prototype.readFloatBE=function(r,e){return r>>>=0,e||hn(r,4,this.length),Kf.read(this,r,!1,23,4)},Ge.prototype.readDoubleLE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!0,52,8)},Ge.prototype.readDoubleBE=function(r,e){return r>>>=0,e||hn(r,8,this.length),Kf.read(this,r,!1,52,8)},Ge.prototype.writeUIntLE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=1,o=0;for(this[e]=255&r;++o<t&&(i*=256);)this[e+o]=r/i&255;return e+t},Ge.prototype.writeUIntBE=function(r,e,t,n){r=+r,e>>>=0,t>>>=0,n||ni(this,r,e,t,Math.pow(2,8*t)-1,0);var i=t-1,o=1;for(this[e+i]=255&r;--i>=0&&(o*=256);)this[e+i]=r/o&255;return e+t},Ge.prototype.writeUInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,255,0),this[e]=255&r,e+1},Ge.prototype.writeUInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=255&r,this[e+1]=r>>>8,e+2},Ge.prototype.writeUInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,65535,0),this[e]=r>>>8,this[e+1]=255&r,e+2},Ge.prototype.writeUInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=255&r,e+4},Ge.prototype.writeUInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,4294967295,0),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Ge.prototype.writeIntLE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&r;++o<t&&(s*=256);)r<0&&a===0&&this[e+o-1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Ge.prototype.writeIntBE=function(r,e,t,n){if(r=+r,e>>>=0,!n){var i=Math.pow(2,8*t-1);ni(this,r,e,t,i-1,-i)}var o=t-1,s=1,a=0;for(this[e+o]=255&r;--o>=0&&(s*=256);)r<0&&a===0&&this[e+o+1]!==0&&(a=1),this[e+o]=(r/s>>0)-a&255;return e+t},Ge.prototype.writeInt8=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,1,127,-128),r<0&&(r=255+r+1),this[e]=255&r,e+1},Ge.prototype.writeInt16LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=255&r,this[e+1]=r>>>8,e+2},Ge.prototype.writeInt16BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,2,32767,-32768),this[e]=r>>>8,this[e+1]=255&r,e+2},Ge.prototype.writeInt32LE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),this[e]=255&r,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24,e+4},Ge.prototype.writeInt32BE=function(r,e,t){return r=+r,e>>>=0,t||ni(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=255&r,e+4},Ge.prototype.writeFloatLE=function(r,e,t){return hI(this,r,e,!0,t)},Ge.prototype.writeFloatBE=function(r,e,t){return hI(this,r,e,!1,t)},Ge.prototype.writeDoubleLE=function(r,e,t){return dI(this,r,e,!0,t)},Ge.prototype.writeDoubleBE=function(r,e,t){return dI(this,r,e,!1,t)},Ge.prototype.copy=function(r,e,t,n){if(!Ge.isBuffer(r))throw new TypeError("argument should be a Buffer");if(t||(t=0),n||n===0||(n=this.length),e>=r.length&&(e=r.length),e||(e=0),n>0&&n<t&&(n=t),n===t||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),r.length-e<n-t&&(n=r.length-e+t);var i=n-t;if(this===r&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,t,n);else if(this===r&&t<e&&e<n)for(var o=i-1;o>=0;--o)r[o+e]=this[o+t];else Uint8Array.prototype.set.call(r,this.subarray(t,n),e);return i},Ge.prototype.fill=function(r,e,t,n){if(typeof r=="string"){if(typeof e=="string"?(n=e,e=0,t=this.length):typeof t=="string"&&(n=t,t=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Ge.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(r.length===1){var i=r.charCodeAt(0);(n==="utf8"&&i<128||n==="latin1")&&(r=i)}}else typeof r=="number"?r&=255:typeof r=="boolean"&&(r=Number(r));if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;var o;if(e>>>=0,t=t===void 0?this.length:t>>>0,r||(r=0),typeof r=="number")for(o=e;o<t;++o)this[o]=r;else{var s=Ge.isBuffer(r)?r:Ge.from(r,n),a=s.length;if(a===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<t-e;++o)this[o+e]=s[o%a]}return this};$5=/[^+/0-9A-Za-z-_]/g;z5=(function(){for(var r=new Array(256),e=0;e<16;++e)for(var t=16*e,n=0;n<16;++n)r[t+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return r})();Zo.Buffer;Zo.INSPECT_MAX_BYTES;Zo.kMaxLength;Z0={},J0=Zo,ro=J0.Buffer;ro.from&&ro.alloc&&ro.allocUnsafe&&ro.allocUnsafeSlow?Z0=J0:(pI(J0,Z0),Z0.Buffer=Uu),Uu.prototype=Object.create(ro.prototype),pI(ro,Uu),Uu.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ro(r,e,t)},Uu.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ro(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n},Uu.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ro(r)},Uu.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return J0.SlowBuffer(r)};W5=Z0,TE={},CE=W5.Buffer,gI=CE.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};TE.StringDecoder=Bp,Bp.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if((e=this.fillLast(r))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""},Bp.prototype.end=function(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e},Bp.prototype.text=function(r,e){var t=(function(i,o,s){var a=o.length-1;if(a<s)return 0;var u=oE(o[a]);return u>=0?(u>0&&(i.lastNeed=u-1),u):--a<s||u===-2?0:(u=oE(o[a]))>=0?(u>0&&(i.lastNeed=u-2),u):--a<s||u===-2?0:(u=oE(o[a]))>=0?(u>0&&(u===2?u=0:i.lastNeed=u-3),u):0})(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)},Bp.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};Fp={},mI=!1;X0={},yI=!1;ju={},bI=!1;Zf=Q5();Zf.Buffer;Zf.INSPECT_MAX_BYTES;Zf.kMaxLength;K0={},wI=!1;aE={},vI=!1;lE={},_I=!1;uE={},EI=!1;cE={},AI=!1;fE={},xI=!1;hE={},SI=!1,dE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pE={},TI=!1,rU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;gE={},CI=!1;mE={},RI=!1;yE={},DI=!1;bE={},II=!1;wE={},OI=!1,sU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;vE={},NI=!1;_E={},kI=!1;EE={},LI=!1});function oU(){if(YI)return kE;YI=!0,kE=t;var r=nn.EventEmitter,e=zu();e(t,r),t.Readable=OE(),t.Writable=IE(),t.Duplex=$u(),t.Transform=NE(),t.PassThrough=GI(),t.finished=eb(),t.pipeline=VI(),t.Stream=t;function t(){r.call(this||LE)}return t.prototype.pipe=function(n,i){var o=this||LE;function s(m){n.writable&&n.write(m)===!1&&o.pause&&o.pause()}o.on("data",s);function a(){o.readable&&o.resume&&o.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(o.on("end",c),o.on("close",f));var u=!1;function c(){u||(u=!0,n.end())}function f(){u||(u=!0,typeof n.destroy=="function"&&n.destroy())}function h(m){if(d(),r.listenerCount(this||LE,"error")===0)throw m}o.on("error",h),n.on("error",h);function d(){o.removeListener("data",s),n.removeListener("drain",a),o.removeListener("end",c),o.removeListener("close",f),o.removeListener("error",h),n.removeListener("error",h),o.removeListener("end",d),o.removeListener("close",d),n.removeListener("close",d)}return o.on("end",d),o.on("close",d),n.on("close",d),n.emit("pipe",o),n},kE}var kE,YI,LE,ii,XI,PE=Jt(()=>{Ce();De();Re();V0();tb();Xf();q0();cl();qf();kE={},YI=!1,LE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;ii=oU(),XI=ii.Readable;XI.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new XI(e).wrap(r)};ii.Writable;ii.Duplex;ii.Transform;ii.PassThrough;ii.finished;ii.pipeline;ii.Stream;q_(ii.finished),q_(ii.pipeline)});function aU(){if(KI)return ME;KI=!0;let r=2147483647,e=36,t=1,n=26,i=38,o=700,s=72,a=128,u="-",c=/^xn--/,f=/[^\0-\x7F]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=e-t,b=Math.floor,v=String.fromCharCode;function w($){throw new RangeError(d[$])}function y($,K){let le=[],te=$.length;for(;te--;)le[te]=K($[te]);return le}function _($,K){let le=$.split("@"),te="";le.length>1&&(te=le[0]+"@",$=le[1]),$=$.replace(h,".");let N=$.split("."),x=y(N,K).join(".");return te+x}function E($){let K=[],le=0,te=$.length;for(;le<te;){let N=$.charCodeAt(le++);if(N>=55296&&N<=56319&&le<te){let x=$.charCodeAt(le++);(x&64512)==56320?K.push(((N&1023)<<10)+(x&1023)+65536):(K.push(N),le--)}else K.push(N)}return K}let S=$=>String.fromCodePoint(...$),A=function($){return $>=48&&$<58?26+($-48):$>=65&&$<91?$-65:$>=97&&$<123?$-97:e},F=function($,K){return $+22+75*($<26)-((K!=0)<<5)},I=function($,K,le){let te=0;for($=le?b($/o):$>>1,$+=b($/K);$>m*n>>1;te+=e)$=b($/m);return b(te+(m+1)*$/($+i))},X=function($){let K=[],le=$.length,te=0,N=a,x=s,P=$.lastIndexOf(u);P<0&&(P=0);for(let C=0;C<P;++C)$.charCodeAt(C)>=128&&w("not-basic"),K.push($.charCodeAt(C));for(let C=P>0?P+1:0;C<le;){let U=te;for(let M=1,Q=e;;Q+=e){C>=le&&w("invalid-input");let ce=A($.charCodeAt(C++));ce>=e&&w("invalid-input"),ce>b((r-te)/M)&&w("overflow"),te+=ce*M;let _e=Q<=x?t:Q>=x+n?n:Q-x;if(ce<_e)break;let re=e-_e;M>b(r/re)&&w("overflow"),M*=re}let j=K.length+1;x=I(te-U,j,U==0),b(te/j)>r-N&&w("overflow"),N+=b(te/j),te%=j,K.splice(te++,0,N)}return String.fromCodePoint(...K)},Z=function($){let K=[];$=E($);let le=$.length,te=a,N=0,x=s;for(let U of $)U<128&&K.push(v(U));let P=K.length,C=P;for(P&&K.push(u);C<le;){let U=r;for(let M of $)M>=te&&M<U&&(U=M);let j=C+1;U-te>b((r-N)/j)&&w("overflow"),N+=(U-te)*j,te=U;for(let M of $)if(M<te&&++N>r&&w("overflow"),M===te){let Q=N;for(let ce=e;;ce+=e){let _e=ce<=x?t:ce>=x+n?n:ce-x;if(Q<_e)break;let re=Q-_e,W=e-_e;K.push(v(F(_e+re%W,0))),Q=b(re/W)}K.push(v(F(Q,0))),x=I(N,j,C===P),N=0,++C}++N,++te}return K.join("")};return ME={version:"2.3.1",ucs2:{decode:E,encode:S},decode:X,encode:Z,toASCII:function($){return _($,function(K){return f.test(K)?"xn--"+Z(K):K})},toUnicode:function($){return _($,function(K){return c.test(K)?X(K.slice(4).toLowerCase()):K})}},ME}var ME,KI,dl,iX,sX,oX,aX,lX,uX,BE=Jt(()=>{Ce();De();Re();ME={},KI=!1;dl=aU(),iX=dl.decode,sX=dl.encode,oX=dl.toASCII,aX=dl.toUnicode,lX=dl.ucs2,uX=dl.version});function i2(){return ZI||(ZI=!0,FE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),FE}function lU(){return JI||(JI=!0,UE=Error),UE}function uU(){return QI||(QI=!0,jE=EvalError),jE}function cU(){return eO||(eO=!0,$E=RangeError),$E}function fU(){return tO||(tO=!0,zE=ReferenceError),zE}function bO(){return rO||(rO=!0,WE=SyntaxError),WE}function Qf(){return nO||(nO=!0,qE=TypeError),qE}function hU(){return iO||(iO=!0,HE=URIError),HE}function dU(){if(sO)return GE;sO=!0;var r=typeof Symbol<"u"&&Symbol,e=i2();return GE=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},GE}function pU(){if(oO)return VE;oO=!0;var r={__proto__:null,foo:{}},e=Object;return VE=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof e)},VE}function gU(){if(aO)return YE;aO=!0;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(u,c){for(var f=[],h=0;h<u.length;h+=1)f[h]=u[h];for(var d=0;d<c.length;d+=1)f[d+u.length]=c[d];return f},o=function(u,c){for(var f=[],h=c,d=0;h<u.length;h+=1,d+=1)f[d]=u[h];return f},s=function(a,u){for(var c="",f=0;f<a.length;f+=1)c+=a[f],f+1<a.length&&(c+=u);return c};return YE=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var f=o(arguments,1),h,d=function(){if(this instanceof h){var y=c.apply(this,i(f,arguments));return Object(y)===y?y:this}return c.apply(u,i(f,arguments))},m=t(0,c.length-f.length),b=[],v=0;v<m;v++)b[v]="$"+v;if(h=Function("binder","return function ("+s(b,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var w=function(){};w.prototype=c.prototype,h.prototype=new w,w.prototype=null}return h},YE}function s2(){if(lO)return XE;lO=!0;var r=gU();return XE=Function.prototype.bind||r,XE}function mU(){if(uO)return KE;uO=!0;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=s2();return KE=t.call(r,e),KE}function Wu(){if(cO)return ZE;cO=!0;var r,e=lU(),t=uU(),n=cU(),i=fU(),o=bO(),s=Qf(),a=hU(),u=Function,c=function(N){try{return u('"use strict"; return ('+N+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var h=function(){throw new s},d=f?(function(){try{return arguments.callee,h}catch{try{return f(arguments,"callee").get}catch{return h}}})():h,m=dU()(),b=pU()(),v=Object.getPrototypeOf||(b?function(N){return N.__proto__}:null),w={},y=typeof Uint8Array>"u"||!v?r:v(Uint8Array),_={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!m||!v?r:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!m||!v?r:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):r,"%Symbol%":m?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":d,"%TypedArray%":y,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet};if(v)try{null.error}catch(N){var E=v(v(N));_["%Error.prototype%"]=E}var S=function N(x){var P;if(x==="%AsyncFunction%")P=c("async function () {}");else if(x==="%GeneratorFunction%")P=c("function* () {}");else if(x==="%AsyncGeneratorFunction%")P=c("async function* () {}");else if(x==="%AsyncGenerator%"){var C=N("%AsyncGeneratorFunction%");C&&(P=C.prototype)}else if(x==="%AsyncIteratorPrototype%"){var U=N("%AsyncGenerator%");U&&v&&(P=v(U.prototype))}return _[x]=P,P},A={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F=s2(),I=mU(),X=F.call(Function.call,Array.prototype.concat),Z=F.call(Function.apply,Array.prototype.splice),H=F.call(Function.call,String.prototype.replace),ne=F.call(Function.call,String.prototype.slice),L=F.call(Function.call,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,K=/\\(\\)?/g,le=function(x){var P=ne(x,0,1),C=ne(x,-1);if(P==="%"&&C!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(C==="%"&&P!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var U=[];return H(x,$,function(j,M,Q,ce){U[U.length]=Q?H(ce,K,"$1"):M||j}),U},te=function(x,P){var C=x,U;if(I(A,C)&&(U=A[C],C="%"+U[0]+"%"),I(_,C)){var j=_[C];if(j===w&&(j=S(C)),typeof j>"u"&&!P)throw new s("intrinsic "+x+" exists, but is not available. Please file an issue!");return{alias:U,name:C,value:j}}throw new o("intrinsic "+x+" does not exist!")};return ZE=function(x,P){if(typeof x!="string"||x.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof P!="boolean")throw new s('"allowMissing" argument must be a boolean');if(L(/^%?[^%]*%?$/,x)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=le(x),U=C.length>0?C[0]:"",j=te("%"+U+"%",P),M=j.name,Q=j.value,ce=!1,_e=j.alias;_e&&(U=_e[0],Z(C,X([0,1],_e)));for(var re=1,W=!0;re<C.length;re+=1){var oe=C[re],we=ne(oe,0,1),xe=ne(oe,-1);if((we==='"'||we==="'"||we==="`"||xe==='"'||xe==="'"||xe==="`")&&we!==xe)throw new o("property names with quotes must have matching quotes");if((oe==="constructor"||!W)&&(ce=!0),U+="."+oe,M="%"+U+"%",I(_,M))Q=_[M];else if(Q!=null){if(!(oe in Q)){if(!P)throw new s("base intrinsic for "+x+" exists, but the property is not available.");return}if(f&&re+1>=C.length){var V=f(Q,oe);W=!!V,W&&"get"in V&&!("originalValue"in V.get)?Q=V.get:Q=Q[oe]}else W=I(Q,oe),Q=Q[oe];W&&!ce&&(_[M]=Q)}}return Q},ZE}function o2(){if(fO)return JE;fO=!0;var r=Wu(),e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return JE=e,JE}function rb(){if(hO)return QE;hO=!0;var r=Wu(),e=r("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return QE=e,QE}function yU(){if(dO)return e2;dO=!0;var r=o2(),e=bO(),t=Qf(),n=rb();return e2=function(o,s,a){if(!o||typeof o!="object"&&typeof o!="function")throw new t("`obj` must be an object or a function`");if(typeof s!="string"&&typeof s!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,d=!!n&&n(o,s);if(r)r(o,s,{configurable:f===null&&d?d.configurable:!f,enumerable:u===null&&d?d.enumerable:!u,value:a,writable:c===null&&d?d.writable:!c});else if(h||!u&&!c&&!f)o[s]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},e2}function bU(){if(pO)return t2;pO=!0;var r=o2(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},t2=e,t2}function wU(){if(gO)return r2;gO=!0;var r=Wu(),e=yU(),t=bU()(),n=rb(),i=Qf(),o=r("%Math.floor%");return r2=function(a,u){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||o(u)!==u)throw new i("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],f=!0,h=!0;if("length"in a&&n){var d=n(a,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(h=!1)}return(f||h||!c)&&(t?e(a,"length",u,!0,!0):e(a,"length",u)),a},r2}function a2(){if(mO)return Up;mO=!0;var r=s2(),e=Wu(),t=wU(),n=Qf(),i=e("%Function.prototype.apply%"),o=e("%Function.prototype.call%"),s=e("%Reflect.apply%",!0)||r.call(o,i),a=o2(),u=e("%Math.max%");Up=function(h){if(typeof h!="function")throw new n("a function is required");var d=s(r,o,arguments);return t(d,1+u(0,h.length-(arguments.length-1)),!0)};var c=function(){return s(r,i,arguments)};return a?a(Up,"apply",{value:c}):Up.apply=c,Up}function jp(){if(yO)return n2;yO=!0;var r=Wu(),e=a2(),t=e(r("String.prototype.indexOf"));return n2=function(i,o){var s=r(i,!!o);return typeof s=="function"&&t(i,".prototype.")>-1?e(s):s},n2}var FE,ZI,UE,JI,jE,QI,$E,eO,zE,tO,WE,rO,qE,nO,HE,iO,GE,sO,VE,oO,YE,aO,XE,lO,KE,uO,ZE,cO,JE,fO,QE,hO,e2,dO,t2,pO,r2,gO,Up,mO,n2,yO,$p=Jt(()=>{Ce();De();Re();FE={},ZI=!1;UE={},JI=!1;jE={},QI=!1;$E={},eO=!1;zE={},tO=!1;WE={},rO=!1;qE={},nO=!1;HE={},iO=!1;GE={},sO=!1;VE={},oO=!1;YE={},aO=!1;XE={},lO=!1;KE={},uO=!1;ZE={},cO=!1;JE={},fO=!1;QE={},hO=!1;e2={},dO=!1;t2={},pO=!1;r2={},gO=!1;Up={},mO=!1;n2={},yO=!1});function vU(){if(wO)return l2;wO=!0;var r=zr;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var a="",u=0,c=-1,f=0,h,d=0;d<=o.length;++d){if(d<o.length)h=o.charCodeAt(d);else{if(h===47)break;h=47}if(h===47){if(!(c===d-1||f===1))if(c!==d-1&&f===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){var m=a.lastIndexOf("/");if(m!==a.length-1){m===-1?(a="",u=0):(a=a.slice(0,m),u=a.length-1-a.lastIndexOf("/")),c=d,f=0;continue}}else if(a.length===2||a.length===1){a="",u=0,c=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+o.slice(c+1,d):a=o.slice(c+1,d),u=d-c-1;c=d,f=0}else h===46&&f!==-1?++f:f=-1}return a}function n(o,s){var a=s.dir||s.root,u=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+u:a+o+u:u}var i={resolve:function(){for(var s="",a=!1,u,c=arguments.length-1;c>=-1&&!a;c--){var f;c>=0?f=arguments[c]:(u===void 0&&(u=r.cwd()),f=u),e(f),f.length!==0&&(s=f+"/"+s,a=f.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,u=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&u&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var u=arguments[a];e(u),u.length>0&&(s===void 0?s=u:s+="/"+u)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var c=s.length,f=c-u,h=1;h<a.length&&a.charCodeAt(h)===47;++h);for(var d=a.length,m=d-h,b=f<m?f:m,v=-1,w=0;w<=b;++w){if(w===b){if(m>b){if(a.charCodeAt(h+w)===47)return a.slice(h+w+1);if(w===0)return a.slice(h+w)}else f>b&&(s.charCodeAt(u+w)===47?v=w:w===0&&(v=0));break}var y=s.charCodeAt(u+w),_=a.charCodeAt(h+w);if(y!==_)break;y===47&&(v=w)}var E="";for(w=u+v+1;w<=c;++w)(w===c||s.charCodeAt(w)===47)&&(E.length===0?E+="..":E+="/..");return E.length>0?E+a.slice(h+v):(h+=v,a.charCodeAt(h)===47&&++h,a.slice(h))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),u=a===47,c=-1,f=!0,h=s.length-1;h>=1;--h)if(a=s.charCodeAt(h),a===47){if(!f){c=h;break}}else f=!1;return c===-1?u?"/":".":u&&c===1?"//":s.slice(0,c)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var u=0,c=-1,f=!0,h;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var d=a.length-1,m=-1;for(h=s.length-1;h>=0;--h){var b=s.charCodeAt(h);if(b===47){if(!f){u=h+1;break}}else m===-1&&(f=!1,m=h+1),d>=0&&(b===a.charCodeAt(d)?--d===-1&&(c=h):(d=-1,c=m))}return u===c?c=m:c===-1&&(c=s.length),s.slice(u,c)}else{for(h=s.length-1;h>=0;--h)if(s.charCodeAt(h)===47){if(!f){u=h+1;break}}else c===-1&&(f=!1,c=h+1);return c===-1?"":s.slice(u,c)}},extname:function(s){e(s);for(var a=-1,u=0,c=-1,f=!0,h=0,d=s.length-1;d>=0;--d){var m=s.charCodeAt(d);if(m===47){if(!f){u=d+1;break}continue}c===-1&&(f=!1,c=d+1),m===46?a===-1?a=d:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||c===-1||h===0||h===1&&a===c-1&&a===u+1?"":s.slice(a,c)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof s);return n("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var u=s.charCodeAt(0),c=u===47,f;c?(a.root="/",f=1):f=0;for(var h=-1,d=0,m=-1,b=!0,v=s.length-1,w=0;v>=f;--v){if(u=s.charCodeAt(v),u===47){if(!b){d=v+1;break}continue}m===-1&&(b=!1,m=v+1),u===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(d===0&&c?a.base=a.name=s.slice(1,m):a.base=a.name=s.slice(d,m)):(d===0&&c?(a.name=s.slice(1,h),a.base=s.slice(1,m)):(a.name=s.slice(d,h),a.base=s.slice(d,m)),a.ext=s.slice(h,m)),d>0?a.dir=s.slice(0,d-1):c&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,l2=i,l2}var l2,wO,u2,c2=Jt(()=>{Ce();De();Re();Mu();l2={},wO=!1;u2=vU()});function EU(){if(vO)return f2;vO=!0;var r=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=r&&e&&typeof e.get=="function"?e.get:null,n=r&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=i&&o&&typeof o.get=="function"?o.get:null,a=i&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,v=Object.prototype.toString,w=Function.prototype.toString,y=String.prototype.match,_=String.prototype.slice,E=String.prototype.replace,S=String.prototype.toUpperCase,A=String.prototype.toLowerCase,F=RegExp.prototype.test,I=Array.prototype.concat,X=Array.prototype.join,Z=Array.prototype.slice,H=Math.floor,ne=typeof BigInt=="function"?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,K=typeof Symbol=="function"&&typeof Symbol.iterator=="object",le=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===K||!0)?Symbol.toStringTag:null,te=Object.prototype.propertyIsEnumerable,N=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(fe){return fe.__proto__}:null);function x(fe,Ee){if(fe===1/0||fe===-1/0||fe!==fe||fe&&fe>-1e3&&fe<1e3||F.call(/e/,Ee))return Ee;var ve=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof fe=="number"){var Ie=fe<0?-H(-fe):H(fe);if(Ie!==fe){var Y=String(Ie),Me=_.call(Ee,Y.length+1);return E.call(Y,ve,"$&_")+"."+E.call(E.call(Me,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(Ee,ve,"$&_")}var P=_U,C=P.custom,U=xe(C)?C:null;f2=function fe(Ee,ve,Ie,Y){var Me=ve||{};if(se(Me,"quoteStyle")&&Me.quoteStyle!=="single"&&Me.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(se(Me,"maxStringLength")&&(typeof Me.maxStringLength=="number"?Me.maxStringLength<0&&Me.maxStringLength!==1/0:Me.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var et=se(Me,"customInspect")?Me.customInspect:!0;if(typeof et!="boolean"&&et!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(se(Me,"indent")&&Me.indent!==null&&Me.indent!=="	"&&!(parseInt(Me.indent,10)===Me.indent&&Me.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(se(Me,"numericSeparator")&&typeof Me.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var O=Me.numericSeparator;if(typeof Ee>"u")return"undefined";if(Ee===null)return"null";if(typeof Ee=="boolean")return Ee?"true":"false";if(typeof Ee=="string")return Je(Ee,Me);if(typeof Ee=="number"){if(Ee===0)return 1/0/Ee>0?"0":"-0";var Pe=String(Ee);return O?x(Ee,Pe):Pe}if(typeof Ee=="bigint"){var je=String(Ee)+"n";return O?x(Ee,je):je}var de=typeof Me.depth>"u"?5:Me.depth;if(typeof Ie>"u"&&(Ie=0),Ie>=de&&de>0&&typeof Ee=="object")return Q(Ee)?"[Array]":"[Object]";var Te=J(Me,Ie);if(typeof Y>"u")Y=[];else if(be(Y,Ee)>=0)return"[Circular]";function Be(Yt,Zr,Jr){if(Zr&&(Y=Z.call(Y),Y.push(Zr)),Jr){var Qr={depth:Me.depth};return se(Me,"quoteStyle")&&(Qr.quoteStyle=Me.quoteStyle),fe(Yt,Qr,Ie+1,Y)}return fe(Yt,Me,Ie+1,Y)}if(typeof Ee=="function"&&!_e(Ee)){var ut=Se(Ee),ue=ae(Ee,Be);return"[Function"+(ut?": "+ut:" (anonymous)")+"]"+(ue.length>0?" { "+X.call(ue,", ")+" }":"")}if(xe(Ee)){var me=K?E.call(String(Ee),/^(Symbol\(.*\))_[^)]*$/,"$1"):$.call(Ee);return typeof Ee=="object"&&!K?T(me):me}if(Ve(Ee)){for(var We="<"+A.call(String(Ee.nodeName)),Ue=Ee.attributes||[],Ze=0;Ze<Ue.length;Ze++)We+=" "+Ue[Ze].name+"="+j(M(Ue[Ze].value),"double",Me);return We+=">",Ee.childNodes&&Ee.childNodes.length&&(We+="..."),We+="</"+A.call(String(Ee.nodeName))+">",We}if(Q(Ee)){if(Ee.length===0)return"[]";var dt=ae(Ee,Be);return Te&&!R(dt)?"["+D(dt,Te)+"]":"[ "+X.call(dt,", ")+" ]"}if(re(Ee)){var Rt=ae(Ee,Be);return!("cause"in Error.prototype)&&"cause"in Ee&&!te.call(Ee,"cause")?"{ ["+String(Ee)+"] "+X.call(I.call("[cause]: "+Be(Ee.cause),Rt),", ")+" }":Rt.length===0?"["+String(Ee)+"]":"{ ["+String(Ee)+"] "+X.call(Rt,", ")+" }"}if(typeof Ee=="object"&&et){if(U&&typeof Ee[U]=="function"&&P)return P(Ee,{depth:de-Ie});if(et!=="symbol"&&typeof Ee.inspect=="function")return Ee.inspect()}if(pe(Ee)){var Et=[];return n&&n.call(Ee,function(Yt,Zr){Et.push(Be(Zr,Ee,!0)+" => "+Be(Yt,Ee))}),p("Map",t.call(Ee),Et,Te)}if(ke(Ee)){var ar=[];return a&&a.call(Ee,function(Yt){ar.push(Be(Yt,Ee))}),p("Set",s.call(Ee),ar,Te)}if(Ae(Ee))return g("WeakMap");if(Oe(Ee))return g("WeakSet");if($e(Ee))return g("WeakRef");if(oe(Ee))return T(Be(Number(Ee)));if(V(Ee))return T(Be(ne.call(Ee)));if(we(Ee))return T(b.call(Ee));if(W(Ee))return T(Be(String(Ee)));if(typeof window<"u"&&Ee===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ee===globalThis||typeof h2<"u"&&Ee===h2)return"{ [object globalThis] }";if(!ce(Ee)&&!_e(Ee)){var _i=ae(Ee,Be),qn=N?N(Ee)===Object.prototype:Ee instanceof Object||Ee.constructor===Object,Ht=Ee instanceof Object?"":"null prototype",Dr=!qn&&le&&Object(Ee)===Ee&&le in Ee?_.call(ge(Ee),8,-1):Ht?"Object":"",yr=qn||typeof Ee.constructor!="function"?"":Ee.constructor.name?Ee.constructor.name+" ":"",zt=yr+(Dr||Ht?"["+X.call(I.call([],Dr||[],Ht||[]),": ")+"] ":"");return _i.length===0?zt+"{}":Te?zt+"{"+D(_i,Te)+"}":zt+"{ "+X.call(_i,", ")+" }"}return String(Ee)};function j(fe,Ee,ve){var Ie=(ve.quoteStyle||Ee)==="double"?'"':"'";return Ie+fe+Ie}function M(fe){return E.call(String(fe),/"/g,"&quot;")}function Q(fe){return ge(fe)==="[object Array]"&&(!le||!(typeof fe=="object"&&le in fe))}function ce(fe){return ge(fe)==="[object Date]"&&(!le||!(typeof fe=="object"&&le in fe))}function _e(fe){return ge(fe)==="[object RegExp]"&&(!le||!(typeof fe=="object"&&le in fe))}function re(fe){return ge(fe)==="[object Error]"&&(!le||!(typeof fe=="object"&&le in fe))}function W(fe){return ge(fe)==="[object String]"&&(!le||!(typeof fe=="object"&&le in fe))}function oe(fe){return ge(fe)==="[object Number]"&&(!le||!(typeof fe=="object"&&le in fe))}function we(fe){return ge(fe)==="[object Boolean]"&&(!le||!(typeof fe=="object"&&le in fe))}function xe(fe){if(K)return fe&&typeof fe=="object"&&fe instanceof Symbol;if(typeof fe=="symbol")return!0;if(!fe||typeof fe!="object"||!$)return!1;try{return $.call(fe),!0}catch{}return!1}function V(fe){if(!fe||typeof fe!="object"||!ne)return!1;try{return ne.call(fe),!0}catch{}return!1}var B=Object.prototype.hasOwnProperty||function(fe){return fe in(this||h2)};function se(fe,Ee){return B.call(fe,Ee)}function ge(fe){return v.call(fe)}function Se(fe){if(fe.name)return fe.name;var Ee=y.call(w.call(fe),/^function\s*([\w$]+)/);return Ee?Ee[1]:null}function be(fe,Ee){if(fe.indexOf)return fe.indexOf(Ee);for(var ve=0,Ie=fe.length;ve<Ie;ve++)if(fe[ve]===Ee)return ve;return-1}function pe(fe){if(!t||!fe||typeof fe!="object")return!1;try{t.call(fe);try{s.call(fe)}catch{return!0}return fe instanceof Map}catch{}return!1}function Ae(fe){if(!c||!fe||typeof fe!="object")return!1;try{c.call(fe,c);try{h.call(fe,h)}catch{return!0}return fe instanceof WeakMap}catch{}return!1}function $e(fe){if(!m||!fe||typeof fe!="object")return!1;try{return m.call(fe),!0}catch{}return!1}function ke(fe){if(!s||!fe||typeof fe!="object")return!1;try{s.call(fe);try{t.call(fe)}catch{return!0}return fe instanceof Set}catch{}return!1}function Oe(fe){if(!h||!fe||typeof fe!="object")return!1;try{h.call(fe,h);try{c.call(fe,c)}catch{return!0}return fe instanceof WeakSet}catch{}return!1}function Ve(fe){return!fe||typeof fe!="object"?!1:typeof HTMLElement<"u"&&fe instanceof HTMLElement?!0:typeof fe.nodeName=="string"&&typeof fe.getAttribute=="function"}function Je(fe,Ee){if(fe.length>Ee.maxStringLength){var ve=fe.length-Ee.maxStringLength,Ie="... "+ve+" more character"+(ve>1?"s":"");return Je(_.call(fe,0,Ee.maxStringLength),Ee)+Ie}var Y=E.call(E.call(fe,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,tt);return j(Y,"single",Ee)}function tt(fe){var Ee=fe.charCodeAt(0),ve={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ee];return ve?"\\"+ve:"\\x"+(Ee<16?"0":"")+S.call(Ee.toString(16))}function T(fe){return"Object("+fe+")"}function g(fe){return fe+" { ? }"}function p(fe,Ee,ve,Ie){var Y=Ie?D(ve,Ie):X.call(ve,", ");return fe+" ("+Ee+") {"+Y+"}"}function R(fe){for(var Ee=0;Ee<fe.length;Ee++)if(be(fe[Ee],`
`)>=0)return!1;return!0}function J(fe,Ee){var ve;if(fe.indent==="	")ve="	";else if(typeof fe.indent=="number"&&fe.indent>0)ve=X.call(Array(fe.indent+1)," ");else return null;return{base:ve,prev:X.call(Array(Ee+1),ve)}}function D(fe,Ee){if(fe.length===0)return"";var ve=`
`+Ee.prev+Ee.base;return ve+X.call(fe,","+ve)+`
`+Ee.prev}function ae(fe,Ee){var ve=Q(fe),Ie=[];if(ve){Ie.length=fe.length;for(var Y=0;Y<fe.length;Y++)Ie[Y]=se(fe,Y)?Ee(fe[Y],fe):""}var Me=typeof L=="function"?L(fe):[],et;if(K){et={};for(var O=0;O<Me.length;O++)et["$"+Me[O]]=Me[O]}for(var Pe in fe)se(fe,Pe)&&(ve&&String(Number(Pe))===Pe&&Pe<fe.length||K&&et["$"+Pe]instanceof Symbol||(F.call(/[^\w$]/,Pe)?Ie.push(Ee(Pe,fe)+": "+Ee(fe[Pe],fe)):Ie.push(Pe+": "+Ee(fe[Pe],fe))));if(typeof L=="function")for(var je=0;je<Me.length;je++)te.call(fe,Me[je])&&Ie.push("["+Ee(Me[je])+"]: "+Ee(fe[Me[je]],fe));return Ie}return f2}function AU(){if(_O)return d2;_O=!0;var r=Wu(),e=jp(),t=EU(),n=Qf(),i=r("%WeakMap%",!0),o=r("%Map%",!0),s=e("WeakMap.prototype.get",!0),a=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("Map.prototype.get",!0),f=e("Map.prototype.set",!0),h=e("Map.prototype.has",!0),d=function(w,y){for(var _=w,E;(E=_.next)!==null;_=E)if(E.key===y)return _.next=E.next,E.next=w.next,w.next=E,E},m=function(w,y){var _=d(w,y);return _&&_.value},b=function(w,y,_){var E=d(w,y);E?E.value=_:w.next={key:y,next:w.next,value:_}},v=function(w,y){return!!d(w,y)};return d2=function(){var y,_,E,S={assert:function(A){if(!S.has(A))throw new n("Side channel does not contain "+t(A))},get:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return s(y,A)}else if(o){if(_)return c(_,A)}else if(E)return m(E,A)},has:function(A){if(i&&A&&(typeof A=="object"||typeof A=="function")){if(y)return u(y,A)}else if(o){if(_)return h(_,A)}else if(E)return v(E,A);return!1},set:function(A,F){i&&A&&(typeof A=="object"||typeof A=="function")?(y||(y=new i),a(y,A,F)):o?(_||(_=new o),f(_,A,F)):(E||(E={key:{},next:null}),b(E,A,F))}};return S},d2}function v2(){if(EO)return p2;EO=!0;var r=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return p2={default:t.RFC3986,formatters:{RFC1738:function(n){return r.call(n,e,"+")},RFC3986:function(n){return String(n)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},p2}function RO(){if(AO)return g2;AO=!0;var r=v2(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n=(function(){for(var w=[],y=0;y<256;++y)w.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return w})(),i=function(y){for(;y.length>1;){var _=y.pop(),E=_.obj[_.prop];if(t(E)){for(var S=[],A=0;A<E.length;++A)typeof E[A]<"u"&&S.push(E[A]);_.obj[_.prop]=S}}},o=function(y,_){for(var E=_&&_.plainObjects?Object.create(null):{},S=0;S<y.length;++S)typeof y[S]<"u"&&(E[S]=y[S]);return E},s=function w(y,_,E){if(!_)return y;if(typeof _!="object"){if(t(y))y.push(_);else if(y&&typeof y=="object")(E&&(E.plainObjects||E.allowPrototypes)||!e.call(Object.prototype,_))&&(y[_]=!0);else return[y,_];return y}if(!y||typeof y!="object")return[y].concat(_);var S=y;return t(y)&&!t(_)&&(S=o(y,E)),t(y)&&t(_)?(_.forEach(function(A,F){if(e.call(y,F)){var I=y[F];I&&typeof I=="object"&&A&&typeof A=="object"?y[F]=w(I,A,E):y.push(A)}else y[F]=A}),y):Object.keys(_).reduce(function(A,F){var I=_[F];return e.call(A,F)?A[F]=w(A[F],I,E):A[F]=I,A},S)},a=function(y,_){return Object.keys(_).reduce(function(E,S){return E[S]=_[S],E},y)},u=function(w,y,_){var E=w.replace(/\+/g," ");if(_==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},c=1024,f=function(y,_,E,S,A){if(y.length===0)return y;var F=y;if(typeof y=="symbol"?F=Symbol.prototype.toString.call(y):typeof y!="string"&&(F=String(y)),E==="iso-8859-1")return escape(F).replace(/%u[0-9a-f]{4}/gi,function($){return"%26%23"+parseInt($.slice(2),16)+"%3B"});for(var I="",X=0;X<F.length;X+=c){for(var Z=F.length>=c?F.slice(X,X+c):F,H=[],ne=0;ne<Z.length;++ne){var L=Z.charCodeAt(ne);if(L===45||L===46||L===95||L===126||L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122||A===r.RFC1738&&(L===40||L===41)){H[H.length]=Z.charAt(ne);continue}if(L<128){H[H.length]=n[L];continue}if(L<2048){H[H.length]=n[192|L>>6]+n[128|L&63];continue}if(L<55296||L>=57344){H[H.length]=n[224|L>>12]+n[128|L>>6&63]+n[128|L&63];continue}ne+=1,L=65536+((L&1023)<<10|Z.charCodeAt(ne)&1023),H[H.length]=n[240|L>>18]+n[128|L>>12&63]+n[128|L>>6&63]+n[128|L&63]}I+=H.join("")}return I},h=function(y){for(var _=[{obj:{o:y},prop:"o"}],E=[],S=0;S<_.length;++S)for(var A=_[S],F=A.obj[A.prop],I=Object.keys(F),X=0;X<I.length;++X){var Z=I[X],H=F[Z];typeof H=="object"&&H!==null&&E.indexOf(H)===-1&&(_.push({obj:F,prop:Z}),E.push(H))}return i(_),y},d=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},m=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},b=function(y,_){return[].concat(y,_)},v=function(y,_){if(t(y)){for(var E=[],S=0;S<y.length;S+=1)E.push(_(y[S]));return E}return _(y)};return g2={arrayToObject:o,assign:a,combine:b,compact:h,decode:u,encode:f,isBuffer:m,isRegExp:d,maybeMap:v,merge:s},g2}function xU(){if(xO)return m2;xO=!0;var r=AU(),e=RO(),t=v2(),n=Object.prototype.hasOwnProperty,i={brackets:function(w){return w+"[]"},comma:"comma",indices:function(w,y){return w+"["+y+"]"},repeat:function(w){return w}},o=Array.isArray,s=Array.prototype.push,a=function(v,w){s.apply(v,o(w)?w:[w])},u=Date.prototype.toISOString,c=t.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:c,formatter:t.formatters[c],indices:!1,serializeDate:function(w){return u.call(w)},skipNulls:!1,strictNullHandling:!1},h=function(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w=="symbol"||typeof w=="bigint"},d={},m=function v(w,y,_,E,S,A,F,I,X,Z,H,ne,L,$,K,le,te,N){for(var x=w,P=N,C=0,U=!1;(P=P.get(d))!==void 0&&!U;){var j=P.get(w);if(C+=1,typeof j<"u"){if(j===C)throw new RangeError("Cyclic object value");U=!0}typeof P.get(d)>"u"&&(C=0)}if(typeof Z=="function"?x=Z(y,x):x instanceof Date?x=L(x):_==="comma"&&o(x)&&(x=e.maybeMap(x,function(ge){return ge instanceof Date?L(ge):ge})),x===null){if(A)return X&&!le?X(y,f.encoder,te,"key",$):y;x=""}if(h(x)||e.isBuffer(x)){if(X){var M=le?y:X(y,f.encoder,te,"key",$);return[K(M)+"="+K(X(x,f.encoder,te,"value",$))]}return[K(y)+"="+K(String(x))]}var Q=[];if(typeof x>"u")return Q;var ce;if(_==="comma"&&o(x))le&&X&&(x=e.maybeMap(x,X)),ce=[{value:x.length>0?x.join(",")||null:void 0}];else if(o(Z))ce=Z;else{var _e=Object.keys(x);ce=H?_e.sort(H):_e}var re=I?y.replace(/\./g,"%2E"):y,W=E&&o(x)&&x.length===1?re+"[]":re;if(S&&o(x)&&x.length===0)return W+"[]";for(var oe=0;oe<ce.length;++oe){var we=ce[oe],xe=typeof we=="object"&&typeof we.value<"u"?we.value:x[we];if(!(F&&xe===null)){var V=ne&&I?we.replace(/\./g,"%2E"):we,B=o(x)?typeof _=="function"?_(W,V):W:W+(ne?"."+V:"["+V+"]");N.set(w,C);var se=r();se.set(d,N),a(Q,v(xe,B,_,E,S,A,F,I,_==="comma"&&le&&o(x)?null:X,Z,H,ne,L,$,K,le,te,se))}}return Q},b=function(w){if(!w)return f;if(typeof w.allowEmptyArrays<"u"&&typeof w.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof w.encodeDotInKeys<"u"&&typeof w.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(w.encoder!==null&&typeof w.encoder<"u"&&typeof w.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=w.charset||f.charset;if(typeof w.charset<"u"&&w.charset!=="utf-8"&&w.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _=t.default;if(typeof w.format<"u"){if(!n.call(t.formatters,w.format))throw new TypeError("Unknown format option provided.");_=w.format}var E=t.formatters[_],S=f.filter;(typeof w.filter=="function"||o(w.filter))&&(S=w.filter);var A;if(w.arrayFormat in i?A=w.arrayFormat:"indices"in w?A=w.indices?"indices":"repeat":A=f.arrayFormat,"commaRoundTrip"in w&&typeof w.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var F=typeof w.allowDots>"u"?w.encodeDotInKeys===!0?!0:f.allowDots:!!w.allowDots;return{addQueryPrefix:typeof w.addQueryPrefix=="boolean"?w.addQueryPrefix:f.addQueryPrefix,allowDots:F,allowEmptyArrays:typeof w.allowEmptyArrays=="boolean"?!!w.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:A,charset:y,charsetSentinel:typeof w.charsetSentinel=="boolean"?w.charsetSentinel:f.charsetSentinel,commaRoundTrip:w.commaRoundTrip,delimiter:typeof w.delimiter>"u"?f.delimiter:w.delimiter,encode:typeof w.encode=="boolean"?w.encode:f.encode,encodeDotInKeys:typeof w.encodeDotInKeys=="boolean"?w.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof w.encoder=="function"?w.encoder:f.encoder,encodeValuesOnly:typeof w.encodeValuesOnly=="boolean"?w.encodeValuesOnly:f.encodeValuesOnly,filter:S,format:_,formatter:E,serializeDate:typeof w.serializeDate=="function"?w.serializeDate:f.serializeDate,skipNulls:typeof w.skipNulls=="boolean"?w.skipNulls:f.skipNulls,sort:typeof w.sort=="function"?w.sort:null,strictNullHandling:typeof w.strictNullHandling=="boolean"?w.strictNullHandling:f.strictNullHandling}};return m2=function(v,w){var y=v,_=b(w),E,S;typeof _.filter=="function"?(S=_.filter,y=S("",y)):o(_.filter)&&(S=_.filter,E=S);var A=[];if(typeof y!="object"||y===null)return"";var F=i[_.arrayFormat],I=F==="comma"&&_.commaRoundTrip;E||(E=Object.keys(y)),_.sort&&E.sort(_.sort);for(var X=r(),Z=0;Z<E.length;++Z){var H=E[Z];_.skipNulls&&y[H]===null||a(A,m(y[H],H,F,I,_.allowEmptyArrays,_.strictNullHandling,_.skipNulls,_.encodeDotInKeys,_.encode?_.encoder:null,_.filter,_.sort,_.allowDots,_.serializeDate,_.format,_.formatter,_.encodeValuesOnly,_.charset,X))}var ne=A.join(_.delimiter),L=_.addQueryPrefix===!0?"?":"";return _.charsetSentinel&&(_.charset==="iso-8859-1"?L+="utf8=%26%2310003%3B&":L+="utf8=%E2%9C%93&"),ne.length>0?L+ne:""},m2}function SU(){if(SO)return y2;SO=!0;var r=RO(),e=Object.prototype.hasOwnProperty,t=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},i=function(d){return d.replace(/&#(\d+);/g,function(m,b){return String.fromCharCode(parseInt(b,10))})},o=function(d,m){return d&&typeof d=="string"&&m.comma&&d.indexOf(",")>-1?d.split(","):d},s="utf8=%26%2310003%3B",a="utf8=%E2%9C%93",u=function(m,b){var v={__proto__:null},w=b.ignoreQueryPrefix?m.replace(/^\?/,""):m;w=w.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=b.parameterLimit===1/0?void 0:b.parameterLimit,_=w.split(b.delimiter,y),E=-1,S,A=b.charset;if(b.charsetSentinel)for(S=0;S<_.length;++S)_[S].indexOf("utf8=")===0&&(_[S]===a?A="utf-8":_[S]===s&&(A="iso-8859-1"),E=S,S=_.length);for(S=0;S<_.length;++S)if(S!==E){var F=_[S],I=F.indexOf("]="),X=I===-1?F.indexOf("="):I+1,Z,H;X===-1?(Z=b.decoder(F,n.decoder,A,"key"),H=b.strictNullHandling?null:""):(Z=b.decoder(F.slice(0,X),n.decoder,A,"key"),H=r.maybeMap(o(F.slice(X+1),b),function(L){return b.decoder(L,n.decoder,A,"value")})),H&&b.interpretNumericEntities&&A==="iso-8859-1"&&(H=i(H)),F.indexOf("[]=")>-1&&(H=t(H)?[H]:H);var ne=e.call(v,Z);ne&&b.duplicates==="combine"?v[Z]=r.combine(v[Z],H):(!ne||b.duplicates==="last")&&(v[Z]=H)}return v},c=function(d,m,b,v){for(var w=v?m:o(m,b),y=d.length-1;y>=0;--y){var _,E=d[y];if(E==="[]"&&b.parseArrays)_=b.allowEmptyArrays&&(w===""||b.strictNullHandling&&w===null)?[]:[].concat(w);else{_=b.plainObjects?Object.create(null):{};var S=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,A=b.decodeDotInKeys?S.replace(/%2E/g,"."):S,F=parseInt(A,10);!b.parseArrays&&A===""?_={0:w}:!isNaN(F)&&E!==A&&String(F)===A&&F>=0&&b.parseArrays&&F<=b.arrayLimit?(_=[],_[F]=w):A!=="__proto__"&&(_[A]=w)}w=_}return w},f=function(m,b,v,w){if(m){var y=v.allowDots?m.replace(/\.([^.[]+)/g,"[$1]"):m,_=/(\[[^[\]]*])/,E=/(\[[^[\]]*])/g,S=v.depth>0&&_.exec(y),A=S?y.slice(0,S.index):y,F=[];if(A){if(!v.plainObjects&&e.call(Object.prototype,A)&&!v.allowPrototypes)return;F.push(A)}for(var I=0;v.depth>0&&(S=E.exec(y))!==null&&I<v.depth;){if(I+=1,!v.plainObjects&&e.call(Object.prototype,S[1].slice(1,-1))&&!v.allowPrototypes)return;F.push(S[1])}if(S){if(v.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+v.depth+" and strictDepth is true");F.push("["+y.slice(S.index)+"]")}return c(F,b,v,w)}},h=function(m){if(!m)return n;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.decodeDotInKeys<"u"&&typeof m.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(m.decoder!==null&&typeof m.decoder<"u"&&typeof m.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=typeof m.charset>"u"?n.charset:m.charset,v=typeof m.duplicates>"u"?n.duplicates:m.duplicates;if(v!=="combine"&&v!=="first"&&v!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var w=typeof m.allowDots>"u"?m.decodeDotInKeys===!0?!0:n.allowDots:!!m.allowDots;return{allowDots:w,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof m.allowPrototypes=="boolean"?m.allowPrototypes:n.allowPrototypes,allowSparse:typeof m.allowSparse=="boolean"?m.allowSparse:n.allowSparse,arrayLimit:typeof m.arrayLimit=="number"?m.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:n.charsetSentinel,comma:typeof m.comma=="boolean"?m.comma:n.comma,decodeDotInKeys:typeof m.decodeDotInKeys=="boolean"?m.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof m.decoder=="function"?m.decoder:n.decoder,delimiter:typeof m.delimiter=="string"||r.isRegExp(m.delimiter)?m.delimiter:n.delimiter,depth:typeof m.depth=="number"||m.depth===!1?+m.depth:n.depth,duplicates:v,ignoreQueryPrefix:m.ignoreQueryPrefix===!0,interpretNumericEntities:typeof m.interpretNumericEntities=="boolean"?m.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof m.parameterLimit=="number"?m.parameterLimit:n.parameterLimit,parseArrays:m.parseArrays!==!1,plainObjects:typeof m.plainObjects=="boolean"?m.plainObjects:n.plainObjects,strictDepth:typeof m.strictDepth=="boolean"?!!m.strictDepth:n.strictDepth,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:n.strictNullHandling}};return y2=function(d,m){var b=h(m);if(d===""||d===null||typeof d>"u")return b.plainObjects?Object.create(null):{};for(var v=typeof d=="string"?u(d,b):d,w=b.plainObjects?Object.create(null):{},y=Object.keys(v),_=0;_<y.length;++_){var E=y[_],S=f(E,v[E],b,typeof d=="string");w=r.merge(w,S,b)}return b.allowSparse===!0?w:r.compact(w)},y2}function TU(){if(TO)return b2;TO=!0;var r=xU(),e=SU(),t=v2();return b2={formats:t,parse:e,stringify:r},b2}function CU(){if(CO)return qu;CO=!0;var r=dl;function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],s=["{","}","|","\\","^","`"].concat(o),a=["'"].concat(s),u=["%","/","?",";","#"].concat(a),c=["/","?","#"],f=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=TU();function y(A,F,I){if(A&&typeof A=="object"&&A instanceof e)return A;var X=new e;return X.parse(A,F,I),X}e.prototype.parse=function(A,F,I){if(typeof A!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof A);var X=A.indexOf("?"),Z=X!==-1&&X<A.indexOf("#")?"?":"#",H=A.split(Z),ne=/\\/g;H[0]=H[0].replace(ne,"/"),A=H.join(Z);var L=A;if(L=L.trim(),!I&&A.split("#").length===1){var $=i.exec(L);if($)return this.path=L,this.href=L,this.pathname=$[1],$[2]?(this.search=$[2],F?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):F&&(this.search="",this.query={}),this}var K=t.exec(L);if(K){K=K[0];var le=K.toLowerCase();this.protocol=le,L=L.substr(K.length)}if(I||K||L.match(/^\/\/[^@/]+@[^@/]+/)){var te=L.substr(0,2)==="//";te&&!(K&&b[K])&&(L=L.substr(2),this.slashes=!0)}if(!b[K]&&(te||K&&!v[K])){for(var N=-1,x=0;x<c.length;x++){var P=L.indexOf(c[x]);P!==-1&&(N===-1||P<N)&&(N=P)}var C,U;N===-1?U=L.lastIndexOf("@"):U=L.lastIndexOf("@",N),U!==-1&&(C=L.slice(0,U),L=L.slice(U+1),this.auth=decodeURIComponent(C)),N=-1;for(var x=0;x<u.length;x++){var P=L.indexOf(u[x]);P!==-1&&(N===-1||P<N)&&(N=P)}N===-1&&(N=L.length),this.host=L.slice(0,N),L=L.slice(N),this.parseHost(),this.hostname=this.hostname||"";var j=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!j)for(var M=this.hostname.split(/\./),x=0,Q=M.length;x<Q;x++){var ce=M[x];if(ce&&!ce.match(h)){for(var _e="",re=0,W=ce.length;re<W;re++)ce.charCodeAt(re)>127?_e+="x":_e+=ce[re];if(!_e.match(h)){var oe=M.slice(0,x),we=M.slice(x+1),xe=ce.match(d);xe&&(oe.push(xe[1]),we.unshift(xe[2])),we.length&&(L="/"+we.join(".")+L),this.hostname=oe.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=r.toASCII(this.hostname));var V=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+V,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),L[0]!=="/"&&(L="/"+L))}if(!m[le])for(var x=0,Q=a.length;x<Q;x++){var se=a[x];if(L.indexOf(se)!==-1){var ge=encodeURIComponent(se);ge===se&&(ge=escape(se)),L=L.split(se).join(ge)}}var Se=L.indexOf("#");Se!==-1&&(this.hash=L.substr(Se),L=L.slice(0,Se));var be=L.indexOf("?");if(be!==-1?(this.search=L.substr(be),this.query=L.substr(be+1),F&&(this.query=w.parse(this.query)),L=L.slice(0,be)):F&&(this.search="",this.query={}),L&&(this.pathname=L),v[le]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",pe=this.search||"";this.path=V+pe}return this.href=this.format(),this};function _(A){return typeof A=="string"&&(A=y(A)),A instanceof e?A.format():e.prototype.format.call(A)}e.prototype.format=function(){var A=this.auth||"";A&&(A=encodeURIComponent(A),A=A.replace(/%3A/i,":"),A+="@");var F=this.protocol||"",I=this.pathname||"",X=this.hash||"",Z=!1,H="";this.host?Z=A+this.host:this.hostname&&(Z=A+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Z+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(H=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ne=this.search||H&&"?"+H||"";return F&&F.substr(-1)!==":"&&(F+=":"),this.slashes||(!F||v[F])&&Z!==!1?(Z="//"+(Z||""),I&&I.charAt(0)!=="/"&&(I="/"+I)):Z||(Z=""),X&&X.charAt(0)!=="#"&&(X="#"+X),ne&&ne.charAt(0)!=="?"&&(ne="?"+ne),I=I.replace(/[?#]/g,function(L){return encodeURIComponent(L)}),ne=ne.replace("#","%23"),F+Z+I+ne+X};function E(A,F){return y(A,!1,!0).resolve(F)}e.prototype.resolve=function(A){return this.resolveObject(y(A,!1,!0)).format()};function S(A,F){return A?y(A,!1,!0).resolveObject(F):F}return e.prototype.resolveObject=function(A){if(typeof A=="string"){var F=new e;F.parse(A,!1,!0),A=F}for(var I=new e,X=Object.keys(this),Z=0;Z<X.length;Z++){var H=X[Z];I[H]=this[H]}if(I.hash=A.hash,A.href==="")return I.href=I.format(),I;if(A.slashes&&!A.protocol){for(var ne=Object.keys(A),L=0;L<ne.length;L++){var $=ne[L];$!=="protocol"&&(I[$]=A[$])}return v[I.protocol]&&I.hostname&&!I.pathname&&(I.pathname="/",I.path=I.pathname),I.href=I.format(),I}if(A.protocol&&A.protocol!==I.protocol){if(!v[A.protocol]){for(var K=Object.keys(A),le=0;le<K.length;le++){var te=K[le];I[te]=A[te]}return I.href=I.format(),I}if(I.protocol=A.protocol,!A.host&&!b[A.protocol]){for(var Q=(A.pathname||"").split("/");Q.length&&!(A.host=Q.shift()););A.host||(A.host=""),A.hostname||(A.hostname=""),Q[0]!==""&&Q.unshift(""),Q.length<2&&Q.unshift(""),I.pathname=Q.join("/")}else I.pathname=A.pathname;if(I.search=A.search,I.query=A.query,I.host=A.host||"",I.auth=A.auth,I.hostname=A.hostname||A.host,I.port=A.port,I.pathname||I.search){var N=I.pathname||"",x=I.search||"";I.path=N+x}return I.slashes=I.slashes||A.slashes,I.href=I.format(),I}var P=I.pathname&&I.pathname.charAt(0)==="/",C=A.host||A.pathname&&A.pathname.charAt(0)==="/",U=C||P||I.host&&A.pathname,j=U,M=I.pathname&&I.pathname.split("/")||[],Q=A.pathname&&A.pathname.split("/")||[],ce=I.protocol&&!v[I.protocol];if(ce&&(I.hostname="",I.port=null,I.host&&(M[0]===""?M[0]=I.host:M.unshift(I.host)),I.host="",A.protocol&&(A.hostname=null,A.port=null,A.host&&(Q[0]===""?Q[0]=A.host:Q.unshift(A.host)),A.host=null),U=U&&(Q[0]===""||M[0]==="")),C)I.host=A.host||A.host===""?A.host:I.host,I.hostname=A.hostname||A.hostname===""?A.hostname:I.hostname,I.search=A.search,I.query=A.query,M=Q;else if(Q.length)M||(M=[]),M.pop(),M=M.concat(Q),I.search=A.search,I.query=A.query;else if(A.search!=null){if(ce){I.host=M.shift(),I.hostname=I.host;var _e=I.host&&I.host.indexOf("@")>0?I.host.split("@"):!1;_e&&(I.auth=_e.shift(),I.hostname=_e.shift(),I.host=I.hostname)}return I.search=A.search,I.query=A.query,(I.pathname!==null||I.search!==null)&&(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.href=I.format(),I}if(!M.length)return I.pathname=null,I.search?I.path="/"+I.search:I.path=null,I.href=I.format(),I;for(var re=M.slice(-1)[0],W=(I.host||A.host||M.length>1)&&(re==="."||re==="..")||re==="",oe=0,we=M.length;we>=0;we--)re=M[we],re==="."?M.splice(we,1):re===".."?(M.splice(we,1),oe++):oe&&(M.splice(we,1),oe--);if(!U&&!j)for(;oe--;oe)M.unshift("..");U&&M[0]!==""&&(!M[0]||M[0].charAt(0)!=="/")&&M.unshift(""),W&&M.join("/").substr(-1)!=="/"&&M.push("");var xe=M[0]===""||M[0]&&M[0].charAt(0)==="/";if(ce){I.hostname=xe?"":M.length?M.shift():"",I.host=I.hostname;var _e=I.host&&I.host.indexOf("@")>0?I.host.split("@"):!1;_e&&(I.auth=_e.shift(),I.hostname=_e.shift(),I.host=I.hostname)}return U=U||I.host&&M.length,U&&!xe&&M.unshift(""),M.length>0?I.pathname=M.join("/"):(I.pathname=null,I.path=null),(I.pathname!==null||I.search!==null)&&(I.path=(I.pathname?I.pathname:"")+(I.search?I.search:"")),I.auth=A.auth||I.auth,I.slashes=I.slashes||A.slashes,I.href=I.format(),I},e.prototype.parseHost=function(){var A=this.host,F=n.exec(A);F&&(F=F[0],F!==":"&&(this.port=F.substr(1)),A=A.substr(0,A.length-F.length)),A&&(this.hostname=A)},qu.parse=y,qu.resolve=E,qu.resolveObject=S,qu.format=_,qu.Url=e,qu}function _2(r){if(typeof r=="string")r=new URL(r);else if(!(r instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(r.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return w2?UU(r):jU(r)}function UU(r){let e=r.hostname,t=r.pathname;for(let n=0;n<t.length;n++)if(t[n]==="%"){let i=t.codePointAt(n+2)||32;if(t[n+1]==="2"&&i===102||t[n+1]==="5"&&i===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(kU,"\\"),t=decodeURIComponent(t),e!=="")return`\\\\${e}${t}`;{let n=t.codePointAt(1)|32,i=t[2];if(n<OU||n>NU||i!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function jU(r){if(r.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let e=r.pathname;for(let t=0;t<e.length;t++)if(e[t]==="%"){let n=e.codePointAt(t+2)||32;if(e[t+1]==="2"&&n===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(e)}function $U(r){let e=u2.resolve(r),t=r.charCodeAt(r.length-1);(t===IU||w2&&t===DU)&&e[e.length-1]!==u2.sep&&(e+="/");let n=new URL("file://");return e.includes("%")&&(e=e.replace(LU,"%25")),!w2&&e.includes("\\")&&(e=e.replace(PU,"%5C")),e.includes(`
`)&&(e=e.replace(MU,"%0A")),e.includes("\r")&&(e=e.replace(BU,"%0D")),e.includes("	")&&(e=e.replace(FU,"%09")),n.pathname=e,n}var _U,f2,vO,h2,d2,_O,p2,EO,g2,AO,m2,xO,y2,SO,b2,TO,qu,CO,si,RU,CX,RX,DX,IX,OX,NX,DU,IU,OU,NU,w2,kU,LU,PU,MU,BU,FU,DO=Jt(()=>{Ce();De();Re();BE();$p();c2();Mu();_U=Object.freeze(Object.create(null)),f2={},vO=!1,h2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;d2={},_O=!1;p2={},EO=!1;g2={},AO=!1;m2={},xO=!1;y2={},SO=!1;b2={},TO=!1;qu={},CO=!1;si=CU();si.parse;si.resolve;si.resolveObject;si.format;si.Url;RU=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0;si.URL=typeof URL<"u"?URL:null;si.pathToFileURL=$U;si.fileURLToPath=_2;CX=si.Url,RX=si.format,DX=si.resolve,IX=si.resolveObject,OX=si.parse,NX=si.URL,DU=92,IU=47,OU=97,NU=122,w2=RU==="win32",kU=/\//g,LU=/%/g,PU=/\\/g,MU=/\n/g,BU=/\r/g,FU=/\t/g});var Hp={};jo(Hp,{Dir:()=>D$,Dirent:()=>I$,F_OK:()=>B$,FileReadStream:()=>L$,FileWriteStream:()=>P$,R_OK:()=>F$,ReadStream:()=>N$,Stats:()=>O$,W_OK:()=>U$,WriteStream:()=>k$,X_OK:()=>j$,_toUnixTimestamp:()=>M$,access:()=>ij,accessSync:()=>sj,appendFile:()=>rj,appendFileSync:()=>nj,chmod:()=>lj,chmodSync:()=>uj,chown:()=>oj,chownSync:()=>aj,close:()=>cj,closeSync:()=>fj,constants:()=>$$,copyFile:()=>hj,copyFileSync:()=>dj,cp:()=>pj,cpSync:()=>gj,createReadStream:()=>mj,createWriteStream:()=>yj,default:()=>br,exists:()=>bj,existsSync:()=>ob,fchmod:()=>_j,fchmodSync:()=>Ej,fchown:()=>wj,fchownSync:()=>vj,fdatasync:()=>Aj,fdatasyncSync:()=>xj,fstat:()=>Sj,fstatSync:()=>Tj,fsync:()=>Cj,fsyncSync:()=>Rj,ftruncate:()=>Dj,ftruncateSync:()=>Ij,futimes:()=>Oj,futimesSync:()=>Nj,lchmod:()=>Pj,lchmodSync:()=>Mj,lchown:()=>kj,lchownSync:()=>Lj,link:()=>Bj,linkSync:()=>Fj,lstat:()=>Uj,lstatSync:()=>S2,mkdir:()=>jj,mkdirSync:()=>$j,mkdtemp:()=>zj,mkdtempSync:()=>Wj,open:()=>qj,openSync:()=>Hj,opendir:()=>Gj,opendirSync:()=>Vj,promises:()=>z$,read:()=>Kj,readFile:()=>e$,readFileSync:()=>T2,readSync:()=>Zj,readdir:()=>Yj,readdirSync:()=>Xj,readlink:()=>t$,readlinkSync:()=>r$,readv:()=>Jj,readvSync:()=>Qj,realpath:()=>n$,realpathSync:()=>i$,rename:()=>s$,renameSync:()=>o$,rm:()=>a$,rmSync:()=>l$,rmdir:()=>u$,rmdirSync:()=>c$,stat:()=>f$,statSync:()=>h$,symlink:()=>d$,symlinkSync:()=>p$,truncate:()=>g$,truncateSync:()=>m$,unlink:()=>b$,unlinkSync:()=>w$,unwatchFile:()=>y$,utimes:()=>v$,utimesSync:()=>_$,watch:()=>E$,watchFile:()=>A$,write:()=>S$,writeFile:()=>x$,writeFileSync:()=>eN,writeSync:()=>T$,writev:()=>C$,writevSync:()=>R$});function qp(){return IO||(IO=!0,Object.defineProperty(zp,"__esModule",{value:!0}),zp.constants=void 0,zp.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}),zp}function zU(){return OO||(OO=!0,typeof BigInt=="function"?nb.default=BigInt:nb.default=function(){throw new Error("BigInt is not supported in this environment.")}),nb}function E2(){if(NO)return eh;NO=!0,Object.defineProperty(eh,"__esModule",{value:!0}),eh.Stats=void 0;var r=qp(),e=zU(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){}return h.build=function(d,m){m===void 0&&(m=!1);var b=new h,v=d.uid,w=d.gid,y=d.atime,_=d.mtime,E=d.ctime,S=m?e.default:function(F){return F};b.uid=S(v),b.gid=S(w),b.rdev=S(0),b.blksize=S(4096),b.ino=S(d.ino),b.size=S(d.getSize()),b.blocks=S(1),b.atime=y,b.mtime=_,b.ctime=E,b.birthtime=E,b.atimeMs=S(y.getTime()),b.mtimeMs=S(_.getTime());var A=S(E.getTime());return b.ctimeMs=A,b.birthtimeMs=A,b.dev=S(0),b.mode=S(d.mode),b.nlink=S(d.nlink),b},h.prototype._checkModeProperty=function(d){return(Number(this.mode)&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return eh.Stats=f,eh.default=f,eh}function A2(){if(kO)return Ds;kO=!0;var r=Ds&&Ds.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var u=0,c=s.length,f;u<c;u++)(f||!(u in s))&&(f||(f=Array.prototype.slice.call(s,0,u)),f[u]=s[u]);return o.concat(f||Array.prototype.slice.call(s))};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.bufferFrom=Ds.bufferAllocUnsafe=Ds.Buffer=void 0;var e=fn();Object.defineProperty(Ds,"Buffer",{enumerable:!0,get:function(){return e.Buffer}});function t(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return new(e.Buffer.bind.apply(e.Buffer,r([void 0,o],s,!1)))}var n=e.Buffer.allocUnsafe||t;Ds.bufferAllocUnsafe=n;var i=e.Buffer.from||t;return Ds.bufferFrom=i,Ds}function VO(){if(LO)return sn;LO=!0;var r=sn&&sn.__extends||(function(){var b=function(v,w){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(y[E]=_[E])},b(v,w)};return function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");b(v,w);function y(){this.constructor=v}v.prototype=w===null?Object.create(w):(y.prototype=w.prototype,new y)}})();Object.defineProperty(sn,"__esModule",{value:!0}),sn.E=sn.AssertionError=sn.message=sn.RangeError=sn.TypeError=sn.Error=void 0;var e=pt,t=ze,n=typeof Symbol>"u"?"_kCode":Symbol("code"),i={};function o(b){return(function(v){r(w,v);function w(y){for(var _=[],E=1;E<arguments.length;E++)_[E-1]=arguments[E];var S=v.call(this,u(y,_))||this;return S.code=y,S[n]=y,S.name="".concat(v.prototype.name," [").concat(S[n],"]"),S}return w})(b)}var s=typeof globalThis<"u"?globalThis:WU,a=(function(b){r(v,b);function v(w){var y=this;if(typeof w!="object"||w===null)throw new sn.TypeError("ERR_INVALID_ARG_TYPE","options","object");return w.message?y=b.call(this,w.message)||this:y=b.call(this,"".concat(t.inspect(w.actual).slice(0,128)," ")+"".concat(w.operator," ").concat(t.inspect(w.expected).slice(0,128)))||this,y.generatedMessage=!w.message,y.name="AssertionError [ERR_ASSERTION]",y.code="ERR_ASSERTION",y.actual=w.actual,y.expected=w.expected,y.operator=w.operator,sn.Error.captureStackTrace(y,w.stackStartFunction),y}return v})(s.Error);sn.AssertionError=a;function u(b,v){e.strictEqual(typeof b,"string");var w=i[b];e(w,"An invalid error message key was used: ".concat(b,"."));var y;if(typeof w=="function")y=w;else{if(y=t.format,v===void 0||v.length===0)return w;v.unshift(w)}return String(y.apply(null,v))}sn.message=u;function c(b,v){i[b]=typeof v=="function"?v:String(v)}sn.E=c,sn.Error=o(s.Error),sn.TypeError=o(s.TypeError),sn.RangeError=o(s.RangeError),c("ERR_ARG_NOT_ITERABLE","%s must be iterable"),c("ERR_ASSERTION","%s"),c("ERR_BUFFER_OUT_OF_BOUNDS",m),c("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),c("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),c("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),c("ERR_DNS_SET_SERVERS_FAILED",function(b,v){return'c-ares failed to set servers: "'.concat(b,'" [').concat(v,"]")}),c("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),c("ERR_ENCODING_NOT_SUPPORTED",function(b){return'The "'.concat(b,'" encoding is not supported')}),c("ERR_ENCODING_INVALID_ENCODED_DATA",function(b){return"The encoded data was not valid for encoding ".concat(b)}),c("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),c("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),c("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),c("ERR_INDEX_OUT_OF_RANGE","Index out of range"),c("ERR_INVALID_ARG_TYPE",f),c("ERR_INVALID_ARRAY_LENGTH",function(b,v,w){return e.strictEqual(typeof w,"number"),'The array "'.concat(b,'" (length ').concat(w,") must be of length ").concat(v,".")}),c("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),c("ERR_INVALID_CALLBACK","Callback must be a function"),c("ERR_INVALID_CHAR","Invalid character in %s"),c("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),c("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),c("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),c("ERR_INVALID_FILE_URL_PATH","File URL path %s"),c("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),c("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),c("ERR_INVALID_OPT_VALUE",function(b,v){return'The value "'.concat(String(v),'" is invalid for option "').concat(b,'"')}),c("ERR_INVALID_OPT_VALUE_ENCODING",function(b){return'The value "'.concat(String(b),'" is invalid for option "encoding"')}),c("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),c("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),c("ERR_INVALID_THIS",'Value of "this" must be of type %s'),c("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),c("ERR_INVALID_URL","Invalid URL: %s"),c("ERR_INVALID_URL_SCHEME",function(b){return"The URL must be ".concat(d(b,"scheme"))}),c("ERR_IPC_CHANNEL_CLOSED","Channel closed"),c("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),c("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),c("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),c("ERR_MISSING_ARGS",h),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),c("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),c("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),c("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),c("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),c("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),c("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),c("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),c("ERR_SOCKET_CANNOT_SEND","Unable to send data"),c("ERR_SOCKET_CLOSED","Socket is closed"),c("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),c("ERR_STDERR_CLOSE","process.stderr cannot be closed"),c("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),c("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),c("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),c("ERR_TLS_DH_PARAM_SIZE",function(b){return"DH parameter size ".concat(b," is less than 2048")}),c("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),c("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),c("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),c("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),c("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),c("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),c("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),c("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),c("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),c("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),c("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function f(b,v,w){e(b,"name is required");var y;v.includes("not ")?(y="must not be",v=v.split("not ")[1]):y="must be";var _;if(Array.isArray(b)){var E=b.map(function(A){return'"'.concat(A,'"')}).join(", ");_="The ".concat(E," arguments ").concat(y," ").concat(d(v,"type"))}else if(b.includes(" argument"))_="The ".concat(b," ").concat(y," ").concat(d(v,"type"));else{var S=b.includes(".")?"property":"argument";_='The "'.concat(b,'" ').concat(S," ").concat(y," ").concat(d(v,"type"))}return arguments.length>=3&&(_+=". Received type ".concat(w!==null?typeof w:"null")),_}function h(){for(var b=[],v=0;v<arguments.length;v++)b[v]=arguments[v];e(b.length>0,"At least one arg needs to be specified");var w="The ",y=b.length;switch(b=b.map(function(_){return'"'.concat(_,'"')}),y){case 1:w+="".concat(b[0]," argument");break;case 2:w+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:w+=b.slice(0,y-1).join(", "),w+=", and ".concat(b[y-1]," arguments");break}return"".concat(w," must be specified")}function d(b,v){if(e(b,"expected is required"),e(typeof v=="string","thing is required"),Array.isArray(b)){var w=b.length;return e(w>0,"At least one expected value needs to be specified"),b=b.map(function(y){return String(y)}),w>2?"one of ".concat(v," ").concat(b.slice(0,w-1).join(", "),", or ")+b[w-1]:w===2?"one of ".concat(v," ").concat(b[0]," or ").concat(b[1]):"of ".concat(v," ").concat(b[0])}else return"of ".concat(v," ").concat(String(b))}function m(b,v){return v?"Attempt to write outside buffer bounds":'"'.concat(b,'" is outside of buffer bounds')}return sn}function YO(){if(PO)return no;PO=!0,Object.defineProperty(no,"__esModule",{value:!0}),no.strToEncoding=no.assertEncoding=no.ENCODING_UTF8=void 0;var r=A2(),e=VO();no.ENCODING_UTF8="utf8";function t(i){if(i&&!r.Buffer.isEncoding(i))throw new e.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",i)}no.assertEncoding=t;function n(i,o){return!o||o===no.ENCODING_UTF8?i:o==="buffer"?new r.Buffer(i):new r.Buffer(i).toString(o)}return no.strToEncoding=n,no}function XO(){if(MO)return th;MO=!0,Object.defineProperty(th,"__esModule",{value:!0}),th.Dirent=void 0;var r=qp(),e=YO(),t=r.constants.S_IFMT,n=r.constants.S_IFDIR,i=r.constants.S_IFREG,o=r.constants.S_IFBLK,s=r.constants.S_IFCHR,a=r.constants.S_IFLNK,u=r.constants.S_IFIFO,c=r.constants.S_IFSOCK,f=(function(){function h(){this.name="",this.mode=0}return h.build=function(d,m){var b=new h,v=d.getNode().mode;return b.name=(0,e.strToEncoding)(d.getName(),m),b.mode=v,b},h.prototype._checkModeProperty=function(d){return(this.mode&t)===d},h.prototype.isDirectory=function(){return this._checkModeProperty(n)},h.prototype.isFile=function(){return this._checkModeProperty(i)},h.prototype.isBlockDevice=function(){return this._checkModeProperty(o)},h.prototype.isCharacterDevice=function(){return this._checkModeProperty(s)},h.prototype.isSymbolicLink=function(){return this._checkModeProperty(a)},h.prototype.isFIFO=function(){return this._checkModeProperty(u)},h.prototype.isSocket=function(){return this._checkModeProperty(c)},h})();return th.Dirent=f,th.default=f,th}function KO(){if(BO)return ib;BO=!0;var r=zr;Object.defineProperty(ib,"__esModule",{value:!0});var e;return typeof r.nextTick=="function"?e=r.nextTick.bind(typeof globalThis<"u"?globalThis:FO):e=setTimeout.bind(typeof globalThis<"u"?globalThis:FO),ib.default=e,ib}function ZO(){if(UO)return rh;UO=!0;var r=zr;Object.defineProperty(rh,"__esModule",{value:!0}),rh.createProcess=void 0;var e=function(){if(typeof r<"u")return r;try{return zr}catch{return}};function t(){var n=e()||{};return n.cwd||(n.cwd=function(){return"/"}),n.nextTick||(n.nextTick=KO().default),n.emitWarning||(n.emitWarning=function(i,o){console.warn("".concat(o).concat(o?": ":"").concat(i))}),n.env||(n.env={}),n}return rh.createProcess=t,rh.default=t(),rh}function qU(){if(jO)return oi;jO=!0;var r=oi&&oi.__extends||(function(){var w=function(y,_){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,S){E.__proto__=S}||function(E,S){for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(E[A]=S[A])},w(y,_)};return function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");w(y,_);function E(){this.constructor=y}y.prototype=_===null?Object.create(_):(E.prototype=_.prototype,new E)}})();Object.defineProperty(oi,"__esModule",{value:!0}),oi.File=oi.Link=oi.Node=oi.SEP=void 0;var e=ZO(),t=A2(),n=qp(),i=nn,o=E2(),s=n.constants.S_IFMT,a=n.constants.S_IFDIR,u=n.constants.S_IFREG,c=n.constants.S_IFLNK,f=n.constants.O_APPEND,h=function(){var w,y;return(y=(w=e.default.getuid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0},d=function(){var w,y;return(y=(w=e.default.getgid)===null||w===void 0?void 0:w.call(e.default))!==null&&y!==void 0?y:0};oi.SEP="/";var m=(function(w){r(y,w);function y(_,E){E===void 0&&(E=438);var S=w.call(this)||this;return S._uid=h(),S._gid=d(),S._atime=new Date,S._mtime=new Date,S._ctime=new Date,S._perm=438,S.mode=u,S._nlink=1,S._perm=E,S.mode|=E,S.ino=_,S}return Object.defineProperty(y.prototype,"ctime",{get:function(){return this._ctime},set:function(_){this._ctime=_},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"uid",{get:function(){return this._uid},set:function(_){this._uid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"gid",{get:function(){return this._gid},set:function(_){this._gid=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"atime",{get:function(){return this._atime},set:function(_){this._atime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"mtime",{get:function(){return this._mtime},set:function(_){this._mtime=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"perm",{get:function(){return this._perm},set:function(_){this._perm=_,this.ctime=new Date},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nlink",{get:function(){return this._nlink},set:function(_){this._nlink=_,this.ctime=new Date},enumerable:!1,configurable:!0}),y.prototype.getString=function(_){return _===void 0&&(_="utf8"),this.atime=new Date,this.getBuffer().toString(_)},y.prototype.setString=function(_){this.buf=(0,t.bufferFrom)(_,"utf8"),this.touch()},y.prototype.getBuffer=function(){return this.atime=new Date,this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)},y.prototype.setBuffer=function(_){this.buf=(0,t.bufferFrom)(_),this.touch()},y.prototype.getSize=function(){return this.buf?this.buf.length:0},y.prototype.setModeProperty=function(_){this.mode=this.mode&~s|_},y.prototype.setIsFile=function(){this.setModeProperty(u)},y.prototype.setIsDirectory=function(){this.setModeProperty(a)},y.prototype.setIsSymlink=function(){this.setModeProperty(c)},y.prototype.isFile=function(){return(this.mode&s)===u},y.prototype.isDirectory=function(){return(this.mode&s)===a},y.prototype.isSymlink=function(){return(this.mode&s)===c},y.prototype.makeSymlink=function(_){this.symlink=_,this.setIsSymlink()},y.prototype.write=function(_,E,S,A){if(E===void 0&&(E=0),S===void 0&&(S=_.length),A===void 0&&(A=0),this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),A+S>this.buf.length){var F=(0,t.bufferAllocUnsafe)(A+S);this.buf.copy(F,0,0,this.buf.length),this.buf=F}return _.copy(this.buf,A,E,E+S),this.touch(),S},y.prototype.read=function(_,E,S,A){E===void 0&&(E=0),S===void 0&&(S=_.byteLength),A===void 0&&(A=0),this.atime=new Date,this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));var F=S;return F>_.byteLength&&(F=_.byteLength),F+A>this.buf.length&&(F=this.buf.length-A),this.buf.copy(_,E,A,A+F),F},y.prototype.truncate=function(_){if(_===void 0&&(_=0),!_)this.buf=(0,t.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),_<=this.buf.length)this.buf=this.buf.slice(0,_);else{var E=(0,t.bufferAllocUnsafe)(_);this.buf.copy(E),E.fill(0,this.buf.length),this.buf=E}this.touch()},y.prototype.chmod=function(_){this.perm=_,this.mode=this.mode&-512|_,this.touch()},y.prototype.chown=function(_,E){this.uid=_,this.gid=E,this.touch()},y.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},y.prototype.canRead=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&4||E===this.gid&&this.perm&32||_===this.uid&&this.perm&256)},y.prototype.canWrite=function(_,E){return _===void 0&&(_=h()),E===void 0&&(E=d()),!!(this.perm&2||E===this.gid&&this.perm&16||_===this.uid&&this.perm&128)},y.prototype.del=function(){this.emit("delete",this)},y.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},y})(i.EventEmitter);oi.Node=m;var b=(function(w){r(y,w);function y(_,E,S){var A=w.call(this)||this;return A.children={},A._steps=[],A.ino=0,A.length=0,A.vol=_,A.parent=E,A.name=S,A.syncSteps(),A}return Object.defineProperty(y.prototype,"steps",{get:function(){return this._steps},set:function(_){this._steps=_;for(var E=0,S=Object.entries(this.children);E<S.length;E++){var A=S[E],F=A[0],I=A[1];F==="."||F===".."||I?.syncSteps()}},enumerable:!1,configurable:!0}),y.prototype.setNode=function(_){this.node=_,this.ino=_.ino},y.prototype.getNode=function(){return this.node},y.prototype.createChild=function(_,E){E===void 0&&(E=this.vol.createNode());var S=new y(this.vol,this,_);return S.setNode(E),E.isDirectory()&&(S.children["."]=S,S.getNode().nlink++),this.setChild(_,S),S},y.prototype.setChild=function(_,E){E===void 0&&(E=new y(this.vol,this,_)),this.children[_]=E,E.parent=this,this.length++;var S=E.getNode();return S.isDirectory()&&(E.children[".."]=this,this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",E,this),E},y.prototype.deleteChild=function(_){var E=_.getNode();E.isDirectory()&&(delete _.children[".."],this.getNode().nlink--),delete this.children[_.getName()],this.length--,this.getNode().mtime=new Date,this.emit("child:delete",_,this)},y.prototype.getChild=function(_){if(this.getNode().mtime=new Date,Object.hasOwnProperty.call(this.children,_))return this.children[_]},y.prototype.getPath=function(){return this.steps.join(oi.SEP)},y.prototype.getName=function(){return this.steps[this.steps.length-1]},y.prototype.walk=function(_,E,S){if(E===void 0&&(E=_.length),S===void 0&&(S=0),S>=_.length)return this;if(S>=E)return this;var A=_[S],F=this.getChild(A);return F?F.walk(_,E,S+1):null},y.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},y.prototype.syncSteps=function(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]},y})(i.EventEmitter);oi.Link=b;var v=(function(){function w(y,_,E,S){this.position=0,this.link=y,this.node=_,this.flags=E,this.fd=S}return w.prototype.getString=function(y){return this.node.getString()},w.prototype.setString=function(y){this.node.setString(y)},w.prototype.getBuffer=function(){return this.node.getBuffer()},w.prototype.setBuffer=function(y){this.node.setBuffer(y)},w.prototype.getSize=function(){return this.node.getSize()},w.prototype.truncate=function(y){this.node.truncate(y)},w.prototype.seekTo=function(y){this.position=y},w.prototype.stats=function(){return o.default.build(this.node)},w.prototype.write=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.length),typeof S!="number"&&(S=this.position),this.flags&f&&(S=this.getSize());var A=this.node.write(y,_,E,S);return this.position=S+A,A},w.prototype.read=function(y,_,E,S){_===void 0&&(_=0),E===void 0&&(E=y.byteLength),typeof S!="number"&&(S=this.position);var A=this.node.read(y,_,E,S);return this.position=S+A,A},w.prototype.chmod=function(y){this.node.chmod(y)},w.prototype.chown=function(y,_){this.node.chown(y,_)},w})();return oi.File=v,oi}function GU(){if($O)return sb;$O=!0,Object.defineProperty(sb,"__esModule",{value:!0});function r(e,t,n){var i=setTimeout.apply(typeof globalThis<"u"?globalThis:HU,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}return sb.default=r,sb}function VU(){if(zO)return pl;zO=!0;var r=pl&&pl.__spreadArray||function(i,o,s){if(s||arguments.length===2)for(var a=0,u=o.length,c;a<u;a++)(c||!(a in o))&&(c||(c=Array.prototype.slice.call(o,0,a)),c[a]=o[a]);return i.concat(c||Array.prototype.slice.call(o))};Object.defineProperty(pl,"__esModule",{value:!0}),pl.FileHandle=void 0;function e(i,o,s){return s===void 0&&(s=function(a){return a}),function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return new Promise(function(c,f){i[o].bind(i).apply(void 0,r(r([],a,!1),[function(h,d){return h?f(h):c(s(d))}],!1))})}}var t=(function(){function i(o,s){this.vol=o,this.fd=s}return i.prototype.appendFile=function(o,s){return e(this.vol,"appendFile")(this.fd,o,s)},i.prototype.chmod=function(o){return e(this.vol,"fchmod")(this.fd,o)},i.prototype.chown=function(o,s){return e(this.vol,"fchown")(this.fd,o,s)},i.prototype.close=function(){return e(this.vol,"close")(this.fd)},i.prototype.datasync=function(){return e(this.vol,"fdatasync")(this.fd)},i.prototype.read=function(o,s,a,u){return e(this.vol,"read",function(c){return{bytesRead:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.readFile=function(o){return e(this.vol,"readFile")(this.fd,o)},i.prototype.stat=function(o){return e(this.vol,"fstat")(this.fd,o)},i.prototype.sync=function(){return e(this.vol,"fsync")(this.fd)},i.prototype.truncate=function(o){return e(this.vol,"ftruncate")(this.fd,o)},i.prototype.utimes=function(o,s){return e(this.vol,"futimes")(this.fd,o,s)},i.prototype.write=function(o,s,a,u){return e(this.vol,"write",function(c){return{bytesWritten:c,buffer:o}})(this.fd,o,s,a,u)},i.prototype.writeFile=function(o,s){return e(this.vol,"writeFile")(this.fd,o,s)},i})();pl.FileHandle=t;function n(i){return typeof Promise>"u"?null:{FileHandle:t,access:function(o,s){return e(i,"access")(o,s)},appendFile:function(o,s,a){return e(i,"appendFile")(o instanceof t?o.fd:o,s,a)},chmod:function(o,s){return e(i,"chmod")(o,s)},chown:function(o,s,a){return e(i,"chown")(o,s,a)},copyFile:function(o,s,a){return e(i,"copyFile")(o,s,a)},lchmod:function(o,s){return e(i,"lchmod")(o,s)},lchown:function(o,s,a){return e(i,"lchown")(o,s,a)},link:function(o,s){return e(i,"link")(o,s)},lstat:function(o,s){return e(i,"lstat")(o,s)},mkdir:function(o,s){return e(i,"mkdir")(o,s)},mkdtemp:function(o,s){return e(i,"mkdtemp")(o,s)},open:function(o,s,a){return e(i,"open",function(u){return new t(i,u)})(o,s,a)},readdir:function(o,s){return e(i,"readdir")(o,s)},readFile:function(o,s){return e(i,"readFile")(o instanceof t?o.fd:o,s)},readlink:function(o,s){return e(i,"readlink")(o,s)},realpath:function(o,s){return e(i,"realpath")(o,s)},rename:function(o,s){return e(i,"rename")(o,s)},rmdir:function(o){return e(i,"rmdir")(o)},rm:function(o,s){return e(i,"rm")(o,s)},stat:function(o,s){return e(i,"stat")(o,s)},symlink:function(o,s,a){return e(i,"symlink")(o,s,a)},truncate:function(o,s){return e(i,"truncate")(o,s)},unlink:function(o){return e(i,"unlink")(o)},utimes:function(o,s,a){return e(i,"utimes")(o,s,a)},writeFile:function(o,s,a){return e(i,"writeFile")(o instanceof t?o.fd:o,s,a)}}}return pl.default=n,pl}function YU(){if(WO)return Wp;WO=!0;var r=zr;Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.correctPath=s,Wp.unixify=o;var e=r.platform==="win32";function t(a){var u=a.length-1;if(u<2)return a;for(;n(a,u);)u--;return a.substr(0,u+1)}function n(a,u){var c=a[u];return u>0&&(c==="/"||e&&c==="\\")}function i(a,u){if(typeof a!="string")throw new TypeError("expected a string");return a=a.replace(/[\\\/]+/g,"/"),u!==!1&&(a=t(a)),a}function o(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e?(a=i(a,u),a.replace(/^([a-zA-Z]+:|\.\/)/,"")):a}function s(a){return o(a.replace(/^\\\\\?\\.:\\/,"\\"))}return Wp}function JO(){if(qO)return Ft;qO=!0;var r=Ft&&Ft.__extends||(function(){var he=function(z,G){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,ye){ie.__proto__=ye}||function(ie,ye){for(var Ne in ye)Object.prototype.hasOwnProperty.call(ye,Ne)&&(ie[Ne]=ye[Ne])},he(z,G)};return function(z,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");he(z,G);function ie(){this.constructor=z}z.prototype=G===null?Object.create(G):(ie.prototype=G.prototype,new ie)}})(),e=Ft&&Ft.__spreadArray||function(he,z,G){if(G||arguments.length===2)for(var ie=0,ye=z.length,Ne;ie<ye;ie++)(Ne||!(ie in z))&&(Ne||(Ne=Array.prototype.slice.call(z,0,ie)),Ne[ie]=z[ie]);return he.concat(Ne||Array.prototype.slice.call(z))};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.FSWatcher=Ft.StatWatcher=Ft.Volume=Ft.toUnixTimestamp=Ft.bufferToEncoding=Ft.dataToBuffer=Ft.dataToStr=Ft.pathToSteps=Ft.filenameToSteps=Ft.pathToFilename=Ft.flagsToNumber=Ft.FLAGS=void 0;var t=rn,n=qU(),i=E2(),o=XO(),s=A2(),a=KO(),u=ZO(),c=GU(),f=ii,h=qp(),d=nn,m=YO(),b=VO(),v=ze,w=VU(),y=t.resolve,_=h.constants.O_RDONLY,E=h.constants.O_WRONLY,S=h.constants.O_RDWR,A=h.constants.O_CREAT,F=h.constants.O_EXCL,I=h.constants.O_TRUNC,X=h.constants.O_APPEND,Z=h.constants.O_SYNC,H=h.constants.O_DIRECTORY,ne=h.constants.F_OK,L=h.constants.COPYFILE_EXCL,$=h.constants.COPYFILE_FICLONE_FORCE,K=t.posix?t.posix:t,le=K.sep,te=K.relative,N=K.join,x=K.dirname,P=u.default.platform==="win32",C=128,U={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},j=function(he){return"Expected options to be either an object or a string, but got ".concat(he," instead")},M="ENOENT",Q="EBADF",ce="EINVAL",_e="EPERM",re="EPROTO",W="EEXIST",oe="ENOTDIR",we="EMFILE",xe="EACCES",V="EISDIR",B="ENOTEMPTY",se="ENOSYS",ge="ERR_FS_EISDIR";function Se(he,z,G,ie){z===void 0&&(z=""),G===void 0&&(G=""),ie===void 0&&(ie="");var ye="";switch(G&&(ye=" '".concat(G,"'")),ie&&(ye+=" -> '".concat(ie,"'")),he){case M:return"ENOENT: no such file or directory, ".concat(z).concat(ye);case Q:return"EBADF: bad file descriptor, ".concat(z).concat(ye);case ce:return"EINVAL: invalid argument, ".concat(z).concat(ye);case _e:return"EPERM: operation not permitted, ".concat(z).concat(ye);case re:return"EPROTO: protocol error, ".concat(z).concat(ye);case W:return"EEXIST: file already exists, ".concat(z).concat(ye);case oe:return"ENOTDIR: not a directory, ".concat(z).concat(ye);case V:return"EISDIR: illegal operation on a directory, ".concat(z).concat(ye);case xe:return"EACCES: permission denied, ".concat(z).concat(ye);case B:return"ENOTEMPTY: directory not empty, ".concat(z).concat(ye);case we:return"EMFILE: too many open files, ".concat(z).concat(ye);case se:return"ENOSYS: function not implemented, ".concat(z).concat(ye);case ge:return"[ERR_FS_EISDIR]: Path is a directory: ".concat(z," returned EISDIR (is a directory) ").concat(G);default:return"".concat(he,": error occurred, ").concat(z).concat(ye)}}function be(he,z,G,ie,ye){z===void 0&&(z=""),G===void 0&&(G=""),ie===void 0&&(ie=""),ye===void 0&&(ye=Error);var Ne=new ye(Se(he,z,G,ie));return Ne.code=he,G&&(Ne.path=G),Ne}var pe;(function(he){he[he.r=_]="r",he[he["r+"]=S]="r+",he[he.rs=_|Z]="rs",he[he.sr=he.rs]="sr",he[he["rs+"]=S|Z]="rs+",he[he["sr+"]=he["rs+"]]="sr+",he[he.w=E|A|I]="w",he[he.wx=E|A|I|F]="wx",he[he.xw=he.wx]="xw",he[he["w+"]=S|A|I]="w+",he[he["wx+"]=S|A|I|F]="wx+",he[he["xw+"]=he["wx+"]]="xw+",he[he.a=E|X|A]="a",he[he.ax=E|X|A|F]="ax",he[he.xa=he.ax]="xa",he[he["a+"]=S|X|A]="a+",he[he["ax+"]=S|X|A|F]="ax+",he[he["xa+"]=he["ax+"]]="xa+"})(pe=Ft.FLAGS||(Ft.FLAGS={}));function Ae(he){if(typeof he=="number")return he;if(typeof he=="string"){var z=pe[he];if(typeof z<"u")return z}throw new b.TypeError("ERR_INVALID_OPT_VALUE","flags",he)}Ft.flagsToNumber=Ae;function $e(he,z){var G;if(z){var ie=typeof z;switch(ie){case"string":G=Object.assign({},he,{encoding:z});break;case"object":G=Object.assign({},he,z);break;default:throw TypeError(j(ie))}}else return he;return G.encoding!=="buffer"&&(0,m.assertEncoding)(G.encoding),G}function ke(he){return function(z){return $e(he,z)}}function Oe(he){if(typeof he!="function")throw TypeError(U.CB);return he}function Ve(he){return function(z,G){return typeof z=="function"?[he(),z]:[he(z),Oe(G)]}}var Je={encoding:"utf8"},tt=ke(Je),T=Ve(tt),g={flag:"r"},p=ke(g),R={encoding:"utf8",mode:438,flag:pe[pe.w]},J=ke(R),D={encoding:"utf8",mode:438,flag:pe[pe.a]},ae=ke(D),fe=Ve(ae),Ee=Je,ve=ke(Ee),Ie=Ve(ve),Y={mode:511,recursive:!1},Me=function(he){return typeof he=="number"?Object.assign({},Y,{mode:he}):Object.assign({},Y,he)},et={recursive:!1},O=function(he){return Object.assign({},et,he)},Pe=ke(Je),je=Ve(Pe),de={encoding:"utf8",withFileTypes:!1},Te=ke(de),Be=Ve(Te),ut={bigint:!1},ue=function(he){return he===void 0&&(he={}),Object.assign({},ut,he)},me=function(he,z){return typeof he=="function"?[ue(),he]:[ue(he),Oe(z)]};function We(he){if(he.hostname!=="")throw new b.TypeError("ERR_INVALID_FILE_URL_HOST",u.default.platform);for(var z=he.pathname,G=0;G<z.length;G++)if(z[G]==="%"){var ie=z.codePointAt(G+2)|32;if(z[G+1]==="2"&&ie===102)throw new b.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(z)}function Ue(he){if(typeof he!="string"&&!s.Buffer.isBuffer(he)){try{if(!(he instanceof Qt.URL))throw new TypeError(U.PATH_STR)}catch{throw new TypeError(U.PATH_STR)}he=We(he)}var z=String(he);return Dr(z),z}Ft.pathToFilename=Ue;var Ze=function(he,z){return z===void 0&&(z=u.default.cwd()),y(z,he)};if(P){var dt=Ze,Rt=YU().unixify;Ze=function(he,z){return Rt(dt(he,z))}}function Et(he,z){var G=Ze(he,z),ie=G.substring(1);return ie?ie.split(le):[]}Ft.filenameToSteps=Et;function ar(he){return Et(Ue(he))}Ft.pathToSteps=ar;function _i(he,z){return z===void 0&&(z=m.ENCODING_UTF8),s.Buffer.isBuffer(he)?he.toString(z):he instanceof Uint8Array?(0,s.bufferFrom)(he).toString(z):String(he)}Ft.dataToStr=_i;function qn(he,z){return z===void 0&&(z=m.ENCODING_UTF8),s.Buffer.isBuffer(he)?he:he instanceof Uint8Array?(0,s.bufferFrom)(he):(0,s.bufferFrom)(String(he),z)}Ft.dataToBuffer=qn;function Ht(he,z){return!z||z==="buffer"?he:he.toString(z)}Ft.bufferToEncoding=Ht;function Dr(he,z){if((""+he).indexOf("\0")!==-1){var G=new Error("Path must be a string without null bytes");throw G.code=M,G}return!0}function yr(he,z){if(typeof he=="number")return he;if(typeof he=="string")return parseInt(he,8);if(z)return zt(z)}function zt(he,z){var G=yr(he,z);if(typeof G!="number"||isNaN(G))throw new TypeError(U.MODE_INT);return G}function Yt(he){return he>>>0===he}function Zr(he){if(!Yt(he))throw TypeError(U.FD)}function Jr(he){if(typeof he=="string"&&+he==he)return+he;if(he instanceof Date)return he.getTime()/1e3;if(isFinite(he))return he<0?Date.now()/1e3:he;throw new Error("Cannot parse time: "+he)}Ft.toUnixTimestamp=Jr;function Qr(he){if(typeof he!="number")throw TypeError(U.UID)}function Mf(he){if(typeof he!="number")throw TypeError(U.GID)}function M3(he){var z={};function G(ie,ye){for(var Ne in ye){var Fe=ye[Ne],He=N(ie,Ne);typeof Fe=="string"?z[He]=Fe:typeof Fe=="object"&&Fe!==null&&Object.keys(Fe).length>0?G(He,Fe):z[He]=null}}return G("",he),z}var B3=(function(){function he(z){z===void 0&&(z={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=(0,w.default)(this),this.statWatchers={},this.props=Object.assign({Node:n.Node,Link:n.Link,File:n.File},z);var G=this.createLink();G.setNode(this.createNode(!0));var ie=this;this.StatWatcher=(function(Fe){r(He,Fe);function He(){return Fe.call(this,ie)||this}return He})(kT);var ye=Zs;this.ReadStream=(function(Fe){r(He,Fe);function He(){for(var rt=[],ot=0;ot<arguments.length;ot++)rt[ot]=arguments[ot];return Fe.apply(this,e([ie],rt,!1))||this}return He})(ye);var Ne=Ji;this.WriteStream=(function(Fe){r(He,Fe);function He(){for(var rt=[],ot=0;ot<arguments.length;ot++)rt[ot]=arguments[ot];return Fe.apply(this,e([ie],rt,!1))||this}return He})(Ne),this.FSWatcher=(function(Fe){r(He,Fe);function He(){return Fe.call(this,ie)||this}return He})(PT),G.setChild(".",G),G.getNode().nlink++,G.setChild("..",G),G.getNode().nlink++,this.root=G}return he.fromJSON=function(z,G){var ie=new he;return ie.fromJSON(z,G),ie},he.fromNestedJSON=function(z,G){var ie=new he;return ie.fromNestedJSON(z,G),ie},Object.defineProperty(he.prototype,"promises",{get:function(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!1,configurable:!0}),he.prototype.createLink=function(z,G,ie,ye){if(ie===void 0&&(ie=!1),!z)return new this.props.Link(this,null,"");if(!G)throw new Error("createLink: name cannot be empty");return z.createChild(G,this.createNode(ie,ye))},he.prototype.deleteLink=function(z){var G=z.parent;return G?(G.deleteChild(z),!0):!1},he.prototype.newInoNumber=function(){var z=this.releasedInos.pop();return z||(this.ino=(this.ino+1)%4294967295,this.ino)},he.prototype.newFdNumber=function(){var z=this.releasedFds.pop();return typeof z=="number"?z:he.fd--},he.prototype.createNode=function(z,G){z===void 0&&(z=!1);var ie=new this.props.Node(this.newInoNumber(),G);return z&&ie.setIsDirectory(),this.inodes[ie.ino]=ie,ie},he.prototype.getNode=function(z){return this.inodes[z]},he.prototype.deleteNode=function(z){z.del(),delete this.inodes[z.ino],this.releasedInos.push(z.ino)},he.prototype.genRndStr=function(){var z=(Math.random()+1).toString(36).substring(2,8);return z.length===6?z:this.genRndStr()},he.prototype.getLink=function(z){return this.root.walk(z)},he.prototype.getLinkOrThrow=function(z,G){var ie=Et(z),ye=this.getLink(ie);if(!ye)throw be(M,G,z);return ye},he.prototype.getResolvedLink=function(z){for(var G=typeof z=="string"?Et(z):z,ie=this.root,ye=0;ye<G.length;){var Ne=G[ye];if(ie=ie.getChild(Ne),!ie)return null;var Fe=ie.getNode();if(Fe.isSymlink()){G=Fe.symlink.concat(G.slice(ye+1)),ie=this.root,ye=0;continue}ye++}return ie},he.prototype.getResolvedLinkOrThrow=function(z,G){var ie=this.getResolvedLink(z);if(!ie)throw be(M,G,z);return ie},he.prototype.resolveSymlinks=function(z){return this.getResolvedLink(z.steps.slice(1))},he.prototype.getLinkAsDirOrThrow=function(z,G){var ie=this.getLinkOrThrow(z,G);if(!ie.getNode().isDirectory())throw be(oe,G,z);return ie},he.prototype.getLinkParent=function(z){return this.root.walk(z,z.length-1)},he.prototype.getLinkParentAsDirOrThrow=function(z,G){var ie=z instanceof Array?z:Et(z),ye=this.getLinkParent(ie);if(!ye)throw be(M,G,le+ie.join(le));if(!ye.getNode().isDirectory())throw be(oe,G,le+ie.join(le));return ye},he.prototype.getFileByFd=function(z){return this.fds[String(z)]},he.prototype.getFileByFdOrThrow=function(z,G){if(!Yt(z))throw TypeError(U.FD);var ie=this.getFileByFd(z);if(!ie)throw be(Q,G);return ie},he.prototype.wrapAsync=function(z,G,ie){var ye=this;Oe(ie),(0,a.default)(function(){var Ne;try{Ne=z.apply(ye,G)}catch(Fe){ie(Fe);return}ie(null,Ne)})},he.prototype._toJSON=function(z,G,ie){var ye;z===void 0&&(z=this.root),G===void 0&&(G={});var Ne=!0,Fe=z.children;z.getNode().isFile()&&(Fe=(ye={},ye[z.getName()]=z.parent.getChild(z.getName()),ye),z=z.parent);for(var He in Fe)if(!(He==="."||He==="..")){Ne=!1;var rt=z.getChild(He);if(!rt)throw new Error("_toJSON: unexpected undefined");var ot=rt.getNode();if(ot.isFile()){var yt=rt.getPath();ie&&(yt=te(ie,yt)),G[yt]=ot.getString()}else ot.isDirectory()&&this._toJSON(rt,G,ie)}var Lt=z.getPath();return ie&&(Lt=te(ie,Lt)),Lt&&Ne&&(G[Lt]=null),G},he.prototype.toJSON=function(z,G,ie){G===void 0&&(G={}),ie===void 0&&(ie=!1);var ye=[];if(z){z instanceof Array||(z=[z]);for(var Ne=0,Fe=z;Ne<Fe.length;Ne++){var He=Fe[Ne],rt=Ue(He),ot=this.getResolvedLink(rt);ot&&ye.push(ot)}}else ye.push(this.root);if(!ye.length)return G;for(var yt=0,Lt=ye;yt<Lt.length;yt++){var ot=Lt[yt];this._toJSON(ot,G,ie?ot.getPath():"")}return G},he.prototype.fromJSON=function(z,G){G===void 0&&(G=u.default.cwd());for(var ie in z){var ye=z[ie];if(ie=Ze(ie,G),typeof ye=="string"){var Ne=x(ie);this.mkdirpBase(Ne,511),this.writeFileSync(ie,ye)}else this.mkdirpBase(ie,511)}},he.prototype.fromNestedJSON=function(z,G){this.fromJSON(M3(z),G)},he.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},he.prototype.mountSync=function(z,G){this.fromJSON(G,z)},he.prototype.openLink=function(z,G,ie){if(ie===void 0&&(ie=!0),this.openFiles>=this.maxFiles)throw be(we,"open",z.getPath());var ye=z;if(ie&&(ye=this.resolveSymlinks(z)),!ye)throw be(M,"open",z.getPath());var Ne=ye.getNode();if(Ne.isDirectory()){if((G&(_|S|E))!==_)throw be(V,"open",z.getPath())}else if(G&H)throw be(oe,"open",z.getPath());if(!(G&E)&&!Ne.canRead())throw be(xe,"open",z.getPath());var Fe=new this.props.File(z,Ne,G,this.newFdNumber());return this.fds[Fe.fd]=Fe,this.openFiles++,G&I&&Fe.truncate(),Fe},he.prototype.openFile=function(z,G,ie,ye){ye===void 0&&(ye=!0);var Ne=Et(z),Fe=ye?this.getResolvedLink(Ne):this.getLink(Ne);if(Fe&&G&F)throw be(W,"open",z);if(!Fe&&G&A){var He=this.getResolvedLink(Ne.slice(0,Ne.length-1));if(!He)throw be(M,"open",le+Ne.join(le));G&A&&typeof ie=="number"&&(Fe=this.createLink(He,Ne[Ne.length-1],!1,ie))}if(Fe)return this.openLink(Fe,G,ye);throw be(M,"open",z)},he.prototype.openBase=function(z,G,ie,ye){ye===void 0&&(ye=!0);var Ne=this.openFile(z,G,ie,ye);if(!Ne)throw be(M,"open",z);return Ne.fd},he.prototype.openSync=function(z,G,ie){ie===void 0&&(ie=438);var ye=zt(ie),Ne=Ue(z),Fe=Ae(G);return this.openBase(Ne,Fe,ye)},he.prototype.open=function(z,G,ie,ye){var Ne=ie,Fe=ye;typeof ie=="function"&&(Ne=438,Fe=ie),Ne=Ne||438;var He=zt(Ne),rt=Ue(z),ot=Ae(G);this.wrapAsync(this.openBase,[rt,ot,He],Fe)},he.prototype.closeFile=function(z){this.fds[z.fd]&&(this.openFiles--,delete this.fds[z.fd],this.releasedFds.push(z.fd))},he.prototype.closeSync=function(z){Zr(z);var G=this.getFileByFdOrThrow(z,"close");this.closeFile(G)},he.prototype.close=function(z,G){Zr(z),this.wrapAsync(this.closeSync,[z],G)},he.prototype.openFileOrGetById=function(z,G,ie){if(typeof z=="number"){var ye=this.fds[z];if(!ye)throw be(M);return ye}else return this.openFile(Ue(z),G,ie)},he.prototype.readBase=function(z,G,ie,ye,Ne){var Fe=this.getFileByFdOrThrow(z);return Fe.read(G,Number(ie),Number(ye),Ne)},he.prototype.readSync=function(z,G,ie,ye,Ne){return Zr(z),this.readBase(z,G,ie,ye,Ne)},he.prototype.read=function(z,G,ie,ye,Ne,Fe){var He=this;if(Oe(Fe),ye===0)return u.default.nextTick(function(){Fe&&Fe(null,0,G)});(0,a.default)(function(){try{var rt=He.readBase(z,G,ie,ye,Ne);Fe(null,rt,G)}catch(ot){Fe(ot)}})},he.prototype.readFileBase=function(z,G,ie){var ye,Ne=typeof z=="number",Fe=Ne&&Yt(z),He;if(Fe)He=z;else{var rt=Ue(z),ot=Et(rt),yt=this.getResolvedLink(ot);if(yt){var Lt=yt.getNode();if(Lt.isDirectory())throw be(V,"open",yt.getPath())}He=this.openSync(z,G)}try{ye=Ht(this.getFileByFdOrThrow(He).getBuffer(),ie)}finally{Fe||this.closeSync(He)}return ye},he.prototype.readFileSync=function(z,G){var ie=p(G),ye=Ae(ie.flag);return this.readFileBase(z,ye,ie.encoding)},he.prototype.readFile=function(z,G,ie){var ye=Ve(p)(G,ie),Ne=ye[0],Fe=ye[1],He=Ae(Ne.flag);this.wrapAsync(this.readFileBase,[z,He,Ne.encoding],Fe)},he.prototype.writeBase=function(z,G,ie,ye,Ne){var Fe=this.getFileByFdOrThrow(z,"write");return Fe.write(G,ie,ye,Ne)},he.prototype.writeSync=function(z,G,ie,ye,Ne){Zr(z);var Fe,He,rt,ot,yt=typeof G!="string";yt?(He=(ie||0)|0,rt=ye,ot=Ne):(ot=ie,Fe=ye);var Lt=qn(G,Fe);return yt?typeof rt>"u"&&(rt=Lt.length):(He=0,rt=Lt.length),this.writeBase(z,Lt,He,rt,ot)},he.prototype.write=function(z,G,ie,ye,Ne,Fe){var He=this;Zr(z);var rt,ot,yt,Lt,en,Eu=typeof G,Js=typeof ie,sl=typeof ye,Au=typeof Ne;Eu!=="string"?Js==="function"?en=ie:sl==="function"?(rt=ie|0,en=ye):Au==="function"?(rt=ie|0,ot=ye,en=Ne):(rt=ie|0,ot=ye,yt=Ne,en=Fe):Js==="function"?en=ie:sl==="function"?(yt=ie,en=ye):Au==="function"&&(yt=ie,Lt=ye,en=Ne);var jr=qn(G,Lt);Eu!=="string"?typeof ot>"u"&&(ot=jr.length):(rt=0,ot=jr.length);var Qi=Oe(en);(0,a.default)(function(){try{var Ts=He.writeBase(z,jr,rt,ot,yt);Eu!=="string"?Qi(null,Ts,jr):Qi(null,Ts,G)}catch(p0){Qi(p0)}})},he.prototype.writeFileBase=function(z,G,ie,ye){var Ne=typeof z=="number",Fe;Ne?Fe=z:Fe=this.openBase(Ue(z),ie,ye);var He=0,rt=G.length,ot=ie&X?void 0:0;try{for(;rt>0;){var yt=this.writeSync(Fe,G,He,rt,ot);He+=yt,rt-=yt,ot!==void 0&&(ot+=yt)}}finally{Ne||this.closeSync(Fe)}},he.prototype.writeFileSync=function(z,G,ie){var ye=J(ie),Ne=Ae(ye.flag),Fe=zt(ye.mode),He=qn(G,ye.encoding);this.writeFileBase(z,He,Ne,Fe)},he.prototype.writeFile=function(z,G,ie,ye){var Ne=ie,Fe=ye;typeof ie=="function"&&(Ne=R,Fe=ie);var He=Oe(Fe),rt=J(Ne),ot=Ae(rt.flag),yt=zt(rt.mode),Lt=qn(G,rt.encoding);this.wrapAsync(this.writeFileBase,[z,Lt,ot,yt],He)},he.prototype.linkBase=function(z,G){var ie=Et(z),ye=this.getLink(ie);if(!ye)throw be(M,"link",z,G);var Ne=Et(G),Fe=this.getLinkParent(Ne);if(!Fe)throw be(M,"link",z,G);var He=Ne[Ne.length-1];if(Fe.getChild(He))throw be(W,"link",z,G);var rt=ye.getNode();rt.nlink++,Fe.createChild(He,rt)},he.prototype.copyFileBase=function(z,G,ie){var ye=this.readFileSync(z);if(ie&L&&this.existsSync(G))throw be(W,"copyFile",z,G);if(ie&$)throw be(se,"copyFile",z,G);this.writeFileBase(G,ye,pe.w,438)},he.prototype.copyFileSync=function(z,G,ie){var ye=Ue(z),Ne=Ue(G);return this.copyFileBase(ye,Ne,(ie||0)|0)},he.prototype.copyFile=function(z,G,ie,ye){var Ne=Ue(z),Fe=Ue(G),He,rt;typeof ie=="function"?(He=0,rt=ie):(He=ie,rt=ye),Oe(rt),this.wrapAsync(this.copyFileBase,[Ne,Fe,He],rt)},he.prototype.linkSync=function(z,G){var ie=Ue(z),ye=Ue(G);this.linkBase(ie,ye)},he.prototype.link=function(z,G,ie){var ye=Ue(z),Ne=Ue(G);this.wrapAsync(this.linkBase,[ye,Ne],ie)},he.prototype.unlinkBase=function(z){var G=Et(z),ie=this.getLink(G);if(!ie)throw be(M,"unlink",z);if(ie.length)throw Error("Dir not empty...");this.deleteLink(ie);var ye=ie.getNode();ye.nlink--,ye.nlink<=0&&this.deleteNode(ye)},he.prototype.unlinkSync=function(z){var G=Ue(z);this.unlinkBase(G)},he.prototype.unlink=function(z,G){var ie=Ue(z);this.wrapAsync(this.unlinkBase,[ie],G)},he.prototype.symlinkBase=function(z,G){var ie=Et(G),ye=this.getLinkParent(ie);if(!ye)throw be(M,"symlink",z,G);var Ne=ie[ie.length-1];if(ye.getChild(Ne))throw be(W,"symlink",z,G);var Fe=ye.createChild(Ne);return Fe.getNode().makeSymlink(Et(z)),Fe},he.prototype.symlinkSync=function(z,G,ie){var ye=Ue(z),Ne=Ue(G);this.symlinkBase(ye,Ne)},he.prototype.symlink=function(z,G,ie,ye){var Ne=Oe(typeof ie=="function"?ie:ye),Fe=Ue(z),He=Ue(G);this.wrapAsync(this.symlinkBase,[Fe,He],Ne)},he.prototype.realpathBase=function(z,G){var ie=Et(z),ye=this.getResolvedLink(ie);if(!ye)throw be(M,"realpath",z);return(0,m.strToEncoding)(ye.getPath()||"/",G)},he.prototype.realpathSync=function(z,G){return this.realpathBase(Ue(z),ve(G).encoding)},he.prototype.realpath=function(z,G,ie){var ye=Ie(G,ie),Ne=ye[0],Fe=ye[1],He=Ue(z);this.wrapAsync(this.realpathBase,[He,Ne.encoding],Fe)},he.prototype.lstatBase=function(z,G,ie){G===void 0&&(G=!1),ie===void 0&&(ie=!1);var ye=this.getLink(Et(z));if(ye)return i.default.build(ye.getNode(),G);if(ie)throw be(M,"lstat",z)},he.prototype.lstatSync=function(z,G){var ie=ue(G),ye=ie.throwIfNoEntry,Ne=ye===void 0?!0:ye,Fe=ie.bigint,He=Fe===void 0?!1:Fe;return this.lstatBase(Ue(z),He,Ne)},he.prototype.lstat=function(z,G,ie){var ye=me(G,ie),Ne=ye[0],Fe=Ne.throwIfNoEntry,He=Fe===void 0?!0:Fe,rt=Ne.bigint,ot=rt===void 0?!1:rt,yt=ye[1];this.wrapAsync(this.lstatBase,[Ue(z),ot,He],yt)},he.prototype.statBase=function(z,G,ie){G===void 0&&(G=!1),ie===void 0&&(ie=!0);var ye=this.getResolvedLink(Et(z));if(ye)return i.default.build(ye.getNode(),G);if(ie)throw be(M,"stat",z)},he.prototype.statSync=function(z,G){var ie=ue(G),ye=ie.bigint,Ne=ye===void 0?!0:ye,Fe=ie.throwIfNoEntry,He=Fe===void 0?!0:Fe;return this.statBase(Ue(z),Ne,He)},he.prototype.stat=function(z,G,ie){var ye=me(G,ie),Ne=ye[0],Fe=Ne.bigint,He=Fe===void 0?!1:Fe,rt=Ne.throwIfNoEntry,ot=rt===void 0?!0:rt,yt=ye[1];this.wrapAsync(this.statBase,[Ue(z),He,ot],yt)},he.prototype.fstatBase=function(z,G){G===void 0&&(G=!1);var ie=this.getFileByFd(z);if(!ie)throw be(Q,"fstat");return i.default.build(ie.node,G)},he.prototype.fstatSync=function(z,G){return this.fstatBase(z,ue(G).bigint)},he.prototype.fstat=function(z,G,ie){var ye=me(G,ie),Ne=ye[0],Fe=ye[1];this.wrapAsync(this.fstatBase,[z,Ne.bigint],Fe)},he.prototype.renameBase=function(z,G){var ie=this.getLink(Et(z));if(!ie)throw be(M,"rename",z,G);var ye=Et(G),Ne=this.getLinkParent(ye);if(!Ne)throw be(M,"rename",z,G);var Fe=ie.parent;Fe&&Fe.deleteChild(ie);var He=ye[ye.length-1];ie.name=He,ie.steps=e(e([],Ne.steps,!0),[He],!1),Ne.setChild(ie.getName(),ie)},he.prototype.renameSync=function(z,G){var ie=Ue(z),ye=Ue(G);this.renameBase(ie,ye)},he.prototype.rename=function(z,G,ie){var ye=Ue(z),Ne=Ue(G);this.wrapAsync(this.renameBase,[ye,Ne],ie)},he.prototype.existsBase=function(z){return!!this.statBase(z)},he.prototype.existsSync=function(z){try{return this.existsBase(Ue(z))}catch{return!1}},he.prototype.exists=function(z,G){var ie=this,ye=Ue(z);if(typeof G!="function")throw Error(U.CB);(0,a.default)(function(){try{G(ie.existsBase(ye))}catch{G(!1)}})},he.prototype.accessBase=function(z,G){this.getLinkOrThrow(z,"access")},he.prototype.accessSync=function(z,G){G===void 0&&(G=ne);var ie=Ue(z);G=G|0,this.accessBase(ie,G)},he.prototype.access=function(z,G,ie){var ye=ne,Ne;typeof G!="function"?(ye=G|0,Ne=Oe(ie)):Ne=G;var Fe=Ue(z);this.wrapAsync(this.accessBase,[Fe,ye],Ne)},he.prototype.appendFileSync=function(z,G,ie){ie===void 0&&(ie=D);var ye=ae(ie);(!ye.flag||Yt(z))&&(ye.flag="a"),this.writeFileSync(z,G,ye)},he.prototype.appendFile=function(z,G,ie,ye){var Ne=fe(ie,ye),Fe=Ne[0],He=Ne[1];(!Fe.flag||Yt(z))&&(Fe.flag="a"),this.writeFile(z,G,Fe,He)},he.prototype.readdirBase=function(z,G){var ie=Et(z),ye=this.getResolvedLink(ie);if(!ye)throw be(M,"readdir",z);var Ne=ye.getNode();if(!Ne.isDirectory())throw be(oe,"scandir",z);if(G.withFileTypes){var Fe=[];for(var He in ye.children){var rt=ye.getChild(He);!rt||He==="."||He===".."||Fe.push(o.default.build(rt,G.encoding))}return!P&&G.encoding!=="buffer"&&Fe.sort(function(Lt,en){return Lt.name<en.name?-1:Lt.name>en.name?1:0}),Fe}var ot=[];for(var yt in ye.children)yt==="."||yt===".."||ot.push((0,m.strToEncoding)(yt,G.encoding));return!P&&G.encoding!=="buffer"&&ot.sort(),ot},he.prototype.readdirSync=function(z,G){var ie=Te(G),ye=Ue(z);return this.readdirBase(ye,ie)},he.prototype.readdir=function(z,G,ie){var ye=Be(G,ie),Ne=ye[0],Fe=ye[1],He=Ue(z);this.wrapAsync(this.readdirBase,[He,Ne],Fe)},he.prototype.readlinkBase=function(z,G){var ie=this.getLinkOrThrow(z,"readlink"),ye=ie.getNode();if(!ye.isSymlink())throw be(ce,"readlink",z);var Ne=le+ye.symlink.join(le);return(0,m.strToEncoding)(Ne,G)},he.prototype.readlinkSync=function(z,G){var ie=tt(G),ye=Ue(z);return this.readlinkBase(ye,ie.encoding)},he.prototype.readlink=function(z,G,ie){var ye=T(G,ie),Ne=ye[0],Fe=ye[1],He=Ue(z);this.wrapAsync(this.readlinkBase,[He,Ne.encoding],Fe)},he.prototype.fsyncBase=function(z){this.getFileByFdOrThrow(z,"fsync")},he.prototype.fsyncSync=function(z){this.fsyncBase(z)},he.prototype.fsync=function(z,G){this.wrapAsync(this.fsyncBase,[z],G)},he.prototype.fdatasyncBase=function(z){this.getFileByFdOrThrow(z,"fdatasync")},he.prototype.fdatasyncSync=function(z){this.fdatasyncBase(z)},he.prototype.fdatasync=function(z,G){this.wrapAsync(this.fdatasyncBase,[z],G)},he.prototype.ftruncateBase=function(z,G){var ie=this.getFileByFdOrThrow(z,"ftruncate");ie.truncate(G)},he.prototype.ftruncateSync=function(z,G){this.ftruncateBase(z,G)},he.prototype.ftruncate=function(z,G,ie){var ye=typeof G=="number"?G:0,Ne=Oe(typeof G=="number"?ie:G);this.wrapAsync(this.ftruncateBase,[z,ye],Ne)},he.prototype.truncateBase=function(z,G){var ie=this.openSync(z,"r+");try{this.ftruncateSync(ie,G)}finally{this.closeSync(ie)}},he.prototype.truncateSync=function(z,G){if(Yt(z))return this.ftruncateSync(z,G);this.truncateBase(z,G)},he.prototype.truncate=function(z,G,ie){var ye=typeof G=="number"?G:0,Ne=Oe(typeof G=="number"?ie:G);if(Yt(z))return this.ftruncate(z,ye,Ne);this.wrapAsync(this.truncateBase,[z,ye],Ne)},he.prototype.futimesBase=function(z,G,ie){var ye=this.getFileByFdOrThrow(z,"futimes"),Ne=ye.node;Ne.atime=new Date(G*1e3),Ne.mtime=new Date(ie*1e3)},he.prototype.futimesSync=function(z,G,ie){this.futimesBase(z,Jr(G),Jr(ie))},he.prototype.futimes=function(z,G,ie,ye){this.wrapAsync(this.futimesBase,[z,Jr(G),Jr(ie)],ye)},he.prototype.utimesBase=function(z,G,ie){var ye=this.openSync(z,"r");try{this.futimesBase(ye,G,ie)}finally{this.closeSync(ye)}},he.prototype.utimesSync=function(z,G,ie){this.utimesBase(Ue(z),Jr(G),Jr(ie))},he.prototype.utimes=function(z,G,ie,ye){this.wrapAsync(this.utimesBase,[Ue(z),Jr(G),Jr(ie)],ye)},he.prototype.mkdirBase=function(z,G){var ie=Et(z);if(!ie.length)throw be(W,"mkdir",z);var ye=this.getLinkParentAsDirOrThrow(z,"mkdir"),Ne=ie[ie.length-1];if(ye.getChild(Ne))throw be(W,"mkdir",z);ye.createChild(Ne,this.createNode(!0,G))},he.prototype.mkdirpBase=function(z,G){for(var ie=Ze(z),ye=ie.substring(1),Ne=ye?ye.split(le):[],Fe=this.root,He=!1,rt=0;rt<Ne.length;rt++){var ot=Ne[rt];if(!Fe.getNode().isDirectory())throw be(oe,"mkdir",Fe.getPath());var yt=Fe.getChild(ot);if(yt)if(yt.getNode().isDirectory())Fe=yt;else throw be(oe,"mkdir",yt.getPath());else Fe=Fe.createChild(ot,this.createNode(!0,G)),He=!0}return He?ie:void 0},he.prototype.mkdirSync=function(z,G){var ie=Me(G),ye=zt(ie.mode,511),Ne=Ue(z);if(ie.recursive)return this.mkdirpBase(Ne,ye);this.mkdirBase(Ne,ye)},he.prototype.mkdir=function(z,G,ie){var ye=Me(G),Ne=Oe(typeof G=="function"?G:ie),Fe=zt(ye.mode,511),He=Ue(z);ye.recursive?this.wrapAsync(this.mkdirpBase,[He,Fe],Ne):this.wrapAsync(this.mkdirBase,[He,Fe],Ne)},he.prototype.mkdirpSync=function(z,G){return this.mkdirSync(z,{mode:G,recursive:!0})},he.prototype.mkdirp=function(z,G,ie){var ye=typeof G=="function"?void 0:G,Ne=Oe(typeof G=="function"?G:ie);this.mkdir(z,{mode:ye,recursive:!0},Ne)},he.prototype.mkdtempBase=function(z,G,ie){ie===void 0&&(ie=5);var ye=z+this.genRndStr();try{return this.mkdirBase(ye,511),(0,m.strToEncoding)(ye,G)}catch(Ne){if(Ne.code===W){if(ie>1)return this.mkdtempBase(z,G,ie-1);throw Error("Could not create temp dir.")}else throw Ne}},he.prototype.mkdtempSync=function(z,G){var ie=tt(G).encoding;if(!z||typeof z!="string")throw new TypeError("filename prefix is required");return Dr(z),this.mkdtempBase(z,ie)},he.prototype.mkdtemp=function(z,G,ie){var ye=T(G,ie),Ne=ye[0].encoding,Fe=ye[1];if(!z||typeof z!="string")throw new TypeError("filename prefix is required");Dr(z)&&this.wrapAsync(this.mkdtempBase,[z,Ne],Fe)},he.prototype.rmdirBase=function(z,G){var ie=O(G),ye=this.getLinkAsDirOrThrow(z,"rmdir");if(ye.length&&!ie.recursive)throw be(B,"rmdir",z);this.deleteLink(ye)},he.prototype.rmdirSync=function(z,G){this.rmdirBase(Ue(z),G)},he.prototype.rmdir=function(z,G,ie){var ye=O(G),Ne=Oe(typeof G=="function"?G:ie);this.wrapAsync(this.rmdirBase,[Ue(z),ye],Ne)},he.prototype.rmBase=function(z,G){G===void 0&&(G={});var ie=this.getResolvedLink(z);if(!ie){if(!G.force)throw be(M,"stat",z);return}if(ie.getNode().isDirectory()&&!G.recursive)throw be(ge,"rm",z);this.deleteLink(ie)},he.prototype.rmSync=function(z,G){this.rmBase(Ue(z),G)},he.prototype.rm=function(z,G,ie){var ye=je(G,ie),Ne=ye[0],Fe=ye[1];this.wrapAsync(this.rmBase,[Ue(z),Ne],Fe)},he.prototype.fchmodBase=function(z,G){var ie=this.getFileByFdOrThrow(z,"fchmod");ie.chmod(G)},he.prototype.fchmodSync=function(z,G){this.fchmodBase(z,zt(G))},he.prototype.fchmod=function(z,G,ie){this.wrapAsync(this.fchmodBase,[z,zt(G)],ie)},he.prototype.chmodBase=function(z,G){var ie=this.openSync(z,"r");try{this.fchmodBase(ie,G)}finally{this.closeSync(ie)}},he.prototype.chmodSync=function(z,G){var ie=zt(G),ye=Ue(z);this.chmodBase(ye,ie)},he.prototype.chmod=function(z,G,ie){var ye=zt(G),Ne=Ue(z);this.wrapAsync(this.chmodBase,[Ne,ye],ie)},he.prototype.lchmodBase=function(z,G){var ie=this.openBase(z,S,0,!1);try{this.fchmodBase(ie,G)}finally{this.closeSync(ie)}},he.prototype.lchmodSync=function(z,G){var ie=zt(G),ye=Ue(z);this.lchmodBase(ye,ie)},he.prototype.lchmod=function(z,G,ie){var ye=zt(G),Ne=Ue(z);this.wrapAsync(this.lchmodBase,[Ne,ye],ie)},he.prototype.fchownBase=function(z,G,ie){this.getFileByFdOrThrow(z,"fchown").chown(G,ie)},he.prototype.fchownSync=function(z,G,ie){Qr(G),Mf(ie),this.fchownBase(z,G,ie)},he.prototype.fchown=function(z,G,ie,ye){Qr(G),Mf(ie),this.wrapAsync(this.fchownBase,[z,G,ie],ye)},he.prototype.chownBase=function(z,G,ie){var ye=this.getResolvedLinkOrThrow(z,"chown"),Ne=ye.getNode();Ne.chown(G,ie)},he.prototype.chownSync=function(z,G,ie){Qr(G),Mf(ie),this.chownBase(Ue(z),G,ie)},he.prototype.chown=function(z,G,ie,ye){Qr(G),Mf(ie),this.wrapAsync(this.chownBase,[Ue(z),G,ie],ye)},he.prototype.lchownBase=function(z,G,ie){this.getLinkOrThrow(z,"lchown").getNode().chown(G,ie)},he.prototype.lchownSync=function(z,G,ie){Qr(G),Mf(ie),this.lchownBase(Ue(z),G,ie)},he.prototype.lchown=function(z,G,ie,ye){Qr(G),Mf(ie),this.wrapAsync(this.lchownBase,[Ue(z),G,ie],ye)},he.prototype.watchFile=function(z,G,ie){var ye=Ue(z),Ne=G,Fe=ie;if(typeof Ne=="function"&&(Fe=G,Ne=null),typeof Fe!="function")throw Error('"watchFile()" requires a listener function');var He=5007,rt=!0;Ne&&typeof Ne=="object"&&(typeof Ne.interval=="number"&&(He=Ne.interval),typeof Ne.persistent=="boolean"&&(rt=Ne.persistent));var ot=this.statWatchers[ye];return ot||(ot=new this.StatWatcher,ot.start(ye,rt,He),this.statWatchers[ye]=ot),ot.addListener("change",Fe),ot},he.prototype.unwatchFile=function(z,G){var ie=Ue(z),ye=this.statWatchers[ie];ye&&(typeof G=="function"?ye.removeListener("change",G):ye.removeAllListeners("change"),ye.listenerCount("change")===0&&(ye.stop(),delete this.statWatchers[ie]))},he.prototype.createReadStream=function(z,G){return new this.ReadStream(z,G)},he.prototype.createWriteStream=function(z,G){return new this.WriteStream(z,G)},he.prototype.watch=function(z,G,ie){var ye=Ue(z),Ne=G;typeof G=="function"&&(ie=G,Ne=null);var Fe=tt(Ne),He=Fe.persistent,rt=Fe.recursive,ot=Fe.encoding;He===void 0&&(He=!0),rt===void 0&&(rt=!1);var yt=new this.FSWatcher;return yt.start(ye,He,rt,ot),ie&&yt.addListener("change",ie),yt},he.fd=2147483647,he})();Ft.Volume=B3;function F3(he){he.emit("stop")}var kT=(function(he){r(z,he);function z(G){var ie=he.call(this)||this;return ie.onInterval=function(){try{var ye=ie.vol.statSync(ie.filename);ie.hasChanged(ye)&&(ie.emit("change",ye,ie.prev),ie.prev=ye)}finally{ie.loop()}},ie.vol=G,ie}return z.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},z.prototype.hasChanged=function(G){return G.mtimeMs>this.prev.mtimeMs||G.nlink!==this.prev.nlink},z.prototype.start=function(G,ie,ye){ie===void 0&&(ie=!0),ye===void 0&&(ye=5007),this.filename=Ue(G),this.setTimeout=ie?setTimeout.bind(typeof globalThis<"u"?globalThis:XU):c.default,this.interval=ye,this.prev=this.vol.statSync(this.filename),this.loop()},z.prototype.stop=function(){clearTimeout(this.timeoutRef),u.default.nextTick(F3,this)},z})(d.EventEmitter);Ft.StatWatcher=kT;var Zi;function U3(he){Zi=(0,s.bufferAllocUnsafe)(he),Zi.used=0}v.inherits(Zs,f.Readable),Ft.ReadStream=Zs;function Zs(he,z,G){if(!(this instanceof Zs))return new Zs(he,z,G);if(this._vol=he,G=Object.assign({},$e(G,{})),G.highWaterMark===void 0&&(G.highWaterMark=64*1024),f.Readable.call(this,G),this.path=Ue(z),this.fd=G.fd===void 0?null:G.fd,this.flags=G.flags===void 0?"r":G.flags,this.mode=G.mode===void 0?438:G.mode,this.start=G.start,this.end=G.end,this.autoClose=G.autoClose===void 0?!0:G.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}Zs.prototype.open=function(){var he=this;this._vol.open(this.path,this.flags,this.mode,function(z,G){if(z){he.autoClose&&he.destroy&&he.destroy(),he.emit("error",z);return}he.fd=G,he.emit("open",G),he.read()})},Zs.prototype._read=function(he){if(typeof this.fd!="number")return this.once("open",function(){this._read(he)});if(this.destroyed)return;(!Zi||Zi.length-Zi.used<C)&&U3(this._readableState.highWaterMark);var z=Zi,G=Math.min(Zi.length-Zi.used,he),ie=Zi.used;if(this.pos!==void 0&&(G=Math.min(this.end-this.pos+1,G)),G<=0)return this.push(null);var ye=this;this._vol.read(this.fd,Zi,Zi.used,G,this.pos,Ne),this.pos!==void 0&&(this.pos+=G),Zi.used+=G;function Ne(Fe,He){if(Fe)ye.autoClose&&ye.destroy&&ye.destroy(),ye.emit("error",Fe);else{var rt=null;He>0&&(ye.bytesRead+=He,rt=z.slice(ie,ie+He)),ye.push(rt)}}},Zs.prototype._destroy=function(he,z){this.close(function(G){z(he||G)})},Zs.prototype.close=function(he){var z=this,G;if(he&&this.once("close",he),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",LT);return}return u.default.nextTick(function(){return z.emit("close")})}typeof((G=this._readableState)===null||G===void 0?void 0:G.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(ie){ie?z.emit("error",ie):z.emit("close")}),this.fd=null};function LT(he){this.close()}v.inherits(Ji,f.Writable),Ft.WriteStream=Ji;function Ji(he,z,G){if(!(this instanceof Ji))return new Ji(he,z,G);if(this._vol=he,G=Object.assign({},$e(G,{})),f.Writable.call(this,G),this.path=Ue(z),this.fd=G.fd===void 0?null:G.fd,this.flags=G.flags===void 0?"w":G.flags,this.mode=G.mode===void 0?438:G.mode,this.start=G.start,this.autoClose=G.autoClose===void 0?!0:!!G.autoClose,this.pos=void 0,this.bytesWritten=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}G.encoding&&this.setDefaultEncoding(G.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}Ji.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(he,z){if(he){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",he);return}this.fd=z,this.emit("open",z)}.bind(this))},Ji.prototype._write=function(he,z,G){if(!(he instanceof s.Buffer||he instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(he,z,G)});var ie=this;this._vol.write(this.fd,he,0,he.length,this.pos,function(ye,Ne){if(ye)return ie.autoClose&&ie.destroy&&ie.destroy(),G(ye);ie.bytesWritten+=Ne,G()}),this.pos!==void 0&&(this.pos+=he.length)},Ji.prototype._writev=function(he,z){if(typeof this.fd!="number")return this.once("open",function(){this._writev(he,z)});for(var G=this,ie=he.length,ye=new Array(ie),Ne=0,Fe=0;Fe<ie;Fe++){var He=he[Fe].chunk;ye[Fe]=He,Ne+=He.length}var rt=s.Buffer.concat(ye);this._vol.write(this.fd,rt,0,rt.length,this.pos,function(ot,yt){if(ot)return G.destroy&&G.destroy(),z(ot);G.bytesWritten+=yt,z()}),this.pos!==void 0&&(this.pos+=Ne)},Ji.prototype.close=function(he){var z=this,G;if(he&&this.once("close",he),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",LT);return}return u.default.nextTick(function(){return z.emit("close")})}typeof((G=this._writableState)===null||G===void 0?void 0:G.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,function(ie){ie?z.emit("error",ie):z.emit("close")}),this.fd=null},Ji.prototype._destroy=Zs.prototype._destroy,Ji.prototype.destroySoon=Ji.prototype.end;var PT=(function(he){r(z,he);function z(G){var ie=he.call(this)||this;return ie._filename="",ie._filenameEncoded="",ie._recursive=!1,ie._encoding=m.ENCODING_UTF8,ie._listenerRemovers=new Map,ie._onParentChild=function(ye){ye.getName()===ie._getName()&&ie._emit("rename")},ie._emit=function(ye){ie.emit("change",ye,ie._filenameEncoded)},ie._persist=function(){ie._timer=setTimeout(ie._persist,1e6)},ie._vol=G,ie}return z.prototype._getName=function(){return this._steps[this._steps.length-1]},z.prototype.start=function(G,ie,ye,Ne){var Fe=this;ie===void 0&&(ie=!0),ye===void 0&&(ye=!1),Ne===void 0&&(Ne=m.ENCODING_UTF8),this._filename=Ue(G),this._steps=Et(this._filename),this._filenameEncoded=(0,m.strToEncoding)(this._filename),this._recursive=ye,this._encoding=Ne;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(Lt){var He=new Error("watch ".concat(this._filename," ").concat(Lt.code));throw He.code=Lt.code,He.errno=Lt.code,He}var rt=function(Lt){var en,Eu=Lt.getPath(),Js=Lt.getNode(),sl=function(){var jr=te(Fe._filename,Eu);return jr||(jr=Fe._getName()),Fe.emit("change","change",jr)};Js.on("change",sl);var Au=(en=Fe._listenerRemovers.get(Js.ino))!==null&&en!==void 0?en:[];Au.push(function(){return Js.removeListener("change",sl)}),Fe._listenerRemovers.set(Js.ino,Au)},ot=function(Lt){var en,Eu=Lt.getNode(),Js=function(jr){Fe.emit("change","rename",te(Fe._filename,jr.getPath())),setTimeout(function(){rt(jr),ot(jr)})},sl=function(jr){var Qi=function(Ts){var p0=Ts.getNode().ino,MT=Fe._listenerRemovers.get(p0);MT&&(MT.forEach(function(g0){return g0()}),Fe._listenerRemovers.delete(p0)),Object.values(Ts.children).forEach(function(g0){g0&&Qi(g0)})};Qi(jr),Fe.emit("change","rename",te(Fe._filename,jr.getPath()))};Object.entries(Lt.children).forEach(function(jr){var Qi=jr[0],Ts=jr[1];Ts&&Qi!=="."&&Qi!==".."&&rt(Ts)}),Lt.on("child:add",Js),Lt.on("child:delete",sl);var Au=(en=Fe._listenerRemovers.get(Eu.ino))!==null&&en!==void 0?en:[];Au.push(function(){Lt.removeListener("child:add",Js),Lt.removeListener("child:delete",sl)}),ye&&Object.entries(Lt.children).forEach(function(jr){var Qi=jr[0],Ts=jr[1];Ts&&Qi!=="."&&Qi!==".."&&ot(Ts)})};rt(this._link),ot(this._link);var yt=this._link.parent;yt&&(yt.setMaxListeners(yt.getMaxListeners()+1),yt.on("child:delete",this._onParentChild)),ie&&this._persist()},z.prototype.close=function(){clearTimeout(this._timer),this._listenerRemovers.forEach(function(ie){ie.forEach(function(ye){return ye()})}),this._listenerRemovers.clear();var G=this._link.parent;G&&G.removeListener("child:delete",this._onParentChild)},z})(d.EventEmitter);return Ft.FSWatcher=PT,Ft}function KU(){return HO||(HO=!0,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.fsSyncMethods=Jo.fsProps=Jo.fsAsyncMethods=void 0,Jo.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],Jo.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","rmSync","createReadStream","createWriteStream"],Jo.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","rm","watchFile","unwatchFile","watch"]),Jo}function ZU(){if(GO)return dn;GO=!0;var r=dn&&dn.__assign||function(){return r=Object.assign||function(m){for(var b,v=1,w=arguments.length;v<w;v++){b=arguments[v];for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(m[y]=b[y])}return m},r.apply(this,arguments)};Object.defineProperty(dn,"__esModule",{value:!0}),dn.fs=dn.createFsFromVolume=dn.vol=dn.Volume=void 0;var e=E2(),t=XO(),n=JO(),i=KU(),o=i.fsSyncMethods,s=i.fsAsyncMethods,a=qp(),u=a.constants.F_OK,c=a.constants.R_OK,f=a.constants.W_OK,h=a.constants.X_OK;dn.Volume=n.Volume,dn.vol=new n.Volume;function d(m){for(var b={F_OK:u,R_OK:c,W_OK:f,X_OK:h,constants:a.constants,Stats:e.default,Dirent:t.default},v=0,w=o;v<w.length;v++){var y=w[v];typeof m[y]=="function"&&(b[y]=m[y].bind(m))}for(var _=0,E=s;_<E.length;_++){var y=E[_];typeof m[y]=="function"&&(b[y]=m[y].bind(m))}return b.StatWatcher=m.StatWatcher,b.FSWatcher=m.FSWatcher,b.WriteStream=m.WriteStream,b.ReadStream=m.ReadStream,b.promises=m.promises,b._toUnixTimestamp=n.toUnixTimestamp,b}return dn.createFsFromVolume=d,dn.fs=d(dn.vol),dn=r(r({},dn),dn.fs),dn.semantic=!0,dn}function xi(r){throw new Error(`Node.js fs ${r} is not supported by JSPM core in the browser`)}function QO(r,e,t){let n=0,i=new TextDecoder;Qo.watch(r,"utf8",()=>{let{size:o}=Qo.fstatSync(e),s=Buffer.alloc(o-n);Qo.readSync(e,s,0,s.length,n),n=o,t(i.decode(s,{stream:!0}))})}function x2(r,e){if(r.protocol==="file:")return _2(r);if(r.protocol==="https:"||r.protocol==="http:"){let t="\\\\url\\"+r.href.replaceAll(/\//g,"\\\\");if(ob(t))return t;if(e)throw new Error(`Cannot sync request URL ${r} via FS. JSPM FS support for network URLs requires using async FS methods or priming the MemFS cache first with an async request before a sync request.`);return(async()=>{let n=await fetch(r);if(!n.ok)throw new Error(`Unable to fetch ${r.href}, ${n.status}`);let i=await n.arrayBuffer();return eN(t,Buffer.from(i)),t})()}throw new Error("URL "+r+" not supported in JSPM FS implementation.")}function QU(r){return function(e,...t){return e instanceof URL?r(x2(e,!0),...t):r(e,...t)}}function ej(r){return async function(e,...t){return e instanceof URL?r(await x2(e),...t):r(e,...t)}}function tj(r){return function(e,...t){let n=t[t.length-1];e instanceof URL&&typeof n=="function"?x2(e).then(i=>{r(i,...t)},n):r(e,...t)}}var zp,IO,nb,OO,eh,NO,Ds,kO,sn,LO,WU,no,PO,th,MO,ib,BO,FO,rh,UO,oi,jO,sb,$O,HU,pl,zO,Wp,WO,Ft,qO,XU,Jo,HO,dn,GO,Hu,Gn,Qo,JU,br,rj,nj,ij,sj,oj,aj,lj,uj,cj,fj,hj,dj,pj,gj,mj,yj,bj,ob,wj,vj,_j,Ej,Aj,xj,Sj,Tj,Cj,Rj,Dj,Ij,Oj,Nj,kj,Lj,Pj,Mj,Bj,Fj,Uj,S2,jj,$j,zj,Wj,qj,Hj,Gj,Vj,Yj,Xj,Kj,Zj,Jj,Qj,e$,T2,t$,r$,n$,i$,s$,o$,a$,l$,u$,c$,f$,h$,d$,p$,g$,m$,y$,b$,w$,v$,_$,E$,A$,x$,eN,S$,T$,C$,R$,D$,I$,O$,N$,k$,L$,P$,M$,B$,F$,U$,j$,$$,z$,Gp=Jt(()=>{Ce();De();Re();Ff();W_();q0();cl();HD();qf();Mu();V0();Xf();PE();ll();DO();tb();BE();$p();c2();zp={},IO=!1;nb={},OO=!1;eh={},NO=!1;Ds={},kO=!1;sn={},LO=!1,WU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;no={},PO=!1;th={},MO=!1;rn._makeLong;rn.basename;rn.delimiter;rn.dirname;rn.extname;rn.format;rn.isAbsolute;rn.join;rn.normalize;rn.parse;rn.posix;rn.relative;rn.resolve;rn.sep;rn.win32;ib={},BO=!1,FO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;rh={},UO=!1;oi={},jO=!1;sb={},$O=!1,HU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;pl={},zO=!1;Wp={},WO=!1;Ft={},qO=!1,XU=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Jo={},HO=!1;dn={},GO=!1;Hu=ZU();Hu.__esModule;Hu.fs;Hu.createFsFromVolume;Hu.vol;Hu.Volume;Hu.semantic;Gn=JO();Gn.__esModule;Gn.FSWatcher;Gn.StatWatcher;Gn.Volume;Gn.toUnixTimestamp;Gn.bufferToEncoding;Gn.dataToBuffer;Gn.dataToStr;Gn.pathToSteps;Gn.filenameToSteps;Gn.pathToFilename;Gn.flagsToNumber;Gn.FLAGS;Gn.ReadStream;Gn.WriteStream;({vol:Qo,createFsFromVolume:JU}=Hu);Qo.fromNestedJSON({"/dev":{stdin:"",stdout:"",stderr:""},"/usr/bin":{},"/home":{},"/tmp":{}});Qo.releasedFds=[2,1,0];Qo.openSync("/dev/stdin","w");Qo.openSync("/dev/stdout","r");Qo.openSync("/dev/stderr","r");QO("/dev/stdout",1,console.log);QO("/dev/stderr",2,console.error);br=JU(Qo);br.opendir=()=>xi("opendir");br.opendirSync=()=>xi("opendirSync");br.promises.opendir=()=>xi("promises.opendir");br.cp=()=>xi("cp");br.cpSync=()=>xi("cpSync");br.promises.cp=()=>xi("promises.cp");br.readv=()=>xi("readv");br.readvSync=()=>xi("readvSync");br.rm=()=>xi("rm");br.rmSync=()=>xi("rmSync");br.promises.rm=()=>xi("promises.rm");br.Dir=()=>xi("Dir");br.promises.watch=()=>xi("promises.watch");br.FileReadStream=br.ReadStream;br.FileWriteStream=br.WriteStream;br.promises.readFile=ej(br.promises.readFile);br.readFile=tj(br.readFile);br.readFileSync=QU(br.readFileSync);({appendFile:rj,appendFileSync:nj,access:ij,accessSync:sj,chown:oj,chownSync:aj,chmod:lj,chmodSync:uj,close:cj,closeSync:fj,copyFile:hj,copyFileSync:dj,cp:pj,cpSync:gj,createReadStream:mj,createWriteStream:yj,exists:bj,existsSync:ob,fchown:wj,fchownSync:vj,fchmod:_j,fchmodSync:Ej,fdatasync:Aj,fdatasyncSync:xj,fstat:Sj,fstatSync:Tj,fsync:Cj,fsyncSync:Rj,ftruncate:Dj,ftruncateSync:Ij,futimes:Oj,futimesSync:Nj,lchown:kj,lchownSync:Lj,lchmod:Pj,lchmodSync:Mj,link:Bj,linkSync:Fj,lstat:Uj,lstatSync:S2,mkdir:jj,mkdirSync:$j,mkdtemp:zj,mkdtempSync:Wj,open:qj,openSync:Hj,opendir:Gj,opendirSync:Vj,readdir:Yj,readdirSync:Xj,read:Kj,readSync:Zj,readv:Jj,readvSync:Qj,readFile:e$,readFileSync:T2,readlink:t$,readlinkSync:r$,realpath:n$,realpathSync:i$,rename:s$,renameSync:o$,rm:a$,rmSync:l$,rmdir:u$,rmdirSync:c$,stat:f$,statSync:h$,symlink:d$,symlinkSync:p$,truncate:g$,truncateSync:m$,unwatchFile:y$,unlink:b$,unlinkSync:w$,utimes:v$,utimesSync:_$,watch:E$,watchFile:A$,writeFile:x$,writeFileSync:eN,write:S$,writeSync:T$,writev:C$,writevSync:R$,Dir:D$,Dirent:I$,Stats:O$,ReadStream:N$,WriteStream:k$,FileReadStream:L$,FileWriteStream:P$,_toUnixTimestamp:M$,constants:{F_OK:B$,R_OK:F$,W_OK:U$,X_OK:j$},constants:$$,promises:z$}=br)});var C2=st(Vr=>{"use strict";Ce();De();Re();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.readFile=Vr.writeFileSync=Vr.writeFile=Vr.read=Vr.open=Vr.close=Vr.stat=Vr.createReadStream=Vr.pathExists=void 0;var ea=(Gp(),Ir(Hp));Vr.pathExists=ea.existsSync;Vr.createReadStream=ea.createReadStream;async function W$(r){return new Promise((e,t)=>{ea.stat(r,(n,i)=>{n?t(n):e(i)})})}Vr.stat=W$;async function q$(r){return new Promise((e,t)=>{ea.close(r,n=>{n?t(n):e()})})}Vr.close=q$;async function H$(r,e){return new Promise((t,n)=>{ea.open(r,e,(i,o)=>{i?n(i):t(o)})})}Vr.open=H$;async function G$(r,e,t,n,i){return new Promise((o,s)=>{ea.read(r,e,t,n,i,(a,u,c)=>{a?s(a):o({bytesRead:u,buffer:c})})})}Vr.read=G$;async function V$(r,e){return new Promise((t,n)=>{ea.writeFile(r,e,i=>{i?n(i):t()})})}Vr.writeFile=V$;function Y$(r,e){ea.writeFileSync(r,e)}Vr.writeFileSync=Y$;async function X$(r){return new Promise((e,t)=>{ea.readFile(r,(n,i)=>{n?t(n):e(i)})})}Vr.readFile=X$});var ab=st(Gu=>{"use strict";Ce();De();Re();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.EndOfStreamError=Gu.defaultMessages=void 0;Gu.defaultMessages="End-Of-Stream";var R2=class extends Error{constructor(){super(Gu.defaultMessages)}};Gu.EndOfStreamError=R2});var tN=st(lb=>{"use strict";Ce();De();Re();Object.defineProperty(lb,"__esModule",{value:!0});lb.Deferred=void 0;var D2=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((e,t)=>{this.reject=t,this.resolve=e})}};lb.Deferred=D2});var nN=st(nh=>{"use strict";Ce();De();Re();Object.defineProperty(nh,"__esModule",{value:!0});nh.StreamReader=nh.EndOfStreamError=void 0;var rN=ab(),K$=tN(),Z$=ab();Object.defineProperty(nh,"EndOfStreamError",{enumerable:!0,get:function(){return Z$.EndOfStreamError}});var J$=1*1024*1024,I2=class{constructor(e){if(this.s=e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!e.read||!e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new rN.EndOfStreamError)),this.s.once("error",t=>this.reject(t)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(e,t,n){let i=await this.read(e,t,n);return this.peekQueue.push(e.subarray(t,t+i)),i}async read(e,t,n){if(n===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new rN.EndOfStreamError;let i=n,o=0;for(;this.peekQueue.length>0&&i>0;){let s=this.peekQueue.pop();if(!s)throw new Error("peekData should be defined");let a=Math.min(s.length,i);e.set(s.subarray(0,a),t+o),o+=a,i-=a,a<s.length&&this.peekQueue.push(s.subarray(a))}for(;i>0&&!this.endOfStream;){let s=Math.min(i,J$),a=await this.readFromStream(e,t+o,s);if(o+=a,a<s)break;i-=a}return o}async readFromStream(e,t,n){let i=this.s.read(n);if(i)return e.set(i,t),i.length;{let o={buffer:e,offset:t,length:n,deferred:new K$.Deferred};return this.deferred=o.deferred,this.s.once("readable",()=>{this.readDeferred(o)}),o.deferred.promise}}readDeferred(e){let t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(e)})}reject(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}};nh.StreamReader=I2});var sh=st(ih=>{"use strict";Ce();De();Re();Object.defineProperty(ih,"__esModule",{value:!0});ih.StreamReader=ih.EndOfStreamError=void 0;var Q$=ab();Object.defineProperty(ih,"EndOfStreamError",{enumerable:!0,get:function(){return Q$.EndOfStreamError}});var e9=nN();Object.defineProperty(ih,"StreamReader",{enumerable:!0,get:function(){return e9.StreamReader}})});var fb=st(cb=>{"use strict";Ce();De();Re();Object.defineProperty(cb,"__esModule",{value:!0});cb.AbstractTokenizer=void 0;var ub=sh(),O2=class{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}async readToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.readBuffer(n,{position:t})<e.len)throw new ub.EndOfStreamError;return e.get(n,0)}async peekToken(e,t=this.position){let n=Buffer.alloc(e.len);if(await this.peekBuffer(n,{position:t})<e.len)throw new ub.EndOfStreamError;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new ub.EndOfStreamError;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new ub.EndOfStreamError;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){let t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){}normalizeOptions(e,t){if(t&&t.position!==void 0&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:t.mayBeLess===!0,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}};cb.AbstractTokenizer=O2});var iN=st(db=>{"use strict";Ce();De();Re();Object.defineProperty(db,"__esModule",{value:!0});db.ReadStreamTokenizer=void 0;var t9=fb(),hb=sh(),r9=256e3,N2=class extends t9.AbstractTokenizer{constructor(e,t){super(t),this.streamReader=new hb.StreamReader(e)}async getFileInfo(){return this.fileInfo}async readBuffer(e,t){let n=this.normalizeOptions(e,t),i=n.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,t);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;let o=await this.streamReader.read(e,n.offset,n.length);if(this.position+=o,(!t||!t.mayBeLess)&&o<n.length)throw new hb.EndOfStreamError;return o}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=0;if(n.position){let o=n.position-this.position;if(o>0){let s=new Uint8Array(n.length+o);return i=await this.peekBuffer(s,{mayBeLess:n.mayBeLess}),e.set(s.subarray(o),n.offset),i-o}else if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{i=await this.streamReader.peek(e,n.offset,n.length)}catch(o){if(t&&t.mayBeLess&&o instanceof hb.EndOfStreamError)return 0;throw o}if(!n.mayBeLess&&i<n.length)throw new hb.EndOfStreamError}return i}async ignore(e){let t=Math.min(r9,e),n=new Uint8Array(t),i=0;for(;i<e;){let o=e-i,s=await this.readBuffer(n,{length:Math.min(t,o)});if(s<0)return s;i+=s}return i}};db.ReadStreamTokenizer=N2});var sN=st(pb=>{"use strict";Ce();De();Re();Object.defineProperty(pb,"__esModule",{value:!0});pb.BufferTokenizer=void 0;var n9=sh(),i9=fb(),k2=class extends i9.AbstractTokenizer{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,t){if(t&&t.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}let n=await this.peekBuffer(e,t);return this.position+=n,n}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&i<n.length)throw new n9.EndOfStreamError;return e.set(this.uint8Array.subarray(n.position,n.position+i),n.offset),i}async close(){}};pb.BufferTokenizer=k2});var gb=st(gl=>{"use strict";Ce();De();Re();Object.defineProperty(gl,"__esModule",{value:!0});gl.fromBuffer=gl.fromStream=gl.EndOfStreamError=void 0;var s9=iN(),o9=sN(),a9=sh();Object.defineProperty(gl,"EndOfStreamError",{enumerable:!0,get:function(){return a9.EndOfStreamError}});function l9(r,e){return e=e||{},new s9.ReadStreamTokenizer(r,e)}gl.fromStream=l9;function u9(r,e){return new o9.BufferTokenizer(r,e)}gl.fromBuffer=u9});var aN=st(oh=>{"use strict";Ce();De();Re();Object.defineProperty(oh,"__esModule",{value:!0});oh.fromFile=oh.FileTokenizer=void 0;var c9=fb(),oN=sh(),Vp=C2(),mb=class extends c9.AbstractTokenizer{constructor(e,t){super(t),this.fd=e}async readBuffer(e,t){let n=this.normalizeOptions(e,t);this.position=n.position;let i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(this.position+=i.bytesRead,i.bytesRead<n.length&&(!t||!t.mayBeLess))throw new oN.EndOfStreamError;return i.bytesRead}async peekBuffer(e,t){let n=this.normalizeOptions(e,t),i=await Vp.read(this.fd,e,n.offset,n.length,n.position);if(!n.mayBeLess&&i.bytesRead<n.length)throw new oN.EndOfStreamError;return i.bytesRead}async close(){return Vp.close(this.fd)}};oh.FileTokenizer=mb;async function f9(r){let e=await Vp.stat(r);if(!e.isFile)throw new Error(`File not a file: ${r}`);let t=await Vp.open(r,"r");return new mb(t,{path:r,size:e.size})}oh.fromFile=f9});var uN=st(io=>{"use strict";Ce();De();Re();Object.defineProperty(io,"__esModule",{value:!0});io.fromStream=io.fromBuffer=io.EndOfStreamError=io.fromFile=void 0;var h9=C2(),d9=gb(),p9=aN();Object.defineProperty(io,"fromFile",{enumerable:!0,get:function(){return p9.fromFile}});var lN=gb();Object.defineProperty(io,"EndOfStreamError",{enumerable:!0,get:function(){return lN.EndOfStreamError}});Object.defineProperty(io,"fromBuffer",{enumerable:!0,get:function(){return lN.fromBuffer}});async function g9(r,e){if(e=e||{},r.path){let t=await h9.stat(r.path);e.path=r.path,e.size=t.size}return d9.fromStream(r,e)}io.fromStream=g9});var cN=st(L2=>{Ce();De();Re();L2.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=t?i-1:0,d=t?-1:1,m=r[e+h];for(h+=d,o=m&(1<<-f)-1,m>>=-f,f+=a;f>0;o=o*256+r[e+h],h+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=d,f-=8);if(o===0)o=1-c;else{if(o===u)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-c}return(m?-1:1)*s*Math.pow(2,o-n)};L2.write=function(r,e,t,n,i,o){var s,a,u,c=o*8-i-1,f=(1<<c)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=d/u:e+=d*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s=s+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;r[t+m]=s&255,m+=b,s/=256,c-=8);r[t+m-b]|=v*128}});var fN=st(ct=>{"use strict";Ce();De();Re();Object.defineProperty(ct,"__esModule",{value:!0});ct.AnsiStringType=ct.StringType=ct.BufferType=ct.Uint8ArrayType=ct.IgnoreType=ct.Float80_LE=ct.Float80_BE=ct.Float64_LE=ct.Float64_BE=ct.Float32_LE=ct.Float32_BE=ct.Float16_LE=ct.Float16_BE=ct.INT64_BE=ct.UINT64_BE=ct.INT64_LE=ct.UINT64_LE=ct.INT32_LE=ct.INT32_BE=ct.INT24_BE=ct.INT24_LE=ct.INT16_LE=ct.INT16_BE=ct.INT8=ct.UINT32_BE=ct.UINT32_LE=ct.UINT24_BE=ct.UINT24_LE=ct.UINT16_BE=ct.UINT16_LE=ct.UINT8=void 0;var ml=cN();function xt(r){return new DataView(r.buffer,r.byteOffset)}ct.UINT8={len:1,get(r,e){return xt(r).getUint8(e)},put(r,e,t){return xt(r).setUint8(e,t),e+1}};ct.UINT16_LE={len:2,get(r,e){return xt(r).getUint16(e,!0)},put(r,e,t){return xt(r).setUint16(e,t,!0),e+2}};ct.UINT16_BE={len:2,get(r,e){return xt(r).getUint16(e)},put(r,e,t){return xt(r).setUint16(e,t),e+2}};ct.UINT24_LE={len:3,get(r,e){let t=xt(r);return t.getUint8(e)+(t.getUint16(e+1,!0)<<8)},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.UINT24_BE={len:3,get(r,e){let t=xt(r);return(t.getUint16(e)<<8)+t.getUint8(e+2)},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.UINT32_LE={len:4,get(r,e){return xt(r).getUint32(e,!0)},put(r,e,t){return xt(r).setUint32(e,t,!0),e+4}};ct.UINT32_BE={len:4,get(r,e){return xt(r).getUint32(e)},put(r,e,t){return xt(r).setUint32(e,t),e+4}};ct.INT8={len:1,get(r,e){return xt(r).getInt8(e)},put(r,e,t){return xt(r).setInt8(e,t),e+1}};ct.INT16_BE={len:2,get(r,e){return xt(r).getInt16(e)},put(r,e,t){return xt(r).setInt16(e,t),e+2}};ct.INT16_LE={len:2,get(r,e){return xt(r).getInt16(e,!0)},put(r,e,t){return xt(r).setInt16(e,t,!0),e+2}};ct.INT24_LE={len:3,get(r,e){let t=ct.UINT24_LE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint8(e,t&255),n.setUint16(e+1,t>>8,!0),e+3}};ct.INT24_BE={len:3,get(r,e){let t=ct.UINT24_BE.get(r,e);return t>8388607?t-16777216:t},put(r,e,t){let n=xt(r);return n.setUint16(e,t>>8),n.setUint8(e+2,t&255),e+3}};ct.INT32_BE={len:4,get(r,e){return xt(r).getInt32(e)},put(r,e,t){return xt(r).setInt32(e,t),e+4}};ct.INT32_LE={len:4,get(r,e){return xt(r).getInt32(e,!0)},put(r,e,t){return xt(r).setInt32(e,t,!0),e+4}};ct.UINT64_LE={len:8,get(r,e){return xt(r).getBigUint64(e,!0)},put(r,e,t){return xt(r).setBigUint64(e,t,!0),e+8}};ct.INT64_LE={len:8,get(r,e){return xt(r).getBigInt64(e,!0)},put(r,e,t){return xt(r).setBigInt64(e,t,!0),e+8}};ct.UINT64_BE={len:8,get(r,e){return xt(r).getBigUint64(e)},put(r,e,t){return xt(r).setBigUint64(e,t),e+8}};ct.INT64_BE={len:8,get(r,e){return xt(r).getBigInt64(e)},put(r,e,t){return xt(r).setBigInt64(e,t),e+8}};ct.Float16_BE={len:2,get(r,e){return ml.read(r,e,!1,10,this.len)},put(r,e,t){return ml.write(r,t,e,!1,10,this.len),e+this.len}};ct.Float16_LE={len:2,get(r,e){return ml.read(r,e,!0,10,this.len)},put(r,e,t){return ml.write(r,t,e,!0,10,this.len),e+this.len}};ct.Float32_BE={len:4,get(r,e){return xt(r).getFloat32(e)},put(r,e,t){return xt(r).setFloat32(e,t),e+4}};ct.Float32_LE={len:4,get(r,e){return xt(r).getFloat32(e,!0)},put(r,e,t){return xt(r).setFloat32(e,t,!0),e+4}};ct.Float64_BE={len:8,get(r,e){return xt(r).getFloat64(e)},put(r,e,t){return xt(r).setFloat64(e,t),e+8}};ct.Float64_LE={len:8,get(r,e){return xt(r).getFloat64(e,!0)},put(r,e,t){return xt(r).setFloat64(e,t,!0),e+8}};ct.Float80_BE={len:10,get(r,e){return ml.read(r,e,!1,63,this.len)},put(r,e,t){return ml.write(r,t,e,!1,63,this.len),e+this.len}};ct.Float80_LE={len:10,get(r,e){return ml.read(r,e,!0,63,this.len)},put(r,e,t){return ml.write(r,t,e,!0,63,this.len),e+this.len}};var P2=class{constructor(e){this.len=e}get(e,t){}};ct.IgnoreType=P2;var M2=class{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}};ct.Uint8ArrayType=M2;var B2=class{constructor(e){this.len=e}get(e,t){return Buffer.from(e.subarray(t,t+this.len))}};ct.BufferType=B2;var F2=class{constructor(e,t){this.len=e,this.encoding=t}get(e,t){return Buffer.from(e).toString(this.encoding,t,t+this.len)}};ct.StringType=F2;var yb=class r{constructor(e){this.len=e}static decode(e,t,n){let i="";for(let o=t;o<n;++o)i+=r.codePointToString(r.singleByteDecoder(e[o]));return i}static inRange(e,t,n){return t<=e&&e<=n}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}static singleByteDecoder(e){if(r.inRange(e,0,127))return e;let t=r.windows1252[e-128];if(t===null)throw Error("invaliding encoding");return t}get(e,t=0){return r.decode(e,t,t+this.len)}};ct.AnsiStringType=yb;yb.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]});var hN=st(bb=>{"use strict";Ce();De();Re();bb.stringToBytes=r=>[...r].map(e=>e.charCodeAt(0));bb.tarHeaderChecksumMatches=(r,e=0)=>{let t=parseInt(r.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(t))return!1;let n=256;for(let i=e;i<e+148;i++)n+=r[i];for(let i=e+156;i<e+512;i++)n+=r[i];return t===n};bb.uint32SyncSafeToken={get:(r,e)=>r[e+3]&127|r[e+2]<<7|r[e+1]<<14|r[e]<<21,len:4}});var pN=st((iZ,dN)=>{"use strict";Ce();De();Re();dN.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}});var gN=st((exports,module)=>{"use strict";Ce();De();Re();var Token=fN(),strtok3=gb(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=hN(),supported=pN(),minimumBytes=4100;async function fromStream(r){let e=await strtok3.fromStream(r);try{return await fromTokenizer(e)}finally{await e.close()}}async function fromBuffer(r){if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);let e=r instanceof Buffer?r:Buffer.from(r);if(!(e&&e.length>1))return;let t=strtok3.fromBuffer(e);return fromTokenizer(t)}function _check(r,e,t){t={offset:0,...t};for(let[n,i]of e.entries())if(t.mask){if(i!==(t.mask[n]&r[n+t.offset]))return!1}else if(i!==r[n+t.offset])return!1;return!0}async function fromTokenizer(r){try{return _fromTokenizer(r)}catch(e){if(!(e instanceof strtok3.EndOfStreamError))throw e}}async function _fromTokenizer(r){let e=Buffer.alloc(minimumBytes),t=12,n=(o,s)=>_check(e,o,s),i=(o,s)=>n(stringToBytes(o),s);if(r.fileInfo.size||(r.fileInfo.size=Number.MAX_SAFE_INTEGER),await r.peekBuffer(e,{length:t,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return await r.peekBuffer(e,{length:24,mayBeLess:!0}),i("PS-Adobe-",{offset:2})&&i(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(i("ID3")){await r.ignore(6);let o=await r.readToken(uint32SyncSafeToken);return r.position+o>r.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await r.ignore(o),fromTokenizer(r))}if(i("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((e[0]===67||e[0]===70)&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(i("FLIF"))return{ext:"flif",mime:"image/flif"};if(i("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(i("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(i("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(i("FORM"))return{ext:"aif",mime:"audio/aiff"};if(i("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;r.position+30<r.fileInfo.size;){await r.readBuffer(e,{length:30});let o={compressedSize:e.readUInt32LE(18),uncompressedSize:e.readUInt32LE(22),filenameLength:e.readUInt16LE(26),extraFieldLength:e.readUInt16LE(28)};if(o.filename=await r.readToken(new Token.StringType(o.filenameLength,"utf-8")),await r.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize)switch(await r.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(o.compressedSize===0){let s=-1;for(;s<0&&r.position<r.fileInfo.size;)await r.peekBuffer(e,{mayBeLess:!0}),s=e.indexOf("504B0304",0,"hex"),await r.ignore(s>=0?s:e.length)}else await r.ignore(o.compressedSize)}}catch(o){if(!(o instanceof strtok3.EndOfStreamError))throw o}return{ext:"zip",mime:"application/zip"}}if(i("OggS")){await r.ignore(28);let o=Buffer.alloc(8);return await r.readBuffer(o),_check(o,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(o,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(o,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(o,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(o,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(o,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(e[2]===3||e[2]===5||e[2]===7)&&(e[3]===4||e[3]===6||e[3]===8))return{ext:"zip",mime:"application/zip"};if(i("ftyp",{offset:4})&&(e[8]&96)!==0){let o=e.toString("binary",8,12).replace("\0"," ").trim();switch(o){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return o.startsWith("3g")?o.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(i("MThd"))return{ext:"mid",mime:"audio/midi"};if(i("wOFF")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(i("wOF2")&&(n([0,1,0,0],{offset:4})||i("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(i("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(i("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(i("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(i("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(i("%PDF")){await r.ignore(1350);let o=10*1024*1024,s=Buffer.alloc(Math.min(o,r.fileInfo.size));return await r.readBuffer(s,{mayBeLess:!0}),s.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return i("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(e=Buffer.alloc(24),await r.peekBuffer(e),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(i("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){async function o(){let f=await r.peekNumber(Token.UINT8),h=128,d=0;for(;(f&h)===0&&h!==0;)++d,h>>=1;let m=Buffer.alloc(d+1);return await r.readBuffer(m),m}async function s(){let f=await o(),h=await o();h[0]^=128>>h.length-1;let d=Math.min(6,h.length);return{id:f.readUIntBE(0,f.length),len:h.readUIntBE(h.length-d,d)}}async function a(f,h){for(;h>0;){let d=await s();if(d.id===17026)return r.readToken(new Token.StringType(d.len,"utf-8"));await r.ignore(d.len),--h}}let u=await s();switch(await a(1,u.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(i("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(i("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(i("MSCF")||i("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(i("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(i("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(i("IMPM"))return{ext:"it",mime:"audio/x-it"};if(i("-lh0-",{offset:2})||i("-lh1-",{offset:2})||i("-lh2-",{offset:2})||i("-lh3-",{offset:2})||i("-lh4-",{offset:2})||i("-lh5-",{offset:2})||i("-lh6-",{offset:2})||i("-lh7-",{offset:2})||i("-lzs-",{offset:2})||i("-lz4-",{offset:2})||i("-lz5-",{offset:2})||i("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(i("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(i("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(e[6]===0||e[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(i("solid "))return{ext:"stl",mime:"model/stl"};if(i("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(i("!<arch>"))return await r.ignore(8),await r.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(n([137,80,78,71,13,10,26,10])){await r.ignore(8);async function o(){return{length:await r.readToken(Token.INT32_BE),type:await r.readToken(new Token.StringType(4,"binary"))}}do{let s=await o();if(s.length<0)return;switch(s.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await r.ignore(s.length+4)}}while(r.position+8<r.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(i("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){async function o(){let s=Buffer.alloc(16);return await r.readBuffer(s),{id:s,size:Number(await r.readToken(Token.UINT64_LE))}}for(await r.ignore(30);r.position+24<r.fileInfo.size;){let s=await o(),a=s.size-24;if(_check(s.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let u=Buffer.alloc(16);if(a-=await r.readBuffer(u),_check(u,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(u,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await r.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await r.ignore(20),await r.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(n([255,10])||n([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await r.peekBuffer(e,{length:Math.min(256,r.fileInfo.size),mayBeLess:!0}),i("BEGIN:")){if(i("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(i("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(i("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(i("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(i("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&e.length>=16){let o=e.readUInt32LE(12);if(o>12&&e.length>=o+16)try{let s=e.slice(16,o+16).toString();if(JSON.parse(s).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(i("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await r.peekBuffer(e,{length:Math.min(512,r.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(e))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(i("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(e.length>=2&&n([255,224],{offset:0,mask:[255,224]})){if(n([16],{offset:1,mask:[22]}))return n([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(n([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}var stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{let r=new stream.PassThrough,e;stream.pipeline?e=stream.pipeline(readableStream,r,()=>{}):e=readableStream.pipe(r);let t=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{let n=await fromBuffer(t);r.fileType=n}catch(n){reject(n)}resolve(e)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});module.exports=fileType});var yN=st((fZ,mN)=>{"use strict";Ce();De();Re();var m9=uN(),wb=gN();async function y9(r){let e=await m9.fromFile(r);try{return await wb.fromTokenizer(e)}finally{await e.close()}}var vb={fromFile:y9};Object.assign(vb,wb);Object.defineProperty(vb,"extensions",{get(){return wb.extensions}});Object.defineProperty(vb,"mimeTypes",{get(){return wb.mimeTypes}});mN.exports=vb});var Yp=st(ah=>{"use strict";Ce();De();Re();function b9(r,e,t){if(t===void 0&&(t=Array.prototype),r&&typeof t.find=="function")return t.find.call(r,e);for(var n=0;n<r.length;n++)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];if(e.call(void 0,i,n,r))return i}}function U2(r,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(r):r}function w9(r,e){if(r===null||typeof r!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}var bN=U2({HTML:"text/html",isHTML:function(r){return r===bN.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),wN=U2({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===wN.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ah.assign=w9;ah.find=b9;ah.freeze=U2;ah.MIME_TYPE=bN;ah.NAMESPACE=wN});var K2=st(yl=>{Ce();De();Re();var CN=Yp(),so=CN.find,Xp=CN.NAMESPACE;function v9(r){return r!==""}function _9(r){return r?r.split(/[\t\n\f\r ]+/).filter(v9):[]}function E9(r,e){return r.hasOwnProperty(e)||(r[e]=!0),r}function vN(r){if(!r)return[];var e=_9(r);return Object.keys(e.reduce(E9,{}))}function A9(r){return function(e){return r&&r.indexOf(e)!==-1}}function Zp(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function li(r,e){var t=r.prototype;if(!(t instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,Zp(t,i),r.prototype=t=i}t.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),t.constructor=r)}var ui={},Is=ui.ELEMENT_NODE=1,uh=ui.ATTRIBUTE_NODE=2,_b=ui.TEXT_NODE=3,RN=ui.CDATA_SECTION_NODE=4,DN=ui.ENTITY_REFERENCE_NODE=5,x9=ui.ENTITY_NODE=6,IN=ui.PROCESSING_INSTRUCTION_NODE=7,ON=ui.COMMENT_NODE=8,NN=ui.DOCUMENT_NODE=9,kN=ui.DOCUMENT_TYPE_NODE=10,ra=ui.DOCUMENT_FRAGMENT_NODE=11,S9=ui.NOTATION_NODE=12,Ln={},pn={},wZ=Ln.INDEX_SIZE_ERR=(pn[1]="Index size error",1),vZ=Ln.DOMSTRING_SIZE_ERR=(pn[2]="DOMString size error",2),ai=Ln.HIERARCHY_REQUEST_ERR=(pn[3]="Hierarchy request error",3),_Z=Ln.WRONG_DOCUMENT_ERR=(pn[4]="Wrong document",4),EZ=Ln.INVALID_CHARACTER_ERR=(pn[5]="Invalid character",5),AZ=Ln.NO_DATA_ALLOWED_ERR=(pn[6]="No data allowed",6),xZ=Ln.NO_MODIFICATION_ALLOWED_ERR=(pn[7]="No modification allowed",7),LN=Ln.NOT_FOUND_ERR=(pn[8]="Not found",8),SZ=Ln.NOT_SUPPORTED_ERR=(pn[9]="Not supported",9),_N=Ln.INUSE_ATTRIBUTE_ERR=(pn[10]="Attribute in use",10),TZ=Ln.INVALID_STATE_ERR=(pn[11]="Invalid state",11),CZ=Ln.SYNTAX_ERR=(pn[12]="Syntax error",12),RZ=Ln.INVALID_MODIFICATION_ERR=(pn[13]="Invalid modification",13),DZ=Ln.NAMESPACE_ERR=(pn[14]="Invalid namespace",14),IZ=Ln.INVALID_ACCESS_ERR=(pn[15]="Invalid access",15);function Wr(r,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,pn[r]),this.message=pn[r],Error.captureStackTrace&&Error.captureStackTrace(this,Wr);return t.code=r,e&&(this.message=this.message+": "+e),t}Wr.prototype=Error.prototype;Zp(Ln,Wr);function ta(){}ta.prototype={length:0,item:function(r){return r>=0&&r<this.length?this[r]:null},toString:function(r,e){for(var t=[],n=0;n<this.length;n++)lh(this[n],t,r,e);return t.join("")},filter:function(r){return Array.prototype.filter.call(this,r)},indexOf:function(r){return Array.prototype.indexOf.call(this,r)}};function ch(r,e){this._node=r,this._refresh=e,z2(this)}function z2(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!==e){var t=r._refresh(r._node);if(GN(r,"length",t.length),!r.$$length||t.length<r.$$length)for(var n=t.length;n in r;n++)Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];Zp(t,r),r._inc=e}}ch.prototype.item=function(r){return z2(this),this[r]||null};li(ch,ta);function Eb(){}function PN(r,e){for(var t=r.length;t--;)if(r[t]===e)return t}function EN(r,e,t,n){if(n?e[PN(e,n)]=t:e[e.length++]=t,r){t.ownerElement=r;var i=r.ownerDocument;i&&(n&&FN(i,r,n),T9(i,r,t))}}function AN(r,e,t){var n=PN(e,t);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,r){var o=r.ownerDocument;o&&(FN(o,r,t),t.ownerElement=null)}}else throw new Wr(LN,new Error(r.tagName+"@"+t))}Eb.prototype={length:0,item:ta.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==r)return t}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new Wr(_N);var t=this.getNamedItem(r.nodeName);return EN(this._ownerElement,this,r,t),t},setNamedItemNS:function(r){var e=r.ownerElement,t;if(e&&e!=this._ownerElement)throw new Wr(_N);return t=this.getNamedItemNS(r.namespaceURI,r.localName),EN(this._ownerElement,this,r,t),t},removeNamedItem:function(r){var e=this.getNamedItem(r);return AN(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var t=this.getNamedItemNS(r,e);return AN(this._ownerElement,this,t),t},getNamedItemNS:function(r,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function MN(){}MN.prototype={hasFeature:function(r,e){return!0},createDocument:function(r,e,t){var n=new Jp;if(n.implementation=this,n.childNodes=new ta,n.doctype=t||null,t&&n.appendChild(t),e){var i=n.createElementNS(r,e);n.appendChild(i)}return n},createDocumentType:function(r,e,t){var n=new Sb;return n.name=r,n.nodeName=r,n.publicId=e||"",n.systemId=t||"",n}};function Xt(){}Xt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return Ab(this,r,e)},replaceChild:function(r,e){Ab(this,r,e,jN),e&&this.removeChild(e)},removeChild:function(r){return UN(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return $2(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==_b&&r.nodeType==_b?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===r)return n}e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];e=e.nodeType==uh?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function BN(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}Zp(ui,Xt);Zp(ui,Xt.prototype);function Kp(r,e){if(e(r))return!0;if(r=r.firstChild)do if(Kp(r,e))return!0;while(r=r.nextSibling)}function Jp(){this.ownerDocument=this}function T9(r,e,t){r&&r._inc++;var n=t.namespaceURI;n===Xp.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function FN(r,e,t,n){r&&r._inc++;var i=t.namespaceURI;i===Xp.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function W2(r,e,t){if(r&&r._inc){r._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var i=e.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o,delete n[n.length]}}}function UN(r,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:r.firstChild=n,n?n.previousSibling=t:r.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,W2(r.ownerDocument,r),e}function C9(r){return r&&(r.nodeType===Xt.DOCUMENT_NODE||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.ELEMENT_NODE)}function R9(r){return r&&(oo(r)||q2(r)||na(r)||r.nodeType===Xt.DOCUMENT_FRAGMENT_NODE||r.nodeType===Xt.COMMENT_NODE||r.nodeType===Xt.PROCESSING_INSTRUCTION_NODE)}function na(r){return r&&r.nodeType===Xt.DOCUMENT_TYPE_NODE}function oo(r){return r&&r.nodeType===Xt.ELEMENT_NODE}function q2(r){return r&&r.nodeType===Xt.TEXT_NODE}function xN(r,e){var t=r.childNodes||[];if(so(t,oo)||na(e))return!1;var n=so(t,na);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function SN(r,e){var t=r.childNodes||[];function n(o){return oo(o)&&o!==e}if(so(t,n))return!1;var i=so(t,na);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function D9(r,e,t){if(!C9(r))throw new Wr(ai,"Unexpected parent node type "+r.nodeType);if(t&&t.parentNode!==r)throw new Wr(LN,"child not in parent");if(!R9(e)||na(e)&&r.nodeType!==Xt.DOCUMENT_NODE)throw new Wr(ai,"Unexpected node type "+e.nodeType+" for parent node type "+r.nodeType)}function I9(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(oo);if(o.length>1||so(i,q2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!xN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(oo(e)&&!xN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(na(e)){if(so(n,na))throw new Wr(ai,"Only one doctype is allowed");var s=so(n,oo);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element");if(!t&&s)throw new Wr(ai,"Doctype can not be appended since element is present")}}function jN(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Xt.DOCUMENT_FRAGMENT_NODE){var o=i.filter(oo);if(o.length>1||so(i,q2))throw new Wr(ai,"More than one element or text in fragment");if(o.length===1&&!SN(r,t))throw new Wr(ai,"Element in fragment can not be inserted before doctype")}if(oo(e)&&!SN(r,t))throw new Wr(ai,"Only one element can be added and only after doctype");if(na(e)){let u=function(c){return na(c)&&c!==t};var a=u;if(so(n,u))throw new Wr(ai,"Only one doctype is allowed");var s=so(n,oo);if(t&&n.indexOf(s)<n.indexOf(t))throw new Wr(ai,"Doctype can only be inserted before an element")}}function Ab(r,e,t,n){D9(r,e,t),r.nodeType===Xt.DOCUMENT_NODE&&(n||I9)(r,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===ra){var o=e.firstChild;if(o==null)return e;var s=e.lastChild}else o=s=e;var a=t?t.previousSibling:r.lastChild;o.previousSibling=a,s.nextSibling=t,a?a.nextSibling=o:r.firstChild=o,t==null?r.lastChild=s:t.previousSibling=s;do o.parentNode=r;while(o!==s&&(o=o.nextSibling));return W2(r.ownerDocument||r,r),e.nodeType==ra&&(e.firstChild=e.lastChild=null),e}function O9(r,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=r,e.previousSibling=r.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:r.firstChild=e,r.lastChild=e,W2(r.ownerDocument,r,e),e}Jp.prototype={nodeName:"#document",nodeType:NN,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==ra){for(var t=r.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return r}return Ab(this,r,e),r.ownerDocument=this,this.documentElement===null&&r.nodeType===Is&&(this.documentElement=r),r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),UN(this,r)},replaceChild:function(r,e){Ab(this,r,e,jN),r.ownerDocument=this,e&&this.removeChild(e),oo(r)&&(this.documentElement=r)},importNode:function(r,e){return HN(this,r,e)},getElementById:function(r){var e=null;return Kp(this.documentElement,function(t){if(t.nodeType==Is&&t.getAttribute("id")==r)return e=t,!0}),e},getElementsByClassName:function(r){var e=vN(r);return new ch(this,function(t){var n=[];return e.length>0&&Kp(t.documentElement,function(i){if(i!==t&&i.nodeType===Is){var o=i.getAttribute("class");if(o){var s=r===o;if(!s){var a=vN(o);s=e.every(A9(a))}s&&n.push(i)}}}),n})},createElement:function(r){var e=new Vu;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.localName=r,e.childNodes=new ta;var t=e.attributes=new Eb;return t._ownerElement=e,e},createDocumentFragment:function(){var r=new Tb;return r.ownerDocument=this,r.childNodes=new ta,r},createTextNode:function(r){var e=new H2;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new G2;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new V2;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var t=new X2;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=r,t.nodeValue=t.data=e,t},createAttribute:function(r){var e=new xb;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new Y2;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var t=new Vu,n=e.split(":"),i=t.attributes=new Eb;return t.childNodes=new ta,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=r,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(r,e){var t=new xb,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=r,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};li(Jp,Xt);function Vu(){this._nsMap={}}Vu.prototype={nodeType:Is,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var t=this.ownerDocument.createAttribute(r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===ra?this.insertBefore(r,null):O9(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);return t&&t.value||""},setAttributeNS:function(r,e,t){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new ch(this,function(e){var t=[];return Kp(e,function(n){n!==e&&n.nodeType==Is&&(r==="*"||n.tagName==r)&&t.push(n)}),t})},getElementsByTagNameNS:function(r,e){return new ch(this,function(t){var n=[];return Kp(t,function(i){i!==t&&i.nodeType===Is&&(r==="*"||i.namespaceURI===r)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Jp.prototype.getElementsByTagName=Vu.prototype.getElementsByTagName;Jp.prototype.getElementsByTagNameNS=Vu.prototype.getElementsByTagNameNS;li(Vu,Xt);function xb(){}xb.prototype.nodeType=uh;li(xb,Xt);function Qp(){}Qp.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(pn[ai])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,t){var n=this.data.substring(0,r),i=this.data.substring(r+e);t=n+t+i,this.nodeValue=this.data=t,this.length=t.length}};li(Qp,Xt);function H2(){}H2.prototype={nodeName:"#text",nodeType:_b,splitText:function(r){var e=this.data,t=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};li(H2,Qp);function G2(){}G2.prototype={nodeName:"#comment",nodeType:ON};li(G2,Qp);function V2(){}V2.prototype={nodeName:"#cdata-section",nodeType:RN};li(V2,Qp);function Sb(){}Sb.prototype.nodeType=kN;li(Sb,Xt);function $N(){}$N.prototype.nodeType=S9;li($N,Xt);function zN(){}zN.prototype.nodeType=x9;li(zN,Xt);function Y2(){}Y2.prototype.nodeType=DN;li(Y2,Xt);function Tb(){}Tb.prototype.nodeName="#document-fragment";Tb.prototype.nodeType=ra;li(Tb,Xt);function X2(){}X2.prototype.nodeType=IN;li(X2,Xt);function WN(){}WN.prototype.serializeToString=function(r,e,t){return qN.call(r,e,t)};Xt.prototype.toString=qN;function qN(r,e){var t=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,o=n.namespaceURI;if(o&&i==null){var i=n.lookupPrefix(o);if(i==null)var s=[{namespace:o,prefix:null}]}return lh(this,t,r,e,s),t.join("")}function TN(r,e,t){var n=r.prefix||"",i=r.namespaceURI;if(!i||n==="xml"&&i===Xp.XML||i===Xp.XMLNS)return!1;for(var o=t.length;o--;){var s=t[o];if(s.prefix===n)return s.namespace!==i}return!0}function j2(r,e,t){r.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,BN),'"')}function lh(r,e,t,n,i){if(i||(i=[]),n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case Is:var o=r.attributes,s=o.length,y=r.firstChild,a=r.tagName;t=Xp.isHTML(r.namespaceURI)||t;var u=a;if(!t&&!r.prefix&&r.namespaceURI){for(var c,f=0;f<o.length;f++)if(o.item(f).name==="xmlns"){c=o.item(f).value;break}if(!c)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.prefix===""&&d.namespace===r.namespaceURI){c=d.namespace;break}}if(c!==r.namespaceURI)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.namespace===r.namespaceURI){d.prefix&&(u=d.prefix+":"+a);break}}}e.push("<",u);for(var m=0;m<s;m++){var b=o.item(m);b.prefix=="xmlns"?i.push({prefix:b.localName,namespace:b.value}):b.nodeName=="xmlns"&&i.push({prefix:"",namespace:b.value})}for(var m=0;m<s;m++){var b=o.item(m);if(TN(b,t,i)){var v=b.prefix||"",w=b.namespaceURI;j2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}lh(b,e,t,n,i)}if(a===u&&TN(r,t,i)){var v=r.prefix||"",w=r.namespaceURI;j2(e,v?"xmlns:"+v:"xmlns",w),i.push({prefix:v,namespace:w})}if(y||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),t&&/^script$/i.test(a))for(;y;)y.data?e.push(y.data):lh(y,e,t,n,i.slice()),y=y.nextSibling;else for(;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;e.push("</",u,">")}else e.push("/>");return;case NN:case ra:for(var y=r.firstChild;y;)lh(y,e,t,n,i.slice()),y=y.nextSibling;return;case uh:return j2(e,r.name,r.value);case _b:return e.push(r.data.replace(/[<&>]/g,BN));case RN:return e.push("<![CDATA[",r.data,"]]>");case ON:return e.push("<!--",r.data,"-->");case kN:var _=r.publicId,E=r.systemId;if(e.push("<!DOCTYPE ",r.name),_)e.push(" PUBLIC ",_),E&&E!="."&&e.push(" ",E),e.push(">");else if(E&&E!=".")e.push(" SYSTEM ",E,">");else{var S=r.internalSubset;S&&e.push(" [",S,"]"),e.push(">")}return;case IN:return e.push("<?",r.target," ",r.data,"?>");case DN:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function HN(r,e,t){var n;switch(e.nodeType){case Is:n=e.cloneNode(!1),n.ownerDocument=r;case ra:break;case uh:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,t)for(var i=e.firstChild;i;)n.appendChild(HN(r,i,t)),i=i.nextSibling;return n}function $2(r,e,t){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];typeof o!="object"&&o!=n[i]&&(n[i]=o)}switch(e.childNodes&&(n.childNodes=new ta),n.ownerDocument=r,n.nodeType){case Is:var s=e.attributes,a=n.attributes=new Eb,u=s.length;a._ownerElement=n;for(var c=0;c<u;c++)n.setAttributeNode($2(r,s.item(c),!0));break;case uh:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild($2(r,f,t)),f=f.nextSibling;return n}function GN(r,e,t){r[e]=t}try{if(Object.defineProperty){let r=function(e){switch(e.nodeType){case Is:case ra:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(r(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};N9=r,Object.defineProperty(ch.prototype,"length",{get:function(){return z2(this),this.$$length}}),Object.defineProperty(Xt.prototype,"textContent",{get:function(){return r(this)},set:function(e){switch(this.nodeType){case Is:case ra:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),GN=function(e,t,n){e["$$"+t]=n}}}catch{}var N9;yl.DocumentType=Sb;yl.DOMException=Wr;yl.DOMImplementation=MN;yl.Element=Vu;yl.Node=Xt;yl.NodeList=ta;yl.XMLSerializer=WN});var YN=st(eg=>{"use strict";Ce();De();Re();var VN=Yp().freeze;eg.XML_ENTITIES=VN({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});eg.HTML_ENTITIES=VN({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"});eg.entityMap=eg.HTML_ENTITIES});var rk=st(J2=>{Ce();De();Re();var ig=Yp().NAMESPACE,Z2=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,XN=new RegExp("[\\-\\.0-9"+Z2.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),KN=new RegExp("^"+Z2.source+XN.source+"*(?::"+Z2.source+XN.source+"*)?$"),tg=0,bl=1,fh=2,rg=3,hh=4,dh=5,ng=6,Cb=7;function ph(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,ph)}ph.prototype=new Error;ph.prototype.name=ph.name;function QN(){}QN.prototype={parse:function(r,e,t){var n=this.domBuilder;n.startDocument(),ek(e,e={}),k9(r,e,t,n,this.errorHandler),n.endDocument()}};function k9(r,e,t,n,i){function o(te){if(te>65535){te-=65536;var N=55296+(te>>10),x=56320+(te&1023);return String.fromCharCode(N,x)}else return String.fromCharCode(te)}function s(te){var N=te.slice(1,-1);return Object.hasOwnProperty.call(t,N)?t[N]:N.charAt(0)==="#"?o(parseInt(N.substr(1).replace("x","0x"))):(i.error("entity not found:"+te),te)}function a(te){if(te>v){var N=r.substring(v,te).replace(/&#?\w+;/g,s);d&&u(v),n.characters(N,0,te-v),v=te}}function u(te,N){for(;te>=f&&(N=h.exec(r));)c=N.index,f=c+N[0].length,d.lineNumber++;d.columnNumber=te-c+1}for(var c=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,m=[{currentNSMap:e}],b={},v=0;;){try{var w=r.indexOf("<",v);if(w<0){if(!r.substr(v).match(/^\s*$/)){var y=n.doc,_=y.createTextNode(r.substr(v));y.appendChild(_),n.currentElement=_}return}switch(w>v&&a(w),r.charAt(w+1)){case"/":var ne=r.indexOf(">",w+3),E=r.substring(w+2,ne).replace(/[ \t\n\r]+$/g,""),S=m.pop();ne<0?(E=r.substring(w+2).replace(/[\s<].*/,""),i.error("end tag name: "+E+" is not complete:"+S.tagName),ne=w+1+E.length):E.match(/\s</)&&(E=E.replace(/[\s<].*/,""),i.error("end tag name: "+E+" maybe not complete"),ne=w+1+E.length);var A=S.localNSMap,F=S.tagName==E,I=F||S.tagName&&S.tagName.toLowerCase()==E.toLowerCase();if(I){if(n.endElement(S.uri,S.localName,E),A)for(var X in A)Object.prototype.hasOwnProperty.call(A,X)&&n.endPrefixMapping(X);F||i.fatalError("end tag name: "+E+" is not match the current start tagName:"+S.tagName)}else m.push(S);ne++;break;case"?":d&&u(w),ne=F9(r,w,n);break;case"!":d&&u(w),ne=B9(r,w,n,i);break;default:d&&u(w);var Z=new tk,H=m[m.length-1].currentNSMap,ne=L9(r,w,Z,H,s,i),L=Z.length;if(!Z.closed&&M9(r,ne,Z.tagName,b)&&(Z.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),d&&L){for(var $=ZN(d,{}),K=0;K<L;K++){var le=Z[K];u(le.offset),le.locator=ZN(d,{})}n.locator=$,JN(Z,n,H)&&m.push(Z),n.locator=d}else JN(Z,n,H)&&m.push(Z);ig.isHTML(Z.uri)&&!Z.closed?ne=P9(r,ne,Z.tagName,s,n):ne++}}catch(te){if(te instanceof ph)throw te;i.error("element parse error: "+te),ne=-1}ne>v?v=ne:a(Math.max(w,v)+1)}}function ZN(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function L9(r,e,t,n,i,o){function s(m,b,v){t.attributeNames.hasOwnProperty(m)&&o.fatalError("Attribute "+m+" redefined"),t.addValue(m,b.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),v)}for(var a,u,c=++e,f=tg;;){var h=r.charAt(c);switch(h){case"=":if(f===bl)a=r.slice(e,c),f=rg;else if(f===fh)f=rg;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===rg||f===bl)if(f===bl&&(o.warning('attribute value must after "="'),a=r.slice(e,c)),e=c+1,c=r.indexOf(h,e),c>0)u=r.slice(e,c),s(a,u,e-1),f=dh;else throw new Error("attribute value no end '"+h+"' match");else if(f==hh)u=r.slice(e,c),s(a,u,e),o.warning('attribute "'+a+'" missed start quot('+h+")!!"),e=c+1,f=dh;else throw new Error('attribute value must after "="');break;case"/":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Cb:f=Cb,t.closed=!0;case hh:case bl:break;case fh:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),f==tg&&t.setTagName(r.slice(e,c)),c;case">":switch(f){case tg:t.setTagName(r.slice(e,c));case dh:case ng:case Cb:break;case hh:case bl:u=r.slice(e,c),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case fh:f===fh&&(u=a),f==hh?(o.warning('attribute "'+u+'" missed quot(")!'),s(a,u,e)):((!ig.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case rg:throw new Error("attribute value missed!!")}return c;case"\x80":h=" ";default:if(h<=" ")switch(f){case tg:t.setTagName(r.slice(e,c)),f=ng;break;case bl:a=r.slice(e,c),f=fh;break;case hh:var u=r.slice(e,c);o.warning('attribute "'+u+'" missed quot(")!!'),s(a,u,e);case dh:f=ng;break}else switch(f){case fh:var d=t.tagName;(!ig.isHTML(n[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),s(a,a,e),e=c,f=bl;break;case dh:o.warning('attribute space is required"'+a+'"!!');case ng:f=bl,e=c;break;case rg:f=hh,e=c;break;case Cb:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function JN(r,e,t){for(var n=r.tagName,i=null,h=r.length;h--;){var o=r[h],s=o.qName,a=o.value,d=s.indexOf(":");if(d>0)var u=o.prefix=s.slice(0,d),c=s.slice(d+1),f=u==="xmlns"&&c;else c=s,u=null,f=s==="xmlns"&&"";o.localName=c,f!==!1&&(i==null&&(i={},ek(t,t={})),t[f]=i[f]=a,o.uri=ig.XMLNS,e.startPrefixMapping(f,a))}for(var h=r.length;h--;){o=r[h];var u=o.prefix;u&&(u==="xml"&&(o.uri=ig.XML),u!=="xmlns"&&(o.uri=t[u||""]))}var d=n.indexOf(":");d>0?(u=r.prefix=n.slice(0,d),c=r.localName=n.slice(d+1)):(u=null,c=r.localName=n);var m=r.uri=t[u||""];if(e.startElement(m,c,n,r),r.closed){if(e.endElement(m,c,n),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return r.currentNSMap=t,r.localNSMap=i,!0}function P9(r,e,t,n,i){if(/^(?:script|textarea)$/i.test(t)){var o=r.indexOf("</"+t+">",e),s=r.substring(e+1,o);if(/[&<]/.test(s))return/^script$/i.test(t)?(i.characters(s,0,s.length),o):(s=s.replace(/&#?\w+;/g,n),i.characters(s,0,s.length),o)}return e+1}function M9(r,e,t,n){var i=n[t];return i==null&&(i=r.lastIndexOf("</"+t+">"),i<e&&(i=r.lastIndexOf("</"+t)),n[t]=i),i<e}function ek(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function B9(r,e,t,n){var i=r.charAt(e+2);switch(i){case"-":if(r.charAt(e+3)==="-"){var o=r.indexOf("-->",e+4);return o>e?(t.comment(r,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var o=r.indexOf("]]>",e+9);return t.startCDATA(),t.characters(r,e+9,o-e-9),t.endCDATA(),o+3}var s=U9(r,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],c=!1,f=!1;a>3&&(/^public$/i.test(s[2][0])?(c=s[3][0],f=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var h=s[a-1];return t.startDTD(u,c,f),t.endDTD(),h.index+h[0].length}}return-1}function F9(r,e,t){var n=r.indexOf("?>",e);if(n){var i=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var o=i[0].length;return t.processingInstruction(i[1],i[2]),n+2}else return-1}return-1}function tk(){this.attributeNames={}}tk.prototype={setTagName:function(r){if(!KN.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,t){if(!KN.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:t}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function U9(r,e){var t,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(r);t=i.exec(r);)if(n.push(t),t[1])return n}J2.XMLReader=QN;J2.ParseError=ph});var uk=st(Db=>{Ce();De();Re();var j9=Yp(),$9=K2(),nk=YN(),ok=rk(),z9=$9.DOMImplementation,ik=j9.NAMESPACE,W9=ok.ParseError,q9=ok.XMLReader;function ak(r){return r.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function lk(r){this.options=r||{locator:{}}}lk.prototype.parseFromString=function(r,e){var t=this.options,n=new q9,i=t.domBuilder||new sg,o=t.errorHandler,s=t.locator,a=t.xmlns||{},u=/\/x?html?$/.test(e),c=u?nk.HTML_ENTITIES:nk.XML_ENTITIES;s&&i.setDocumentLocator(s),n.errorHandler=H9(o,i,s),n.domBuilder=t.domBuilder||i,u&&(a[""]=ik.HTML),a.xml=a.xml||ik.XML;var f=t.normalizeLineEndings||ak;return r&&typeof r=="string"?n.parse(f(r),a,c):n.errorHandler.error("invalid doc source"),i.doc};function H9(r,e,t){if(!r){if(e instanceof sg)return e;r=e}var n={},i=r instanceof Function;t=t||{};function o(s){var a=r[s];!a&&i&&(a=r.length==2?function(u){r(s,u)}:r),n[s]=a&&function(u){a("[xmldom "+s+"]	"+u+Q2(t))}||function(){}}return o("warning"),o("error"),o("fatalError"),n}function sg(){this.cdata=!1}function gh(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}sg.prototype={startDocument:function(){this.doc=new z9().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,t,n){var i=this.doc,o=i.createElementNS(r,t||e),s=n.length;Rb(this,o),this.currentElement=o,this.locator&&gh(this.locator,o);for(var a=0;a<s;a++){var r=n.getURI(a),u=n.getValue(a),t=n.getQName(a),c=i.createAttributeNS(r,t);this.locator&&gh(n.getLocator(a),c),c.value=c.nodeValue=u,o.setAttributeNode(c)}},endElement:function(r,e,t){var n=this.currentElement,i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var t=this.doc.createProcessingInstruction(r,e);this.locator&&gh(this.locator,t),Rb(this,t)},ignorableWhitespace:function(r,e,t){},characters:function(r,e,t){if(r=sk.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&gh(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,t){r=sk.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&gh(this.locator,n),Rb(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(r,e,t);this.locator&&gh(this.locator,i),Rb(this,i),this.doc.doctype=i}},warning:function(r){console.warn("[xmldom warning]	"+r,Q2(this.locator))},error:function(r){console.error("[xmldom error]	"+r,Q2(this.locator))},fatalError:function(r){throw new W9(r,this.locator)}};function Q2(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function sk(r,e,t){return typeof r=="string"?r.substr(e,t):r.length>=e+t||e?new java.lang.String(r,e,t)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){sg.prototype[r]=function(){return null}});function Rb(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}Db.__DOMHandler=sg;Db.normalizeLineEndings=ak;Db.DOMParser=lk});var Ob=st(Ib=>{Ce();De();Re();var ck=K2();Ib.DOMImplementation=ck.DOMImplementation;Ib.XMLSerializer=ck.XMLSerializer;Ib.DOMParser=uk().DOMParser});var Dk={};jo(Dk,{Deflate:()=>a7,DeflateRaw:()=>l7,Gunzip:()=>u7,Gzip:()=>c7,Inflate:()=>f7,InflateRaw:()=>h7,Unzip:()=>d7,Z_BEST_COMPRESSION:()=>p7,Z_BEST_SPEED:()=>g7,Z_BINARY:()=>m7,Z_BLOCK:()=>y7,Z_BUF_ERROR:()=>b7,Z_DATA_ERROR:()=>w7,Z_DEFAULT_CHUNK:()=>v7,Z_DEFAULT_COMPRESSION:()=>_7,Z_DEFAULT_LEVEL:()=>E7,Z_DEFAULT_MEMLEVEL:()=>A7,Z_DEFAULT_STRATEGY:()=>x7,Z_DEFAULT_WINDOWBITS:()=>S7,Z_DEFLATED:()=>T7,Z_ERRNO:()=>C7,Z_FILTERED:()=>R7,Z_FINISH:()=>D7,Z_FIXED:()=>I7,Z_FULL_FLUSH:()=>O7,Z_HUFFMAN_ONLY:()=>N7,Z_MAX_CHUNK:()=>k7,Z_MAX_LEVEL:()=>L7,Z_MAX_MEMLEVEL:()=>P7,Z_MAX_WINDOWBITS:()=>M7,Z_MIN_CHUNK:()=>B7,Z_MIN_LEVEL:()=>F7,Z_MIN_MEMLEVEL:()=>U7,Z_MIN_WINDOWBITS:()=>j7,Z_NEED_DICT:()=>$7,Z_NO_COMPRESSION:()=>z7,Z_NO_FLUSH:()=>W7,Z_OK:()=>q7,Z_PARTIAL_FLUSH:()=>H7,Z_RLE:()=>G7,Z_STREAM_END:()=>V7,Z_STREAM_ERROR:()=>Y7,Z_SYNC_FLUSH:()=>X7,Z_TEXT:()=>K7,Z_TREES:()=>Z7,Z_UNKNOWN:()=>J7,Zlib:()=>Q7,codes:()=>ez,createDeflate:()=>tz,createDeflateRaw:()=>rz,createGunzip:()=>nz,createGzip:()=>iz,createInflate:()=>sz,createInflateRaw:()=>oz,createUnzip:()=>az,default:()=>Ye,deflate:()=>lz,deflateRaw:()=>uz,deflateRawSync:()=>cz,deflateSync:()=>fz,gunzip:()=>hz,gunzipSync:()=>dz,gzip:()=>pz,gzipSync:()=>gz,inflate:()=>mz,inflateRaw:()=>yz,inflateRawSync:()=>bz,inflateSync:()=>wz,unzip:()=>vz,unzipSync:()=>_z});function Z9(){if(pk)return e1;pk=!0;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return e1=r,e1}function Nb(){if(gk)return Pn;gk=!0;var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function e(i,o){return Object.prototype.hasOwnProperty.call(i,o)}Pn.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var a in s)e(s,a)&&(i[a]=s[a])}}return i},Pn.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var t={arraySet:function(i,o,s,a,u){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+a),u);return}for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){var o,s,a,u,c,f;for(a=0,o=0,s=i.length;o<s;o++)a+=i[o].length;for(f=new Uint8Array(a),u=0,o=0,s=i.length;o<s;o++)c=i[o],f.set(c,u),u+=c.length;return f}},n={arraySet:function(i,o,s,a,u){for(var c=0;c<a;c++)i[u+c]=o[s+c]},flattenChunks:function(i){return[].concat.apply([],i)}};return Pn.setTyped=function(i){i?(Pn.Buf8=Uint8Array,Pn.Buf16=Uint16Array,Pn.Buf32=Int32Array,Pn.assign(Pn,t)):(Pn.Buf8=Array,Pn.Buf16=Array,Pn.Buf32=Array,Pn.assign(Pn,n))},Pn.setTyped(r),Pn}function J9(){if(mk)return Xu;mk=!0;var r=Nb(),e=4,t=0,n=1,i=2;function o(D){for(var ae=D.length;--ae>=0;)D[ae]=0}var s=0,a=1,u=2,c=3,f=258,h=29,d=256,m=d+1+h,b=30,v=19,w=2*m+1,y=15,_=16,E=7,S=256,A=16,F=17,I=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=512,$=new Array((m+2)*2);o($);var K=new Array(b*2);o(K);var le=new Array(L);o(le);var te=new Array(f-c+1);o(te);var N=new Array(h);o(N);var x=new Array(b);o(x);function P(D,ae,fe,Ee,ve){this.static_tree=D,this.extra_bits=ae,this.extra_base=fe,this.elems=Ee,this.max_length=ve,this.has_stree=D&&D.length}var C,U,j;function M(D,ae){this.dyn_tree=D,this.max_code=0,this.stat_desc=ae}function Q(D){return D<256?le[D]:le[256+(D>>>7)]}function ce(D,ae){D.pending_buf[D.pending++]=ae&255,D.pending_buf[D.pending++]=ae>>>8&255}function _e(D,ae,fe){D.bi_valid>_-fe?(D.bi_buf|=ae<<D.bi_valid&65535,ce(D,D.bi_buf),D.bi_buf=ae>>_-D.bi_valid,D.bi_valid+=fe-_):(D.bi_buf|=ae<<D.bi_valid&65535,D.bi_valid+=fe)}function re(D,ae,fe){_e(D,fe[ae*2],fe[ae*2+1])}function W(D,ae){var fe=0;do fe|=D&1,D>>>=1,fe<<=1;while(--ae>0);return fe>>>1}function oe(D){D.bi_valid===16?(ce(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function we(D,ae){var fe=ae.dyn_tree,Ee=ae.max_code,ve=ae.stat_desc.static_tree,Ie=ae.stat_desc.has_stree,Y=ae.stat_desc.extra_bits,Me=ae.stat_desc.extra_base,et=ae.stat_desc.max_length,O,Pe,je,de,Te,Be,ut=0;for(de=0;de<=y;de++)D.bl_count[de]=0;for(fe[D.heap[D.heap_max]*2+1]=0,O=D.heap_max+1;O<w;O++)Pe=D.heap[O],de=fe[fe[Pe*2+1]*2+1]+1,de>et&&(de=et,ut++),fe[Pe*2+1]=de,!(Pe>Ee)&&(D.bl_count[de]++,Te=0,Pe>=Me&&(Te=Y[Pe-Me]),Be=fe[Pe*2],D.opt_len+=Be*(de+Te),Ie&&(D.static_len+=Be*(ve[Pe*2+1]+Te)));if(ut!==0){do{for(de=et-1;D.bl_count[de]===0;)de--;D.bl_count[de]--,D.bl_count[de+1]+=2,D.bl_count[et]--,ut-=2}while(ut>0);for(de=et;de!==0;de--)for(Pe=D.bl_count[de];Pe!==0;)je=D.heap[--O],!(je>Ee)&&(fe[je*2+1]!==de&&(D.opt_len+=(de-fe[je*2+1])*fe[je*2],fe[je*2+1]=de),Pe--)}}function xe(D,ae,fe){var Ee=new Array(y+1),ve=0,Ie,Y;for(Ie=1;Ie<=y;Ie++)Ee[Ie]=ve=ve+fe[Ie-1]<<1;for(Y=0;Y<=ae;Y++){var Me=D[Y*2+1];Me!==0&&(D[Y*2]=W(Ee[Me]++,Me))}}function V(){var D,ae,fe,Ee,ve,Ie=new Array(y+1);for(fe=0,Ee=0;Ee<h-1;Ee++)for(N[Ee]=fe,D=0;D<1<<X[Ee];D++)te[fe++]=Ee;for(te[fe-1]=Ee,ve=0,Ee=0;Ee<16;Ee++)for(x[Ee]=ve,D=0;D<1<<Z[Ee];D++)le[ve++]=Ee;for(ve>>=7;Ee<b;Ee++)for(x[Ee]=ve<<7,D=0;D<1<<Z[Ee]-7;D++)le[256+ve++]=Ee;for(ae=0;ae<=y;ae++)Ie[ae]=0;for(D=0;D<=143;)$[D*2+1]=8,D++,Ie[8]++;for(;D<=255;)$[D*2+1]=9,D++,Ie[9]++;for(;D<=279;)$[D*2+1]=7,D++,Ie[7]++;for(;D<=287;)$[D*2+1]=8,D++,Ie[8]++;for(xe($,m+1,Ie),D=0;D<b;D++)K[D*2+1]=5,K[D*2]=W(D,5);C=new P($,X,d+1,m,y),U=new P(K,Z,0,b,y),j=new P(new Array(0),H,0,v,E)}function B(D){var ae;for(ae=0;ae<m;ae++)D.dyn_ltree[ae*2]=0;for(ae=0;ae<b;ae++)D.dyn_dtree[ae*2]=0;for(ae=0;ae<v;ae++)D.bl_tree[ae*2]=0;D.dyn_ltree[S*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function se(D){D.bi_valid>8?ce(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function ge(D,ae,fe,Ee){se(D),ce(D,fe),ce(D,~fe),r.arraySet(D.pending_buf,D.window,ae,fe,D.pending),D.pending+=fe}function Se(D,ae,fe,Ee){var ve=ae*2,Ie=fe*2;return D[ve]<D[Ie]||D[ve]===D[Ie]&&Ee[ae]<=Ee[fe]}function be(D,ae,fe){for(var Ee=D.heap[fe],ve=fe<<1;ve<=D.heap_len&&(ve<D.heap_len&&Se(ae,D.heap[ve+1],D.heap[ve],D.depth)&&ve++,!Se(ae,Ee,D.heap[ve],D.depth));)D.heap[fe]=D.heap[ve],fe=ve,ve<<=1;D.heap[fe]=Ee}function pe(D,ae,fe){var Ee,ve,Ie=0,Y,Me;if(D.last_lit!==0)do Ee=D.pending_buf[D.d_buf+Ie*2]<<8|D.pending_buf[D.d_buf+Ie*2+1],ve=D.pending_buf[D.l_buf+Ie],Ie++,Ee===0?re(D,ve,ae):(Y=te[ve],re(D,Y+d+1,ae),Me=X[Y],Me!==0&&(ve-=N[Y],_e(D,ve,Me)),Ee--,Y=Q(Ee),re(D,Y,fe),Me=Z[Y],Me!==0&&(Ee-=x[Y],_e(D,Ee,Me)));while(Ie<D.last_lit);re(D,S,ae)}function Ae(D,ae){var fe=ae.dyn_tree,Ee=ae.stat_desc.static_tree,ve=ae.stat_desc.has_stree,Ie=ae.stat_desc.elems,Y,Me,et=-1,O;for(D.heap_len=0,D.heap_max=w,Y=0;Y<Ie;Y++)fe[Y*2]!==0?(D.heap[++D.heap_len]=et=Y,D.depth[Y]=0):fe[Y*2+1]=0;for(;D.heap_len<2;)O=D.heap[++D.heap_len]=et<2?++et:0,fe[O*2]=1,D.depth[O]=0,D.opt_len--,ve&&(D.static_len-=Ee[O*2+1]);for(ae.max_code=et,Y=D.heap_len>>1;Y>=1;Y--)be(D,fe,Y);O=Ie;do Y=D.heap[1],D.heap[1]=D.heap[D.heap_len--],be(D,fe,1),Me=D.heap[1],D.heap[--D.heap_max]=Y,D.heap[--D.heap_max]=Me,fe[O*2]=fe[Y*2]+fe[Me*2],D.depth[O]=(D.depth[Y]>=D.depth[Me]?D.depth[Y]:D.depth[Me])+1,fe[Y*2+1]=fe[Me*2+1]=O,D.heap[1]=O++,be(D,fe,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],we(D,ae),xe(fe,et,D.bl_count)}function $e(D,ae,fe){var Ee,ve=-1,Ie,Y=ae[1],Me=0,et=7,O=4;for(Y===0&&(et=138,O=3),ae[(fe+1)*2+1]=65535,Ee=0;Ee<=fe;Ee++)Ie=Y,Y=ae[(Ee+1)*2+1],!(++Me<et&&Ie===Y)&&(Me<O?D.bl_tree[Ie*2]+=Me:Ie!==0?(Ie!==ve&&D.bl_tree[Ie*2]++,D.bl_tree[A*2]++):Me<=10?D.bl_tree[F*2]++:D.bl_tree[I*2]++,Me=0,ve=Ie,Y===0?(et=138,O=3):Ie===Y?(et=6,O=3):(et=7,O=4))}function ke(D,ae,fe){var Ee,ve=-1,Ie,Y=ae[1],Me=0,et=7,O=4;for(Y===0&&(et=138,O=3),Ee=0;Ee<=fe;Ee++)if(Ie=Y,Y=ae[(Ee+1)*2+1],!(++Me<et&&Ie===Y)){if(Me<O)do re(D,Ie,D.bl_tree);while(--Me!==0);else Ie!==0?(Ie!==ve&&(re(D,Ie,D.bl_tree),Me--),re(D,A,D.bl_tree),_e(D,Me-3,2)):Me<=10?(re(D,F,D.bl_tree),_e(D,Me-3,3)):(re(D,I,D.bl_tree),_e(D,Me-11,7));Me=0,ve=Ie,Y===0?(et=138,O=3):Ie===Y?(et=6,O=3):(et=7,O=4)}}function Oe(D){var ae;for($e(D,D.dyn_ltree,D.l_desc.max_code),$e(D,D.dyn_dtree,D.d_desc.max_code),Ae(D,D.bl_desc),ae=v-1;ae>=3&&D.bl_tree[ne[ae]*2+1]===0;ae--);return D.opt_len+=3*(ae+1)+5+5+4,ae}function Ve(D,ae,fe,Ee){var ve;for(_e(D,ae-257,5),_e(D,fe-1,5),_e(D,Ee-4,4),ve=0;ve<Ee;ve++)_e(D,D.bl_tree[ne[ve]*2+1],3);ke(D,D.dyn_ltree,ae-1),ke(D,D.dyn_dtree,fe-1)}function Je(D){var ae=4093624447,fe;for(fe=0;fe<=31;fe++,ae>>>=1)if(ae&1&&D.dyn_ltree[fe*2]!==0)return t;if(D.dyn_ltree[18]!==0||D.dyn_ltree[20]!==0||D.dyn_ltree[26]!==0)return n;for(fe=32;fe<d;fe++)if(D.dyn_ltree[fe*2]!==0)return n;return t}var tt=!1;function T(D){tt||(V(),tt=!0),D.l_desc=new M(D.dyn_ltree,C),D.d_desc=new M(D.dyn_dtree,U),D.bl_desc=new M(D.bl_tree,j),D.bi_buf=0,D.bi_valid=0,B(D)}function g(D,ae,fe,Ee){_e(D,(s<<1)+(Ee?1:0),3),ge(D,ae,fe)}function p(D){_e(D,a<<1,3),re(D,S,$),oe(D)}function R(D,ae,fe,Ee){var ve,Ie,Y=0;D.level>0?(D.strm.data_type===i&&(D.strm.data_type=Je(D)),Ae(D,D.l_desc),Ae(D,D.d_desc),Y=Oe(D),ve=D.opt_len+3+7>>>3,Ie=D.static_len+3+7>>>3,Ie<=ve&&(ve=Ie)):ve=Ie=fe+5,fe+4<=ve&&ae!==-1?g(D,ae,fe,Ee):D.strategy===e||Ie===ve?(_e(D,(a<<1)+(Ee?1:0),3),pe(D,$,K)):(_e(D,(u<<1)+(Ee?1:0),3),Ve(D,D.l_desc.max_code+1,D.d_desc.max_code+1,Y+1),pe(D,D.dyn_ltree,D.dyn_dtree)),B(D),Ee&&se(D)}function J(D,ae,fe){return D.pending_buf[D.d_buf+D.last_lit*2]=ae>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=ae&255,D.pending_buf[D.l_buf+D.last_lit]=fe&255,D.last_lit++,ae===0?D.dyn_ltree[fe*2]++:(D.matches++,ae--,D.dyn_ltree[(te[fe]+d+1)*2]++,D.dyn_dtree[Q(ae)*2]++),D.last_lit===D.lit_bufsize-1}return Xu._tr_init=T,Xu._tr_stored_block=g,Xu._tr_flush_block=R,Xu._tr_tally=J,Xu._tr_align=p,Xu}function Ck(){if(yk)return t1;yk=!0;function r(e,t,n,i){for(var o=e&65535|0,s=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do o=o+t[i++]|0,s=s+o|0;while(--a);o%=65521,s%=65521}return o|s<<16|0}return t1=r,t1}function Rk(){if(bk)return r1;bk=!0;function r(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i}var e=r();function t(n,i,o,s){var a=e,u=s+o;n^=-1;for(var c=s;c<u;c++)n=n>>>8^a[(n^i[c])&255];return n^-1}return r1=t,r1}function Q9(){return wk||(wk=!0,n1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),n1}function e7(){if(vk)return Ns;vk=!0;var r=Nb(),e=J9(),t=Ck(),n=Rk(),i=Q9(),o=0,s=1,a=3,u=4,c=5,f=0,h=1,d=-2,m=-3,b=-5,v=-1,w=1,y=2,_=3,E=4,S=0,A=2,F=8,I=9,X=15,Z=8,H=29,ne=256,L=ne+1+H,$=30,K=19,le=2*L+1,te=15,N=3,x=258,P=x+N+1,C=32,U=42,j=69,M=73,Q=91,ce=103,_e=113,re=666,W=1,oe=2,we=3,xe=4,V=3;function B(O,Pe){return O.msg=i[Pe],Pe}function se(O){return(O<<1)-(O>4?9:0)}function ge(O){for(var Pe=O.length;--Pe>=0;)O[Pe]=0}function Se(O){var Pe=O.state,je=Pe.pending;je>O.avail_out&&(je=O.avail_out),je!==0&&(r.arraySet(O.output,Pe.pending_buf,Pe.pending_out,je,O.next_out),O.next_out+=je,Pe.pending_out+=je,O.total_out+=je,O.avail_out-=je,Pe.pending-=je,Pe.pending===0&&(Pe.pending_out=0))}function be(O,Pe){e._tr_flush_block(O,O.block_start>=0?O.block_start:-1,O.strstart-O.block_start,Pe),O.block_start=O.strstart,Se(O.strm)}function pe(O,Pe){O.pending_buf[O.pending++]=Pe}function Ae(O,Pe){O.pending_buf[O.pending++]=Pe>>>8&255,O.pending_buf[O.pending++]=Pe&255}function $e(O,Pe,je,de){var Te=O.avail_in;return Te>de&&(Te=de),Te===0?0:(O.avail_in-=Te,r.arraySet(Pe,O.input,O.next_in,Te,je),O.state.wrap===1?O.adler=t(O.adler,Pe,Te,je):O.state.wrap===2&&(O.adler=n(O.adler,Pe,Te,je)),O.next_in+=Te,O.total_in+=Te,Te)}function ke(O,Pe){var je=O.max_chain_length,de=O.strstart,Te,Be,ut=O.prev_length,ue=O.nice_match,me=O.strstart>O.w_size-P?O.strstart-(O.w_size-P):0,We=O.window,Ue=O.w_mask,Ze=O.prev,dt=O.strstart+x,Rt=We[de+ut-1],Et=We[de+ut];O.prev_length>=O.good_match&&(je>>=2),ue>O.lookahead&&(ue=O.lookahead);do if(Te=Pe,!(We[Te+ut]!==Et||We[Te+ut-1]!==Rt||We[Te]!==We[de]||We[++Te]!==We[de+1])){de+=2,Te++;do;while(We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&We[++de]===We[++Te]&&de<dt);if(Be=x-(dt-de),de=dt-x,Be>ut){if(O.match_start=Pe,ut=Be,Be>=ue)break;Rt=We[de+ut-1],Et=We[de+ut]}}while((Pe=Ze[Pe&Ue])>me&&--je!==0);return ut<=O.lookahead?ut:O.lookahead}function Oe(O){var Pe=O.w_size,je,de,Te,Be,ut;do{if(Be=O.window_size-O.lookahead-O.strstart,O.strstart>=Pe+(Pe-P)){r.arraySet(O.window,O.window,Pe,Pe,0),O.match_start-=Pe,O.strstart-=Pe,O.block_start-=Pe,de=O.hash_size,je=de;do Te=O.head[--je],O.head[je]=Te>=Pe?Te-Pe:0;while(--de);de=Pe,je=de;do Te=O.prev[--je],O.prev[je]=Te>=Pe?Te-Pe:0;while(--de);Be+=Pe}if(O.strm.avail_in===0)break;if(de=$e(O.strm,O.window,O.strstart+O.lookahead,Be),O.lookahead+=de,O.lookahead+O.insert>=N)for(ut=O.strstart-O.insert,O.ins_h=O.window[ut],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ut+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ut+N-1])&O.hash_mask,O.prev[ut&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ut,ut++,O.insert--,!(O.lookahead+O.insert<N)););}while(O.lookahead<P&&O.strm.avail_in!==0)}function Ve(O,Pe){var je=65535;for(je>O.pending_buf_size-5&&(je=O.pending_buf_size-5);;){if(O.lookahead<=1){if(Oe(O),O.lookahead===0&&Pe===o)return W;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var de=O.block_start+je;if((O.strstart===0||O.strstart>=de)&&(O.lookahead=O.strstart-de,O.strstart=de,be(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-P&&(be(O,!1),O.strm.avail_out===0))return W}return O.insert=0,Pe===u?(be(O,!0),O.strm.avail_out===0?we:xe):(O.strstart>O.block_start&&(be(O,!1),O.strm.avail_out===0),W)}function Je(O,Pe){for(var je,de;;){if(O.lookahead<P){if(Oe(O),O.lookahead<P&&Pe===o)return W;if(O.lookahead===0)break}if(je=0,O.lookahead>=N&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+N-1])&O.hash_mask,je=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),je!==0&&O.strstart-je<=O.w_size-P&&(O.match_length=ke(O,je)),O.match_length>=N)if(de=e._tr_tally(O,O.strstart-O.match_start,O.match_length-N),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=N){O.match_length--;do O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+N-1])&O.hash_mask,je=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart;while(--O.match_length!==0);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else de=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(de&&(be(O,!1),O.strm.avail_out===0))return W}return O.insert=O.strstart<N-1?O.strstart:N-1,Pe===u?(be(O,!0),O.strm.avail_out===0?we:xe):O.last_lit&&(be(O,!1),O.strm.avail_out===0)?W:oe}function tt(O,Pe){for(var je,de,Te;;){if(O.lookahead<P){if(Oe(O),O.lookahead<P&&Pe===o)return W;if(O.lookahead===0)break}if(je=0,O.lookahead>=N&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+N-1])&O.hash_mask,je=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=N-1,je!==0&&O.prev_length<O.max_lazy_match&&O.strstart-je<=O.w_size-P&&(O.match_length=ke(O,je),O.match_length<=5&&(O.strategy===w||O.match_length===N&&O.strstart-O.match_start>4096)&&(O.match_length=N-1)),O.prev_length>=N&&O.match_length<=O.prev_length){Te=O.strstart+O.lookahead-N,de=e._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-N),O.lookahead-=O.prev_length-1,O.prev_length-=2;do++O.strstart<=Te&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+N-1])&O.hash_mask,je=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart);while(--O.prev_length!==0);if(O.match_available=0,O.match_length=N-1,O.strstart++,de&&(be(O,!1),O.strm.avail_out===0))return W}else if(O.match_available){if(de=e._tr_tally(O,0,O.window[O.strstart-1]),de&&be(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return W}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(de=e._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<N-1?O.strstart:N-1,Pe===u?(be(O,!0),O.strm.avail_out===0?we:xe):O.last_lit&&(be(O,!1),O.strm.avail_out===0)?W:oe}function T(O,Pe){for(var je,de,Te,Be,ut=O.window;;){if(O.lookahead<=x){if(Oe(O),O.lookahead<=x&&Pe===o)return W;if(O.lookahead===0)break}if(O.match_length=0,O.lookahead>=N&&O.strstart>0&&(Te=O.strstart-1,de=ut[Te],de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te])){Be=O.strstart+x;do;while(de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&de===ut[++Te]&&Te<Be);O.match_length=x-(Be-Te),O.match_length>O.lookahead&&(O.match_length=O.lookahead)}if(O.match_length>=N?(je=e._tr_tally(O,1,O.match_length-N),O.lookahead-=O.match_length,O.strstart+=O.match_length,O.match_length=0):(je=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++),je&&(be(O,!1),O.strm.avail_out===0))return W}return O.insert=0,Pe===u?(be(O,!0),O.strm.avail_out===0?we:xe):O.last_lit&&(be(O,!1),O.strm.avail_out===0)?W:oe}function g(O,Pe){for(var je;;){if(O.lookahead===0&&(Oe(O),O.lookahead===0)){if(Pe===o)return W;break}if(O.match_length=0,je=e._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++,je&&(be(O,!1),O.strm.avail_out===0))return W}return O.insert=0,Pe===u?(be(O,!0),O.strm.avail_out===0?we:xe):O.last_lit&&(be(O,!1),O.strm.avail_out===0)?W:oe}function p(O,Pe,je,de,Te){this.good_length=O,this.max_lazy=Pe,this.nice_length=je,this.max_chain=de,this.func=Te}var R;R=[new p(0,0,0,0,Ve),new p(4,4,8,4,Je),new p(4,5,16,8,Je),new p(4,6,32,32,Je),new p(4,4,16,16,tt),new p(8,16,32,32,tt),new p(8,16,128,128,tt),new p(8,32,128,256,tt),new p(32,128,258,1024,tt),new p(32,258,258,4096,tt)];function J(O){O.window_size=2*O.w_size,ge(O.head),O.max_lazy_match=R[O.level].max_lazy,O.good_match=R[O.level].good_length,O.nice_match=R[O.level].nice_length,O.max_chain_length=R[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=N-1,O.match_available=0,O.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(le*2),this.dyn_dtree=new r.Buf16((2*$+1)*2),this.bl_tree=new r.Buf16((2*K+1)*2),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(te+1),this.heap=new r.Buf16(2*L+1),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*L+1),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ae(O){var Pe;return!O||!O.state?B(O,d):(O.total_in=O.total_out=0,O.data_type=A,Pe=O.state,Pe.pending=0,Pe.pending_out=0,Pe.wrap<0&&(Pe.wrap=-Pe.wrap),Pe.status=Pe.wrap?U:_e,O.adler=Pe.wrap===2?0:1,Pe.last_flush=o,e._tr_init(Pe),f)}function fe(O){var Pe=ae(O);return Pe===f&&J(O.state),Pe}function Ee(O,Pe){return!O||!O.state||O.state.wrap!==2?d:(O.state.gzhead=Pe,f)}function ve(O,Pe,je,de,Te,Be){if(!O)return d;var ut=1;if(Pe===v&&(Pe=6),de<0?(ut=0,de=-de):de>15&&(ut=2,de-=16),Te<1||Te>I||je!==F||de<8||de>15||Pe<0||Pe>9||Be<0||Be>E)return B(O,d);de===8&&(de=9);var ue=new D;return O.state=ue,ue.strm=O,ue.wrap=ut,ue.gzhead=null,ue.w_bits=de,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=Te+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+N-1)/N),ue.window=new r.Buf8(ue.w_size*2),ue.head=new r.Buf16(ue.hash_size),ue.prev=new r.Buf16(ue.w_size),ue.lit_bufsize=1<<Te+6,ue.pending_buf_size=ue.lit_bufsize*4,ue.pending_buf=new r.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=Pe,ue.strategy=Be,ue.method=je,fe(O)}function Ie(O,Pe){return ve(O,Pe,F,X,Z,S)}function Y(O,Pe){var je,de,Te,Be;if(!O||!O.state||Pe>c||Pe<0)return O?B(O,d):d;if(de=O.state,!O.output||!O.input&&O.avail_in!==0||de.status===re&&Pe!==u)return B(O,O.avail_out===0?b:d);if(de.strm=O,je=de.last_flush,de.last_flush=Pe,de.status===U)if(de.wrap===2)O.adler=0,pe(de,31),pe(de,139),pe(de,8),de.gzhead?(pe(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),pe(de,de.gzhead.time&255),pe(de,de.gzhead.time>>8&255),pe(de,de.gzhead.time>>16&255),pe(de,de.gzhead.time>>24&255),pe(de,de.level===9?2:de.strategy>=y||de.level<2?4:0),pe(de,de.gzhead.os&255),de.gzhead.extra&&de.gzhead.extra.length&&(pe(de,de.gzhead.extra.length&255),pe(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(O.adler=n(O.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=j):(pe(de,0),pe(de,0),pe(de,0),pe(de,0),pe(de,0),pe(de,de.level===9?2:de.strategy>=y||de.level<2?4:0),pe(de,V),de.status=_e);else{var ut=F+(de.w_bits-8<<4)<<8,ue=-1;de.strategy>=y||de.level<2?ue=0:de.level<6?ue=1:de.level===6?ue=2:ue=3,ut|=ue<<6,de.strstart!==0&&(ut|=C),ut+=31-ut%31,de.status=_e,Ae(de,ut),de.strstart!==0&&(Ae(de,O.adler>>>16),Ae(de,O.adler&65535)),O.adler=1}if(de.status===j)if(de.gzhead.extra){for(Te=de.pending;de.gzindex<(de.gzhead.extra.length&65535)&&!(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),Se(O),Te=de.pending,de.pending===de.pending_buf_size));)pe(de,de.gzhead.extra[de.gzindex]&255),de.gzindex++;de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=M)}else de.status=M;if(de.status===M)if(de.gzhead.name){Te=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),Se(O),Te=de.pending,de.pending===de.pending_buf_size)){Be=1;break}de.gzindex<de.gzhead.name.length?Be=de.gzhead.name.charCodeAt(de.gzindex++)&255:Be=0,pe(de,Be)}while(Be!==0);de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),Be===0&&(de.gzindex=0,de.status=Q)}else de.status=Q;if(de.status===Q)if(de.gzhead.comment){Te=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),Se(O),Te=de.pending,de.pending===de.pending_buf_size)){Be=1;break}de.gzindex<de.gzhead.comment.length?Be=de.gzhead.comment.charCodeAt(de.gzindex++)&255:Be=0,pe(de,Be)}while(Be!==0);de.gzhead.hcrc&&de.pending>Te&&(O.adler=n(O.adler,de.pending_buf,de.pending-Te,Te)),Be===0&&(de.status=ce)}else de.status=ce;if(de.status===ce&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&Se(O),de.pending+2<=de.pending_buf_size&&(pe(de,O.adler&255),pe(de,O.adler>>8&255),O.adler=0,de.status=_e)):de.status=_e),de.pending!==0){if(Se(O),O.avail_out===0)return de.last_flush=-1,f}else if(O.avail_in===0&&se(Pe)<=se(je)&&Pe!==u)return B(O,b);if(de.status===re&&O.avail_in!==0)return B(O,b);if(O.avail_in!==0||de.lookahead!==0||Pe!==o&&de.status!==re){var me=de.strategy===y?g(de,Pe):de.strategy===_?T(de,Pe):R[de.level].func(de,Pe);if((me===we||me===xe)&&(de.status=re),me===W||me===we)return O.avail_out===0&&(de.last_flush=-1),f;if(me===oe&&(Pe===s?e._tr_align(de):Pe!==c&&(e._tr_stored_block(de,0,0,!1),Pe===a&&(ge(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),Se(O),O.avail_out===0))return de.last_flush=-1,f}return Pe!==u?f:de.wrap<=0?h:(de.wrap===2?(pe(de,O.adler&255),pe(de,O.adler>>8&255),pe(de,O.adler>>16&255),pe(de,O.adler>>24&255),pe(de,O.total_in&255),pe(de,O.total_in>>8&255),pe(de,O.total_in>>16&255),pe(de,O.total_in>>24&255)):(Ae(de,O.adler>>>16),Ae(de,O.adler&65535)),Se(O),de.wrap>0&&(de.wrap=-de.wrap),de.pending!==0?f:h)}function Me(O){var Pe;return!O||!O.state?d:(Pe=O.state.status,Pe!==U&&Pe!==j&&Pe!==M&&Pe!==Q&&Pe!==ce&&Pe!==_e&&Pe!==re?B(O,d):(O.state=null,Pe===_e?B(O,m):f))}function et(O,Pe){var je=Pe.length,de,Te,Be,ut,ue,me,We,Ue;if(!O||!O.state||(de=O.state,ut=de.wrap,ut===2||ut===1&&de.status!==U||de.lookahead))return d;for(ut===1&&(O.adler=t(O.adler,Pe,je,0)),de.wrap=0,je>=de.w_size&&(ut===0&&(ge(de.head),de.strstart=0,de.block_start=0,de.insert=0),Ue=new r.Buf8(de.w_size),r.arraySet(Ue,Pe,je-de.w_size,de.w_size,0),Pe=Ue,je=de.w_size),ue=O.avail_in,me=O.next_in,We=O.input,O.avail_in=je,O.next_in=0,O.input=Pe,Oe(de);de.lookahead>=N;){Te=de.strstart,Be=de.lookahead-(N-1);do de.ins_h=(de.ins_h<<de.hash_shift^de.window[Te+N-1])&de.hash_mask,de.prev[Te&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=Te,Te++;while(--Be);de.strstart=Te,de.lookahead=N-1,Oe(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=N-1,de.match_available=0,O.next_in=me,O.input=We,O.avail_in=ue,de.wrap=ut,f}return Ns.deflateInit=Ie,Ns.deflateInit2=ve,Ns.deflateReset=fe,Ns.deflateResetKeep=ae,Ns.deflateSetHeader=Ee,Ns.deflate=Y,Ns.deflateEnd=Me,Ns.deflateSetDictionary=et,Ns.deflateInfo="pako deflate (from Nodeca project)",Ns}function t7(){if(_k)return i1;_k=!0;var r=30,e=12;return i1=function(n,i){var o,s,a,u,c,f,h,d,m,b,v,w,y,_,E,S,A,F,I,X,Z,H,ne,L,$;o=n.state,s=n.next_in,L=n.input,a=s+(n.avail_in-5),u=n.next_out,$=n.output,c=u-(i-n.avail_out),f=u+(n.avail_out-257),h=o.dmax,d=o.wsize,m=o.whave,b=o.wnext,v=o.window,w=o.hold,y=o.bits,_=o.lencode,E=o.distcode,S=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{y<15&&(w+=L[s++]<<y,y+=8,w+=L[s++]<<y,y+=8),F=_[w&S];t:for(;;){if(I=F>>>24,w>>>=I,y-=I,I=F>>>16&255,I===0)$[u++]=F&65535;else if(I&16){X=F&65535,I&=15,I&&(y<I&&(w+=L[s++]<<y,y+=8),X+=w&(1<<I)-1,w>>>=I,y-=I),y<15&&(w+=L[s++]<<y,y+=8,w+=L[s++]<<y,y+=8),F=E[w&A];r:for(;;){if(I=F>>>24,w>>>=I,y-=I,I=F>>>16&255,I&16){if(Z=F&65535,I&=15,y<I&&(w+=L[s++]<<y,y+=8,y<I&&(w+=L[s++]<<y,y+=8)),Z+=w&(1<<I)-1,Z>h){n.msg="invalid distance too far back",o.mode=r;break e}if(w>>>=I,y-=I,I=u-c,Z>I){if(I=Z-I,I>m&&o.sane){n.msg="invalid distance too far back",o.mode=r;break e}if(H=0,ne=v,b===0){if(H+=d-I,I<X){X-=I;do $[u++]=v[H++];while(--I);H=u-Z,ne=$}}else if(b<I){if(H+=d+b-I,I-=b,I<X){X-=I;do $[u++]=v[H++];while(--I);if(H=0,b<X){I=b,X-=I;do $[u++]=v[H++];while(--I);H=u-Z,ne=$}}}else if(H+=b-I,I<X){X-=I;do $[u++]=v[H++];while(--I);H=u-Z,ne=$}for(;X>2;)$[u++]=ne[H++],$[u++]=ne[H++],$[u++]=ne[H++],X-=3;X&&($[u++]=ne[H++],X>1&&($[u++]=ne[H++]))}else{H=u-Z;do $[u++]=$[H++],$[u++]=$[H++],$[u++]=$[H++],X-=3;while(X>2);X&&($[u++]=$[H++],X>1&&($[u++]=$[H++]))}}else if((I&64)===0){F=E[(F&65535)+(w&(1<<I)-1)];continue r}else{n.msg="invalid distance code",o.mode=r;break e}break}}else if((I&64)===0){F=_[(F&65535)+(w&(1<<I)-1)];continue t}else if(I&32){o.mode=e;break e}else{n.msg="invalid literal/length code",o.mode=r;break e}break}}while(s<a&&u<f);X=y>>3,s-=X,y-=X<<3,w&=(1<<y)-1,n.next_in=s,n.next_out=u,n.avail_in=s<a?5+(a-s):5-(s-a),n.avail_out=u<f?257+(f-u):257-(u-f),o.hold=w,o.bits=y},i1}function r7(){if(Ek)return s1;Ek=!0;var r=Nb(),e=15,t=852,n=592,i=0,o=1,s=2,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return s1=function(d,m,b,v,w,y,_,E){var S=E.bits,A=0,F=0,I=0,X=0,Z=0,H=0,ne=0,L=0,$=0,K=0,le,te,N,x,P,C=null,U=0,j,M=new r.Buf16(e+1),Q=new r.Buf16(e+1),ce=null,_e=0,re,W,oe;for(A=0;A<=e;A++)M[A]=0;for(F=0;F<v;F++)M[m[b+F]]++;for(Z=S,X=e;X>=1&&M[X]===0;X--);if(Z>X&&(Z=X),X===0)return w[y++]=1<<24|64<<16|0,w[y++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<X&&M[I]===0;I++);for(Z<I&&(Z=I),L=1,A=1;A<=e;A++)if(L<<=1,L-=M[A],L<0)return-1;if(L>0&&(d===i||X!==1))return-1;for(Q[1]=0,A=1;A<e;A++)Q[A+1]=Q[A]+M[A];for(F=0;F<v;F++)m[b+F]!==0&&(_[Q[m[b+F]]++]=F);if(d===i?(C=ce=_,j=19):d===o?(C=a,U-=257,ce=u,_e-=257,j=256):(C=c,ce=f,j=-1),K=0,F=0,A=I,P=y,H=Z,ne=0,N=-1,$=1<<Z,x=$-1,d===o&&$>t||d===s&&$>n)return 1;for(;;){re=A-ne,_[F]<j?(W=0,oe=_[F]):_[F]>j?(W=ce[_e+_[F]],oe=C[U+_[F]]):(W=96,oe=0),le=1<<A-ne,te=1<<H,I=te;do te-=le,w[P+(K>>ne)+te]=re<<24|W<<16|oe|0;while(te!==0);for(le=1<<A-1;K&le;)le>>=1;if(le!==0?(K&=le-1,K+=le):K=0,F++,--M[A]===0){if(A===X)break;A=m[b+_[F]]}if(A>Z&&(K&x)!==N){for(ne===0&&(ne=Z),P+=I,H=A-ne,L=1<<H;H+ne<X&&(L-=M[H+ne],!(L<=0));)H++,L<<=1;if($+=1<<H,d===o&&$>t||d===s&&$>n)return 1;N=K&x,w[N]=Z<<24|H<<16|P-y|0}}return K!==0&&(w[P+K]=A-ne<<24|64<<16|0),E.bits=Z,0},s1}function n7(){if(Ak)return ss;Ak=!0;var r=Nb(),e=Ck(),t=Rk(),n=t7(),i=r7(),o=0,s=1,a=2,u=4,c=5,f=6,h=0,d=1,m=2,b=-2,v=-3,w=-4,y=-5,_=8,E=1,S=2,A=3,F=4,I=5,X=6,Z=7,H=8,ne=9,L=10,$=11,K=12,le=13,te=14,N=15,x=16,P=17,C=18,U=19,j=20,M=21,Q=22,ce=23,_e=24,re=25,W=26,oe=27,we=28,xe=29,V=30,B=31,se=32,ge=852,Se=592,be=15,pe=be;function Ae(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function $e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ke(ve){var Ie;return!ve||!ve.state?b:(Ie=ve.state,ve.total_in=ve.total_out=Ie.total=0,ve.msg="",Ie.wrap&&(ve.adler=Ie.wrap&1),Ie.mode=E,Ie.last=0,Ie.havedict=0,Ie.dmax=32768,Ie.head=null,Ie.hold=0,Ie.bits=0,Ie.lencode=Ie.lendyn=new r.Buf32(ge),Ie.distcode=Ie.distdyn=new r.Buf32(Se),Ie.sane=1,Ie.back=-1,h)}function Oe(ve){var Ie;return!ve||!ve.state?b:(Ie=ve.state,Ie.wsize=0,Ie.whave=0,Ie.wnext=0,ke(ve))}function Ve(ve,Ie){var Y,Me;return!ve||!ve.state||(Me=ve.state,Ie<0?(Y=0,Ie=-Ie):(Y=(Ie>>4)+1,Ie<48&&(Ie&=15)),Ie&&(Ie<8||Ie>15))?b:(Me.window!==null&&Me.wbits!==Ie&&(Me.window=null),Me.wrap=Y,Me.wbits=Ie,Oe(ve))}function Je(ve,Ie){var Y,Me;return ve?(Me=new $e,ve.state=Me,Me.window=null,Y=Ve(ve,Ie),Y!==h&&(ve.state=null),Y):b}function tt(ve){return Je(ve,pe)}var T=!0,g,p;function R(ve){if(T){var Ie;for(g=new r.Buf32(512),p=new r.Buf32(32),Ie=0;Ie<144;)ve.lens[Ie++]=8;for(;Ie<256;)ve.lens[Ie++]=9;for(;Ie<280;)ve.lens[Ie++]=7;for(;Ie<288;)ve.lens[Ie++]=8;for(i(s,ve.lens,0,288,g,0,ve.work,{bits:9}),Ie=0;Ie<32;)ve.lens[Ie++]=5;i(a,ve.lens,0,32,p,0,ve.work,{bits:5}),T=!1}ve.lencode=g,ve.lenbits=9,ve.distcode=p,ve.distbits=5}function J(ve,Ie,Y,Me){var et,O=ve.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new r.Buf8(O.wsize)),Me>=O.wsize?(r.arraySet(O.window,Ie,Y-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(et=O.wsize-O.wnext,et>Me&&(et=Me),r.arraySet(O.window,Ie,Y-Me,et,O.wnext),Me-=et,Me?(r.arraySet(O.window,Ie,Y-Me,Me,0),O.wnext=Me,O.whave=O.wsize):(O.wnext+=et,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=et))),0}function D(ve,Ie){var Y,Me,et,O,Pe,je,de,Te,Be,ut,ue,me,We,Ue,Ze=0,dt,Rt,Et,ar,_i,qn,Ht,Dr,yr=new r.Buf8(4),zt,Yt,Zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return b;Y=ve.state,Y.mode===K&&(Y.mode=le),Pe=ve.next_out,et=ve.output,de=ve.avail_out,O=ve.next_in,Me=ve.input,je=ve.avail_in,Te=Y.hold,Be=Y.bits,ut=je,ue=de,Dr=h;e:for(;;)switch(Y.mode){case E:if(Y.wrap===0){Y.mode=le;break}for(;Be<16;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Y.wrap&2&&Te===35615){Y.check=0,yr[0]=Te&255,yr[1]=Te>>>8&255,Y.check=t(Y.check,yr,2,0),Te=0,Be=0,Y.mode=S;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(Y.wrap&1)||(((Te&255)<<8)+(Te>>8))%31){ve.msg="incorrect header check",Y.mode=V;break}if((Te&15)!==_){ve.msg="unknown compression method",Y.mode=V;break}if(Te>>>=4,Be-=4,Ht=(Te&15)+8,Y.wbits===0)Y.wbits=Ht;else if(Ht>Y.wbits){ve.msg="invalid window size",Y.mode=V;break}Y.dmax=1<<Ht,ve.adler=Y.check=1,Y.mode=Te&512?L:K,Te=0,Be=0;break;case S:for(;Be<16;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Y.flags=Te,(Y.flags&255)!==_){ve.msg="unknown compression method",Y.mode=V;break}if(Y.flags&57344){ve.msg="unknown header flags set",Y.mode=V;break}Y.head&&(Y.head.text=Te>>8&1),Y.flags&512&&(yr[0]=Te&255,yr[1]=Te>>>8&255,Y.check=t(Y.check,yr,2,0)),Te=0,Be=0,Y.mode=A;case A:for(;Be<32;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.head&&(Y.head.time=Te),Y.flags&512&&(yr[0]=Te&255,yr[1]=Te>>>8&255,yr[2]=Te>>>16&255,yr[3]=Te>>>24&255,Y.check=t(Y.check,yr,4,0)),Te=0,Be=0,Y.mode=F;case F:for(;Be<16;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.head&&(Y.head.xflags=Te&255,Y.head.os=Te>>8),Y.flags&512&&(yr[0]=Te&255,yr[1]=Te>>>8&255,Y.check=t(Y.check,yr,2,0)),Te=0,Be=0,Y.mode=I;case I:if(Y.flags&1024){for(;Be<16;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.length=Te,Y.head&&(Y.head.extra_len=Te),Y.flags&512&&(yr[0]=Te&255,yr[1]=Te>>>8&255,Y.check=t(Y.check,yr,2,0)),Te=0,Be=0}else Y.head&&(Y.head.extra=null);Y.mode=X;case X:if(Y.flags&1024&&(me=Y.length,me>je&&(me=je),me&&(Y.head&&(Ht=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Array(Y.head.extra_len)),r.arraySet(Y.head.extra,Me,O,me,Ht)),Y.flags&512&&(Y.check=t(Y.check,Me,me,O)),je-=me,O+=me,Y.length-=me),Y.length))break e;Y.length=0,Y.mode=Z;case Z:if(Y.flags&2048){if(je===0)break e;me=0;do Ht=Me[O+me++],Y.head&&Ht&&Y.length<65536&&(Y.head.name+=String.fromCharCode(Ht));while(Ht&&me<je);if(Y.flags&512&&(Y.check=t(Y.check,Me,me,O)),je-=me,O+=me,Ht)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=H;case H:if(Y.flags&4096){if(je===0)break e;me=0;do Ht=Me[O+me++],Y.head&&Ht&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(Ht));while(Ht&&me<je);if(Y.flags&512&&(Y.check=t(Y.check,Me,me,O)),je-=me,O+=me,Ht)break e}else Y.head&&(Y.head.comment=null);Y.mode=ne;case ne:if(Y.flags&512){for(;Be<16;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Te!==(Y.check&65535)){ve.msg="header crc mismatch",Y.mode=V;break}Te=0,Be=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),ve.adler=Y.check=0,Y.mode=K;break;case L:for(;Be<32;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}ve.adler=Y.check=Ae(Te),Te=0,Be=0,Y.mode=$;case $:if(Y.havedict===0)return ve.next_out=Pe,ve.avail_out=de,ve.next_in=O,ve.avail_in=je,Y.hold=Te,Y.bits=Be,m;ve.adler=Y.check=1,Y.mode=K;case K:if(Ie===c||Ie===f)break e;case le:if(Y.last){Te>>>=Be&7,Be-=Be&7,Y.mode=oe;break}for(;Be<3;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}switch(Y.last=Te&1,Te>>>=1,Be-=1,Te&3){case 0:Y.mode=te;break;case 1:if(R(Y),Y.mode=j,Ie===f){Te>>>=2,Be-=2;break e}break;case 2:Y.mode=P;break;case 3:ve.msg="invalid block type",Y.mode=V}Te>>>=2,Be-=2;break;case te:for(Te>>>=Be&7,Be-=Be&7;Be<32;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if((Te&65535)!==(Te>>>16^65535)){ve.msg="invalid stored block lengths",Y.mode=V;break}if(Y.length=Te&65535,Te=0,Be=0,Y.mode=N,Ie===f)break e;case N:Y.mode=x;case x:if(me=Y.length,me){if(me>je&&(me=je),me>de&&(me=de),me===0)break e;r.arraySet(et,Me,O,me,Pe),je-=me,O+=me,de-=me,Pe+=me,Y.length-=me;break}Y.mode=K;break;case P:for(;Be<14;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Y.nlen=(Te&31)+257,Te>>>=5,Be-=5,Y.ndist=(Te&31)+1,Te>>>=5,Be-=5,Y.ncode=(Te&15)+4,Te>>>=4,Be-=4,Y.nlen>286||Y.ndist>30){ve.msg="too many length or distance symbols",Y.mode=V;break}Y.have=0,Y.mode=C;case C:for(;Y.have<Y.ncode;){for(;Be<3;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.lens[Zr[Y.have++]]=Te&7,Te>>>=3,Be-=3}for(;Y.have<19;)Y.lens[Zr[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,zt={bits:Y.lenbits},Dr=i(o,Y.lens,0,19,Y.lencode,0,Y.work,zt),Y.lenbits=zt.bits,Dr){ve.msg="invalid code lengths set",Y.mode=V;break}Y.have=0,Y.mode=U;case U:for(;Y.have<Y.nlen+Y.ndist;){for(;Ze=Y.lencode[Te&(1<<Y.lenbits)-1],dt=Ze>>>24,Rt=Ze>>>16&255,Et=Ze&65535,!(dt<=Be);){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Et<16)Te>>>=dt,Be-=dt,Y.lens[Y.have++]=Et;else{if(Et===16){for(Yt=dt+2;Be<Yt;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Te>>>=dt,Be-=dt,Y.have===0){ve.msg="invalid bit length repeat",Y.mode=V;break}Ht=Y.lens[Y.have-1],me=3+(Te&3),Te>>>=2,Be-=2}else if(Et===17){for(Yt=dt+3;Be<Yt;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Te>>>=dt,Be-=dt,Ht=0,me=3+(Te&7),Te>>>=3,Be-=3}else{for(Yt=dt+7;Be<Yt;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Te>>>=dt,Be-=dt,Ht=0,me=11+(Te&127),Te>>>=7,Be-=7}if(Y.have+me>Y.nlen+Y.ndist){ve.msg="invalid bit length repeat",Y.mode=V;break}for(;me--;)Y.lens[Y.have++]=Ht}}if(Y.mode===V)break;if(Y.lens[256]===0){ve.msg="invalid code -- missing end-of-block",Y.mode=V;break}if(Y.lenbits=9,zt={bits:Y.lenbits},Dr=i(s,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,zt),Y.lenbits=zt.bits,Dr){ve.msg="invalid literal/lengths set",Y.mode=V;break}if(Y.distbits=6,Y.distcode=Y.distdyn,zt={bits:Y.distbits},Dr=i(a,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,zt),Y.distbits=zt.bits,Dr){ve.msg="invalid distances set",Y.mode=V;break}if(Y.mode=j,Ie===f)break e;case j:Y.mode=M;case M:if(je>=6&&de>=258){ve.next_out=Pe,ve.avail_out=de,ve.next_in=O,ve.avail_in=je,Y.hold=Te,Y.bits=Be,n(ve,ue),Pe=ve.next_out,et=ve.output,de=ve.avail_out,O=ve.next_in,Me=ve.input,je=ve.avail_in,Te=Y.hold,Be=Y.bits,Y.mode===K&&(Y.back=-1);break}for(Y.back=0;Ze=Y.lencode[Te&(1<<Y.lenbits)-1],dt=Ze>>>24,Rt=Ze>>>16&255,Et=Ze&65535,!(dt<=Be);){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Rt&&(Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;Ze=Y.lencode[qn+((Te&(1<<ar+_i)-1)>>ar)],dt=Ze>>>24,Rt=Ze>>>16&255,Et=Ze&65535,!(ar+dt<=Be);){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Te>>>=ar,Be-=ar,Y.back+=ar}if(Te>>>=dt,Be-=dt,Y.back+=dt,Y.length=Et,Rt===0){Y.mode=W;break}if(Rt&32){Y.back=-1,Y.mode=K;break}if(Rt&64){ve.msg="invalid literal/length code",Y.mode=V;break}Y.extra=Rt&15,Y.mode=Q;case Q:if(Y.extra){for(Yt=Y.extra;Be<Yt;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.length+=Te&(1<<Y.extra)-1,Te>>>=Y.extra,Be-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=ce;case ce:for(;Ze=Y.distcode[Te&(1<<Y.distbits)-1],dt=Ze>>>24,Rt=Ze>>>16&255,Et=Ze&65535,!(dt<=Be);){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if((Rt&240)===0){for(ar=dt,_i=Rt,qn=Et;Ze=Y.distcode[qn+((Te&(1<<ar+_i)-1)>>ar)],dt=Ze>>>24,Rt=Ze>>>16&255,Et=Ze&65535,!(ar+dt<=Be);){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Te>>>=ar,Be-=ar,Y.back+=ar}if(Te>>>=dt,Be-=dt,Y.back+=dt,Rt&64){ve.msg="invalid distance code",Y.mode=V;break}Y.offset=Et,Y.extra=Rt&15,Y.mode=_e;case _e:if(Y.extra){for(Yt=Y.extra;Be<Yt;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}Y.offset+=Te&(1<<Y.extra)-1,Te>>>=Y.extra,Be-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){ve.msg="invalid distance too far back",Y.mode=V;break}Y.mode=re;case re:if(de===0)break e;if(me=ue-de,Y.offset>me){if(me=Y.offset-me,me>Y.whave&&Y.sane){ve.msg="invalid distance too far back",Y.mode=V;break}me>Y.wnext?(me-=Y.wnext,We=Y.wsize-me):We=Y.wnext-me,me>Y.length&&(me=Y.length),Ue=Y.window}else Ue=et,We=Pe-Y.offset,me=Y.length;me>de&&(me=de),de-=me,Y.length-=me;do et[Pe++]=Ue[We++];while(--me);Y.length===0&&(Y.mode=M);break;case W:if(de===0)break e;et[Pe++]=Y.length,de--,Y.mode=M;break;case oe:if(Y.wrap){for(;Be<32;){if(je===0)break e;je--,Te|=Me[O++]<<Be,Be+=8}if(ue-=de,ve.total_out+=ue,Y.total+=ue,ue&&(ve.adler=Y.check=Y.flags?t(Y.check,et,ue,Pe-ue):e(Y.check,et,ue,Pe-ue)),ue=de,(Y.flags?Te:Ae(Te))!==Y.check){ve.msg="incorrect data check",Y.mode=V;break}Te=0,Be=0}Y.mode=we;case we:if(Y.wrap&&Y.flags){for(;Be<32;){if(je===0)break e;je--,Te+=Me[O++]<<Be,Be+=8}if(Te!==(Y.total&4294967295)){ve.msg="incorrect length check",Y.mode=V;break}Te=0,Be=0}Y.mode=xe;case xe:Dr=d;break e;case V:Dr=v;break e;case B:return w;case se:default:return b}return ve.next_out=Pe,ve.avail_out=de,ve.next_in=O,ve.avail_in=je,Y.hold=Te,Y.bits=Be,(Y.wsize||ue!==ve.avail_out&&Y.mode<V&&(Y.mode<oe||Ie!==u))&&J(ve,ve.output,ve.next_out,ue-ve.avail_out),ut-=ve.avail_in,ue-=ve.avail_out,ve.total_in+=ut,ve.total_out+=ue,Y.total+=ue,Y.wrap&&ue&&(ve.adler=Y.check=Y.flags?t(Y.check,et,ue,ve.next_out-ue):e(Y.check,et,ue,ve.next_out-ue)),ve.data_type=Y.bits+(Y.last?64:0)+(Y.mode===K?128:0)+(Y.mode===j||Y.mode===N?256:0),(ut===0&&ue===0||Ie===u)&&Dr===h&&(Dr=y),Dr}function ae(ve){if(!ve||!ve.state)return b;var Ie=ve.state;return Ie.window&&(Ie.window=null),ve.state=null,h}function fe(ve,Ie){var Y;return!ve||!ve.state||(Y=ve.state,(Y.wrap&2)===0)?b:(Y.head=Ie,Ie.done=!1,h)}function Ee(ve,Ie){var Y=Ie.length,Me,et,O;return!ve||!ve.state||(Me=ve.state,Me.wrap!==0&&Me.mode!==$)?b:Me.mode===$&&(et=1,et=e(et,Ie,Y,0),et!==Me.check)?v:(O=J(ve,Ie,Y,Y),O?(Me.mode=B,w):(Me.havedict=1,h))}return ss.inflateReset=Oe,ss.inflateReset2=Ve,ss.inflateResetKeep=ke,ss.inflateInit=tt,ss.inflateInit2=Je,ss.inflate=D,ss.inflateEnd=ae,ss.inflateGetHeader=fe,ss.inflateSetDictionary=Ee,ss.inflateInfo="pako inflate (from Nodeca project)",ss}function i7(){return xk||(xk=!0,o1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),o1}function s7(){if(Sk)return Qe;Sk=!0;var r=fn().Buffer,e=zr,t=pt,n=Z9(),i=e7(),o=n7(),s=i7();for(var a in s)Qe[a]=s[a];Qe.NONE=0,Qe.DEFLATE=1,Qe.INFLATE=2,Qe.GZIP=3,Qe.GUNZIP=4,Qe.DEFLATERAW=5,Qe.INFLATERAW=6,Qe.UNZIP=7;var u=31,c=139;function f(h){if(typeof h!="number"||h<Qe.DEFLATE||h>Qe.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=h,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}return f.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,t(this.init_done,"close before init"),t(this.mode<=Qe.UNZIP),this.mode===Qe.DEFLATE||this.mode===Qe.GZIP||this.mode===Qe.DEFLATERAW?i.deflateEnd(this.strm):(this.mode===Qe.INFLATE||this.mode===Qe.GUNZIP||this.mode===Qe.INFLATERAW||this.mode===Qe.UNZIP)&&o.inflateEnd(this.strm),this.mode=Qe.NONE,this.dictionary=null},f.prototype.write=function(h,d,m,b,v,w,y){return this._write(!0,h,d,m,b,v,w,y)},f.prototype.writeSync=function(h,d,m,b,v,w,y){return this._write(!1,h,d,m,b,v,w,y)},f.prototype._write=function(h,d,m,b,v,w,y,_){if(t.equal(arguments.length,8),t(this.init_done,"write before init"),t(this.mode!==Qe.NONE,"already finalized"),t.equal(!1,this.write_in_progress,"write already in progress"),t.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,t.equal(!1,d===void 0,"must provide flush value"),this.write_in_progress=!0,d!==Qe.Z_NO_FLUSH&&d!==Qe.Z_PARTIAL_FLUSH&&d!==Qe.Z_SYNC_FLUSH&&d!==Qe.Z_FULL_FLUSH&&d!==Qe.Z_FINISH&&d!==Qe.Z_BLOCK)throw new Error("Invalid flush value");if(m==null&&(m=r.alloc(0),v=0,b=0),this.strm.avail_in=v,this.strm.input=m,this.strm.next_in=b,this.strm.avail_out=_,this.strm.output=w,this.strm.next_out=y,this.flush=d,!h)return this._process(),this._checkError()?this._afterSync():void 0;var E=this;return e.nextTick(function(){E._process(),E._after()}),this},f.prototype._afterSync=function(){var h=this.strm.avail_out,d=this.strm.avail_in;return this.write_in_progress=!1,[d,h]},f.prototype._process=function(){var h=null;switch(this.mode){case Qe.DEFLATE:case Qe.GZIP:case Qe.DEFLATERAW:this.err=i.deflate(this.strm,this.flush);break;case Qe.UNZIP:switch(this.strm.avail_in>0&&(h=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(h===null)break;if(this.strm.input[h]===u){if(this.gzip_id_bytes_read=1,h++,this.strm.avail_in===1)break}else{this.mode=Qe.INFLATE;break}case 1:if(h===null)break;this.strm.input[h]===c?(this.gzip_id_bytes_read=2,this.mode=Qe.GUNZIP):this.mode=Qe.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case Qe.INFLATE:case Qe.GUNZIP:case Qe.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===Qe.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===Qe.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===Qe.Z_DATA_ERROR&&(this.err=Qe.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===Qe.GUNZIP&&this.err===Qe.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},f.prototype._checkError=function(){switch(this.err){case Qe.Z_OK:case Qe.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===Qe.Z_FINISH)return this._error("unexpected end of file"),!1;break;case Qe.Z_STREAM_END:break;case Qe.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},f.prototype._after=function(){if(this._checkError()){var h=this.strm.avail_out,d=this.strm.avail_in;this.write_in_progress=!1,this.callback(d,h),this.pending_close&&this.close()}},f.prototype._error=function(h){this.strm.msg&&(h=this.strm.msg),this.onerror(h,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},f.prototype.init=function(h,d,m,b,v){t(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),t(h>=8&&h<=15,"invalid windowBits"),t(d>=-1&&d<=9,"invalid compression level"),t(m>=1&&m<=9,"invalid memlevel"),t(b===Qe.Z_FILTERED||b===Qe.Z_HUFFMAN_ONLY||b===Qe.Z_RLE||b===Qe.Z_FIXED||b===Qe.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(d,h,m,b,v),this._setDictionary()},f.prototype.params=function(){throw new Error("deflateParams Not supported")},f.prototype.reset=function(){this._reset(),this._setDictionary()},f.prototype._init=function(h,d,m,b,v){switch(this.level=h,this.windowBits=d,this.memLevel=m,this.strategy=b,this.flush=Qe.Z_NO_FLUSH,this.err=Qe.Z_OK,(this.mode===Qe.GZIP||this.mode===Qe.GUNZIP)&&(this.windowBits+=16),this.mode===Qe.UNZIP&&(this.windowBits+=32),(this.mode===Qe.DEFLATERAW||this.mode===Qe.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case Qe.DEFLATE:case Qe.GZIP:case Qe.DEFLATERAW:this.err=i.deflateInit2(this.strm,this.level,Qe.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case Qe.INFLATE:case Qe.GUNZIP:case Qe.INFLATERAW:case Qe.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==Qe.Z_OK&&this._error("Init error"),this.dictionary=v,this.write_in_progress=!1,this.init_done=!0},f.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=Qe.Z_OK,this.mode){case Qe.DEFLATE:case Qe.DEFLATERAW:this.err=i.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==Qe.Z_OK&&this._error("Failed to set dictionary")}},f.prototype._reset=function(){switch(this.err=Qe.Z_OK,this.mode){case Qe.DEFLATE:case Qe.DEFLATERAW:case Qe.GZIP:this.err=i.deflateReset(this.strm);break;case Qe.INFLATE:case Qe.INFLATERAW:case Qe.GUNZIP:this.err=o.inflateReset(this.strm);break}this.err!==Qe.Z_OK&&this._error("Failed to reset stream")},Qe.Zlib=f,Qe}function o7(){if(Tk)return ht;Tk=!0;var r=zr,e=fn().Buffer,t=ii.Transform,n=s7(),i=ze,o=pt.ok,s=fn().kMaxLength,a="Cannot create final Buffer. It would be larger than 0x"+s.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16*1024,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(n),c=0;c<u.length;c++){var f=u[c];f.match(/^Z/)&&Object.defineProperty(ht,f,{enumerable:!0,value:n[f],writable:!1})}for(var h={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},d=Object.keys(h),m=0;m<d.length;m++){var b=d[m];h[h[b]]=b}Object.defineProperty(ht,"codes",{enumerable:!0,value:Object.freeze(h),writable:!1}),ht.Deflate=y,ht.Inflate=_,ht.Gzip=E,ht.Gunzip=S,ht.DeflateRaw=A,ht.InflateRaw=F,ht.Unzip=I,ht.createDeflate=function(L){return new y(L)},ht.createInflate=function(L){return new _(L)},ht.createDeflateRaw=function(L){return new A(L)},ht.createInflateRaw=function(L){return new F(L)},ht.createGzip=function(L){return new E(L)},ht.createGunzip=function(L){return new S(L)},ht.createUnzip=function(L){return new I(L)},ht.deflate=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new y($),L,K)},ht.deflateSync=function(L,$){return w(new y($),L)},ht.gzip=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new E($),L,K)},ht.gzipSync=function(L,$){return w(new E($),L)},ht.deflateRaw=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new A($),L,K)},ht.deflateRawSync=function(L,$){return w(new A($),L)},ht.unzip=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new I($),L,K)},ht.unzipSync=function(L,$){return w(new I($),L)},ht.inflate=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new _($),L,K)},ht.inflateSync=function(L,$){return w(new _($),L)},ht.gunzip=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new S($),L,K)},ht.gunzipSync=function(L,$){return w(new S($),L)},ht.inflateRaw=function(L,$,K){return typeof $=="function"&&(K=$,$={}),v(new F($),L,K)},ht.inflateRawSync=function(L,$){return w(new F($),L)};function v(L,$,K){var le=[],te=0;L.on("error",x),L.on("end",P),L.end($),N();function N(){for(var C;(C=L.read())!==null;)le.push(C),te+=C.length;L.once("readable",N)}function x(C){L.removeListener("end",P),L.removeListener("readable",N),K(C)}function P(){var C,U=null;te>=s?U=new RangeError(a):C=e.concat(le,te),le=[],L.close(),K(U,C)}}function w(L,$){if(typeof $=="string"&&($=e.from($)),!e.isBuffer($))throw new TypeError("Not a string or buffer");var K=L._finishFlushFlag;return L._processChunk($,K)}function y(L){if(!(this instanceof y))return new y(L);Z.call(this,L,n.DEFLATE)}function _(L){if(!(this instanceof _))return new _(L);Z.call(this,L,n.INFLATE)}function E(L){if(!(this instanceof E))return new E(L);Z.call(this,L,n.GZIP)}function S(L){if(!(this instanceof S))return new S(L);Z.call(this,L,n.GUNZIP)}function A(L){if(!(this instanceof A))return new A(L);Z.call(this,L,n.DEFLATERAW)}function F(L){if(!(this instanceof F))return new F(L);Z.call(this,L,n.INFLATERAW)}function I(L){if(!(this instanceof I))return new I(L);Z.call(this,L,n.UNZIP)}function X(L){return L===n.Z_NO_FLUSH||L===n.Z_PARTIAL_FLUSH||L===n.Z_SYNC_FLUSH||L===n.Z_FULL_FLUSH||L===n.Z_FINISH||L===n.Z_BLOCK}function Z(L,$){var K=this;if(this._opts=L=L||{},this._chunkSize=L.chunkSize||ht.Z_DEFAULT_CHUNK,t.call(this,L),L.flush&&!X(L.flush))throw new Error("Invalid flush flag: "+L.flush);if(L.finishFlush&&!X(L.finishFlush))throw new Error("Invalid flush flag: "+L.finishFlush);if(this._flushFlag=L.flush||n.Z_NO_FLUSH,this._finishFlushFlag=typeof L.finishFlush<"u"?L.finishFlush:n.Z_FINISH,L.chunkSize&&(L.chunkSize<ht.Z_MIN_CHUNK||L.chunkSize>ht.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+L.chunkSize);if(L.windowBits&&(L.windowBits<ht.Z_MIN_WINDOWBITS||L.windowBits>ht.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+L.windowBits);if(L.level&&(L.level<ht.Z_MIN_LEVEL||L.level>ht.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+L.level);if(L.memLevel&&(L.memLevel<ht.Z_MIN_MEMLEVEL||L.memLevel>ht.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+L.memLevel);if(L.strategy&&L.strategy!=ht.Z_FILTERED&&L.strategy!=ht.Z_HUFFMAN_ONLY&&L.strategy!=ht.Z_RLE&&L.strategy!=ht.Z_FIXED&&L.strategy!=ht.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+L.strategy);if(L.dictionary&&!e.isBuffer(L.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib($);var le=this;this._hadError=!1,this._handle.onerror=function(x,P){H(le),le._hadError=!0;var C=new Error(x);C.errno=P,C.code=ht.codes[P],le.emit("error",C)};var te=ht.Z_DEFAULT_COMPRESSION;typeof L.level=="number"&&(te=L.level);var N=ht.Z_DEFAULT_STRATEGY;typeof L.strategy=="number"&&(N=L.strategy),this._handle.init(L.windowBits||ht.Z_DEFAULT_WINDOWBITS,te,L.memLevel||ht.Z_DEFAULT_MEMLEVEL,N,L.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=te,this._strategy=N,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!K._handle},configurable:!0,enumerable:!0})}i.inherits(Z,t),Z.prototype.params=function(L,$,K){if(L<ht.Z_MIN_LEVEL||L>ht.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+L);if($!=ht.Z_FILTERED&&$!=ht.Z_HUFFMAN_ONLY&&$!=ht.Z_RLE&&$!=ht.Z_FIXED&&$!=ht.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+$);if(this._level!==L||this._strategy!==$){var le=this;this.flush(n.Z_SYNC_FLUSH,function(){o(le._handle,"zlib binding closed"),le._handle.params(L,$),le._hadError||(le._level=L,le._strategy=$,K&&K())})}else r.nextTick(K)},Z.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},Z.prototype._flush=function(L){this._transform(e.alloc(0),"",L)},Z.prototype.flush=function(L,$){var K=this,le=this._writableState;(typeof L=="function"||L===void 0&&!$)&&($=L,L=n.Z_FULL_FLUSH),le.ended?$&&r.nextTick($):le.ending?$&&this.once("end",$):le.needDrain?$&&this.once("drain",function(){return K.flush(L,$)}):(this._flushFlag=L,this.write(e.alloc(0),"",$))},Z.prototype.close=function(L){H(this,L),r.nextTick(ne,this)};function H(L,$){$&&r.nextTick($),L._handle&&(L._handle.close(),L._handle=null)}function ne(L){L.emit("close")}return Z.prototype._transform=function(L,$,K){var le,te=this._writableState,N=te.ending||te.ended,x=N&&(!L||te.length===L.length);if(L!==null&&!e.isBuffer(L))return K(new Error("invalid input"));if(!this._handle)return K(new Error("zlib binding closed"));x?le=this._finishFlushFlag:(le=this._flushFlag,L.length>=te.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),this._processChunk(L,le,K)},Z.prototype._processChunk=function(L,$,K){var le=L&&L.length,te=this._chunkSize-this._offset,N=0,x=this,P=typeof K=="function";if(!P){var C=[],U=0,j;this.on("error",function(re){j=re}),o(this._handle,"zlib binding closed");do var M=this._handle.writeSync($,L,N,le,this._buffer,this._offset,te);while(!this._hadError&&_e(M[0],M[1]));if(this._hadError)throw j;if(U>=s)throw H(this),new RangeError(a);var Q=e.concat(C,U);return H(this),Q}o(this._handle,"zlib binding closed");var ce=this._handle.write($,L,N,le,this._buffer,this._offset,te);ce.buffer=L,ce.callback=_e;function _e(re,W){if(this&&(this.buffer=null,this.callback=null),!x._hadError){var oe=te-W;if(o(oe>=0,"have should not go down"),oe>0){var we=x._buffer.slice(x._offset,x._offset+oe);x._offset+=oe,P?x.push(we):(C.push(we),U+=we.length)}if((W===0||x._offset>=x._chunkSize)&&(te=x._chunkSize,x._offset=0,x._buffer=e.allocUnsafe(x._chunkSize)),W===0){if(N+=le-re,le=re,!P)return!0;var xe=x._handle.write($,L,N,le,x._buffer,x._offset,x._chunkSize);xe.callback=_e,xe.buffer=L;return}if(!P)return!1;K()}}},i.inherits(y,Z),i.inherits(_,Z),i.inherits(E,Z),i.inherits(S,Z),i.inherits(A,Z),i.inherits(F,Z),i.inherits(I,Z),ht}var e1,pk,Pn,gk,Xu,mk,t1,yk,r1,bk,n1,wk,Ns,vk,i1,_k,s1,Ek,ss,Ak,o1,xk,Qe,Sk,ht,Tk,Ye,a7,l7,u7,c7,f7,h7,d7,p7,g7,m7,y7,b7,w7,v7,_7,E7,A7,x7,S7,T7,C7,R7,D7,I7,O7,N7,k7,L7,P7,M7,B7,F7,U7,j7,$7,z7,W7,q7,H7,G7,V7,Y7,X7,K7,Z7,J7,Q7,ez,tz,rz,nz,iz,sz,oz,az,lz,uz,cz,fz,hz,dz,pz,gz,mz,yz,bz,wz,vz,_z,Ik=Jt(()=>{Ce();De();Re();Ff();PE();W_();Mu();q0();cl();V0();Xf();tb();qf();e1={},pk=!1;Pn={},gk=!1;Xu={},mk=!1;t1={},yk=!1;r1={},bk=!1;n1={},wk=!1;Ns={},vk=!1;i1={},_k=!1;s1={},Ek=!1;ss={},Ak=!1;o1={},xk=!1;Qe={},Sk=!1;ht={},Tk=!1;Ye=o7();Ye.codes;Ye.Deflate;Ye.Inflate;Ye.Gzip;Ye.Gunzip;Ye.DeflateRaw;Ye.InflateRaw;Ye.Unzip;Ye.createDeflate;Ye.createInflate;Ye.createDeflateRaw;Ye.createInflateRaw;Ye.createGzip;Ye.createGunzip;Ye.createUnzip;Ye.deflate;Ye.deflateSync;Ye.gzip;Ye.gzipSync;Ye.deflateRaw;Ye.deflateRawSync;Ye.unzip;Ye.unzipSync;Ye.inflate;Ye.inflateSync;Ye.gunzip;Ye.gunzipSync;Ye.inflateRaw;Ye.inflateRawSync;a7=Ye.Deflate,l7=Ye.DeflateRaw,u7=Ye.Gunzip,c7=Ye.Gzip,f7=Ye.Inflate,h7=Ye.InflateRaw,d7=Ye.Unzip,p7=Ye.Z_BEST_COMPRESSION,g7=Ye.Z_BEST_SPEED,m7=Ye.Z_BINARY,y7=Ye.Z_BLOCK,b7=Ye.Z_BUF_ERROR,w7=Ye.Z_DATA_ERROR,v7=Ye.Z_DEFAULT_CHUNK,_7=Ye.Z_DEFAULT_COMPRESSION,E7=Ye.Z_DEFAULT_LEVEL,A7=Ye.Z_DEFAULT_MEMLEVEL,x7=Ye.Z_DEFAULT_STRATEGY,S7=Ye.Z_DEFAULT_WINDOWBITS,T7=Ye.Z_DEFLATED,C7=Ye.Z_ERRNO,R7=Ye.Z_FILTERED,D7=Ye.Z_FINISH,I7=Ye.Z_FIXED,O7=Ye.Z_FULL_FLUSH,N7=Ye.Z_HUFFMAN_ONLY,k7=Ye.Z_MAX_CHUNK,L7=Ye.Z_MAX_LEVEL,P7=Ye.Z_MAX_MEMLEVEL,M7=Ye.Z_MAX_WINDOWBITS,B7=Ye.Z_MIN_CHUNK,F7=Ye.Z_MIN_LEVEL,U7=Ye.Z_MIN_MEMLEVEL,j7=Ye.Z_MIN_WINDOWBITS,$7=Ye.Z_NEED_DICT,z7=Ye.Z_NO_COMPRESSION,W7=Ye.Z_NO_FLUSH,q7=Ye.Z_OK,H7=Ye.Z_PARTIAL_FLUSH,G7=Ye.Z_RLE,V7=Ye.Z_STREAM_END,Y7=Ye.Z_STREAM_ERROR,X7=Ye.Z_SYNC_FLUSH,K7=Ye.Z_TEXT,Z7=Ye.Z_TREES,J7=Ye.Z_UNKNOWN,Q7=Ye.Zlib,ez=Ye.codes,tz=Ye.createDeflate,rz=Ye.createDeflateRaw,nz=Ye.createGunzip,iz=Ye.createGzip,sz=Ye.createInflate,oz=Ye.createInflateRaw,az=Ye.createUnzip,lz=Ye.deflate,uz=Ye.deflateRaw,cz=Ye.deflateRawSync,fz=Ye.deflateSync,hz=Ye.gunzip,dz=Ye.gunzipSync,pz=Ye.gzip,gz=Ye.gzipSync,mz=Ye.inflate,yz=Ye.inflateRaw,bz=Ye.inflateRawSync,wz=Ye.inflateSync,vz=Ye.unzip,_z=Ye.unzipSync});function Nk(){return Ok||(Ok=!0,typeof Object.create=="function"?kb=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:kb=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),kb}var kb,Ok,a1=Jt(()=>{Ce();De();Re();kb={},Ok=!1});var lg={};jo(lg,{TextDecoder:()=>sW,TextEncoder:()=>iW,_extend:()=>Lz,callbackify:()=>Pz,debuglog:()=>Mz,default:()=>gt,deprecate:()=>Bz,format:()=>Fz,inherits:()=>Uz,inspect:()=>jz,isArray:()=>$z,isBoolean:()=>zz,isBuffer:()=>Wz,isDate:()=>qz,isError:()=>Hz,isFunction:()=>Gz,isNull:()=>Vz,isNullOrUndefined:()=>Yz,isNumber:()=>Xz,isObject:()=>Kz,isPrimitive:()=>Zz,isRegExp:()=>Jz,isString:()=>Qz,isSymbol:()=>eW,isUndefined:()=>tW,log:()=>rW,promisify:()=>Lb,types:()=>nW});function b1(){if(kk)return l1;kk=!0;var r=i2();return l1=function(){return r()&&!!Symbol.toStringTag},l1}function Ez(){if(Lk)return u1;Lk=!0;var r=b1()(),e=jp(),t=e("Object.prototype.toString"),n=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:t(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&t(a)!=="[object Array]"&&t(a.callee)==="[object Function]"},o=(function(){return n(arguments)})();return n.isLegacyArguments=i,u1=o?n:i,u1}function Az(){if(Pk)return c1;Pk=!0;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=b1()(),i=Object.getPrototypeOf,o=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},s;return c1=function(u){if(typeof u!="function")return!1;if(t.test(e.call(u)))return!0;if(!n){var c=r.call(u);return c==="[object GeneratorFunction]"}if(!i)return!1;if(typeof s>"u"){var f=o();s=f?i(f):!1}return i(u)===s},c1}function xz(){if(Mk)return f1;Mk=!0;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(_){_!==n&&(e=null)}else e=null;var i=/^\s*class\b/,o=function(E){try{var S=r.call(E);return i.test(S)}catch{return!1}},s=function(E){try{return o(E)?!1:(r.call(E),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",c="[object Function]",f="[object GeneratorFunction]",h="[object HTMLAllCollection]",d="[object HTML document.all class]",m="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),w=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(w=function(E){if((v||!E)&&(typeof E>"u"||typeof E=="object"))try{var S=a.call(E);return(S===h||S===d||S===m||S===u)&&E("")==null}catch{}return!1})}return f1=e?function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;try{e(E,null,t)}catch(S){if(S!==n)return!1}return!o(E)&&s(E)}:function(E){if(w(E))return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;if(b)return s(E);if(o(E))return!1;var S=a.call(E);return S!==c&&S!==f&&!/^\[object HTML/.test(S)?!1:s(E)},f1}function Sz(){if(Bk)return h1;Bk=!0;var r=xz(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(u,c,f){for(var h=0,d=u.length;h<d;h++)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},i=function(u,c,f){for(var h=0,d=u.length;h<d;h++)f==null?c(u.charAt(h),h,u):c.call(f,u.charAt(h),h,u)},o=function(u,c,f){for(var h in u)t.call(u,h)&&(f==null?c(u[h],h,u):c.call(f,u[h],h,u))},s=function(u,c,f){if(!r(c))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=f),e.call(u)==="[object Array]"?n(u,c,h):typeof u=="string"?i(u,c,h):o(u,c,h)};return h1=s,h1}function Tz(){return Fk||(Fk=!0,d1=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),d1}function Rz(){if(Uk)return p1;Uk=!0;var r=Tz(),e=typeof globalThis>"u"?Cz:globalThis;return p1=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},p1}function Hk(){if(jk)return g1;jk=!0;var r=Sz(),e=Rz(),t=a2(),n=jp(),i=rb(),o=n("Object.prototype.toString"),s=b1()(),a=typeof globalThis>"u"?Dz:globalThis,u=e(),c=n("String.prototype.slice"),f=Object.getPrototypeOf,h=n("Array.prototype.indexOf",!0)||function(w,y){for(var _=0;_<w.length;_+=1)if(w[_]===y)return _;return-1},d={__proto__:null};s&&i&&f?r(u,function(v){var w=new a[v];if(Symbol.toStringTag in w){var y=f(w),_=i(y,Symbol.toStringTag);if(!_){var E=f(y);_=i(E,Symbol.toStringTag)}d["$"+v]=t(_.get)}}):r(u,function(v){var w=new a[v],y=w.slice||w.set;y&&(d["$"+v]=t(y))});var m=function(w){var y=!1;return r(d,function(_,E){if(!y)try{"$"+_(w)===E&&(y=c(E,1))}catch{}}),y},b=function(w){var y=!1;return r(d,function(_,E){if(!y)try{_(w),y=c(E,1)}catch{}}),y};return g1=function(w){if(!w||typeof w!="object")return!1;if(!s){var y=c(o(w),8,-1);return h(u,y)>-1?y:y!=="Object"?!1:b(w)}return i?m(w):null},g1}function Iz(){if($k)return m1;$k=!0;var r=Hk();return m1=function(t){return!!r(t)},m1}function Oz(){if(zk)return Dt;zk=!0;var r=Ez(),e=Az(),t=Hk(),n=Iz();function i(pe){return pe.call.bind(pe)}var o=typeof BigInt<"u",s=typeof Symbol<"u",a=i(Object.prototype.toString),u=i(Number.prototype.valueOf),c=i(String.prototype.valueOf),f=i(Boolean.prototype.valueOf);if(o)var h=i(BigInt.prototype.valueOf);if(s)var d=i(Symbol.prototype.valueOf);function m(pe,Ae){if(typeof pe!="object")return!1;try{return Ae(pe),!0}catch{return!1}}Dt.isArgumentsObject=r,Dt.isGeneratorFunction=e,Dt.isTypedArray=n;function b(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}Dt.isPromise=b;function v(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):n(pe)||j(pe)}Dt.isArrayBufferView=v;function w(pe){return t(pe)==="Uint8Array"}Dt.isUint8Array=w;function y(pe){return t(pe)==="Uint8ClampedArray"}Dt.isUint8ClampedArray=y;function _(pe){return t(pe)==="Uint16Array"}Dt.isUint16Array=_;function E(pe){return t(pe)==="Uint32Array"}Dt.isUint32Array=E;function S(pe){return t(pe)==="Int8Array"}Dt.isInt8Array=S;function A(pe){return t(pe)==="Int16Array"}Dt.isInt16Array=A;function F(pe){return t(pe)==="Int32Array"}Dt.isInt32Array=F;function I(pe){return t(pe)==="Float32Array"}Dt.isFloat32Array=I;function X(pe){return t(pe)==="Float64Array"}Dt.isFloat64Array=X;function Z(pe){return t(pe)==="BigInt64Array"}Dt.isBigInt64Array=Z;function H(pe){return t(pe)==="BigUint64Array"}Dt.isBigUint64Array=H;function ne(pe){return a(pe)==="[object Map]"}ne.working=typeof Map<"u"&&ne(new Map);function L(pe){return typeof Map>"u"?!1:ne.working?ne(pe):pe instanceof Map}Dt.isMap=L;function $(pe){return a(pe)==="[object Set]"}$.working=typeof Set<"u"&&$(new Set);function K(pe){return typeof Set>"u"?!1:$.working?$(pe):pe instanceof Set}Dt.isSet=K;function le(pe){return a(pe)==="[object WeakMap]"}le.working=typeof WeakMap<"u"&&le(new WeakMap);function te(pe){return typeof WeakMap>"u"?!1:le.working?le(pe):pe instanceof WeakMap}Dt.isWeakMap=te;function N(pe){return a(pe)==="[object WeakSet]"}N.working=typeof WeakSet<"u"&&N(new WeakSet);function x(pe){return N(pe)}Dt.isWeakSet=x;function P(pe){return a(pe)==="[object ArrayBuffer]"}P.working=typeof ArrayBuffer<"u"&&P(new ArrayBuffer);function C(pe){return typeof ArrayBuffer>"u"?!1:P.working?P(pe):pe instanceof ArrayBuffer}Dt.isArrayBuffer=C;function U(pe){return a(pe)==="[object DataView]"}U.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&U(new DataView(new ArrayBuffer(1),0,1));function j(pe){return typeof DataView>"u"?!1:U.working?U(pe):pe instanceof DataView}Dt.isDataView=j;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(pe){return a(pe)==="[object SharedArrayBuffer]"}function ce(pe){return typeof M>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new M)),Q.working?Q(pe):pe instanceof M)}Dt.isSharedArrayBuffer=ce;function _e(pe){return a(pe)==="[object AsyncFunction]"}Dt.isAsyncFunction=_e;function re(pe){return a(pe)==="[object Map Iterator]"}Dt.isMapIterator=re;function W(pe){return a(pe)==="[object Set Iterator]"}Dt.isSetIterator=W;function oe(pe){return a(pe)==="[object Generator]"}Dt.isGeneratorObject=oe;function we(pe){return a(pe)==="[object WebAssembly.Module]"}Dt.isWebAssemblyCompiledModule=we;function xe(pe){return m(pe,u)}Dt.isNumberObject=xe;function V(pe){return m(pe,c)}Dt.isStringObject=V;function B(pe){return m(pe,f)}Dt.isBooleanObject=B;function se(pe){return o&&m(pe,h)}Dt.isBigIntObject=se;function ge(pe){return s&&m(pe,d)}Dt.isSymbolObject=ge;function Se(pe){return xe(pe)||V(pe)||B(pe)||se(pe)||ge(pe)}Dt.isBoxedPrimitive=Se;function be(pe){return typeof Uint8Array<"u"&&(C(pe)||ce(pe))}return Dt.isAnyArrayBuffer=be,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(Dt,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})}),Dt}function Nz(){return Wk||(Wk=!0,y1=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),y1}function kz(){if(qk)return It;qk=!0;var r=zr,e=Object.getOwnPropertyDescriptors||function(M){for(var Q=Object.keys(M),ce={},_e=0;_e<Q.length;_e++)ce[Q[_e]]=Object.getOwnPropertyDescriptor(M,Q[_e]);return ce},t=/%[sdj%]/g;It.format=function(j){if(!A(j)){for(var M=[],Q=0;Q<arguments.length;Q++)M.push(s(arguments[Q]));return M.join(" ")}for(var Q=1,ce=arguments,_e=ce.length,re=String(j).replace(t,function(oe){if(oe==="%%")return"%";if(Q>=_e)return oe;switch(oe){case"%s":return String(ce[Q++]);case"%d":return Number(ce[Q++]);case"%j":try{return JSON.stringify(ce[Q++])}catch{return"[Circular]"}default:return oe}}),W=ce[Q];Q<_e;W=ce[++Q])_(W)||!Z(W)?re+=" "+W:re+=" "+s(W);return re},It.deprecate=function(j,M){if(typeof r<"u"&&r.noDeprecation===!0)return j;if(typeof r>"u")return function(){return It.deprecate(j,M).apply(this||ag,arguments)};var Q=!1;function ce(){if(!Q){if(r.throwDeprecation)throw new Error(M);r.traceDeprecation?console.trace(M):console.error(M),Q=!0}return j.apply(this||ag,arguments)}return ce};var n={},i=/^$/;if(r.env.NODE_DEBUG){var o=r.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i")}It.debuglog=function(j){if(j=j.toUpperCase(),!n[j])if(i.test(j)){var M=r.pid;n[j]=function(){var Q=It.format.apply(It,arguments);console.error("%s %d: %s",j,M,Q)}}else n[j]=function(){};return n[j]};function s(j,M){var Q={seen:[],stylize:u};return arguments.length>=3&&(Q.depth=arguments[2]),arguments.length>=4&&(Q.colors=arguments[3]),y(M)?Q.showHidden=M:M&&It._extend(Q,M),I(Q.showHidden)&&(Q.showHidden=!1),I(Q.depth)&&(Q.depth=2),I(Q.colors)&&(Q.colors=!1),I(Q.customInspect)&&(Q.customInspect=!0),Q.colors&&(Q.stylize=a),f(Q,j,Q.depth)}It.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(j,M){var Q=s.styles[M];return Q?"\x1B["+s.colors[Q][0]+"m"+j+"\x1B["+s.colors[Q][1]+"m":j}function u(j,M){return j}function c(j){var M={};return j.forEach(function(Q,ce){M[Q]=!0}),M}function f(j,M,Q){if(j.customInspect&&M&&L(M.inspect)&&M.inspect!==It.inspect&&!(M.constructor&&M.constructor.prototype===M)){var ce=M.inspect(Q,j);return A(ce)||(ce=f(j,ce,Q)),ce}var _e=h(j,M);if(_e)return _e;var re=Object.keys(M),W=c(re);if(j.showHidden&&(re=Object.getOwnPropertyNames(M)),ne(M)&&(re.indexOf("message")>=0||re.indexOf("description")>=0))return d(M);if(re.length===0){if(L(M)){var oe=M.name?": "+M.name:"";return j.stylize("[Function"+oe+"]","special")}if(X(M))return j.stylize(RegExp.prototype.toString.call(M),"regexp");if(H(M))return j.stylize(Date.prototype.toString.call(M),"date");if(ne(M))return d(M)}var we="",xe=!1,V=["{","}"];if(w(M)&&(xe=!0,V=["[","]"]),L(M)){var B=M.name?": "+M.name:"";we=" [Function"+B+"]"}if(X(M)&&(we=" "+RegExp.prototype.toString.call(M)),H(M)&&(we=" "+Date.prototype.toUTCString.call(M)),ne(M)&&(we=" "+d(M)),re.length===0&&(!xe||M.length==0))return V[0]+we+V[1];if(Q<0)return X(M)?j.stylize(RegExp.prototype.toString.call(M),"regexp"):j.stylize("[Object]","special");j.seen.push(M);var se;return xe?se=m(j,M,Q,W,re):se=re.map(function(ge){return b(j,M,Q,W,ge,xe)}),j.seen.pop(),v(se,we,V)}function h(j,M){if(I(M))return j.stylize("undefined","undefined");if(A(M)){var Q="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(Q,"string")}if(S(M))return j.stylize(""+M,"number");if(y(M))return j.stylize(""+M,"boolean");if(_(M))return j.stylize("null","null")}function d(j){return"["+Error.prototype.toString.call(j)+"]"}function m(j,M,Q,ce,_e){for(var re=[],W=0,oe=M.length;W<oe;++W)x(M,String(W))?re.push(b(j,M,Q,ce,String(W),!0)):re.push("");return _e.forEach(function(we){we.match(/^\d+$/)||re.push(b(j,M,Q,ce,we,!0))}),re}function b(j,M,Q,ce,_e,re){var W,oe,we;if(we=Object.getOwnPropertyDescriptor(M,_e)||{value:M[_e]},we.get?we.set?oe=j.stylize("[Getter/Setter]","special"):oe=j.stylize("[Getter]","special"):we.set&&(oe=j.stylize("[Setter]","special")),x(ce,_e)||(W="["+_e+"]"),oe||(j.seen.indexOf(we.value)<0?(_(Q)?oe=f(j,we.value,null):oe=f(j,we.value,Q-1),oe.indexOf(`
`)>-1&&(re?oe=oe.split(`
`).map(function(xe){return"  "+xe}).join(`
`).slice(2):oe=`
`+oe.split(`
`).map(function(xe){return"   "+xe}).join(`
`))):oe=j.stylize("[Circular]","special")),I(W)){if(re&&_e.match(/^\d+$/))return oe;W=JSON.stringify(""+_e),W.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(W=W.slice(1,-1),W=j.stylize(W,"name")):(W=W.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),W=j.stylize(W,"string"))}return W+": "+oe}function v(j,M,Q){var ce=j.reduce(function(_e,re){return re.indexOf(`
`)>=0,_e+re.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ce>60?Q[0]+(M===""?"":M+`
 `)+" "+j.join(`,
  `)+" "+Q[1]:Q[0]+M+" "+j.join(", ")+" "+Q[1]}It.types=Oz();function w(j){return Array.isArray(j)}It.isArray=w;function y(j){return typeof j=="boolean"}It.isBoolean=y;function _(j){return j===null}It.isNull=_;function E(j){return j==null}It.isNullOrUndefined=E;function S(j){return typeof j=="number"}It.isNumber=S;function A(j){return typeof j=="string"}It.isString=A;function F(j){return typeof j=="symbol"}It.isSymbol=F;function I(j){return j===void 0}It.isUndefined=I;function X(j){return Z(j)&&K(j)==="[object RegExp]"}It.isRegExp=X,It.types.isRegExp=X;function Z(j){return typeof j=="object"&&j!==null}It.isObject=Z;function H(j){return Z(j)&&K(j)==="[object Date]"}It.isDate=H,It.types.isDate=H;function ne(j){return Z(j)&&(K(j)==="[object Error]"||j instanceof Error)}It.isError=ne,It.types.isNativeError=ne;function L(j){return typeof j=="function"}It.isFunction=L;function $(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||typeof j>"u"}It.isPrimitive=$,It.isBuffer=Nz();function K(j){return Object.prototype.toString.call(j)}function le(j){return j<10?"0"+j.toString(10):j.toString(10)}var te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var j=new Date,M=[le(j.getHours()),le(j.getMinutes()),le(j.getSeconds())].join(":");return[j.getDate(),te[j.getMonth()],M].join(" ")}It.log=function(){console.log("%s - %s",N(),It.format.apply(It,arguments))},It.inherits=Nk(),It._extend=function(j,M){if(!M||!Z(M))return j;for(var Q=Object.keys(M),ce=Q.length;ce--;)j[Q[ce]]=M[Q[ce]];return j};function x(j,M){return Object.prototype.hasOwnProperty.call(j,M)}var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;It.promisify=function(M){if(typeof M!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&M[P]){if(Q=M[P],typeof Q!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Q,P,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Q}function Q(){for(var ce,_e,re=new Promise(function(we,xe){ce=we,_e=xe}),W=[],oe=0;oe<arguments.length;oe++)W.push(arguments[oe]);W.push(function(we,xe){we?_e(we):ce(xe)});try{M.apply(this||ag,W)}catch(we){_e(we)}return re}return Object.setPrototypeOf(Q,Object.getPrototypeOf(M)),P&&Object.defineProperty(Q,P,{value:Q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Q,e(M))},It.promisify.custom=P;function C(j,M){if(!j){var Q=new Error("Promise was rejected with a falsy value");Q.reason=j,j=Q}return M(j)}function U(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');function M(){for(var Q=[],ce=0;ce<arguments.length;ce++)Q.push(arguments[ce]);var _e=Q.pop();if(typeof _e!="function")throw new TypeError("The last argument must be of type Function");var re=this||ag,W=function(){return _e.apply(re,arguments)};j.apply(this||ag,Q).then(function(oe){r.nextTick(W.bind(null,null,oe))},function(oe){r.nextTick(C.bind(null,oe,W))})}return Object.setPrototypeOf(M,Object.getPrototypeOf(j)),Object.defineProperties(M,e(j)),M}return It.callbackify=U,It}var l1,kk,u1,Lk,c1,Pk,f1,Mk,h1,Bk,d1,Fk,p1,Uk,Cz,g1,jk,Dz,m1,$k,Dt,zk,y1,Wk,It,qk,ag,gt,Lz,Pz,Mz,Bz,Fz,Uz,jz,$z,zz,Wz,qz,Hz,Gz,Vz,Yz,Xz,Kz,Zz,Jz,Qz,eW,tW,rW,Lb,nW,iW,sW,yh=Jt(()=>{Ce();De();Re();$p();a1();Mu();l1={},kk=!1;u1={},Lk=!1;c1={},Pk=!1;f1={},Mk=!1;h1={},Bk=!1;d1={},Fk=!1;p1={},Uk=!1,Cz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;g1={},jk=!1,Dz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;m1={},$k=!1;Dt={},zk=!1;y1={},Wk=!1;It={},qk=!1,ag=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;gt=kz();gt.format;gt.deprecate;gt.debuglog;gt.inspect;gt.types;gt.isArray;gt.isBoolean;gt.isNull;gt.isNullOrUndefined;gt.isNumber;gt.isString;gt.isSymbol;gt.isUndefined;gt.isRegExp;gt.isObject;gt.isDate;gt.isError;gt.isFunction;gt.isPrimitive;gt.isBuffer;gt.log;gt.inherits;gt._extend;gt.promisify;gt.callbackify;Lz=gt._extend,Pz=gt.callbackify,Mz=gt.debuglog,Bz=gt.deprecate,Fz=gt.format,Uz=gt.inherits,jz=gt.inspect,$z=gt.isArray,zz=gt.isBoolean,Wz=gt.isBuffer,qz=gt.isDate,Hz=gt.isError,Gz=gt.isFunction,Vz=gt.isNull,Yz=gt.isNullOrUndefined,Xz=gt.isNumber,Kz=gt.isObject,Zz=gt.isPrimitive,Jz=gt.isRegExp,Qz=gt.isString,eW=gt.isSymbol,tW=gt.isUndefined,rW=gt.log,Lb=gt.promisify,nW=gt.types,iW=gt.TextEncoder=globalThis.TextEncoder,sW=gt.TextDecoder=globalThis.TextDecoder});var ug={};jo(ug,{EventEmitter:()=>aW,default:()=>ao,defaultMaxListeners:()=>lW,init:()=>uW,listenerCount:()=>cW,on:()=>fW,once:()=>hW});function oW(){if(Gk)return Pb;Gk=!0;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(A,F,I){return Function.prototype.apply.call(A,F,I)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:t=function(A){return Object.getOwnPropertyNames(A)};function n(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}Pb=o,Pb.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");s=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||i(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(A){for(var F=[],I=1;I<arguments.length;I++)F.push(arguments[I]);var X=A==="error",Z=this._events;if(Z!==void 0)X=X&&Z.error===void 0;else if(!X)return!1;if(X){var H;if(F.length>0&&(H=F[0]),H instanceof Error)throw H;var ne=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw ne.context=H,ne}var L=Z[A];if(L===void 0)return!1;if(typeof L=="function")e(L,this,F);else for(var $=L.length,K=b(L,$),I=0;I<$;++I)e(K[I],this,F);return!0};function c(S,A,F,I){var X,Z,H;if(a(F),Z=S._events,Z===void 0?(Z=S._events=Object.create(null),S._eventsCount=0):(Z.newListener!==void 0&&(S.emit("newListener",A,F.listener?F.listener:F),Z=S._events),H=Z[A]),H===void 0)H=Z[A]=F,++S._eventsCount;else if(typeof H=="function"?H=Z[A]=I?[F,H]:[H,F]:I?H.unshift(F):H.push(F),X=u(S),X>0&&H.length>X&&!H.warned){H.warned=!0;var ne=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");ne.name="MaxListenersExceededWarning",ne.emitter=S,ne.type=A,ne.count=H.length,n(ne)}return S}o.prototype.addListener=function(A,F){return c(this,A,F,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,F){return c(this,A,F,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(S,A,F){var I={fired:!1,wrapFn:void 0,target:S,type:A,listener:F},X=f.bind(I);return X.listener=F,I.wrapFn=X,X}o.prototype.once=function(A,F){return a(F),this.on(A,h(this,A,F)),this},o.prototype.prependOnceListener=function(A,F){return a(F),this.prependListener(A,h(this,A,F)),this},o.prototype.removeListener=function(A,F){var I,X,Z,H,ne;if(a(F),X=this._events,X===void 0)return this;if(I=X[A],I===void 0)return this;if(I===F||I.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete X[A],X.removeListener&&this.emit("removeListener",A,I.listener||F));else if(typeof I!="function"){for(Z=-1,H=I.length-1;H>=0;H--)if(I[H]===F||I[H].listener===F){ne=I[H].listener,Z=H;break}if(Z<0)return this;Z===0?I.shift():v(I,Z),I.length===1&&(X[A]=I[0]),X.removeListener!==void 0&&this.emit("removeListener",A,ne||F)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var F,I,X;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var Z=Object.keys(I),H;for(X=0;X<Z.length;++X)H=Z[X],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=I[A],typeof F=="function")this.removeListener(A,F);else if(F!==void 0)for(X=F.length-1;X>=0;X--)this.removeListener(A,F[X]);return this};function d(S,A,F){var I=S._events;if(I===void 0)return[];var X=I[A];return X===void 0?[]:typeof X=="function"?F?[X.listener||X]:[X]:F?w(X):b(X,X.length)}o.prototype.listeners=function(A){return d(this,A,!0)},o.prototype.rawListeners=function(A){return d(this,A,!1)},o.listenerCount=function(S,A){return typeof S.listenerCount=="function"?S.listenerCount(A):m.call(S,A)},o.prototype.listenerCount=m;function m(S){var A=this._events;if(A!==void 0){var F=A[S];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(S,A){for(var F=new Array(A),I=0;I<A;++I)F[I]=S[I];return F}function v(S,A){for(;A+1<S.length;A++)S[A]=S[A+1];S.pop()}function w(S){for(var A=new Array(S.length),F=0;F<A.length;++F)A[F]=S[F].listener||S[F];return A}function y(S,A){return new Promise(function(F,I){function X(H){S.removeListener(A,Z),I(H)}function Z(){typeof S.removeListener=="function"&&S.removeListener("error",X),F([].slice.call(arguments))}E(S,A,Z,{once:!0}),A!=="error"&&_(S,X,{once:!0})})}function _(S,A,F){typeof S.on=="function"&&E(S,"error",A,F)}function E(S,A,F,I){if(typeof S.on=="function")I.once?S.once(A,F):S.on(A,F);else if(typeof S.addEventListener=="function")S.addEventListener(A,function X(Z){I.once&&S.removeEventListener(A,X),F(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Pb}var Pb,Gk,ao,aW,lW,uW,cW,fW,hW,bh=Jt(()=>{Ce();De();Re();Pb={},Gk=!1;ao=oW();ao.once;ao.once=function(r,e){return new Promise((t,n)=>{function i(...s){o!==void 0&&r.removeListener("error",o),t(s)}let o;e!=="error"&&(o=s=>{r.removeListener(name,i),n(s)},r.once("error",o)),r.once(e,i)})};ao.on=function(r,e){let t=[],n=[],i=null,o=!1,s={async next(){let c=t.shift();if(c)return createIterResult(c,!1);if(i){let f=Promise.reject(i);return i=null,f}return o?createIterResult(void 0,!0):new Promise((f,h)=>n.push({resolve:f,reject:h}))},async return(){r.removeListener(e,a),r.removeListener("error",u),o=!0;for(let c of n)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){i=c,r.removeListener(e,a),r.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return r.on(e,a),r.on("error",u),s;function a(...c){let f=n.shift();f?f.resolve(createIterResult(c,!1)):t.push(c)}function u(c){o=!0;let f=n.shift();f?f.reject(c):i=c,s.return()}};({EventEmitter:aW,defaultMaxListeners:lW,init:uW,listenerCount:cW,on:fW,once:hW}=ao)});function dW(){if(Vk)return cg;Vk=!0;var r=fn(),e=r.Buffer;function t(i,o){for(var s in i)o[s]=i[s]}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?cg=r:(t(r,cg),cg.Buffer=n);function n(i,o,s){return e(i,o,s)}return n.prototype=Object.create(e.prototype),t(e,n),n.from=function(i,o,s){if(typeof i=="number")throw new TypeError("Argument must not be a number");return e(i,o,s)},n.alloc=function(i,o,s){if(typeof i!="number")throw new TypeError("Argument must be a number");var a=e(i);return o!==void 0?typeof s=="string"?a.fill(o,s):a.fill(o):a.fill(0),a},n.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return e(i)},n.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(i)},cg}function pW(){if(Yk)return w1;Yk=!0;var r=dW().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var _;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(_)return;y=(""+y).toLowerCase(),_=!0}}function n(y){var _=t(y);if(typeof _!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return _||y}w1.StringDecoder=i;function i(y){this.encoding=n(y);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=d,_=4;break;case"utf8":this.fillLast=u,_=4;break;case"base64":this.text=m,this.end=b,_=3;break;default:this.write=v,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(_)}i.prototype.write=function(y){if(y.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(y),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?_?_+this.text(y,E):this.text(y,E):_||""},i.prototype.end=f,i.prototype.text=c,i.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function o(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function s(y,_,E){var S=_.length-1;if(S<E)return 0;var A=o(_[S]);return A>=0?(A>0&&(y.lastNeed=A-1),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(y.lastNeed=A-2),A):--S<E||A===-2?0:(A=o(_[S]),A>=0?(A>0&&(A===2?A=0:y.lastNeed=A-3),A):0))}function a(y,_,E){if((_[0]&192)!==128)return y.lastNeed=0,"\uFFFD";if(y.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return y.lastNeed=1,"\uFFFD";if(y.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return y.lastNeed=2,"\uFFFD"}}function u(y){var _=this.lastTotal-this.lastNeed,E=a(this,y);if(E!==void 0)return E;if(this.lastNeed<=y.length)return y.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,_,0,y.length),this.lastNeed-=y.length}function c(y,_){var E=s(this,y,_);if(!this.lastNeed)return y.toString("utf8",_);this.lastTotal=E;var S=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,S),y.toString("utf8",_,S)}function f(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+"\uFFFD":_}function h(y,_){if((y.length-_)%2===0){var E=y.toString("utf16le",_);if(E){var S=E.charCodeAt(E.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",_,y.length-1)}function d(y){var _=y&&y.length?this.write(y):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function m(y,_){var E=(y.length-_)%3;return E===0?y.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",_,y.length-E))}function b(y){var _=y&&y.length?this.write(y):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(y){return y.toString(this.encoding)}function w(y){return y&&y.length?this.write(y):""}return w1}var cg,Vk,w1,Yk,Mb,HJ,Xk=Jt(()=>{Ce();De();Re();Ff();cg={},Vk=!1;w1={},Yk=!1;Mb=pW();Mb.StringDecoder;HJ=Mb.StringDecoder});var gg={};jo(gg,{Duplex:()=>vW,PassThrough:()=>EW,Readable:()=>U1,Stream:()=>SW,Transform:()=>_W,Writable:()=>wW,default:()=>ur,finished:()=>AW,pipeline:()=>xW,promises:()=>TW});function Nr(){return Kk||(Kk=!0,v1={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,e){return r.includes(e)},ArrayPrototypeIndexOf(r,e){return r.indexOf(e)},ArrayPrototypeJoin(r,e){return r.join(e)},ArrayPrototypeMap(r,e){return r.map(e)},ArrayPrototypePop(r,e){return r.pop(e)},ArrayPrototypePush(r,e){return r.push(e)},ArrayPrototypeSlice(r,e,t){return r.slice(e,t)},Error,FunctionPrototypeCall(r,e,...t){return r.call(e,...t)},FunctionPrototypeSymbolHasInstance(r,e){return Function.prototype[Symbol.hasInstance].call(r,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,e){return Object.defineProperties(r,e)},ObjectDefineProperty(r,e,t){return Object.defineProperty(r,e,t)},ObjectGetOwnPropertyDescriptor(r,e){return Object.getOwnPropertyDescriptor(r,e)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,e){return Object.setPrototypeOf(r,e)},Promise,PromisePrototypeCatch(r,e){return r.catch(e)},PromisePrototypeThen(r,e,t){return r.then(e,t)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,e){return r.test(e)},SafeSet:Set,String,StringPrototypeSlice(r,e,t){return r.slice(e,t)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,e,t){return r.set(e,t)},Boolean,Uint8Array}),v1}function dg(){if(Zk)return fg;Zk=!0;let{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return fg=r,fg.AbortSignal=e,fg.default=r,fg}function Vn(){if(Jk)return Bb;Jk=!0;let r=fn(),{kResistStopPropagation:e,SymbolDispose:t}=Nr(),n=globalThis.AbortSignal||dg().AbortSignal,i=globalThis.AbortController||dg().AbortController,o=Object.getPrototypeOf(async function(){}).constructor,s=globalThis.Blob||r.Blob,a=typeof s<"u"?function(d){return d instanceof s}:function(d){return!1},u=(h,d)=>{if(h!==void 0&&(h===null||typeof h!="object"||!("aborted"in h)))throw new ERR_INVALID_ARG_TYPE(d,"AbortSignal",h)},c=(h,d)=>{if(typeof h!="function")throw new ERR_INVALID_ARG_TYPE(d,"Function",h)};class f extends Error{constructor(d){if(!Array.isArray(d))throw new TypeError(`Expected input to be an Array, got ${typeof d}`);let m="";for(let b=0;b<d.length;b++)m+=`    ${d[b].stack}
`;super(m),this.name="AggregateError",this.errors=d}}return Bb={AggregateError:f,kEmptyObject:Object.freeze({}),once(h){let d=!1;return function(...m){d||(d=!0,h.apply(this,m))}},createDeferredPromise:function(){let h,d;return{promise:new Promise((b,v)=>{h=b,d=v}),resolve:h,reject:d}},promisify(h){return new Promise((d,m)=>{h((b,...v)=>b?m(b):d(...v))})},debuglog(){return function(){}},format(h,...d){return h.replace(/%([sdifj])/g,function(...[m,b]){let v=d.shift();return b==="f"?v.toFixed(6):b==="j"?JSON.stringify(v):b==="s"&&typeof v=="object"?`${v.constructor!==Object?v.constructor.name:""} {}`.trim():v.toString()})},inspect(h){switch(typeof h){case"string":if(h.includes("'"))if(h.includes('"')){if(!h.includes("`")&&!h.includes("${"))return`\`${h}\``}else return`"${h}"`;return`'${h}'`;case"number":return isNaN(h)?"NaN":Object.is(h,-0)?String(h):h;case"bigint":return`${String(h)}n`;case"boolean":case"undefined":return String(h);case"object":return"{}"}},types:{isAsyncFunction(h){return h instanceof o},isArrayBufferView(h){return ArrayBuffer.isView(h)}},isBlob:a,deprecate(h,d){return h},addAbortListener:ao.addAbortListener||function(d,m){if(d===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",d);u(d,"signal"),c(m,"listener");let b;return d.aborted?queueMicrotask(()=>m()):(d.addEventListener("abort",m,{__proto__:null,once:!0,[e]:!0}),b=()=>{d.removeEventListener("abort",m)}),{__proto__:null,[t](){var v;(v=b)===null||v===void 0||v()}}},AbortSignalAny:n.any||function(d){if(d.length===1)return d[0];let m=new i,b=()=>m.abort();return d.forEach(v=>{u(v,"signals"),v.addEventListener("abort",b,{once:!0})}),m.signal.addEventListener("abort",()=>{d.forEach(v=>v.removeEventListener("abort",b))},{once:!0}),m.signal}},Bb.promisify.custom=Symbol.for("nodejs.util.promisify.custom"),Bb}function fi(){if(Qk)return _1;Qk=!0;let{format:r,inspect:e,AggregateError:t}=Vn(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),o=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",u={};function c(w,y){if(!w)throw new u.ERR_INTERNAL_ASSERTION(y)}function f(w){let y="",_=w.length,E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)y=`_${w.slice(_-3,_)}${y}`;return`${w.slice(0,_)}${y}`}function h(w,y,_){if(typeof y=="function")return c(y.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${y.length}).`),y(..._);let E=(y.match(/%[dfijoOs]/g)||[]).length;return c(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?y:r(y,..._)}function d(w,y,_){_||(_=Error);class E extends _{constructor(...A){super(h(w,y,A))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[i]=!0,u[w]=E}function m(w){let y=a+w.name;return Object.defineProperty(w,"name",{value:y}),w}function b(w,y){if(w&&y&&w!==y){if(Array.isArray(y.errors))return y.errors.push(w),y;let _=new n([y,w],y.message);return _.code=y.code,_}return w||y}class v extends Error{constructor(y="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",_);super(y,_),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(w,y,_)=>{c(typeof w=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";let S=[],A=[],F=[];for(let X of y)c(typeof X=="string","All expected entries have to be of type string"),o.includes(X)?S.push(X.toLowerCase()):s.test(X)?A.push(X):(c(X!=="object",'The value "object" should be written as "Object"'),F.push(X));if(A.length>0){let X=S.indexOf("object");X!==-1&&(S.splice(S,X,1),A.push("Object"))}if(S.length>0){switch(S.length){case 1:E+=`of type ${S[0]}`;break;case 2:E+=`one of type ${S[0]} or ${S[1]}`;break;default:{let X=S.pop();E+=`one of type ${S.join(", ")}, or ${X}`}}(A.length>0||F.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{let X=A.pop();E+=`an instance of ${A.join(", ")}, or ${X}`}}F.length>0&&(E+=" or ")}switch(F.length){case 0:break;case 1:F[0].toLowerCase()!==F[0]&&(E+="an "),E+=`${F[0]}`;break;case 2:E+=`one of ${F[0]} or ${F[1]}`;break;default:{let X=F.pop();E+=`one of ${F.join(", ")}, or ${X}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var I;if((I=_.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${_.constructor.name}`;else{let X=e(_,{depth:-1});E+=`. Received ${X}`}}else{let X=e(_,{colors:!1});X.length>25&&(X=`${X.slice(0,25)}...`),E+=`. Received type ${typeof _} (${X})`}return E},TypeError),d("ERR_INVALID_ARG_VALUE",(w,y,_="is invalid")=>{let E=e(y);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(w,y,_)=>{var E;let S=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${y}" function but got ${S}.`},TypeError),d("ERR_MISSING_ARGS",(...w)=>{c(w.length>0,"At least one arg needs to be specified");let y,_=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:y+=`The ${w[0]} argument`;break;case 2:y+=`The ${w[0]} and ${w[1]} arguments`;break;default:{let E=w.pop();y+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${y} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(w,y,_)=>{c(y,'Missing "range" argument');let E;return Number.isInteger(_)&&Math.abs(_)>2**32?E=f(String(_)):typeof _=="bigint"?(E=String(_),(_>2n**32n||_<-(2n**32n))&&(E=f(E)),E+="n"):E=e(_),`The value of "${w}" is out of range. It must be ${y}. Received ${E}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),_1={AbortError:v,aggregateTwoErrors:m(b),hideStackFrames:m,codes:u},_1}function pg(){if(eL)return E1;eL=!0;let{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:o,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:a,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:d,StringPrototypeTrim:m}=Nr(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=fi(),{normalizeEncoding:S}=Vn(),{isAsyncFunction:A,isArrayBufferView:F}=Vn().types,I={};function X(Ae){return Ae===(Ae|0)}function Z(Ae){return Ae===Ae>>>0}let H=/^[0-7]+$/,ne="must be a 32-bit unsigned integer or an octal string";function L(Ae,$e,ke){if(typeof Ae>"u"&&(Ae=ke),typeof Ae=="string"){if(f(H,Ae)===null)throw new y($e,Ae,ne);Ae=u(Ae,8)}return le(Ae,$e),Ae}let $=b((Ae,$e,ke=a,Oe=s)=>{if(typeof Ae!="number")throw new w($e,"number",Ae);if(!i(Ae))throw new _($e,"an integer",Ae);if(Ae<ke||Ae>Oe)throw new _($e,`>= ${ke} && <= ${Oe}`,Ae)}),K=b((Ae,$e,ke=-2147483648,Oe=2147483647)=>{if(typeof Ae!="number")throw new w($e,"number",Ae);if(!i(Ae))throw new _($e,"an integer",Ae);if(Ae<ke||Ae>Oe)throw new _($e,`>= ${ke} && <= ${Oe}`,Ae)}),le=b((Ae,$e,ke=!1)=>{if(typeof Ae!="number")throw new w($e,"number",Ae);if(!i(Ae))throw new _($e,"an integer",Ae);let Oe=ke?1:0,Ve=4294967295;if(Ae<Oe||Ae>Ve)throw new _($e,`>= ${Oe} && <= ${Ve}`,Ae)});function te(Ae,$e){if(typeof Ae!="string")throw new w($e,"string",Ae)}function N(Ae,$e,ke=void 0,Oe){if(typeof Ae!="number")throw new w($e,"number",Ae);if(ke!=null&&Ae<ke||Oe!=null&&Ae>Oe||(ke!=null||Oe!=null)&&o(Ae))throw new _($e,`${ke!=null?`>= ${ke}`:""}${ke!=null&&Oe!=null?" && ":""}${Oe!=null?`<= ${Oe}`:""}`,Ae)}let x=b((Ae,$e,ke)=>{if(!e(ke,Ae)){let Ve="must be one of: "+t(n(ke,Je=>typeof Je=="string"?`'${Je}'`:h(Je)),", ");throw new y($e,Ae,Ve)}});function P(Ae,$e){if(typeof Ae!="boolean")throw new w($e,"boolean",Ae)}function C(Ae,$e,ke){return Ae==null||!c(Ae,$e)?ke:Ae[$e]}let U=b((Ae,$e,ke=null)=>{let Oe=C(ke,"allowArray",!1),Ve=C(ke,"allowFunction",!1);if(!C(ke,"nullable",!1)&&Ae===null||!Oe&&r(Ae)||typeof Ae!="object"&&(!Ve||typeof Ae!="function"))throw new w($e,"Object",Ae)}),j=b((Ae,$e)=>{if(Ae!=null&&typeof Ae!="object"&&typeof Ae!="function")throw new w($e,"a dictionary",Ae)}),M=b((Ae,$e,ke=0)=>{if(!r(Ae))throw new w($e,"Array",Ae);if(Ae.length<ke){let Oe=`must be longer than ${ke}`;throw new y($e,Ae,Oe)}});function Q(Ae,$e){M(Ae,$e);for(let ke=0;ke<Ae.length;ke++)te(Ae[ke],`${$e}[${ke}]`)}function ce(Ae,$e){M(Ae,$e);for(let ke=0;ke<Ae.length;ke++)P(Ae[ke],`${$e}[${ke}]`)}function _e(Ae,$e){M(Ae,$e);for(let ke=0;ke<Ae.length;ke++){let Oe=Ae[ke],Ve=`${$e}[${ke}]`;if(Oe==null)throw new w(Ve,"AbortSignal",Oe);xe(Oe,Ve)}}function re(Ae,$e="signal"){if(te(Ae,$e),I[Ae]===void 0)throw I[d(Ae)]!==void 0?new E(Ae+" (signals must use all capital letters)"):new E(Ae)}let W=b((Ae,$e="buffer")=>{if(!F(Ae))throw new w($e,["Buffer","TypedArray","DataView"],Ae)});function oe(Ae,$e){let ke=S($e),Oe=Ae.length;if(ke==="hex"&&Oe%2!==0)throw new y("encoding",$e,`is invalid for data of length ${Oe}`)}function we(Ae,$e="Port",ke=!0){if(typeof Ae!="number"&&typeof Ae!="string"||typeof Ae=="string"&&m(Ae).length===0||+Ae!==+Ae>>>0||Ae>65535||Ae===0&&!ke)throw new v($e,Ae,ke);return Ae|0}let xe=b((Ae,$e)=>{if(Ae!==void 0&&(Ae===null||typeof Ae!="object"||!("aborted"in Ae)))throw new w($e,"AbortSignal",Ae)}),V=b((Ae,$e)=>{if(typeof Ae!="function")throw new w($e,"Function",Ae)}),B=b((Ae,$e)=>{if(typeof Ae!="function"||A(Ae))throw new w($e,"Function",Ae)}),se=b((Ae,$e)=>{if(Ae!==void 0)throw new w($e,"undefined",Ae)});function ge(Ae,$e,ke){if(!e(ke,Ae))throw new w($e,`('${t(ke,"|")}')`,Ae)}let Se=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function be(Ae,$e){if(typeof Ae>"u"||!f(Se,Ae))throw new y($e,Ae,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function pe(Ae){if(typeof Ae=="string")return be(Ae,"hints"),Ae;if(r(Ae)){let $e=Ae.length,ke="";if($e===0)return ke;for(let Oe=0;Oe<$e;Oe++){let Ve=Ae[Oe];be(Ve,"hints"),ke+=Ve,Oe!==$e-1&&(ke+=", ")}return ke}throw new y("hints",Ae,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return E1={isInt32:X,isUint32:Z,parseFileMode:L,validateArray:M,validateStringArray:Q,validateBooleanArray:ce,validateAbortSignalArray:_e,validateBoolean:P,validateBuffer:W,validateDictionary:j,validateEncoding:oe,validateFunction:V,validateInt32:K,validateInteger:$,validateNumber:N,validateObject:U,validateOneOf:x,validatePlainFunction:B,validatePort:we,validateSignalName:re,validateString:te,validateUint32:le,validateUndefined:se,validateUnion:ge,validateAbortSignal:xe,validateLinkHeaderValue:pe},E1}function oa(){if(tL)return A1;tL=!0;let{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Nr(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),o=t("nodejs.stream.readable"),s=t("nodejs.stream.writable"),a=t("nodejs.stream.disturbed"),u=t("nodejs.webstream.isClosedPromise"),c=t("nodejs.webstream.controllerErrorFunction");function f(C,U=!1){var j;return!!(C&&typeof C.pipe=="function"&&typeof C.on=="function"&&(!U||typeof C.pause=="function"&&typeof C.resume=="function")&&(!C._writableState||((j=C._readableState)===null||j===void 0?void 0:j.readable)!==!1)&&(!C._writableState||C._readableState))}function h(C){var U;return!!(C&&typeof C.write=="function"&&typeof C.on=="function"&&(!C._readableState||((U=C._writableState)===null||U===void 0?void 0:U.writable)!==!1))}function d(C){return!!(C&&typeof C.pipe=="function"&&C._readableState&&typeof C.on=="function"&&typeof C.write=="function")}function m(C){return C&&(C._readableState||C._writableState||typeof C.write=="function"&&typeof C.on=="function"||typeof C.pipe=="function"&&typeof C.on=="function")}function b(C){return!!(C&&!m(C)&&typeof C.pipeThrough=="function"&&typeof C.getReader=="function"&&typeof C.cancel=="function")}function v(C){return!!(C&&!m(C)&&typeof C.getWriter=="function"&&typeof C.abort=="function")}function w(C){return!!(C&&!m(C)&&typeof C.readable=="object"&&typeof C.writable=="object")}function y(C){return b(C)||v(C)||w(C)}function _(C,U){return C==null?!1:U===!0?typeof C[r]=="function":U===!1?typeof C[e]=="function":typeof C[r]=="function"||typeof C[e]=="function"}function E(C){if(!m(C))return null;let U=C._writableState,j=C._readableState,M=U||j;return!!(C.destroyed||C[n]||M!=null&&M.destroyed)}function S(C){if(!h(C))return null;if(C.writableEnded===!0)return!0;let U=C._writableState;return U!=null&&U.errored?!1:typeof U?.ended!="boolean"?null:U.ended}function A(C,U){if(!h(C))return null;if(C.writableFinished===!0)return!0;let j=C._writableState;return j!=null&&j.errored?!1:typeof j?.finished!="boolean"?null:!!(j.finished||U===!1&&j.ended===!0&&j.length===0)}function F(C){if(!f(C))return null;if(C.readableEnded===!0)return!0;let U=C._readableState;return!U||U.errored?!1:typeof U?.ended!="boolean"?null:U.ended}function I(C,U){if(!f(C))return null;let j=C._readableState;return j!=null&&j.errored?!1:typeof j?.endEmitted!="boolean"?null:!!(j.endEmitted||U===!1&&j.ended===!0&&j.length===0)}function X(C){return C&&C[o]!=null?C[o]:typeof C?.readable!="boolean"?null:E(C)?!1:f(C)&&C.readable&&!I(C)}function Z(C){return C&&C[s]!=null?C[s]:typeof C?.writable!="boolean"?null:E(C)?!1:h(C)&&C.writable&&!S(C)}function H(C,U){return m(C)?E(C)?!0:!(U?.readable!==!1&&X(C)||U?.writable!==!1&&Z(C)):null}function ne(C){var U,j;return m(C)?C.writableErrored?C.writableErrored:(U=(j=C._writableState)===null||j===void 0?void 0:j.errored)!==null&&U!==void 0?U:null:null}function L(C){var U,j;return m(C)?C.readableErrored?C.readableErrored:(U=(j=C._readableState)===null||j===void 0?void 0:j.errored)!==null&&U!==void 0?U:null:null}function $(C){if(!m(C))return null;if(typeof C.closed=="boolean")return C.closed;let U=C._writableState,j=C._readableState;return typeof U?.closed=="boolean"||typeof j?.closed=="boolean"?U?.closed||j?.closed:typeof C._closed=="boolean"&&K(C)?C._closed:null}function K(C){return typeof C._closed=="boolean"&&typeof C._defaultKeepAlive=="boolean"&&typeof C._removedConnection=="boolean"&&typeof C._removedContLen=="boolean"}function le(C){return typeof C._sent100=="boolean"&&K(C)}function te(C){var U;return typeof C._consuming=="boolean"&&typeof C._dumped=="boolean"&&((U=C.req)===null||U===void 0?void 0:U.upgradeOrConnect)===void 0}function N(C){if(!m(C))return null;let U=C._writableState,j=C._readableState,M=U||j;return!M&&le(C)||!!(M&&M.autoDestroy&&M.emitClose&&M.closed===!1)}function x(C){var U;return!!(C&&((U=C[a])!==null&&U!==void 0?U:C.readableDidRead||C.readableAborted))}function P(C){var U,j,M,Q,ce,_e,re,W,oe,we;return!!(C&&((U=(j=(M=(Q=(ce=(_e=C[i])!==null&&_e!==void 0?_e:C.readableErrored)!==null&&ce!==void 0?ce:C.writableErrored)!==null&&Q!==void 0?Q:(re=C._readableState)===null||re===void 0?void 0:re.errorEmitted)!==null&&M!==void 0?M:(W=C._writableState)===null||W===void 0?void 0:W.errorEmitted)!==null&&j!==void 0?j:(oe=C._readableState)===null||oe===void 0?void 0:oe.errored)!==null&&U!==void 0?U:!((we=C._writableState)===null||we===void 0)&&we.errored))}return A1={isDestroyed:E,kIsDestroyed:n,isDisturbed:x,kIsDisturbed:a,isErrored:P,kIsErrored:i,isReadable:X,kIsReadable:o,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:s,isClosed:$,isDuplexNodeStream:d,isFinished:H,isIterable:_,isReadableNodeStream:f,isReadableStream:b,isReadableEnded:F,isReadableFinished:I,isReadableErrored:L,isNodeStream:m,isWebStream:y,isWritable:Z,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:S,isWritableFinished:A,isWritableErrored:ne,isServerRequest:te,isServerResponse:le,willEmitClose:N,isTransformStream:w},A1}function vl(){if(rL)return Fb;rL=!0;let r=zr,{AbortError:e,codes:t}=fi(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:o,once:s}=Vn(),{validateAbortSignal:a,validateFunction:u,validateObject:c,validateBoolean:f}=pg(),{Promise:h,PromisePrototypeThen:d,SymbolDispose:m}=Nr(),{isClosed:b,isReadable:v,isReadableNodeStream:w,isReadableStream:y,isReadableFinished:_,isReadableErrored:E,isWritable:S,isWritableNodeStream:A,isWritableStream:F,isWritableFinished:I,isWritableErrored:X,isNodeStream:Z,willEmitClose:H,kIsClosedPromise:ne}=oa(),L;function $(x){return x.setHeader&&typeof x.abort=="function"}let K=()=>{};function le(x,P,C){var U,j;if(arguments.length===2?(C=P,P=o):P==null?P=o:c(P,"options"),u(C,"callback"),a(P.signal,"options.signal"),C=s(C),y(x)||F(x))return te(x,P,C);if(!Z(x))throw new n("stream",["ReadableStream","WritableStream","Stream"],x);let M=(U=P.readable)!==null&&U!==void 0?U:w(x),Q=(j=P.writable)!==null&&j!==void 0?j:A(x),ce=x._writableState,_e=x._readableState,re=()=>{x.writable||we()},W=H(x)&&w(x)===M&&A(x)===Q,oe=I(x,!1),we=()=>{oe=!0,x.destroyed&&(W=!1),!(W&&(!x.readable||M))&&(!M||xe)&&C.call(x)},xe=_(x,!1),V=()=>{xe=!0,x.destroyed&&(W=!1),!(W&&(!x.writable||Q))&&(!Q||oe)&&C.call(x)},B=Ae=>{C.call(x,Ae)},se=b(x),ge=()=>{se=!0;let Ae=X(x)||E(x);if(Ae&&typeof Ae!="boolean")return C.call(x,Ae);if(M&&!xe&&w(x,!0)&&!_(x,!1))return C.call(x,new i);if(Q&&!oe&&!I(x,!1))return C.call(x,new i);C.call(x)},Se=()=>{se=!0;let Ae=X(x)||E(x);if(Ae&&typeof Ae!="boolean")return C.call(x,Ae);C.call(x)},be=()=>{x.req.on("finish",we)};$(x)?(x.on("complete",we),W||x.on("abort",ge),x.req?be():x.on("request",be)):Q&&!ce&&(x.on("end",re),x.on("close",re)),!W&&typeof x.aborted=="boolean"&&x.on("aborted",ge),x.on("end",V),x.on("finish",we),P.error!==!1&&x.on("error",B),x.on("close",ge),se?r.nextTick(ge):ce!=null&&ce.errorEmitted||_e!=null&&_e.errorEmitted?W||r.nextTick(Se):(!M&&(!W||v(x))&&(oe||S(x)===!1)||!Q&&(!W||S(x))&&(xe||v(x)===!1)||_e&&x.req&&x.aborted)&&r.nextTick(Se);let pe=()=>{C=K,x.removeListener("aborted",ge),x.removeListener("complete",we),x.removeListener("abort",ge),x.removeListener("request",be),x.req&&x.req.removeListener("finish",we),x.removeListener("end",re),x.removeListener("close",re),x.removeListener("finish",we),x.removeListener("end",V),x.removeListener("error",B),x.removeListener("close",ge)};if(P.signal&&!se){let Ae=()=>{let $e=C;pe(),$e.call(x,new e(void 0,{cause:P.signal.reason}))};if(P.signal.aborted)r.nextTick(Ae);else{L=L||Vn().addAbortListener;let $e=L(P.signal,Ae),ke=C;C=s((...Oe)=>{$e[m](),ke.apply(x,Oe)})}}return pe}function te(x,P,C){let U=!1,j=K;if(P.signal)if(j=()=>{U=!0,C.call(x,new e(void 0,{cause:P.signal.reason}))},P.signal.aborted)r.nextTick(j);else{L=L||Vn().addAbortListener;let Q=L(P.signal,j),ce=C;C=s((..._e)=>{Q[m](),ce.apply(x,_e)})}let M=(...Q)=>{U||r.nextTick(()=>C.apply(x,Q))};return d(x[ne].promise,M,M),K}function N(x,P){var C;let U=!1;return P===null&&(P=o),(C=P)!==null&&C!==void 0&&C.cleanup&&(f(P.cleanup,"cleanup"),U=P.cleanup),new h((j,M)=>{let Q=le(x,P,ce=>{U&&Q(),ce?M(ce):j()})})}return Fb=le,Fb.finished=N,Fb}function wh(){if(nL)return x1;nL=!0;let r=zr,{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=fi(),{Symbol:i}=Nr(),{kIsDestroyed:o,isDestroyed:s,isFinished:a,isServerRequest:u}=oa(),c=i("kDestroy"),f=i("kConstruct");function h(H,ne,L){H&&(H.stack,ne&&!ne.errored&&(ne.errored=H),L&&!L.errored&&(L.errored=H))}function d(H,ne){let L=this._readableState,$=this._writableState,K=$||L;return $!=null&&$.destroyed||L!=null&&L.destroyed?(typeof ne=="function"&&ne(),this):(h(H,$,L),$&&($.destroyed=!0),L&&(L.destroyed=!0),K.constructed?m(this,H,ne):this.once(c,function(le){m(this,e(le,H),ne)}),this)}function m(H,ne,L){let $=!1;function K(le){if($)return;$=!0;let te=H._readableState,N=H._writableState;h(le,N,te),N&&(N.closed=!0),te&&(te.closed=!0),typeof L=="function"&&L(le),le?r.nextTick(b,H,le):r.nextTick(v,H)}try{H._destroy(ne||null,K)}catch(le){K(le)}}function b(H,ne){w(H,ne),v(H)}function v(H){let ne=H._readableState,L=H._writableState;L&&(L.closeEmitted=!0),ne&&(ne.closeEmitted=!0),(L!=null&&L.emitClose||ne!=null&&ne.emitClose)&&H.emit("close")}function w(H,ne){let L=H._readableState,$=H._writableState;$!=null&&$.errorEmitted||L!=null&&L.errorEmitted||($&&($.errorEmitted=!0),L&&(L.errorEmitted=!0),H.emit("error",ne))}function y(){let H=this._readableState,ne=this._writableState;H&&(H.constructed=!0,H.closed=!1,H.closeEmitted=!1,H.destroyed=!1,H.errored=null,H.errorEmitted=!1,H.reading=!1,H.ended=H.readable===!1,H.endEmitted=H.readable===!1),ne&&(ne.constructed=!0,ne.destroyed=!1,ne.closed=!1,ne.closeEmitted=!1,ne.errored=null,ne.errorEmitted=!1,ne.finalCalled=!1,ne.prefinished=!1,ne.ended=ne.writable===!1,ne.ending=ne.writable===!1,ne.finished=ne.writable===!1)}function _(H,ne,L){let $=H._readableState,K=H._writableState;if(K!=null&&K.destroyed||$!=null&&$.destroyed)return this;$!=null&&$.autoDestroy||K!=null&&K.autoDestroy?H.destroy(ne):ne&&(ne.stack,K&&!K.errored&&(K.errored=ne),$&&!$.errored&&($.errored=ne),L?r.nextTick(w,H,ne):w(H,ne))}function E(H,ne){if(typeof H._construct!="function")return;let L=H._readableState,$=H._writableState;L&&(L.constructed=!1),$&&($.constructed=!1),H.once(f,ne),!(H.listenerCount(f)>1)&&r.nextTick(S,H)}function S(H){let ne=!1;function L($){if(ne){_(H,$??new t);return}ne=!0;let K=H._readableState,le=H._writableState,te=le||K;K&&(K.constructed=!0),le&&(le.constructed=!0),te.destroyed?H.emit(c,$):$?_(H,$,!0):r.nextTick(A,H)}try{H._construct($=>{r.nextTick(L,$)})}catch($){r.nextTick(L,$)}}function A(H){H.emit(f)}function F(H){return H?.setHeader&&typeof H.abort=="function"}function I(H){H.emit("close")}function X(H,ne){H.emit("error",ne),r.nextTick(I,H)}function Z(H,ne){!H||s(H)||(!ne&&!a(H)&&(ne=new n),u(H)?(H.socket=null,H.destroy(ne)):F(H)?H.abort():F(H.req)?H.req.abort():typeof H.destroy=="function"?H.destroy(ne):typeof H.close=="function"?H.close():ne?r.nextTick(X,H,ne):r.nextTick(I,H),H.destroyed||(H[o]=!0))}return x1={construct:E,destroyer:Z,destroy:d,undestroy:y,errorOrDestroy:_},x1}function j1(){if(iL)return S1;iL=!0;let{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Nr(),{EventEmitter:t}=ao;function n(o){t.call(this,o)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(o,s){let a=this;function u(v){o.writable&&o.write(v)===!1&&a.pause&&a.pause()}a.on("data",u);function c(){a.readable&&a.resume&&a.resume()}o.on("drain",c),!o._isStdio&&(!s||s.end!==!1)&&(a.on("end",h),a.on("close",d));let f=!1;function h(){f||(f=!0,o.end())}function d(){f||(f=!0,typeof o.destroy=="function"&&o.destroy())}function m(v){b(),t.listenerCount(this,"error")===0&&this.emit("error",v)}i(a,"error",m),i(o,"error",m);function b(){a.removeListener("data",u),o.removeListener("drain",c),a.removeListener("end",h),a.removeListener("close",d),a.removeListener("error",m),o.removeListener("error",m),a.removeListener("end",b),a.removeListener("close",b),o.removeListener("close",b)}return a.on("end",b),a.on("close",b),o.on("close",b),o.emit("pipe",a),o};function i(o,s,a){if(typeof o.prependListener=="function")return o.prependListener(s,a);!o._events||!o._events[s]?o.on(s,a):r(o._events[s])?o._events[s].unshift(a):o._events[s]=[a,o._events[s]]}return S1={Stream:n,prependListener:i},S1}function jb(){if(sL)return hg;sL=!0;let{SymbolDispose:r}=Nr(),{AbortError:e,codes:t}=fi(),{isNodeStream:n,isWebStream:i,kControllerErrorFunction:o}=oa(),s=vl(),{ERR_INVALID_ARG_TYPE:a}=t,u,c=(f,h)=>{if(typeof f!="object"||!("aborted"in f))throw new a(h,"AbortSignal",f)};return hg.addAbortSignal=function(h,d){if(c(h,"signal"),!n(d)&&!i(d))throw new a("stream",["ReadableStream","WritableStream","Stream"],d);return hg.addAbortSignalNoValidate(h,d)},hg.addAbortSignalNoValidate=function(f,h){if(typeof f!="object"||!("aborted"in f))return h;let d=n(h)?()=>{h.destroy(new e(void 0,{cause:f.reason}))}:()=>{h[o](new e(void 0,{cause:f.reason}))};if(f.aborted)d();else{u=u||Vn().addAbortListener;let m=u(f,d);s(h,m[r])}return h},hg}function gW(){if(oL)return T1;oL=!0;let{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Nr(),{Buffer:i}=fn(),{inspect:o}=Vn();return T1=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){let u={data:a,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(a){let u={data:a,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;let a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=a+u.data;return c}concat(a){if(this.length===0)return i.alloc(0);let u=i.allocUnsafe(a>>>0),c=this.head,f=0;for(;c;)t(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(a,u){let c=this.head.data;if(a<c.length){let f=c.slice(0,a);return this.head.data=c.slice(a),f}return a===c.length?this.shift():u?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[e](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let u="",c=this.head,f=0;do{let h=c.data;if(a>h.length)u+=h,a-=h.length;else{a===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=r(h,0,a),this.head=c,c.data=r(h,a));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(a){let u=i.allocUnsafe(a),c=a,f=this.head,h=0;do{let d=f.data;if(a>d.length)t(u,d,c-a),a-=d.length;else{a===d.length?(t(u,d,c-a),++h,f.next?this.head=f.next:this.head=this.tail=null):(t(u,new n(d.buffer,d.byteOffset,a),c-a),this.head=f,f.data=d.slice(a));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](a,u){return o(this,{...u,depth:0,customInspect:!1})}},T1}function $b(){if(aL)return C1;aL=!0;let{MathFloor:r,NumberIsInteger:e}=Nr(),{validateInteger:t}=pg(),{ERR_INVALID_ARG_VALUE:n}=fi().codes,i=16*1024,o=16;function s(f,h,d){return f.highWaterMark!=null?f.highWaterMark:h?f[d]:null}function a(f){return f?o:i}function u(f,h){t(h,"value",0),f?o=h:i=h}function c(f,h,d,m){let b=s(h,m,d);if(b!=null){if(!e(b)||b<0){let v=m?`options.${d}`:"options.highWaterMark";throw new n(v,b)}return r(b)}return a(f.objectMode)}return C1={getHighWaterMark:c,getDefaultHighWaterMark:a,setDefaultHighWaterMark:u},C1}function EL(){if(lL)return R1;lL=!0;let r=zr,{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Nr(),{Buffer:i}=fn(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_NULL_VALUES:s}=fi().codes;function a(u,c,f){let h;if(typeof c=="string"||c instanceof i)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let d;if(c&&c[t])d=!0,h=c[t]();else if(c&&c[n])d=!1,h=c[n]();else throw new o("iterable",["Iterable"],c);let m=new u({objectMode:!0,highWaterMark:1,...f}),b=!1;m._read=function(){b||(b=!0,w())},m._destroy=function(y,_){e(v(y),()=>r.nextTick(_,y),E=>r.nextTick(_,E||y))};async function v(y){let _=y!=null,E=typeof h.throw=="function";if(_&&E){let{value:S,done:A}=await h.throw(y);if(await S,A)return}if(typeof h.return=="function"){let{value:S}=await h.return();await S}}async function w(){for(;;){try{let{value:y,done:_}=d?await h.next():h.next();if(_)m.push(null);else{let E=y&&typeof y.then=="function"?await y:y;if(E===null)throw b=!1,new s;if(m.push(E))continue;b=!1}}catch(y){m.destroy(y)}break}}return m}return R1=a,R1}function zb(){if(uL)return D1;uL=!0;let r=zr,{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:s,ObjectSetPrototypeOf:a,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:d}=Nr();D1=Oe,Oe.ReadableState=ke;let{EventEmitter:m}=ao,{Stream:b,prependListener:v}=j1(),{Buffer:w}=fn(),{addAbortSignal:y}=jb(),_=vl(),E=Vn().debuglog("stream",ue=>{E=ue}),S=gW(),A=wh(),{getHighWaterMark:F,getDefaultHighWaterMark:I}=$b(),{aggregateTwoErrors:X,codes:{ERR_INVALID_ARG_TYPE:Z,ERR_METHOD_NOT_IMPLEMENTED:H,ERR_OUT_OF_RANGE:ne,ERR_STREAM_PUSH_AFTER_EOF:L,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:$},AbortError:K}=fi(),{validateObject:le}=pg(),te=d("kPaused"),{StringDecoder:N}=Mb,x=EL();a(Oe.prototype,b.prototype),a(Oe,b);let P=()=>{},{errorOrDestroy:C}=A,U=1,j=2,M=4,Q=8,ce=16,_e=32,re=64,W=128,oe=256,we=512,xe=1024,V=2048,B=4096,se=8192,ge=16384,Se=32768,be=65536,pe=1<<17,Ae=1<<18;function $e(ue){return{enumerable:!1,get(){return((this||qe).state&ue)!==0},set(me){me?(this||qe).state|=ue:(this||qe).state&=~ue}}}o(ke.prototype,{objectMode:$e(U),ended:$e(j),endEmitted:$e(M),reading:$e(Q),constructed:$e(ce),sync:$e(_e),needReadable:$e(re),emittedReadable:$e(W),readableListening:$e(oe),resumeScheduled:$e(we),errorEmitted:$e(xe),emitClose:$e(V),autoDestroy:$e(B),destroyed:$e(se),closed:$e(ge),closeEmitted:$e(Se),multiAwaitDrain:$e(be),readingMore:$e(pe),dataEmitted:$e(Ae)});function ke(ue,me,We){typeof We!="boolean"&&(We=me instanceof sa()),(this||qe).state=V|B|ce|_e,ue&&ue.objectMode&&((this||qe).state|=U),We&&ue&&ue.readableObjectMode&&((this||qe).state|=U),(this||qe).highWaterMark=ue?F(this||qe,ue,"readableHighWaterMark",We):I(!1),(this||qe).buffer=new S,(this||qe).length=0,(this||qe).pipes=[],(this||qe).flowing=null,(this||qe)[te]=null,ue&&ue.emitClose===!1&&((this||qe).state&=~V),ue&&ue.autoDestroy===!1&&((this||qe).state&=~B),(this||qe).errored=null,(this||qe).defaultEncoding=ue&&ue.defaultEncoding||"utf8",(this||qe).awaitDrainWriters=null,(this||qe).decoder=null,(this||qe).encoding=null,ue&&ue.encoding&&((this||qe).decoder=new N(ue.encoding),(this||qe).encoding=ue.encoding)}function Oe(ue){if(!((this||qe)instanceof Oe))return new Oe(ue);let me=(this||qe)instanceof sa();(this||qe)._readableState=new ke(ue,this||qe,me),ue&&(typeof ue.read=="function"&&((this||qe)._read=ue.read),typeof ue.destroy=="function"&&((this||qe)._destroy=ue.destroy),typeof ue.construct=="function"&&((this||qe)._construct=ue.construct),ue.signal&&!me&&y(ue.signal,this||qe)),b.call(this||qe,ue),A.construct(this||qe,()=>{(this||qe)._readableState.needReadable&&D(this||qe,(this||qe)._readableState)})}Oe.prototype.destroy=A.destroy,Oe.prototype._undestroy=A.undestroy,Oe.prototype._destroy=function(ue,me){me(ue)},Oe.prototype[m.captureRejectionSymbol]=function(ue){this.destroy(ue)},Oe.prototype[f]=function(){let ue;return(this||qe).destroyed||(ue=(this||qe).readableEnded?null:new K,this.destroy(ue)),new u((me,We)=>_(this||qe,Ue=>Ue&&Ue!==ue?We(Ue):me(null)))},Oe.prototype.push=function(ue,me){return Ve(this||qe,ue,me,!1)},Oe.prototype.unshift=function(ue,me){return Ve(this||qe,ue,me,!0)};function Ve(ue,me,We,Ue){E("readableAddChunk",me);let Ze=ue._readableState,dt;if((Ze.state&U)===0&&(typeof me=="string"?(We=We||Ze.defaultEncoding,Ze.encoding!==We&&(Ue&&Ze.encoding?me=w.from(me,We).toString(Ze.encoding):(me=w.from(me,We),We=""))):me instanceof w?We="":b._isUint8Array(me)?(me=b._uint8ArrayToBuffer(me),We=""):me!=null&&(dt=new Z("chunk",["string","Buffer","Uint8Array"],me))),dt)C(ue,dt);else if(me===null)Ze.state&=~Q,p(ue,Ze);else if((Ze.state&U)!==0||me&&me.length>0)if(Ue)if((Ze.state&M)!==0)C(ue,new $);else{if(Ze.destroyed||Ze.errored)return!1;Je(ue,Ze,me,!0)}else if(Ze.ended)C(ue,new L);else{if(Ze.destroyed||Ze.errored)return!1;Ze.state&=~Q,Ze.decoder&&!We?(me=Ze.decoder.write(me),Ze.objectMode||me.length!==0?Je(ue,Ze,me,!1):D(ue,Ze)):Je(ue,Ze,me,!1)}else Ue||(Ze.state&=~Q,D(ue,Ze));return!Ze.ended&&(Ze.length<Ze.highWaterMark||Ze.length===0)}function Je(ue,me,We,Ue){me.flowing&&me.length===0&&!me.sync&&ue.listenerCount("data")>0?((me.state&be)!==0?me.awaitDrainWriters.clear():me.awaitDrainWriters=null,me.dataEmitted=!0,ue.emit("data",We)):(me.length+=me.objectMode?1:We.length,Ue?me.buffer.unshift(We):me.buffer.push(We),(me.state&re)!==0&&R(ue)),D(ue,me)}Oe.prototype.isPaused=function(){let ue=(this||qe)._readableState;return ue[te]===!0||ue.flowing===!1},Oe.prototype.setEncoding=function(ue){let me=new N(ue);(this||qe)._readableState.decoder=me,(this||qe)._readableState.encoding=(this||qe)._readableState.decoder.encoding;let We=(this||qe)._readableState.buffer,Ue="";for(let Ze of We)Ue+=me.write(Ze);return We.clear(),Ue!==""&&We.push(Ue),(this||qe)._readableState.length=Ue.length,this||qe};let tt=1073741824;function T(ue){if(ue>tt)throw new ne("size","<= 1GiB",ue);return ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++,ue}function g(ue,me){return ue<=0||me.length===0&&me.ended?0:(me.state&U)!==0?1:n(ue)?me.flowing&&me.length?me.buffer.first().length:me.length:ue<=me.length?ue:me.ended?me.length:0}Oe.prototype.read=function(ue){E("read",ue),ue===void 0?ue=NaN:t(ue)||(ue=i(ue,10));let me=(this||qe)._readableState,We=ue;if(ue>me.highWaterMark&&(me.highWaterMark=T(ue)),ue!==0&&(me.state&=~W),ue===0&&me.needReadable&&((me.highWaterMark!==0?me.length>=me.highWaterMark:me.length>0)||me.ended))return E("read: emitReadable",me.length,me.ended),me.length===0&&me.ended?je(this||qe):R(this||qe),null;if(ue=g(ue,me),ue===0&&me.ended)return me.length===0&&je(this||qe),null;let Ue=(me.state&re)!==0;if(E("need readable",Ue),(me.length===0||me.length-ue<me.highWaterMark)&&(Ue=!0,E("length less than watermark",Ue)),me.ended||me.reading||me.destroyed||me.errored||!me.constructed)Ue=!1,E("reading, ended or constructing",Ue);else if(Ue){E("do read"),me.state|=Q|_e,me.length===0&&(me.state|=re);try{this._read(me.highWaterMark)}catch(dt){C(this||qe,dt)}me.state&=~_e,me.reading||(ue=g(We,me))}let Ze;return ue>0?Ze=Pe(ue,me):Ze=null,Ze===null?(me.needReadable=me.length<=me.highWaterMark,ue=0):(me.length-=ue,me.multiAwaitDrain?me.awaitDrainWriters.clear():me.awaitDrainWriters=null),me.length===0&&(me.ended||(me.needReadable=!0),We!==ue&&me.ended&&je(this||qe)),Ze!==null&&!me.errorEmitted&&!me.closeEmitted&&(me.dataEmitted=!0,this.emit("data",Ze)),Ze};function p(ue,me){if(E("onEofChunk"),!me.ended){if(me.decoder){let We=me.decoder.end();We&&We.length&&(me.buffer.push(We),me.length+=me.objectMode?1:We.length)}me.ended=!0,me.sync?R(ue):(me.needReadable=!1,me.emittedReadable=!0,J(ue))}}function R(ue){let me=ue._readableState;E("emitReadable",me.needReadable,me.emittedReadable),me.needReadable=!1,me.emittedReadable||(E("emitReadable",me.flowing),me.emittedReadable=!0,r.nextTick(J,ue))}function J(ue){let me=ue._readableState;E("emitReadable_",me.destroyed,me.length,me.ended),!me.destroyed&&!me.errored&&(me.length||me.ended)&&(ue.emit("readable"),me.emittedReadable=!1),me.needReadable=!me.flowing&&!me.ended&&me.length<=me.highWaterMark,Me(ue)}function D(ue,me){!me.readingMore&&me.constructed&&(me.readingMore=!0,r.nextTick(ae,ue,me))}function ae(ue,me){for(;!me.reading&&!me.ended&&(me.length<me.highWaterMark||me.flowing&&me.length===0);){let We=me.length;if(E("maybeReadMore read 0"),ue.read(0),We===me.length)break}me.readingMore=!1}Oe.prototype._read=function(ue){throw new H("_read()")},Oe.prototype.pipe=function(ue,me){let We=this||qe,Ue=(this||qe)._readableState;Ue.pipes.length===1&&(Ue.multiAwaitDrain||(Ue.multiAwaitDrain=!0,Ue.awaitDrainWriters=new c(Ue.awaitDrainWriters?[Ue.awaitDrainWriters]:[]))),Ue.pipes.push(ue),E("pipe count=%d opts=%j",Ue.pipes.length,me);let dt=(!me||me.end!==!1)&&ue!==r.stdout&&ue!==r.stderr?Et:Zr;Ue.endEmitted?r.nextTick(dt):We.once("end",dt),ue.on("unpipe",Rt);function Rt(Jr,Qr){E("onunpipe"),Jr===We&&Qr&&Qr.hasUnpiped===!1&&(Qr.hasUnpiped=!0,qn())}function Et(){E("onend"),ue.end()}let ar,_i=!1;function qn(){E("cleanup"),ue.removeListener("close",zt),ue.removeListener("finish",Yt),ar&&ue.removeListener("drain",ar),ue.removeListener("error",yr),ue.removeListener("unpipe",Rt),We.removeListener("end",Et),We.removeListener("end",Zr),We.removeListener("data",Dr),_i=!0,ar&&Ue.awaitDrainWriters&&(!ue._writableState||ue._writableState.needDrain)&&ar()}function Ht(){_i||(Ue.pipes.length===1&&Ue.pipes[0]===ue?(E("false write response, pause",0),Ue.awaitDrainWriters=ue,Ue.multiAwaitDrain=!1):Ue.pipes.length>1&&Ue.pipes.includes(ue)&&(E("false write response, pause",Ue.awaitDrainWriters.size),Ue.awaitDrainWriters.add(ue)),We.pause()),ar||(ar=fe(We,ue),ue.on("drain",ar))}We.on("data",Dr);function Dr(Jr){E("ondata");let Qr=ue.write(Jr);E("dest.write",Qr),Qr===!1&&Ht()}function yr(Jr){if(E("onerror",Jr),Zr(),ue.removeListener("error",yr),ue.listenerCount("error")===0){let Qr=ue._writableState||ue._readableState;Qr&&!Qr.errorEmitted?C(ue,Jr):ue.emit("error",Jr)}}v(ue,"error",yr);function zt(){ue.removeListener("finish",Yt),Zr()}ue.once("close",zt);function Yt(){E("onfinish"),ue.removeListener("close",zt),Zr()}ue.once("finish",Yt);function Zr(){E("unpipe"),We.unpipe(ue)}return ue.emit("pipe",We),ue.writableNeedDrain===!0?Ht():Ue.flowing||(E("pipe resume"),We.resume()),ue};function fe(ue,me){return function(){let Ue=ue._readableState;Ue.awaitDrainWriters===me?(E("pipeOnDrain",1),Ue.awaitDrainWriters=null):Ue.multiAwaitDrain&&(E("pipeOnDrain",Ue.awaitDrainWriters.size),Ue.awaitDrainWriters.delete(me)),(!Ue.awaitDrainWriters||Ue.awaitDrainWriters.size===0)&&ue.listenerCount("data")&&ue.resume()}}Oe.prototype.unpipe=function(ue){let me=(this||qe)._readableState,We={hasUnpiped:!1};if(me.pipes.length===0)return this||qe;if(!ue){let Ze=me.pipes;me.pipes=[],this.pause();for(let dt=0;dt<Ze.length;dt++)Ze[dt].emit("unpipe",this||qe,{hasUnpiped:!1});return this||qe}let Ue=e(me.pipes,ue);return Ue===-1?this||qe:(me.pipes.splice(Ue,1),me.pipes.length===0&&this.pause(),ue.emit("unpipe",this||qe,We),this||qe)},Oe.prototype.on=function(ue,me){let We=b.prototype.on.call(this||qe,ue,me),Ue=(this||qe)._readableState;return ue==="data"?(Ue.readableListening=this.listenerCount("readable")>0,Ue.flowing!==!1&&this.resume()):ue==="readable"&&!Ue.endEmitted&&!Ue.readableListening&&(Ue.readableListening=Ue.needReadable=!0,Ue.flowing=!1,Ue.emittedReadable=!1,E("on readable",Ue.length,Ue.reading),Ue.length?R(this||qe):Ue.reading||r.nextTick(ve,this||qe)),We},Oe.prototype.addListener=Oe.prototype.on,Oe.prototype.removeListener=function(ue,me){let We=b.prototype.removeListener.call(this||qe,ue,me);return ue==="readable"&&r.nextTick(Ee,this||qe),We},Oe.prototype.off=Oe.prototype.removeListener,Oe.prototype.removeAllListeners=function(ue){let me=b.prototype.removeAllListeners.apply(this||qe,arguments);return(ue==="readable"||ue===void 0)&&r.nextTick(Ee,this||qe),me};function Ee(ue){let me=ue._readableState;me.readableListening=ue.listenerCount("readable")>0,me.resumeScheduled&&me[te]===!1?me.flowing=!0:ue.listenerCount("data")>0?ue.resume():me.readableListening||(me.flowing=null)}function ve(ue){E("readable nexttick read 0"),ue.read(0)}Oe.prototype.resume=function(){let ue=(this||qe)._readableState;return ue.flowing||(E("resume"),ue.flowing=!ue.readableListening,Ie(this||qe,ue)),ue[te]=!1,this||qe};function Ie(ue,me){me.resumeScheduled||(me.resumeScheduled=!0,r.nextTick(Y,ue,me))}function Y(ue,me){E("resume",me.reading),me.reading||ue.read(0),me.resumeScheduled=!1,ue.emit("resume"),Me(ue),me.flowing&&!me.reading&&ue.read(0)}Oe.prototype.pause=function(){return E("call pause flowing=%j",(this||qe)._readableState.flowing),(this||qe)._readableState.flowing!==!1&&(E("pause"),(this||qe)._readableState.flowing=!1,this.emit("pause")),(this||qe)._readableState[te]=!0,this||qe};function Me(ue){let me=ue._readableState;for(E("flow",me.flowing);me.flowing&&ue.read()!==null;);}Oe.prototype.wrap=function(ue){let me=!1;ue.on("data",Ue=>{!this.push(Ue)&&ue.pause&&(me=!0,ue.pause())}),ue.on("end",()=>{this.push(null)}),ue.on("error",Ue=>{C(this||qe,Ue)}),ue.on("close",()=>{this.destroy()}),ue.on("destroy",()=>{this.destroy()}),(this||qe)._read=()=>{me&&ue.resume&&(me=!1,ue.resume())};let We=s(ue);for(let Ue=1;Ue<We.length;Ue++){let Ze=We[Ue];(this||qe)[Ze]===void 0&&typeof ue[Ze]=="function"&&((this||qe)[Ze]=ue[Ze].bind(ue))}return this||qe},Oe.prototype[h]=function(){return et(this||qe)},Oe.prototype.iterator=function(ue){return ue!==void 0&&le(ue,"options"),et(this||qe,ue)};function et(ue,me){typeof ue.read!="function"&&(ue=Oe.wrap(ue,{objectMode:!0}));let We=O(ue,me);return We.stream=ue,We}async function*O(ue,me){let We=P;function Ue(Rt){(this||qe)===ue?(We(),We=P):We=Rt}ue.on("readable",Ue);let Ze,dt=_(ue,{writable:!1},Rt=>{Ze=Rt?X(Ze,Rt):null,We(),We=P});try{for(;;){let Rt=ue.destroyed?null:ue.read();if(Rt!==null)yield Rt;else{if(Ze)throw Ze;if(Ze===null)return;await new u(Ue)}}}catch(Rt){throw Ze=X(Ze,Rt),Ze}finally{(Ze||me?.destroyOnReturn!==!1)&&(Ze===void 0||ue._readableState.autoDestroy)?A.destroyer(ue,null):(ue.off("readable",Ue),dt())}}o(Oe.prototype,{readable:{__proto__:null,get(){let ue=(this||qe)._readableState;return!!ue&&ue.readable!==!1&&!ue.destroyed&&!ue.errorEmitted&&!ue.endEmitted},set(ue){(this||qe)._readableState&&((this||qe)._readableState.readable=!!ue)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return(this||qe)._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||qe)._readableState.readable!==!1&&((this||qe)._readableState.destroyed||(this||qe)._readableState.errored)&&!(this||qe)._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return(this||qe)._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return(this||qe)._readableState&&(this||qe)._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return(this||qe)._readableState.flowing},set:function(ue){(this||qe)._readableState&&((this||qe)._readableState.flowing=ue)}},readableLength:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState?(this||qe)._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState?(this||qe)._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState?(this||qe)._readableState.errored:null}},closed:{__proto__:null,get(){return(this||qe)._readableState?(this||qe)._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState?(this||qe)._readableState.destroyed:!1},set(ue){(this||qe)._readableState&&((this||qe)._readableState.destroyed=ue)}},readableEnded:{__proto__:null,enumerable:!1,get(){return(this||qe)._readableState?(this||qe)._readableState.endEmitted:!1}}}),o(ke.prototype,{pipesCount:{__proto__:null,get(){return(this||qe).pipes.length}},paused:{__proto__:null,get(){return(this||qe)[te]!==!1},set(ue){(this||qe)[te]=!!ue}}}),Oe._fromList=Pe;function Pe(ue,me){if(me.length===0)return null;let We;return me.objectMode?We=me.buffer.shift():!ue||ue>=me.length?(me.decoder?We=me.buffer.join(""):me.buffer.length===1?We=me.buffer.first():We=me.buffer.concat(me.length),me.buffer.clear()):We=me.buffer.consume(ue,me.decoder),We}function je(ue){let me=ue._readableState;E("endReadable",me.endEmitted),me.endEmitted||(me.ended=!0,r.nextTick(de,me,ue))}function de(ue,me){if(E("endReadableNT",ue.endEmitted,ue.length),!ue.errored&&!ue.closeEmitted&&!ue.endEmitted&&ue.length===0){if(ue.endEmitted=!0,me.emit("end"),me.writable&&me.allowHalfOpen===!1)r.nextTick(Te,me);else if(ue.autoDestroy){let We=me._writableState;(!We||We.autoDestroy&&(We.finished||We.writable===!1))&&me.destroy()}}}function Te(ue){ue.writable&&!ue.writableEnded&&!ue.destroyed&&ue.end()}Oe.from=function(ue,me){return x(Oe,ue,me)};let Be;function ut(){return Be===void 0&&(Be={}),Be}return Oe.fromWeb=function(ue,me){return ut().newStreamReadableFromReadableStream(ue,me)},Oe.toWeb=function(ue,me){return ut().newReadableStreamFromStreamReadable(ue,me)},Oe.wrap=function(ue,me){var We,Ue;return new Oe({objectMode:(We=(Ue=ue.readableObjectMode)!==null&&Ue!==void 0?Ue:ue.objectMode)!==null&&We!==void 0?We:!0,...me,destroy(Ze,dt){A.destroyer(ue,Ze),dt(Ze)}}).wrap(ue)},D1}function $1(){if(cL)return I1;cL=!0;let r=zr,{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:a,Symbol:u,SymbolHasInstance:c}=Nr();I1=le,le.WritableState=$;let{EventEmitter:f}=ao,h=j1().Stream,{Buffer:d}=fn(),m=wh(),{addAbortSignal:b}=jb(),{getHighWaterMark:v,getDefaultHighWaterMark:w}=$b(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:F,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:X,ERR_UNKNOWN_ENCODING:Z}=fi().codes,{errorOrDestroy:H}=m;s(le.prototype,h.prototype),s(le,h);function ne(){}let L=u("kOnFinished");function $(B,se,ge){typeof ge!="boolean"&&(ge=se instanceof sa()),(this||Xe).objectMode=!!(B&&B.objectMode),ge&&((this||Xe).objectMode=(this||Xe).objectMode||!!(B&&B.writableObjectMode)),(this||Xe).highWaterMark=B?v(this||Xe,B,"writableHighWaterMark",ge):w(!1),(this||Xe).finalCalled=!1,(this||Xe).needDrain=!1,(this||Xe).ending=!1,(this||Xe).ended=!1,(this||Xe).finished=!1,(this||Xe).destroyed=!1;let Se=!!(B&&B.decodeStrings===!1);(this||Xe).decodeStrings=!Se,(this||Xe).defaultEncoding=B&&B.defaultEncoding||"utf8",(this||Xe).length=0,(this||Xe).writing=!1,(this||Xe).corked=0,(this||Xe).sync=!0,(this||Xe).bufferProcessing=!1,(this||Xe).onwrite=C.bind(void 0,se),(this||Xe).writecb=null,(this||Xe).writelen=0,(this||Xe).afterWriteTickInfo=null,K(this||Xe),(this||Xe).pendingcb=0,(this||Xe).constructed=!0,(this||Xe).prefinished=!1,(this||Xe).errorEmitted=!1,(this||Xe).emitClose=!B||B.emitClose!==!1,(this||Xe).autoDestroy=!B||B.autoDestroy!==!1,(this||Xe).errored=null,(this||Xe).closed=!1,(this||Xe).closeEmitted=!1,(this||Xe)[L]=[]}function K(B){B.buffered=[],B.bufferedIndex=0,B.allBuffers=!0,B.allNoop=!0}$.prototype.getBuffer=function(){return e((this||Xe).buffered,(this||Xe).bufferedIndex)},i($.prototype,"bufferedRequestCount",{__proto__:null,get(){return(this||Xe).buffered.length-(this||Xe).bufferedIndex}});function le(B){let se=(this||Xe)instanceof sa();if(!se&&!n(le,this||Xe))return new le(B);(this||Xe)._writableState=new $(B,this||Xe,se),B&&(typeof B.write=="function"&&((this||Xe)._write=B.write),typeof B.writev=="function"&&((this||Xe)._writev=B.writev),typeof B.destroy=="function"&&((this||Xe)._destroy=B.destroy),typeof B.final=="function"&&((this||Xe)._final=B.final),typeof B.construct=="function"&&((this||Xe)._construct=B.construct),B.signal&&b(B.signal,this||Xe)),h.call(this||Xe,B),m.construct(this||Xe,()=>{let ge=(this||Xe)._writableState;ge.writing||Q(this||Xe,ge),W(this||Xe,ge)})}i(le,c,{__proto__:null,value:function(B){return n(this||Xe,B)?!0:(this||Xe)!==le?!1:B&&B._writableState instanceof $}}),le.prototype.pipe=function(){H(this||Xe,new S)};function te(B,se,ge,Se){let be=B._writableState;if(typeof ge=="function")Se=ge,ge=be.defaultEncoding;else{if(!ge)ge=be.defaultEncoding;else if(ge!=="buffer"&&!d.isEncoding(ge))throw new Z(ge);typeof Se!="function"&&(Se=ne)}if(se===null)throw new I;if(!be.objectMode)if(typeof se=="string")be.decodeStrings!==!1&&(se=d.from(se,ge),ge="buffer");else if(se instanceof d)ge="buffer";else if(h._isUint8Array(se))se=h._uint8ArrayToBuffer(se),ge="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],se);let pe;return be.ending?pe=new X:be.destroyed&&(pe=new A("write")),pe?(r.nextTick(Se,pe),H(B,pe,!0),pe):(be.pendingcb++,N(B,be,se,ge,Se))}le.prototype.write=function(B,se,ge){return te(this||Xe,B,se,ge)===!0},le.prototype.cork=function(){(this||Xe)._writableState.corked++},le.prototype.uncork=function(){let B=(this||Xe)._writableState;B.corked&&(B.corked--,B.writing||Q(this||Xe,B))},le.prototype.setDefaultEncoding=function(se){if(typeof se=="string"&&(se=a(se)),!d.isEncoding(se))throw new Z(se);return(this||Xe)._writableState.defaultEncoding=se,this||Xe};function N(B,se,ge,Se,be){let pe=se.objectMode?1:ge.length;se.length+=pe;let Ae=se.length<se.highWaterMark;return Ae||(se.needDrain=!0),se.writing||se.corked||se.errored||!se.constructed?(se.buffered.push({chunk:ge,encoding:Se,callback:be}),se.allBuffers&&Se!=="buffer"&&(se.allBuffers=!1),se.allNoop&&be!==ne&&(se.allNoop=!1)):(se.writelen=pe,se.writecb=be,se.writing=!0,se.sync=!0,B._write(ge,Se,se.onwrite),se.sync=!1),Ae&&!se.errored&&!se.destroyed}function x(B,se,ge,Se,be,pe,Ae){se.writelen=Se,se.writecb=Ae,se.writing=!0,se.sync=!0,se.destroyed?se.onwrite(new A("write")):ge?B._writev(be,se.onwrite):B._write(be,pe,se.onwrite),se.sync=!1}function P(B,se,ge,Se){--se.pendingcb,Se(ge),M(se),H(B,ge)}function C(B,se){let ge=B._writableState,Se=ge.sync,be=ge.writecb;if(typeof be!="function"){H(B,new E);return}ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0,se?(se.stack,ge.errored||(ge.errored=se),B._readableState&&!B._readableState.errored&&(B._readableState.errored=se),Se?r.nextTick(P,B,ge,se,be):P(B,ge,se,be)):(ge.buffered.length>ge.bufferedIndex&&Q(B,ge),Se?ge.afterWriteTickInfo!==null&&ge.afterWriteTickInfo.cb===be?ge.afterWriteTickInfo.count++:(ge.afterWriteTickInfo={count:1,cb:be,stream:B,state:ge},r.nextTick(U,ge.afterWriteTickInfo)):j(B,ge,1,be))}function U({stream:B,state:se,count:ge,cb:Se}){return se.afterWriteTickInfo=null,j(B,se,ge,Se)}function j(B,se,ge,Se){for(!se.ending&&!B.destroyed&&se.length===0&&se.needDrain&&(se.needDrain=!1,B.emit("drain"));ge-- >0;)se.pendingcb--,Se();se.destroyed&&M(se),W(B,se)}function M(B){if(B.writing)return;for(let be=B.bufferedIndex;be<B.buffered.length;++be){var se;let{chunk:pe,callback:Ae}=B.buffered[be],$e=B.objectMode?1:pe.length;B.length-=$e,Ae((se=B.errored)!==null&&se!==void 0?se:new A("write"))}let ge=B[L].splice(0);for(let be=0;be<ge.length;be++){var Se;ge[be]((Se=B.errored)!==null&&Se!==void 0?Se:new A("end"))}K(B)}function Q(B,se){if(se.corked||se.bufferProcessing||se.destroyed||!se.constructed)return;let{buffered:ge,bufferedIndex:Se,objectMode:be}=se,pe=ge.length-Se;if(!pe)return;let Ae=Se;if(se.bufferProcessing=!0,pe>1&&B._writev){se.pendingcb-=pe-1;let $e=se.allNoop?ne:Oe=>{for(let Ve=Ae;Ve<ge.length;++Ve)ge[Ve].callback(Oe)},ke=se.allNoop&&Ae===0?ge:e(ge,Ae);ke.allBuffers=se.allBuffers,x(B,se,!0,se.length,ke,"",$e),K(se)}else{do{let{chunk:$e,encoding:ke,callback:Oe}=ge[Ae];ge[Ae++]=null;let Ve=be?1:$e.length;x(B,se,!1,Ve,$e,ke,Oe)}while(Ae<ge.length&&!se.writing);Ae===ge.length?K(se):Ae>256?(ge.splice(0,Ae),se.bufferedIndex=0):se.bufferedIndex=Ae}se.bufferProcessing=!1}le.prototype._write=function(B,se,ge){if((this||Xe)._writev)this._writev([{chunk:B,encoding:se}],ge);else throw new _("_write()")},le.prototype._writev=null,le.prototype.end=function(B,se,ge){let Se=(this||Xe)._writableState;typeof B=="function"?(ge=B,B=null,se=null):typeof se=="function"&&(ge=se,se=null);let be;if(B!=null){let pe=te(this||Xe,B,se);pe instanceof t&&(be=pe)}return Se.corked&&(Se.corked=1,this.uncork()),be||(!Se.errored&&!Se.ending?(Se.ending=!0,W(this||Xe,Se,!0),Se.ended=!0):Se.finished?be=new F("end"):Se.destroyed&&(be=new A("end"))),typeof ge=="function"&&(be||Se.finished?r.nextTick(ge,be):Se[L].push(ge)),this||Xe};function ce(B){return B.ending&&!B.destroyed&&B.constructed&&B.length===0&&!B.errored&&B.buffered.length===0&&!B.finished&&!B.writing&&!B.errorEmitted&&!B.closeEmitted}function _e(B,se){let ge=!1;function Se(be){if(ge){H(B,be??E());return}if(ge=!0,se.pendingcb--,be){let pe=se[L].splice(0);for(let Ae=0;Ae<pe.length;Ae++)pe[Ae](be);H(B,be,se.sync)}else ce(se)&&(se.prefinished=!0,B.emit("prefinish"),se.pendingcb++,r.nextTick(oe,B,se))}se.sync=!0,se.pendingcb++;try{B._final(Se)}catch(be){Se(be)}se.sync=!1}function re(B,se){!se.prefinished&&!se.finalCalled&&(typeof B._final=="function"&&!se.destroyed?(se.finalCalled=!0,_e(B,se)):(se.prefinished=!0,B.emit("prefinish")))}function W(B,se,ge){ce(se)&&(re(B,se),se.pendingcb===0&&(ge?(se.pendingcb++,r.nextTick((Se,be)=>{ce(be)?oe(Se,be):be.pendingcb--},B,se)):ce(se)&&(se.pendingcb++,oe(B,se))))}function oe(B,se){se.pendingcb--,se.finished=!0;let ge=se[L].splice(0);for(let Se=0;Se<ge.length;Se++)ge[Se]();if(B.emit("finish"),se.autoDestroy){let Se=B._readableState;(!Se||Se.autoDestroy&&(Se.endEmitted||Se.readable===!1))&&B.destroy()}}o(le.prototype,{closed:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.closed:!1}},destroyed:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.destroyed:!1},set(B){(this||Xe)._writableState&&((this||Xe)._writableState.destroyed=B)}},writable:{__proto__:null,get(){let B=(this||Xe)._writableState;return!!B&&B.writable!==!1&&!B.destroyed&&!B.errored&&!B.ending&&!B.ended},set(B){(this||Xe)._writableState&&((this||Xe)._writableState.writable=!!B)}},writableFinished:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return(this||Xe)._writableState&&(this||Xe)._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let B=(this||Xe)._writableState;return B?!B.destroyed&&!B.ending&&B.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return(this||Xe)._writableState&&(this||Xe)._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return(this||Xe)._writableState?(this||Xe)._writableState.corked:0}},writableLength:{__proto__:null,get(){return(this||Xe)._writableState&&(this||Xe)._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return(this||Xe)._writableState?(this||Xe)._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!((this||Xe)._writableState.writable!==!1&&((this||Xe)._writableState.destroyed||(this||Xe)._writableState.errored)&&!(this||Xe)._writableState.finished)}}});let we=m.destroy;le.prototype.destroy=function(B,se){let ge=(this||Xe)._writableState;return!ge.destroyed&&(ge.bufferedIndex<ge.buffered.length||ge[L].length)&&r.nextTick(M,ge),we.call(this||Xe,B,se),this||Xe},le.prototype._undestroy=m.undestroy,le.prototype._destroy=function(B,se){se(B)},le.prototype[f.captureRejectionSymbol]=function(B){this.destroy(B)};let xe;function V(){return xe===void 0&&(xe={}),xe}return le.fromWeb=function(B,se){return V().newStreamWritableFromWritableStream(B,se)},le.toWeb=function(B){return V().newWritableStreamFromStreamWritable(B)},I1}function mW(){if(fL)return O1;fL=!0;let r=zr,e=fn(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:o,isReadableNodeStream:s,isWritableNodeStream:a,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=oa(),h=vl(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=fi(),{destroyer:v}=wh(),w=sa(),y=zb(),_=$1(),{createDeferredPromise:E}=Vn(),S=EL(),A=globalThis.Blob||e.Blob,F=typeof A<"u"?function($){return $ instanceof A}:function($){return!1},I=globalThis.AbortController||dg().AbortController,{FunctionPrototypeCall:X}=Nr();class Z extends w{constructor($){super($),$?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),$?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}O1=function L($,K){if(u($))return $;if(s($))return ne({readable:$});if(a($))return ne({writable:$});if(o($))return ne({writable:!1,readable:!1});if(c($))return ne({readable:y.fromWeb($)});if(f($))return ne({writable:_.fromWeb($)});if(typeof $=="function"){let{value:te,write:N,final:x,destroy:P}=H($);if(i(te))return S(Z,te,{objectMode:!0,write:N,final:x,destroy:P});let C=te?.then;if(typeof C=="function"){let U,j=X(C,te,M=>{if(M!=null)throw new b("nully","body",M)},M=>{v(U,M)});return U=new Z({objectMode:!0,readable:!1,write:N,final(M){x(async()=>{try{await j,r.nextTick(M,null)}catch(Q){r.nextTick(M,Q)}})},destroy:P})}throw new b("Iterable, AsyncIterable or AsyncFunction",K,te)}if(F($))return L($.arrayBuffer());if(i($))return S(Z,$,{objectMode:!0,writable:!1});if(c($?.readable)&&f($?.writable))return Z.fromWeb($);if(typeof $?.writable=="object"||typeof $?.readable=="object"){let te=$!=null&&$.readable?s($?.readable)?$?.readable:L($.readable):void 0,N=$!=null&&$.writable?a($?.writable)?$?.writable:L($.writable):void 0;return ne({readable:te,writable:N})}let le=$?.then;if(typeof le=="function"){let te;return X(le,$,N=>{N!=null&&te.push(N),te.push(null)},N=>{v(te,N)}),te=new Z({objectMode:!0,writable:!1,read(){}})}throw new m(K,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],$)};function H(L){let{promise:$,resolve:K}=E(),le=new I,te=le.signal;return{value:L((async function*(){for(;;){let x=$;$=null;let{chunk:P,done:C,cb:U}=await x;if(r.nextTick(U),C)return;if(te.aborted)throw new d(void 0,{cause:te.reason});({promise:$,resolve:K}=E()),yield P}})(),{signal:te}),write(x,P,C){let U=K;K=null,U({chunk:x,done:!1,cb:C})},final(x){let P=K;K=null,P({done:!0,cb:x})},destroy(x,P){le.abort(),P(x)}}}function ne(L){let $=L.readable&&typeof L.readable.read!="function"?y.wrap(L.readable):L.readable,K=L.writable,le=!!t($),te=!!n(K),N,x,P,C,U;function j(M){let Q=C;C=null,Q?Q(M):M&&U.destroy(M)}return U=new Z({readableObjectMode:!!($!=null&&$.readableObjectMode),writableObjectMode:!!(K!=null&&K.writableObjectMode),readable:le,writable:te}),te&&(h(K,M=>{te=!1,M&&v($,M),j(M)}),U._write=function(M,Q,ce){K.write(M,Q)?ce():N=ce},U._final=function(M){K.end(),x=M},K.on("drain",function(){if(N){let M=N;N=null,M()}}),K.on("finish",function(){if(x){let M=x;x=null,M()}})),le&&(h($,M=>{le=!1,M&&v($,M),j(M)}),$.on("readable",function(){if(P){let M=P;P=null,M()}}),$.on("end",function(){U.push(null)}),U._read=function(){for(;;){let M=$.read();if(M===null){P=U._read;return}if(!U.push(M))return}}),U._destroy=function(M,Q){!M&&C!==null&&(M=new d),P=null,N=null,x=null,C===null?Q(M):(C=Q,v(K,M),v($,M))},U}return O1}function sa(){if(hL)return N1;hL=!0;let{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Nr();N1=s;let i=zb(),o=$1();n(s.prototype,i.prototype),n(s,i);{let f=t(o.prototype);for(let h=0;h<f.length;h++){let d=f[h];s.prototype[d]||(s.prototype[d]=o.prototype[d])}}function s(f){if(!(this instanceof s))return new s(f);i.call(this,f),o.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(s.prototype,{writable:{__proto__:null,...e(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(o.prototype,"writableLength")},writableFinished:{__proto__:null,...e(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let a;function u(){return a===void 0&&(a={}),a}s.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},s.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return s.from=function(f){return c||(c=mW()),c(f,"body")},N1}function AL(){if(dL)return k1;dL=!0;let{ObjectSetPrototypeOf:r,Symbol:e}=Nr();k1=s;let{ERR_METHOD_NOT_IMPLEMENTED:t}=fi().codes,n=sa(),{getHighWaterMark:i}=$b();r(s.prototype,n.prototype),r(s,n);let o=e("kCallback");function s(c){if(!(this instanceof s))return new s(c);let f=c?i(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),n.call(this,c),this._readableState.sync=!1,this[o]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function a(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==a&&a.call(this)}return s.prototype._final=a,s.prototype._transform=function(c,f,h){throw new t("_transform()")},s.prototype._write=function(c,f,h){let d=this._readableState,m=this._writableState,b=d.length;this._transform(c,f,(v,w)=>{if(v){h(v);return}w!=null&&this.push(w),m.ended||b===d.length||d.length<d.highWaterMark?h():this[o]=h})},s.prototype._read=function(){if(this[o]){let c=this[o];this[o]=null,c()}},k1}function xL(){if(pL)return L1;pL=!0;let{ObjectSetPrototypeOf:r}=Nr();L1=t;let e=AL();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,o){o(null,n)},L1}function z1(){if(gL)return P1;gL=!0;let r=zr,{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=Nr(),o=vl(),{once:s}=Vn(),a=wh(),u=sa(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:m,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:v}=fi(),{validateFunction:w,validateAbortSignal:y}=pg(),{isIterable:_,isReadable:E,isReadableNodeStream:S,isNodeStream:A,isTransformStream:F,isWebStream:I,isReadableStream:X,isReadableFinished:Z}=oa(),H=globalThis.AbortController||dg().AbortController,ne,L,$;function K(M,Q,ce){let _e=!1;M.on("close",()=>{_e=!0});let re=o(M,{readable:Q,writable:ce},W=>{_e=!W});return{destroy:W=>{_e||(_e=!0,a.destroyer(M,W||new m("pipe")))},cleanup:re}}function le(M){return w(M[M.length-1],"streams[stream.length - 1]"),M.pop()}function te(M){if(_(M))return M;if(S(M))return N(M);throw new f("val",["Readable","Iterable","AsyncIterable"],M)}async function*N(M){L||(L=zb()),yield*L.prototype[n].call(M)}async function x(M,Q,ce,{end:_e}){let re,W=null,oe=V=>{if(V&&(re=V),W){let B=W;W=null,B()}},we=()=>new t((V,B)=>{re?B(re):W=()=>{re?B(re):V()}});Q.on("drain",oe);let xe=o(Q,{readable:!1},oe);try{Q.writableNeedDrain&&await we();for await(let V of M)Q.write(V)||await we();_e&&(Q.end(),await we()),ce()}catch(V){ce(re!==V?c(re,V):V)}finally{xe(),Q.off("drain",oe)}}async function P(M,Q,ce,{end:_e}){F(Q)&&(Q=Q.writable);let re=Q.getWriter();try{for await(let W of M)await re.ready,re.write(W).catch(()=>{});await re.ready,_e&&await re.close(),ce()}catch(W){try{await re.abort(W),ce(W)}catch(oe){ce(oe)}}}function C(...M){return U(M,s(le(M)))}function U(M,Q,ce){if(M.length===1&&e(M[0])&&(M=M[0]),M.length<2)throw new d("streams");let _e=new H,re=_e.signal,W=ce?.signal,oe=[];y(W,"options.signal");function we(){be(new v)}$=$||Vn().addAbortListener;let xe;W&&(xe=$(W,we));let V,B,se=[],ge=0;function Se(ke){be(ke,--ge===0)}function be(ke,Oe){var Ve;if(ke&&(!V||V.code==="ERR_STREAM_PREMATURE_CLOSE")&&(V=ke),!(!V&&!Oe)){for(;se.length;)se.shift()(V);(Ve=xe)===null||Ve===void 0||Ve[i](),_e.abort(),Oe&&(V||oe.forEach(Je=>Je()),r.nextTick(Q,V,B))}}let pe;for(let ke=0;ke<M.length;ke++){let Oe=M[ke],Ve=ke<M.length-1,Je=ke>0,tt=Ve||ce?.end!==!1,T=ke===M.length-1;if(A(Oe)){let g=function(p){p&&p.name!=="AbortError"&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Se(p)};if(tt){let{destroy:p,cleanup:R}=K(Oe,Ve,Je);se.push(p),E(Oe)&&T&&oe.push(R)}Oe.on("error",g),E(Oe)&&T&&oe.push(()=>{Oe.removeListener("error",g)})}if(ke===0)if(typeof Oe=="function"){if(pe=Oe({signal:re}),!_(pe))throw new h("Iterable, AsyncIterable or Stream","source",pe)}else _(Oe)||S(Oe)||F(Oe)?pe=Oe:pe=u.from(Oe);else if(typeof Oe=="function"){if(F(pe)){var Ae;pe=te((Ae=pe)===null||Ae===void 0?void 0:Ae.readable)}else pe=te(pe);if(pe=Oe(pe,{signal:re}),Ve){if(!_(pe,!0))throw new h("AsyncIterable",`transform[${ke-1}]`,pe)}else{var $e;ne||(ne=xL());let g=new ne({objectMode:!0}),p=($e=pe)===null||$e===void 0?void 0:$e.then;if(typeof p=="function")ge++,p.call(pe,D=>{B=D,D!=null&&g.write(D),tt&&g.end(),r.nextTick(Se)},D=>{g.destroy(D),r.nextTick(Se,D)});else if(_(pe,!0))ge++,x(pe,g,Se,{end:tt});else if(X(pe)||F(pe)){let D=pe.readable||pe;ge++,x(D,g,Se,{end:tt})}else throw new h("AsyncIterable or Promise","destination",pe);pe=g;let{destroy:R,cleanup:J}=K(pe,!1,!0);se.push(R),T&&oe.push(J)}}else if(A(Oe)){if(S(pe)){ge+=2;let g=j(pe,Oe,Se,{end:tt});E(Oe)&&T&&oe.push(g)}else if(F(pe)||X(pe)){let g=pe.readable||pe;ge++,x(g,Oe,Se,{end:tt})}else if(_(pe))ge++,x(pe,Oe,Se,{end:tt});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);pe=Oe}else if(I(Oe)){if(S(pe))ge++,P(te(pe),Oe,Se,{end:tt});else if(X(pe)||_(pe))ge++,P(pe,Oe,Se,{end:tt});else if(F(pe))ge++,P(pe.readable,Oe,Se,{end:tt});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],pe);pe=Oe}else pe=u.from(Oe)}return(re!=null&&re.aborted||W!=null&&W.aborted)&&r.nextTick(we),pe}function j(M,Q,ce,{end:_e}){let re=!1;if(Q.on("close",()=>{re||ce(new b)}),M.pipe(Q,{end:!1}),_e){let W=function(){re=!0,Q.end()};Z(M)?r.nextTick(W):M.once("end",W)}else ce();return o(M,{readable:!0,writable:!1},W=>{let oe=M._readableState;W&&W.code==="ERR_STREAM_PREMATURE_CLOSE"&&oe&&oe.ended&&!oe.errored&&!oe.errorEmitted?M.once("end",ce).once("error",ce):ce(W)}),o(Q,{readable:!1,writable:!0},ce)}return P1={pipelineImpl:U,pipeline:C},P1}function SL(){if(mL)return M1;mL=!0;let{pipeline:r}=z1(),e=sa(),{destroyer:t}=wh(),{isNodeStream:n,isReadable:i,isWritable:o,isWebStream:s,isTransformStream:a,isWritableStream:u,isReadableStream:c}=oa(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:d}}=fi(),m=vl();return M1=function(...v){if(v.length===0)throw new d("streams");if(v.length===1)return e.from(v[0]);let w=[...v];if(typeof v[0]=="function"&&(v[0]=e.from(v[0])),typeof v[v.length-1]=="function"){let ne=v.length-1;v[ne]=e.from(v[ne])}for(let ne=0;ne<v.length;++ne)if(!(!n(v[ne])&&!s(v[ne]))){if(ne<v.length-1&&!(i(v[ne])||c(v[ne])||a(v[ne])))throw new h(`streams[${ne}]`,w[ne],"must be readable");if(ne>0&&!(o(v[ne])||u(v[ne])||a(v[ne])))throw new h(`streams[${ne}]`,w[ne],"must be writable")}let y,_,E,S,A;function F(ne){let L=S;S=null,L?L(ne):ne?A.destroy(ne):!H&&!Z&&A.destroy()}let I=v[0],X=r(v,F),Z=!!(o(I)||u(I)||a(I)),H=!!(i(X)||c(X)||a(X));if(A=new e({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(X!=null&&X.readableObjectMode),writable:Z,readable:H}),Z){if(n(I))A._write=function(L,$,K){I.write(L,$)?K():y=K},A._final=function(L){I.end(),_=L},I.on("drain",function(){if(y){let L=y;y=null,L()}});else if(s(I)){let $=(a(I)?I.writable:I).getWriter();A._write=async function(K,le,te){try{await $.ready,$.write(K).catch(()=>{}),te()}catch(N){te(N)}},A._final=async function(K){try{await $.ready,$.close().catch(()=>{}),_=K}catch(le){K(le)}}}let ne=a(X)?X.readable:X;m(ne,()=>{if(_){let L=_;_=null,L()}})}if(H){if(n(X))X.on("readable",function(){if(E){let ne=E;E=null,ne()}}),X.on("end",function(){A.push(null)}),A._read=function(){for(;;){let ne=X.read();if(ne===null){E=A._read;return}if(!A.push(ne))return}};else if(s(X)){let L=(a(X)?X.readable:X).getReader();A._read=async function(){for(;;)try{let{value:$,done:K}=await L.read();if(!A.push($))return;if(K){A.push(null);return}}catch{return}}}}return A._destroy=function(ne,L){!ne&&S!==null&&(ne=new f),E=null,y=null,_=null,S===null?L(ne):(S=L,n(X)&&t(X,ne))},A},M1}function yW(){if(yL)return Ub;yL=!0;let r=globalThis.AbortController||dg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:o}=fi(),{validateAbortSignal:s,validateInteger:a,validateObject:u}=pg(),c=Nr().Symbol("kWeak"),f=Nr().Symbol("kResistStopPropagation"),{finished:h}=vl(),d=SL(),{addAbortSignalNoValidate:m}=jb(),{isWritable:b,isNodeStream:v}=oa(),{deprecate:w}=Vn(),{ArrayPrototypePush:y,Boolean:_,MathFloor:E,Number:S,NumberIsNaN:A,Promise:F,PromiseReject:I,PromiseResolve:X,PromisePrototypeThen:Z,Symbol:H}=Nr(),ne=H("kEmpty"),L=H("kEof");function $(W,oe){if(oe!=null&&u(oe,"options"),oe?.signal!=null&&s(oe.signal,"options.signal"),v(W)&&!b(W))throw new e("stream",W,"must be writable");let we=d(this,W);return oe!=null&&oe.signal&&m(oe.signal,we),we}function K(W,oe){if(typeof W!="function")throw new t("fn",["Function","AsyncFunction"],W);oe!=null&&u(oe,"options"),oe?.signal!=null&&s(oe.signal,"options.signal");let we=1;oe?.concurrency!=null&&(we=E(oe.concurrency));let xe=we-1;return oe?.highWaterMark!=null&&(xe=E(oe.highWaterMark)),a(we,"options.concurrency",1),a(xe,"options.highWaterMark",0),xe+=we,async function*(){let B=Vn().AbortSignalAny([oe?.signal].filter(_)),se=this,ge=[],Se={signal:B},be,pe,Ae=!1,$e=0;function ke(){Ae=!0,Oe()}function Oe(){$e-=1,Ve()}function Ve(){pe&&!Ae&&$e<we&&ge.length<xe&&(pe(),pe=null)}async function Je(){try{for await(let tt of se){if(Ae)return;if(B.aborted)throw new o;try{if(tt=W(tt,Se),tt===ne)continue;tt=X(tt)}catch(T){tt=I(T)}$e+=1,Z(tt,Oe,ke),ge.push(tt),be&&(be(),be=null),!Ae&&(ge.length>=xe||$e>=we)&&await new F(T=>{pe=T})}ge.push(L)}catch(tt){let T=I(tt);Z(T,Oe,ke),ge.push(T)}finally{Ae=!0,be&&(be(),be=null)}}Je();try{for(;;){for(;ge.length>0;){let tt=await ge[0];if(tt===L)return;if(B.aborted)throw new o;tt!==ne&&(yield tt),ge.shift(),Ve()}await new F(tt=>{be=tt})}}finally{Ae=!0,pe&&(pe(),pe=null)}}.call(this)}function le(W=void 0){return W!=null&&u(W,"options"),W?.signal!=null&&s(W.signal,"options.signal"),async function*(){let we=0;for await(let V of this){var xe;if(W!=null&&(xe=W.signal)!==null&&xe!==void 0&&xe.aborted)throw new o({cause:W.signal.reason});yield[we++,V]}}.call(this)}async function te(W,oe=void 0){for await(let we of C.call(this,W,oe))return!0;return!1}async function N(W,oe=void 0){if(typeof W!="function")throw new t("fn",["Function","AsyncFunction"],W);return!await te.call(this,async(...we)=>!await W(...we),oe)}async function x(W,oe){for await(let we of C.call(this,W,oe))return we}async function P(W,oe){if(typeof W!="function")throw new t("fn",["Function","AsyncFunction"],W);async function we(xe,V){return await W(xe,V),ne}for await(let xe of K.call(this,we,oe));}function C(W,oe){if(typeof W!="function")throw new t("fn",["Function","AsyncFunction"],W);async function we(xe,V){return await W(xe,V)?xe:ne}return K.call(this,we,oe)}class U extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function j(W,oe,we){var xe;if(typeof W!="function")throw new t("reducer",["Function","AsyncFunction"],W);we!=null&&u(we,"options"),we?.signal!=null&&s(we.signal,"options.signal");let V=arguments.length>1;if(we!=null&&(xe=we.signal)!==null&&xe!==void 0&&xe.aborted){let be=new o(void 0,{cause:we.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(be)),be}let B=new r,se=B.signal;if(we!=null&&we.signal){let be={once:!0,[c]:this,[f]:!0};we.signal.addEventListener("abort",()=>B.abort(),be)}let ge=!1;try{for await(let be of this){var Se;if(ge=!0,we!=null&&(Se=we.signal)!==null&&Se!==void 0&&Se.aborted)throw new o;V?oe=await W(oe,be,{signal:se}):(oe=be,V=!0)}if(!ge&&!V)throw new U}finally{B.abort()}return oe}async function M(W){W!=null&&u(W,"options"),W?.signal!=null&&s(W.signal,"options.signal");let oe=[];for await(let xe of this){var we;if(W!=null&&(we=W.signal)!==null&&we!==void 0&&we.aborted)throw new o(void 0,{cause:W.signal.reason});y(oe,xe)}return oe}function Q(W,oe){let we=K.call(this,W,oe);return async function*(){for await(let V of we)yield*V}.call(this)}function ce(W){if(W=S(W),A(W))return 0;if(W<0)throw new i("number",">= 0",W);return W}function _e(W,oe=void 0){return oe!=null&&u(oe,"options"),oe?.signal!=null&&s(oe.signal,"options.signal"),W=ce(W),async function*(){var xe;if(oe!=null&&(xe=oe.signal)!==null&&xe!==void 0&&xe.aborted)throw new o;for await(let B of this){var V;if(oe!=null&&(V=oe.signal)!==null&&V!==void 0&&V.aborted)throw new o;W--<=0&&(yield B)}}.call(this)}function re(W,oe=void 0){return oe!=null&&u(oe,"options"),oe?.signal!=null&&s(oe.signal,"options.signal"),W=ce(W),async function*(){var xe;if(oe!=null&&(xe=oe.signal)!==null&&xe!==void 0&&xe.aborted)throw new o;for await(let B of this){var V;if(oe!=null&&(V=oe.signal)!==null&&V!==void 0&&V.aborted)throw new o;if(W-- >0&&(yield B),W<=0)return}}.call(this)}return Ub.streamReturningOperators={asIndexedPairs:w(le,"readable.asIndexedPairs will be removed in a future version."),drop:_e,filter:C,flatMap:Q,map:K,take:re,compose:$},Ub.promiseReturningOperators={every:N,forEach:P,reduce:j,toArray:M,some:te,find:x},Ub}function TL(){if(bL)return B1;bL=!0;let{ArrayPrototypePop:r,Promise:e}=Nr(),{isIterable:t,isNodeStream:n,isWebStream:i}=oa(),{pipelineImpl:o}=z1(),{finished:s}=vl();CL();function a(...u){return new e((c,f)=>{let h,d,m=u[u.length-1];if(m&&typeof m=="object"&&!n(m)&&!t(m)&&!i(m)){let b=r(u);h=b.signal,d=b.end}o(u,(b,v)=>{b?f(b):c(v)},{signal:h,end:d})})}return B1={finished:s,pipeline:a},B1}function CL(){if(wL)return F1;wL=!0;let{Buffer:r}=fn(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Nr(),{promisify:{custom:i}}=Vn(),{streamReturningOperators:o,promiseReturningOperators:s}=yW(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=fi(),u=SL(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=$b(),{pipeline:h}=z1(),{destroyer:d}=wh(),m=vl(),b=TL(),v=oa(),w=F1=j1().Stream;w.isDestroyed=v.isDestroyed,w.isDisturbed=v.isDisturbed,w.isErrored=v.isErrored,w.isReadable=v.isReadable,w.isWritable=v.isWritable,w.Readable=zb();for(let _ of t(o)){let S=function(...A){if(new.target)throw a();return w.Readable.from(n(E,this||vL,A))},E=o[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(let _ of t(s)){let S=function(...A){if(new.target)throw a();return n(E,this||vL,A)},E=s[_];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(w.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}w.Writable=$1(),w.Duplex=sa(),w.Transform=AL(),w.PassThrough=xL(),w.pipeline=h;let{addAbortSignal:y}=jb();return w.addAbortSignal=y,w.finished=m,w.destroy=d,w.compose=u,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=f,e(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),e(h,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),e(m,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),w.Stream=w,w._isUint8Array=function(E){return E instanceof Uint8Array},w._uint8ArrayToBuffer=function(E){return r.from(E.buffer,E.byteOffset,E.byteLength)},F1}function bW(){if(_L)return Or;_L=!0;let r=CL(),e=TL(),t=r.Readable.destroy;return Or=r.Readable,Or._uint8ArrayToBuffer=r._uint8ArrayToBuffer,Or._isUint8Array=r._isUint8Array,Or.isDisturbed=r.isDisturbed,Or.isErrored=r.isErrored,Or.isReadable=r.isReadable,Or.Readable=r.Readable,Or.Writable=r.Writable,Or.Duplex=r.Duplex,Or.Transform=r.Transform,Or.PassThrough=r.PassThrough,Or.addAbortSignal=r.addAbortSignal,Or.finished=r.finished,Or.destroy=r.destroy,Or.destroy=t,Or.pipeline=r.pipeline,Or.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Or.Stream=r.Stream,Or.default=Or,Or}var v1,Kk,fg,Zk,Bb,Jk,_1,Qk,E1,eL,A1,tL,Fb,rL,x1,nL,S1,iL,hg,sL,T1,oL,C1,aL,R1,lL,D1,uL,qe,I1,cL,Xe,O1,fL,N1,hL,k1,dL,L1,pL,P1,gL,M1,mL,Ub,yL,B1,bL,F1,wL,vL,Or,_L,ur,U1,wW,vW,_W,EW,AW,xW,SW,TW,mg=Jt(()=>{Ce();De();Re();Ff();bh();Mu();Xk();yh();$p();a1();v1={},Kk=!1;fg={},Zk=!1;Bb={},Jk=!1;_1={},Qk=!1;E1={},eL=!1;A1={},tL=!1;Fb={},rL=!1;x1={},nL=!1;S1={},iL=!1;hg={},sL=!1;T1={},oL=!1;C1={},aL=!1;R1={},lL=!1;D1={},uL=!1,qe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;I1={},cL=!1,Xe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;O1={},fL=!1;N1={},hL=!1;k1={},dL=!1;L1={},pL=!1;P1={},gL=!1;M1={},mL=!1;Ub={},yL=!1;B1={},bL=!1;F1={},wL=!1,vL=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window;Or={},_L=!1;ur=bW();ur._uint8ArrayToBuffer;ur._isUint8Array;ur.isDisturbed;ur.isErrored;ur.isReadable;ur.Readable;ur.Writable;ur.Duplex;ur.Transform;ur.PassThrough;ur.addAbortSignal;ur.finished;ur.destroy;ur.pipeline;ur.compose;ur.Stream;U1=ur.Readable;U1.wrap=function(r,e){return e=Object.assign({objectMode:r.readableObjectMode!=null||r.objectMode!=null||!0},e),e.destroy=function(t,n){r.destroy(t),n(t)},new U1(e).wrap(r)};wW=ur.Writable,vW=ur.Duplex,_W=ur.Transform,EW=ur.PassThrough,AW=ur.finished,xW=ur.pipeline,SW=ur.Stream,TW={finished:Lb(ur.finished),pipeline:Lb(ur.pipeline)}});var OL=st((aQ,IL)=>{Ce();De();Re();IL.exports=Wb;function Wb(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}Wb.prototype.go=function(r){this.pending<this.max?DL(this,r):this.waiting.push(r)};Wb.prototype.wait=function(r){this.pending===0?r(this.error):this.listeners.push(r)};Wb.prototype.hold=function(){return RL(this)};function RL(r){r.pending+=1;var e=!1;return t;function t(i){if(e)throw new Error("callback called twice");if(e=!0,r.error=r.error||i,r.pending-=1,r.waiting.length>0&&r.pending<r.max)DL(r,r.waiting.shift());else if(r.pending===0){var o=r.listeners;r.listeners=[],o.forEach(n)}}function n(i){i(r.error)}}function DL(r,e){e(RL(r))}});var kL=st(bg=>{Ce();De();Re();var yg=(Gp(),Ir(Hp)),qb=(yh(),Ir(lg)),W1=(mg(),Ir(gg)),NL=W1.Readable,q1=W1.Writable,CW=W1.PassThrough,RW=OL(),Hb=(bh(),Ir(ug)).EventEmitter;bg.createFromBuffer=DW;bg.createFromFd=IW;bg.BufferSlicer=la;bg.FdSlicer=aa;qb.inherits(aa,Hb);function aa(r,e){e=e||{},Hb.call(this),this.fd=r,this.pend=new RW,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}aa.prototype.read=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.read(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.write=function(r,e,t,n,i){var o=this;o.pend.go(function(s){yg.write(o.fd,r,e,t,n,function(a,u,c){s(),i(a,u,c)})})};aa.prototype.createReadStream=function(r){return new Gb(this,r)};aa.prototype.createWriteStream=function(r){return new Vb(this,r)};aa.prototype.ref=function(){this.refCount+=1};aa.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.autoClose&&yg.close(r.fd,e);function e(t){t?r.emit("error",t):r.emit("close")}};qb.inherits(Gb,NL);function Gb(r,e){e=e||{},NL.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}Gb.prototype._read=function(r){var e=this;if(!e.destroyed){var t=Math.min(e._readableState.highWaterMark,r);if(e.endOffset!=null&&(t=Math.min(t,e.endOffset-e.pos)),t<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(t);yg.read(e.context.fd,i,0,t,e.pos,function(o,s){o?e.destroy(o):s===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=s,e.push(i.slice(0,s))),n()})})}};Gb.prototype.destroy=function(r){this.destroyed||(r=r||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",r),this.context.unref())};qb.inherits(Vb,q1);function Vb(r,e){e=e||{},q1.call(this,e),this.context=r,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}Vb.prototype._write=function(r,e,t){var n=this;if(!n.destroyed){if(n.pos+r.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),t(i);return}n.context.pend.go(function(o){if(n.destroyed)return o();yg.write(n.context.fd,r,0,r.length,n.pos,function(s,a){s?(n.destroy(),o(),t(s)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),o(),t())})})}};Vb.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};qb.inherits(la,Hb);function la(r,e){Hb.call(this),e=e||{},this.refCount=0,this.buffer=r,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}la.prototype.read=function(r,e,t,n,i){if(!(0<=e&&e<=r.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+r.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+t>r.length&&(t=r.length-e),n+t>this.buffer.length&&(t=this.buffer.length-n),t<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(r,e,n,n+t),setImmediate(function(){i(null,t)})};la.prototype.write=function(r,e,t,n,i){r.copy(this.buffer,n,e,e+t),setImmediate(function(){i(null,t,r)})};la.prototype.createReadStream=function(r){r=r||{};var e=new CW(r);e.destroyed=!1,e.start=r.start||0,e.endOffset=r.end,e.pos=e.endOffset||this.buffer.length;for(var t=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=t.length){n<t.length&&e.write(t.slice(n,t.length));break}e.write(t.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};la.prototype.createWriteStream=function(r){var e=this;r=r||{};var t=new q1(r);return t.start=r.start||0,t.endOffset=r.end==null?this.buffer.length:+r.end,t.bytesWritten=0,t.pos=t.start,t.destroyed=!1,t._write=function(n,i,o){if(!t.destroyed){var s=t.pos+n.length;if(s>t.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",t.destroyed=!0,o(a);return}n.copy(e.buffer,t.pos,0,n.length),t.bytesWritten+=n.length,t.pos=s,t.emit("progress"),o()}},t.destroy=function(){t.destroyed=!0},t};la.prototype.ref=function(){this.refCount+=1};la.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function DW(r,e){return new la(r,e)}function IW(r,e){return new aa(r,e)}});var ML=st((gQ,PL)=>{Ce();De();Re();var _l=(ll(),Ir(Uf)).Buffer,H1=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(H1=new Int32Array(H1));function LL(r){if(_l.isBuffer(r))return r;var e=typeof _l.alloc=="function"&&typeof _l.from=="function";if(typeof r=="number")return e?_l.alloc(r):new _l(r);if(typeof r=="string")return e?_l.from(r):new _l(r);throw new Error("input must be buffer, number, or string, received "+typeof r)}function OW(r){var e=LL(4);return e.writeInt32BE(r,0),e}function G1(r,e){r=LL(r),_l.isBuffer(e)&&(e=e.readUInt32BE(0));for(var t=~~e^-1,n=0;n<r.length;n++)t=H1[(t^r[n])&255]^t>>>8;return t^-1}function V1(){return OW(G1.apply(null,arguments))}V1.signed=function(){return G1.apply(null,arguments)};V1.unsigned=function(){return G1.apply(null,arguments)>>>0};PL.exports=V1});var GL=st(Si=>{Ce();De();Re();var Y1=(Gp(),Ir(Hp)),NW=(Ik(),Ir(Dk)),BL=kL(),kW=ML(),Kb=(yh(),Ir(lg)),Zb=(bh(),Ir(ug)).EventEmitter,FL=(mg(),Ir(gg)).Transform,K1=(mg(),Ir(gg)).PassThrough,LW=(mg(),Ir(gg)).Writable;Si.open=PW;Si.fromFd=UL;Si.fromBuffer=MW;Si.fromRandomAccessReader=Z1;Si.dosDateTimeToDate=zL;Si.getFileNameLowLevel=WL;Si.validateFileName=qL;Si.parseExtraFields=HL;Si.ZipFile=uo;Si.Entry=wg;Si.LocalFileHeader=$L;Si.RandomAccessReader=El;function PW(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Xb),Y1.open(r,"r",function(n,i){if(n)return t(n);UL(i,e,function(o,s){o&&Y1.close(i,Xb),t(o,s)})})}function UL(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),t==null&&(t=Xb),Y1.fstat(r,function(n,i){if(n)return t(n);var o=BL.createFromFd(r,{autoClose:!0});Z1(o,i.size,e,t)})}function MW(r,e,t){typeof e=="function"&&(t=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=BL.createFromBuffer(r,{maxChunkSize:65536});Z1(n,r.length,e,t)}function Z1(r,e,t,n){typeof t=="function"&&(n=t,t=null),t==null&&(t={}),t.autoClose==null&&(t.autoClose=!0),t.lazyEntries==null&&(t.lazyEntries=!1),t.decodeStrings==null&&(t.decodeStrings=!0);var i=!!t.decodeStrings;if(t.validateEntrySizes==null&&(t.validateEntrySizes=!0),t.strictFileNames==null&&(t.strictFileNames=!1),n==null&&(n=Xb),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");r.ref();var o=22,s=20,a=65535,u=Math.min(s+o+a,e),c=ua(u),f=e-c.length;_h(r,c,0,u,f,function(h){if(h)return n(h);for(var d=u-o;d>=0;d-=1)if(c.readUInt32LE(d)===101010256){var m=c.subarray(d),b=m.readUInt16LE(4),v=m.readUInt16LE(10),w=m.readUInt32LE(16),y=m.readUInt16LE(20),_=m.length-o;if(y!==_)return n(new Error("Invalid comment length. Expected: "+_+". Found: "+y+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var E=i?Yb(m.subarray(22),!1):m.subarray(22);if(d-s>=0&&c.readUInt32LE(d-s)===117853008){var S=c.subarray(d-s,d-s+s),A=vh(S,8),F=ua(56);return _h(r,F,0,F.length,A,function(I){return I?n(I):F.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(b=F.readUInt32LE(16),b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):(v=vh(F,32),w=vh(F,48),n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))))})}return b!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+b)):n(null,new uo(r,w,e,v,E,t.autoClose,t.lazyEntries,i,t.validateEntrySizes,t.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}Kb.inherits(uo,Zb);function uo(r,e,t,n,i,o,s,a,u,c){var f=this;Zb.call(f),f.reader=r,f.reader.on("error",function(h){jL(f,h)}),f.reader.once("close",function(){f.emit("close")}),f.readEntryCursor=e,f.fileSize=t,f.entryCount=n,f.comment=i,f.entriesRead=0,f.autoClose=!!o,f.lazyEntries=!!s,f.decodeStrings=!!a,f.validateEntrySizes=!!u,f.strictFileNames=!!c,f.isOpen=!0,f.emittedError=!1,f.lazyEntries||f._readEntry()}uo.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function lo(r,e){r.autoClose&&r.close(),jL(r,e)}function jL(r,e){r.emittedError||(r.emittedError=!0,r.emit("error",e))}uo.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};uo.prototype._readEntry=function(){var r=this;if(r.entryCount===r.entriesRead){setImmediate(function(){r.autoClose&&r.close(),!r.emittedError&&r.emit("end")});return}if(!r.emittedError){var e=ua(46);_h(r.reader,e,0,e.length,r.readEntryCursor,function(t){if(t)return lo(r,t);if(!r.emittedError){var n=new wg,i=e.readUInt32LE(0);if(i!==33639248)return lo(r,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return lo(r,new Error("strong encryption is not supported"));r.readEntryCursor+=46,e=ua(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),_h(r.reader,e,0,e.length,r.readEntryCursor,function(o){if(o)return lo(r,o);if(!r.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var s=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,s),n.fileCommentRaw=e.subarray(s,s+n.fileCommentLength);try{n.extraFields=HL(n.extraFieldRaw)}catch(v){return lo(r,v)}if(r.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=Yb(n.fileCommentRaw,a),n.fileName=WL(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,r.strictFileNames);var u=qL(n.fileName);if(u!=null)return lo(r,new Error(u))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,r.readEntryCursor+=e.length,r.entriesRead+=1;for(var c=0;c<n.extraFields.length;c++){var f=n.extraFields[c];if(f.id===1){var h=f.data,d=0;if(n.uncompressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=vh(h,d),d+=8}if(n.compressedSize===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=vh(h,d),d+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(d+8>h.length)return lo(r,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=vh(h,d),d+=8}break}}if(r.validateEntrySizes&&n.compressionMethod===0){var m=n.uncompressedSize;if(n.isEncrypted()&&(m+=12),n.compressedSize!==m){var b="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return lo(r,new Error(b))}}r.emit("entry",n),r.lazyEntries||r._readEntry()}})}})}};uo.prototype.openReadStream=function(r,e,t){var n=this,i=0,o=r.compressedSize;if(t==null&&(t=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!r.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(r.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!r.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(r.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(r.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>r.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(o=e.end,o<0)throw new Error("options.end < 0");if(o>r.compressedSize)throw new Error("options.end > entry.compressedSize");if(o<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return t(new Error("closed"));if(r.isEncrypted()&&e.decrypt!==!1)return t(new Error("entry is encrypted, and options.decrypt !== false"));var s;if(r.compressionMethod===0)s=!1;else if(r.compressionMethod===8)s=e.decompress!=null?e.decompress:!0;else return t(new Error("unsupported compression method: "+r.compressionMethod));n.readLocalFileHeader(r,{minimal:!0},function(a,u){if(a)return t(a);n.openReadStreamLowLevel(u.fileDataStart,r.compressedSize,i,o,s,r.uncompressedSize,t)})};uo.prototype.openReadStreamLowLevel=function(r,e,t,n,i,o,s){var a=this,u=r+e,c=a.reader.createReadStream({start:r+t,end:r+n}),f=c;if(i){var h=!1,d=NW.createInflateRaw();c.on("error",function(m){setImmediate(function(){h||d.emit("error",m)})}),c.pipe(d),a.validateEntrySizes?(f=new vg(o),d.on("error",function(m){setImmediate(function(){h||f.emit("error",m)})}),d.pipe(f)):f=d,X1(f,function(){h=!0,d!==f&&d.unpipe(f),c.unpipe(d),c.destroy()})}s(null,f)};uo.prototype.readLocalFileHeader=function(r,e,t){var n=this;t==null&&(t=e,e=null),e==null&&(e={}),n.reader.ref();var i=ua(30);_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader,function(o){try{if(o)return t(o);var s=i.readUInt32LE(0);if(s!==67324752)return t(new Error("invalid local file header signature: 0x"+s.toString(16)));var a=i.readUInt16LE(26),u=i.readUInt16LE(28),c=r.relativeOffsetOfLocalHeader+30+a+u;if(c+r.compressedSize>n.fileSize)return t(new Error("file data overflows file bounds: "+c+" + "+r.compressedSize+" > "+n.fileSize));if(e.minimal)return t(null,{fileDataStart:c});var f=new $L;f.fileDataStart=c,f.versionNeededToExtract=i.readUInt16LE(4),f.generalPurposeBitFlag=i.readUInt16LE(6),f.compressionMethod=i.readUInt16LE(8),f.lastModFileTime=i.readUInt16LE(10),f.lastModFileDate=i.readUInt16LE(12),f.crc32=i.readUInt32LE(14),f.compressedSize=i.readUInt32LE(18),f.uncompressedSize=i.readUInt32LE(22),f.fileNameLength=a,f.extraFieldLength=u,i=ua(a+u),n.reader.ref(),_h(n.reader,i,0,i.length,r.relativeOffsetOfLocalHeader+30,function(h){try{return h?t(h):(f.fileName=i.subarray(0,a),f.extraField=i.subarray(a),t(null,f))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function wg(){}wg.prototype.getLastModDate=function(){return zL(this.lastModFileDate,this.lastModFileTime)};wg.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};wg.prototype.isCompressed=function(){return this.compressionMethod===8};function $L(){}function zL(r,e){var t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,s=(e&31)*2,a=e>>5&63,u=e>>11&31;return new Date(i,n,t,u,a,s,o)}function WL(r,e,t,n){for(var i=null,o=0;o<t.length;o++){var s=t[o];if(s.id===28789){if(s.data.length<6||s.data.readUInt8(0)!==1)continue;var a=s.data.readUInt32LE(1);if(kW.unsigned(e)!==a)continue;i=Yb(s.data.subarray(5),!0);break}}if(i==null){var u=(r&2048)!==0;i=Yb(e,u)}return n||(i=i.replace(/\\/g,"/")),i}function qL(r){return r.indexOf("\\")!==-1?"invalid characters in fileName: "+r:/^[a-zA-Z]:/.test(r)||/^\//.test(r)?"absolute path: "+r:r.split("/").indexOf("..")!==-1?"invalid relative path: "+r:null}function HL(r){for(var e=[],t=0;t<r.length-3;){var n=r.readUInt16LE(t+0),i=r.readUInt16LE(t+2),o=t+4,s=o+i;if(s>r.length)throw new Error("extra field length exceeds extra field buffer size");var a=r.subarray(o,s);e.push({id:n,data:a}),t=s}return e}function _h(r,e,t,n,i,o){if(n===0)return setImmediate(function(){o(null,ua(0))});r.read(e,t,n,i,function(s,a){if(s)return o(s);if(a<n)return o(new Error("unexpected EOF"));o()})}Kb.inherits(vg,FL);function vg(r){FL.call(this),this.actualByteCount=0,this.expectedByteCount=r}vg.prototype._transform=function(r,e,t){if(this.actualByteCount+=r.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return t(new Error(n))}t(null,r)};vg.prototype._flush=function(r){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return r(new Error(e))}r()};Kb.inherits(El,Zb);function El(){Zb.call(this),this.refCount=0}El.prototype.ref=function(){this.refCount+=1};El.prototype.unref=function(){var r=this;if(r.refCount-=1,r.refCount>0)return;if(r.refCount<0)throw new Error("invalid unref");r.close(e);function e(t){if(t)return r.emit("error",t);r.emit("close")}};El.prototype.createReadStream=function(r){r==null&&(r={});var e=r.start,t=r.end;if(e===t){var n=new K1;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,t),o=!1,s=new Jb(this);i.on("error",function(u){setImmediate(function(){o||s.emit("error",u)})}),X1(s,function(){i.unpipe(s),s.unref(),i.destroy()});var a=new vg(t-e);return s.on("error",function(u){setImmediate(function(){o||a.emit("error",u)})}),X1(a,function(){o=!0,s.unpipe(a),s.destroy()}),i.pipe(s).pipe(a)};El.prototype._readStreamForRange=function(r,e){throw new Error("not implemented")};El.prototype.read=function(r,e,t,n,i){var o=this.createReadStream({start:n,end:n+t}),s=new LW,a=0;s._write=function(u,c,f){u.copy(r,e+a,0,u.length),a+=u.length,f()},s.on("finish",i),o.on("error",function(u){i(u)}),o.pipe(s)};El.prototype.close=function(r){setImmediate(r)};Kb.inherits(Jb,K1);function Jb(r){K1.call(this),this.context=r,this.context.ref(),this.unreffedYet=!1}Jb.prototype._flush=function(r){this.unref(),r()};Jb.prototype.unref=function(r){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var BW="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function Yb(r,e){if(e)return r.toString("utf8");for(var t="",n=0;n<r.length;n++)t+=BW[r[n]];return t}function vh(r,e){var t=r.readUInt32LE(e),n=r.readUInt32LE(e+4);return n*4294967296+t}var ua;typeof Buffer.allocUnsafe=="function"?ua=function(r){return Buffer.allocUnsafe(r)}:ua=function(r){return new Buffer(r)};function X1(r,e){typeof r.destroy=="function"?r._destroy=function(t,n){e(),n?.(t)}:r.destroy=e}function Xb(r){if(r)throw r}});var J1=st((AQ,VL)=>{Ce();De();Re();VL.exports=(bh(),Ir(ug)).EventEmitter});var QL=st((CQ,JL)=>{"use strict";Ce();De();Re();function YL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function XL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?YL(Object(t),!0).forEach(function(n){FW(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):YL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function FW(r,e,t){return e=ZL(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function UW(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function KL(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ZL(n.key),n)}}function jW(r,e,t){return e&&KL(r.prototype,e),t&&KL(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ZL(r){var e=$W(r,"string");return typeof e=="symbol"?e:String(e)}function $W(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var zW=(ll(),Ir(Uf)),Qb=zW.Buffer,WW=(yh(),Ir(lg)),Q1=WW.inspect,qW=Q1&&Q1.custom||"inspect";function HW(r,e,t){Qb.prototype.copy.call(r,e,t)}JL.exports=(function(){function r(){UW(this,r),this.head=null,this.tail=null,this.length=0}return jW(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return Qb.alloc(0);for(var n=Qb.allocUnsafe(t>>>0),i=this.head,o=0;i;)HW(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?o+=s:o+=s.slice(0,t),t-=a,t===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=Qb.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),t-=a,t===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:qW,value:function(t,n){return Q1(this,XL(XL({},n),{},{depth:0,customInspect:!1}))}}]),r})()});var tA=st((OQ,tP)=>{"use strict";Ce();De();Re();function GW(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(eA,this,r)):process.nextTick(eA,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?process.nextTick(ew,t):(t._writableState.errorEmitted=!0,process.nextTick(eP,t,o)):process.nextTick(eP,t,o):e?(process.nextTick(ew,t),e(o)):process.nextTick(ew,t)}),this)}function eP(r,e){eA(r,e),ew(r)}function ew(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function VW(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function eA(r,e){r.emit("error",e)}function YW(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}tP.exports={destroy:GW,undestroy:VW,errorOrDestroy:YW}});var Ku=st((PQ,iP)=>{"use strict";Ce();De();Re();function XW(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var nP={};function os(r,e,t){t||(t=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=(function(o){XW(s,o);function s(a,u,c){return o.call(this,n(a,u,c))||this}return s})(t);i.prototype.name=t.name,i.prototype.code=r,nP[r]=i}function rP(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function KW(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function ZW(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function JW(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}os("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);os("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&KW(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(ZW(r," argument"))i="The ".concat(r," ").concat(n," ").concat(rP(e,"type"));else{var o=JW(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(rP(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);os("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");os("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});os("ERR_STREAM_PREMATURE_CLOSE","Premature close");os("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});os("ERR_MULTIPLE_CALLBACK","Callback called multiple times");os("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");os("ERR_STREAM_WRITE_AFTER_END","write after end");os("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);os("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);os("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");iP.exports.codes=nP});var rA=st((UQ,sP)=>{"use strict";Ce();De();Re();var QW=Ku().codes.ERR_INVALID_OPT_VALUE;function eq(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function tq(r,e,t,n){var i=eq(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new QW(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}sP.exports={getHighWaterMark:tq}});var Zu=st((WQ,nA)=>{Ce();De();Re();typeof Object.create=="function"?nA.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:nA.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}});var aP=st((VQ,oP)=>{Ce();De();Re();oP.exports=rq;function rq(r,e){if(iA("noDeprecation"))return r;var t=!1;function n(){if(!t){if(iA("throwDeprecation"))throw new Error(e);iA("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function iA(r){try{if(!window.localStorage)return!1}catch{return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var aA=st((ZQ,dP)=>{"use strict";Ce();De();Re();dP.exports=kr;function uP(r){var e=this;this.next=null,this.entry=null,this.finish=function(){Dq(e,r)}}var Eh;kr.WritableState=Eg;var nq={deprecate:aP()},cP=J1(),rw=(ll(),Ir(Uf)).Buffer,iq=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function sq(r){return rw.from(r)}function oq(r){return rw.isBuffer(r)||r instanceof iq}var oA=tA(),aq=rA(),lq=aq.getHighWaterMark,Al=Ku().codes,uq=Al.ERR_INVALID_ARG_TYPE,cq=Al.ERR_METHOD_NOT_IMPLEMENTED,fq=Al.ERR_MULTIPLE_CALLBACK,hq=Al.ERR_STREAM_CANNOT_PIPE,dq=Al.ERR_STREAM_DESTROYED,pq=Al.ERR_STREAM_NULL_VALUES,gq=Al.ERR_STREAM_WRITE_AFTER_END,mq=Al.ERR_UNKNOWN_ENCODING,Ah=oA.errorOrDestroy;Zu()(kr,cP);function yq(){}function Eg(r,e,t){Eh=Eh||Ju(),r=r||{},typeof t!="boolean"&&(t=e instanceof Eh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=lq(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){xq(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new uP(this)}Eg.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Eg.prototype,"buffer",{get:nq.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var tw;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(tw=Function.prototype[Symbol.hasInstance],Object.defineProperty(kr,Symbol.hasInstance,{value:function(e){return tw.call(this,e)?!0:this!==kr?!1:e&&e._writableState instanceof Eg}})):tw=function(e){return e instanceof this};function kr(r){Eh=Eh||Ju();var e=this instanceof Eh;if(!e&&!tw.call(kr,this))return new kr(r);this._writableState=new Eg(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),cP.call(this)}kr.prototype.pipe=function(){Ah(this,new hq)};function bq(r,e){var t=new gq;Ah(r,t),process.nextTick(e,t)}function wq(r,e,t,n){var i;return t===null?i=new pq:typeof t!="string"&&!e.objectMode&&(i=new uq("chunk",["string","Buffer"],t)),i?(Ah(r,i),process.nextTick(n,i),!1):!0}kr.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&oq(r);return o&&!rw.isBuffer(r)&&(r=sq(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=yq),n.ending?bq(this,t):(o||wq(this,n,r,t))&&(n.pendingcb++,i=_q(this,n,o,r,e,t)),i};kr.prototype.cork=function(){this._writableState.corked++};kr.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&fP(this,r))};kr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new mq(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(kr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function vq(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=rw.from(e,t)),e}Object.defineProperty(kr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _q(r,e,t,n,i,o){if(!t){var s=vq(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else sA(r,e,!1,a,n,i,o);return u}function sA(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new dq("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function Eq(r,e,t,n,i){--e.pendingcb,t?(process.nextTick(i,n),process.nextTick(_g,r,e),r._writableState.errorEmitted=!0,Ah(r,n)):(i(n),r._writableState.errorEmitted=!0,Ah(r,n),_g(r,e))}function Aq(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function xq(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new fq;if(Aq(t),e)Eq(r,t,n,e,i);else{var o=hP(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&fP(r,t),n?process.nextTick(lP,r,t,o,i):lP(r,t,o,i)}}function lP(r,e,t,n){t||Sq(r,e),e.pendingcb--,n(),_g(r,e)}function Sq(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function fP(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,a=!0;t;)i[s]=t,t.isBuf||(a=!1),t=t.next,s+=1;i.allBuffers=a,sA(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new uP(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,f=t.callback,h=e.objectMode?1:u.length;if(sA(r,e,!1,h,u,c,f),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}kr.prototype._write=function(r,e,t){t(new cq("_write()"))};kr.prototype._writev=null;kr.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Rq(this,n,t),this};Object.defineProperty(kr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function hP(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function Tq(r,e){r._final(function(t){e.pendingcb--,t&&Ah(r,t),e.prefinished=!0,r.emit("prefinish"),_g(r,e)})}function Cq(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Tq,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function _g(r,e){var t=hP(e);if(t&&(Cq(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function Rq(r,e,t){e.ending=!0,_g(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function Dq(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(kr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});kr.prototype.destroy=oA.destroy;kr.prototype._undestroy=oA.undestroy;kr.prototype._destroy=function(r,e){e(r)}});var Ju=st((tee,gP)=>{"use strict";Ce();De();Re();var Iq=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};gP.exports=co;var pP=cA(),uA=aA();Zu()(co,pP);for(lA=Iq(uA.prototype),nw=0;nw<lA.length;nw++)iw=lA[nw],co.prototype[iw]||(co.prototype[iw]=uA.prototype[iw]);var lA,iw,nw;function co(r){if(!(this instanceof co))return new co(r);pP.call(this,r),uA.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Oq)))}Object.defineProperty(co.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(co.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(co.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Oq(){this._writableState.ended||process.nextTick(Nq,this)}function Nq(r){r.end()}Object.defineProperty(co.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var bP=st((fA,yP)=>{Ce();De();Re();var sw=(ll(),Ir(Uf)),ca=sw.Buffer;function mP(r,e){for(var t in r)e[t]=r[t]}ca.from&&ca.alloc&&ca.allocUnsafe&&ca.allocUnsafeSlow?yP.exports=sw:(mP(sw,fA),fA.Buffer=xh);function xh(r,e,t){return ca(r,e,t)}mP(ca,xh);xh.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ca(r,e,t)};xh.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ca(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};xh.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ca(r)};xh.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return sw.SlowBuffer(r)}});var pA=st(vP=>{"use strict";Ce();De();Re();var dA=bP().Buffer,wP=dA.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function kq(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function Lq(r){var e=kq(r);if(typeof e!="string"&&(dA.isEncoding===wP||!wP(r)))throw new Error("Unknown encoding: "+r);return e||r}vP.StringDecoder=Ag;function Ag(r){this.encoding=Lq(r);var e;switch(this.encoding){case"utf16le":this.text=jq,this.end=$q,e=4;break;case"utf8":this.fillLast=Bq,e=4;break;case"base64":this.text=zq,this.end=Wq,e=3;break;default:this.write=qq,this.end=Hq;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=dA.allocUnsafe(e)}Ag.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Ag.prototype.end=Uq;Ag.prototype.text=Fq;Ag.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function hA(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function Pq(r,e,t){var n=e.length-1;if(n<t)return 0;var i=hA(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=hA(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=hA(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function Mq(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function Bq(r){var e=this.lastTotal-this.lastNeed,t=Mq(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function Fq(r,e){var t=Pq(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function Uq(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function jq(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function $q(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function zq(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function Wq(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function qq(r){return r.toString(this.encoding)}function Hq(r){return r&&r.length?this.write(r):""}});var ow=st((hee,AP)=>{"use strict";Ce();De();Re();var _P=Ku().codes.ERR_STREAM_PREMATURE_CLOSE;function Gq(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function Vq(){}function Yq(r){return r.setHeader&&typeof r.abort=="function"}function EP(r,e,t){if(typeof e=="function")return EP(r,null,e);e||(e={}),t=Gq(t||Vq);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||a()},s=r._writableState&&r._writableState.finished,a=function(){i=!1,s=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,c=function(){n=!1,u=!0,i||t.call(r)},f=function(b){t.call(r,b)},h=function(){var b;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(b=new _P),t.call(r,b);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(b=new _P),t.call(r,b)},d=function(){r.req.on("finish",a)};return Yq(r)?(r.on("complete",a),r.on("abort",h),r.req?d():r.on("request",d)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",c),r.on("finish",a),e.error!==!1&&r.on("error",f),r.on("close",h),function(){r.removeListener("complete",a),r.removeListener("abort",h),r.removeListener("request",d),r.req&&r.req.removeListener("finish",a),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",a),r.removeListener("end",c),r.removeListener("error",f),r.removeListener("close",h)}}AP.exports=EP});var SP=st((mee,xP)=>{"use strict";Ce();De();Re();var aw;function xl(r,e,t){return e=Xq(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xq(r){var e=Kq(r,"string");return typeof e=="symbol"?e:String(e)}function Kq(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Zq=ow(),Sl=Symbol("lastResolve"),Qu=Symbol("lastReject"),xg=Symbol("error"),lw=Symbol("ended"),ec=Symbol("lastPromise"),gA=Symbol("handlePromise"),tc=Symbol("stream");function Tl(r,e){return{value:r,done:e}}function Jq(r){var e=r[Sl];if(e!==null){var t=r[tc].read();t!==null&&(r[ec]=null,r[Sl]=null,r[Qu]=null,e(Tl(t,!1)))}}function Qq(r){process.nextTick(Jq,r)}function eH(r,e){return function(t,n){r.then(function(){if(e[lw]){t(Tl(void 0,!0));return}e[gA](t,n)},n)}}var tH=Object.getPrototypeOf(function(){}),rH=Object.setPrototypeOf((aw={get stream(){return this[tc]},next:function(){var e=this,t=this[xg];if(t!==null)return Promise.reject(t);if(this[lw])return Promise.resolve(Tl(void 0,!0));if(this[tc].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[xg]?a(e[xg]):s(Tl(void 0,!0))})});var n=this[ec],i;if(n)i=new Promise(eH(n,this));else{var o=this[tc].read();if(o!==null)return Promise.resolve(Tl(o,!1));i=new Promise(this[gA])}return this[ec]=i,i}},xl(aw,Symbol.asyncIterator,function(){return this}),xl(aw,"return",function(){var e=this;return new Promise(function(t,n){e[tc].destroy(null,function(i){if(i){n(i);return}t(Tl(void 0,!0))})})}),aw),tH),nH=function(e){var t,n=Object.create(rH,(t={},xl(t,tc,{value:e,writable:!0}),xl(t,Sl,{value:null,writable:!0}),xl(t,Qu,{value:null,writable:!0}),xl(t,xg,{value:null,writable:!0}),xl(t,lw,{value:e._readableState.endEmitted,writable:!0}),xl(t,gA,{value:function(o,s){var a=n[tc].read();a?(n[ec]=null,n[Sl]=null,n[Qu]=null,o(Tl(a,!1))):(n[Sl]=o,n[Qu]=s)},writable:!0}),t));return n[ec]=null,Zq(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Qu];o!==null&&(n[ec]=null,n[Sl]=null,n[Qu]=null,o(i)),n[xg]=i;return}var s=n[Sl];s!==null&&(n[ec]=null,n[Sl]=null,n[Qu]=null,s(Tl(void 0,!0))),n[lw]=!0}),e.on("readable",Qq.bind(null,n)),n};xP.exports=nH});var CP=st((vee,TP)=>{Ce();De();Re();TP.exports=function(){throw new Error("Readable.from is not available in the browser")}});var cA=st((See,BP)=>{"use strict";Ce();De();Re();BP.exports=Ut;var Sh;Ut.ReadableState=OP;var xee=(bh(),Ir(ug)).EventEmitter,IP=function(e,t){return e.listeners(t).length},Tg=J1(),uw=(ll(),Ir(Uf)).Buffer,iH=(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function sH(r){return uw.from(r)}function oH(r){return uw.isBuffer(r)||r instanceof iH}var mA=(yh(),Ir(lg)),Ot;mA&&mA.debuglog?Ot=mA.debuglog("stream"):Ot=function(){};var aH=QL(),AA=tA(),lH=rA(),uH=lH.getHighWaterMark,cw=Ku().codes,cH=cw.ERR_INVALID_ARG_TYPE,fH=cw.ERR_STREAM_PUSH_AFTER_EOF,hH=cw.ERR_METHOD_NOT_IMPLEMENTED,dH=cw.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Th,yA,bA;Zu()(Ut,Tg);var Sg=AA.errorOrDestroy,wA=["error","close","destroy","pause","resume"];function pH(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function OP(r,e,t){Sh=Sh||Ju(),r=r||{},typeof t!="boolean"&&(t=e instanceof Sh),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=uH(this,r,"readableHighWaterMark",t),this.buffer=new aH,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Th||(Th=pA().StringDecoder),this.decoder=new Th(r.encoding),this.encoding=r.encoding)}function Ut(r){if(Sh=Sh||Ju(),!(this instanceof Ut))return new Ut(r);var e=this instanceof Sh;this._readableState=new OP(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Tg.call(this)}Object.defineProperty(Ut.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ut.prototype.destroy=AA.destroy;Ut.prototype._undestroy=AA.undestroy;Ut.prototype._destroy=function(r,e){e(r)};Ut.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=uw.from(r,e),e=""),n=!0),NP(this,r,e,!1,n)};Ut.prototype.unshift=function(r){return NP(this,r,null,!0,!1)};function NP(r,e,t,n,i){Ot("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,yH(r,o);else{var s;if(i||(s=gH(o,e)),s)Sg(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==uw.prototype&&(e=sH(e)),n)o.endEmitted?Sg(r,new dH):vA(r,o,e,!0);else if(o.ended)Sg(r,new fH);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?vA(r,o,e,!1):EA(r,o)):vA(r,o,e,!1)}else n||(o.reading=!1,EA(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function vA(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&fw(r)),EA(r,e)}function gH(r,e){var t;return!oH(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new cH("chunk",["string","Buffer","Uint8Array"],e)),t}Ut.prototype.isPaused=function(){return this._readableState.flowing===!1};Ut.prototype.setEncoding=function(r){Th||(Th=pA().StringDecoder);var e=new Th(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var RP=1073741824;function mH(r){return r>=RP?r=RP:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function DP(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=mH(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}Ut.prototype.read=function(r){Ot("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ot("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_A(this):fw(this),null;if(r=DP(r,e),r===0&&e.ended)return e.length===0&&_A(this),null;var n=e.needReadable;Ot("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,Ot("length less than watermark",n)),e.ended||e.reading?(n=!1,Ot("reading or ended",n)):n&&(Ot("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=DP(t,e)));var i;return r>0?i=PP(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&_A(this)),i!==null&&this.emit("data",i),i};function yH(r,e){if(Ot("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?fw(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,kP(r)))}}function fw(r){var e=r._readableState;Ot("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ot("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(kP,r))}function kP(r){var e=r._readableState;Ot("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,xA(r)}function EA(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(bH,r,e))}function bH(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(Ot("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}Ut.prototype._read=function(r){Sg(this,new hH("_read()"))};Ut.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,Ot("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,o=i?a:v;n.endEmitted?process.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(w,y){Ot("onunpipe"),w===t&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,f())}function a(){Ot("onend"),r.end()}var u=wH(t);r.on("drain",u);var c=!1;function f(){Ot("cleanup"),r.removeListener("close",m),r.removeListener("finish",b),r.removeListener("drain",u),r.removeListener("error",d),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",v),t.removeListener("data",h),c=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",h);function h(w){Ot("ondata");var y=r.write(w);Ot("dest.write",y),y===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&MP(n.pipes,r)!==-1)&&!c&&(Ot("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function d(w){Ot("onerror",w),v(),r.removeListener("error",d),IP(r,"error")===0&&Sg(r,w)}pH(r,"error",d);function m(){r.removeListener("finish",b),v()}r.once("close",m);function b(){Ot("onfinish"),r.removeListener("close",m),v()}r.once("finish",b);function v(){Ot("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(Ot("pipe resume"),t.resume()),r};function wH(r){return function(){var t=r._readableState;Ot("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&IP(r,"data")&&(t.flowing=!0,xA(r))}}Ut.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=MP(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};Ut.prototype.on=function(r,e){var t=Tg.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ot("on readable",n.length,n.reading),n.length?fw(this):n.reading||process.nextTick(vH,this)),t};Ut.prototype.addListener=Ut.prototype.on;Ut.prototype.removeListener=function(r,e){var t=Tg.prototype.removeListener.call(this,r,e);return r==="readable"&&process.nextTick(LP,this),t};Ut.prototype.removeAllListeners=function(r){var e=Tg.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process.nextTick(LP,this),e};function LP(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function vH(r){Ot("readable nexttick read 0"),r.read(0)}Ut.prototype.resume=function(){var r=this._readableState;return r.flowing||(Ot("resume"),r.flowing=!r.readableListening,_H(this,r)),r.paused=!1,this};function _H(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(EH,r,e))}function EH(r,e){Ot("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),xA(r),e.flowing&&!e.reading&&r.read(0)}Ut.prototype.pause=function(){return Ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function xA(r){var e=r._readableState;for(Ot("flow",e.flowing);e.flowing&&r.read()!==null;);}Ut.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(Ot("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(Ot("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=(function(a){return function(){return r[a].apply(r,arguments)}})(i));for(var o=0;o<wA.length;o++)r.on(wA[o],this.emit.bind(this,wA[o]));return this._read=function(s){Ot("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(Ut.prototype[Symbol.asyncIterator]=function(){return yA===void 0&&(yA=SP()),yA(this)});Object.defineProperty(Ut.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ut.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ut.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ut._fromList=PP;Object.defineProperty(Ut.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function PP(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function _A(r){var e=r._readableState;Ot("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(AH,e,r))}function AH(r,e){if(Ot("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ut.from=function(r,e){return bA===void 0&&(bA=CP()),bA(Ut,r,e)});function MP(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var SA=st((Dee,UP)=>{"use strict";Ce();De();Re();UP.exports=fa;var hw=Ku().codes,xH=hw.ERR_METHOD_NOT_IMPLEMENTED,SH=hw.ERR_MULTIPLE_CALLBACK,TH=hw.ERR_TRANSFORM_ALREADY_TRANSFORMING,CH=hw.ERR_TRANSFORM_WITH_LENGTH_0,dw=Ju();Zu()(fa,dw);function RH(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new SH);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function fa(r){if(!(this instanceof fa))return new fa(r);dw.call(this,r),this._transformState={afterTransform:RH.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",DH)}function DH(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){FP(r,e,t)}):FP(this,null,null)}fa.prototype.push=function(r,e){return this._transformState.needTransform=!1,dw.prototype.push.call(this,r,e)};fa.prototype._transform=function(r,e,t){t(new xH("_transform()"))};fa.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};fa.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};fa.prototype._destroy=function(r,e){dw.prototype._destroy.call(this,r,function(t){e(t)})};function FP(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new CH;if(r._transformState.transforming)throw new TH;return r.push(null)}});var zP=st((kee,$P)=>{"use strict";Ce();De();Re();$P.exports=Cg;var jP=SA();Zu()(Cg,jP);function Cg(r){if(!(this instanceof Cg))return new Cg(r);jP.call(this,r)}Cg.prototype._transform=function(r,e,t){t(null,r)}});var VP=st((Bee,GP)=>{"use strict";Ce();De();Re();var TA;function IH(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var HP=Ku().codes,OH=HP.ERR_MISSING_ARGS,NH=HP.ERR_STREAM_DESTROYED;function WP(r){if(r)throw r}function kH(r){return r.setHeader&&typeof r.abort=="function"}function LH(r,e,t,n){n=IH(n);var i=!1;r.on("close",function(){i=!0}),TA===void 0&&(TA=ow()),TA(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,kH(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new NH("pipe"))}}}function qP(r){r()}function PH(r,e){return r.pipe(e)}function MH(r){return!r.length||typeof r[r.length-1]!="function"?WP:r.pop()}function BH(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=MH(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new OH("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return LH(s,u,c,function(f){i||(i=f),f&&o.forEach(qP),!u&&(o.forEach(qP),n(i))})});return e.reduce(PH)}GP.exports=BH});var XP=st((as,YP)=>{Ce();De();Re();as=YP.exports=cA();as.Stream=as;as.Readable=as;as.Writable=aA();as.Duplex=Ju();as.Transform=SA();as.PassThrough=zP();as.finished=ow();as.pipeline=VP()});var ZP=st((qee,KP)=>{Ce();De();Re();var FH=Object.prototype.toString,CA=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function UH(r){return FH.call(r).slice(8,-1)==="ArrayBuffer"}function jH(r,e,t){e>>>=0;var n=r.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return CA?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function $H(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return CA?Buffer.from(r,e):new Buffer(r,e)}function zH(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return UH(r)?jH(r,e,t):typeof r=="string"?$H(r,e):CA?Buffer.from(r):new Buffer(r)}KP.exports=zH});var nM=st(bt=>{Ce();De();Re();var JP=void 0,WH=1e5,vr=(function(){var r=Object.prototype.toString,e=Object.prototype.hasOwnProperty;return{Class:function(t){return r.call(t).replace(/^\[object *|\]$/g,"")},HasProperty:function(t,n){return n in t},HasOwnProperty:function(t,n){return e.call(t,n)},IsCallable:function(t){return typeof t=="function"},ToInt32:function(t){return t>>0},ToUint32:function(t){return t>>>0}}})(),qH=Math.LN2,HH=Math.abs,pw=Math.floor,GH=Math.log,VH=Math.min,ks=Math.pow,YH=Math.round;function RA(r){if(QP&&Ch){var e=QP(r),t;for(t=0;t<e.length;t+=1)Ch(r,e[t],{value:r[e[t]],writable:!1,enumerable:!1,configurable:!1})}}var Ch;Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})()?Ch=Object.defineProperty:Ch=function(r,e,t){if(!r===Object(r))throw new TypeError("Object.defineProperty called on non-object");return vr.HasProperty(t,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(r,e,t.get),vr.HasProperty(t,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(r,e,t.set),vr.HasProperty(t,"value")&&(r[e]=t.value),r};var QP=Object.getOwnPropertyNames||function(r){if(r!==Object(r))throw new TypeError("Object.getOwnPropertyNames called on non-object");var e=[],t;for(t in r)vr.HasOwnProperty(r,t)&&e.push(t);return e};function XH(r){if(!Ch)return;if(r.length>WH)throw new RangeError("Array too large for polyfill");function e(n){Ch(r,n,{get:function(){return r._getter(n)},set:function(i){r._setter(n,i)},enumerable:!0,configurable:!1})}var t;for(t=0;t<r.length;t+=1)e(t)}function DA(r,e){var t=32-e;return r<<t>>t}function IA(r,e){var t=32-e;return r<<t>>>t}function KH(r){return[r&255]}function ZH(r){return DA(r[0],8)}function JH(r){return[r&255]}function eM(r){return IA(r[0],8)}function QH(r){return r=YH(Number(r)),[r<0?0:r>255?255:r&255]}function eG(r){return[r>>8&255,r&255]}function tG(r){return DA(r[0]<<8|r[1],16)}function rG(r){return[r>>8&255,r&255]}function nG(r){return IA(r[0]<<8|r[1],16)}function iG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function sG(r){return DA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function oG(r){return[r>>24&255,r>>16&255,r>>8&255,r&255]}function aG(r){return IA(r[0]<<24|r[1]<<16|r[2]<<8|r[3],32)}function tM(r,e,t){var n=(1<<e-1)-1,i,o,s,a,u,c,f,h;function d(m){var b=pw(m),v=m-b;return v<.5?b:v>.5||b%2?b+1:b}for(r!==r?(o=(1<<e)-1,s=ks(2,t-1),i=0):r===1/0||r===-1/0?(o=(1<<e)-1,s=0,i=r<0?1:0):r===0?(o=0,s=0,i=1/r===-1/0?1:0):(i=r<0,r=HH(r),r>=ks(2,1-n)?(o=VH(pw(GH(r)/qH),1023),s=d(r/ks(2,o)*ks(2,t)),s/ks(2,t)>=2&&(o=o+1,s=1),o>n?(o=(1<<e)-1,s=0):(o=o+n,s=s-ks(2,t))):(o=0,s=d(r/ks(2,1-n-t)))),c=[],u=t;u;u-=1)c.push(s%2?1:0),s=pw(s/2);for(u=e;u;u-=1)c.push(o%2?1:0),o=pw(o/2);for(c.push(i?1:0),c.reverse(),f=c.join(""),h=[];f.length;)h.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return h}function rM(r,e,t){var n=[],i,o,s,a,u,c,f,h;for(i=r.length;i;i-=1)for(s=r[i-1],o=8;o;o-=1)n.push(s%2?1:0),s=s>>1;return n.reverse(),a=n.join(""),u=(1<<e-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,f=parseInt(a.substring(1,1+e),2),h=parseInt(a.substring(1+e),2),f===(1<<e)-1?h!==0?NaN:c*(1/0):f>0?c*ks(2,f-u)*(1+h/ks(2,t)):h!==0?c*ks(2,-(u-1))*(h/ks(2,t)):c<0?-0:0}function lG(r){return rM(r,11,52)}function uG(r){return tM(r,11,52)}function cG(r){return rM(r,8,23)}function fG(r){return tM(r,8,23)}(function(){var r=function(m){if(m=vr.ToInt32(m),m<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=m,this._bytes=[],this._bytes.length=m;var b;for(b=0;b<this.byteLength;b+=1)this._bytes[b]=0;RA(this)};bt.ArrayBuffer=bt.ArrayBuffer||r;var e=function(){};function t(d,m,b){var v;return v=function(w,y,_){var E,S,A,F;if(!arguments.length||typeof arguments[0]=="number"){if(this.length=vr.ToInt32(arguments[0]),_<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0}else if(typeof arguments[0]=="object"&&arguments[0].constructor===v)for(E=arguments[0],this.length=E.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)this._setter(A,E._getter(A));else if(typeof arguments[0]=="object"&&!(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer"))for(S=arguments[0],this.length=vr.ToUint32(S.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new r(this.byteLength),this.byteOffset=0,A=0;A<this.length;A+=1)F=S[A],this._setter(A,Number(F));else if(typeof arguments[0]=="object"&&(arguments[0]instanceof r||vr.Class(arguments[0])==="ArrayBuffer")){if(this.buffer=w,this.byteOffset=vr.ToUint32(y),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=vr.ToUint32(_),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else throw new TypeError("Unexpected argument type(s)");this.constructor=v,RA(this),XH(this)},v.prototype=new e,v.prototype.BYTES_PER_ELEMENT=d,v.prototype._pack=m,v.prototype._unpack=b,v.BYTES_PER_ELEMENT=d,v.prototype._getter=function(w){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return JP;var y=[],_,E;for(_=0,E=this.byteOffset+w*this.BYTES_PER_ELEMENT;_<this.BYTES_PER_ELEMENT;_+=1,E+=1)y.push(this.buffer._bytes[E]);return this._unpack(y)},v.prototype.get=v.prototype._getter,v.prototype._setter=function(w,y){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(w=vr.ToUint32(w),w>=this.length)return JP;var _=this._pack(y),E,S;for(E=0,S=this.byteOffset+w*this.BYTES_PER_ELEMENT;E<this.BYTES_PER_ELEMENT;E+=1,S+=1)this.buffer._bytes[S]=_[E]},v.prototype.set=function(w,y){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var _,E,S,A,F,I,X,Z,H,ne;if(typeof arguments[0]=="object"&&arguments[0].constructor===this.constructor){if(_=arguments[0],S=vr.ToUint32(arguments[1]),S+_.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(Z=this.byteOffset+S*this.BYTES_PER_ELEMENT,H=_.length*this.BYTES_PER_ELEMENT,_.buffer===this.buffer){for(ne=[],F=0,I=_.byteOffset;F<H;F+=1,I+=1)ne[F]=_.buffer._bytes[I];for(F=0,X=Z;F<H;F+=1,X+=1)this.buffer._bytes[X]=ne[F]}else for(F=0,I=_.byteOffset,X=Z;F<H;F+=1,I+=1,X+=1)this.buffer._bytes[X]=_.buffer._bytes[I]}else if(typeof arguments[0]=="object"&&typeof arguments[0].length<"u"){if(E=arguments[0],A=vr.ToUint32(E.length),S=vr.ToUint32(arguments[1]),S+A>this.length)throw new RangeError("Offset plus length of array is out of range");for(F=0;F<A;F+=1)I=E[F],this._setter(S+F,Number(I))}else throw new TypeError("Unexpected argument type(s)")},v.prototype.subarray=function(w,y){function _(S,A,F){return S<A?A:S>F?F:S}w=vr.ToInt32(w),y=vr.ToInt32(y),arguments.length<1&&(w=0),arguments.length<2&&(y=this.length),w<0&&(w=this.length+w),y<0&&(y=this.length+y),w=_(w,0,this.length),y=_(y,0,this.length);var E=y-w;return E<0&&(E=0),new this.constructor(this.buffer,this.byteOffset+w*this.BYTES_PER_ELEMENT,E)},v}var n=t(1,KH,ZH),i=t(1,JH,eM),o=t(1,QH,eM),s=t(2,eG,tG),a=t(2,rG,nG),u=t(4,iG,sG),c=t(4,oG,aG),f=t(4,fG,cG),h=t(8,uG,lG);bt.Int8Array=bt.Int8Array||n,bt.Uint8Array=bt.Uint8Array||i,bt.Uint8ClampedArray=bt.Uint8ClampedArray||o,bt.Int16Array=bt.Int16Array||s,bt.Uint16Array=bt.Uint16Array||a,bt.Int32Array=bt.Int32Array||u,bt.Uint32Array=bt.Uint32Array||c,bt.Float32Array=bt.Float32Array||f,bt.Float64Array=bt.Float64Array||h})();(function(){function r(o,s){return vr.IsCallable(o.get)?o.get(s):o[s]}var e=(function(){var o=new bt.Uint16Array([4660]),s=new bt.Uint8Array(o.buffer);return r(s,0)===18})(),t=function(s,a,u){if(arguments.length===0)s=new bt.ArrayBuffer(0);else if(!(s instanceof bt.ArrayBuffer||vr.Class(s)==="ArrayBuffer"))throw new TypeError("TypeError");if(this.buffer=s||new bt.ArrayBuffer(0),this.byteOffset=vr.ToUint32(a),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=vr.ToUint32(u),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");RA(this)};function n(o){return function(s,a){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");s+=this.byteOffset;var u=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),c=[],f;for(f=0;f<o.BYTES_PER_ELEMENT;f+=1)c.push(r(u,f));return!!a==!!e&&c.reverse(),r(new o(new bt.Uint8Array(c).buffer),0)}}t.prototype.getUint8=n(bt.Uint8Array),t.prototype.getInt8=n(bt.Int8Array),t.prototype.getUint16=n(bt.Uint16Array),t.prototype.getInt16=n(bt.Int16Array),t.prototype.getUint32=n(bt.Uint32Array),t.prototype.getInt32=n(bt.Int32Array),t.prototype.getFloat32=n(bt.Float32Array),t.prototype.getFloat64=n(bt.Float64Array);function i(o){return function(s,a,u){if(s=vr.ToUint32(s),s+o.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c=new o([a]),f=new bt.Uint8Array(c.buffer),h=[],d,m;for(d=0;d<o.BYTES_PER_ELEMENT;d+=1)h.push(r(f,d));!!u==!!e&&h.reverse(),m=new bt.Uint8Array(this.buffer,s,o.BYTES_PER_ELEMENT),m.set(h)}}t.prototype.setUint8=i(bt.Uint8Array),t.prototype.setInt8=i(bt.Int8Array),t.prototype.setUint16=i(bt.Uint16Array),t.prototype.setInt16=i(bt.Int16Array),t.prototype.setUint32=i(bt.Uint32Array),t.prototype.setInt32=i(bt.Int32Array),t.prototype.setFloat32=i(bt.Float32Array),t.prototype.setFloat64=i(bt.Float64Array),bt.DataView=bt.DataView||t})()});var aM=st((Jee,oM)=>{Ce();De();Re();var iM=XP().Writable,hG=Zu(),Rg=ZP();typeof Uint8Array>"u"?gw=nM().Uint8Array:gw=Uint8Array;var gw;function rc(r,e){if(!(this instanceof rc))return new rc(r,e);typeof r=="function"&&(e=r,r={}),r||(r={});var t=r.encoding,n=!1;t?(t=String(t).toLowerCase(),(t==="u8"||t==="uint8")&&(t="uint8array")):n=!0,iM.call(this,{objectMode:!0}),this.encoding=t,this.shouldInferEncoding=n,e&&this.on("finish",function(){e(this.getBody())}),this.body=[]}oM.exports=rc;hG(rc,iM);rc.prototype._write=function(r,e,t){this.body.push(r),t()};rc.prototype.inferEncoding=function(r){var e=r===void 0?this.body[0]:r;return Buffer.isBuffer(e)?"buffer":typeof Uint8Array<"u"&&e instanceof Uint8Array?"uint8array":Array.isArray(e)?"array":typeof e=="string"?"string":Object.prototype.toString.call(e)==="[object Object]"?"object":"buffer"};rc.prototype.getBody=function(){return!this.encoding&&this.body.length===0?[]:(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),this.encoding==="array"?mG(this.body):this.encoding==="string"?pG(this.body):this.encoding==="buffer"?gG(this.body):this.encoding==="uint8array"?yG(this.body):this.body)};function dG(r){return/Array\]$/.test(Object.prototype.toString.call(r))}function sM(r){return typeof r=="string"||dG(r)||r&&typeof r.subarray=="function"}function pG(r){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n];typeof i=="string"||Buffer.isBuffer(i)?e.push(i):sM(i)?e.push(Rg(i)):e.push(Rg(String(i)))}return Buffer.isBuffer(r[0])?(e=Buffer.concat(e),e=e.toString("utf8")):e=e.join(""),e}function gG(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];Buffer.isBuffer(n)?e.push(n):sM(n)?e.push(Rg(n)):e.push(Rg(String(n)))}return Buffer.concat(e)}function mG(r){for(var e=[],t=0;t<r.length;t++)e.push.apply(e,r[t]);return e}function yG(r){for(var e=0,t=0;t<r.length;t++)typeof r[t]=="string"&&(r[t]=Rg(r[t])),e+=r[t].length;for(var n=new gw(e),t=0,i=0;t<r.length;t++)for(var o=r[t],s=0;s<o.length;s++)n[i++]=o[s];return n}});var cM=st((ote,NA)=>{Ce();De();Re();var OA=(function(r){"use strict";var e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(N,x,P){N[x]=P.value},i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(N,x,P){return Object.defineProperty(N,x,{value:P,enumerable:!0,configurable:!0,writable:!0}),N[x]}try{c({},"")}catch{c=function(x,P,C){return x[P]=C}}function f(N,x,P,C){var U=x&&x.prototype instanceof y?x:y,j=Object.create(U.prototype),M=new K(C||[]);return n(j,"_invoke",{value:H(N,P,M)}),j}r.wrap=f;function h(N,x,P){try{return{type:"normal",arg:N.call(x,P)}}catch(C){return{type:"throw",arg:C}}}var d="suspendedStart",m="suspendedYield",b="executing",v="completed",w={};function y(){}function _(){}function E(){}var S={};c(S,s,function(){return this});var A=Object.getPrototypeOf,F=A&&A(A(le([])));F&&F!==e&&t.call(F,s)&&(S=F);var I=E.prototype=y.prototype=Object.create(S);_.prototype=E,n(I,"constructor",{value:E,configurable:!0}),n(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,u,"GeneratorFunction");function X(N){["next","throw","return"].forEach(function(x){c(N,x,function(P){return this._invoke(x,P)})})}r.isGeneratorFunction=function(N){var x=typeof N=="function"&&N.constructor;return x?x===_||(x.displayName||x.name)==="GeneratorFunction":!1},r.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,u,"GeneratorFunction")),N.prototype=Object.create(I),N},r.awrap=function(N){return{__await:N}};function Z(N,x){function P(j,M,Q,ce){var _e=h(N[j],N,M);if(_e.type==="throw")ce(_e.arg);else{var re=_e.arg,W=re.value;return W&&typeof W=="object"&&t.call(W,"__await")?x.resolve(W.__await).then(function(oe){P("next",oe,Q,ce)},function(oe){P("throw",oe,Q,ce)}):x.resolve(W).then(function(oe){re.value=oe,Q(re)},function(oe){return P("throw",oe,Q,ce)})}}var C;function U(j,M){function Q(){return new x(function(ce,_e){P(j,M,ce,_e)})}return C=C?C.then(Q,Q):Q()}n(this,"_invoke",{value:U})}X(Z.prototype),c(Z.prototype,a,function(){return this}),r.AsyncIterator=Z,r.async=function(N,x,P,C,U){U===void 0&&(U=Promise);var j=new Z(f(N,x,P,C),U);return r.isGeneratorFunction(x)?j:j.next().then(function(M){return M.done?M.value:j.next()})};function H(N,x,P){var C=d;return function(j,M){if(C===b)throw new Error("Generator is already running");if(C===v){if(j==="throw")throw M;return te()}for(P.method=j,P.arg=M;;){var Q=P.delegate;if(Q){var ce=ne(Q,P);if(ce){if(ce===w)continue;return ce}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(C===d)throw C=v,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);C=b;var _e=h(N,x,P);if(_e.type==="normal"){if(C=P.done?v:m,_e.arg===w)continue;return{value:_e.arg,done:P.done}}else _e.type==="throw"&&(C=v,P.method="throw",P.arg=_e.arg)}}}function ne(N,x){var P=x.method,C=N.iterator[P];if(C===i)return x.delegate=null,P==="throw"&&N.iterator.return&&(x.method="return",x.arg=i,ne(N,x),x.method==="throw")||P!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+P+"' method")),w;var U=h(C,N.iterator,x.arg);if(U.type==="throw")return x.method="throw",x.arg=U.arg,x.delegate=null,w;var j=U.arg;if(!j)return x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,w;if(j.done)x[N.resultName]=j.value,x.next=N.nextLoc,x.method!=="return"&&(x.method="next",x.arg=i);else return j;return x.delegate=null,w}X(I),c(I,u,"Generator"),c(I,s,function(){return this}),c(I,"toString",function(){return"[object Generator]"});function L(N){var x={tryLoc:N[0]};1 in N&&(x.catchLoc=N[1]),2 in N&&(x.finallyLoc=N[2],x.afterLoc=N[3]),this.tryEntries.push(x)}function $(N){var x=N.completion||{};x.type="normal",delete x.arg,N.completion=x}function K(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(L,this),this.reset(!0)}r.keys=function(N){var x=Object(N),P=[];for(var C in x)P.push(C);return P.reverse(),function U(){for(;P.length;){var j=P.pop();if(j in x)return U.value=j,U.done=!1,U}return U.done=!0,U}};function le(N){if(N){var x=N[s];if(x)return x.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var P=-1,C=function U(){for(;++P<N.length;)if(t.call(N,P))return U.value=N[P],U.done=!1,U;return U.value=i,U.done=!0,U};return C.next=C}}return{next:te}}r.values=le;function te(){return{value:i,done:!0}}return K.prototype={constructor:K,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach($),!N)for(var x in this)x.charAt(0)==="t"&&t.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=i)},stop:function(){this.done=!0;var N=this.tryEntries[0],x=N.completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var x=this;function P(ce,_e){return j.type="throw",j.arg=N,x.next=ce,_e&&(x.method="next",x.arg=i),!!_e}for(var C=this.tryEntries.length-1;C>=0;--C){var U=this.tryEntries[C],j=U.completion;if(U.tryLoc==="root")return P("end");if(U.tryLoc<=this.prev){var M=t.call(U,"catchLoc"),Q=t.call(U,"finallyLoc");if(M&&Q){if(this.prev<U.catchLoc)return P(U.catchLoc,!0);if(this.prev<U.finallyLoc)return P(U.finallyLoc)}else if(M){if(this.prev<U.catchLoc)return P(U.catchLoc,!0)}else if(Q){if(this.prev<U.finallyLoc)return P(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,x){for(var P=this.tryEntries.length-1;P>=0;--P){var C=this.tryEntries[P];if(C.tryLoc<=this.prev&&t.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var U=C;break}}U&&(N==="break"||N==="continue")&&U.tryLoc<=x&&x<=U.finallyLoc&&(U=null);var j=U?U.completion:{};return j.type=N,j.arg=x,U?(this.method="next",this.next=U.finallyLoc,w):this.complete(j)},complete:function(N,x){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&x&&(this.next=x),w},finish:function(N){for(var x=this.tryEntries.length-1;x>=0;--x){var P=this.tryEntries[x];if(P.finallyLoc===N)return this.complete(P.completion,P.afterLoc),$(P),w}},catch:function(N){for(var x=this.tryEntries.length-1;x>=0;--x){var P=this.tryEntries[x];if(P.tryLoc===N){var C=P.completion;if(C.type==="throw"){var U=C.arg;$(P)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(N,x,P){return this.delegate={iterator:le(N),resultName:x,nextLoc:P},this.method==="next"&&(this.arg=i),w}},r})(typeof NA=="object"?NA.exports:{});try{regeneratorRuntime=OA}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=OA:Function("r","regeneratorRuntime = r")(OA)}});var mw=st((cte,fM)=>{"use strict";Ce();De();Re();fM.exports=(r,e)=>`${r}-${e}-${Math.random().toString(16).slice(3,8)}`});var kA=st((pte,dM)=>{"use strict";Ce();De();Re();var bG=mw(),hM=0;dM.exports=({id:r,action:e,payload:t={}})=>{let n=r;return typeof n>"u"&&(n=bG("Job",hM),hM+=1),{id:n,action:e,payload:t}}});var yw=st(Dg=>{"use strict";Ce();De();Re();var LA=!1;Dg.logging=LA;Dg.setLogging=r=>{LA=r};Dg.log=(...r)=>LA?console.log.apply(Dg,r):null});var yM=st((gM,mM)=>{"use strict";Ce();De();Re();var wG=kA(),{log:bw}=yw(),vG=mw(),pM=0;mM.exports=()=>{let r=vG("Scheduler",pM),e={},t={},n=[];pM+=1;let i=()=>n.length,o=()=>Object.keys(e).length,s=()=>{if(n.length!==0){let h=Object.keys(e);for(let d=0;d<h.length;d+=1)if(typeof t[h[d]]>"u"){n[0](e[h[d]]);break}}},a=(h,d)=>new Promise((m,b)=>{let v=wG({action:h,payload:d});n.push(async w=>{n.shift(),t[w.id]=v;try{m(await w[h].apply(gM,[...d,v.id]))}catch(y){b(y)}finally{delete t[w.id],s()}}),bw(`[${r}]: Add ${v.id} to JobQueue`),bw(`[${r}]: JobQueue length=${n.length}`),s()});return{addWorker:h=>(e[h.id]=h,bw(`[${r}]: Add ${h.id}`),bw(`[${r}]: Number of workers=${o()}`),s(),h.id),addJob:async(h,...d)=>{if(o()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return a(h,d)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),n=[]},getQueueLen:i,getNumWorkers:o}}});var wM=st((Ste,bM)=>{"use strict";Ce();De();Re();bM.exports=r=>{let e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof xu=="function"&&(e.type="node"),typeof r>"u"?e:e[r]}});var _M=st((Ite,vM)=>{"use strict";Ce();De();Re();var _G=wM()("type")==="browser",EG=_G?r=>new URL(r,window.location.href).href:r=>r;vM.exports=r=>{let e={...r};return["corePath","workerPath","langPath"].forEach(t=>{r[t]&&(e[t]=EG(e[t]))}),e}});var PA=st((Lte,EM)=>{"use strict";Ce();De();Re();EM.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}});var AM=st((Fte,AG)=>{AG.exports={name:"tesseract.js",version:"6.0.1",description:"Pure Javascript Multilingual OCR",main:"src/index.js",type:"commonjs",types:"src/index.d.ts",unpkg:"dist/tesseract.min.js",jsdelivr:"dist/tesseract.min.js",scripts:{start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},browser:{"./src/worker/node/index.js":"./src/worker/browser/index.js"},author:"",contributors:["jeromewu"],license:"Apache-2.0",devDependencies:{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},dependencies:{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},overrides:{"@rollup/pluginutils":"^5.0.2"},repository:{type:"git",url:"https://github.com/naptha/tesseract.js.git"},bugs:{url:"https://github.com/naptha/tesseract.js/issues"},homepage:"https://github.com/naptha/tesseract.js",collective:{type:"opencollective",url:"https://opencollective.com/tesseractjs"}}});var SM=st((Ute,xM)=>{"use strict";Ce();De();Re();xM.exports={workerBlobURL:!0,logger:()=>{}}});var CM=st((Wte,TM)=>{"use strict";Ce();De();Re();var xG=AM().version,SG=SM();TM.exports={...SG,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${xG}/dist/worker.min.js`}});var DM=st((Vte,RM)=>{"use strict";Ce();De();Re();RM.exports=({workerPath:r,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){let n=new Blob([`importScripts("${r}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(n))}else t=new Worker(r);return t}});var OM=st((Zte,IM)=>{"use strict";Ce();De();Re();IM.exports=r=>{r.terminate()}});var kM=st((tre,NM)=>{"use strict";Ce();De();Re();NM.exports=(r,e)=>{r.onmessage=({data:t})=>{e(t)}}});var PM=st((sre,LM)=>{"use strict";Ce();De();Re();LM.exports=async(r,e)=>{r.postMessage(e)}});var BM=st((ure,MM)=>{"use strict";Ce();De();Re();var MA=r=>new Promise((e,t)=>{let n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=({target:{error:{code:i}}})=>{t(Error(`File could not be read! Code=${i}`))},n.readAsArrayBuffer(r)}),BA=async r=>{let e=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?e=atob(r.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(e=await BA(r.src)),r.tagName==="VIDEO"&&(e=await BA(r.poster)),r.tagName==="CANVAS"&&await new Promise(t=>{r.toBlob(async n=>{e=await MA(n),t()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){let t=await r.convertToBlob();e=await MA(t)}else(r instanceof File||r instanceof Blob)&&(e=await MA(r));return new Uint8Array(e)};MM.exports=BA});var UM=st((dre,FM)=>{"use strict";Ce();De();Re();var TG=CM(),CG=DM(),RG=OM(),DG=kM(),IG=PM(),OG=BM();FM.exports={defaultOptions:TG,spawnWorker:CG,terminateWorker:RG,onMessage:DG,send:IG,loadImage:OG}});var FA=st((yre,WM)=>{"use strict";Ce();De();Re();var NG=_M(),fo=kA(),{log:jM}=yw(),kG=mw(),nc=PA(),{defaultOptions:LG,spawnWorker:PG,terminateWorker:MG,onMessage:BG,loadImage:$M,send:FG}=UM(),zM=0;WM.exports=async(r="eng",e=nc.LSTM_ONLY,t={},n={})=>{let i=kG("Worker",zM),{logger:o,errorHandler:s,...a}=NG({...LG,...t}),u={},c=typeof r=="string"?r.split("+"):r,f=e,h=n,d=[nc.DEFAULT,nc.LSTM_ONLY].includes(e)&&!a.legacyCore,m,b,v=new Promise((N,x)=>{b=N,m=x}),w=N=>{m(N.message)},y=PG(a);y.onerror=w,zM+=1;let _=({id:N,action:x,payload:P})=>new Promise((C,U)=>{jM(`[${i}]: Start ${N}, action=${x}`);let j=`${x}-${N}`;u[j]={resolve:C,reject:U},FG(y,{workerId:i,jobId:N,action:x,payload:P})}),E=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),S=N=>_(fo({id:N,action:"load",payload:{options:{lstmOnly:d,corePath:a.corePath,logging:a.logging}}})),A=(N,x,P)=>_(fo({id:P,action:"FS",payload:{method:"writeFile",args:[N,x]}})),F=(N,x)=>_(fo({id:x,action:"FS",payload:{method:"readFile",args:[N,{encoding:"utf8"}]}})),I=(N,x)=>_(fo({id:x,action:"FS",payload:{method:"unlink",args:[N]}})),X=(N,x,P)=>_(fo({id:P,action:"FS",payload:{method:N,args:x}})),Z=(N,x)=>_(fo({id:x,action:"loadLanguage",payload:{langs:N,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[nc.DEFAULT,nc.LSTM_ONLY].includes(f)&&!a.legacyLang}}})),H=(N,x,P,C)=>_(fo({id:C,action:"initialize",payload:{langs:N,oem:x,config:P}})),ne=(N="eng",x,P,C)=>{if(d&&[nc.TESSERACT_ONLY,nc.TESSERACT_LSTM_COMBINED].includes(x))throw Error("Legacy model requested but code missing.");let U=x||f;f=U;let j=P||h;h=j;let Q=(typeof N=="string"?N.split("+"):N).filter(ce=>!c.includes(ce));return c.push(...Q),Q.length>0?Z(Q,C).then(()=>H(N,U,j,C)):H(N,U,j,C)},L=(N={},x)=>_(fo({id:x,action:"setParameters",payload:{params:N}})),$=async(N,x={},P={text:!0},C)=>_(fo({id:C,action:"recognize",payload:{image:await $M(N),options:x,output:P}})),K=async(N,x)=>{if(d)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(fo({id:x,action:"detect",payload:{image:await $M(N)}}))},le=async()=>(y!==null&&(MG(y),y=null),Promise.resolve());BG(y,({workerId:N,jobId:x,status:P,action:C,data:U})=>{let j=`${C}-${x}`;if(P==="resolve")jM(`[${N}]: Complete ${x}`),u[j].resolve({jobId:x,data:U}),delete u[j];else if(P==="reject")if(u[j].reject(U),delete u[j],C==="load"&&m(U),s)s(U);else throw Error(U);else P==="progress"&&o({...U,userJobId:x})});let te={id:i,worker:y,load:E,writeText:A,readText:F,removeFile:I,FS:X,reinitialize:ne,setParameters:L,recognize:$,detect:K,terminate:le};return S().then(()=>Z(r)).then(()=>H(r,e,n)).then(()=>b(te)).catch(()=>{}),v}});var GM=st((_re,HM)=>{"use strict";Ce();De();Re();var qM=FA(),UG=async(r,e,t)=>{let n=await qM(e,1,t);return n.recognize(r).finally(async()=>{await n.terminate()})},jG=async(r,e)=>{let t=await qM("osd",0,e);return t.detect(r).finally(async()=>{await t.terminate()})};HM.exports={recognize:UG,detect:jG}});var YM=st((Sre,VM)=>{"use strict";Ce();De();Re();VM.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}});var KM=st((Dre,XM)=>{"use strict";Ce();De();Re();XM.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}});var ic=st((kre,ZM)=>{"use strict";Ce();De();Re();cM();var $G=yM(),zG=FA(),WG=GM(),qG=YM(),HG=PA(),GG=KM(),{setLogging:VG}=yw();ZM.exports={languages:qG,OEM:HG,PSM:GG,createScheduler:$G,createWorker:zG,setLogging:VG,...WG}});var E3={};jo(E3,{AbortException:()=>Xs,AnnotationEditorLayer:()=>zv,AnnotationEditorParamsType:()=>Mt,AnnotationEditorType:()=>vt,AnnotationEditorUIManager:()=>vu,AnnotationLayer:()=>Pv,AnnotationMode:()=>Za,AnnotationType:()=>qr,CSSConstants:()=>fv,ColorPicker:()=>dm,DOMSVGFactory:()=>Of,DrawLayer:()=>Wv,FeatureTest:()=>Ur,GlobalWorkerOptions:()=>Es,ImageKind:()=>rm,InvalidPDFException:()=>bp,MathClamp:()=>Wn,OPS:()=>yp,OutputScale:()=>Fo,PDFDataRangeTransport:()=>hm,PDFDateString:()=>Rf,PDFWorker:()=>_p,PasswordResponses:()=>EB,PermissionFlag:()=>_B,PixelsPerInch:()=>tl,RenderingCancelledException:()=>wp,ResponseException:()=>Df,SignatureExtractor:()=>As,SupportedImageMimeTypes:()=>cv,TextLayer:()=>vp,TouchManager:()=>um,Util:()=>it,VerbosityLevel:()=>c0,XfaLayer:()=>am,applyOpacity:()=>DB,build:()=>DF,createValidAbsoluteUrl:()=>_T,fetchData:()=>Ep,findContrastColor:()=>IB,getDocument:()=>SF,getFilenameFromUrl:()=>TB,getPdfFilenameFromUrl:()=>CB,getRGB:()=>Ap,getUuid:()=>AT,getXfaPageViewport:()=>RB,isDataScheme:()=>h0,isPdfFile:()=>f_,isValidExplicitDest:()=>cF,noContextMenu:()=>Ki,normalizeUnicode:()=>xB,renderRichText:()=>xT,setLayerDimensions:()=>wu,shadow:()=>wt,stopEvent:()=>Cr,updateUrlHash:()=>ET,version:()=>RF});function XG(r){Number.isInteger(r)&&(u_=r)}function KG(){return u_}function c_(r){u_>=c0.INFOS&&console.info(`Info: ${r}`)}function _t(r){u_>=c0.WARNINGS&&console.warn(`Warning: ${r}`)}function dr(r){throw new Error(r)}function Bt(r,e){r||dr(e)}function ZG(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _T(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=tV(r)}catch{}let n=e?URL.parse(r,e):URL.parse(r);return ZG(n)?n:null}function ET(r,e,t=!1){let n=URL.parse(r);return n?(n.hash=e,n.href):t&&_T(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function wt(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}function AB(r){(typeof r!="object"||r?.length===void 0)&&dr("Invalid argument for bytesToString");let e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);let n=[];for(let i=0;i<e;i+=t){let o=Math.min(i+t,e),s=r.subarray(i,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function f0(r){typeof r!="string"&&dr("Invalid argument for stringToBytes");let e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function JG(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function QG(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function eV(){try{return new Function(""),!0}catch{return!1}}function tV(r){return decodeURIComponent(escape(r))}function xB(r){return jA||(jA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rB=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(jA,(e,t,n)=>t?t.normalize("NFKC"):rB.get(n))}function AT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);return crypto.getRandomValues(r),AB(r)}function rV(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;let[n,i,...o]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;let s=o.length,a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let u of o)if(!(typeof u=="number"||a&&u===null))return!1;return!0}function Wn(r,e,t){return Math.min(Math.max(r,e),t)}function SB(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(AB(r))}function nV(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):f0(atob(r))}async function Ep(r,e="text"){if(Pg(r,document.baseURI)){let t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}function h0(r){let e=r.length,t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function f_(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function TB(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function CB(r,e="document.pdf"){if(typeof r!="string")return e;if(h0(r))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;let i=a=>{try{let u=decodeURIComponent(a);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:a):u}catch{return a}},o=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(o.test(s))return i(s);if(n.searchParams.size>0){let a=Array.from(n.searchParams.values()).reverse();for(let c of a)if(o.test(c))return i(c);let u=Array.from(n.searchParams.keys()).reverse();for(let c of u)if(o.test(c))return i(c)}if(n.hash){let u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return i(u[0])}return e}function Pg(r,e){let t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function Ki(r){r.preventDefault()}function Cr(r){r.preventDefault(),r.stopPropagation()}function iV(r){console.log("Deprecated API usage: "+r)}function RB(r,{scale:e=1,rotation:t=0}){let{width:n,height:i}=r.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new lm({viewBox:o,userUnit:1,scale:e,rotation:t})}function Ap(r){if(r.startsWith("#")){let e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(_t(`Not a valid color format: "${r}"`),[0,0,0])}function sV(r){let e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(let t of r.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;r.set(t,Ap(n))}e.remove()}function Tr(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform();return[e,t,n,i,o,s]}function ho(r){let{a:e,b:t,c:n,d:i,e:o,f:s}=r.getTransform().invertSelf();return[e,t,n,i,o,s]}function wu(r,e,t=!1,n=!0){if(e instanceof lm){let{pageWidth:i,pageHeight:o}=e.rawDims,{style:s}=r,a=Ur.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${o}px`,f=a?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(s.width=f,s.height=h):(s.width=h,s.height=f)}n&&r.setAttribute("data-main-rotation",e.rotation)}function DB(r,e,t,n){n=Math.min(Math.max(n??1,0),1);let i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function nB(r,e){let t=r[0]/255,n=r[1]/255,i=r[2]/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=(o+s)/2;if(o===s)e[0]=e[1]=0;else{let u=o-s;switch(e[1]=a<.5?u/(o+s):u/(2-o-s),o){case t:e[0]=((n-i)/u+(n<i?6:0))*60;break;case n:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-n)/u+4)*60;break}}e[2]=a}function KA(r,e){let t=r[0],n=r[1],i=r[2],o=(1-Math.abs(2*i-1))*n,s=o*(1-Math.abs(t/60%2-1)),a=i-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 1:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 2:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 3:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 4:e[0]=s+a,e[1]=a,e[2]=o+a;break;case 5:case 6:e[0]=o+a,e[1]=a,e[2]=s+a;break}}function iB(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function sB(r,e,t){KA(r,t),t.map(iB);let n=.2126*t[0]+.7152*t[1]+.0722*t[2];KA(e,t),t.map(iB);let i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}function IB(r,e){let t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776,n=oB.get(t);if(n)return n;let i=new Float32Array(9),o=i.subarray(0,3),s=i.subarray(3,6);nB(r,s);let a=i.subarray(6,9);nB(e,a);let u=a[2]<.5,c=u?12:4.5;if(s[2]=u?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),sB(s,a,o)<c){let f,h;u?(f=s[2],h=1):(f=0,h=s[2]);let d=.005;for(;h-f>d;){let m=s[2]=(f+h)/2;u===sB(s,a,o)<c?f=m:h=m}s[2]=u?h:f}return KA(s,o),n=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),oB.set(t,n),n}function xT({html:r,dir:e,className:t},n){let i=document.createDocumentFragment();if(typeof r=="string"){let o=document.createElement("p");o.dir=e||"auto";let s=r.split(/(?:\r\n?|\n)/);for(let a=0,u=s.length;a<u;++a){let c=s[a];o.append(document.createTextNode(c)),a<u-1&&o.append(document.createElement("br"))}i.append(o)}else am.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function OB(r){let e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case Ig.moveTo:e.moveTo(r[t++],r[t++]);break;case Ig.lineTo:e.lineTo(r[t++],r[t++]);break;case Ig.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Ig.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Ig.closePath:e.closePath();break;default:_t(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}function BB(r,e,t){for(let n of t)e.addEventListener(n,r[n].bind(r))}function oV(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Qn)return r;let e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function aV(r){if(Qn&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return f0(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ww(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}function lB(){}function hi(r){if(r instanceof Xs||r instanceof bp||r instanceof lv||r instanceof Df||r instanceof nm)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Xs(r.message);case"InvalidPDFException":return new bp(r.message);case"PasswordException":return new lv(r.message,r.code);case"ResponseException":return new Df(r.message,r.status,r.missing);case"UnknownErrorException":return new nm(r.message,r.details)}return new nm(r.message,r.toString())}async function ST(r){let t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}function _w(r,e,t,n,i,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],o)}function Fx(r,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}function $A(r,e,t,n,i,o,s,a){let u=e.coords,c=e.colors,f=r.data,h=r.width*4,d;u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d),u[n+1]>u[i+1]&&(d=n,n=i,i=d,d=s,s=a,a=d),u[t+1]>u[n+1]&&(d=t,t=n,n=d,d=o,o=s,s=d);let m=(u[t]+e.offsetX)*e.scaleX,b=(u[t+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,y=(u[i]+e.offsetX)*e.scaleX,_=(u[i+1]+e.offsetY)*e.scaleY;if(b>=_)return;let E=c[o],S=c[o+1],A=c[o+2],F=c[s],I=c[s+1],X=c[s+2],Z=c[a],H=c[a+1],ne=c[a+2],L=Math.round(b),$=Math.round(_),K,le,te,N,x,P,C,U;for(let j=L;j<=$;j++){if(j<w){let re=j<b?0:(b-j)/(b-w);K=m-(m-v)*re,le=E-(E-F)*re,te=S-(S-I)*re,N=A-(A-X)*re}else{let re;j>_?re=1:w===_?re=0:re=(w-j)/(w-_),K=v-(v-y)*re,le=F-(F-Z)*re,te=I-(I-H)*re,N=X-(X-ne)*re}let M;j<b?M=0:j>_?M=1:M=(b-j)/(b-_),x=m-(m-y)*M,P=E-(E-Z)*M,C=S-(S-H)*M,U=A-(A-ne)*M;let Q=Math.round(Math.min(K,x)),ce=Math.round(Math.max(K,x)),_e=h*j+Q*4;for(let re=Q;re<=ce;re++)M=(K-re)/(K-x),M<0?M=0:M>1&&(M=1),f[_e++]=le-(le-P)*M|0,f[_e++]=te-(te-C)*M|0,f[_e++]=N-(N-U)*M|0,f[_e++]=255}}function uV(r,e,t){let n=e.coords,i=e.colors,o,s;switch(e.type){case GA.LATTICE:let a=e.verticesPerRow,u=Math.floor(n.length/a)-1,c=a-1;for(o=0;o<u;o++){let f=o*a;for(let h=0;h<c;h++,f++)$A(r,t,n[f],n[f+1],n[f+a],i[f],i[f+1],i[f+a]),$A(r,t,n[f+a+1],n[f+1],n[f+a],i[f+a+1],i[f+1],i[f+a])}break;case GA.TRIANGLES:for(o=0,s=n.length;o<s;o+=3)$A(r,t,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}function cV(r){switch(r[0]){case"RadialAxial":return new Ux(r);case"Mesh":return new jx(r);case"Dummy":return new $x}throw new Error(`Unknown IR type: ${r[0]}`)}function fV({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let a=Ur.isLittleEndian?4278190080:255,[u,c]=s?[o,a]:[a,o],f=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let m=0;for(let b=0;b<i;b++){for(let w=e+f;e<w;e++){let y=e<d?r[e]:255;t[m++]=y&128?c:u,t[m++]=y&64?c:u,t[m++]=y&32?c:u,t[m++]=y&16?c:u,t[m++]=y&8?c:u,t[m++]=y&4?c:u,t[m++]=y&2?c:u,t[m++]=y&1?c:u}if(h===0)continue;let v=e<d?r[e++]:255;for(let w=0;w<h;w++)t[m++]=v&1<<7-w?c:u}return{srcPos:e,destPos:m}}function dV(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,o,s,a){e.transform(t,n,i,o,s,a),this.__originalTransform(t,n,i,o,s,a)},r.setTransform=function(t,n,i,o,s,a){e.setTransform(t,n,i,o,s,a),this.__originalSetTransform(t,n,i,o,s,a)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,o,s,a){e.bezierCurveTo(t,n,i,o,s,a),this.__originalBezierCurveTo(t,n,i,o,s,a)},r.rect=function(t,n,i,o){e.rect(t,n,i,o),this.__originalRect(t,n,i,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}function Aw(r,e,t,n,i,o,s,a,u,c){let[f,h,d,m,b,v]=Tr(r);if(h===0&&d===0){let _=s*f+b,E=Math.round(_),S=a*m+v,A=Math.round(S),F=(s+u)*f+b,I=Math.abs(Math.round(F)-E)||1,X=(a+c)*m+v,Z=Math.abs(Math.round(X)-A)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(m),E,A),r.drawImage(e,t,n,i,o,0,0,I,Z),r.setTransform(f,h,d,m,b,v),[I,Z]}if(f===0&&m===0){let _=a*d+b,E=Math.round(_),S=s*h+v,A=Math.round(S),F=(a+c)*d+b,I=Math.abs(Math.round(F)-E)||1,X=(s+u)*h+v,Z=Math.abs(Math.round(X)-A)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,E,A),r.drawImage(e,t,n,i,o,0,0,Z,I),r.setTransform(f,h,d,m,b,v),[Z,I]}r.drawImage(e,t,n,i,o,s,a,u,c);let w=Math.hypot(f,h),y=Math.hypot(d,m);return[w*u,y*c]}function gB(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c,f=e.data,h=a.data,d,m,b,v;if(e.kind===rm.GRAYSCALE_1BPP){let w=f.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),_=y.length,E=n+7>>3,S=4294967295,A=Ur.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(b=d<o?vi:i,c=0,m=0;m<b;m++){let F=w-u,I=0,X=F>E?n:F*8-7,Z=X&-8,H=0,ne=0;for(;I<Z;I+=8)ne=f[u++],y[c++]=ne&128?S:A,y[c++]=ne&64?S:A,y[c++]=ne&32?S:A,y[c++]=ne&16?S:A,y[c++]=ne&8?S:A,y[c++]=ne&4?S:A,y[c++]=ne&2?S:A,y[c++]=ne&1?S:A;for(;I<X;I++)H===0&&(ne=f[u++],H=128),y[c++]=ne&H?S:A,H>>=1}for(;c<_;)y[c++]=0;r.putImageData(a,0,d*vi)}}else if(e.kind===rm.RGBA_32BPP){for(m=0,v=n*vi*4,d=0;d<o;d++)h.set(f.subarray(u,u+v)),u+=v,r.putImageData(a,0,m),m+=vi;d<s&&(v=n*i*4,h.set(f.subarray(u,u+v)),r.putImageData(a,0,m))}else if(e.kind===rm.RGB_24BPP)for(b=vi,v=n*b,d=0;d<s;d++){for(d>=o&&(b=i,v=n*b),c=0,m=v;m--;)h[c++]=f[u++],h[c++]=f[u++],h[c++]=f[u++],h[c++]=255;r.putImageData(a,0,d*vi)}else throw new Error(`bad image kind: ${e.kind}`)}function mB(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,i=t%vi,o=(t-i)/vi,s=i===0?o:o+1,a=r.createImageData(n,vi),u=0,c=e.data,f=a.data;for(let h=0;h<s;h++){let d=h<o?vi:i;({srcPos:u}=fV({src:c,srcPos:u,dest:f,width:n,height:d,nonBlackColor:0})),r.putImageData(a,0,h*vi)}}function Og(r,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function xw(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);let{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function yB(r,e){if(e)return!0;it.singularValueDecompose2dScale(r,Vi);let t=Math.fround(Fo.pixelRatio*tl.PDF_TO_CSS_UNITS);return Vi[0]<=t&&Vi[1]<=t}function yV(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let f=a(t);return f=unescape(f),f=u(f),f=c(f),o(f)}if(t=s(r),t){let f=c(t);return o(f)}if(t=n("filename","i").exec(r),t){t=t[1];let f=a(t);return f=c(f),o(f)}function n(f,h){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(f,h){if(f){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let d=new TextDecoder(f,{fatal:!0}),m=f0(h);h=d.decode(m),e=!1}catch{}}return h}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function s(f){let h=[],d,m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=m.exec(f))!==null;){let[,v,w,y]=d;if(v=parseInt(v,10),v in h){if(v===0)break;continue}h[v]=[w,y]}let b=[];for(let v=0;v<h.length&&v in h;++v){let[w,y]=h[v];y=a(y),w&&(y=unescape(y),v===0&&(y=u(y))),b.push(y)}return b.join("")}function a(f){if(f.startsWith('"')){let h=f.slice(1).split('\\"');for(let d=0;d<h.length;++d){let m=h[d].indexOf('"');m!==-1&&(h[d]=h[d].slice(0,m),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}f=h.join('"')}return f}function u(f){let h=f.indexOf("'");if(h===-1)return f;let d=f.slice(0,h),b=f.slice(h+1).replace(/^[^']*'/,"");return i(d,b)}function c(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,m,b){if(m==="q"||m==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(d,b);try{b=atob(b)}catch{}return i(d,b)})}return""}function gF(r,e){let t=new Headers;if(!r||!e||typeof e!="object")return t;for(let n in e){let i=e[n];i!==void 0&&t.append(n,i)}return t}function h_(r){return URL.parse(r)?.origin??null}function mF({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){let i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function yF(r){let e=r.get("Content-Disposition");if(e){let t=yV(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(f_(t))return t}return null}function d0(r,e){return new Df(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function bF(r){return r===200||r===206}function wF(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vF(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(_t(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}function bV(r){let e=r.response;return typeof e!="string"?e:f0(e).buffer}function vV(r){if(wV.test(r))return new URL(r);let e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}function SF(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let e=new dS,{docId:t}=e,n=r.url?oV(r.url):null,i=r.data?aV(r.data):null,o=r.httpHeaders||null,s=r.withCredentials===!0,a=r.password??null,u=r.range instanceof hm?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16,f=r.worker instanceof _p?r.worker:null,h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!h0(r.docBaseUrl)?r.docBaseUrl:null,m=ww(r.cMapUrl),b=r.cMapPacked!==!1,v=r.CMapReaderFactory||(Qn?Ox:wv),w=ww(r.iccUrl),y=ww(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Qn?Nx:Ev),E=ww(r.wasmUrl),S=r.WasmFactory||(Qn?kx:xv),A=r.stopAtErrors!==!0,F=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,I=r.isEvalSupported!==!1,X=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Qn,Z=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Qn&&(Ur.platform.isFirefox||!globalThis.chrome),H=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,ne=typeof r.disableFontFace=="boolean"?r.disableFontFace:Qn,L=r.fontExtraProperties===!0,$=r.enableXfa===!0,K=r.ownerDocument||globalThis.document,le=r.disableRange===!0,te=r.disableStream===!0,N=r.disableAutoFetch===!0,x=r.pdfBug===!0,P=r.CanvasFactory||(Qn?Ix:Sx),C=r.FilterFactory||(Qn?Dx:Tx),U=r.enableHWA===!0,j=r.useWasm!==!1,M=u?u.length:r.length??NaN,Q=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Qn&&!ne,ce=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===wv&&_===Ev&&S===xv&&m&&y&&E&&Pg(m,document.baseURI)&&Pg(y,document.baseURI)&&Pg(E,document.baseURI)),_e=null;XG(h);let re={canvasFactory:new P({ownerDocument:K,enableHWA:U}),filterFactory:new C({docId:t,ownerDocument:K}),cMapReaderFactory:ce?null:new v({baseUrl:m,isCompressed:b}),standardFontDataFactory:ce?null:new _({baseUrl:y}),wasmFactory:ce?null:new S({baseUrl:E})};f||(f=_p.create({verbosity:h,port:Es.workerPort}),e._worker=f);let W={docId:t,apiVersion:"5.4.530",data:i,password:a,disableAutoFetch:N,rangeChunkSize:c,length:M,docBaseUrl:d,enableXfa:$,evaluatorOptions:{maxImageSize:F,disableFontFace:ne,ignoreErrors:A,isEvalSupported:I,isOffscreenCanvasSupported:X,isImageDecoderSupported:Z,canvasMaxAreaInBytes:H,fontExtraProperties:L,useSystemFonts:Q,useWasm:j,useWorkerFetch:ce,cMapUrl:m,iccUrl:w,standardFontDataUrl:y,wasmUrl:E}},oe={ownerDocument:K,pdfBug:x,styleElement:_e,loadingParams:{disableAutoFetch:N,enableXfa:$}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let we=f.messageHandler.sendWithPromise("GetDocRequest",W,i?[i.buffer]:null),xe;if(u)xe=new Zx(u,{disableRange:le,disableStream:te});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let V=Pg(n)?eS:Qn?aS:iS;xe=new V({url:n,length:M,httpHeaders:o,withCredentials:s,rangeChunkSize:c,disableRange:le,disableStream:te})}return we.then(V=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");let B=new fc(t,V,f.port),se=new mS(B,e,xe,oe,re,U);e._transport=se,B.send("Ready",null)})}).catch(e._capability.reject),e}function vB(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function kg(r){return Math.max(0,Math.min(255,255*r))}var Cw,Qn,HA,Rw,YG,nne,Gi,Za,sm,vt,Mt,_B,GA,on,rm,qr,Dh,c0,yp,Ig,EB,u_,Lf,lv,nm,bp,Df,VA,Xs,Ur,UA,Ja,Dw,YA,it,jA,rB,Bh,om,am,ha,lc,tl,lm,wp,uv,vm,Rf,Fo,cv,XA,fv,oB,Dl,Il,cs,fs,_m,Ol,Hh,Gh,Em,qv,NB,On,kB,LB,Ih,Mg,ga,ZA,Am,hc,ya,nl,PB,MB,QA,JA,dc,pc,Vh,gc,tr,Bn,Hv,ex,Yh,xm,Fn,Xh,Iw,TT,tx,Hr,Nl,Sm,Sr,rx,Gv,FB,If,Vv,nx,Kh,Ci,Zh,Lr,ln,Jh,hs,Qh,ds,Un,kl,Ll,ed,Pl,mo,ps,mc,Tm,Cm,td,Rm,yo,Ml,rd,Bl,bo,Yv,Fl,nd,Dm,Ul,yc,id,jl,Im,Xr,Kt,ba,$l,zl,Om,sd,Nm,Wl,wo,wa,km,Lm,gs,nt,Ow,ix,UB,jB,Bg,$B,zB,WB,sx,qB,HB,GB,VB,Yn,da,YB,XB,ox,KB,Fg,ax,jh,vu,gn,vo,Ms,od,_o,Ri,ad,Eo,pi,va,bc,Ao,ql,Ys,Ug,Nw,Xn,hv,xn,ms,wc,gr,Pm,vc,Bs,_c,Ec,Ac,Mm,lx,Fh,ld,xc,Bm,Fm,Um,jm,$m,_a,Sc,Ea,Tc,Aa,_u,ZB,JB,QB,CT,um,Cc,Fs,Er,cr,xa,ud,Hl,zm,Sn,Rc,Sa,ys,Gl,Wm,Dc,Di,qm,Ic,Ta,xo,cd,fd,bs,Oc,Hm,Xv,mt,ux,Gm,cx,kw,eF,tF,fx,Lw,hx,rF,nF,iF,dx,sF,px,oF,aF,lF,gx,jg,At,mr,mx,aB,ls,po,dv,yx,Nc,kc,Ca,Tn,Kv,uF,cm,Vm,pv,hd,bx,rr,wx,dd,pd,Ym,gd,Pw,$h,gv,Vl,So,Lc,Pc,$g,zh,mv,md,yd,bd,wd,Ii,To,Xm,nr,Fr,Ls,Mw,zg,St,vx,Km,Zm,Jm,Qm,ey,ty,ry,ny,pr,_x,vd,Ex,Ax,lV,cF,Ra,Zv,xx,vw,Yr,_d,Ss,fF,hF,dF,Bw,fc,iy,yv,Sx,bv,wv,vv,Mc,Ed,Da,Ia,jn,Bc,Fc,lt,Mn,Wg,Oh,Fw,Nh,pF,Cx,kh,qg,Hg,Rx,Gg,Tx,_v,Ev,Av,xv,Dx,Ix,Ox,Nx,kx,Rh,uB,cB,Lx,Ad,Yl,Px,Ew,gi,mi,Uc,Us,jc,Oa,Zt,ir,Na,yi,sy,xd,$c,zc,ka,$n,Co,oy,Bx,Mx,fr,Pr,js,Sd,Td,RT,Sv,us,Dn,fm,Ux,jx,$x,fB,Jv,zx,hB,dB,hV,pB,vi,zA,Vi,Uh,Wx,Tv,pV,gV,mV,bB,Ks,qx,Hx,Gx,DT,qh,ay,ly,Es,Cd,uy,Vx,Lh,cy,fy,hy,Rd,Yx,Xl,sr,Dd,Id,dy,Kx,Xx,Zx,Jx,Qx,eS,tS,rS,WA,qA,nS,iS,sS,oS,wV,aS,lS,uS,Ng,Oi,py,cS,Cv,_V,wB,Kl,Ni,gy,my,Wc,La,yy,by,qc,wy,Od,Zl,Nd,vy,kd,Hc,_y,Ey,Ld,Gc,Ay,Pd,Md,il,_F,EF,fS,Xi,Uw,hS,AF,xF,An,vp,EV,Qv,e_,dS,Vc,xy,Sy,Ty,Cy,hm,pS,Pa,Yc,Vg,gS,Jl,$s,Ma,Xc,t_,Kc,Zc,ei,jw,TF,CF,Yg,Bd,$w,_r,_p,Ba,Ro,Fd,Ud,Fa,Jc,Xg,mS,Ql,yS,eu,Qc,uc,bS,RF,DF,ki,ef,jd,un,Ry,$d,Ua,Dy,tu,zs,Iy,or,wS,vS,_S,sc,IF,Rl,di,dm,Do,Oy,zd,Ny,cc,Rv,Dv,ES,Of,AV,Nf,xV,im,tf,Wd,ws,ky,AS,IT,Rr,xS,Yi,oc,OF,NF,pm,SS,rl,TS,CS,RS,Iv,DS,IS,Ly,OS,gm,Li,ru,r_,n_,qd,Hd,Mr,Io,nu,rf,Gd,Vd,Oo,Pi,ja,$a,Br,za,iu,Py,Wa,Yd,nf,su,mn,ou,Ct,zw,kS,LS,PS,Ww,MS,kF,LF,PF,MF,qw,Hw,BS,NS,Ov,My,FS,By,US,Fy,jS,Uy,Nv,$S,zS,jy,sf,$y,WS,mm,kv,qS,HS,GS,Lv,zy,Wy,YS,VS,of,af,Xd,au,qy,lf,Mi,Hy,Qa,Gw,XS,OT,Pv,Sw,Bi,Gy,uf,Fi,Kr,BF,FF,UF,Vw,el,Yw,Xw,jF,ZS,$F,wr,KS,at,Ui,Ws,Kd,Zd,No,Nt,cf,ff,Vy,Yy,Jd,Qd,lu,Xy,i_,s_,cn,Kg,zF,WF,qF,HF,GF,VF,ma,Mv,ep,hf,qa,Ky,ji,Zy,Gr,o_,YF,Bv,Jy,Qy,e0,uu,qs,ti,XF,Kw,KF,ZF,JS,ym,t0,tp,QS,bm,eT,rp,r0,Ha,df,n0,bi,i0,s0,pf,$i,zi,Cn,np,ip,zn,sp,vs,o0,Tt,tT,Zw,JF,QF,e3,rT,ac,xs,Ph,t3,Jw,Qw,r3,n3,i3,s3,o3,qt,Fv,gf,Uv,Wi,op,yn,mf,yf,jt,nT,iT,sT,Zg,a3,ev,Jg,Mh,Pt,jv,ko,bn,wn,bf,ap,Kn,Rn,_s,wf,vf,_f,lp,tv,oT,Zn,a0,l0,qi,Lo,Po,up,cp,Ef,In,pa,l3,u3,c3,kf,$v,a_,f3,Wh,aT,wm,Tw,Lg,Af,Vt,lT,Hs,h3,d3,uT,rv,p3,g3,m3,cT,fT,y3,As,hT,dT,cu,Mo,fu,xf,Ti,pT,Ar,vn,hu,Ga,du,fp,Va,Sf,Bo,Hi,hp,$t,em,tm,nv,iv,sv,gT,ov,b3,Qg,Tf,dp,pu,gu,Ya,wi,mu,pp,gp,Gs,Xa,_n,Ka,yu,mp,ft,bu,hr,mT,w3,go,yT,bT,av,Ps,zv,Vs,Jn,Cf,u0,l_,v3,Uo,wT,_3,vT,an,Wv,A3=Jt(()=>{Ce();De();Re();Cw={};Cw.d=(r,e)=>{for(var t in e)Cw.o(e,t)&&!Cw.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};Cw.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);Qn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),HA=[.001,0,0,.001,0,0],Rw=1.35,YG=.35,nne=YG/Rw,Gi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sm="pdfjs_internal_editor_",vt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},_B={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},GA={TRIANGLES:1,LATTICE:2,PATCH:3},on={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},qr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Dh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},c0={ERRORS:0,WARNINGS:1,INFOS:5},yp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ig={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},EB={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},u_=c0.WARNINGS;Lf=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})(),lv=class extends Lf{constructor(e,t){super(e,"PasswordException"),this.code=t}},nm=class extends Lf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},bp=class extends Lf{constructor(e){super(e,"InvalidPDFException")}},Df=class extends Lf{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}},VA=class extends Lf{constructor(e){super(e,"FormatError")}},Xs=class extends Lf{constructor(e){super(e,"AbortException")}};Ur=class{static get isLittleEndian(){return wt(this,"isLittleEndian",QG())}static get isEvalSupported(){return wt(this,"isEvalSupported",eV())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return wt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return wt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){let{platform:e,userAgent:t}=navigator;return wt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return wt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},UA=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),it=class{static makeHexColor(e,t,n){return`#${UA[e]}${UA[t]}${UA[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){let i=e[n],o=e[n+1];e[n]=i*t[0]+o*t[2]+t[4],e[n+1]=i*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5];for(let f=0;f<6;f+=2){let h=e[n+f],d=e[n+f+1];e[n+f]=h*i+d*s+u,e[n+f+1]=h*o+d*a+c}}static applyInverseTransform(e,t){let n=e[0],i=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,n){let i=t[0],o=t[1],s=t[2],a=t[3],u=t[4],c=t[5],f=e[0],h=e[1],d=e[2],m=e[3],b=i*f+u,v=b,w=i*d+u,y=w,_=a*h+c,E=_,S=a*m+c,A=S;if(o!==0||s!==0){let F=o*f,I=o*d,X=s*h,Z=s*m;b+=X,y+=X,w+=Z,v+=Z,_+=F,A+=F,S+=I,E+=I}n[0]=Math.min(n[0],b,w,v,y),n[1]=Math.min(n[1],_,S,E,A),n[2]=Math.max(n[2],b,w,v,y),n[3]=Math.max(n[3],_,S,E,A)}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){let n=e[0],i=e[1],o=e[2],s=e[3],a=n**2+i**2,u=n*o+i*s,c=o**2+s**2,f=(a+c)/2,h=Math.sqrt(f**2-(a*c-u**2));t[0]=Math.sqrt(f+h||1),t[1]=Math.sqrt(f-h||1)}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;let o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>s?null:[n,o,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,o){o[0]=Math.min(o[0],e,n),o[1]=Math.min(o[1],t,i),o[2]=Math.max(o[2],e,n),o[3]=Math.max(o[3],t,i)}static bezierBoundingBox(e,t,n,i,o,s,a,u,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,u),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,u),ee(this,Ja,YA).call(this,e,n,o,a,t,i,s,u,3*(-e+3*(n-o)+a),6*(e-2*n+o),3*(n-e),c),ee(this,Ja,YA).call(this,e,n,o,a,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),c)}};Ja=new WeakSet,Dw=function(e,t,n,i,o,s,a,u,c,f){if(c<=0||c>=1)return;let h=1-c,d=c*c,m=d*c,b=h*(h*(h*e+3*c*t)+3*d*n)+m*i,v=h*(h*(h*o+3*c*s)+3*d*a)+m*u;f[0]=Math.min(f[0],b),f[1]=Math.min(f[1],v),f[2]=Math.max(f[2],b),f[3]=Math.max(f[3],v)},YA=function(e,t,n,i,o,s,a,u,c,f,h,d){if(Math.abs(c)<1e-12){Math.abs(f)>=1e-12&&ee(this,Ja,Dw).call(this,e,t,n,i,o,s,a,u,-h/f,d);return}let m=f**2-4*h*c;if(m<0)return;let b=Math.sqrt(m),v=2*c;ee(this,Ja,Dw).call(this,e,t,n,i,o,s,a,u,(-f+b)/v,d),ee(this,Ja,Dw).call(this,e,t,n,i,o,s,a,u,(-f-b)/v,d)},q(it,Ja);jA=null,rB=null;Bh="pdfjs_internal_id_";typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});om=class r{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function i(o){if(!o)return;let s=null,a=o.name;if(a==="#text")s=o.value;else if(r.shouldBuildText(a))o?.attributes?.textContent?s=o.attributes.textContent:o.value&&(s=o.value);else return;if(s!==null&&t.push({str:s}),!!o.children)for(let u of o.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},am=class{static setupStorage(e,t,n,i,o){let s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),o==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(let a of n.children)a.attributes.value===s.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{let u=a.target.options,c=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:o}){let{attributes:s}=t,a=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(let[u,c]of Object.entries(s))if(c!=null)switch(u){case"class":c.length&&e.setAttribute(u,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,c)}a&&o.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,o=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:o,linkService:n});let a=o!=="richText",u=e.div;if(u.append(s),e.viewport){let h=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=h}a&&u.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let h=document.createTextNode(i.value);s.append(h),a&&om.shouldBuildText(i.name)&&c.push(h)}return{textDivs:c}}let f=[[i,-1,s]];for(;f.length>0;){let[h,d,m]=f.at(-1);if(d+1===h.children.length){f.pop();continue}let b=h.children[++f.at(-1)[1]];if(b===null)continue;let{name:v}=b;if(v==="#text"){let y=document.createTextNode(b.value);c.push(y),m.append(y);continue}let w=b?.attributes?.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(m.append(w),b.attributes&&this.setAttributes({html:w,element:b,storage:t,intent:o,linkService:n}),b.children?.length>0)f.push([b,-1,w]);else if(b.value){let y=document.createTextNode(b.value);a&&om.shouldBuildText(v)&&c.push(y),w.append(y)}}for(let h of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},ha="http://www.w3.org/2000/svg",lc=class lc{};Ke(lc,"CSS",96),Ke(lc,"PDF",72),Ke(lc,"PDF_TO_CSS_UNITS",lc.CSS/lc.PDF);tl=lc;lm=class r{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:o=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=s,n*=t;let u=(e[2]+e[0])/2,c=(e[3]+e[1])/2,f,h,d,m;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,h=0,d=0,m=1;break;case 90:f=0,h=1,d=1,m=0;break;case 270:f=0,h=-1,d=-1,m=0;break;case 0:f=1,h=0,d=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,m=-m);let b,v,w,y;f===0?(b=Math.abs(c-e[1])*n+o,v=Math.abs(u-e[0])*n+s,w=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(b=Math.abs(u-e[0])*n+o,v=Math.abs(c-e[1])*n+s,w=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[f*n,h*n,d*n,m*n,b-f*n*u-d*n*c,v-h*n*u-m*n*c],this.width=w,this.height=y}get rawDims(){let e=this.viewBox;return wt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){let n=[e,t];return it.applyTransform(n,this.transform),n}convertToViewportRectangle(e){let t=[e[0],e[1]];it.applyTransform(t,this.transform);let n=[e[2],e[3]];return it.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){let n=[e,t];return it.applyInverseTransform(n,this.transform),n}},wp=class extends Lf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};uv=class{constructor(){Ke(this,"started",Object.create(null));Ke(this,"times",[])}time(e){e in this.started&&_t(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||_t(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:i,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-i}ms
`);return e.join("")}};Rf=class{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,vm)||k(this,vm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=l(this,vm).exec(e);if(!t)return null;let n=parseInt(t[1],10),i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;let c=t[7]||"Z",f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(s+=f,a+=h):c==="+"&&(s-=f,a-=h),new Date(Date.UTC(n,i,o,s,a,u))}};vm=new WeakMap,q(Rf,vm);Fo=class r{constructor(){let{pixelRatio:e}=r;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,o=-1){let s=1/0,a=1/0,u=1/0;n=r.capPixels(n,o),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(a=i/e,u=i/t);let c=Math.min(s,a,u);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){let n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}},cv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],XA=class{static get isDarkMode(){return wt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},fv=class{static get commentForegroundColor(){let e=document.createElement("span");e.classList.add("comment","sidebar");let{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);let{color:n}=window.getComputedStyle(e);return e.remove(),wt(this,"commentForegroundColor",Ap(n))}};oB=new Map;ga=class ga{constructor(e){q(this,On);q(this,Dl,null);q(this,Il,null);q(this,cs);q(this,fs,null);q(this,_m,null);q(this,Ol,null);q(this,Hh,null);q(this,Gh,null);k(this,cs,e),l(ga,Em)||k(ga,Em,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){let e=k(this,Dl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=l(this,cs)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ki,{signal:t}),e.addEventListener("pointerdown",ee(ga,qv,NB),{signal:t}));let n=k(this,fs,document.createElement("div"));n.className="buttons",e.append(n);let i=l(this,cs).toolbarPosition;if(i){let{style:o}=e,s=l(this,cs)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,Dl)}hide(){l(this,Dl).classList.add("hidden"),l(this,Il)?.hideDropdown()}show(){l(this,Dl).classList.remove("hidden"),l(this,_m)?.shown(),l(this,Ol)?.shown()}addDeleteButton(){let{editorType:e,_uiManager:t}=l(this,cs),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(ga,Em)[e]),ee(this,On,Ih).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),l(this,fs).append(n)}async addAltText(e){let t=await e.render();ee(this,On,Ih).call(this,t),l(this,fs).append(t,l(this,On,Mg)),k(this,_m,e)}addComment(e,t=null){if(l(this,Ol))return;let n=e.renderForToolbar();if(!n)return;ee(this,On,Ih).call(this,n);let i=k(this,Hh,l(this,On,Mg));t?(l(this,fs).insertBefore(n,t),l(this,fs).insertBefore(i,t)):l(this,fs).append(n,i),k(this,Ol,e),e.toolbar=this}addColorPicker(e){if(l(this,Il))return;k(this,Il,e);let t=e.renderButton();ee(this,On,Ih).call(this,t),l(this,fs).append(t,l(this,On,Mg))}async addEditSignatureButton(e){let t=k(this,Gh,await e.renderEditButton(l(this,cs)));ee(this,On,Ih).call(this,t),l(this,fs).append(t,l(this,On,Mg))}removeButton(e){switch(e){case"comment":l(this,Ol)?.removeToolbarCommentButton(),k(this,Ol,null),l(this,Hh)?.remove(),k(this,Hh,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;let i=l(this,fs).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){l(this,Gh)&&(l(this,Gh).title=e)}remove(){l(this,Dl).remove(),l(this,Il)?.destroy(),k(this,Il,null)}};Dl=new WeakMap,Il=new WeakMap,cs=new WeakMap,fs=new WeakMap,_m=new WeakMap,Ol=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,Em=new WeakMap,qv=new WeakSet,NB=function(e){e.stopPropagation()},On=new WeakSet,kB=function(e){l(this,cs)._focusEventsAllowed=!1,Cr(e)},LB=function(e){l(this,cs)._focusEventsAllowed=!0,Cr(e)},Ih=function(e){let t=l(this,cs)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",ee(this,On,kB).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",ee(this,On,LB).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ki,{signal:t}),!0)},Mg=function(){let e=document.createElement("div");return e.className="divider",e},q(ga,qv),q(ga,Em,null);ZA=ga,JA=class{constructor(e){q(this,nl);q(this,Am,null);q(this,hc,null);q(this,ya);k(this,ya,e)}show(e,t,n){let[i,o]=ee(this,nl,MB).call(this,t,n),{style:s}=l(this,hc)||k(this,hc,ee(this,nl,PB).call(this));e.append(l(this,hc)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,hc).remove()}};Am=new WeakMap,hc=new WeakMap,ya=new WeakMap,nl=new WeakSet,PB=function(){let e=k(this,hc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");let t=l(this,ya)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ki,{signal:t});let n=k(this,Am,document.createElement("div"));return n.className="buttons",e.append(n),l(this,ya).hasCommentManager()&&ee(this,nl,QA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,ya).commentSelection("floating_button")}),ee(this,nl,QA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,ya).highlightSelection("floating_button")}),e},MB=function(e,t){let n=0,i=0;for(let o of e){let s=o.y+o.height;if(s<n)continue;let a=o.x+(t?o.width:0);if(s>n){i=a,n=s;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]},QA=function(e,t,n,i){let o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);let s=document.createElement("span");o.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);let a=l(this,ya)._signal;a instanceof AbortSignal&&!a.aborted&&(o.addEventListener("contextmenu",Ki,{signal:a}),o.addEventListener("click",i,{signal:a})),l(this,Am).append(o)};tr=class tr{static initializeAndAddPointerId(e){(l(tr,pc)||k(tr,pc,new Set)).add(e)}static setPointer(e,t){l(tr,dc)||k(tr,dc,t),l(tr,gc)??k(tr,gc,e)}static setTimeStamp(e){k(tr,Vh,e)}static isSamePointerId(e){return l(tr,dc)===e}static isSamePointerIdOrRemove(e){return l(tr,dc)===e?!0:(l(tr,pc)?.delete(e),!1)}static isSamePointerType(e){return l(tr,gc)===e}static isInitializedAndDifferentPointerType(e){return l(tr,gc)!==null&&!tr.isSamePointerType(e)}static isSameTimeStamp(e){return l(tr,Vh)===e}static isUsingMultiplePointers(){return l(tr,pc)?.size>=1}static clearPointerType(){k(tr,gc,null)}static clearPointerIds(){k(tr,dc,NaN),k(tr,pc,null)}static clearTimeStamp(){k(tr,Vh,NaN)}};dc=new WeakMap,pc=new WeakMap,Vh=new WeakMap,gc=new WeakMap,q(tr,dc,NaN),q(tr,pc,null),q(tr,Vh,NaN),q(tr,gc,null);Bn=tr,ex=class{constructor(){q(this,Hv,0)}get id(){return`${sm}${tn(this,Hv)._++}`}};Hv=new WeakMap;TT=class TT{constructor(){q(this,Xh);q(this,Yh,AT());q(this,xm,0);q(this,Fn,null)}static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;let o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return wt(this,"_isSVGFittingCanvas",o)}async getFromFile(e){let{lastModified:t,name:n,size:i,type:o}=e;return ee(this,Xh,Iw).call(this,`${t}_${n}_${i}_${o}`,e)}async getFromUrl(e){return ee(this,Xh,Iw).call(this,e,e)}async getFromBlob(e,t){let n=await t;return ee(this,Xh,Iw).call(this,e,n)}async getFromId(e){l(this,Fn)||k(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Fn)||k(this,Fn,new Map);let n=l(this,Fn).get(e);if(n?.bitmap)return n.refCounter+=1,n;let i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Yh)}_${tn(this,xm)._++}`,refCounter:1,isSvg:!1},l(this,Fn).set(e,n),l(this,Fn).set(n.id,n),n}getSvgUrl(e){let t=l(this,Fn).get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){l(this,Fn)||k(this,Fn,new Map);let t=l(this,Fn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,Yh)}_`)}};Yh=new WeakMap,xm=new WeakMap,Fn=new WeakMap,Xh=new WeakSet,Iw=async function(e,t){l(this,Fn)||k(this,Fn,new Map);let n=l(this,Fn).get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Yh)}_${tn(this,xm)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await Ep(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){let o=TT._isSVGFittingCanvas,s=new FileReader,a=new Image,u=new Promise((c,f)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},s.onload=async()=>{let h=n.svgUrl=s.result;a.src=await o?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=s.onerror=f});s.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){_t(i),n=null}return l(this,Fn).set(e,n),n&&l(this,Fn).set(n.id,n),n};tx=TT,rx=class{constructor(e=128){q(this,Hr,[]);q(this,Nl,!1);q(this,Sm);q(this,Sr,-1);k(this,Sm,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:s=!1,keepUndo:a=!1}){if(i&&e(),l(this,Nl))return;let u={cmd:e,undo:t,post:n,type:o};if(l(this,Sr)===-1){l(this,Hr).length>0&&(l(this,Hr).length=0),k(this,Sr,0),l(this,Hr).push(u);return}if(s&&l(this,Hr)[l(this,Sr)].type===o){a&&(u.undo=l(this,Hr)[l(this,Sr)].undo),l(this,Hr)[l(this,Sr)]=u;return}let c=l(this,Sr)+1;c===l(this,Sm)?l(this,Hr).splice(0,1):(k(this,Sr,c),c<l(this,Hr).length&&l(this,Hr).splice(c)),l(this,Hr).push(u)}undo(){if(l(this,Sr)===-1)return;k(this,Nl,!0);let{undo:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),k(this,Nl,!1),k(this,Sr,l(this,Sr)-1)}redo(){if(l(this,Sr)<l(this,Hr).length-1){k(this,Sr,l(this,Sr)+1),k(this,Nl,!0);let{cmd:e,post:t}=l(this,Hr)[l(this,Sr)];e(),t?.(),k(this,Nl,!1)}}hasSomethingToUndo(){return l(this,Sr)!==-1}hasSomethingToRedo(){return l(this,Sr)<l(this,Hr).length-1}cleanType(e){if(l(this,Sr)!==-1){for(let t=l(this,Sr);t>=0;t--)if(l(this,Hr)[t].type!==e){l(this,Hr).splice(t+1,l(this,Sr)-t),k(this,Sr,t);return}l(this,Hr).length=0,k(this,Sr,-1)}}destroy(){k(this,Hr,null)}};Hr=new WeakMap,Nl=new WeakMap,Sm=new WeakMap,Sr=new WeakMap;If=class{constructor(e){q(this,Gv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=Ur.platform;for(let[n,i,o={}]of e)for(let s of n){let a=s.startsWith("mac+");t&&a?(this.callbacks.set(s.slice(4),{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1))):!t&&!a&&(this.callbacks.set(s,{callback:i,options:o}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(ee(this,Gv,FB).call(this,t));if(!n)return;let{callback:i,options:{bubbles:o=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),o||Cr(t))}};Gv=new WeakSet,FB=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t};Vv=class Vv{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return sV(e),wt(this,"_colors",e)}convert(e){let t=Ap(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,i]of this._colors)if(i.every((o,s)=>o===t[s]))return Vv._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?it.makeHexColor(...t):e}};Ke(Vv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));nx=Vv,jh=class jh{constructor(e,t,n,i,o,s,a,u,c,f,h,d,m,b,v,w){q(this,nt);q(this,Kh,new AbortController);q(this,Ci,null);q(this,Zh,null);q(this,Lr,new Map);q(this,ln,new Map);q(this,Jh,null);q(this,hs,null);q(this,Qh,null);q(this,ds,new rx);q(this,Un,null);q(this,kl,null);q(this,Ll,null);q(this,ed,0);q(this,Pl,new Set);q(this,mo,null);q(this,ps,null);q(this,mc,new Set);Ke(this,"_editorUndoBar",null);q(this,Tm,!1);q(this,Cm,!1);q(this,td,!1);q(this,Rm,null);q(this,yo,null);q(this,Ml,null);q(this,rd,null);q(this,Bl,!1);q(this,bo,null);q(this,Yv,new ex);q(this,Fl,!1);q(this,nd,!1);q(this,Dm,!1);q(this,Ul,null);q(this,yc,null);q(this,id,null);q(this,jl,null);q(this,Im,null);q(this,Xr,vt.NONE);q(this,Kt,new Set);q(this,ba,null);q(this,$l,null);q(this,zl,null);q(this,Om,null);q(this,sd,null);q(this,Nm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});q(this,Wl,[0,0]);q(this,wo,null);q(this,wa,null);q(this,km,null);q(this,Lm,null);q(this,gs,null);let y=this._signal=l(this,Kh).signal;k(this,wa,e),k(this,km,t),k(this,Lm,n),k(this,Jh,i),k(this,Un,o),k(this,$l,s),k(this,sd,u),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:y}),window.addEventListener("pointerdown",()=>{k(this,nd,!0)},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{k(this,nd,!1)},{capture:!0,signal:y}),ee(this,nt,$B).call(this),ee(this,nt,VB).call(this),ee(this,nt,sx).call(this),k(this,hs,u.annotationStorage),k(this,Rm,u.filterFactory),k(this,zl,c),k(this,rd,f||null),k(this,Tm,h),k(this,Cm,d),k(this,td,m),k(this,Im,b||null),this.viewParameters={realScale:tl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1,o?.setSidebarUiManager(this)}static get _keyboardManager(){let e=jh.prototype,t=s=>l(s,wa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:a})=>{if(a instanceof HTMLInputElement){let{type:u}=a;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(a)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:a})=>!(a instanceof HTMLButtonElement)&&l(s,wa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){l(this,gs)?.resolve(),k(this,gs,null),l(this,Kh)?.abort(),k(this,Kh,null),this._signal=null;for(let e of l(this,ln).values())e.destroy();l(this,ln).clear(),l(this,Lr).clear(),l(this,mc).clear(),l(this,jl)?.clear(),k(this,Ci,null),l(this,Kt).clear(),l(this,ds).destroy(),l(this,Jh)?.destroy(),l(this,Un)?.destroy(),l(this,$l)?.destroy(),l(this,bo)?.hide(),k(this,bo,null),l(this,id)?.destroy(),k(this,id,null),k(this,Zh,null),l(this,yo)&&(clearTimeout(l(this,yo)),k(this,yo,null)),l(this,wo)&&(clearTimeout(l(this,wo)),k(this,wo,null)),this._editorUndoBar?.destroy(),k(this,sd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Im)}get useNewAltTextFlow(){return l(this,Cm)}get useNewAltTextWhenAddingImage(){return l(this,td)}get hcmFilter(){return wt(this,"hcmFilter",l(this,zl)?l(this,Rm).addHCMFilter(l(this,zl).foreground,l(this,zl).background):"none")}get direction(){return wt(this,"direction",getComputedStyle(l(this,wa)).direction)}get _highlightColors(){return wt(this,"_highlightColors",l(this,rd)?new Map(l(this,rd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return wt(this,"highlightColors",null);let t=new Map,n=!!l(this,zl);for(let[i,o]of e){let s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),o);continue}!n&&!s&&t.set(i,o)}return wt(this,"highlightColors",t)}get highlightColorNames(){return wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(this,Ll,e)}setMainHighlightColorPicker(e){k(this,id,e)}editAltText(e,t=!1){l(this,Jh)?.editAltText(this,e,t)}hasCommentManager(){return!!l(this,Un)}editComment(e,t,n,i){l(this,Un)?.showDialog(this,e,t,n,i)}selectComment(e,t){l(this,ln).get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){l(this,Un)?.updateComment(e.getData())}updatePopupColor(e){l(this,Un)?.updatePopupColor(e)}removeComment(e){l(this,Un)?.removeComments([e.uid])}toggleComment(e,t,n=void 0){l(this,Un)?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&l(this,Un)?.makeCommentColor(e,t)||null}getCommentDialogElement(){return l(this,Un)?.dialogElement||null}async waitForEditorsRendered(e){if(l(this,ln).has(e-1))return;let{resolve:t,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){l(this,$l)?.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,$l)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":k(this,td,t);break}}onPageChanging({pageNumber:e}){k(this,ed,e-1)}focusMainContainer(){l(this,wa).focus()}findParent(e,t){for(let n of l(this,ln).values()){let{x:i,y:o,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=o&&t<=o+a)return n}return null}disableUserSelect(e=!1){l(this,km).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,mc).add(e)}removeShouldRescale(e){l(this,mc).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*tl.PDF_TO_CSS_UNITS;for(let t of l(this,mc))t.onScaleChanging();l(this,Ll)?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a}=n,u=n.toString(),f=ee(this,nt,Ow).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(f);if(!h)return;n.empty();let d=ee(this,nt,ix).call(this,f),m=l(this,Xr)===vt.NONE,b=()=>{let v=d?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:o,focusNode:s,focusOffset:a,text:u});m&&this.showAllEditors("highlight",!0,!0),t&&v?.editComment()};if(m){this.switchToMode(vt.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,hs))return null;let t=`${sm}${e}`,n=l(this,hs).getRawValue(t);return n&&l(this,hs).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&l(this,hs)&&!l(this,hs).has(e.id)&&l(this,hs).setValue(e.id,e)}a11yAlert(e,t=null){let n=l(this,Lm);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Bl)&&(k(this,Bl,!1),ee(this,nt,Bg).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of l(this,Kt))if(t.div.contains(e)){k(this,yc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,yc))return;let[e,t]=l(this,yc);k(this,yc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){ee(this,nt,sx).call(this),this.setEditingState(!0)}removeEditListeners(){ee(this,nt,qB).call(this),this.setEditingState(!1)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let n of l(this,ps))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let n of l(this,ps))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),l(this,Ci)?.commitOrRemove(),!this.hasSelection)return;let t=[];for(let n of l(this,Kt)){let i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let o of t.items)for(let s of l(this,ps))if(s.isHandlingMimeForPasting(o.type)){s.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){_t(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let i=this.currentLayer;try{let o=[];for(let u of n){let c=await i.deserialize(u);if(!c)return;o.push(c)}let s=()=>{for(let u of o)ee(this,nt,ox).call(this,u);ee(this,nt,ax).call(this,o)},a=()=>{for(let u of o)u.remove()};this.addCommands({cmd:s,undo:a,mustExec:!0})}catch(o){_t(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Xr)!==vt.NONE&&!this.isEditorHandlingKeyboard&&jh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Bl)&&(k(this,Bl,!1),ee(this,nt,Bg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(ee(this,nt,zB).call(this),ee(this,nt,HB).call(this),ee(this,nt,Yn).call(this,{isEditing:l(this,Xr)!==vt.NONE,isEmpty:ee(this,nt,Fg).call(this),hasSomethingToUndo:l(this,ds).hasSomethingToUndo(),hasSomethingToRedo:l(this,ds).hasSomethingToRedo(),hasSelectedEditor:!1})):(ee(this,nt,WB).call(this),ee(this,nt,GB).call(this),ee(this,nt,Yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,ps)){k(this,ps,e);for(let t of l(this,ps))ee(this,nt,da).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Yv).id}get currentLayer(){return l(this,ln).get(l(this,ed))}getLayer(e){return l(this,ln).get(e)}get currentPageIndex(){return l(this,ed)}addLayer(e){l(this,ln).set(e.pageIndex,e),l(this,Fl)?e.enable():e.disable()}removeLayer(e){l(this,ln).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,o=!1,s=!1){if(l(this,Xr)!==e&&!(l(this,gs)&&(await l(this,gs).promise,!l(this,gs)))){if(k(this,gs,Promise.withResolvers()),l(this,Ll)?.commitOrRemove(),l(this,Xr)===vt.POPUP&&l(this,Un)?.hideSidebar(),l(this,Un)?.destroyPopup(),k(this,Xr,e),e===vt.NONE){this.setEditingState(!1),ee(this,nt,XB).call(this);for(let a of l(this,Lr).values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),l(this,gs).resolve();return}for(let a of l(this,Lr).values())a.addStandaloneCommentButton();e===vt.SIGNATURE&&await l(this,$l)?.loadSignatures(),n&&Bn.clearPointerType(),this.setEditingState(!0),await ee(this,nt,YB).call(this),this.unselectAll();for(let a of l(this,ln).values())a.updateMode(e);if(e===vt.POPUP){l(this,Zh)||k(this,Zh,await l(this,sd).getAnnotationsByType(new Set(l(this,ps).map(c=>c._editorType))));let a=new Set,u=[];for(let c of l(this,Lr).values()){let{annotationElementId:f,hasComment:h,deleted:d}=c;f&&a.add(f),h&&!d&&u.push(c.getData())}for(let c of l(this,Zh)){let{id:f,popupRef:h,contentsObj:d}=c;h&&d?.str&&!a.has(f)&&!l(this,Pl).has(f)&&u.push(c)}l(this,Un)?.showSidebar(u)}if(!t){i&&this.addNewEditorFromKeyboard(),l(this,gs).resolve();return}for(let a of l(this,Lr).values())a.uid===t?(this.setSelected(a),s?a.editComment():o?a.enterInEditMode():a.focus()):a.unselect();l(this,gs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Xr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,ps)){switch(e){case Mt.CREATE:this.currentLayer.addNewEditor(t);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Om)||k(this,Om,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(let n of l(this,Kt))n.updateParams(e,t);else for(let n of l(this,ps))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(let o of l(this,Lr).values())o.editorType===e&&o.show(t);(l(this,Om)?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==t&&ee(this,nt,da).call(this,[[Mt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Dm)!==e){k(this,Dm,e);for(let t of l(this,ln).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(let t of l(this,Lr).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,Lr).get(e)}addEditor(e){l(this,Lr).set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(l(this,yo)&&clearTimeout(l(this,yo)),k(this,yo,setTimeout(()=>{this.focusMainContainer(),k(this,yo,null)},0))),l(this,Lr).delete(e.id),e.annotationElementId&&l(this,jl)?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!l(this,Pl).has(e.annotationElementId))&&l(this,hs)?.remove(e.id)}addDeletedAnnotationElement(e){l(this,Pl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Pl).has(e)}removeDeletedAnnotationElement(e){l(this,Pl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Ci)!==e&&(k(this,Ci,e),e&&ee(this,nt,da).call(this,e.propertiesToUpdate))}updateUI(e){l(this,nt,KB)===e&&ee(this,nt,da).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){ee(this,nt,da).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,Kt).has(e)){l(this,Kt).delete(e),e.unselect(),ee(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Kt).add(e),e.select(),ee(this,nt,da).call(this,e.propertiesToUpdate),ee(this,nt,Yn).call(this,{hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),l(this,Ll)?.commitOrRemove();for(let t of l(this,Kt))t!==e&&t.unselect();l(this,Kt).clear(),l(this,Kt).add(e),e.select(),ee(this,nt,da).call(this,e.propertiesToUpdate),ee(this,nt,Yn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Kt).has(e)}get firstSelectedEditor(){return l(this,Kt).values().next().value}unselect(e){e.unselect(),l(this,Kt).delete(e),ee(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Kt).size!==0}get isEnterHandled(){return l(this,Kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,ds).undo(),ee(this,nt,Yn).call(this,{hasSomethingToUndo:l(this,ds).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ee(this,nt,Fg).call(this)}),this._editorUndoBar?.hide()}redo(){l(this,ds).redo(),ee(this,nt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ds).hasSomethingToRedo(),isEmpty:ee(this,nt,Fg).call(this)})}addCommands(e){l(this,ds).add(e),ee(this,nt,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ee(this,nt,Fg).call(this)})}cleanUndoStack(e){l(this,ds).cleanType(e)}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let t=e?[e]:[...l(this,Kt)],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(let o of t)o.remove()},i=()=>{for(let o of t)ee(this,nt,ox).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){l(this,Ci)?.commitOrRemove()}hasSomethingToControl(){return l(this,Ci)||this.hasSelection}selectAll(){for(let e of l(this,Kt))e.commit();ee(this,nt,ax).call(this,l(this,Lr).values())}unselectAll(){if(!(l(this,Ci)&&(l(this,Ci).commitOrRemove(),l(this,Xr)!==vt.NONE))&&!l(this,Ll)?.commitOrRemove()&&this.hasSelection){for(let e of l(this,Kt))e.unselect();l(this,Kt).clear(),ee(this,nt,Yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Wl)[0]+=e,l(this,Wl)[1]+=t;let[i,o]=l(this,Wl),s=[...l(this,Kt)],a=1e3;l(this,wo)&&clearTimeout(l(this,wo)),k(this,wo,setTimeout(()=>{k(this,wo,null),l(this,Wl)[0]=l(this,Wl)[1]=0,this.addCommands({cmd:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(i,o),u.translationDone())},undo:()=>{for(let u of s)l(this,Lr).has(u.id)&&(u.translateInPage(-i,-o),u.translationDone())},mustExec:!1})},a));for(let u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,mo,new Map);for(let e of l(this,Kt))l(this,mo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,mo))return!1;this.disableUserSelect(!1);let e=l(this,mo);k(this,mo,null);let t=!1;for(let[{x:i,y:o,pageIndex:s},a]of e)a.newX=i,a.newY=o,a.newPageIndex=s,t||(t=i!==a.savedX||o!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;let n=(i,o,s,a)=>{if(l(this,Lr).has(i.id)){let u=l(this,ln).get(a);u?i._setParentAndPosition(u,o,s):(i.pageIndex=a,i.x=o,i.y=s)}};return this.addCommands({cmd:()=>{for(let[i,{newX:o,newY:s,newPageIndex:a}]of e)n(i,o,s,a)},undo:()=>{for(let[i,{savedX:o,savedY:s,savedPageIndex:a}]of e)n(i,o,s,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,mo))for(let n of l(this,mo).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||l(this,Kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Ci)===e}getActive(){return l(this,Ci)}getMode(){return l(this,Xr)}isEditingMode(){return l(this,Xr)!==vt.NONE}get imageManager(){return wt(this,"imageManager",new tx)}getSelectionBoxes(e){if(!e)return null;let t=document.getSelection();for(let c=0,f=t.rangeCount;c<f;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;let{x:n,y:i,width:o,height:s}=e.getBoundingClientRect(),a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,f,h,d)=>({x:(f-i)/s,y:1-(c+h-n)/o,width:d/s,height:h/o});break;case"180":a=(c,f,h,d)=>({x:1-(c+h-n)/o,y:1-(f+d-i)/s,width:h/o,height:d/s});break;case"270":a=(c,f,h,d)=>({x:1-(f+d-i)/s,y:(c-n)/o,width:d/s,height:h/o});break;default:a=(c,f,h,d)=>({x:(c-n)/o,y:(f-i)/s,width:h/o,height:d/s});break}let u=[];for(let c=0,f=t.rangeCount;c<f;c++){let h=t.getRangeAt(c);if(!h.collapsed)for(let{x:d,y:m,width:b,height:v}of h.getClientRects())b===0||v===0||u.push(a(d,m,b,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Qh)||k(this,Qh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){l(this,Qh)?.delete(e)}renderAnnotationElement(e){let t=l(this,Qh)?.get(e.data.id);if(!t)return;let n=l(this,hs).getRawValue(t);n&&(l(this,Xr)===vt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){let i=l(this,jl)?.get(e);i&&(i.setCanvas(t,n),l(this,jl).delete(e))}addMissingCanvas(e,t){(l(this,jl)||k(this,jl,new Map)).set(e,t)}};Kh=new WeakMap,Ci=new WeakMap,Zh=new WeakMap,Lr=new WeakMap,ln=new WeakMap,Jh=new WeakMap,hs=new WeakMap,Qh=new WeakMap,ds=new WeakMap,Un=new WeakMap,kl=new WeakMap,Ll=new WeakMap,ed=new WeakMap,Pl=new WeakMap,mo=new WeakMap,ps=new WeakMap,mc=new WeakMap,Tm=new WeakMap,Cm=new WeakMap,td=new WeakMap,Rm=new WeakMap,yo=new WeakMap,Ml=new WeakMap,rd=new WeakMap,Bl=new WeakMap,bo=new WeakMap,Yv=new WeakMap,Fl=new WeakMap,nd=new WeakMap,Dm=new WeakMap,Ul=new WeakMap,yc=new WeakMap,id=new WeakMap,jl=new WeakMap,Im=new WeakMap,Xr=new WeakMap,Kt=new WeakMap,ba=new WeakMap,$l=new WeakMap,zl=new WeakMap,Om=new WeakMap,sd=new WeakMap,Nm=new WeakMap,Wl=new WeakMap,wo=new WeakMap,wa=new WeakMap,km=new WeakMap,Lm=new WeakMap,gs=new WeakMap,nt=new WeakSet,Ow=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},ix=function(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let n of l(this,ln).values())if(n.hasTextLayer(e))return n;return null},UB=function(){let e=document.getSelection();if(!e||e.isCollapsed)return;let n=ee(this,nt,Ow).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,bo)||k(this,bo,new JA(this)),l(this,bo).show(n,i,this.direction==="ltr"))},jB=function(){let e=document.getSelection();if(!e||e.isCollapsed){l(this,ba)&&(l(this,bo)?.hide(),k(this,ba,null),ee(this,nt,Yn).call(this,{hasSelectedText:!1}));return}let{anchorNode:t}=e;if(t===l(this,ba))return;let i=ee(this,nt,Ow).call(this,e).closest(".textLayer");if(!i){l(this,ba)&&(l(this,bo)?.hide(),k(this,ba,null),ee(this,nt,Yn).call(this,{hasSelectedText:!1}));return}if(l(this,bo)?.hide(),k(this,ba,t),ee(this,nt,Yn).call(this,{hasSelectedText:!0}),!(l(this,Xr)!==vt.HIGHLIGHT&&l(this,Xr)!==vt.NONE)&&(l(this,Xr)===vt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,Bl,this.isShiftKeyDown),!this.isShiftKeyDown)){let o=l(this,Xr)===vt.HIGHLIGHT?ee(this,nt,ix).call(this,i):null;if(o?.toggleDrawing(),l(this,nd)){let s=new AbortController,a=this.combinedSignal(s),u=c=>{c.type==="pointerup"&&c.button!==0||(s.abort(),o?.toggleDrawing(!0),c.type==="pointerup"&&ee(this,nt,Bg).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}else o?.toggleDrawing(!0),ee(this,nt,Bg).call(this,"main_toolbar")}},Bg=function(e=""){l(this,Xr)===vt.HIGHLIGHT?this.highlightSelection(e):l(this,Tm)&&ee(this,nt,UB).call(this)},$B=function(){document.addEventListener("selectionchange",ee(this,nt,jB).bind(this),{signal:this._signal})},zB=function(){if(l(this,Ml))return;k(this,Ml,new AbortController);let e=this.combinedSignal(l(this,Ml));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},WB=function(){l(this,Ml)?.abort(),k(this,Ml,null)},sx=function(){if(l(this,Ul))return;k(this,Ul,new AbortController);let e=this.combinedSignal(l(this,Ul));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},qB=function(){l(this,Ul)?.abort(),k(this,Ul,null)},HB=function(){if(l(this,kl))return;k(this,kl,new AbortController);let e=this.combinedSignal(l(this,kl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},GB=function(){l(this,kl)?.abort(),k(this,kl,null)},VB=function(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Yn=function(e){Object.entries(e).some(([n,i])=>l(this,Nm)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Nm),e)}),l(this,Xr)===vt.HIGHLIGHT&&e.hasSelectedEditor===!1&&ee(this,nt,da).call(this,[[Mt.HIGHLIGHT_FREE,!0]]))},da=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},YB=async function(){if(!l(this,Fl)){k(this,Fl,!0);let e=[];for(let t of l(this,ln).values())e.push(t.enable());await Promise.all(e);for(let t of l(this,Lr).values())t.enable()}},XB=function(){if(this.unselectAll(),l(this,Fl)){k(this,Fl,!1);for(let e of l(this,ln).values())e.disable();for(let e of l(this,Lr).values())e.disable()}},ox=function(e){let t=l(this,ln).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},KB=function(){let e=null;for(e of l(this,Kt));return e},Fg=function(){if(l(this,Lr).size===0)return!0;if(l(this,Lr).size===1)for(let e of l(this,Lr).values())return e.isEmpty();return!1},ax=function(e){for(let t of l(this,Kt))t.unselect();l(this,Kt).clear();for(let t of e)t.isEmpty()||(l(this,Kt).add(t),t.select());ee(this,nt,Yn).call(this,{hasSelectedEditor:this.hasSelection})},Ke(jh,"TRANSLATE_SMALL",1),Ke(jh,"TRANSLATE_BIG",10);vu=jh,Xn=class Xn{constructor(e){q(this,Ys);q(this,gn,null);q(this,vo,!1);q(this,Ms,null);q(this,od,null);q(this,_o,null);q(this,Ri,null);q(this,ad,!1);q(this,Eo,null);q(this,pi,null);q(this,va,null);q(this,bc,null);q(this,Ao,!1);k(this,pi,e),k(this,Ao,e._uiManager.useNewAltTextFlow),l(Xn,ql)||k(Xn,ql,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Xn._l10n??(Xn._l10n=e)}async render(){let e=k(this,Ms,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=k(this,od,document.createElement("span"));e.append(t),l(this,Ao)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Xn,ql).missing),t.setAttribute("data-l10n-id",l(Xn,ql)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=l(this,pi)._uiManager._signal;e.addEventListener("contextmenu",Ki,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),l(this,pi)._uiManager.editAltText(l(this,pi)),l(this,Ao)&&l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Ys,Ug)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(k(this,ad,!0),i(o))},{signal:n}),await ee(this,Ys,Nw).call(this),e}finish(){l(this,Ms)&&(l(this,Ms).focus({focusVisible:l(this,ad)}),k(this,ad,!1))}isEmpty(){return l(this,Ao)?l(this,gn)===null:!l(this,gn)&&!l(this,vo)}hasData(){return l(this,Ao)?l(this,gn)!==null||!!l(this,va):this.isEmpty()}get guessedText(){return l(this,va)}async setGuessedText(e){l(this,gn)===null&&(k(this,va,e),k(this,bc,await Xn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),ee(this,Ys,Nw).call(this))}toggleAltTextBadge(e=!1){if(!l(this,Ao)||l(this,gn)){l(this,Eo)?.remove(),k(this,Eo,null);return}if(!l(this,Eo)){let t=k(this,Eo,document.createElement("div"));t.className="noAltTextBadge",l(this,pi).div.append(t)}l(this,Eo).classList.toggle("hidden",!e)}serialize(e){let t=l(this,gn);return!e&&l(this,va)===t&&(t=l(this,bc)),{altText:t,decorative:l(this,vo),guessedText:l(this,va),textWithDisclaimer:l(this,bc)}}get data(){return{altText:l(this,gn),decorative:l(this,vo)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(k(this,va,n),k(this,bc,i)),!(l(this,gn)===e&&l(this,vo)===t)&&(o||(k(this,gn,e),k(this,vo,t)),ee(this,Ys,Nw).call(this))}toggle(e=!1){l(this,Ms)&&(!e&&l(this,Ri)&&(clearTimeout(l(this,Ri)),k(this,Ri,null)),l(this,Ms).disabled=!e)}shown(){l(this,pi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Ys,Ug)}})}destroy(){l(this,Ms)?.remove(),k(this,Ms,null),k(this,od,null),k(this,_o,null),l(this,Eo)?.remove(),k(this,Eo,null)}};gn=new WeakMap,vo=new WeakMap,Ms=new WeakMap,od=new WeakMap,_o=new WeakMap,Ri=new WeakMap,ad=new WeakMap,Eo=new WeakMap,pi=new WeakMap,va=new WeakMap,bc=new WeakMap,Ao=new WeakMap,ql=new WeakMap,Ys=new WeakSet,Ug=function(){return l(this,gn)&&"added"||l(this,gn)===null&&this.guessedText&&"review"||"missing"},Nw=async function(){let e=l(this,Ms);if(!e)return;if(l(this,Ao)){if(e.classList.toggle("done",!!l(this,gn)),e.setAttribute("data-l10n-id",l(Xn,ql)[l(this,Ys,Ug)]),l(this,od)?.setAttribute("data-l10n-id",l(Xn,ql)[`${l(this,Ys,Ug)}-label`]),!l(this,gn)){l(this,_o)?.remove();return}}else{if(!l(this,gn)&&!l(this,vo)){e.classList.remove("done"),l(this,_o)?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,_o);if(!t){k(this,_o,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,pi).id}`;let i=100,o=l(this,pi)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Ri)),k(this,Ri,null)},{once:!0}),e.addEventListener("mouseenter",()=>{k(this,Ri,setTimeout(()=>{k(this,Ri,null),l(this,_o).classList.add("show"),l(this,pi)._reportTelemetry({action:"alt_text_tooltip"})},i))},{signal:o}),e.addEventListener("mouseleave",()=>{l(this,Ri)&&(clearTimeout(l(this,Ri)),k(this,Ri,null)),l(this,_o)?.classList.remove("show")},{signal:o})}l(this,vo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,gn)),t.parentNode||e.append(t),l(this,pi).getElementForAltText()?.setAttribute("aria-describedby",t.id)},q(Xn,ql,null),Ke(Xn,"_l10n",null);hv=Xn,Fh=class{constructor(e){q(this,Mm);q(this,xn,null);q(this,ms,null);q(this,wc,!1);q(this,gr,null);q(this,Pm,null);q(this,vc,null);q(this,Bs,null);q(this,_c,null);q(this,Ec,!1);q(this,Ac,null);k(this,gr,e)}renderForToolbar(){let e=k(this,ms,document.createElement("button"));return e.className="comment",ee(this,Mm,lx).call(this,e,!1)}renderForStandalone(){let e=k(this,xn,document.createElement("button"));e.className="annotationCommentButton";let t=l(this,gr).commentButtonPosition;if(t){let{style:n}=e;n.insetInlineEnd=`calc(${100*(l(this,gr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;let i=l(this,gr).commentButtonColor;i&&(n.backgroundColor=i)}return ee(this,Mm,lx).call(this,e,!0)}focusButton(){setTimeout(()=>{(l(this,xn)??l(this,ms))?.focus()},0)}onUpdatedColor(){if(!l(this,xn))return;let e=l(this,gr).commentButtonColor;e&&(l(this,xn).style.backgroundColor=e),l(this,gr)._uiManager.updatePopupColor(l(this,gr))}get commentButtonWidth(){return(l(this,xn)?.getBoundingClientRect().width??0)/l(this,gr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Ac))return l(this,Ac);if(!l(this,xn))return null;let{x:e,y:t,height:n}=l(this,xn).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,gr).parent.boundingClientRect;return[(e-i)/s,(t+n-o)/a]}set commentPopupPositionInLayer(e){k(this,Ac,e)}hasDefaultPopupPosition(){return l(this,Ac)===null}removeStandaloneCommentButton(){l(this,xn)?.remove(),k(this,xn,null)}removeToolbarCommentButton(){l(this,ms)?.remove(),k(this,ms,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,xn)&&(l(this,xn).classList.toggle("selected",e),l(this,xn).ariaExpanded=t)}edit(e){let t=this.commentPopupPositionInLayer,n,i;if(t)[n,i]=t;else{[n,i]=l(this,gr).commentButtonPosition;let{width:f,height:h,x:d,y:m}=l(this,gr);n=d+n*f,i=m+i*h}let o=l(this,gr).parent.boundingClientRect,{x:s,y:a,width:u,height:c}=o;l(this,gr)._uiManager.editComment(l(this,gr),s+n*u,a+i*c,{...e,parentDimensions:o})}finish(){l(this,ms)&&(l(this,ms).focus({focusVisible:l(this,wc)}),k(this,wc,!1))}isDeleted(){return l(this,Ec)||l(this,Bs)===""}isEmpty(){return l(this,Bs)===null}hasBeenEdited(){return this.isDeleted()||l(this,Bs)!==l(this,Pm)}serialize(){return this.data}get data(){return{text:l(this,Bs),richText:l(this,vc),date:l(this,_c),deleted:this.isDeleted()}}set data(e){if(e!==l(this,Bs)&&k(this,vc,null),e===null){k(this,Bs,""),k(this,Ec,!0);return}k(this,Bs,e),k(this,_c,new Date),k(this,Ec,!1)}setInitialText(e,t=null){k(this,Pm,e),this.data=e,k(this,_c,null),k(this,vc,t)}shown(){}destroy(){l(this,ms)?.remove(),k(this,ms,null),l(this,xn)?.remove(),k(this,xn,null),k(this,Bs,""),k(this,vc,null),k(this,_c,null),k(this,gr,null),k(this,wc,!1),k(this,Ec,!1)}};xn=new WeakMap,ms=new WeakMap,wc=new WeakMap,gr=new WeakMap,Pm=new WeakMap,vc=new WeakMap,Bs=new WeakMap,_c=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,Mm=new WeakSet,lx=function(e,t){if(!l(this,gr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,gr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));let n=l(this,gr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Ki,{signal:n}),t&&(e.addEventListener("focusin",o=>{l(this,gr)._focusEventsAllowed=!1,Cr(o)},{capture:!0,signal:n}),e.addEventListener("focusout",o=>{l(this,gr)._focusEventsAllowed=!0,Cr(o)},{capture:!0,signal:n})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let i=o=>{o.preventDefault(),e===l(this,ms)?this.edit():l(this,gr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(k(this,wc,!0),i(o))},{signal:n}),e.addEventListener("pointerenter",()=>{l(this,gr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{l(this,gr).toggleComment(!1,!1)},{signal:n}),e};CT=class CT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:s=null,signal:a}){q(this,_u);q(this,ld);q(this,xc,!1);q(this,Bm,null);q(this,Fm);q(this,Um);q(this,jm);q(this,$m);q(this,_a,null);q(this,Sc);q(this,Ea,null);q(this,Tc);q(this,Aa,null);k(this,ld,e),k(this,Bm,n),k(this,Fm,t),k(this,Um,i),k(this,jm,o),k(this,$m,s),k(this,Tc,new AbortController),k(this,Sc,AbortSignal.any([a,l(this,Tc).signal])),e.addEventListener("touchstart",ee(this,_u,ZB).bind(this),{passive:!1,signal:l(this,Sc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fo.pixelRatio}destroy(){l(this,Tc)?.abort(),k(this,Tc,null),l(this,_a)?.abort(),k(this,_a,null)}};ld=new WeakMap,xc=new WeakMap,Bm=new WeakMap,Fm=new WeakMap,Um=new WeakMap,jm=new WeakMap,$m=new WeakMap,_a=new WeakMap,Sc=new WeakMap,Ea=new WeakMap,Tc=new WeakMap,Aa=new WeakMap,_u=new WeakSet,ZB=function(e){var i,o,s;if((i=l(this,Fm))!=null&&i.call(this))return;if(e.touches.length===1){if(l(this,_a))return;let a=k(this,_a,new AbortController),u=AbortSignal.any([l(this,Sc),a.signal]),c=l(this,ld),f={capture:!0,signal:u,passive:!1},h=d=>{d.pointerType==="touch"&&(l(this,_a)?.abort(),k(this,_a,null))};c.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Cr(d),h(d))},f),c.addEventListener("pointerup",h,f),c.addEventListener("pointercancel",h,f);return}if(!l(this,Aa)){k(this,Aa,new AbortController);let a=AbortSignal.any([l(this,Sc),l(this,Aa).signal]),u=l(this,ld),c={signal:a,capture:!1,passive:!1};u.addEventListener("touchmove",ee(this,_u,JB).bind(this),c);let f=ee(this,_u,QB).bind(this);u.addEventListener("touchend",f,c),u.addEventListener("touchcancel",f,c),c.capture=!0,u.addEventListener("pointerdown",Cr,c),u.addEventListener("pointermove",Cr,c),u.addEventListener("pointercancel",Cr,c),u.addEventListener("pointerup",Cr,c),(o=l(this,Um))==null||o.call(this)}if(Cr(e),e.touches.length!==2||(s=l(this,Bm))!=null&&s.call(this)){k(this,Ea,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),k(this,Ea,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},JB=function(e){var S;if(!l(this,Ea)||e.touches.length!==2)return;Cr(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);let{screenX:i,screenY:o}=t,{screenX:s,screenY:a}=n,u=l(this,Ea),{touch0X:c,touch0Y:f,touch1X:h,touch1Y:d}=u,m=h-c,b=d-f,v=s-i,w=a-o,y=Math.hypot(v,w)||1,_=Math.hypot(m,b)||1;if(!l(this,xc)&&Math.abs(_-y)<=CT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=o,u.touch1X=s,u.touch1Y=a,!l(this,xc)){k(this,xc,!0);return}let E=[(i+s)/2,(o+a)/2];(S=l(this,jm))==null||S.call(this,E,_,y)},QB=function(e){var t;e.touches.length>=2||(l(this,Aa)&&(l(this,Aa).abort(),k(this,Aa,null),(t=l(this,$m))==null||t.call(this)),l(this,Ea)&&(Cr(e),k(this,Ea,null),k(this,xc,!1)))};um=CT,At=class At{constructor(e){q(this,mt);q(this,Cc,null);q(this,Fs,null);q(this,Er,null);q(this,cr,null);q(this,xa,null);q(this,ud,!1);q(this,Hl,null);q(this,zm,"");q(this,Sn,null);q(this,Rc,null);q(this,Sa,null);q(this,ys,null);q(this,Gl,null);q(this,Wm,"");q(this,Dc,!1);q(this,Di,null);q(this,qm,!1);q(this,Ic,!1);q(this,Ta,!1);q(this,xo,null);q(this,cd,0);q(this,fd,0);q(this,bs,null);q(this,Oc,null);Ke(this,"isSelected",!1);Ke(this,"_isCopy",!1);Ke(this,"_editToolbar",null);Ke(this,"_initialOptions",Object.create(null));Ke(this,"_initialData",null);Ke(this,"_isVisible",!0);Ke(this,"_uiManager",null);Ke(this,"_focusEventsAllowed",!0);q(this,Hm,!1);q(this,Xv,At._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;let{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,s];let[a,u]=this.parentDimensions;this.x=e.x/a,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){let e=At.prototype._resizeWithKeyboard,t=vu.TRANSLATE_SMALL,n=vu.TRANSLATE_BIG;return wt(this,"_resizerKeyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],At.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new mx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(At._l10n??(At._l10n=e),At._l10nResizer||(At._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),At._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Hm)}set _isDraggable(e){k(this,Hm,e),this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Xv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(ee(this,mt,jg).call(this),l(this,ys)?.remove(),k(this,ys,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Dc)?k(this,Dc,!1):this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){let[o,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/o,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){let[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){ee(this,mt,ux).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Di)||k(this,Di,[this.x,this.y,this.width,this.height]),ee(this,mt,ux).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,Di)||k(this,Di,[this.x,this.y,this.width,this.height]);let{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[u,c]=this.getBaseTranslation();s+=u,a+=c;let{style:f}=n;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*a).toFixed(2)}%`,this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,Di)&&(l(this,Di)[0]!==this.x||l(this,Di)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Di)&&(l(this,Di)[2]!==this.width||l(this,Di)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=At,i=n/e,o=n/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let{div:{style:t},pageDimensions:[n,i]}=this,{x:o,y:s,width:a,height:u}=this;if(a*=n,u*=i,o*=n,s*=i,this._mustFixPosition)switch(e){case 0:o=Wn(o,0,n-a),s=Wn(s,0,i-u);break;case 90:o=Wn(o,0,n-u),s=Wn(s,a,i);break;case 180:o=Wn(o,a,n),s=Wn(s,u,i);break;case 270:o=Wn(o,u,n),s=Wn(s,0,i-a);break}this.x=o/=n,this.y=s/=i;let[c,f]=this.getBaseTranslation();o+=c,s+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return ee(n=At,Gm,cx).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return ee(n=At,Gm,cx).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){let{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){l(this,Er)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Ic))return this._editToolbar;this._editToolbar=new ZA(this),this.div.append(this._editToolbar.render());let{toolbarButtons:e}=this;if(e)for(let[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,l(this,Er)?.destroy()}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Er)||(hv.initialize(At._l10n),k(this,Er,new hv(this)),l(this,Cc)&&(l(this,Er).data=l(this,Cc),k(this,Cc,null))),l(this,Er)}get altTextData(){return l(this,Er)?.data}set altTextData(e){l(this,Er)&&(l(this,Er).data=e)}get guessedAltText(){return l(this,Er)?.guessedText}async setGuessedAltText(e){await l(this,Er)?.setGuessedText(e)}serializeAltText(e){return l(this,Er)?.serialize(e)}hasAltText(){return!!l(this,Er)&&!l(this,Er).isEmpty()}hasAltTextData(){return l(this,Er)?.hasData()??!1}focusCommentButton(){l(this,cr)?.focusButton()}addCommentButton(){return this.canAddComment?l(this,cr)||k(this,cr,new Fh(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,xa)){this._uiManager.isEditingMode()&&l(this,xa).classList.remove("hidden");return}this.hasComment&&(k(this,xa,l(this,cr).renderForStandalone()),this.div.append(l(this,xa)))}}removeStandaloneCommentButton(){l(this,cr).removeStandaloneCommentButton(),k(this,xa,null)}hideStandaloneCommentButton(){l(this,xa)?.classList.add("hidden")}get comment(){let{data:{richText:e,text:t,date:n,deleted:i}}=l(this,cr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).setInitialText(e,n),!this.annotationElementId))return;let i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return l(this,cr)?.hasBeenEdited()}get hasDeletedComment(){return l(this,cr)?.isDeleted()}get hasComment(){return!!l(this,cr)&&!l(this,cr).isEmpty()&&!l(this,cr).isDeleted()}async editComment(e){l(this,cr)||k(this,cr,new Fh(this)),l(this,cr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,cr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){let[,,,i]=e.rect,[o]=this.pageDimensions,[s]=this.pageTranslation,a=s+o+1,u=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,u,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,cr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,ud)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),ee(this,mt,px).call(this);let[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);let[i,o]=this.getInitialTranslation();return this.translate(i,o),BB(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Oc)||k(this,Oc,new um({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ee(this,mt,rF).bind(this),onPinching:ee(this,mt,nF).bind(this),onPinchEnd:ee(this,mt,iF).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}pointerdown(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(k(this,Dc,!0),this._isDraggable){ee(this,mt,sF).call(this,e);return}ee(this,mt,dx).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,xo)&&clearTimeout(l(this,xo)),k(this,xo,setTimeout(()=>{k(this,xo,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){let i=this.parentScale,[o,s]=this.pageDimensions,[a,u]=this.pageTranslation,c=e/i,f=t/i,h=this.x*o,d=this.y*s,m=this.width*o,b=this.height*s;switch(n){case 0:return[h+c+a,s-d-f-b+u,h+c+m+a,s-d-f+u];case 90:return[h+f+a,s-d+c+u,h+f+b+a,s-d+c+m+u];case 180:return[h-c-m+a,s-d+f+u,h-c+a,s-d+f+b+u];case 270:return[h-f-b+a,s-d-c-m+u,h-f+a,s-d-c+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,i,o,s]=e,a=o-n,u=s-i;switch(this.rotation){case 0:return[n,t-s,a,u];case 90:return[n,t-i,u,a];case 180:return[o,t-i,a,u];case 270:return[o,t-s,u,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&At._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){l(this,cr)?.onUpdatedColor()}getData(){let{comment:{text:e,color:t,date:n,opacity:i,deleted:o,richText:s},uid:a,pageIndex:u,creationDate:c,modificationDate:f}=this;return{id:a,pageIndex:u,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:c,modificationDate:n||f,popupRef:!o,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),k(this,Ic,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),k(this,Ic,!1),!0):!1}isInEditMode(){return l(this,Ic)}shouldGetKeyboardEvents(){return l(this,Ta)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:s}=window;return t<s&&i>0&&e<o&&n>0}rebuild(){ee(this,mt,px).call(this)}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){let i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,k(i,Cc,e.accessibilityData),i._isCopy=e.isCopy||!1;let[o,s]=i.pageDimensions,[a,u,c,f]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/o,i.y=u/s,i.width=c/o,i.height=f/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(l(this,Gl)?.abort(),k(this,Gl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,xo)&&(clearTimeout(l(this,xo)),k(this,xo,null)),ee(this,mt,jg).call(this),this.removeEditToolbar(),l(this,bs)){for(let e of l(this,bs).values())clearTimeout(e);k(this,bs,null)}this.parent=null,l(this,Oc)?.destroy(),k(this,Oc,null),l(this,ys)?.remove(),k(this,ys,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ee(this,mt,eF).call(this),l(this,Sn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[e,t]}=this,[n,i,o,s]=this.getPDFRect();return[At._round(n+(o-n)*e),At._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,cr).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,cr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,cr).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,cr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,cr)?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=l(this,Sn).children;if(!l(this,Fs)){k(this,Fs,Array.from(t));let s=ee(this,mt,oF).bind(this),a=ee(this,mt,aF).bind(this),u=this._uiManager._signal;for(let c of l(this,Fs)){let f=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",s,{signal:u}),c.addEventListener("blur",a,{signal:u}),c.addEventListener("focus",ee(this,mt,lF).bind(this,f),{signal:u}),c.setAttribute("data-l10n-id",At._l10nResizer[f])}}let n=l(this,Fs)[0],i=0;for(let s of t){if(s===n)break;i++}let o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Fs).length/4);if(o!==i){if(o<i)for(let a=0;a<i-o;a++)l(this,Sn).append(l(this,Sn).firstElementChild);else if(o>i)for(let a=0;a<o-i;a++)l(this,Sn).firstElementChild.before(l(this,Sn).lastElementChild);let s=0;for(let a of t){let c=l(this,Fs)[s++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",At._l10nResizer[c])}}ee(this,mt,gx).call(this,0),k(this,Ta,!0),l(this,Sn).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ta)&&ee(this,mt,hx).call(this,l(this,Wm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){ee(this,mt,jg).call(this),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),l(this,Er)?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,l(this,Sn)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),l(this,Er)?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,qm)}set isEditing(e){k(this,qm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,bs)||k(this,bs,new Map);let{action:n}=e,i=l(this,bs).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),l(this,bs).delete(n),l(this,bs).size===0&&k(this,bs,null)},At._telemetryTimeout),l(this,bs).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),k(this,ud,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,ud,!0)}updateFakeAnnotationElement(e){if(!l(this,ys)&&!this.deleted){k(this,ys,e.addFakeAnnotation(this));return}if(this.deleted){l(this,ys).remove(),k(this,ys,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,ys).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Cc=new WeakMap,Fs=new WeakMap,Er=new WeakMap,cr=new WeakMap,xa=new WeakMap,ud=new WeakMap,Hl=new WeakMap,zm=new WeakMap,Sn=new WeakMap,Rc=new WeakMap,Sa=new WeakMap,ys=new WeakMap,Gl=new WeakMap,Wm=new WeakMap,Dc=new WeakMap,Di=new WeakMap,qm=new WeakMap,Ic=new WeakMap,Ta=new WeakMap,xo=new WeakMap,cd=new WeakMap,fd=new WeakMap,bs=new WeakMap,Oc=new WeakMap,Hm=new WeakMap,Xv=new WeakMap,mt=new WeakSet,ux=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Gm=new WeakSet,cx=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},kw=function(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},eF=function(){if(l(this,Sn))return;k(this,Sn,document.createElement("div")),l(this,Sn).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let i=document.createElement("div");l(this,Sn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",ee(this,mt,tF).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Ki,{signal:t}),i.tabIndex=-1}this.div.prepend(l(this,Sn))},tF=function(e,t){t.preventDefault();let{isMac:n}=Ur.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,Er)?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,k(this,Rc,[t.screenX,t.screenY]);let o=new AbortController,s=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ee(this,mt,hx).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Cr,{passive:!1,signal:s}),window.addEventListener("contextmenu",Ki,{signal:s}),k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let a=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let c=()=>{o.abort(),this.parent.togglePointerEvents(!0),l(this,Er)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=u,ee(this,mt,Lw).call(this)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})},fx=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Lw=function(){if(!l(this,Sa))return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=l(this,Sa);k(this,Sa,null);let o=this.x,s=this.y,a=this.width,u=this.height;o===e&&s===t&&a===n&&u===i||this.addCommands({cmd:ee(this,mt,fx).bind(this,o,s,a,u),undo:ee(this,mt,fx).bind(this,e,t,n,i),mustExec:!0})},hx=function(e,t){let[n,i]=this.parentDimensions,o=this.x,s=this.y,a=this.width,u=this.height,c=At.MIN_SIZE/n,f=At.MIN_SIZE/i,h=ee(this,mt,kw).call(this,this.rotation),d=(te,N)=>[h[0]*te+h[2]*N,h[1]*te+h[3]*N],m=ee(this,mt,kw).call(this,360-this.rotation),b=(te,N)=>[m[0]*te+m[2]*N,m[1]*te+m[3]*N],v,w,y=!1,_=!1;switch(e){case"topLeft":y=!0,v=(te,N)=>[0,0],w=(te,N)=>[te,N];break;case"topMiddle":v=(te,N)=>[te/2,0],w=(te,N)=>[te/2,N];break;case"topRight":y=!0,v=(te,N)=>[te,0],w=(te,N)=>[0,N];break;case"middleRight":_=!0,v=(te,N)=>[te,N/2],w=(te,N)=>[0,N/2];break;case"bottomRight":y=!0,v=(te,N)=>[te,N],w=(te,N)=>[0,0];break;case"bottomMiddle":v=(te,N)=>[te/2,N],w=(te,N)=>[te/2,0];break;case"bottomLeft":y=!0,v=(te,N)=>[0,N],w=(te,N)=>[te,0];break;case"middleLeft":_=!0,v=(te,N)=>[0,N/2],w=(te,N)=>[te,N/2];break}let E=v(a,u),S=w(a,u),A=d(...S),F=At._round(o+A[0]),I=At._round(s+A[1]),X=1,Z=1,H,ne;if(t.fromKeyboard)({deltaX:H,deltaY:ne}=t);else{let{screenX:te,screenY:N}=t,[x,P]=l(this,Rc);[H,ne]=this.screenToPageTranslation(te-x,N-P),l(this,Rc)[0]=te,l(this,Rc)[1]=N}if([H,ne]=b(H/n,ne/i),y){let te=Math.hypot(a,u);X=Z=Math.max(Math.min(Math.hypot(S[0]-E[0]-H,S[1]-E[1]-ne)/te,1/a,1/u),c/a,f/u)}else _?X=Wn(Math.abs(S[0]-E[0]-H),c,1)/a:Z=Wn(Math.abs(S[1]-E[1]-ne),f,1)/u;let L=At._round(a*X),$=At._round(u*Z);A=d(...w(L,$));let K=F-A[0],le=I-A[1];l(this,Di)||k(this,Di,[this.x,this.y,this.width,this.height]),this.width=L,this.height=$,this.x=K,this.y=le,this.setDims(),this.fixAndSetPosition(),this._onResizing()},rF=function(){k(this,Sa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),l(this,Er)?.toggle(!1),this.parent.togglePointerEvents(!1)},nF=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;let s=ee(this,mt,kw).call(this,this.rotation),a=(F,I)=>[s[0]*F+s[2]*I,s[1]*F+s[3]*I],[u,c]=this.parentDimensions,f=this.x,h=this.y,d=this.width,m=this.height,b=At.MIN_SIZE/u,v=At.MIN_SIZE/c;o=Math.max(Math.min(o,1/d,1/m),b/d,v/m);let w=At._round(d*o),y=At._round(m*o);if(w===d&&y===m)return;l(this,Di)||k(this,Di,[f,h,d,m]);let _=a(d/2,m/2),E=At._round(f+_[0]),S=At._round(h+_[1]),A=a(w/2,y/2);this.x=E-A[0],this.y=S-A[1],this.width=w,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iF=function(){l(this,Er)?.toggle(!0),this.parent.togglePointerEvents(!0),ee(this,mt,Lw).call(this)},dx=function(e){let{isMac:t}=Ur.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},sF=function(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,i=new AbortController,o=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:o},a=c=>{i.abort(),k(this,Hl,null),k(this,Dc,!1),this._uiManager.endDragSession()||ee(this,mt,dx).call(this,c),n&&this._onStopDragging()};t&&(k(this,cd,e.clientX),k(this,fd,e.clientY),k(this,Hl,e.pointerId),k(this,zm,e.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:f,clientY:h,pointerId:d}=c;if(d!==l(this,Hl)){Cr(c);return}let[m,b]=this.screenToPageTranslation(f-l(this,cd),h-l(this,fd));k(this,cd,f),k(this,fd,h),this._uiManager.dragSelectedEditors(m,b)},s),window.addEventListener("touchmove",Cr,s),window.addEventListener("pointerdown",c=>{c.pointerType===l(this,zm)&&(l(this,Oc)||c.isPrimary)&&a(c),Cr(c)},s));let u=c=>{if(!l(this,Hl)||l(this,Hl)===c.pointerId){a(c);return}Cr(c)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},px=function(){if(l(this,Gl)||!this.div)return;k(this,Gl,new AbortController);let e=this._uiManager.combinedSignal(l(this,Gl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},oF=function(e){At._resizerKeyboardManager.exec(this,e)},aF=function(e){l(this,Ta)&&e.relatedTarget?.parentNode!==l(this,Sn)&&ee(this,mt,jg).call(this)},lF=function(e){k(this,Wm,l(this,Ta)?e:"")},gx=function(e){if(l(this,Fs))for(let t of l(this,Fs))t.tabIndex=e},jg=function(){k(this,Ta,!1),ee(this,mt,gx).call(this,-1),ee(this,mt,Lw).call(this)},q(At,Gm),Ke(At,"_l10n",null),Ke(At,"_l10nResizer",null),Ke(At,"_borderLineWidth",-1),Ke(At,"_colorManager",new nx),Ke(At,"_zIndex",1),Ke(At,"_telemetryTimeout",1e3);mr=At,mx=class extends mr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},aB=3285377520,ls=4294901760,po=65535,dv=class{constructor(e){this.h1=e?e&4294967295:aB,this.h2=e?e&4294967295:aB}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){let y=e.charCodeAt(v);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=n>>2,o=n-i*4,s=new Uint32Array(t.buffer,0,i),a=0,u=0,c=this.h1,f=this.h2,h=3432918353,d=461845907,m=h&po,b=d&po;for(let v=0;v<i;v++)v&1?(a=s[v],a=a*h&ls|a*m&po,a=a<<15|a>>>17,a=a*d&ls|a*b&po,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(u=s[v],u=u*h&ls|u*m&po,u=u<<15|u>>>17,u=u*d&ls|u*b&po,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(a=0,o){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&ls|a*m&po,a=a<<15|a>>>17,a=a*d&ls|a*b&po,i&1?c^=a:f^=a}this.h1=c,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ls|e*36045&po,t=t*4283543511&ls|((t<<16|e>>>16)*2950163797&ls)>>>16,e^=t>>>1,e=e*444984403&ls|e*60499&po,t=t*3301882366&ls|((t<<16|e>>>16)*3120437893&ls)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},yx=Object.freeze({map:null,hash:"",transfer:void 0}),cm=class{constructor(){q(this,Kv);q(this,Nc,!1);q(this,kc,null);q(this,Ca,null);q(this,Tn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=l(this,Tn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return l(this,Tn).get(e)}remove(e){let t=l(this,Tn).get(e);if(t!==void 0&&(t instanceof mr&&l(this,Ca).delete(t.annotationElementId),l(this,Tn).delete(e),l(this,Tn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let n of l(this,Tn).values())if(n instanceof mr)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=l(this,Tn).get(e),i=!1;if(n!==void 0)for(let[o,s]of Object.entries(t))n[o]!==s&&(i=!0,n[o]=s);else i=!0,l(this,Tn).set(e,t);i&&ee(this,Kv,uF).call(this),t instanceof mr&&((l(this,Ca)||k(this,Ca,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,Tn).has(e)}get size(){return l(this,Tn).size}resetModified(){l(this,Nc)&&(k(this,Nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pv(this)}get serializable(){if(l(this,Tn).size===0)return yx;let e=new Map,t=new dv,n=[],i=Object.create(null),o=!1;for(let[s,a]of l(this,Tn)){let u=a instanceof mr?a.serialize(!1,i):a;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),o||(o=!!u.bitmap))}if(o)for(let s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:yx}get editorStats(){let e=null,t=new Map,n=0,i=0;for(let o of l(this,Tn).values()){if(!(o instanceof mr)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);let s=o.telemetryFinalData;if(!s)continue;let{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(o).constructor),e||(e=Object.create(null));let u=e[a]||(e[a]=new Map);for(let[c,f]of Object.entries(s)){if(c==="type")continue;let h=u.get(c);h||(h=new Map,u.set(c,h));let d=h.get(f)??0;h.set(f,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(let[o,s]of t)e[o]=s.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){k(this,kc,null)}updateEditor(e,t){let n=l(this,Ca)?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return l(this,Ca)?.get(e)||null}get modifiedIds(){if(l(this,kc))return l(this,kc);let e=[];if(l(this,Ca))for(let t of l(this,Ca).values())t.serialize()&&e.push(t.annotationElementId);return k(this,kc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,Tn).entries()}};Nc=new WeakMap,kc=new WeakMap,Ca=new WeakMap,Tn=new WeakMap,Kv=new WeakSet,uF=function(){l(this,Nc)||(k(this,Nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};pv=class extends cm{constructor(t){super();q(this,Vm);let{map:n,hash:i,transfer:o}=t.serializable,s=structuredClone(n,o?{transfer:o}:null);k(this,Vm,{map:s,hash:i,transfer:o})}get print(){dr("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Vm)}get modifiedIds(){return wt(this,"modifiedIds",{ids:new Set,hash:""})}};Vm=new WeakMap;bx=class{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){q(this,hd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,hd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||l(this,hd).has(e.loadedName))){if(Bt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:i,src:o,style:s}=e,a=new FontFace(i,o,s);this.addNativeFontFace(a);try{await a.load(),l(this,hd).add(i),n?.(e)}catch{_t(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw _t(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{let i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return wt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return wt(this,"isSyncFontLoadingSupported",Qn||Ur.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){let o=n.shift();setTimeout(o.callback,0)}}let{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return wt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(S,A){return S.charCodeAt(A)<<24|S.charCodeAt(A+1)<<16|S.charCodeAt(A+2)<<8|S.charCodeAt(A+3)&255}function i(S,A,F,I){let X=S.substring(0,A),Z=S.substring(A+F);return X+I+Z}let o,s,a=this._document.createElement("canvas");a.width=1,a.height=1;let u=a.getContext("2d"),c=0;function f(S,A){if(++c>30){_t("Load test font never loaded."),A();return}if(u.font="30px "+S,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(f.bind(null,S,A))}let h=`lt${Date.now()}${this.loadTestFontId++}`,d=this._loadTestFont;d=i(d,976,h.length,h);let b=16,v=1482184792,w=n(d,b);for(o=0,s=h.length-3;o<s;o+=4)w=w-v+n(h,o)|0;o<h.length&&(w=w-v+n(h+"XXX",o)|0),d=i(d,b,4,JG(w));let y=`url(data:font/opentype;base64,${btoa(d)});`,_=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(_);let E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(let S of[e.loadedName,h]){let A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=S,E.append(A)}this._document.body.append(E),f(h,()=>{E.remove(),t.complete()})}};hd=new WeakMap;wx=class{constructor(e,t=null,n,i){q(this,rr);this.compiledGlyphs=Object.create(null),k(this,rr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${SB(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n=this.loadedName+"_path_"+t,i;try{i=e.get(n)}catch(s){_t(`getPathGenerator - ignoring character: "${s}".`)}let o=OB(i?.path);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}get black(){return l(this,rr).black}get bold(){return l(this,rr).bold}get disableFontFace(){return l(this,rr).disableFontFace??!1}set disableFontFace(e){wt(this,"disableFontFace",!!e)}get fontExtraProperties(){return l(this,rr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,rr).isInvalidPDFjsFont}get isType3Font(){return l(this,rr).isType3Font}get italic(){return l(this,rr).italic}get missingFile(){return l(this,rr).missingFile}get remeasure(){return l(this,rr).remeasure}get vertical(){return l(this,rr).vertical}get ascent(){return l(this,rr).ascent}get defaultWidth(){return l(this,rr).defaultWidth}get descent(){return l(this,rr).descent}get bbox(){return l(this,rr).bbox}set bbox(e){wt(this,"bbox",e)}get fontMatrix(){return l(this,rr).fontMatrix}get fallbackName(){return l(this,rr).fallbackName}get loadedName(){return l(this,rr).loadedName}get mimetype(){return l(this,rr).mimetype}get name(){return l(this,rr).name}get data(){return l(this,rr).data}clearData(){l(this,rr).clearData()}get cssFontInfo(){return l(this,rr).cssFontInfo}get systemFontInfo(){return l(this,rr).systemFontInfo}get defaultVMetrics(){return l(this,rr).defaultVMetrics}};rr=new WeakMap;$h=class $h{constructor(e){q(this,gd);q(this,dd);q(this,pd);q(this,Ym);k(this,dd,e),k(this,pd,new DataView(l(this,dd))),k(this,Ym,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let c of $h.strings){let f=t.encode(e[c]);n[c]=f,i+=4+f.length}let o=new ArrayBuffer(i),s=new Uint8Array(o),a=new DataView(o),u=0;for(let c of $h.strings){let f=n[c],h=f.length;a.setUint32(u,h),s.set(f,u+4),u+=4+h}return Bt(u===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return ee(this,gd,Pw).call(this,0)}get fontWeight(){return ee(this,gd,Pw).call(this,1)}get italicAngle(){return ee(this,gd,Pw).call(this,2)}};dd=new WeakMap,pd=new WeakMap,Ym=new WeakMap,gd=new WeakSet,Pw=function(e){Bt(e<$h.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=l(this,pd).getUint32(t)+4;let n=l(this,pd).getUint32(t);return l(this,Ym).decode(new Uint8Array(l(this,dd),t+4,n))},Ke($h,"strings",["fontFamily","fontWeight","italicAngle"]);gv=$h,zh=class zh{constructor(e){q(this,Pc);q(this,Vl);q(this,So);q(this,Lc);k(this,Vl,e),k(this,So,new DataView(l(this,Vl))),k(this,Lc,new TextDecoder)}static write(e){let t=new TextEncoder,n={},i=0;for(let d of zh.strings){let m=t.encode(e[d]);n[d]=m,i+=4+m.length}i+=4;let o,s,a=1+i;e.style&&(o=t.encode(e.style.style),s=t.encode(e.style.weight),a+=4+o.length+4+s.length);let u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0;f.setUint8(h++,e.guessFallback?1:0),f.setUint32(h,0),h+=4,i=0;for(let d of zh.strings){let m=n[d],b=m.length;i+=4+b,f.setUint32(h,b),c.set(m,h+4),h+=4+b}return f.setUint32(h-i-4,i),e.style&&(f.setUint32(h,o.length),c.set(o,h+4),h+=4+o.length,f.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length),Bt(h<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(h)}get guessFallback(){return l(this,So).getUint8(0)!==0}get css(){return ee(this,Pc,$g).call(this,0)}get loadedName(){return ee(this,Pc,$g).call(this,1)}get baseFontName(){return ee(this,Pc,$g).call(this,2)}get src(){return ee(this,Pc,$g).call(this,3)}get style(){let e=1;e+=4+l(this,So).getUint32(e);let t=l(this,So).getUint32(e),n=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,t));e+=4+t;let i=l(this,So).getUint32(e),o=l(this,Lc).decode(new Uint8Array(l(this,Vl),e+4,i));return{style:n,weight:o}}};Vl=new WeakMap,So=new WeakMap,Lc=new WeakMap,Pc=new WeakSet,$g=function(e){Bt(e<zh.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=l(this,So).getUint32(t)+4;let n=l(this,So).getUint32(t);return l(this,Lc).decode(new Uint8Array(l(this,Vl),t+4,n))},Ke(zh,"strings",["css","loadedName","baseFontName","src"]);mv=zh,St=class St{constructor({data:e,extra:t}){q(this,Fr);q(this,To);q(this,Xm);q(this,nr);k(this,To,e),k(this,Xm,new TextDecoder),k(this,nr,new DataView(l(this,To))),t&&Object.assign(this,t)}get black(){return ee(this,Fr,Ls).call(this,0)}get bold(){return ee(this,Fr,Ls).call(this,1)}get disableFontFace(){return ee(this,Fr,Ls).call(this,2)}get fontExtraProperties(){return ee(this,Fr,Ls).call(this,3)}get isInvalidPDFjsFont(){return ee(this,Fr,Ls).call(this,4)}get isType3Font(){return ee(this,Fr,Ls).call(this,5)}get italic(){return ee(this,Fr,Ls).call(this,6)}get missingFile(){return ee(this,Fr,Ls).call(this,7)}get remeasure(){return ee(this,Fr,Ls).call(this,8)}get vertical(){return ee(this,Fr,Ls).call(this,9)}get ascent(){return ee(this,Fr,Mw).call(this,0)}get defaultWidth(){return ee(this,Fr,Mw).call(this,1)}get descent(){return ee(this,Fr,Mw).call(this,2)}get bbox(){let e=l(St,yd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<4;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=l(St,bd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<6;i++)n.push(l(this,nr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=l(St,wd);if(l(this,nr).getUint8(e)===0)return;e+=1;let n=[];for(let i=0;i<3;i++)n.push(l(this,nr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return ee(this,Fr,zg).call(this,0)}get loadedName(){return ee(this,Fr,zg).call(this,1)}get mimetype(){return ee(this,Fr,zg).call(this,2)}get name(){return ee(this,Fr,zg).call(this,3)}get data(){let e=l(St,Ii),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);if(o!==0)return new Uint8Array(l(this,To),e+4,o)}clearData(){let e=l(St,Ii),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);e+=4+i;let o=l(this,nr).getUint32(e);new Uint8Array(l(this,To),e+4,o).fill(0),l(this,nr).setUint32(e,0)}get cssFontInfo(){let e=l(St,Ii),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);e+=4+n;let i=l(this,nr).getUint32(e);if(i===0)return null;let o=new Uint8Array(i);return o.set(new Uint8Array(l(this,To),e+4,i)),new gv(o.buffer)}get systemFontInfo(){let e=l(St,Ii),t=l(this,nr).getUint32(e);e+=4+t;let n=l(this,nr).getUint32(e);if(n===0)return null;let i=new Uint8Array(n);return i.set(new Uint8Array(l(this,To),e+4,n)),new mv(i.buffer)}static write(e){let t=e.systemFontInfo?mv.write(e.systemFontInfo):null,n=e.cssFontInfo?gv.write(e.cssFontInfo):null,i=new TextEncoder,o={},s=0;for(let v of St.strings)o[v]=i.encode(e[v]),s+=4+o[v].length;let a=l(St,Ii)+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(a),c=new Uint8Array(u),f=new DataView(u),h=0,d=St.bools.length,m=0,b=0;for(let v=0;v<d;v++){let w=e[St.bools[v]];m|=(w===void 0?0:w?2:1)<<b,b+=2,(b===8||v===d-1)&&(f.setUint8(h++,m),m=0,b=0)}Bt(h===l(St,md),"FontInfo.write: Boolean properties offset mismatch");for(let v of St.numbers)f.setFloat64(h,e[v]),h+=8;if(Bt(h===l(St,yd),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(h++,4);for(let v of e.bbox)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=8;if(Bt(h===l(St,bd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(h++,6);for(let v of e.fontMatrix)f.setFloat64(h,v,!0),h+=8}else f.setUint8(h++,0),h+=48;if(Bt(h===l(St,wd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(h++,1);for(let v of e.defaultVMetrics)f.setInt16(h,v,!0),h+=2}else f.setUint8(h++,0),h+=6;Bt(h===l(St,Ii),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(l(St,Ii),0),h+=4;for(let v of St.strings){let w=o[v],y=w.length;f.setUint32(h,y),c.set(w,h+4),h+=4+y}if(f.setUint32(l(St,Ii),h-l(St,Ii)-4),!t)f.setUint32(h,0),h+=4;else{let v=t.byteLength;f.setUint32(h,v),Bt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),h+4),h+=4+v}if(!n)f.setUint32(h,0),h+=4;else{let v=n.byteLength;f.setUint32(h,v),Bt(h+4+v<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(n),h+4),h+=4+v}return e.data===void 0?(f.setUint32(h,0),h+=4):(f.setUint32(h,e.data.length),c.set(e.data,h+4),h+=4+e.data.length),Bt(h<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(h)}};md=new WeakMap,yd=new WeakMap,bd=new WeakMap,wd=new WeakMap,Ii=new WeakMap,To=new WeakMap,Xm=new WeakMap,nr=new WeakMap,Fr=new WeakSet,Ls=function(e){Bt(e<St.bools.length,"Invalid boolean index");let t=Math.floor(e/4),n=e*2%8,i=l(this,nr).getUint8(t)>>n&3;return i===0?void 0:i===2},Mw=function(e){return Bt(e<St.numbers.length,"Invalid number index"),l(this,nr).getFloat64(l(St,md)+e*8)},zg=function(e){Bt(e<St.strings.length,"Invalid string index");let t=l(St,Ii)+4;for(let o=0;o<e;o++)t+=l(this,nr).getUint32(t)+4;let n=l(this,nr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,To),t+4,n)),l(this,Xm).decode(i)},Ke(St,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Ke(St,"numbers",["ascent","defaultWidth","descent"]),Ke(St,"strings",["fallbackName","loadedName","mimetype","name"]),q(St,md,Math.ceil(St.bools.length*2/8)),q(St,yd,l(St,md)+St.numbers.length*8),q(St,bd,l(St,yd)+1+8),q(St,wd,l(St,bd)+1+48),q(St,Ii,l(St,wd)+1+6);vx=St,pr=class pr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],o=[],s=[],a=[],u=null,c=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],s=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,u=e[1],i=e[2],o=e[3],a=e[4]||[],n=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}let f=Math.floor(i.length/2),h=Math.floor(o.length/3),d=s.length,m=a.length,b=0;for(let A of a)b+=1,b=Math.ceil(b/4)*4,b+=4+A.coords.length*4,b+=4+A.colors.length*4,A.verticesPerRow!==void 0&&(b+=4);let v=20+f*8+h*3+d*8+(n?16:0)+(c?3:0)+b,w=new ArrayBuffer(v),y=new DataView(w),_=new Uint8Array(w);y.setUint8(l(pr,Km),t),y.setUint8(l(pr,Zm),n?1:0),y.setUint8(l(pr,Jm),c?1:0),y.setUint8(l(pr,Qm),u),y.setUint32(l(pr,ey),f,!0),y.setUint32(l(pr,ty),h,!0),y.setUint32(l(pr,ry),d,!0),y.setUint32(l(pr,ny),m,!0);let E=20;new Float32Array(w,E,f*2).set(i),E+=f*8,_.set(o,E),E+=h*3;for(let[A,F]of s)y.setFloat32(E,A,!0),E+=4,y.setUint32(E,parseInt(F.slice(1),16),!0),E+=4;if(n)for(let A of n)y.setFloat32(E,A,!0),E+=4;c&&(_.set(c,E),E+=3);for(let A=0;A<a.length;A++){let F=a[A];y.setUint8(E,F.type),E+=1,E=Math.ceil(E/4)*4,y.setUint32(E,F.coords.length,!0),E+=4,new Int32Array(w,E,F.coords.length).set(F.coords),E+=F.coords.length*4,y.setUint32(E,F.colors.length,!0),E+=4,new Int32Array(w,E,F.colors.length).set(F.colors),E+=F.colors.length*4,F.verticesPerRow!==void 0&&(y.setUint32(E,F.verticesPerRow,!0),E+=4)}return w}getIR(){let e=this.view,t=this.data[l(pr,Km)],n=!!this.data[l(pr,Zm)],i=!!this.data[l(pr,Jm)],o=e.getUint32(l(pr,ey),!0),s=e.getUint32(l(pr,ty),!0),a=e.getUint32(l(pr,ry),!0),u=e.getUint32(l(pr,ny),!0),c=20,f=new Float32Array(this.buffer,c,o*2);c+=o*8;let h=new Uint8Array(this.buffer,c,s*3);c+=s*3;let d=[];for(let w=0;w<a;++w){let y=e.getFloat32(c,!0);c+=4;let _=e.getUint32(c,!0);c+=4,d.push([y,`#${_.toString(16).padStart(6,"0")}`])}let m=null;if(n){m=[];for(let w=0;w<4;++w)m.push(e.getFloat32(c,!0)),c+=4}let b=null;i&&(b=new Uint8Array(this.buffer,c,3),c+=3);let v=[];for(let w=0;w<u;++w){let y=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;let _=e.getUint32(c,!0);c+=4;let E=new Int32Array(this.buffer,c,_);c+=_*4;let S=e.getUint32(c,!0);c+=4;let A=new Int32Array(this.buffer,c,S);c+=S*4;let F={type:y,coords:E,colors:A};y===GA.LATTICE&&(F.verticesPerRow=e.getUint32(c,!0),c+=4),v.push(F)}if(t===1)return["RadialAxial","axial",m,d,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,d,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(t===3){let w=this.data[l(pr,Qm)],y=null;if(f.length>0){let _=f[0],E=f[0],S=f[1],A=f[1];for(let F=0;F<f.length;F+=2){let I=f[F],X=f[F+1];_=_>I?I:_,S=S>X?X:S,E=E<I?I:E,A=A<X?X:A}y=[_,S,E,A]}return["Mesh",w,f,h,v,y,m,b]}throw new Error(`Unsupported pattern kind: ${t}`)}};Km=new WeakMap,Zm=new WeakMap,Jm=new WeakMap,Qm=new WeakMap,ey=new WeakMap,ty=new WeakMap,ry=new WeakMap,ny=new WeakMap,q(pr,Km,0),q(pr,Zm,1),q(pr,Jm,2),q(pr,Qm,3),q(pr,ey,4),q(pr,ty,8),q(pr,ry,12),q(pr,ny,16);_x=pr,Ex=class{constructor(e){q(this,vd);k(this,vd,e)}static write(e){let t,n;return Ur.isFloat16ArraySupported?(n=new ArrayBuffer(e.length*2),t=new Float16Array(n)):(n=new ArrayBuffer(e.length*4),t=new Float32Array(n)),t.set(e),n}get path(){return Ur.isFloat16ArraySupported?new Float16Array(l(this,vd)):new Float32Array(l(this,vd))}};vd=new WeakMap;Ax=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,lV=r=>typeof r=="object"&&typeof r?.name=="string",cF=rV.bind(null,Ax,lV),xx=class{constructor(){q(this,Ra,new Map);q(this,Zv,Promise.resolve())}postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};l(this,Zv).then(()=>{for(let[i]of l(this,Ra))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){let{signal:o}=n;if(o.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}let s=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",s),o.addEventListener("abort",s)}l(this,Ra).set(t,i)}removeEventListener(e,t){l(this,Ra).get(t)?.(),l(this,Ra).delete(t)}terminate(){for(let[,e]of l(this,Ra))e?.();l(this,Ra).clear()}};Ra=new WeakMap,Zv=new WeakMap;vw={DATA:1,ERROR:2},Yr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};fc=class{constructor(e,t,n){q(this,Ss);q(this,_d,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",ee(this,Ss,fF).bind(this),{signal:l(this,_d).signal})}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,n,i){let o=this.streamId++,s=this.sourceName,a=this.targetName,u=this.comObj;return new ReadableStream({start:c=>{let f=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:a,action:e,streamId:o,data:t,desiredSize:c.desiredSize},i),f.promise},pull:c=>{let f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,u.postMessage({sourceName:s,targetName:a,stream:Yr.PULL,streamId:o,desiredSize:c.desiredSize}),f.promise},cancel:c=>{Bt(c instanceof Error,"cancel must have a valid reason");let f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,u.postMessage({sourceName:s,targetName:a,stream:Yr.CANCEL,streamId:o,reason:hi(c)}),f.promise}},n)}destroy(){l(this,_d)?.abort(),k(this,_d,null)}};_d=new WeakMap,Ss=new WeakSet,fF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){ee(this,Ss,dF).call(this,e);return}if(e.callback){let n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===vw.DATA)i.resolve(e.data);else if(e.callback===vw.ERROR)i.reject(hi(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(s){o.postMessage({sourceName:n,targetName:i,callback:vw.DATA,callbackId:e.callbackId,data:s})},function(s){o.postMessage({sourceName:n,targetName:i,callback:vw.ERROR,callbackId:e.callbackId,reason:hi(s)})});return}if(e.streamId){ee(this,Ss,hF).call(this,e);return}t(e.data)},hF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this,a=this.actionHandler[e.action],u={enqueue(c,f=1,h){if(this.isCancelled)return;let d=this.desiredSize;this.desiredSize-=f,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:Yr.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.CLOSE,streamId:t}),delete s.streamSinks[t])},error(c){Bt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:Yr.ERROR,streamId:t,reason:hi(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(a,e.data,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.START_COMPLETE,streamId:t,reason:hi(c)})})},dF=function(e){let t=e.streamId,n=this.sourceName,i=e.sourceName,o=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Yr.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(hi(e.reason));break;case Yr.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(hi(e.reason));break;case Yr.PULL:if(!a){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||lB).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.PULL_COMPLETE,streamId:t,reason:hi(c)})});break;case Yr.ENQUEUE:if(Bt(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Yr.CLOSE:if(Bt(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),ee(this,Ss,Bw).call(this,s,t);break;case Yr.ERROR:Bt(s,"error should have stream controller"),s.controller.error(hi(e.reason)),ee(this,Ss,Bw).call(this,s,t);break;case Yr.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(hi(e.reason)),ee(this,Ss,Bw).call(this,s,t);break;case Yr.CANCEL:if(!a)break;let u=hi(e.reason);Promise.try(a.onCancel||lB,u).then(function(){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){o.postMessage({sourceName:n,targetName:i,stream:Yr.CANCEL_COMPLETE,streamId:t,reason:hi(c)})}),a.sinkCapability.reject(u),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Bw=async function(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]};yv=class{constructor({enableHWA:e=!1}){q(this,iy,!1);k(this,iy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,iy)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){dr("Abstract method `_createCanvas` called.")}};iy=new WeakMap;Sx=class extends yv{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},bv=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},wv=class extends bv{async _fetch(e){let t=await Ep(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):f0(t)}},vv=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,o){return"none"}destroy(e=!1){}},Tx=class extends vv{constructor({docId:t,ownerDocument:n=globalThis.document}){super();q(this,lt);q(this,Mc);q(this,Ed);q(this,Da);q(this,Ia);q(this,jn);q(this,Bc);q(this,Fc,0);k(this,Ia,t),k(this,jn,n)}addFilter(t){if(!t)return"none";let n=l(this,lt,Mn).get(t);if(n)return n;let[i,o,s]=ee(this,lt,Fw).call(this,t),a=t.length===1?i:`${i}${o}${s}`;if(n=l(this,lt,Mn).get(a),n)return l(this,lt,Mn).set(t,n),n;let u=`g_${l(this,Ia)}_transfer_map_${tn(this,Fc)._++}`,c=ee(this,lt,Nh).call(this,u);l(this,lt,Mn).set(t,c),l(this,lt,Mn).set(a,c);let f=ee(this,lt,kh).call(this,u);return ee(this,lt,Hg).call(this,i,o,s,f),c}addHCMFilter(t,n){let i=`${t}-${n}`,o="base",s=l(this,lt,Wg).get(o);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},l(this,lt,Wg).set(o,s)),!t||!n))return s.url;let a=ee(this,lt,Gg).call(this,t);t=it.makeHexColor(...a);let u=ee(this,lt,Gg).call(this,n);if(n=it.makeHexColor(...u),l(this,lt,Oh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return s.url;let c=new Array(256);for(let b=0;b<=255;b++){let v=b/255;c[b]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}let f=c.join(","),h=`g_${l(this,Ia)}_hcm_filter`,d=s.filter=ee(this,lt,kh).call(this,h);ee(this,lt,Hg).call(this,f,f,f,d),ee(this,lt,Cx).call(this,d);let m=(b,v)=>{let w=a[b]/255,y=u[b]/255,_=new Array(v+1);for(let E=0;E<=v;E++)_[E]=w+E/v*(y-w);return _.join(",")};return ee(this,lt,Hg).call(this,m(0,5),m(1,5),m(2,5),d),s.url=ee(this,lt,Nh).call(this,h),s.url}addAlphaFilter(t){let n=l(this,lt,Mn).get(t);if(n)return n;let[i]=ee(this,lt,Fw).call(this,[t]),o=`alpha_${i}`;if(n=l(this,lt,Mn).get(o),n)return l(this,lt,Mn).set(t,n),n;let s=`g_${l(this,Ia)}_alpha_map_${tn(this,Fc)._++}`,a=ee(this,lt,Nh).call(this,s);l(this,lt,Mn).set(t,a),l(this,lt,Mn).set(o,a);let u=ee(this,lt,kh).call(this,s);return ee(this,lt,Rx).call(this,i,u),a}addLuminosityFilter(t){let n=l(this,lt,Mn).get(t||"luminosity");if(n)return n;let i,o;if(t?([i]=ee(this,lt,Fw).call(this,[t]),o=`luminosity_${i}`):o="luminosity",n=l(this,lt,Mn).get(o),n)return l(this,lt,Mn).set(t,n),n;let s=`g_${l(this,Ia)}_luminosity_map_${tn(this,Fc)._++}`,a=ee(this,lt,Nh).call(this,s);l(this,lt,Mn).set(t,a),l(this,lt,Mn).set(o,a);let u=ee(this,lt,kh).call(this,s);return ee(this,lt,pF).call(this,u),t&&ee(this,lt,Rx).call(this,i,u),a}addHighlightHCMFilter(t,n,i,o,s){let a=`${n}-${i}-${o}-${s}`,u=l(this,lt,Wg).get(t);if(u?.key===a||(u?(u.filter?.remove(),u.key=a,u.url="none",u.filter=null):(u={key:a,url:"none",filter:null},l(this,lt,Wg).set(t,u)),!n||!i))return u.url;let[c,f]=[n,i].map(ee(this,lt,Gg).bind(this)),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[m,b]=[o,s].map(ee(this,lt,Gg).bind(this));d<h&&([h,d,m,b]=[d,h,b,m]),l(this,lt,Oh).style.color="";let v=(_,E,S)=>{let A=new Array(256),F=(d-h)/S,I=_/255,X=(E-_)/(255*S),Z=0;for(let H=0;H<=S;H++){let ne=Math.round(h+H*F),L=I+H*X;for(let $=Z;$<=ne;$++)A[$]=L;Z=ne+1}for(let H=Z;H<256;H++)A[H]=A[Z-1];return A.join(",")},w=`g_${l(this,Ia)}_hcm_${t}_filter`,y=u.filter=ee(this,lt,kh).call(this,w);return ee(this,lt,Cx).call(this,y),ee(this,lt,Hg).call(this,v(m[0],b[0],5),v(m[1],b[1],5),v(m[2],b[2],5),y),u.url=ee(this,lt,Nh).call(this,w),u.url}destroy(t=!1){t&&l(this,Bc)?.size||(l(this,Da)?.parentNode.parentNode.remove(),k(this,Da,null),l(this,Ed)?.clear(),k(this,Ed,null),l(this,Bc)?.clear(),k(this,Bc,null),k(this,Fc,0))}};Mc=new WeakMap,Ed=new WeakMap,Da=new WeakMap,Ia=new WeakMap,jn=new WeakMap,Bc=new WeakMap,Fc=new WeakMap,lt=new WeakSet,Mn=function(){return l(this,Ed)||k(this,Ed,new Map)},Wg=function(){return l(this,Bc)||k(this,Bc,new Map)},Oh=function(){if(!l(this,Da)){let t=l(this,jn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;let i=l(this,jn).createElementNS(ha,"svg");i.setAttribute("width",0),i.setAttribute("height",0),k(this,Da,l(this,jn).createElementNS(ha,"defs")),t.append(i),i.append(l(this,Da)),l(this,jn).body.append(t)}return l(this,Da)},Fw=function(t){if(t.length===1){let c=t[0],f=new Array(256);for(let d=0;d<256;d++)f[d]=c[d]/255;let h=f.join(",");return[h,h,h]}let[n,i,o]=t,s=new Array(256),a=new Array(256),u=new Array(256);for(let c=0;c<256;c++)s[c]=n[c]/255,a[c]=i[c]/255,u[c]=o[c]/255;return[s.join(","),a.join(","),u.join(",")]},Nh=function(t){if(l(this,Mc)===void 0){k(this,Mc,"");let n=l(this,jn).URL;n!==l(this,jn).baseURI&&(h0(n)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,Mc,ET(n,"")))}return`url(${l(this,Mc)}#${t})`},pF=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Cx=function(t){let n=l(this,jn).createElementNS(ha,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},kh=function(t){let n=l(this,jn).createElementNS(ha,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),l(this,lt,Oh).append(n),n},qg=function(t,n,i){let o=l(this,jn).createElementNS(ha,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),t.append(o)},Hg=function(t,n,i,o){let s=l(this,jn).createElementNS(ha,"feComponentTransfer");o.append(s),ee(this,lt,qg).call(this,s,"feFuncR",t),ee(this,lt,qg).call(this,s,"feFuncG",n),ee(this,lt,qg).call(this,s,"feFuncB",i)},Rx=function(t,n){let i=l(this,jn).createElementNS(ha,"feComponentTransfer");n.append(i),ee(this,lt,qg).call(this,i,"feFuncA",t)},Gg=function(t){return l(this,lt,Oh).style.color=t,Ap(getComputedStyle(l(this,lt,Oh)).getPropertyValue("color"))};_v=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},Ev=class extends _v{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}},Av=class{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){dr("Abstract method `_fetch` called.")}},xv=class extends Av{async _fetch(e){let t=await Ep(e,"arraybuffer");return new Uint8Array(t)}};Qn&&_t("Please use the `legacy` build in Node.js environments.");Dx=class extends vv{},Ix=class extends yv{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("")("@napi-rs/canvas").createCanvas(e,t)}},Ox=class extends bv{async _fetch(e){return ST(e)}},Nx=class extends _v{async _fetch(e){return ST(e)}},kx=class extends Av{async _fetch(e){return ST(e)}},Rh="__forcedDependency",{floor:uB,ceil:cB}=Math;Lx=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],Px=class{constructor(e,t){q(this,Ad);q(this,Yl);k(this,Ad,e),k(this,Yl,t)}get length(){return l(this,Ad).length}isEmpty(e){return l(this,Ad)[e]===Lx}minX(e){return l(this,Yl)[e*4+0]/256}minY(e){return l(this,Yl)[e*4+1]/256}maxX(e){return(l(this,Yl)[e*4+2]+1)/256}maxY(e){return(l(this,Yl)[e*4+3]+1)/256}};Ad=new WeakMap,Yl=new WeakMap;Ew=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t},Mx=class{constructor(e,t,n=!1){q(this,oy);q(this,gi,{__proto__:null});q(this,mi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Rh]:[]});q(this,Uc,new Map);q(this,Us,[]);q(this,jc,[]);q(this,Oa,[[1,0,0,1,0,0]]);q(this,Zt,[-1/0,-1/0,1/0,1/0]);q(this,ir,new Float64Array([1/0,1/0,-1/0,-1/0]));q(this,Na,-1);q(this,yi,new Set);q(this,sy,new Map);q(this,xd,new Map);q(this,$c);q(this,zc);q(this,ka);q(this,$n);q(this,Co);k(this,$c,e.width),k(this,zc,e.height),ee(this,oy,Bx).call(this,t),n&&k(this,Co,new Map)}growOperationsCount(e){e>=l(this,$n).length&&ee(this,oy,Bx).call(this,e,l(this,$n))}save(e){return k(this,gi,{__proto__:l(this,gi)}),k(this,mi,{__proto__:l(this,mi),transform:{__proto__:l(this,mi).transform},moveText:{__proto__:l(this,mi).moveText},sameLineText:{__proto__:l(this,mi).sameLineText},[Rh]:{__proto__:l(this,mi)[Rh]}}),k(this,Zt,{__proto__:l(this,Zt)}),l(this,Us).push(e),this}restore(e){let t=Object.getPrototypeOf(l(this,gi));if(t===null)return this;k(this,gi,t),k(this,mi,Object.getPrototypeOf(l(this,mi))),k(this,Zt,Object.getPrototypeOf(l(this,Zt)));let n=l(this,Us).pop();return n!==void 0&&(Ew(l(this,Co),e)?.dependencies.add(n),l(this,$n)[e]=l(this,$n)[n]),this}recordOpenMarker(e){return l(this,Us).push(e),this}getOpenMarker(){return l(this,Us).length===0?null:l(this,Us).at(-1)}recordCloseMarker(e){let t=l(this,Us).pop();return t!==void 0&&(Ew(l(this,Co),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}beginMarkedContent(e){return l(this,jc).push(e),this}endMarkedContent(e){let t=l(this,jc).pop();return t!==void 0&&(Ew(l(this,Co),e)?.dependencies.add(t),l(this,$n)[e]=l(this,$n)[t]),this}pushBaseTransform(e){return l(this,Oa).push(it.multiplyByDOMMatrix(l(this,Oa).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,Oa).length>1&&l(this,Oa).pop(),this}recordSimpleData(e,t){return l(this,gi)[e]=t,this}recordIncrementalData(e,t){return l(this,mi)[e].push(t),this}resetIncrementalData(e,t){return l(this,mi)[e].length=0,this}recordNamedData(e,t){return l(this,Uc).set(e,t),this}recordSimpleDataFromNamed(e,t,n){l(this,gi)[e]=l(this,Uc).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Rh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(let t of e)t in l(this,gi)&&this.recordFutureForcedDependency(t,l(this,gi)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let e of l(this,yi))this.recordFutureForcedDependency(Rh,e);return this}resetBBox(e){return l(this,Na)!==e&&(k(this,Na,e),l(this,ir)[0]=1/0,l(this,ir)[1]=1/0,l(this,ir)[2]=-1/0,l(this,ir)[3]=-1/0),this}recordClipBox(e,t,n,i,o,s){let a=it.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([n,o,i,s],a,u);let c=it.intersect(l(this,Zt),u);return c?(l(this,Zt)[0]=c[0],l(this,Zt)[1]=c[1],l(this,Zt)[2]=c[2],l(this,Zt)[3]=c[3]):(l(this,Zt)[0]=l(this,Zt)[1]=1/0,l(this,Zt)[2]=l(this,Zt)[3]=-1/0),this}recordBBox(e,t,n,i,o,s){let a=l(this,Zt);if(a[0]===1/0)return this;let u=it.multiplyByDOMMatrix(l(this,Oa).at(-1),t.getTransform());if(a[0]===-1/0)return it.axialAlignedBoundingBox([n,o,i,s],u,l(this,ir)),this;let c=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([n,o,i,s],u,c),l(this,ir)[0]=Math.min(l(this,ir)[0],Math.max(c[0],a[0])),l(this,ir)[1]=Math.min(l(this,ir)[1],Math.max(c[1],a[1])),l(this,ir)[2]=Math.max(l(this,ir)[2],Math.min(c[2],a[2])),l(this,ir)[3]=Math.max(l(this,ir)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,n,i=1,o=0,s=0,a){let u=n.bbox,c,f;if(u&&(c=u[2]!==u[0]&&u[3]!==u[1]&&l(this,xd).get(n),c!==!1&&(f=[0,0,0,0],it.axialAlignedBoundingBox(u,n.fontMatrix,f),(i!==1||o!==0||s!==0)&&it.scaleMinMax([i,0,0,-i,o,s],f),c)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!a)return this.recordFullPageBBox(e);let h=a();return u&&f&&c===void 0&&(c=f[0]<=o-h.actualBoundingBoxLeft&&f[2]>=o+h.actualBoundingBoxRight&&f[1]<=s-h.actualBoundingBoxAscent&&f[3]>=s+h.actualBoundingBoxDescent,l(this,xd).set(n,c),c)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-h.actualBoundingBoxLeft,o+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,ir)[0]=Math.max(0,l(this,Zt)[0]),l(this,ir)[1]=Math.max(0,l(this,Zt)[1]),l(this,ir)[2]=Math.min(l(this,$c),l(this,Zt)[2]),l(this,ir)[3]=Math.min(l(this,zc),l(this,Zt)[3]),this}getSimpleIndex(e){return l(this,gi)[e]}recordDependencies(e,t){let n=l(this,yi),i=l(this,gi),o=l(this,mi);for(let s of t)s in l(this,gi)?n.add(i[s]):s in o&&o[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return l(this,Uc).has(t)&&l(this,yi).add(l(this,Uc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Rh]),l(this,Co)){let n=Ew(l(this,Co),e),{dependencies:i}=n;l(this,yi).forEach(i.add,i),l(this,Us).forEach(i.add,i),l(this,jc).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(l(this,Na)===e){let n=uB(l(this,ir)[0]*256/l(this,$c)),i=uB(l(this,ir)[1]*256/l(this,zc)),o=cB(l(this,ir)[2]*256/l(this,$c)),s=cB(l(this,ir)[3]*256/l(this,zc));_w(l(this,ka),e,n,i,o,s);for(let a of l(this,yi))a!==e&&_w(l(this,ka),a,n,i,o,s);for(let a of l(this,Us))a!==e&&_w(l(this,ka),a,n,i,o,s);for(let a of l(this,jc))a!==e&&_w(l(this,ka),a,n,i,o,s);t||(l(this,yi).clear(),k(this,Na,-1))}return this}recordShowTextOperation(e,t=!1){let n=Array.from(l(this,yi));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(let i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Na)===e&&(k(this,Na,-1),l(this,Zt)[0]=Math.max(l(this,Zt)[0],l(this,ir)[0]),l(this,Zt)[1]=Math.max(l(this,Zt)[1],l(this,ir)[1]),l(this,Zt)[2]=Math.min(l(this,Zt)[2],l(this,ir)[2]),l(this,Zt)[3]=Math.min(l(this,Zt)[3],l(this,ir)[3]),t||l(this,yi).clear()),this}_takePendingDependencies(){let e=l(this,yi);return k(this,yi,new Set),e}_extractOperation(e){let t=l(this,sy).get(e);return l(this,sy).delete(e),t}_pushPendingDependencies(e){for(let t of e)l(this,yi).add(t)}take(){return l(this,xd).clear(),new Px(l(this,$n),l(this,ka))}takeDebugMetadata(){return l(this,Co)}};gi=new WeakMap,mi=new WeakMap,Uc=new WeakMap,Us=new WeakMap,jc=new WeakMap,Oa=new WeakMap,Zt=new WeakMap,ir=new WeakMap,Na=new WeakMap,yi=new WeakMap,sy=new WeakMap,xd=new WeakMap,$c=new WeakMap,zc=new WeakMap,ka=new WeakMap,$n=new WeakMap,Co=new WeakMap,oy=new WeakSet,Bx=function(e,t){let n=new ArrayBuffer(e*4);k(this,ka,new Uint8ClampedArray(n)),k(this,$n,new Uint32Array(n)),t&&t.length>0?(l(this,$n).set(t),l(this,$n).fill(Lx,t.length)):l(this,$n).fill(Lx)};RT=class RT{constructor(e,t,n){q(this,fr);q(this,Pr);q(this,js);q(this,Sd,0);q(this,Td,0);if(e instanceof RT&&l(e,js)===!!n)return e;k(this,fr,e),k(this,Pr,t),k(this,js,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return tn(this,Td)._++,l(this,fr).save(l(this,Pr)),this}restore(e){return l(this,Td)>0&&(l(this,fr).restore(l(this,Pr)),tn(this,Td)._--),this}recordOpenMarker(e){return tn(this,Sd)._++,this}getOpenMarker(){return l(this,Sd)>0?l(this,Pr):l(this,fr).getOpenMarker()}recordCloseMarker(e){return tn(this,Sd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,fr).pushBaseTransform(e),this}popBaseTransform(){return l(this,fr).popBaseTransform(),this}recordSimpleData(e,t){return l(this,fr).recordSimpleData(e,l(this,Pr)),this}recordIncrementalData(e,t){return l(this,fr).recordIncrementalData(e,l(this,Pr)),this}resetIncrementalData(e,t){return l(this,fr).resetIncrementalData(e,l(this,Pr)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return l(this,fr).recordSimpleDataFromNamed(e,t,l(this,Pr)),this}recordFutureForcedDependency(e,t){return l(this,fr).recordFutureForcedDependency(e,l(this,Pr)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,fr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,fr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,js)||l(this,fr).resetBBox(l(this,Pr)),this}recordClipBox(e,t,n,i,o,s){return l(this,js)||l(this,fr).recordClipBox(l(this,Pr),t,n,i,o,s),this}recordBBox(e,t,n,i,o,s){return l(this,js)||l(this,fr).recordBBox(l(this,Pr),t,n,i,o,s),this}recordCharacterBBox(e,t,n,i,o,s,a){return l(this,js)||l(this,fr).recordCharacterBBox(l(this,Pr),t,n,i,o,s,a),this}recordFullPageBBox(e){return l(this,js)||l(this,fr).recordFullPageBBox(l(this,Pr)),this}getSimpleIndex(e){return l(this,fr).getSimpleIndex(e)}recordDependencies(e,t){return l(this,fr).recordDependencies(l(this,Pr),t),this}recordNamedDependency(e,t){return l(this,fr).recordNamedDependency(l(this,Pr),t),this}recordOperation(e){return l(this,fr).recordOperation(l(this,Pr),!0),this}recordShowTextOperation(e){return l(this,fr).recordShowTextOperation(l(this,Pr),!0),this}bboxToClipBoxDropOperation(e){return l(this,js)||l(this,fr).bboxToClipBoxDropOperation(l(this,Pr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};fr=new WeakMap,Pr=new WeakMap,js=new WeakMap,Sd=new WeakMap,Td=new WeakMap;Sv=RT,us={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Dn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};fm=class{isModifyingCurrentTransform(){return!1}getPattern(){dr("Abstract method `getPattern` called.")}},Ux=class extends fm{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let n,i=this._p0,o=this._p1;if(t&&(i=i.slice(),o=o.slice(),it.applyTransform(i,t),it.applyTransform(o,t)),this._type==="axial")n=e.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let s=this._r0,a=this._r1;if(t){let u=new Float32Array(2);it.singularValueDecompose2dScale(t,u),s*=u[0],a*=u[0]}n=e.createRadialGradient(i[0],i[1],s,o[0],o[1],a)}for(let s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(e,t,n,i){let o;if(i===Dn.STROKE||i===Dn.FILL){if(this.isOriginBased()){let d=it.transform(n,t.baseTransform);this.matrix&&(d=it.transform(d,this.matrix));let m=.001,b=Math.hypot(d[0],d[1]),v=Math.hypot(d[2],d[3]),w=(d[0]*d[2]+d[1]*d[3])/(b*v);if(Math.abs(w)<m)if(this.isRadial()){if(Math.abs(b-v)<m)return this._createGradient(e,d)}else return this._createGradient(e,d)}let s=t.current.getClippedPathBoundingBox(i,Tr(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,u),f=c.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-s[0],-s[1]),n=it.transform(n,[1,0,0,1,s[0],s[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Fx(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(c.canvas,"no-repeat");let h=new DOMMatrix(n);o.setTransform(h)}else Fx(e,this._bbox),o=this._createGradient(e);return o}};jx=class extends fm{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){let a=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,f=Math.ceil(this._bounds[3])-u,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),m=c/h,b=f/d,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-u,scaleX:1/m,scaleY:1/b},w=h+4,y=d+4,_=n.getCanvas("mesh",w,y),E=_.context,S=E.createImageData(h,d);if(t){let F=S.data;for(let I=0,X=F.length;I<X;I+=4)F[I]=t[0],F[I+1]=t[1],F[I+2]=t[2],F[I+3]=255}for(let F of this._figures)uV(S,F,v);return E.putImageData(S,2,2),{canvas:_.canvas,offsetX:a-2*m,offsetY:u-2*b,scaleX:m,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Fx(e,this._bbox);let o=new Float32Array(2);if(i===Dn.SHADING)it.singularValueDecompose2dScale(Tr(e),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);let[a,u]=o;it.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=a,o[1]*=u}else it.singularValueDecompose2dScale(t.baseTransform,o);let s=this._createMeshCanvas(o,i===Dn.SHADING?null:this._background,t.cachedCanvases);return i!==Dn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}},$x=class extends fm{getPattern(){return"hotpink"}};fB={COLORED:1,UNCOLORED:2},Jv=class Jv{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){let{bbox:n,operatorList:i,paintType:o,tilingType:s,color:a,canvasGraphicsFactory:u}=this,{xstep:c,ystep:f}=this;c=Math.abs(c),f=Math.abs(f),c_("TilingType: "+s);let h=n[0],d=n[1],m=n[2],b=n[3],v=m-h,w=b-d,y=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,y);let[_,E]=y;it.singularValueDecompose2dScale(this.baseTransform,y);let S=_*y[0],A=E*y[1],F=v,I=w,X=!1,Z=!1,H=Math.ceil(c*S),ne=Math.ceil(f*A),L=Math.ceil(v*S),$=Math.ceil(w*A);H>=L?F=c:X=!0,ne>=$?I=f:Z=!0;let K=this.getSizeAndScale(F,this.ctx.canvas.width,S),le=this.getSizeAndScale(I,this.ctx.canvas.height,A),te=e.cachedCanvases.getCanvas("pattern",K.size,le.size),N=te.context,x=u.createCanvasGraphics(N,t);if(x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,o,a),N.translate(-K.scale*h,-le.scale*d),x.transform(0,K.scale,0,0,le.scale,0,0),N.save(),x.dependencyTracker?.save(),this.clipBbox(x,h,d,m,b),x.baseTransform=Tr(x.ctx),x.executeOperatorList(i),x.endDrawing(),x.dependencyTracker?.restore(),N.restore(),X||Z){let P=te.canvas;X&&(F=c),Z&&(I=f);let C=this.getSizeAndScale(F,this.ctx.canvas.width,S),U=this.getSizeAndScale(I,this.ctx.canvas.height,A),j=C.size,M=U.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",j,M),ce=Q.context,_e=X?Math.floor(v/c):0,re=Z?Math.floor(w/f):0;for(let W=0;W<=_e;W++)for(let oe=0;oe<=re;oe++)ce.drawImage(P,j*W,M*oe,j,M,0,0,j,M);return{canvas:Q.canvas,scaleX:C.scale,scaleY:U.scale,offsetX:h,offsetY:d}}return{canvas:te.canvas,scaleX:K.scale,scaleY:le.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){let i=Math.max(Jv.MAX_PATTERN_SIZE,t),o=Math.ceil(e*n);return o>=i?o=i:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,i,o){let s=i-t,a=o-n;e.ctx.rect(t,n,s,a),it.axialAlignedBoundingBox([t,n,i,o],Tr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let i=e.ctx,o=e.current;switch(t){case fB.COLORED:let{fillStyle:s,strokeStyle:a}=this.ctx;i.fillStyle=o.fillColor=s,i.strokeStyle=o.strokeColor=a;break;case fB.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new VA(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,o){let s=n;i!==Dn.SHADING&&(s=it.transform(s,t.baseTransform),this.matrix&&(s=it.transform(s,this.matrix)));let a=this.createPatternCanvas(t,o),u=new DOMMatrix(s);u=u.translate(a.offsetX,a.offsetY),u=u.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(u),c}};Ke(Jv,"MAX_PATTERN_SIZE",3e3);zx=Jv;hB=16,dB=100,hV=15,pB=10,vi=16,zA=new DOMMatrix,Vi=new Float32Array(2),Uh=new Float32Array([1/0,1/0,-1/0,-1/0]);Wx=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};Tv=class{constructor(e,t,n){Ke(this,"alphaIsShape",!1);Ke(this,"fontSize",0);Ke(this,"fontSizeScale",1);Ke(this,"textMatrix",null);Ke(this,"textMatrixScale",1);Ke(this,"fontMatrix",HA);Ke(this,"leading",0);Ke(this,"x",0);Ke(this,"y",0);Ke(this,"lineX",0);Ke(this,"lineY",0);Ke(this,"charSpacing",0);Ke(this,"wordSpacing",0);Ke(this,"textHScale",1);Ke(this,"textRenderingMode",on.FILL);Ke(this,"textRise",0);Ke(this,"fillColor","#000000");Ke(this,"strokeColor","#000000");Ke(this,"patternFill",!1);Ke(this,"patternStroke",!1);Ke(this,"fillAlpha",1);Ke(this,"strokeAlpha",1);Ke(this,"lineWidth",1);Ke(this,"activeSMask",null);Ke(this,"transferMaps","none");n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Uh.slice()}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Dn.FILL,t=null){let n=this.minMax.slice();if(e===Dn.STROKE){t||dr("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(t,Vi);let i=Vi[0]*this.lineWidth/2,o=Vi[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){let e=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Uh,0)}getClippedPathBoundingBox(e=Dn.FILL,t=null){return it.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};pV=["butt","round","square"],gV=["miter","round","bevel"],mV={},bB={},DT=class DT{constructor(e,t,n,i,o,{optionalContentConfig:s,markedContentStack:a=null},u,c,f){q(this,Ks);this.ctx=e,this.current=new Tv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=s,this.cachedCanvases=new Wx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){let o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,n){let u=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Tr(this.compositeCtx))}this.ctx.save(),xw(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Tr(this.ctx)}executeOperatorList(e,t,n,i,o){let s=e.argsArray,a=e.fnArray,u=t||0,c=s.length;if(c===u)return u;let f=c-u>pB&&typeof n=="function",h=f?Date.now()+hV:0,d=0,m=this.commonObjs,b=this.objs,v,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(!o||o(u))if(v=a[u],w=s[u]??null,v!==yp.dependency)w===null?this[v](u):this[v](u,...w);else for(let y of w){this.dependencyTracker?.recordNamedData(y,u);let _=y.startsWith("g_")?m:b;if(!_.has(y))return _.get(y,n),u}if(u++,u===c)return u;if(f&&++d>pB){if(Date.now()>h)return n(),u;d=0}}}endDrawing(){ee(this,Ks,qx).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),ee(this,Ks,Hx).call(this)}_scaleImage(e,t){let n=e.width??e.displayWidth,i=e.height??e.displayHeight,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),a=n,u=i,c="prescale1",f,h;for(;o>2&&a>1||s>2&&u>1;){let d=a,m=u;o>2&&a>1&&(d=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/d),s>2&&u>1&&(m=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/m),f=this.cachedCanvases.getCanvas(c,d,m),h=f.context,h.clearRect(0,0,d,m),h.drawImage(e,0,0,a,u,0,0,d,m),e=f.canvas,a=d,u=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:u}}_createMaskCanvas(e,t){let n=this.ctx,{width:i,height:o}=t,s=this.current.fillColor,a=this.current.patternFill,u=Tr(n),c,f,h,d;if((t.bitmap||t.data)&&t.count>1){let H=t.bitmap||t.data.buffer;f=JSON.stringify(a?u:[u.slice(0,4),s]),c=this._cachedBitmapsMap.get(H),c||(c=new Map,this._cachedBitmapsMap.set(H,c));let ne=c.get(f);if(ne&&!a){let L=Math.round(Math.min(u[0],u[2])+u[4]),$=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,us.transformAndFill),{canvas:ne,offsetX:L,offsetY:$}}h=ne}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,o),mB(d.context,t));let m=it.transform(u,[1/i,0,0,-1/o,0,0]);m=it.transform(m,[1,0,0,1,0,-o]);let b=Uh.slice();it.axialAlignedBoundingBox([0,0,i,o],m,b);let[v,w,y,_]=b,E=Math.round(y-v)||1,S=Math.round(_-w)||1,A=this.cachedCanvases.getCanvas("fillCanvas",E,S),F=A.context,I=v,X=w;F.translate(-I,-X),F.transform(...m),h||(h=this._scaleImage(d.canvas,ho(F)),h=h.img,c&&a&&c.set(f,h)),F.imageSmoothingEnabled=yB(Tr(F),t.interpolate),Aw(F,h,0,0,h.width,h.height,0,0,i,o),F.globalCompositeOperation="source-in";let Z=it.transform(ho(F),[1,0,0,1,-I,-X]);return F.fillStyle=a?s.getPattern(n,this,Z,Dn.FILL,e):s,F.fillRect(0,0,i,o),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(f,A.canvas)),this.dependencyTracker?.recordDependencies(e,us.transformAndFill),{canvas:A.canvas,offsetX:Math.round(I),offsetY:Math.round(X)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=pV[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=gV[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(let[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;let s=this.ctx=o.context;s.setTransform(this.suspendedCtx.getTransform()),Og(this.suspendedCtx,s),dV(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Og(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){let o=i[0],s=i[1],a=i[2]-o,u=i[3]-s;a===0||u===0||(this.genericComposeSMask(t.context,n,a,u,t.subtype,t.backdrop,t.transferMap,o,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,o,s,a,u,c,f,h){let d=e.canvas,m=u-f,b=c-h;if(s)if(m<0||b<0||m+n>d.width||b+i>d.height){let w=this.cachedCanvases.getCanvas("maskExtension",n,i),y=w.context;y.drawImage(d,-m,-b),y.globalCompositeOperation="destination-atop",y.fillStyle=s,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",d=w.canvas,m=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let w=new Path2D;w.rect(m,b,n,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(m,b,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));let v=new Path2D;v.rect(u,c,n,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(d,m,b,n,i,u,c,n,i),t.restore()}save(e){this.inSMaskMode&&Og(this.ctx,this.suspendedCtx),this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Og(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,o,s,a){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,o,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[o]=n;if(!i){o||(o=n[0]=new Path2D),this[t](e,o);return}if(this.dependencyTracker!==null){let s=t===yp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}o instanceof Path2D||(o=n[0]=OB(o)),it.axialAlignedBoundingBox(i,Tr(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){let i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){let s=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,ho(i),Dn.STROKE,e),s){let a=new Path2D;a.addPath(t,i.getTransform().invertSelf().multiplySelf(s)),t=a}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,us.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Dn.STROKE,Tr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){let i=this.ctx,o=this.current.fillColor,s=this.current.patternFill,a=!1;if(s){let c=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=o.getPattern(i,this,ho(i),Dn.FILL,e),c){let f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=f}a=!0}let u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,us.fill),a&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,us.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=mV}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=bB}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){let t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){let{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){let i=new Path2D,o=n.getTransform().invertSelf();for(let{transform:s,x:a,y:u,fontSize:c,path:f}of t)f&&i.addPath(f,new DOMMatrix(s).preMultiplySelf(o).translate(a,u).scale(c,-c));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);let i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||HA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+t),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;let s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`,u="normal";i.black?u="900":i.bold&&(u="bold");let c=i.italic?"italic":"normal",f=n;n<hB?f=hB:n>dB&&(f=dB),this.current.fontSizeScale=n/f,this.ctx.font=`${c} ${u} ${f}px ${a}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);let{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,o,s){let a=this.ctx,u=this.current,c=u.font,f=u.textRenderingMode,h=u.fontSize/u.fontSizeScale,d=f&on.FILL_STROKE_MASK,m=!!(f&on.ADD_TO_PATH_FLAG),b=u.patternFill&&!c.missingFile,v=u.patternStroke&&!c.missingFile,w;if((c.disableFontFace||m||b||v)&&!c.missingFile&&(w=c.getPathGenerator(this.commonObjs,t)),w&&(c.disableFontFace||b||v)){a.save(),a.translate(n,i),a.scale(h,-h),this.dependencyTracker?.recordCharacterBBox(e,a,c);let y;if(d===on.FILL||d===on.FILL_STROKE)if(o){y=a.getTransform(),a.setTransform(...o);let _=ee(this,Ks,Gx).call(this,w,y,o);a.fill(_)}else a.fill(w);if(d===on.STROKE||d===on.FILL_STROKE)if(s){y||(y=a.getTransform()),a.setTransform(...s);let{a:_,b:E,c:S,d:A}=y,F=it.inverseTransform(s),I=it.transform([_,E,S,A,0,0],F);it.singularValueDecompose2dScale(I,Vi),a.lineWidth*=Math.max(Vi[0],Vi[1])/h,a.stroke(ee(this,Ks,Gx).call(this,w,y,s))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(d===on.FILL||d===on.FILL_STROKE)&&(a.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t))),(d===on.STROKE||d===on.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i,()=>a.measureText(t)).recordDependencies(e,us.stroke),a.strokeText(t,n,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Tr(a),x:n,y:i,fontSize:h,path:w}),this.dependencyTracker?.recordCharacterBBox(e,a,c,h,n,i))}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return wt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,us.showText).resetBBox(e),this.current.textRenderingMode&on.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());let n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}let o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}let s=this.ctx,a=n.fontSizeScale,u=n.charSpacing,c=n.wordSpacing,f=n.fontDirection,h=n.textHScale*f,d=t.length,m=i.vertical,b=m?1:-1,v=i.defaultVMetrics,w=o*n.fontMatrix[0],y=n.textRenderingMode===on.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),f>0?s.scale(h,-1):s.scale(h,1);let _,E,S=n.textRenderingMode&on.FILL_STROKE_MASK,A=S===on.FILL||S===on.FILL_STROKE,F=S===on.STROKE||S===on.FILL_STROKE;if(A&&n.patternFill){s.save();let ne=n.fillColor.getPattern(s,this,ho(s),Dn.FILL,e);_=Tr(s),s.restore(),s.fillStyle=ne}if(F&&n.patternStroke){s.save();let ne=n.strokeColor.getPattern(s,this,ho(s),Dn.STROKE,e);E=Tr(s),s.restore(),s.strokeStyle=ne}let I=n.lineWidth,X=n.textMatrixScale;if(X===0||I===0?F&&(I=this.getSinglePixelWidth()):I/=X,a!==1&&(s.scale(a,a),I/=a),s.lineWidth=I,i.isInvalidPDFjsFont){let ne=[],L=0;for(let K of t)ne.push(K.unicode),L+=K.width;let $=ne.join("");if(s.fillText($,0,0),this.dependencyTracker!==null){let K=s.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=L*w*h,s.restore(),this.compose();return}let Z=0,H;for(H=0;H<d;++H){let ne=t[H];if(typeof ne=="number"){Z+=b*ne*o/1e3;continue}let L=!1,$=(ne.isSpace?c:0)+u,K=ne.fontChar,le=ne.accent,te,N,x=ne.width;if(m){let U=ne.vmetric||v,j=-(ne.vmetric?U[1]:x*.5)*w,M=U[2]*w;x=U?-U[0]:x,te=j/a,N=(Z+M)/a}else te=Z/a,N=0;let P;if(i.remeasure&&x>0){P=s.measureText(K);let U=P.width*1e3/o*a;if(x<U&&this.isFontSubpixelAAEnabled){let j=x/U;L=!0,s.save(),s.scale(j,1),te/=j}else x!==U&&(te+=(x-U)/2e3*o/a)}if(this.contentVisible&&(ne.isInFont||i.missingFile)){if(y&&!le)s.fillText(K,te,N),this.dependencyTracker?.recordCharacterBBox(e,s,P?{bbox:null}:i,o/a,te,N,()=>P??s.measureText(K));else if(this.paintChar(e,K,te,N,_,E),le){let U=te+o*le.offset.x/a,j=N-o*le.offset.y/a;this.paintChar(e,le.fontChar,U,j,_,E)}}let C=m?x*w-$*f:x*w+$*f;Z+=C,L&&s.restore()}m?n.y-=Z:n.x+=Z*h,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){let n=this.ctx,i=this.current,o=i.font,s=i.fontSize,a=i.fontDirection,u=o.vertical?1:-1,c=i.charSpacing,f=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||HA,m=t.length,b=i.textRenderingMode===on.INVISIBLE,v,w,y,_;if(b||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,a);let E=this.dependencyTracker;for(this.dependencyTracker=E?new Sv(E,e):null,v=0;v<m;++v){if(w=t[v],typeof w=="number"){_=u*w*s/1e3,this.ctx.translate(_,0),i.x+=_*h;continue}let S=(w.isSpace?f:0)+c,A=o.charProcOperatorList[w.operatorListId];A?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...d),this.executeOperatorList(A),this.restore()):_t(`Type3 character "${w.operatorListId}" is not available.`);let F=[w.width,0];it.applyTransform(F,d),y=F[0]*s+S,n.translate(y,0),i.x+=y*h}n.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,o,s,a){let u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,o,a).recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){let i=this.baseTransform||Tr(this.ctx),o={createCanvasGraphics:(s,a)=>new DT(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Sv(this.dependencyTracker,a,!0):null)};n=new zx(t,this.ctx,o,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=cV(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;let n=this.ctx;this.save(e);let i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ho(n),Dn.SHADING,e);let o=ho(n);if(o){let{width:s,height:a}=n.canvas,u=Uh.slice();it.axialAlignedBoundingBox([0,0,s,a],o,u);let[c,f,h,d]=u;this.ctx.fillRect(c,f,h-c,d-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,us.transform).recordDependencies(e,us.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){dr("Should not call beginInlineImage")}beginImageData(){dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Tr(this.ctx),n)){it.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);let[i,o,s,a]=n,u=new Path2D;u.rect(i,o,s-i,a-o),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,o,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let n=this.ctx;t.isolated||c_("TODO: Support non-isolated groups."),t.knockout&&_t("Knockout groups not supported.");let i=Tr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=Uh.slice();it.axialAlignedBoundingBox(t.bbox,Tr(n),o);let s=[0,0,n.canvas.width,n.canvas.height];o=it.intersect(o,s)||[0,0,0,0];let a=Math.floor(o[0]),u=Math.floor(o[1]),c=Math.max(Math.ceil(o[2])-a,1),f=Math.max(Math.ceil(o[3])-u,1);this.current.startNewPathAndClipBox([0,0,c,f]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(h,c,f),m=d.context;m.translate(-a,-u),m.transform(...i);let b=new Path2D,[v,w,y,_]=t.bbox;if(b.rect(v,w,y-v,_-w),t.matrix){let E=new Path2D;E.addPath(b,new DOMMatrix(t.matrix)),b=E}m.clip(b),t.smask&&this.smaskStack.push({canvas:d.canvas,context:m,offsetX:a,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,u),n.save()),Og(n,m),this.ctx=m,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;let n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let o=Tr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);let s=Uh.slice();it.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,s),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,i,o,s){if(ee(this,Ks,qx).call(this),xw(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){let a=n[2]-n[0],u=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=u,it.singularValueDecompose2dScale(Tr(this.ctx),Vi);let{viewportScale:c}=this,f=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(u*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(f,h);let{canvas:d,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Vi[0],0,0,-Vi[1],0,u*Vi[1]),xw(this.ctx)}else{xw(this.ctx),this.endPath(e);let c=new Path2D;c.rect(n[0],n[1],a,u),this.ctx.clip(c)}}this.current=new Tv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),ee(this,Ks,Hx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;let n=t.count;t=this.getObject(e,t.data,t),t.count=n;let i=this.ctx,o=this._createMaskCanvas(e,t),s=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+s.width,o.offsetY,o.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,o=0,s,a){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);let u=this.ctx;u.save();let c=Tr(u);u.transform(n,i,o,s,0,0);let f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-c[4],f.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let h=0,d=a.length;h<d;h+=2){let m=it.transform(c,[n,i,o,s,a[h],a[h+1]]);u.drawImage(f.canvas,m[4],m[5]),this.dependencyTracker?.recordBBox(e,this.ctx,m[4],m[4]+f.canvas.width,m[5],m[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,us.transformAndFill);for(let s of t){let{data:a,width:u,height:c,transform:f}=s,h=this.cachedCanvases.getCanvas("maskCanvas",u,c),d=h.context;d.save();let m=this.getObject(e,a,s);mB(d,m),d.globalCompositeOperation="source-in",d.fillStyle=o?i.getPattern(d,this,ho(n),Dn.FILL,e):i,d.fillRect(0,0,u,c),d.restore(),n.save(),n.transform(...f),n.scale(1,-1),Aw(n,h.canvas,0,0,u,c,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,u,0,c),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;let n=this.getObject(e,t);if(!n){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,o){if(!this.contentVisible)return;let s=this.getObject(e,t);if(!s){_t("Dependent image isn't ready yet");return}let a=s.width,u=s.height,c=[];for(let f=0,h=o.length;f<h;f+=2)c.push({transform:[n,0,0,i,o[f],o[f+1]],x:0,y:0,w:a,h:u});this.paintInlineImageXObjectGroup(e,s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,i),s=o.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;let n=t.width,i=t.height,o=this.ctx;this.save(e);let{filter:s}=o;s!=="none"&&s!==""&&(o.filter="none"),o.scale(1/n,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{let f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;gB(f,t),a=this.applyTransferMapsToCanvas(f)}let u=this._scaleImage(a,ho(o));o.imageSmoothingEnabled=yB(Tr(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,n,-i,0).recordDependencies(e,us.imageXObject).recordOperation(e),Aw(o,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;let i=this.ctx,o;if(t.bitmap)o=t.bitmap;else{let s=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",s,a).context;gB(c,t),o=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(e);for(let s of n)i.save(),i.transform(...s.transform),i.scale(1,-1),Aw(i,o,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,us.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){let i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);let o=this.ctx;this.pendingClip?(i||(this.pendingClip===bB?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=Tr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:i,d:o}=this.ctx.getTransform(),s,a;if(n===0&&i===0){let u=Math.abs(t),c=Math.abs(o);if(u===c)if(e===0)s=a=1/u;else{let f=u*e;s=a=f<1?1/f:1}else if(e===0)s=1/u,a=1/c;else{let f=u*e,h=c*e;s=f<1?1/f:1,a=h<1?1/h:1}}else{let u=Math.abs(t*o-n*i),c=Math.hypot(t,n),f=Math.hypot(i,o);if(e===0)s=f/u,a=c/u;else{let h=e*u;s=f>h?f/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){let{ctx:n,current:{lineWidth:i}}=this,[o,s]=this.getScaleForStroking();if(o===s){n.lineWidth=(i||1)*o,n.stroke(e);return}let a=n.getLineDash();t&&n.save(),n.scale(o,s),zA.a=1/o,zA.d=1/s;let u=new Path2D;if(u.addPath(e,zA),a.length>0){let c=Math.max(o,s);n.setLineDash(a.map(f=>f/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ks=new WeakSet,qx=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Hx=function(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Gx=function(e,t,n){let i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};qh=DT;for(let r in yp)qh.prototype[r]!==void 0&&(qh.prototype[yp[r]]=qh.prototype[r]);Es=class{static get workerPort(){return l(this,ay)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");k(this,ay,e)}static get workerSrc(){return l(this,ly)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");k(this,ly,e)}};ay=new WeakMap,ly=new WeakMap,q(Es,ay,null),q(Es,ly,"");Vx=class{constructor({parsedData:e,rawData:t}){q(this,Cd);q(this,uy);k(this,Cd,e),k(this,uy,t)}getRaw(){return l(this,uy)}get(e){return l(this,Cd).get(e)??null}[Symbol.iterator](){return l(this,Cd).entries()}};Cd=new WeakMap,uy=new WeakMap;Lh=Symbol("INTERNAL"),Yx=class{constructor(e,{name:t,intent:n,usage:i,rbGroups:o}){q(this,cy,!1);q(this,fy,!1);q(this,hy,!1);q(this,Rd,!0);k(this,cy,!!(e&Gi.DISPLAY)),k(this,fy,!!(e&Gi.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(l(this,hy))return l(this,Rd);if(!l(this,Rd))return!1;let{print:e,view:t}=this.usage;return l(this,cy)?t?.viewState!=="OFF":l(this,fy)?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Lh&&dr("Internal method `_setVisible` called."),k(this,hy,n),k(this,Rd,t)}};cy=new WeakMap,fy=new WeakMap,hy=new WeakMap,Rd=new WeakMap;Xx=class{constructor(e,t=Gi.DISPLAY){q(this,dy);q(this,Xl,null);q(this,sr,new Map);q(this,Dd,null);q(this,Id,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,k(this,Id,e.order);for(let n of e.groups)l(this,sr).set(n.id,new Yx(t,n));if(e.baseState==="OFF")for(let n of l(this,sr).values())n._setVisible(Lh,!1);for(let n of e.on)l(this,sr).get(n)._setVisible(Lh,!0);for(let n of e.off)l(this,sr).get(n)._setVisible(Lh,!1);k(this,Dd,this.getHash())}}isVisible(e){if(l(this,sr).size===0)return!0;if(!e)return c_("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,sr).has(e.id)?l(this,sr).get(e.id).visible:(_t(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return ee(this,dy,Kx).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(!l(this,sr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!l(this,sr).has(t))return _t(`Optional content group not found: ${t}`),!0;if(l(this,sr).get(t).visible)return!1}return!0}return _t(`Unknown optional content policy ${e.policy}.`),!0}return _t(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let i=l(this,sr).get(e);if(!i){_t(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(let o of i.rbGroups)for(let s of o)s!==e&&l(this,sr).get(s)?._setVisible(Lh,!1,!0);i._setVisible(Lh,!!t,!0),k(this,Xl,null)}setOCGState({state:e,preserveRB:t}){let n;for(let i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}let o=l(this,sr).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}k(this,Xl,null)}get hasInitialVisibility(){return l(this,Dd)===null||this.getHash()===l(this,Dd)}getOrder(){return l(this,sr).size?l(this,Id)?l(this,Id).slice():[...l(this,sr).keys()]:null}getGroup(e){return l(this,sr).get(e)||null}getHash(){if(l(this,Xl)!==null)return l(this,Xl);let e=new dv;for(let[t,n]of l(this,sr))e.update(`${t}:${n.visible}`);return k(this,Xl,e.hexdigest())}[Symbol.iterator](){return l(this,sr).entries()}};Xl=new WeakMap,sr=new WeakMap,Dd=new WeakMap,Id=new WeakMap,dy=new WeakSet,Kx=function(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let i=1;i<t;i++){let o=e[i],s;if(Array.isArray(o))s=ee(this,dy,Kx).call(this,o);else if(l(this,sr).has(o))s=l(this,sr).get(o).visible;else return _t(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};Zx=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:o,progressiveDone:s,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=a,o?.length>0){let u=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,c)=>{this._onReceiveData({begin:u,chunk:c})}),e.addProgressListener((u,c)=>{this._onProgress({loaded:u,total:c})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Bt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new Jx(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new Qx(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},Jx=class{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=f_(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},Qx=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};eS=class{constructor(e){Ke(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=gF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new tS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new rS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},tS=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),i=t.url;fetch(i,wF(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=h_(o.url),!bF(o.status))throw d0(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();let s=o.headers,{allowRangeRequests:a,suggestedLength:u}=mF({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=u||this._contentLength,this._filename=yF(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:vF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},rS=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);let s=i.url;fetch(s,wF(o,this._withCredentials,this._abortController)).then(a=>{let u=h_(a.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!bF(a.status))throw d0(a.status,s);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:vF(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},WA=200,qA=206;nS=class{constructor({url:e,httpHeaders:t,withCredentials:n}){Ke(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=gF(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[o,s]of this.headers)t.setRequestHeader(o,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=qA):i.expectedStatus=WA,t.responseType="arraybuffer",Bt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}let o=i.status||WA;if(!(o===WA&&n.expectedStatus===qA)&&o!==n.expectedStatus){n.onError(i.status);return}let a=bV(i);if(o===qA){let u=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(_t('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},iS=class{constructor(e){this._source=e,this._manager=new nS(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new sS(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new oS(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},sS=class{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=h_(t.responseURL);let n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[u,...c]=a.split(": ");return[u,c.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:s}=mF({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=yF(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=d0(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},oS=class{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let e=h_(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=d0(e,this._url));for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},wV=/^[a-z][a-z0-9\-+.]+:/i;aS=class{constructor(e){this.source=e,this.url=vV(e.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new lS(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new uS(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},lS=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=d0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Xs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},uS=class{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=e.source;this._isStreamingSupported=!i.disableStream;let o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Ng=Symbol("INITIAL_DATA"),Cv=class{constructor(){q(this,py);q(this,Oi,Object.create(null))}get(e,t=null){if(t){let i=ee(this,py,cS).call(this,e);return i.promise.then(()=>t(i.data)),null}let n=l(this,Oi)[e];if(!n||n.data===Ng)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=l(this,Oi)[e];return!!t&&t.data!==Ng}delete(e){let t=l(this,Oi)[e];return!t||t.data===Ng?!1:(delete l(this,Oi)[e],!0)}resolve(e,t=null){let n=ee(this,py,cS).call(this,e);n.data=t,n.resolve()}clear(){for(let e in l(this,Oi)){let{data:t}=l(this,Oi)[e];t?.bitmap?.close()}k(this,Oi,Object.create(null))}*[Symbol.iterator](){for(let e in l(this,Oi)){let{data:t}=l(this,Oi)[e];t!==Ng&&(yield[e,t])}}};Oi=new WeakMap,py=new WeakSet,cS=function(e){var t;return(t=l(this,Oi))[e]||(t[e]={...Promise.withResolvers(),data:Ng})};_V=1e5,wB=30,An=class An{constructor({textContentSource:e,container:t,viewport:n}){q(this,il);q(this,Kl,Promise.withResolvers());q(this,Ni,null);q(this,gy,!1);q(this,my,!!globalThis.FontInspector?.enabled);q(this,Wc,null);q(this,La,null);q(this,yy,0);q(this,by,0);q(this,qc,null);q(this,wy,null);q(this,Od,0);q(this,Zl,0);q(this,Nd,Object.create(null));q(this,vy,[]);q(this,kd,null);q(this,Hc,[]);q(this,_y,new WeakMap);q(this,Ey,null);var u;if(e instanceof ReadableStream)k(this,kd,e);else if(typeof e=="object")k(this,kd,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,Ni,k(this,wy,t)),k(this,Zl,n.scale*Fo.pixelRatio),k(this,Od,n.rotation),k(this,La,{div:null,properties:null,ctx:null});let{pageWidth:i,pageHeight:o,pageX:s,pageY:a}=n.rawDims;k(this,Ey,[1,0,0,-1,-s,a+o]),k(this,by,i),k(this,yy,o),ee(u=An,Xi,AF).call(u),t.style.setProperty("--min-font-size",l(An,Pd)),wu(t,n),l(this,Kl).promise.finally(()=>{l(An,Md).delete(this),k(this,La,null),k(this,Nd,null)}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=Ur.platform;return wt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{l(this,qc).read().then(({value:t,done:n})=>{if(n){l(this,Kl).resolve();return}l(this,Wc)??k(this,Wc,t.lang),Object.assign(l(this,Nd),t.styles),ee(this,il,_F).call(this,t.items),e()},l(this,Kl).reject)};return k(this,qc,l(this,kd).getReader()),l(An,Md).add(this),e(),l(this,Kl).promise}update({viewport:e,onBefore:t=null}){var o;let n=e.scale*Fo.pixelRatio,i=e.rotation;if(i!==l(this,Od)&&(t?.(),k(this,Od,i),wu(l(this,wy),{rotation:i})),n!==l(this,Zl)){t?.(),k(this,Zl,n);let s={div:null,properties:null,ctx:ee(o=An,Xi,Uw).call(o,l(this,Wc))};for(let a of l(this,Hc))s.properties=l(this,_y).get(a),s.div=a,ee(this,il,fS).call(this,s)}}cancel(){let e=new Xs("TextLayer task cancelled.");l(this,qc)?.cancel(e).catch(()=>{}),k(this,qc,null),l(this,Kl).reject(e)}get textDivs(){return l(this,Hc)}get textContentItemsStr(){return l(this,vy)}static cleanup(){if(!(l(this,Md).size>0)){l(this,Ld).clear();for(let{canvas:e}of l(this,Gc).values())e.remove();l(this,Gc).clear()}}};Kl=new WeakMap,Ni=new WeakMap,gy=new WeakMap,my=new WeakMap,Wc=new WeakMap,La=new WeakMap,yy=new WeakMap,by=new WeakMap,qc=new WeakMap,wy=new WeakMap,Od=new WeakMap,Zl=new WeakMap,Nd=new WeakMap,vy=new WeakMap,kd=new WeakMap,Hc=new WeakMap,_y=new WeakMap,Ey=new WeakMap,Ld=new WeakMap,Gc=new WeakMap,Ay=new WeakMap,Pd=new WeakMap,Md=new WeakMap,il=new WeakSet,_F=function(e){var i,o;if(l(this,gy))return;(o=l(this,La)).ctx??(o.ctx=ee(i=An,Xi,Uw).call(i,l(this,Wc)));let t=l(this,Hc),n=l(this,vy);for(let s of e){if(t.length>_V){_t("Ignoring additional textDivs for performance reasons."),k(this,gy,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){let a=l(this,Ni);k(this,Ni,document.createElement("span")),l(this,Ni).classList.add("markedContent"),s.id&&l(this,Ni).setAttribute("id",`${s.id}`),a.append(l(this,Ni))}else s.type==="endMarkedContent"&&k(this,Ni,l(this,Ni).parentNode);continue}n.push(s.str),ee(this,il,EF).call(this,s)}},EF=function(e){var b;let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Hc).push(t);let i=it.transform(l(this,Ey),e.transform),o=Math.atan2(i[1],i[0]),s=l(this,Nd)[e.fontName];s.vertical&&(o+=Math.PI/2);let a=l(this,my)&&s.fontSubstitution||s.fontFamily;a=An.fontFamilyMap.get(a)||a;let u=Math.hypot(i[2],i[3]),c=u*ee(b=An,Xi,xF).call(b,a,s,l(this,Wc)),f,h;o===0?(f=i[4],h=i[5]-c):(f=i[4]+c*Math.sin(o),h=i[5]-c*Math.cos(o));let d=t.style;d.left=`${(100*f/l(this,by)).toFixed(2)}%`,d.top=`${(100*h/l(this,yy)).toFixed(2)}%`,d.setProperty("--font-height",`${u.toFixed(2)}px`),d.fontFamily=a,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,my)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let v=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);v!==w&&Math.max(v,w)/Math.min(v,w)>1.5&&(m=!0)}if(m&&(n.canvasWidth=s.vertical?e.height:e.width),l(this,_y).set(t,n),l(this,La).div=t,l(this,La).properties=n,ee(this,il,fS).call(this,l(this,La)),n.hasText&&l(this,Ni).append(t),n.hasEOL){let v=document.createElement("br");v.setAttribute("role","presentation"),l(this,Ni).append(v)}},fS=function(e){var s;let{div:t,properties:n,ctx:i}=e,{style:o}=t;if(n.canvasWidth!==0&&n.hasText){let{fontFamily:a}=o,{canvasWidth:u,fontSize:c}=n;ee(s=An,Xi,hS).call(s,i,c*l(this,Zl),a);let{width:f}=i.measureText(t.textContent);f>0&&o.setProperty("--scale-x",u*l(this,Zl)/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},Xi=new WeakSet,Uw=function(e=null){let t=l(this,Gc).get(e||(e=""));if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Gc).set(e,t),l(this,Ay).set(t,{size:0,family:""})}return t},hS=function(e,t,n){let i=l(this,Ay).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},AF=function(){if(l(this,Pd)!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),k(this,Pd,e.getBoundingClientRect().height),e.remove()},xF=function(e,t,n){let i=l(this,Ld).get(e);if(i)return i;let o=ee(this,Xi,Uw).call(this,n);o.canvas.width=o.canvas.height=wB,ee(this,Xi,hS).call(this,o,wB,e);let s=o.measureText(""),a=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let c=.8;return a?c=a/(a+u):(Ur.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),l(this,Ld).set(e,c),c},q(An,Xi),q(An,Ld,new Map),q(An,Gc,new Map),q(An,Ay,new WeakMap),q(An,Pd,null),q(An,Md,new Set);vp=An,EV=100;e_=class e_{constructor(){Ke(this,"_capability",Promise.withResolvers());Ke(this,"_transport",null);Ke(this,"_worker",null);Ke(this,"docId",`d${tn(e_,Qv)._++}`);Ke(this,"destroyed",!1);Ke(this,"onPassword",null);Ke(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Qv=new WeakMap,q(e_,Qv,0);dS=e_,hm=class{constructor(e,t,n=!1,i=null){q(this,Vc,Promise.withResolvers());q(this,xy,[]);q(this,Sy,[]);q(this,Ty,[]);q(this,Cy,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){l(this,Cy).push(e)}addProgressListener(e){l(this,Ty).push(e)}addProgressiveReadListener(e){l(this,Sy).push(e)}addProgressiveDoneListener(e){l(this,xy).push(e)}onDataRange(e,t){for(let n of l(this,Cy))n(e,t)}onDataProgress(e,t){l(this,Vc).promise.then(()=>{for(let n of l(this,Ty))n(e,t)})}onDataProgressiveRead(e){l(this,Vc).promise.then(()=>{for(let t of l(this,Sy))t(e)})}onDataProgressiveDone(){l(this,Vc).promise.then(()=>{for(let e of l(this,xy))e()})}transportReady(){l(this,Vc).resolve()}requestDataRange(e,t){dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};Vc=new WeakMap,xy=new WeakMap,Sy=new WeakMap,Ty=new WeakMap,Cy=new WeakMap;pS=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},gS=class{constructor(e,t,n,i=!1){q(this,Yc);q(this,Pa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new uv:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Cv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new lm({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:o=Za.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:u=null,annotationCanvasMap:c=null,pageColors:f=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:m=!1,operationsFilter:b=null}){this._stats?.time("Overall");let v=this._transport.getRenderingIntent(i,o,h,d),{renderingIntent:w,cacheKey:y}=v;k(this,Pa,!1),u||(u=this._transport.getOptionalContentConfig(w));let _=this._intentStates.get(y);_||(_=Object.create(null),this._intentStates.set(y,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);let E=!!(w&Gi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));let S=!!(this._pdfBug&&globalThis.StepperManager?.enabled),A=!this.recordedBBoxes&&(m||S),F=Z=>{if(_.renderTasks.delete(I),A){let H=I.gfx?.dependencyTracker.take();H&&(I.stepper&&I.stepper.setOperatorBBoxes(H,I.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=H))}E&&k(this,Pa,!0),ee(this,Yc,Vg).call(this),Z?(I.capability.reject(Z),this._abortOperatorList({intentState:_,reason:Z instanceof Error?Z:new Error(Z)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new bS({callback:F,params:{canvas:t,canvasContext:e,dependencyTracker:A?new Mx(t,_.operatorList.length,S):null,viewport:n,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:b});(_.renderTasks||(_.renderTasks=new Set)).add(I);let X=I.task;return Promise.all([_.displayReadyCapability.promise,u]).then(([Z,H])=>{if(this.destroyed){F();return}if(this._stats?.time("Rendering"),!(H.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:Z,optionalContentConfig:H}),I.operatorListChanged()}).catch(F),X}getOperatorList({intent:e="display",annotationMode:t=Za.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(u))}let s=this._transport.getRenderingIntent(e,t,n,i,!0),a=this._intentStates.get(s.cacheKey);a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a));let u;return a.opListReadCapability||(u=Object.create(null),u.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(u),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>om.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,i){function o(){s.read().then(function({value:u,done:c}){if(c){n(a);return}a.lang??(a.lang=u.lang),Object.assign(a.styles,u.styles),a.items.push(...u.items),o()},i)}let s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),k(this,Pa,!1),Promise.all(e)}cleanup(e=!1){k(this,Pa,!0);let t=ee(this,Yc,Vg).call(this);return e&&t&&this._stats&&(this._stats=new uv),t}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&ee(this,Yc,Vg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){let{map:o,transfer:s}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},s).getReader(),c=this._intentStates.get(t);c.streamReader=u;let f=()=>{u.read().then(({value:h,done:d})=>{if(d){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),f())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let d of c.renderTasks)d.operatorListChanged();ee(this,Yc,Vg).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof wp){let i=EV;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Xs(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}};Pa=new WeakMap,Yc=new WeakSet,Vg=function(){if(!l(this,Pa)||this.destroyed)return!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,Pa,!1),!0};_r=class _r{constructor({name:e=null,port:t=null,verbosity:n=KG()}={}){q(this,ei);q(this,Jl,Promise.withResolvers());q(this,$s,null);q(this,Ma,null);q(this,Xc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(l(_r,Zc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(_r,Zc).set(t,this),ee(this,ei,TF).call(this,t)}else ee(this,ei,CF).call(this)}get promise(){return l(this,Jl).promise}get port(){return l(this,Ma)}get messageHandler(){return l(this,$s)}destroy(){this.destroyed=!0,l(this,Xc)?.terminate(),k(this,Xc,null),l(_r,Zc).delete(l(this,Ma)),k(this,Ma,null),l(this,$s)?.destroy(),k(this,$s,null)}static create(e){let t=l(this,Zc).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _r(e)}static get workerSrc(){if(Es.workerSrc)return Es.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return wt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Bd,$w)?l(this,Bd,$w):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jl=new WeakMap,$s=new WeakMap,Ma=new WeakMap,Xc=new WeakMap,t_=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,ei=new WeakSet,jw=function(){l(this,Jl).resolve(),l(this,$s).send("configure",{verbosity:this.verbosity})},TF=function(e){k(this,Ma,e),k(this,$s,new fc("main","worker",e)),l(this,$s).on("ready",()=>{}),ee(this,ei,jw).call(this)},CF=function(){if(l(_r,Kc)||l(_r,Bd,$w)){ee(this,ei,Yg).call(this);return}let{workerSrc:e}=_r;try{_r._isSameOrigin(window.location,e)||(e=_r._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new fc("main","worker",t),i=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?l(this,Jl).reject(new Error("Worker was destroyed")):ee(this,ei,Yg).call(this)},o=new AbortController;t.addEventListener("error",()=>{l(this,Xc)||i()},{signal:o.signal}),n.on("test",a=>{if(o.abort(),this.destroyed||!a){i();return}k(this,$s,n),k(this,Ma,t),k(this,Xc,t),ee(this,ei,jw).call(this)}),n.on("ready",a=>{if(o.abort(),this.destroyed){i();return}try{s()}catch{ee(this,ei,Yg).call(this)}});let s=()=>{let a=new Uint8Array;n.send("test",a,[a.buffer])};s();return}catch{c_("The worker has been disabled.")}ee(this,ei,Yg).call(this)},Yg=function(){l(_r,Kc)||(_t("Setting up fake worker."),k(_r,Kc,!0)),_r._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,Jl).reject(new Error("Worker was destroyed"));return}let t=new xx;k(this,Ma,t);let n=`fake${tn(_r,t_)._++}`,i=new fc(n+"_worker",n,t);e.setup(i,t),k(this,$s,new fc(n,n+"_worker",t)),ee(this,ei,jw).call(this)}).catch(e=>{l(this,Jl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Bd=new WeakSet,$w=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},q(_r,Bd),q(_r,t_,0),q(_r,Kc,!1),q(_r,Zc,new WeakMap),Qn&&(k(_r,Kc,!0),Es.workerSrc||(Es.workerSrc="./pdf.worker.mjs")),_r._isSameOrigin=(e,t)=>{let n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;let i=new URL(t,n);return n.origin===i.origin},_r._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},_r.fromPort=e=>{if(iV("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _r.create(e)};_p=_r,mS=class{constructor(e,t,n,i,o,s){q(this,Jc);q(this,Ba,new Map);q(this,Ro,new Map);q(this,Fd,new Map);q(this,Ud,new Map);q(this,Fa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Cv,this.fontLoader=new bx({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return wt(this,"annotationStorage",new cm)}getRenderingIntent(e,t=Za.ENABLE,n=null,i=!1,o=!1){let s=Gi.DISPLAY,a=yx;switch(e){case"any":s=Gi.ANY;break;case"display":break;case"print":s=Gi.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${e}`)}let u=s&Gi.PRINT&&n instanceof pv?n:this.annotationStorage;switch(t){case Za.DISABLE:s+=Gi.ANNOTATIONS_DISABLE;break;case Za.ENABLE:break;case Za.ENABLE_FORMS:s+=Gi.ANNOTATIONS_FORMS;break;case Za.ENABLE_STORAGE:s+=Gi.ANNOTATIONS_STORAGE,a=u.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Gi.IS_EDITING),o&&(s+=Gi.OPLIST);let{ids:c,hash:f}=u.modifiedIds,h=[s,a.hash,f];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),l(this,Fa)?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of l(this,Ro).values())e.push(n._destroy());l(this,Ro).clear(),l(this,Fd).clear(),l(this,Ud).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ba).clear(),this.filterFactory.destroy(),vp.cleanup(),this._networkStream?.cancelAllRequests(new Xs("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:s}){if(s){i.close();return}Bt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:o,contentLength:s}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:s,done:a}){if(a){i.close();return}Bt(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{o.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new pS(n,this))}),e.on("DocException",n=>{t._capability.reject(hi(n))}),e.on("PasswordRequest",n=>{k(this,Fa,Promise.withResolvers());try{if(!t.onPassword)throw hi(n);let i=o=>{o instanceof Error?l(this,Fa).reject(o):l(this,Fa).resolve({password:o})};t.onPassword(i,n.code)}catch(i){l(this,Fa).reject(i)}return l(this,Fa).promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Ro).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){let h=o.error;_t(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}let s=new vx(o),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,u=new wx(s,a,o.extra,o.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":let{imageRef:c}=o;Bt(c,"The imageRef must be defined.");for(let h of l(this,Ro).values())for(let[,d]of h.objs)if(d?.ref===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new Ex(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":let f=new _x(o);this.commonObjs.resolve(n,f.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,o,s])=>{if(this.destroyed)return;let a=l(this,Ro).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){s?.bitmap?.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=l(this,Fd).get(t);if(n)return n;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ud).set(o.refStr,e);let s=new gS(t,o,this,this._params.pdfBug);return l(this,Ro).set(t,s),s});return l(this,Fd).set(t,i),i}getPageIndex(e){return Ax(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return ee(this,Jc,Xg).call(this,"GetFieldObjects")}hasJSActions(){return ee(this,Jc,Xg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return ee(this,Jc,Xg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return ee(this,Jc,Xg).call(this,"GetOptionalContentConfig").then(t=>new Xx(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=l(this,Ba).get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new Vx(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return l(this,Ba).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(let t of l(this,Ro).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ba).clear(),this.filterFactory.destroy(!0),vp.cleanup()}}cachedPageNumber(e){if(!Ax(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Ud).get(t)??null}};Ba=new WeakMap,Ro=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,Fa=new WeakMap,Jc=new WeakSet,Xg=function(e,t=null){let n=l(this,Ba).get(e);if(n)return n;let i=this.messageHandler.sendWithPromise(e,t);return l(this,Ba).set(e,i),i};yS=class{constructor(e){q(this,Ql,null);Ke(this,"onContinue",null);Ke(this,"onError",null);k(this,Ql,e)}get promise(){return l(this,Ql).capability.promise}cancel(e=0){l(this,Ql).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=l(this,Ql).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=l(this,Ql);return e.form||e.canvas&&t?.size>0}};Ql=new WeakMap;uc=class uc{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:s,pageIndex:a,canvasFactory:u,filterFactory:c,useRequestAnimationFrame:f=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:m=!1,operationsFilter:b=null}){q(this,eu,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=a,this.canvasFactory=u,this.filterFactory=c,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yS(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(l(uc,Qc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(uc,Qc).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:n,transform:i,background:o,dependencyTracker:s}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new qh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),l(this,eu)&&(window.cancelAnimationFrame(l(this,eu)),k(this,eu,null)),l(uc,Qc).delete(this._canvas),e||(e=new wp(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,eu,window.requestAnimationFrame(()=>{k(this,eu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(uc,Qc).delete(this._canvas),this.callback())))}};eu=new WeakMap,Qc=new WeakMap,q(uc,Qc,new WeakSet);bS=uc,RF="5.4.530",DF="50cc4adac",di=class di{constructor({editor:e=null,uiManager:t=null}){q(this,or);q(this,ki,null);q(this,ef,null);q(this,jd);q(this,un,null);q(this,Ry,!1);q(this,$d,!1);q(this,Ua,null);q(this,Dy);q(this,tu,null);q(this,zs,null);e?(k(this,$d,!1),k(this,Ua,e)):k(this,$d,!0),k(this,zs,e?._uiManager||t),k(this,Dy,l(this,zs)._eventBus),k(this,jd,e?.color?.toUpperCase()||l(this,zs)?.highlightColors.values().next().value||"#FFFF98"),l(di,Iy)||k(di,Iy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return wt(this,"_keyboardManager",new If([[["Escape","mac+Escape"],di.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],di.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],di.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],di.prototype._moveToPrevious],[["Home","mac+Home"],di.prototype._moveToBeginning],[["End","mac+End"],di.prototype._moveToEnd]]))}renderButton(){let e=k(this,ki,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Ua)&&(e.ariaControls=`${l(this,Ua).id}_colorpicker_dropdown`);let t=l(this,zs)._signal;e.addEventListener("click",ee(this,or,sc).bind(this),{signal:t}),e.addEventListener("keydown",ee(this,or,_S).bind(this),{signal:t});let n=k(this,ef,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,jd),e.append(n),e}renderMainDropdown(){let e=k(this,un,ee(this,or,wS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,ki)){ee(this,or,sc).call(this,e);return}let t=e.target.getAttribute("data-color");t&&ee(this,or,vS).call(this,t,e)}_moveToNext(e){if(!l(this,or,Rl)){ee(this,or,sc).call(this,e);return}if(e.target===l(this,ki)){l(this,un).firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===l(this,un)?.firstElementChild||e.target===l(this,ki)){l(this,or,Rl)&&this._hideDropdownFromKeyboard();return}l(this,or,Rl)||ee(this,or,sc).call(this,e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!l(this,or,Rl)){ee(this,or,sc).call(this,e);return}l(this,un).firstElementChild?.focus()}_moveToEnd(e){if(!l(this,or,Rl)){ee(this,or,sc).call(this,e);return}l(this,un).lastElementChild?.focus()}hideDropdown(){l(this,un)?.classList.add("hidden"),l(this,ki).ariaExpanded="false",l(this,tu)?.abort(),k(this,tu,null)}_hideDropdownFromKeyboard(){if(!l(this,$d)){if(!l(this,or,Rl)){l(this,Ua)?.unselect();return}this.hideDropdown(),l(this,ki).focus({preventScroll:!0,focusVisible:l(this,Ry)})}}updateColor(e){if(l(this,ef)&&(l(this,ef).style.backgroundColor=e),!l(this,un))return;let t=l(this,zs).highlightColors.values();for(let n of l(this,un).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){l(this,ki)?.remove(),k(this,ki,null),k(this,ef,null),l(this,un)?.remove(),k(this,un,null)}};ki=new WeakMap,ef=new WeakMap,jd=new WeakMap,un=new WeakMap,Ry=new WeakMap,$d=new WeakMap,Ua=new WeakMap,Dy=new WeakMap,tu=new WeakMap,zs=new WeakMap,Iy=new WeakMap,or=new WeakSet,wS=function(){let e=document.createElement("div"),t=l(this,zs)._signal;e.addEventListener("contextmenu",Ki,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Ua)&&(e.id=`${l(this,Ua).id}_colorpicker_dropdown`);for(let[n,i]of l(this,zs).highlightColors){let o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",l(di,Iy)[n]);let s=document.createElement("span");o.append(s),s.className="swatch",s.style.backgroundColor=i,o.ariaSelected=i===l(this,jd),o.addEventListener("click",ee(this,or,vS).bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",ee(this,or,_S).bind(this),{signal:t}),e},vS=function(e,t){t.stopPropagation(),l(this,Dy).dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},_S=function(e){di._keyboardManager.exec(this,e)},sc=function(e){if(l(this,or,Rl)){this.hideDropdown();return}if(k(this,Ry,e.detail===0),l(this,tu)||(k(this,tu,new AbortController),window.addEventListener("pointerdown",ee(this,or,IF).bind(this),{signal:l(this,zs).combinedSignal(l(this,tu))})),l(this,ki).ariaExpanded="true",l(this,un)){l(this,un).classList.remove("hidden");return}let t=k(this,un,ee(this,or,wS).call(this));l(this,ki).append(t)},IF=function(e){l(this,un)?.contains(e.target)||this.hideDropdown()},Rl=function(){return l(this,un)&&!l(this,un).classList.contains("hidden")},q(di,Iy,null);dm=di,cc=class cc{constructor(e){q(this,Do,null);q(this,Oy,null);q(this,zd,null);k(this,Oy,e),k(this,zd,e._uiManager),l(cc,Ny)||k(cc,Ny,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Do))return l(this,Do);let{editorType:e,colorType:t,color:n}=l(this,Oy),i=k(this,Do,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(cc,Ny)[e]),i.addEventListener("input",()=>{l(this,zd).updateParams(t,i.value)},{signal:l(this,zd)._signal}),i}update(e){l(this,Do)&&(l(this,Do).value=e)}destroy(){l(this,Do)?.remove(),k(this,Do,null)}hideDropdown(){}};Do=new WeakMap,Oy=new WeakMap,zd=new WeakMap,Ny=new WeakMap,q(cc,Ny,null);Rv=cc;Dv=class{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=kg(e),[e,e,e]}static G_HTML([e]){let t=vB(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(kg)}static RGB_HTML(e){return`#${e.map(vB).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[kg(1-Math.min(1,e+i)),kg(1-Math.min(1,n+i)),kg(1-Math.min(1,t+i))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let i=1-e,o=1-t,s=1-n,a=Math.min(i,o,s);return["CMYK",i,o,s,a]}},ES=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){dr("Abstract method `_createSVG` called.")}},Of=class extends ES{_createSVG(e){return document.createElementNS(ha,e)}},AV=9,Nf=new WeakSet,xV=new Date().getTimezoneOffset()*60*1e3,im=class{static create(e){switch(e.data.annotationType){case qr.LINK:return new pm(e);case qr.TEXT:return new SS(e);case qr.WIDGET:switch(e.data.fieldType){case"Tx":return new TS(e);case"Btn":return e.data.radioButton?new Iv(e):e.data.checkBox?new RS(e):new DS(e);case"Ch":return new IS(e);case"Sig":return new CS(e)}return new rl(e);case qr.POPUP:return new gm(e);case qr.FREETEXT:return new Ov(e);case qr.LINE:return new FS(e);case qr.SQUARE:return new US(e);case qr.CIRCLE:return new jS(e);case qr.POLYLINE:return new Nv(e);case qr.CARET:return new zS(e);case qr.INK:return new mm(e);case qr.POLYGON:return new $S(e);case qr.HIGHLIGHT:return new kv(e);case qr.UNDERLINE:return new qS(e);case qr.SQUIGGLY:return new HS(e);case qr.STRIKEOUT:return new GS(e);case qr.STAMP:return new Lv(e);case qr.FILEATTACHMENT:return new VS(e);default:return new Rr(e)}}},IT=class IT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){q(this,ky);q(this,tf,null);q(this,Wd,!1);q(this,ws,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return IT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;let{quadPoints:t,inkLists:n,rect:i}=this.data,o=-1/0,s=-1/0;if(t?.length>=8){for(let a=0;a<t.length;a+=8)t[a+1]>s?(s=t[a+1],o=t[a+2]):t[a+1]===s&&(o=Math.max(o,t[a+2]));return[o,s]}if(n?.length>=1){for(let a of n)for(let u=0,c=a.length;u<c;u+=2)a[u+1]>s?(s=a[u+1],o=a[u]):a[u+1]===s&&(o=Math.max(o,a[u]));if(o!==1/0)return[o,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){let{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/n,e[1]=100*(e[1]-s)/i,e}get commentText(){let{data:e}=this;return this.annotationStorage.getRawValue(`${sm}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){let{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${sm}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(l(this,ws)?.popup||this.popup)?.remove(),k(this,ws,this.popup=null)}updateEdited(e){if(!this.container)return;e.rect&&(l(this,tf)||k(this,tf,{rect:this.data.rect.slice(0)}));let{rect:t,popup:n}=e;t&&ee(this,ky,AS).call(this,t);let i=l(this,ws)?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=l(this,ws).popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),k(this,ws,null),this.popup=null))}resetEdited(){l(this,tf)&&(ee(this,ky,AS).call(this,l(this,tf).rect),l(this,ws)?.popup.resetEdited(),k(this,tf,null))}_createContainer(e){let{data:t,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof rl)&&!(this instanceof pm)&&(o.tabIndex=0);let{style:s}=o;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof gm){let{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,o),o}let{width:a,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;let v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){let _=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof Iv){let _=`calc(${a}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case Dh.SOLID:s.borderStyle="solid";break;case Dh.DASHED:s.borderStyle="dashed";break;case Dh.BEVELED:_t("Unimplemented border style: beveled");break;case Dh.INSET:_t("Unimplemented border style: inset");break;case Dh.UNDERLINE:s.borderBottomStyle="solid";break;default:break}let y=t.borderColor||null;y?(k(this,Wd,!0),s.borderColor=it.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):s.borderWidth=0}let c=it.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:h,pageX:d,pageY:m}=i.rawDims;s.left=`${100*(c[0]-d)/f}%`,s.top=`${100*(c[1]-m)/h}%`;let{rotation:b}=t;return t.hasOwnCanvas||b===0?(s.width=`${100*a/f}%`,s.height=`${100*u/h}%`):this.setRotation(b,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:o,height:s}=this;e%180!==0&&([o,s]=[s,o]),t.style.width=`${100*o/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,i)=>{let o=i.detail[t],s=o[0],a=o.slice(1);i.target.style[n]=Dv[`${s}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:Dv[`${s}_rgb`](a)})};return wt(this,"_commonActions",{display:t=>{let{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[i,o]of Object.entries(t)){let s=n[i];if(s){let a={detail:{[i]:o},target:e};s(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,i,o]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){let[v,w,y,_]=e.subarray(2,6);if(i===v&&o===w&&t===y&&n===_)return}let{style:s}=this.container,a;if(l(this,Wd)){let{borderColor:v,borderWidth:w}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}let u=i-t,c=o-n,{svgFactory:f}=this,h=f.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";let d=f.createElement("defs");h.append(d);let m=f.createElement("clipPath"),b=`clippath_${this.data.id}`;m.setAttribute("id",b),m.setAttribute("clipPathUnits","objectBoundingBox"),d.append(m);for(let v=2,w=e.length;v<w;v+=8){let y=e[v],_=e[v+1],E=e[v+2],S=e[v+3],A=f.createElement("rect"),F=(E-t)/u,I=(o-_)/c,X=(y-E)/u,Z=(_-S)/c;A.setAttribute("x",F),A.setAttribute("y",I),A.setAttribute("width",X),A.setAttribute("height",Z),m.append(A),a?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${I}" width="${X}" height="${Z}"/>`)}l(this,Wd)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){let{data:t}=this,n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),k(this,ws,new gm({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,ws)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,ws)}render(){dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let i=this._fieldObjects[e];if(i)for(let{page:o,id:s,exportValues:a}of i){if(o===-1||s===t)continue;let u=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${s}"]`);if(c&&!Nf.has(c)){_t(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:u,domElement:c})}return n}for(let i of document.getElementsByName(e)){let{exportValue:o}=i,s=i.getAttribute("data-element-id");s!==t&&Nf.has(i)&&n.push({id:s,exportValue:o,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};tf=new WeakMap,Wd=new WeakMap,ws=new WeakMap,ky=new WeakSet,AS=function(e){let{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-a)/o}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};Rr=IT,xS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},pm=class extends Rr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0});q(this,Yi);this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),o=!0):t.attachment?(ee(this,Yi,OF).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),o=!0):t.setOCGState?(ee(this,Yi,NF).call(this,i,t.setOCGState,t.overlaidText),o=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),o=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&ee(this,Yi,oc).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),ee(this,Yi,oc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let o of Object.keys(n.actions)){let s=i.get(o);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1))}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),ee(this,Yi,oc).call(this)}_bindResetFormAction(t,n){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),ee(this,Yi,oc).call(this),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:o,refs:s,include:a}=n,u=[];if(o.length!==0||s.length!==0){let h=new Set(s);for(let d of o){let m=this._fieldObjects[d]||[];for(let{id:b}of m)h.add(b)}for(let d of Object.values(this._fieldObjects))for(let m of d)h.has(m.id)===a&&u.push(m)}else for(let h of Object.values(this._fieldObjects))u.push(...h);let c=this.annotationStorage,f=[];for(let h of u){let{id:d}=h;switch(f.push(d),h.type){case"text":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}case"checkbox":case"radiobutton":{let b=h.defaultValue===h.exportValues;c.setValue(d,{value:b});break}case"combobox":case"listbox":{let b=h.defaultValue||"";c.setValue(d,{value:b});break}default:continue}let m=document.querySelector(`[data-element-id="${d}"]`);if(m){if(!Nf.has(m)){_t(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}};Yi=new WeakSet,oc=function(){this.container.setAttribute("data-internal-link","")},OF=function(t,n,i="",o=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,o),!1),ee(this,Yi,oc).call(this)},NF=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),ee(this,Yi,oc).call(this)};SS=class extends Rr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}},rl=class extends Rr{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ur.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,o){n.includes("mouse")?e.addEventListener(n,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(s)}})})}_setEventListeners(e,t,n,i){for(let[o,s]of n)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,o,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":it.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||AV,o=e.style,s,a=2,u=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),f=Math.round(c/(Rw*i))||1,h=c/f;s=Math.min(i,u(h/Rw))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);s=Math.min(i,u(c/Rw))}o.fontSize=`calc(${s}px * var(--total-scale-factor))`,o.color=it.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},TS=class extends rl{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){let o=this.annotationStorage;for(let s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),o.setValue(s.id,{[i]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let i=e.getValue(t,{value:this.data.fieldValue}),o=i.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let u={userValue:o,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nf.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;let{datetimeFormat:c,datetimeType:f,timeStep:h}=this.data,d=!!f&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",b=>{let v=this.data.defaultFieldValue??"";n.value=u.userValue=v,u.formattedValue=null});let m=b=>{let{formattedValue:v}=u;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{if(u.focused)return;let{target:w}=v;if(d&&(w.type=f,h&&(w.step=h)),u.userValue){let y=u.userValue;if(d)if(f==="time"){let _=new Date(y),E=[_.getHours(),_.getMinutes(),_.getSeconds()];w.value=E.map(S=>S.toString().padStart(2,"0")).join(":")}else w.value=new Date(y-xV).toISOString().split(f==="date"?"T":".",1)[0];else w.value=y}u.lastCommittedValue=w.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);let w={value(y){u.userValue=y.detail.value??"",d||e.setValue(t,{value:u.userValue.toString()}),y.target.value=u.userValue},formattedValue(y){let{formattedValue:_}=y.detail;u.formattedValue=_,_!=null&&y.target!==document.activeElement&&(y.target.value=_);let E={formattedValue:_};d&&(E.value=_),e.setValue(t,E)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{let{charLimit:_}=y.detail,{target:E}=y;if(_===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",_);let S=u.userValue;!S||S.length<=_||(S=S.slice(0,_),E.value=u.userValue=S,e.setValue(t,{value:S}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),n.addEventListener("keydown",v=>{u.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(u.commitKey=3),w===-1)return;let{value:y}=v.target;u.lastCommittedValue!==y&&(u.lastCommittedValue=y,u.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});let b=m;m=null,n.addEventListener("blur",v=>{if(!u.focused||!v.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);let{target:w}=v,{value:y}=w;if(d){if(y&&f==="time"){let _=y.split(":").map(E=>parseInt(E,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();w.type="text"}u.userValue=y,u.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:u.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),b(v)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",v=>{u.lastCommittedValue=null;let{data:w,target:y}=v,{value:_,selectionStart:E,selectionEnd:S}=y,A=E,F=S;switch(v.inputType){case"deleteWordBackward":{let I=_.substring(0,E).match(/\w*[^\w]*$/);I&&(A-=I[0].length);break}case"deleteWordForward":{let I=_.substring(E).match(/^[^\w]*\w*/);I&&(F+=I[0].length);break}case"deleteContentBackward":E===S&&(A-=1);break;case"deleteContentForward":E===S&&(F+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:w||"",willCommit:!1,selStart:A,selEnd:F}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){let v=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},CS=class extends rl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},RS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let o=document.createElement("input");return Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n)){let f=u&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=f),e.setValue(c.id,{value:f})}e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue||"Off";s.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",s=>{let a={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(a,s)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},Iv=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(let s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});let o=document.createElement("input");if(Nf.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",s=>{let{name:a,checked:u}=s.target;for(let c of this._getElementsByName(a,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:u})}),o.addEventListener("resetform",s=>{let a=t.defaultFieldValue;s.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;o.addEventListener("updatefromsandbox",a=>{let u={value:c=>{let f=s===c.detail.value;for(let h of this._getElementsByName(c.target.name)){let d=f&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(u,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}},DS=class extends pm{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},IS=class extends rl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Nf.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{let h=this.data.defaultFieldValue;for(let d of i.options)d.selected=d.value===h});for(let f of this.data.options){let h=document.createElement("option");h.textContent=f.displayValue,h.value=f.exportValue,n.value.includes(f.exportValue)&&(h.setAttribute("selected",!0),o=!1),i.append(h)}let s=null;if(o){let f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),s=()=>{f.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}let a=f=>{let h=f?"value":"textContent",{options:d,multiple:m}=i;return m?Array.prototype.filter.call(d,b=>b.selected).map(b=>b[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]},u=a(!1),c=f=>{let h=f.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{let h={value(d){s?.();let m=d.detail.value,b=new Set(Array.isArray(m)?m:[m]);for(let v of i.options)v.selected=b.has(v.value);e.setValue(t,{value:a(!0)}),u=a(!1)},multipleSelection(d){i.multiple=!0},remove(d){let m=i.options,b=d.detail.remove;m[b].selected=!1,i.remove(b),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=a(!1)},insert(d){let{index:m,displayValue:b,exportValue:v}=d.detail.insert,w=i.children[m],y=document.createElement("option");y.textContent=b,y.value=v,w?w.before(y):i.append(y),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},items(d){let{items:m}=d.detail;for(;i.length!==0;)i.remove(0);for(let b of m){let{displayValue:v,exportValue:w}=b,y=document.createElement("option");y.textContent=v,y.value=w,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(d)}),u=a(!1)},indices(d){let m=new Set(d.detail.indices);for(let b of d.target.options)b.selected=m.has(b.index);e.setValue(t,{value:a(!0)}),u=a(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,f)}),i.addEventListener("input",f=>{let h=a(!0),d=a(!1);e.setValue(t,{value:h}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},gm=class extends Rr{constructor(t){let{data:n,elements:i,parent:o}=t,s=!!o._commentManager;super(t,{isRenderable:!s&&Rr._hasPopupData(n)});q(this,Ly);if(this.elements=i,s&&Rr._hasPopupData(n)){let a=this.popup=ee(this,Ly,OS).call(this);for(let u of i)u.popup=a}else this.popup=null}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let n=this.popup=ee(this,Ly,OS).call(this),i=[];for(let o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${Bh}${o}`).join(",")),this.container}};Ly=new WeakSet,OS=function(){return new NS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};NS=class{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:u,rect:c,parentRect:f,open:h,commentManager:d=null}){q(this,Ct);q(this,Li,null);q(this,ru,ee(this,Ct,PF).bind(this));q(this,r_,ee(this,Ct,BS).bind(this));q(this,n_,ee(this,Ct,Hw).bind(this));q(this,qd,ee(this,Ct,qw).bind(this));q(this,Hd,null);q(this,Mr,null);q(this,Io,null);q(this,nu,null);q(this,rf,null);q(this,Gd,null);q(this,Vd,null);q(this,Oo,!1);q(this,Pi,null);q(this,ja,null);q(this,$a,null);q(this,Br,null);q(this,za,null);q(this,iu,null);q(this,Py,null);q(this,Wa,null);q(this,Yd,null);q(this,nf,null);q(this,su,!1);q(this,mn,null);q(this,ou,null);k(this,Mr,e),k(this,Yd,i),k(this,Io,s),k(this,Wa,a),k(this,Gd,u),k(this,Hd,t),k(this,Py,c),k(this,Vd,f),k(this,rf,n),k(this,Li,d),k(this,mn,n[0]),k(this,nu,Rf.toDateObject(o)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),d||(ee(this,Ct,zw).call(this),l(this,Mr).hidden=!0,h&&ee(this,Ct,qw).call(this))}renderCommentButton(){if(l(this,Br)){l(this,Br).parentNode||l(this,mn).container.after(l(this,Br));return}if(l(this,za)||ee(this,Ct,kS).call(this),!l(this,za))return;let{signal:e}=k(this,ja,new AbortController),t=l(this,mn).hasOwnCommentButton,n=()=>{l(this,Li).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{l(this,Li).toggleCommentPopup(this,!1,!0,!t)},o=()=>{l(this,Li).toggleCommentPopup(this,!1,!1)};if(t){k(this,Br,l(this,mn).container);for(let s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),s.classList.add("popupTriggerArea")}else{let s=k(this,Br,document.createElement("button"));s.className="annotationCommentButton";let a=l(this,mn).container;s.style.zIndex=a.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),ee(this,Ct,PS).call(this),ee(this,Ct,LS).call(this),s.addEventListener("keydown",l(this,ru),{signal:e}),s.addEventListener("click",n,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",o,{signal:e}),a.after(s)}}get commentButtonColor(){let{color:e,opacity:t}=l(this,mn).commentData;return e?l(this,Gd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{l(this,Br)?.focus()},0)}getData(){let{richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}=l(this,mn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return l(this,Br)}get comment(){return l(this,ou)||k(this,ou,l(this,mn).commentText),l(this,ou)}set comment(e){e!==this.comment&&(l(this,mn).commentText=k(this,ou,e))}focus(){l(this,mn).container?.focus()}get parentBoundingClientRect(){return l(this,mn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Br)&&(l(this,Br).classList.toggle("selected",e),l(this,Br).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Br).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,iu))return l(this,iu);let{x:e,y:t,height:n}=l(this,Br).getBoundingClientRect(),{x:i,y:o,width:s,height:a}=l(this,mn).layer.getBoundingClientRect();return[(e-i)/s,(t+n-o)/a]}set commentPopupPosition(e){k(this,iu,e)}hasDefaultPopupPosition(){return l(this,iu)===null}get commentButtonPosition(){return l(this,za)}get commentButtonWidth(){return l(this,Br).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){let[t,n]=l(this,iu)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:o,y:s,width:a,height:u}=i;l(this,Li).showDialog(null,this,o+t*a,s+n*u,{...e,parentDimensions:i})}render(){if(l(this,Pi))return;let e=k(this,Pi,document.createElement("div"));if(e.className="popup",l(this,Hd)){let n=e.style.outlineColor=it.makeHexColor(...l(this,Hd));e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}let t=document.createElement("span");if(t.className="header",l(this,Yd)?.str){let n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=l(this,Yd)}if(e.append(t),l(this,nu)){let n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,nu).valueOf()})),n.dateTime=l(this,nu).toISOString(),t.append(n)}xT({html:l(this,Ct,Ww)||l(this,Io).str,dir:l(this,Io)?.dir,className:"popupContent"},e),l(this,Mr).append(e)}updateEdited({rect:e,popup:t,deleted:n}){if(l(this,Li)){n?(this.remove(),k(this,ou,null)):t&&(t.deleted?this.remove():(ee(this,Ct,PS).call(this),k(this,ou,t.text))),e&&(k(this,za,null),ee(this,Ct,kS).call(this),ee(this,Ct,LS).call(this));return}if(n||t?.deleted){this.remove();return}ee(this,Ct,zw).call(this),l(this,nf)||k(this,nf,{contentsObj:l(this,Io),richText:l(this,Wa)}),e&&k(this,$a,null),t&&t.text&&(k(this,Wa,ee(this,Ct,LF).call(this,t.text)),k(this,nu,Rf.toDateObject(t.date)),k(this,Io,null)),l(this,Pi)?.remove(),k(this,Pi,null)}resetEdited(){l(this,nf)&&({contentsObj:tn(this,Io)._,richText:tn(this,Wa)._}=l(this,nf),k(this,nf,null),l(this,Pi)?.remove(),k(this,Pi,null),k(this,$a,null))}remove(){if(l(this,ja)?.abort(),k(this,ja,null),l(this,Pi)?.remove(),k(this,Pi,null),k(this,su,!1),k(this,Oo,!1),l(this,Br)?.remove(),k(this,Br,null),this.trigger)for(let e of this.trigger)e.classList.remove("popupTriggerArea")}forceHide(){k(this,su,this.isVisible),l(this,su)&&(l(this,Mr).hidden=!0)}maybeShow(){l(this,Li)||(ee(this,Ct,zw).call(this),l(this,su)&&(l(this,Pi)||ee(this,Ct,Hw).call(this),k(this,su,!1),l(this,Mr).hidden=!1))}get isVisible(){return l(this,Li)?!1:l(this,Mr).hidden===!1}};Li=new WeakMap,ru=new WeakMap,r_=new WeakMap,n_=new WeakMap,qd=new WeakMap,Hd=new WeakMap,Mr=new WeakMap,Io=new WeakMap,nu=new WeakMap,rf=new WeakMap,Gd=new WeakMap,Vd=new WeakMap,Oo=new WeakMap,Pi=new WeakMap,ja=new WeakMap,$a=new WeakMap,Br=new WeakMap,za=new WeakMap,iu=new WeakMap,Py=new WeakMap,Wa=new WeakMap,Yd=new WeakMap,nf=new WeakMap,su=new WeakMap,mn=new WeakMap,ou=new WeakMap,Ct=new WeakSet,zw=function(){if(l(this,ja))return;k(this,ja,new AbortController);let{signal:e}=l(this,ja);for(let t of this.trigger)t.addEventListener("click",l(this,qd),{signal:e}),t.addEventListener("pointerenter",l(this,n_),{signal:e}),t.addEventListener("pointerleave",l(this,r_),{signal:e}),t.classList.add("popupTriggerArea");for(let t of l(this,rf))t.container?.addEventListener("keydown",l(this,ru),{signal:e})},kS=function(){let e=l(this,rf).find(t=>t.hasCommentButton);e&&k(this,za,e._normalizePoint(e.commentButtonPosition))},LS=function(){if(l(this,mn).extraPopupElement&&!l(this,mn).editor)return;l(this,Br)||this.renderCommentButton();let[e,t]=l(this,za),{style:n}=l(this,Br);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},PS=function(){l(this,mn).extraPopupElement||(l(this,Br)||this.renderCommentButton(),l(this,Br).style.backgroundColor=this.commentButtonColor||"")},Ww=function(){let e=l(this,Wa),t=l(this,Io);return e?.str&&(!t?.str||t.str===e.str)&&l(this,Wa).html||null},MS=function(){return l(this,Ct,Ww)?.attributes?.style?.fontSize||0},kF=function(){return l(this,Ct,Ww)?.attributes?.style?.color||null},LF=function(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:l(this,Ct,kF),fontSize:l(this,Ct,MS)?`calc(${l(this,Ct,MS)}px * var(--total-scale-factor))`:""}};for(let o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return n},PF=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Oo))&&ee(this,Ct,qw).call(this)},MF=function(){if(l(this,$a)!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=l(this,Gd),s=!!l(this,Vd),a=s?l(this,Vd):l(this,Py);for(let b of l(this,rf))if(!a||it.intersect(b.data.rect,a)!==null){a=b.data.rect,s=!0;break}let u=it.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),f=s?a[2]-a[0]+5:0,h=u[0]+f,d=u[1];k(this,$a,[100*(h-i)/t,100*(d-o)/n]);let{style:m}=l(this,Mr);m.left=`${l(this,$a)[0]}%`,m.top=`${l(this,$a)[1]}%`},qw=function(){if(l(this,Li)){l(this,Li).toggleCommentPopup(this,!1);return}k(this,Oo,!l(this,Oo)),l(this,Oo)?(ee(this,Ct,Hw).call(this),l(this,Mr).addEventListener("click",l(this,qd)),l(this,Mr).addEventListener("keydown",l(this,ru))):(ee(this,Ct,BS).call(this),l(this,Mr).removeEventListener("click",l(this,qd)),l(this,Mr).removeEventListener("keydown",l(this,ru)))},Hw=function(){l(this,Pi)||this.render(),this.isVisible?l(this,Oo)&&l(this,Mr).classList.add("focused"):(ee(this,Ct,MF).call(this),l(this,Mr).hidden=!1,l(this,Mr).style.zIndex=parseInt(l(this,Mr).style.zIndex)+1e3)},BS=function(){l(this,Mr).classList.remove("focused"),!(l(this,Oo)||!this.isVisible)&&(l(this,Mr).hidden=!0,l(this,Mr).style.zIndex=parseInt(l(this,Mr).style.zIndex)-1e3)};Ov=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=vt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},FS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});q(this,My,null)}render(){this.container.classList.add("lineAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=k(this,My,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),o.append(s),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,My)}addHighlightArea(){this.container.classList.add("highlightArea")}};My=new WeakMap;US=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});q(this,By,null)}render(){this.container.classList.add("squareAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=k(this,By,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,By)}addHighlightArea(){this.container.classList.add("highlightArea")}};By=new WeakMap;jS=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});q(this,Fy,null)}render(){this.container.classList.add("circleAnnotation");let{data:t,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,a=k(this,Fy,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Fy)}addHighlightArea(){this.container.classList.add("highlightArea")}};Fy=new WeakMap;Nv=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});q(this,Uy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:n,borderStyle:i,popupRef:o},width:s,height:a}=this;if(!n)return this.container;let u=this.svgFactory.create(s,a,!0),c=[];for(let h=0,d=n.length;h<d;h+=2){let m=n[h]-t[0],b=t[3]-n[h+1];c.push(`${m},${b}`)}c=c.join(" ");let f=k(this,Uy,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",c),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Uy)}addHighlightArea(){this.container.classList.add("highlightArea")}};Uy=new WeakMap;$S=class extends Nv{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},zS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},mm=class extends Rr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});q(this,$y);q(this,jy,null);q(this,sf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?vt.HIGHLIGHT:vt.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:n,inkLists:i,borderStyle:o,popupRef:s}}=this,{transform:a,width:u,height:c}=ee(this,$y,WS).call(this,n,t),f=this.svgFactory.create(u,c,!0),h=k(this,jy,this.svgFactory.createElement("svg:g"));f.append(h),h.setAttribute("stroke-width",o.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let d=0,m=i.length;d<m;d++){let b=this.svgFactory.createElement(this.svgElementName);l(this,sf).push(b),b.setAttribute("points",i[d].join(",")),h.append(b)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:n,points:i,rect:o}=t,s=l(this,jy);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,u=l(this,sf).length;a<u;a++)l(this,sf)[a].setAttribute("points",i[a].join(","));if(o){let{transform:a,width:u,height:c}=ee(this,$y,WS).call(this,this.data.rotation,o);s.parentElement.setAttribute("viewBox",`0 0 ${u} ${c}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,sf)}addHighlightArea(){this.container.classList.add("highlightArea")}};jy=new WeakMap,sf=new WeakMap,$y=new WeakSet,WS=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};kv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=vt.HIGHLIGHT}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){let n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},qS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},HS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){let n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},GS=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){let n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}},Lv=class extends Rr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=vt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},VS=class extends Rr{constructor(t){super(t,{isRenderable:!0});q(this,Wy);q(this,zy,null);let{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:n}=this,i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",ee(this,Wy,YS).bind(this)),k(this,zy,i);let{isMac:o}=Ur.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(o?s.metaKey:s.ctrlKey)&&ee(this,Wy,YS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return l(this,zy)}addHighlightArea(){this.container.classList.add("highlightArea")}};zy=new WeakMap,Wy=new WeakSet,YS=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)};OT=class OT{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:s,structTreeLayer:a,commentManager:u,linkService:c,annotationStorage:f}){q(this,Qa);q(this,of,null);q(this,af,null);q(this,Xd,null);q(this,au,new Map);q(this,qy,null);q(this,lf,null);q(this,Mi,[]);q(this,Hy,!1);this.div=e,k(this,of,t),k(this,af,n),k(this,qy,a||null),k(this,lf,c||null),k(this,Xd,f||new cm),this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return l(this,au).size>0}async render(e){let{annotations:t}=e,n=this.div;wu(n,this.viewport);let i=new Map,o=[],s={data:null,layer:n,linkService:l(this,lf),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Of,annotationStorage:l(this,Xd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let a of t){if(a.noHTML)continue;let u=a.annotationType===qr.POPUP;if(u){let h=i.get(a.id);if(!h)continue;if(!this._commentManager){o.push(a);continue}s.elements=h}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;s.data=a;let c=im.create(s);if(!c.isRenderable)continue;if(!u&&(l(this,Mi).push(c),a.popupRef)){let h=i.get(a.popupRef);h?h.push(c):i.set(a.popupRef,[c])}let f=c.render();a.hidden&&(f.style.visibility="hidden"),c._isEditable&&(l(this,au).set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}await ee(this,Qa,Gw).call(this);for(let a of o){let u=s.elements=i.get(a.id);s.data=a;let c=im.create(s);if(!c.isRenderable)continue;let f=c.render();c.contentElement.id=`${Bh}${a.id}`,a.hidden&&(f.style.visibility="hidden"),u.at(-1).container.after(f)}ee(this,Qa,XS).call(this)}async addLinkAnnotations(e){let t={data:null,layer:this.div,linkService:l(this,lf),svgFactory:new Of,parent:this};for(let n of e){n.borderStyle||(n.borderStyle=OT._defaultBorderStyle),t.data=n;let i=im.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${Bh}${n.id}`,l(this,Mi).push(i))}await ee(this,Qa,Gw).call(this)}update({viewport:e}){let t=this.div;this.viewport=e,wu(t,{rotation:e.rotation}),ee(this,Qa,XS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,au).values())}getEditableAnnotation(e){return l(this,au).get(e)}addFakeAnnotation(e){let{div:t}=this,{id:n,rotation:i}=e,o=new xS({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,lf),annotationStorage:l(this,Xd)});return o.render(),o.contentElement.id=`${Bh}${n}`,o.createOrUpdatePopup(),l(this,Mi).push(o),o}removeAnnotation(e){let t=l(this,Mi).findIndex(i=>i.data.id===e);if(t<0)return;let[n]=l(this,Mi).splice(t,1);l(this,of)?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(let t of e)t.updateFakeAnnotationElement(this);ee(this,Qa,Gw).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Dh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};of=new WeakMap,af=new WeakMap,Xd=new WeakMap,au=new WeakMap,qy=new WeakMap,lf=new WeakMap,Mi=new WeakMap,Hy=new WeakMap,Qa=new WeakSet,Gw=async function(){if(l(this,Mi).length===0)return;this.div.replaceChildren();let e=[];if(!l(this,Hy)){k(this,Hy,!0);for(let{contentElement:n,data:{id:i}}of l(this,Mi)){let o=n.id=`${Bh}${i}`;e.push(l(this,qy)?.getAriaAttributes(o).then(s=>{if(s)for(let[a,u]of s)n.setAttribute(a,u)}))}}l(this,Mi).sort(({data:{rect:[n,i,o,s]}},{data:{rect:[a,u,c,f]}})=>{if(n===o&&i===s)return 1;if(a===c&&u===f)return-1;let h=s,d=i,m=(i+s)/2,b=f,v=u,w=(u+f)/2;if(m>=b&&w<=d)return-1;if(w>=h&&m<=v)return 1;let y=(n+o)/2,_=(a+c)/2;return y-_});let t=document.createDocumentFragment();for(let n of l(this,Mi))t.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&t.append(n.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),l(this,of))for(let n of l(this,Mi))l(this,of).addPointerInTextLayer(n.contentElement,!1)},XS=function(){if(!l(this,af))return;let e=this.div;for(let[t,n]of l(this,af)){let i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";let{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);let s=l(this,au).get(t);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),s._hasNoCanvas=!1):s.canvas=n)}l(this,af).clear()};Pv=OT,Sw=/\r\n?|\n/g,wr=class wr extends mr{constructor(t){super({...t,name:"freeTextEditor"});q(this,Kr);q(this,Bi,"");q(this,Gy,`${this.id}-editor`);q(this,uf,null);q(this,Fi);Ke(this,"_colorPicker",null);this.color=t.color||wr._defaultColor||mr._defaultLineColor,k(this,Fi,t.fontSize||wr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){let t=wr.prototype,n=s=>s.isEmpty(),i=vu.TRANSLATE_SMALL,o=vu.TRANSLATE_BIG;return wt(this,"_keyboardManager",new If([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){mr.initialize(t,n);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Mt.FREETEXT_SIZE:wr._defaultFontSize=n;break;case Mt.FREETEXT_COLOR:wr._defaultColor=n;break}}updateParams(t,n){switch(t){case Mt.FREETEXT_SIZE:ee(this,Kr,BF).call(this,n);break;case Mt.FREETEXT_COLOR:ee(this,Kr,FF).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,wr._defaultFontSize],[Mt.FREETEXT_COLOR,wr._defaultColor||mr._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,l(this,Fi)],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){let t=this.parentScale;return[-wr._internalPadding*t,-(wr._internalPadding+l(this,Fi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,uf,new AbortController);let t=this._uiManager.combinedSignal(l(this,uf));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Gy)),this._isDraggable=!0,l(this,uf)?.abort(),k(this,uf,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=l(this,Bi),n=k(this,Bi,ee(this,Kr,UF).call(this).trimEnd());if(t===n)return;let i=o=>{if(k(this,Bi,o),!o){this.remove();return}ee(this,Kr,Xw).call(this),this._uiManager.rebuild(this),ee(this,Kr,Vw).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),ee(this,Kr,Vw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){wr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Gy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,Fi)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[o,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[u,c]=this.getInitialTranslation();[u,c]=this.pageTranslationToScreen(u,c);let[f,h]=this.pageDimensions,[d,m]=this.pageTranslation,b,v;switch(this.rotation){case 0:b=t+(a[0]-d)/f,v=n+this.height-(a[1]-m)/h;break;case 90:b=t+(a[0]-d)/f,v=n-(a[1]-m)/h,[u,c]=[c,-u];break;case 180:b=t-this.width+(a[0]-d)/f,v=n-(a[1]-m)/h,[u,c]=[-u,-c];break;case 270:b=t+(a[0]-d-this.height*h)/f,v=n+(a[1]-m-this.width*f)/h,[u,c]=[-c,u];break}this.setAt(b*o,v*s,u,c)}else this._moveAfterPaste(t,n);ee(this,Kr,Xw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,v,w;let n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let o=ee(b=wr,el,ZS).call(b,n.getData("text")||"").replaceAll(Sw,`
`);if(!o)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:u,startOffset:c}=a,f=[],h=[];if(u.nodeType===Node.TEXT_NODE){let y=u.parentElement;if(h.push(u.nodeValue.slice(c).replaceAll(Sw,"")),y!==this.editorDiv){let _=f;for(let E of this.editorDiv.childNodes){if(E===y){_=h;continue}_.push(ee(v=wr,el,Yw).call(v,E))}}f.push(u.nodeValue.slice(0,c).replaceAll(Sw,""))}else if(u===this.editorDiv){let y=f,_=0;for(let E of this.editorDiv.childNodes)_++===c&&(y=h),y.push(ee(w=wr,el,Yw).call(w,E))}k(this,Bi,`${f.join(`
`)}${o}${h.join(`
`)}`),ee(this,Kr,Xw).call(this);let d=new Range,m=Math.sumPrecise(f.map(y=>y.length));for(let{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){let _=y.nodeValue.length;if(m<=_){d.setStart(y,m),d.setEnd(y,m);break}m-=_}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){let t=wr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var a;let o=null;if(t instanceof Ov){let{data:{defaultAppearanceData:{fontSize:u,fontColor:c},rect:f,rotation:h,id:d,popupRef:m,richText:b,contentsObj:v,creationDate:w,modificationDate:y},textContent:_,textPosition:E,parent:{page:{pageNumber:S}}}=t;if(!_||_.length===0)return null;o=t={annotationType:vt.FREETEXT,color:Array.from(c),fontSize:u,value:_.join(`
`),position:E,pageIndex:S-1,rect:f.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:m,comment:v?.str||null,richText:b,creationDate:w,modificationDate:y}}let s=await super.deserialize(t,n,i);return k(s,Fi,t.fontSize),s.color=it.makeHexColor(...t.color),k(s,Bi,ee(a=wr,el,ZS).call(a,t.value)),s._initialData=o,t.comment&&s.setCommentData(t),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:l(this,Fi),value:ee(this,Kr,jF).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!ee(this,Kr,$F).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){let n=super.renderAnnotationElement(t);if(!n)return null;let{style:i}=n;i.fontSize=`calc(${l(this,Fi)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(let o of l(this,Bi).split(`
`)){let s=document.createElement("div");s.append(o?document.createTextNode(o):document.createElement("br")),n.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Bi)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Bi=new WeakMap,Gy=new WeakMap,uf=new WeakMap,Fi=new WeakMap,Kr=new WeakSet,BF=function(t){let n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Fi))*this.parentScale),k(this,Fi,o),ee(this,Kr,Vw).call(this)},i=l(this,Fi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},FF=function(t){let n=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UF=function(){var i;let t=[];this.editorDiv.normalize();let n=null;for(let o of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(ee(i=wr,el,Yw).call(i,o)),n=o);return t.join(`
`)},Vw=function(){let[t,n]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:o,div:s}=this,a=s.style.display,u=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",o.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},el=new WeakSet,Yw=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Sw,"")},Xw=function(){if(this.editorDiv.replaceChildren(),!!l(this,Bi))for(let t of l(this,Bi).split(`
`)){let n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},jF=function(){return l(this,Bi).replaceAll("\xA0"," ")},ZS=function(t){return t.replaceAll(" ","\xA0")},$F=function(t){let{value:n,fontSize:i,color:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((a,u)=>a!==o[u])||t.pageIndex!==s},q(wr,el),Ke(wr,"_freeTextDefaultContent",""),Ke(wr,"_internalPadding",0),Ke(wr,"_defaultColor",null),Ke(wr,"_defaultFontSize",10),Ke(wr,"_type","freetext"),Ke(wr,"_editorType",vt.FREETEXT);KS=wr,at=class{toSVGPath(){dr("Abstract method `toSVGPath` must be implemented.")}get box(){dr("Abstract getter `box` must be implemented.")}serialize(e,t){dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*o;return s}static _rescaleAndSwap(e,t,n,i,o,s){s||(s=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*o;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let o=0,s=e.length;o<s;o+=2)i[o]=t+e[o],i[o+1]=n+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,o){switch(o){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,o,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+o)/6,(5*i+s)/6,(n+o)/2,(i+s)/2]}};Ke(at,"PRECISION",1e-4);ma=class ma{constructor({x:e,y:t},n,i,o,s,a=0){q(this,cn);q(this,Ui);q(this,Ws,[]);q(this,Kd);q(this,Zd);q(this,No,[]);q(this,Nt,new Float32Array(18));q(this,cf);q(this,ff);q(this,Vy);q(this,Yy);q(this,Jd);q(this,Qd);q(this,lu,[]);k(this,Ui,n),k(this,Qd,o*i),k(this,Zd,s),l(this,Nt).set([NaN,NaN,NaN,NaN,e,t],6),k(this,Kd,a),k(this,Yy,l(ma,Xy)*i),k(this,Vy,l(ma,s_)*i),k(this,Jd,i),l(this,lu).push(e,t)}isEmpty(){return isNaN(l(this,Nt)[8])}add({x:e,y:t}){k(this,cf,e),k(this,ff,t);let[n,i,o,s]=l(this,Ui),[a,u,c,f]=l(this,Nt).subarray(8,12),h=e-c,d=t-f,m=Math.hypot(h,d);if(m<l(this,Vy))return!1;let b=m-l(this,Yy),v=b/m,w=v*h,y=v*d,_=a,E=u;a=c,u=f,c+=w,f+=y,l(this,lu)?.push(e,t);let S=-y/b,A=w/b,F=S*l(this,Qd),I=A*l(this,Qd);return l(this,Nt).set(l(this,Nt).subarray(2,8),0),l(this,Nt).set([c+F,f+I],4),l(this,Nt).set(l(this,Nt).subarray(14,18),12),l(this,Nt).set([c-F,f-I],16),isNaN(l(this,Nt)[6])?(l(this,No).length===0&&(l(this,Nt).set([a+F,u+I],2),l(this,No).push(NaN,NaN,NaN,NaN,(a+F-n)/o,(u+I-i)/s),l(this,Nt).set([a-F,u-I],14),l(this,Ws).push(NaN,NaN,NaN,NaN,(a-F-n)/o,(u-I-i)/s)),l(this,Nt).set([_,E,a,u,c,f],6),!this.isEmpty()):(l(this,Nt).set([_,E,a,u,c,f],6),Math.abs(Math.atan2(E-u,_-a)-Math.atan2(y,w))<Math.PI/2?([a,u,c,f]=l(this,Nt).subarray(2,6),l(this,No).push(NaN,NaN,NaN,NaN,((a+c)/2-n)/o,((u+f)/2-i)/s),[a,u,_,E]=l(this,Nt).subarray(14,18),l(this,Ws).push(NaN,NaN,NaN,NaN,((_+a)/2-n)/o,((E+u)/2-i)/s),!0):([_,E,a,u,c,f]=l(this,Nt).subarray(0,6),l(this,No).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),[c,f,a,u,_,E]=l(this,Nt).subarray(12,18),l(this,Ws).push(((_+5*a)/6-n)/o,((E+5*u)/6-i)/s,((5*a+c)/6-n)/o,((5*u+f)/6-i)/s,((a+c)/2-n)/o,((u+f)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";let e=l(this,No),t=l(this,Ws);if(isNaN(l(this,Nt)[6])&&!this.isEmpty())return ee(this,cn,zF).call(this);let n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);ee(this,cn,qF).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return ee(this,cn,WF).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,o,s){return new Bv(e,t,n,i,o,s)}getOutlines(){let e=l(this,No),t=l(this,Ws),n=l(this,Nt),[i,o,s,a]=l(this,Ui),u=new Float32Array((l(this,lu)?.length??0)+2);for(let h=0,d=u.length-2;h<d;h+=2)u[h]=(l(this,lu)[h]-i)/s,u[h+1]=(l(this,lu)[h+1]-o)/a;if(u[u.length-2]=(l(this,cf)-i)/s,u[u.length-1]=(l(this,ff)-o)/a,isNaN(n[6])&&!this.isEmpty())return ee(this,cn,HF).call(this,u);let c=new Float32Array(l(this,No).length+24+l(this,Ws).length),f=e.length;for(let h=0;h<f;h+=2){if(isNaN(e[h])){c[h]=c[h+1]=NaN;continue}c[h]=e[h],c[h+1]=e[h+1]}f=ee(this,cn,VF).call(this,c,f);for(let h=t.length-6;h>=6;h-=6)for(let d=0;d<6;d+=2){if(isNaN(t[h+d])){c[f]=c[f+1]=NaN,f+=2;continue}c[f]=t[h+d],c[f+1]=t[h+d+1],f+=2}return ee(this,cn,GF).call(this,c,f),this.newFreeDrawOutline(c,u,l(this,Ui),l(this,Jd),l(this,Kd),l(this,Zd))}};Ui=new WeakMap,Ws=new WeakMap,Kd=new WeakMap,Zd=new WeakMap,No=new WeakMap,Nt=new WeakMap,cf=new WeakMap,ff=new WeakMap,Vy=new WeakMap,Yy=new WeakMap,Jd=new WeakMap,Qd=new WeakMap,lu=new WeakMap,Xy=new WeakMap,i_=new WeakMap,s_=new WeakMap,cn=new WeakSet,Kg=function(){let e=l(this,Nt).subarray(4,6),t=l(this,Nt).subarray(16,18),[n,i,o,s]=l(this,Ui);return[(l(this,cf)+(e[0]-t[0])/2-n)/o,(l(this,ff)+(e[1]-t[1])/2-i)/s,(l(this,cf)+(t[0]-e[0])/2-n)/o,(l(this,ff)+(t[1]-e[1])/2-i)/s]},zF=function(){let[e,t,n,i]=l(this,Ui),[o,s,a,u]=ee(this,cn,Kg).call(this);return`M${(l(this,Nt)[2]-e)/n} ${(l(this,Nt)[3]-t)/i} L${(l(this,Nt)[4]-e)/n} ${(l(this,Nt)[5]-t)/i} L${o} ${s} L${a} ${u} L${(l(this,Nt)[16]-e)/n} ${(l(this,Nt)[17]-t)/i} L${(l(this,Nt)[14]-e)/n} ${(l(this,Nt)[15]-t)/i} Z`},WF=function(e){let t=l(this,Ws);e.push(`L${t[4]} ${t[5]} Z`)},qF=function(e){let[t,n,i,o]=l(this,Ui),s=l(this,Nt).subarray(4,6),a=l(this,Nt).subarray(16,18),[u,c,f,h]=ee(this,cn,Kg).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-n)/o} L${u} ${c} L${f} ${h} L${(a[0]-t)/i} ${(a[1]-n)/o}`)},HF=function(e){let t=l(this,Nt),[n,i,o,s]=l(this,Ui),[a,u,c,f]=ee(this,cn,Kg).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,l(this,Ui),l(this,Jd),l(this,Kd),l(this,Zd))},GF=function(e,t){let n=l(this,Ws);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},VF=function(e,t){let n=l(this,Nt).subarray(4,6),i=l(this,Nt).subarray(16,18),[o,s,a,u]=l(this,Ui),[c,f,h,d]=ee(this,cn,Kg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-s)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-s)/u],t),t+=24},q(ma,Xy,8),q(ma,i_,2),q(ma,s_,l(ma,Xy)+l(ma,i_));Mv=ma,Bv=class extends at{constructor(t,n,i,o,s,a){super();q(this,o_);q(this,ep);q(this,hf,new Float32Array(4));q(this,qa);q(this,Ky);q(this,ji);q(this,Zy);q(this,Gr);k(this,Gr,t),k(this,ji,n),k(this,ep,i),k(this,Zy,o),k(this,qa,s),k(this,Ky,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],ee(this,o_,YF).call(this,a);let[u,c,f,h]=l(this,hf);for(let d=0,m=t.length;d<m;d+=2)t[d]=(t[d]-u)/f,t[d+1]=(t[d+1]-c)/h;for(let d=0,m=n.length;d<m;d+=2)n[d]=(n[d]-u)/f,n[d+1]=(n[d+1]-c)/h}toSVGPath(){let t=[`M${l(this,Gr)[4]} ${l(this,Gr)[5]}`];for(let n=6,i=l(this,Gr).length;n<i;n+=6){if(isNaN(l(this,Gr)[n])){t.push(`L${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`);continue}t.push(`C${l(this,Gr)[n]} ${l(this,Gr)[n+1]} ${l(this,Gr)[n+2]} ${l(this,Gr)[n+3]} ${l(this,Gr)[n+4]} ${l(this,Gr)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,o],s){let a=i-t,u=o-n,c,f;switch(s){case 0:c=at._rescale(l(this,Gr),t,o,a,-u),f=at._rescale(l(this,ji),t,o,a,-u);break;case 90:c=at._rescaleAndSwap(l(this,Gr),t,n,a,u),f=at._rescaleAndSwap(l(this,ji),t,n,a,u);break;case 180:c=at._rescale(l(this,Gr),i,n,-a,u),f=at._rescale(l(this,ji),i,n,-a,u);break;case 270:c=at._rescaleAndSwap(l(this,Gr),i,o,-a,-u),f=at._rescaleAndSwap(l(this,ji),i,o,-a,-u);break}return{outline:Array.from(c),points:[Array.from(f)]}}get box(){return l(this,hf)}newOutliner(t,n,i,o,s,a=0){return new Mv(t,n,i,o,s,a)}getNewOutline(t,n){let[i,o,s,a]=l(this,hf),[u,c,f,h]=l(this,ep),d=s*f,m=a*h,b=i*f+u,v=o*h+c,w=this.newOutliner({x:l(this,ji)[0]*d+b,y:l(this,ji)[1]*m+v},l(this,ep),l(this,Zy),t,l(this,Ky),n??l(this,qa));for(let y=2;y<l(this,ji).length;y+=2)w.add({x:l(this,ji)[y]*d+b,y:l(this,ji)[y+1]*m+v});return w.getOutlines()}};ep=new WeakMap,hf=new WeakMap,qa=new WeakMap,Ky=new WeakMap,ji=new WeakMap,Zy=new WeakMap,Gr=new WeakMap,o_=new WeakSet,YF=function(t){let n=l(this,Gr),i=n[4],o=n[5],s=[i,o,i,o],a=i,u=o,c=i,f=o,h=t?Math.max:Math.min,d=new Float32Array(4);for(let b=6,v=n.length;b<v;b+=6){let w=n[b+4],y=n[b+5];isNaN(n[b])?(it.pointBoundingBox(w,y,s),u>y?(a=w,u=y):u===y&&(a=h(a,w)),f<y?(c=w,f=y):f===y&&(c=h(c,w))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,it.bezierBoundingBox(i,o,...n.slice(b,b+6),d),it.rectBoundingBox(d[0],d[1],d[2],d[3],s),u>d[1]?(a=d[0],u=d[1]):u===d[1]&&(a=h(a,d[0])),f<d[3]?(c=d[2],f=d[3]):f===d[3]&&(c=h(c,d[2]))),i=w,o=y}let m=l(this,hf);m[0]=s[0]-l(this,qa),m[1]=s[1]-l(this,qa),m[2]=s[2]-s[0]+2*l(this,qa),m[3]=s[3]-s[1]+2*l(this,qa),this.firstPoint=[a,u],this.lastPoint=[c,f]};ym=class{constructor(e,t=0,n=0,i=!0){q(this,ti);q(this,Jy);q(this,Qy);q(this,e0);q(this,uu,[]);q(this,qs,[]);let o=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:w,y,width:_,height:E}of e){let S=Math.floor((w-t)/a)*a,A=Math.ceil((w+_+t)/a)*a,F=Math.floor((y-t)/a)*a,I=Math.ceil((y+E+t)/a)*a,X=[S,F,I,!0],Z=[A,F,I,!1];l(this,uu).push(X,Z),it.rectBoundingBox(S,F,A,I,o)}let u=o[2]-o[0]+2*n,c=o[3]-o[1]+2*n,f=o[0]-n,h=o[1]-n,d=i?-1/0:1/0,m=1/0,b=l(this,uu).at(i?-1:-2),v=[b[0],b[2]];for(let w of l(this,uu)){let[y,_,E,S]=w;!S&&i?_<m?(m=_,d=y):_===m&&(d=Math.max(d,y)):S&&!i&&(_<m?(m=_,d=y):_===m&&(d=Math.min(d,y))),w[0]=(y-f)/u,w[1]=(_-h)/c,w[2]=(E-h)/c}k(this,Jy,new Float32Array([f,h,u,c])),k(this,Qy,[d,m]),k(this,e0,v)}getOutlines(){l(this,uu).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of l(this,uu))t[3]?(e.push(...ee(this,ti,JS).call(this,t)),ee(this,ti,KF).call(this,t)):(ee(this,ti,ZF).call(this,t),e.push(...ee(this,ti,JS).call(this,t)));return ee(this,ti,XF).call(this,e)}};Jy=new WeakMap,Qy=new WeakMap,e0=new WeakMap,uu=new WeakMap,qs=new WeakMap,ti=new WeakSet,XF=function(e){let t=[],n=new Set;for(let s of e){let[a,u,c]=s;t.push([a,u,s],[a,c,s])}t.sort((s,a)=>s[1]-a[1]||s[0]-a[0]);for(let s=0,a=t.length;s<a;s+=2){let u=t[s][2],c=t[s+1][2];u.push(c),c.push(u),n.add(u),n.add(c)}let i=[],o;for(;n.size>0;){let s=n.values().next().value,[a,u,c,f,h]=s;n.delete(s);let d=a,m=u;for(o=[a,c],i.push(o);;){let b;if(n.has(f))b=f;else if(n.has(h))b=h;else break;n.delete(b),[a,u,c,f,h]=b,d!==a&&(o.push(d,m,a,m===u?u:c),d=a),m=m===u?c:u}o.push(d,m)}return new QS(i,l(this,Jy),l(this,Qy),l(this,e0))},Kw=function(e){let t=l(this,qs),n=0,i=t.length-1;for(;n<=i;){let o=n+i>>1,s=t[o][0];if(s===e)return o;s<e?n=o+1:i=o-1}return i+1},KF=function([,e,t]){let n=ee(this,ti,Kw).call(this,e);l(this,qs).splice(n,0,[e,t])},ZF=function([,e,t]){let n=ee(this,ti,Kw).call(this,e);for(let i=n;i<l(this,qs).length;i++){let[o,s]=l(this,qs)[i];if(o!==e)break;if(o===e&&s===t){l(this,qs).splice(i,1);return}}for(let i=n-1;i>=0;i--){let[o,s]=l(this,qs)[i];if(o!==e)break;if(o===e&&s===t){l(this,qs).splice(i,1);return}}},JS=function(e){let[t,n,i]=e,o=[[t,n,i]],s=ee(this,ti,Kw).call(this,i);for(let a=0;a<s;a++){let[u,c]=l(this,qs)[a];for(let f=0,h=o.length;f<h;f++){let[,d,m]=o[f];if(!(c<=d||m<=u)){if(d>=u){if(m>c)o[f][1]=c;else{if(h===1)return[];o.splice(f,1),f--,h--}continue}o[f][2]=u,m>c&&o.push([t,c,m])}}}return o};QS=class extends at{constructor(t,n,i,o){super();q(this,t0);q(this,tp);k(this,tp,t),k(this,t0,n),this.firstPoint=i,this.lastPoint=o}toSVGPath(){let t=[];for(let n of l(this,tp)){let[i,o]=n;t.push(`M${i} ${o}`);for(let s=2;s<n.length;s+=2){let a=n[s],u=n[s+1];a===i?(t.push(`V${u}`),o=u):u===o&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,n,i,o],s){let a=[],u=i-t,c=o-n;for(let f of l(this,tp)){let h=new Array(f.length);for(let d=0;d<f.length;d+=2)h[d]=t+f[d]*u,h[d+1]=o-f[d+1]*c;a.push(h)}return a}get box(){return l(this,t0)}get classNamesForOutlining(){return["highlightOutline"]}};t0=new WeakMap,tp=new WeakMap;bm=class extends Mv{newFreeDrawOutline(e,t,n,i,o,s){return new eT(e,t,n,i,o,s)}},eT=class extends Bv{newOutliner(e,t,n,i,o,s=0){return new bm(e,t,n,i,o,s)}},qt=class qt extends mr{constructor(t){super({...t,name:"highlightEditor"});q(this,Tt);q(this,rp,null);q(this,r0,0);q(this,Ha);q(this,df,null);q(this,n0,null);q(this,bi,null);q(this,i0,null);q(this,s0,0);q(this,pf,null);q(this,$i,null);q(this,zi,null);q(this,Cn,!1);q(this,np,null);q(this,ip,null);q(this,zn,null);q(this,sp,"");q(this,vs);q(this,o0,"");this.color=t.color||qt._defaultColor,k(this,vs,t.thickness||qt._defaultThickness),this.opacity=t.opacity||qt._defaultOpacity,k(this,Ha,t.boxes||null),k(this,o0,t.methodOfCreation||""),k(this,sp,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(k(this,Cn,!0),ee(this,Tt,Zw).call(this,t),ee(this,Tt,ac).call(this)):l(this,Ha)&&(k(this,rp,t.anchorNode),k(this,r0,t.anchorOffset),k(this,i0,t.focusNode),k(this,s0,t.focusOffset),ee(this,Tt,tT).call(this),ee(this,Tt,ac).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){let t=qt.prototype;return wt(this,"_keyboardManager",new If([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Cn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,vs),methodOfCreation:l(this,o0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){mr.initialize(t,n),qt._defaultColor||(qt._defaultColor=n.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:qt._defaultColor=n;break;case Mt.HIGHLIGHT_THICKNESS:qt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return l(this,ip)}get commentButtonPosition(){return l(this,np)}updateParams(t,n){switch(t){case Mt.HIGHLIGHT_COLOR:ee(this,Tt,JF).call(this,n);break;case Mt.HIGHLIGHT_THICKNESS:ee(this,Tt,QF).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,qt._defaultColor],[Mt.HIGHLIGHT_THICKNESS,qt._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||qt._defaultColor],[Mt.HIGHLIGHT_THICKNESS,l(this,vs)||qt._defaultThickness],[Mt.HIGHLIGHT_FREE,l(this,Cn)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(l(this,zi),{root:{fill:this.color,"fill-opacity":this.opacity}}),l(this,n0)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",k(this,n0,new dm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ee(this,Tt,Qw).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,ee(this,Tt,Qw).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){ee(this,Tt,rT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ee(this,Tt,ac).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?ee(this,Tt,rT).call(this):t&&(ee(this,Tt,ac).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,s,a;let{drawLayer:n}=this.parent,i;l(this,Cn)?(t=(t-this.rotation+360)%360,i=ee(o=qt,xs,Ph).call(o,l(this,$i).box,t)):i=ee(s=qt,xs,Ph).call(s,[this.x,this.y,this.width,this.height],t),n.updateProperties(l(this,zi),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(l(this,zn),{bbox:ee(a=qt,xs,Ph).call(a,l(this,bi).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();l(this,sp)&&(t.setAttribute("aria-label",l(this,sp)),t.setAttribute("role","mark")),l(this,Cn)?t.classList.add("free"):this.div.addEventListener("keydown",ee(this,Tt,t3).bind(this),{signal:this._uiManager._signal});let n=k(this,pf,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,df),this.setDims(),BB(this,l(this,pf),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:ee(this,Tt,Jw).call(this,!0);break;case 1:case 3:ee(this,Tt,Jw).call(this,!1);break}}select(){super.select(),l(this,zn)&&this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),l(this,zn)&&(this.parent?.drawLayer.updateProperties(l(this,zn),{rootClass:{selected:!1}}),l(this,Cn)||ee(this,Tt,Jw).call(this,!1))}get _mustFixPosition(){return!l(this,Cn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,zi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,zn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:o,y:s}){let{x:a,y:u,width:c,height:f}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),m=b=>{h.abort(),ee(this,xs,s3).call(this,t,b)};window.addEventListener("blur",m,{signal:d}),window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("pointerdown",Cr,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Ki,{signal:d}),i.addEventListener("pointermove",ee(this,xs,i3).bind(this,t),{signal:d}),this._freeHighlight=new bm({x:o,y:s},[a,u,c,f],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var v,w,y,_;let o=null;if(t instanceof kv){let{data:{quadPoints:E,rect:S,rotation:A,id:F,color:I,opacity:X,popupRef:Z,richText:H,contentsObj:ne,creationDate:L,modificationDate:$},parent:{page:{pageNumber:K}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(I),opacity:X,quadPoints:E,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:A,annotationElementId:F,id:F,deleted:!1,popupRef:Z,richText:H,comment:ne?.str||null,creationDate:L,modificationDate:$}}else if(t instanceof mm){let{data:{inkLists:E,rect:S,rotation:A,id:F,color:I,borderStyle:{rawWidth:X},popupRef:Z,richText:H,contentsObj:ne,creationDate:L,modificationDate:$},parent:{page:{pageNumber:K}}}=t;o=t={annotationType:vt.HIGHLIGHT,color:Array.from(I),thickness:X,inkLists:E,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:A,annotationElementId:F,id:F,deleted:!1,popupRef:Z,richText:H,comment:ne?.str||null,creationDate:L,modificationDate:$}}let{color:s,quadPoints:a,inkLists:u,opacity:c}=t,f=await super.deserialize(t,n,i);f.color=it.makeHexColor(...s),f.opacity=c||1,u&&k(f,vs,t.thickness),f._initialData=o,t.comment&&f.setCommentData(t);let[h,d]=f.pageDimensions,[m,b]=f.pageTranslation;if(a){let E=k(f,Ha,[]);for(let S=0;S<a.length;S+=8)E.push({x:(a[S]-m)/h,y:1-(a[S+1]-b)/d,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/d});ee(v=f,Tt,tT).call(v),ee(w=f,Tt,ac).call(w),f.rotate(f.rotation)}else if(u){k(f,Cn,!0);let E=u[0],S={x:E[0]-m,y:d-(E[1]-b)},A=new bm(S,[0,0,h,d],1,l(f,vs)/2,!0,.001);for(let X=0,Z=E.length;X<Z;X+=2)S.x=E[X]-m,S.y=d-(E[X+1]-b),A.add(S);let{id:F,clipPathId:I}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);ee(y=f,Tt,Zw).call(y,{highlightOutlines:A.getOutlines(),highlightId:F,clipPathId:I}),ee(_=f,Tt,ac).call(_),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let n=mr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,vs),quadPoints:ee(this,Tt,r3).call(this),outlines:ee(this,Tt,n3).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!ee(this,Tt,o3).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};rp=new WeakMap,r0=new WeakMap,Ha=new WeakMap,df=new WeakMap,n0=new WeakMap,bi=new WeakMap,i0=new WeakMap,s0=new WeakMap,pf=new WeakMap,$i=new WeakMap,zi=new WeakMap,Cn=new WeakMap,np=new WeakMap,ip=new WeakMap,zn=new WeakMap,sp=new WeakMap,vs=new WeakMap,o0=new WeakMap,Tt=new WeakSet,tT=function(){let t=new ym(l(this,Ha),.001);k(this,$i,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,$i).box;let n=new ym(l(this,Ha),.0025,.001,this._uiManager.direction==="ltr");k(this,bi,n.getOutlines());let{firstPoint:i}=l(this,$i);k(this,np,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);let{lastPoint:o}=l(this,bi);k(this,ip,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Zw=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,m;if(k(this,$i,t),k(this,bi,t.getNewOutline(l(this,vs)/2+1.5,.0025)),n>=0)k(this,zi,n),k(this,df,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),k(this,zn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},!0));else if(this.parent){let b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,zi),{bbox:ee(d=qt,xs,Ph).call(d,l(this,$i).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,zn),{bbox:ee(m=qt,xs,Ph).call(m,l(this,bi).box,b),path:{d:l(this,bi).toSVGPath()}})}let[s,a,u,c]=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=u,this.height=c;break;case 90:{let[b,v]=this.parentDimensions;this.x=a,this.y=1-s,this.width=u*v/b,this.height=c*b/v;break}case 180:this.x=1-s,this.y=1-a,this.width=u,this.height=c;break;case 270:{let[b,v]=this.parentDimensions;this.x=1-a,this.y=s,this.width=u*v/b,this.height=c*b/v;break}}let{firstPoint:f}=t;k(this,np,[(f[0]-s)/u,(f[1]-a)/c]);let{lastPoint:h}=l(this,bi);k(this,ip,[(h[0]-s)/u,(h[1]-a)/c])},JF=function(t){let n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,t,qt._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},QF=function(t){let n=l(this,vs),i=o=>{k(this,vs,o),ee(this,Tt,e3).call(this,o)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},e3=function(t){l(this,Cn)&&(ee(this,Tt,Zw).call(this,{highlightOutlines:l(this,$i).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},rT=function(){l(this,zi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,zi)),k(this,zi,null),this.parent.drawLayer.remove(l(this,zn)),k(this,zn,null))},ac=function(t=this.parent){l(this,zi)===null&&({id:tn(this,zi)._,clipPathId:tn(this,df)._}=t.drawLayer.draw({bbox:l(this,$i).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Cn)},path:{d:l(this,$i).toSVGPath()}},!1,!0),k(this,zn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Cn)},bbox:l(this,bi).box,path:{d:l(this,bi).toSVGPath()}},l(this,Cn))),l(this,pf)&&(l(this,pf).style.clipPath=l(this,df)))},xs=new WeakSet,Ph=function([t,n,i,o],s){switch(s){case 90:return[1-n-o,t,o,i];case 180:return[1-t-i,1-n-o,i,o];case 270:return[n,1-t-i,o,i]}return[t,n,i,o]},t3=function(t){qt._keyboardManager.exec(this,t)},Jw=function(t){if(!l(this,rp))return;let n=window.getSelection();t?n.setPosition(l(this,rp),l(this,r0)):n.setPosition(l(this,i0),l(this,s0))},Qw=function(){return l(this,Cn)?this.rotation:0},r3=function(){if(l(this,Cn))return null;let[t,n]=this.pageDimensions,[i,o]=this.pageTranslation,s=l(this,Ha),a=new Float32Array(s.length*8),u=0;for(let{x:c,y:f,width:h,height:d}of s){let m=c*t+i,b=(1-f)*n+o;a[u]=a[u+4]=m,a[u+1]=a[u+3]=b,a[u+2]=a[u+6]=m+h*t,a[u+5]=a[u+7]=b-d*n,u+=8}return a},n3=function(t){return l(this,$i).serialize(t,ee(this,Tt,Qw).call(this))},i3=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},s3=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},o3=function(t){let{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,o)=>i!==n[o])},q(qt,xs),Ke(qt,"_defaultColor",null),Ke(qt,"_defaultOpacity",1),Ke(qt,"_defaultThickness",12),Ke(qt,"_type","highlight"),Ke(qt,"_editorType",vt.HIGHLIGHT),Ke(qt,"_freeHighlightId",-1),Ke(qt,"_freeHighlight",null),Ke(qt,"_freeHighlightClipId","");Fv=qt,Uv=class{constructor(){q(this,gf,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){l(this,gf)[e]=t}toSVGProperties(){let e=l(this,gf);return k(this,gf,Object.create(null)),{root:e}}reset(){k(this,gf,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){dr("Not implemented")}};gf=new WeakMap;Pt=class Pt extends mr{constructor(t){super(t);q(this,jt);q(this,Wi,null);q(this,op);Ke(this,"_colorPicker",null);Ke(this,"_drawId",null);k(this,op,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(ee(this,jt,nT).call(this,t),ee(this,jt,Zg).call(this))}static _mergeSVGProperties(t,n){let i=new Set(Object.keys(t));for(let[o,s]of Object.entries(n))i.has(o)?Object.assign(t[o],s):t[o]=s;return t}static getDefaultDrawingOptions(t){dr("Not implemented")}static get typesMap(){dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){let i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(Pt,yn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){let i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){let t=[],n=this._defaultDrawingOptions;for(let[i,o]of this.typesMap)t.push([i,n[o]]);return t}get propertiesToUpdate(){let t=[],{_drawingOptions:n}=this;for(let[i,o]of this.constructor.typesMap)t.push([i,n[o]]);return t}_updateProperty(t,n,i){let o=this._drawingOptions,s=o[n],a=u=>{o.updateProperty(n,u);let c=l(this,Wi).updateProperty(n,u);c&&ee(this,jt,Jg).call(this,c),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,Wi).getPathResizingSVGProperties(ee(this,jt,ev).call(this)),{bbox:ee(this,jt,Mh).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,Wi).getPathResizedSVGProperties(ee(this,jt,ev).call(this)),{bbox:ee(this,jt,Mh).call(this)}))}_onTranslating(t,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:ee(this,jt,Mh).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(l(this,Wi).getPathTranslatedSVGProperties(ee(this,jt,ev).call(this),this.parentDimensions),{bbox:ee(this,jt,Mh).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,op)&&(k(this,op,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){ee(this,jt,sT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(ee(this,jt,Zg).call(this),ee(this,jt,Jg).call(this,l(this,Wi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),ee(this,jt,sT).call(this)):t&&(this._uiManager.addShouldRescale(this),ee(this,jt,Zg).call(this,t),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:ee(this,jt,Mh).call(this)},l(this,Wi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ee(this,jt,Jg).call(this,l(this,Wi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);let i=super.render();i.classList.add("draw");let o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,o,s){dr("Not implemented")}static startDrawing(t,n,i,o){let{target:s,offsetX:a,offsetY:u,pointerId:c,pointerType:f}=o;if(Bn.isInitializedAndDifferentPointerType(f))return;let{viewport:{rotation:h}}=t,{width:d,height:m}=s.getBoundingClientRect(),b=k(Pt,mf,new AbortController),v=t.combinedSignal(b);if(Bn.setPointer(f,c),window.addEventListener("pointerup",w=>{Bn.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:v}),window.addEventListener("pointercancel",w=>{Bn.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",w=>{Bn.isSamePointerType(w.pointerType)&&(Bn.initializeAndAddPointerId(w.pointerId),l(Pt,yn).isCancellable()&&(l(Pt,yn).removeLastElement(),l(Pt,yn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ki,{signal:v}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),s.addEventListener("touchmove",w=>{Bn.isSameTimeStamp(w.timeStamp)&&Cr(w)},{signal:v}),t.toggleDrawing(),n._editorUndoBar?.hide(),l(Pt,yn)){t.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).startNew(a,u,d,m,h));return}n.updateUIForDefaultProperties(this),k(Pt,yn,this.createDrawerInstance(a,u,d,m,h)),k(Pt,yf,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(Pt,yf).toSVGProperties(),l(Pt,yn).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Bn.isSameTimeStamp(t.timeStamp),!l(Pt,yn))return;let{offsetX:n,offsetY:i,pointerId:o}=t;if(Bn.isSamePointerId(o)){if(Bn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).add(n,i)),Bn.setTimeStamp(t.timeStamp),Cr(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,k(Pt,yn,null),k(Pt,yf,null),Bn.clearTimeStamp()),l(Pt,mf)&&(l(Pt,mf).abort(),k(Pt,mf,null),Bn.clearPointerIds())}static _endDraw(t){let n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(Pt,yn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){let i=l(Pt,yn),o=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){let n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Mt.DRAW_STEP),!l(Pt,yn).isEmpty()){let{pageDimensions:[i,o],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Pt,yn).getOutlines(i*s,o*s,s,this._INNER_MARGIN),drawingOptions:l(Pt,yf),mustBeCommitted:!t});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,o,s,a){dr("Not implemented")}static async deserialize(t,n,i){var h,d;let{rawDims:{pageWidth:o,pageHeight:s,pageX:a,pageY:u}}=n.viewport,c=this.deserializeDraw(a,u,o,s,this._INNER_MARGIN,t),f=await super.deserialize(t,n,i);return f.createDrawingOptions(t),ee(h=f,jt,nT).call(h,{drawOutlines:c}),ee(d=f,jt,Zg).call(d),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){let[n,i]=this.pageTranslation,[o,s]=this.pageDimensions;return l(this,Wi).serialize([n,i,o,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Wi=new WeakMap,op=new WeakMap,yn=new WeakMap,mf=new WeakMap,yf=new WeakMap,jt=new WeakSet,nT=function({drawOutlines:t,drawId:n,drawingOptions:i}){k(this,Wi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=ee(this,jt,iT).call(this,t,this.parent),ee(this,jt,Jg).call(this,t.box)},iT=function(t,n){let{id:i}=n.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},sT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Zg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=ee(this,jt,iT).call(this,l(this,Wi),t)}},a3=function([t,n,i,o]){let{parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[n,1-t,i*(a/s),o*(s/a)];case 180:return[1-t,1-n,i,o];case 270:return[1-n,t,i*(a/s),o*(s/a)];default:return[t,n,i,o]}},ev=function(){let{x:t,y:n,width:i,height:o,parentDimensions:[s,a],rotation:u}=this;switch(u){case 90:return[1-n,t,i*(s/a),o*(a/s)];case 180:return[1-t,1-n,i,o];case 270:return[n,1-t,i*(s/a),o*(a/s)];default:return[t,n,i,o]}},Jg=function(t){[this.x,this.y,this.width,this.height]=ee(this,jt,a3).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mh=function(){let{x:t,y:n,width:i,height:o,rotation:s,parentRotation:a,parentDimensions:[u,c]}=this;switch((s*4+a)/90){case 1:return[1-n-o,t,o,i];case 2:return[1-t-i,1-n-o,i,o];case 3:return[n,1-t-i,o,i];case 4:return[t,n-i*(u/c),o*(c/u),i*(u/c)];case 5:return[1-n,t,i*(u/c),o*(c/u)];case 6:return[1-t-o*(c/u),1-n,o*(c/u),i*(u/c)];case 7:return[n-i*(u/c),1-t-o*(c/u),i*(u/c),o*(c/u)];case 8:return[t-i,n-o,i,o];case 9:return[1-n,t-i,o,i];case 10:return[1-t,1-n,i,o];case 11:return[n-o,1-t,o,i];case 12:return[t-o*(c/u),n,o*(c/u),i*(u/c)];case 13:return[1-n-i*(u/c),t-o*(c/u),i*(u/c),o*(c/u)];case 14:return[1-t,1-n-i*(u/c),o*(c/u),i*(u/c)];case 15:return[n,1-t,i*(u/c),o*(c/u)];default:return[t,n,i,o]}},Ke(Pt,"_currentDrawId",-1),Ke(Pt,"_currentParent",null),q(Pt,yn,null),q(Pt,mf,null),q(Pt,yf,null),Ke(Pt,"_INNER_MARGIN",3);jv=Pt,oT=class{constructor(e,t,n,i,o,s){q(this,lp);q(this,ko,new Float64Array(6));q(this,bn);q(this,wn);q(this,bf);q(this,ap);q(this,Kn);q(this,Rn,"");q(this,_s,0);q(this,wf,new kf);q(this,vf);q(this,_f);k(this,vf,n),k(this,_f,i),k(this,bf,o),k(this,ap,s),[e,t]=ee(this,lp,tv).call(this,e,t);let a=k(this,bn,[NaN,NaN,NaN,NaN,e,t]);k(this,Kn,[e,t]),k(this,wn,[{line:a,points:l(this,Kn)}]),l(this,ko).set(a,0)}updateProperty(e,t){e==="stroke-width"&&k(this,ap,t)}isEmpty(){return!l(this,wn)||l(this,wn).length===0}isCancellable(){return l(this,Kn).length<=10}add(e,t){[e,t]=ee(this,lp,tv).call(this,e,t);let[n,i,o,s]=l(this,ko).subarray(2,6),a=e-o,u=t-s;return Math.hypot(l(this,vf)*a,l(this,_f)*u)<=2?null:(l(this,Kn).push(e,t),isNaN(n)?(l(this,ko).set([o,s,e,t],2),l(this,bn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,ko)[0])&&l(this,bn).splice(6,6),l(this,ko).set([n,i,o,s,e,t],0),l(this,bn).push(...at.createBezierPoints(n,i,o,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){let n=this.add(e,t);return n||(l(this,Kn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){k(this,vf,n),k(this,_f,i),k(this,bf,o),[e,t]=ee(this,lp,tv).call(this,e,t);let s=k(this,bn,[NaN,NaN,NaN,NaN,e,t]);k(this,Kn,[e,t]);let a=l(this,wn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,wn).push({line:s,points:l(this,Kn)}),l(this,ko).set(s,0),k(this,_s,0),this.toSVGPath(),null}getLastElement(){return l(this,wn).at(-1)}setLastElement(e){return l(this,wn)?(l(this,wn).push(e),k(this,bn,e.line),k(this,Kn,e.points),k(this,_s,0),{path:{d:this.toSVGPath()}}):l(this,wf).setLastElement(e)}removeLastElement(){if(!l(this,wn))return l(this,wf).removeLastElement();l(this,wn).pop(),k(this,Rn,"");for(let e=0,t=l(this,wn).length;e<t;e++){let{line:n,points:i}=l(this,wn)[e];k(this,bn,n),k(this,Kn,i),k(this,_s,0),this.toSVGPath()}return{path:{d:l(this,Rn)}}}toSVGPath(){let e=at.svgRound(l(this,bn)[4]),t=at.svgRound(l(this,bn)[5]);if(l(this,Kn).length===2)return k(this,Rn,`${l(this,Rn)} M ${e} ${t} Z`),l(this,Rn);if(l(this,Kn).length<=6){let i=l(this,Rn).lastIndexOf("M");k(this,Rn,`${l(this,Rn).slice(0,i)} M ${e} ${t}`),k(this,_s,6)}if(l(this,Kn).length===4){let i=at.svgRound(l(this,bn)[10]),o=at.svgRound(l(this,bn)[11]);return k(this,Rn,`${l(this,Rn)} L ${i} ${o}`),k(this,_s,12),l(this,Rn)}let n=[];l(this,_s)===0&&(n.push(`M ${e} ${t}`),k(this,_s,6));for(let i=l(this,_s),o=l(this,bn).length;i<o;i+=6){let[s,a,u,c,f,h]=l(this,bn).slice(i,i+6).map(at.svgRound);n.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}return k(this,Rn,l(this,Rn)+n.join(" ")),k(this,_s,l(this,bn).length),l(this,Rn)}getOutlines(e,t,n,i){let o=l(this,wn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,wf).build(l(this,wn),e,t,n,l(this,bf),l(this,ap),i),k(this,ko,null),k(this,bn,null),k(this,wn,null),k(this,Rn,null),l(this,wf)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}};ko=new WeakMap,bn=new WeakMap,wn=new WeakMap,bf=new WeakMap,ap=new WeakMap,Kn=new WeakMap,Rn=new WeakMap,_s=new WeakMap,wf=new WeakMap,vf=new WeakMap,_f=new WeakMap,lp=new WeakSet,tv=function(e,t){return at._normalizePoint(e,t,l(this,vf),l(this,_f),l(this,bf))};kf=class extends at{constructor(){super(...arguments);q(this,In);q(this,Zn);q(this,a0,0);q(this,l0);q(this,qi);q(this,Lo);q(this,Po);q(this,up);q(this,cp);q(this,Ef)}build(t,n,i,o,s,a,u){k(this,Lo,n),k(this,Po,i),k(this,up,o),k(this,cp,s),k(this,Ef,a),k(this,l0,u??0),k(this,qi,t),ee(this,In,u3).call(this)}get thickness(){return l(this,Ef)}setLastElement(t){return l(this,qi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,qi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:n}of l(this,qi)){if(t.push(`M${at.svgRound(n[4])} ${at.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${at.svgRound(n[10])} ${at.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){let[s,a,u,c,f,h]=n.subarray(i,i+6).map(at.svgRound);t.push(`C${s} ${a} ${u} ${c} ${f} ${h}`)}}return t.join("")}serialize([t,n,i,o],s){let a=[],u=[],[c,f,h,d]=ee(this,In,l3).call(this),m,b,v,w,y,_,E,S,A;switch(l(this,cp)){case 0:A=at._rescale,m=t,b=n+o,v=i,w=-o,y=t+c*i,_=n+(1-f-d)*o,E=t+(c+h)*i,S=n+(1-f)*o;break;case 90:A=at._rescaleAndSwap,m=t,b=n,v=i,w=o,y=t+f*i,_=n+c*o,E=t+(f+d)*i,S=n+(c+h)*o;break;case 180:A=at._rescale,m=t+i,b=n,v=-i,w=o,y=t+(1-c-h)*i,_=n+f*o,E=t+(1-c)*i,S=n+(f+d)*o;break;case 270:A=at._rescaleAndSwap,m=t+i,b=n+o,v=-i,w=-o,y=t+(1-f-d)*i,_=n+(1-c-h)*o,E=t+(1-f)*i,S=n+(1-c)*o;break}for(let{line:F,points:I}of l(this,qi))a.push(A(F,m,b,v,w,s?new Array(F.length):null)),u.push(A(I,m,b,v,w,s?new Array(I.length):null));return{lines:a,points:u,rect:[y,_,E,S]}}static deserialize(t,n,i,o,s,{paths:{lines:a,points:u},rotation:c,thickness:f}){let h=[],d,m,b,v,w;switch(c){case 0:w=at._rescale,d=-t/i,m=n/o+1,b=1/i,v=-1/o;break;case 90:w=at._rescaleAndSwap,d=-n/o,m=-t/i,b=1/o,v=1/i;break;case 180:w=at._rescale,d=t/i+1,m=-n/o,b=-1/i,v=1/o;break;case 270:w=at._rescaleAndSwap,d=n/o+1,m=t/i+1,b=-1/o,v=-1/i;break}if(!a){a=[];for(let _ of u){let E=_.length;if(E===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(E===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}let S=new Float32Array(3*(E-2));a.push(S);let[A,F,I,X]=_.subarray(0,4);S.set([NaN,NaN,NaN,NaN,A,F],0);for(let Z=4;Z<E;Z+=2){let H=_[Z],ne=_[Z+1];S.set(at.createBezierPoints(A,F,I,X,H,ne),(Z-2)*3),[A,F,I,X]=[I,X,H,ne]}}}for(let _=0,E=a.length;_<E;_++)h.push({line:w(a[_].map(S=>S??NaN),d,m,b,v),points:w(u[_].map(S=>S??NaN),d,m,b,v)});let y=new this.prototype.constructor;return y.build(h,i,o,1,c,f,s),y}get box(){return l(this,Zn)}updateProperty(t,n){return t==="stroke-width"?ee(this,In,c3).call(this,n):null}updateParentDimensions([t,n],i){let[o,s]=ee(this,In,pa).call(this);k(this,Lo,t),k(this,Po,n),k(this,up,i);let[a,u]=ee(this,In,pa).call(this),c=a-o,f=u-s,h=l(this,Zn);return h[0]-=c,h[1]-=f,h[2]+=2*c,h[3]+=2*f,h}updateRotation(t){return k(this,a0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Zn).map(at.svgRound).join(" ")}get defaultProperties(){let[t,n]=l(this,Zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`}}}get rotationTransform(){let[,,t,n]=l(this,Zn),i=0,o=0,s=0,a=0,u=0,c=0;switch(l(this,a0)){case 90:o=n/t,s=-t/n,u=t;break;case 180:i=-1,a=-1,u=t,c=n;break;case 270:o=-n/t,s=t/n,c=n;break;default:return""}return`matrix(${i} ${o} ${s} ${a} ${at.svgRound(u)} ${at.svgRound(c)})`}getPathResizingSVGProperties([t,n,i,o]){let[s,a]=ee(this,In,pa).call(this),[u,c,f,h]=l(this,Zn);if(Math.abs(f-s)<=at.PRECISION||Math.abs(h-a)<=at.PRECISION){let w=t+i/2-(u+f/2),y=n+o/2-(c+h/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${y})`}}}let d=(i-2*s)/(f-2*s),m=(o-2*a)/(h-2*a),b=f/i,v=h/o;return{path:{"transform-origin":`${at.svgRound(u)} ${at.svgRound(c)}`,transform:`${this.rotationTransform} scale(${b} ${v}) translate(${at.svgRound(s)} ${at.svgRound(a)}) scale(${d} ${m}) translate(${at.svgRound(-s)} ${at.svgRound(-a)})`}}}getPathResizedSVGProperties([t,n,i,o]){let[s,a]=ee(this,In,pa).call(this),u=l(this,Zn),[c,f,h,d]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=o,Math.abs(h-s)<=at.PRECISION||Math.abs(d-a)<=at.PRECISION){let y=t+i/2-(c+h/2),_=n+o/2-(f+d/2);for(let{line:E,points:S}of l(this,qi))at._translate(E,y,_,E),at._translate(S,y,_,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let m=(i-2*s)/(h-2*s),b=(o-2*a)/(d-2*a),v=-m*(c+s)+t+s,w=-b*(f+a)+n+a;if(m!==1||b!==1||v!==0||w!==0)for(let{line:y,points:_}of l(this,qi))at._rescale(y,v,w,m,b,y),at._rescale(_,v,w,m,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){let[o,s]=i,a=l(this,Zn),u=t-a[0],c=n-a[1];if(l(this,Lo)===o&&l(this,Po)===s)for(let{line:f,points:h}of l(this,qi))at._translate(f,u,c,f),at._translate(h,u,c,h);else{let f=l(this,Lo)/o,h=l(this,Po)/s;k(this,Lo,o),k(this,Po,s);for(let{line:d,points:m}of l(this,qi))at._rescale(d,u,c,f,h,d),at._rescale(m,u,c,f,h,m);a[2]*=f,a[3]*=h}return a[0]=t,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(n)}`}}}get defaultSVGProperties(){let t=l(this,Zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Zn=new WeakMap,a0=new WeakMap,l0=new WeakMap,qi=new WeakMap,Lo=new WeakMap,Po=new WeakMap,up=new WeakMap,cp=new WeakMap,Ef=new WeakMap,In=new WeakSet,pa=function(t=l(this,Ef)){let n=l(this,l0)+t/2*l(this,up);return l(this,cp)%180===0?[n/l(this,Lo),n/l(this,Po)]:[n/l(this,Po),n/l(this,Lo)]},l3=function(){let[t,n,i,o]=l(this,Zn),[s,a]=ee(this,In,pa).call(this,0);return[t+s,n+a,i-2*s,o-2*a]},u3=function(){let t=k(this,Zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:o}of l(this,qi)){if(o.length<=12){for(let u=4,c=o.length;u<c;u+=6)it.pointBoundingBox(o[u],o[u+1],t);continue}let s=o[4],a=o[5];for(let u=6,c=o.length;u<c;u+=6){let[f,h,d,m,b,v]=o.subarray(u,u+6);it.bezierBoundingBox(s,a,f,h,d,m,b,v,t),s=b,a=v}}let[n,i]=ee(this,In,pa).call(this);t[0]=Wn(t[0]-n,0,1),t[1]=Wn(t[1]-i,0,1),t[2]=Wn(t[2]+n,0,1),t[3]=Wn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},c3=function(t){let[n,i]=ee(this,In,pa).call(this);k(this,Ef,t);let[o,s]=ee(this,In,pa).call(this),[a,u]=[o-n,s-i],c=l(this,Zn);return c[0]-=a,c[1]-=u,c[2]+=2*a,c[3]+=2*u,c};$v=class r extends Uv{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:mr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Wh=class Wh extends jv{constructor(t){super({...t,name:"inkEditor"});q(this,a_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new $v(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return wt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,o,s){return new oT(t,n,i,o,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,o,s,a){return kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=null;if(t instanceof mm){let{data:{inkLists:a,rect:u,rotation:c,id:f,color:h,opacity:d,borderStyle:{rawWidth:m},popupRef:b,richText:v,contentsObj:w,creationDate:y,modificationDate:_},parent:{page:{pageNumber:E}}}=t;o=t={annotationType:vt.INK,color:Array.from(h),thickness:m,opacity:d,paths:{points:a},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:c,annotationElementId:f,id:f,deleted:!1,popupRef:b,richText:v,comment:w?.str||null,creationDate:y,modificationDate:_}}let s=await super.deserialize(t,n,i);return s._initialData=o,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Wh.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":s,"stroke-width":a}}=this,u=Object.assign(super.serialize(t),{color:mr._colorManager.convert(o),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!ee(this,a_,f3).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};a_=new WeakSet,f3=function(t){let{color:n,thickness:i,opacity:o,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,u)=>a!==n[u])||t.thickness!==i||t.opacity!==o||t.pageIndex!==s},Ke(Wh,"_type","ink"),Ke(Wh,"_editorType",vt.INK),Ke(Wh,"_defaultDrawingOptions",null);aT=Wh,wm=class extends kf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}},Tw=8,Lg=3,As=class{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},o,s,a,u){let c=new OffscreenCanvas(1,1),f=c.getContext("2d",{alpha:!1}),h=200,d=f.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:b,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:y,fontBoundingBoxDescent:_,width:E}=f.measureText(e),S=1.5,A=Math.ceil(Math.max(Math.abs(m)+Math.abs(b)||0,E)*S),F=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||h,Math.abs(y)+Math.abs(_)||h)*S);c=new OffscreenCanvas(A,F),f=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=d,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,A,F),f.fillStyle="black",f.fillText(e,A*(S-1)/2,F*(3-S)/2);let I=ee(this,Vt,cT).call(this,f.getImageData(0,0,A,F).data),X=ee(this,Vt,m3).call(this,I),Z=ee(this,Vt,fT).call(this,X),H=ee(this,Vt,uT).call(this,I,A,F,Z);return this.processDrawnLines({lines:{curves:H,width:A,height:F},pageWidth:o,pageHeight:s,rotation:a,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,o){let[s,a,u]=ee(this,Vt,y3).call(this,e),[c,f]=ee(this,Vt,g3).call(this,s,a,u,Math.hypot(a,u)*l(this,Af).sigmaSFactor,l(this,Af).sigmaR,l(this,Af).kernelSize),h=ee(this,Vt,fT).call(this,f),d=ee(this,Vt,uT).call(this,c,a,u,h);return this.processDrawnLines({lines:{curves:d,width:a,height:u},pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:s,areContours:a}){i%180!==0&&([t,n]=[n,t]);let{curves:u,width:c,height:f}=e,h=e.thickness??0,d=[],m=Math.min(t/c,n/f),b=m/t,v=m/n,w=[];for(let{points:_}of u){let E=s?ee(this,Vt,p3).call(this,_):_;if(!E)continue;w.push(E);let S=E.length,A=new Float32Array(S),F=new Float32Array(3*(S===2?2:S-2));if(d.push({line:F,points:A}),S===2){A[0]=E[0]*b,A[1]=E[1]*v,F.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[I,X,Z,H]=E;I*=b,X*=v,Z*=b,H*=v,A.set([I,X,Z,H],0),F.set([NaN,NaN,NaN,NaN,I,X],0);for(let ne=4;ne<S;ne+=2){let L=A[ne]=E[ne]*b,$=A[ne+1]=E[ne+1]*v;F.set(at.createBezierPoints(I,X,Z,H,L,$),(ne-2)*3),[I,X,Z,H]=[Z,H,L,$]}}if(d.length===0)return null;let y=a?new wm:new kf;return y.build(d,t,n,1,i,a?0:h,o),{outline:y,newCurves:w,areContours:a,thickness:h,width:c,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:o}){let s=1/0,a=-1/0,u=0;for(let E of e){u+=E.length;for(let S=2,A=E.length;S<A;S++){let F=E[S]-E[S-2];s=Math.min(s,F),a=Math.max(a,F)}}let c;s>=-128&&a<=127?c=Int8Array:s>=-32768&&a<=32767?c=Int16Array:c=Int32Array;let f=e.length,h=Tw+Lg*f,d=new Uint32Array(h),m=0;d[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*c.BYTES_PER_ELEMENT,d[m++]=0,d[m++]=i,d[m++]=o,d[m++]=t?0:1,d[m++]=Math.max(0,Math.floor(n??0)),d[m++]=f,d[m++]=c.BYTES_PER_ELEMENT;for(let E of e)d[m++]=E.length-2,d[m++]=E[0],d[m++]=E[1];let b=new CompressionStream("deflate-raw"),v=b.writable.getWriter();await v.ready,v.write(d);let w=c.prototype.constructor;for(let E of e){let S=new w(E.length-2);for(let A=2,F=E.length;A<F;A++)S[A-2]=E[A]-E[A-2];v.write(S)}v.close();let y=await new Response(b.readable).arrayBuffer(),_=new Uint8Array(y);return SB(_)}static async decompressSignature(e){try{let t=nV(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let s=null,a=0;for await(let E of n)s||(s=new Uint8Array(new Uint32Array(E.buffer,0,4)[0])),s.set(E,a),a+=E.length;let u=new Uint32Array(s.buffer,0,s.length>>2),c=u[1];if(c!==0)throw new Error(`Invalid version: ${c}`);let f=u[2],h=u[3],d=u[4]===0,m=u[5],b=u[6],v=u[7],w=[],y=(Tw+Lg*b)*Uint32Array.BYTES_PER_ELEMENT,_;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,y);break}a=0;for(let E=0;E<b;E++){let S=u[Lg*E+Tw],A=new Float32Array(S+2);w.push(A);for(let F=0;F<Lg-1;F++)A[F]=u[Lg*E+Tw+F+1];for(let F=0;F<S;F++)A[F+2]=A[F]+_[a++]}return{areContours:d,thickness:m,outlines:w,width:f,height:h}}catch(t){return _t(`decompressSignature: ${t}`),null}}};Af=new WeakMap,Vt=new WeakSet,lT=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Hs=new WeakMap,h3=function(e,t,n,i,o,s,a){let u=ee(this,Vt,lT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(-c+u-a+16)%8,h=l(this,Hs)[2*f],d=l(this,Hs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},d3=function(e,t,n,i,o,s,a){let u=ee(this,Vt,lT).call(this,n,i,o,s);for(let c=0;c<8;c++){let f=(c+u+a+16)%8,h=l(this,Hs)[2*f],d=l(this,Hs)[2*f+1];if(e[(n+h)*t+(i+d)]!==0)return f}return-1},uT=function(e,t,n,i){let o=e.length,s=new Int32Array(o);for(let f=0;f<o;f++)s[f]=e[f]<=i?1:0;for(let f=1;f<n-1;f++)s[f*t]=s[f*t+t-1]=0;for(let f=0;f<t;f++)s[f]=s[t*n-1-f]=0;let a=1,u,c=[];for(let f=1;f<n-1;f++){u=1;for(let h=1;h<t-1;h++){let d=f*t+h,m=s[d];if(m===0)continue;let b=f,v=h;if(m===1&&s[d-1]===0)a+=1,v-=1;else if(m>=1&&s[d+1]===0)a+=1,v+=1,m>1&&(u=m);else{m!==1&&(u=Math.abs(m));continue}let w=[h,f],y=v===h+1,_={isHole:y,points:w,id:a,parent:0};c.push(_);let E;for(let ne of c)if(ne.id===u){E=ne;break}E?E.isHole?_.parent=y?E.parent:u:_.parent=y?u:E.parent:_.parent=y?u:0;let S=ee(this,Vt,h3).call(this,s,t,f,h,b,v,0);if(S===-1){s[d]=-a,s[d]!==1&&(u=Math.abs(s[d]));continue}let A=l(this,Hs)[2*S],F=l(this,Hs)[2*S+1],I=f+A,X=h+F;b=I,v=X;let Z=f,H=h;for(;;){let ne=ee(this,Vt,d3).call(this,s,t,Z,H,b,v,1);A=l(this,Hs)[2*ne],F=l(this,Hs)[2*ne+1];let L=Z+A,$=H+F;w.push($,L);let K=Z*t+H;if(s[K+1]===0?s[K]=-a:s[K]===1&&(s[K]=a),L===f&&$===h&&Z===I&&H===X){s[d]!==1&&(u=Math.abs(s[d]));break}else b=Z,v=H,Z=L,H=$}}}return c},rv=function(e,t,n,i){if(n-t<=4){for(let I=t;I<n-2;I+=2)i.push(e[I],e[I+1]);return}let o=e[t],s=e[t+1],a=e[n-4]-o,u=e[n-3]-s,c=Math.hypot(a,u),f=a/c,h=u/c,d=f*s-h*o,m=u/a,b=1/c,v=Math.atan(m),w=Math.cos(v),y=Math.sin(v),_=b*(Math.abs(w)+Math.abs(y)),E=b*(1-_+_**2),S=Math.max(Math.atan(Math.abs(y+w)*E),Math.atan(Math.abs(y-w)*E)),A=0,F=t;for(let I=t+2;I<n-2;I+=2){let X=Math.abs(d-f*e[I+1]+h*e[I]);X>A&&(F=I,A=X)}A>(c*S)**2?(ee(this,Vt,rv).call(this,e,t,F+2,i),ee(this,Vt,rv).call(this,e,F,n,i)):i.push(o,s)},p3=function(e){let t=[],n=e.length;return ee(this,Vt,rv).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},g3=function(e,t,n,i,o,s){let a=new Float32Array(s**2),u=-2*i**2,c=s>>1;for(let v=0;v<s;v++){let w=(v-c)**2;for(let y=0;y<s;y++)a[v*s+y]=Math.exp((w+(y-c)**2)/u)}let f=new Float32Array(256),h=-2*o**2;for(let v=0;v<256;v++)f[v]=Math.exp(v**2/h);let d=e.length,m=new Uint8Array(d),b=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){let y=v*t+w,_=e[y],E=0,S=0;for(let F=0;F<s;F++){let I=v+F-c;if(!(I<0||I>=n))for(let X=0;X<s;X++){let Z=w+X-c;if(Z<0||Z>=t)continue;let H=e[I*t+Z],ne=a[F*s+X]*f[Math.abs(H-_)];E+=H*ne,S+=ne}}let A=m[y]=Math.round(E/S);b[A]++}return[m,b]},m3=function(e){let t=new Uint32Array(256);for(let n of e)t[n]++;return t},cT=function(e){let t=e.length,n=new Uint8ClampedArray(t>>2),i=-1/0,o=1/0;for(let a=0,u=n.length;a<u;a++){let c=n[a]=e[a<<2];i=Math.max(i,c),o=Math.min(o,c)}let s=255/(i-o);for(let a=0,u=n.length;a<u;a++)n[a]=(n[a]-o)*s;return n},fT=function(e){let t,n=-1/0,i=-1/0,o=e.findIndex(u=>u!==0),s=o,a=o;for(t=o;t<256;t++){let u=e[t];u>n&&(t-s>i&&(i=t-s,a=t-1),n=u,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},y3=function(e){let t=e,{width:n,height:i}=e,{maxDim:o}=l(this,Af),s=n,a=i;if(n>o||i>o){let d=n,m=i,b=Math.log2(Math.max(n,i)/o),v=Math.floor(b);b=b===v?v-1:v;for(let y=0;y<b;y++){s=Math.ceil(d/2),a=Math.ceil(m/2);let _=new OffscreenCanvas(s,a);_.getContext("2d").drawImage(e,0,0,d,m,0,0,s,a),d=s,m=a,e!==t&&e.close(),e=_.transferToImageBitmap()}let w=Math.min(o/s,o/a);s=Math.round(s*w),a=Math.round(a*w)}let c=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,s,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,s,a);let f=c.getImageData(0,0,s,a).data;return[ee(this,Vt,cT).call(this,f),s,a]},q(As,Vt),q(As,Af,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),q(As,Hs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));hT=class r extends Uv{constructor(){super(),super.updateProperties({fill:mr._defaultLineColor,"stroke-width":0})}clone(){let e=new r;return e.updateAll(this),e}},dT=class r extends $v{constructor(e){super(e),super.updateProperties({stroke:mr._defaultLineColor,"stroke-width":1})}clone(){let e=new r(this._viewParameters);return e.updateAll(this),e}},Ti=class Ti extends jv{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});q(this,cu,!1);q(this,Mo,null);q(this,fu,null);q(this,xf,null);this._willKeepAspectRatio=!0,k(this,fu,t.signatureData||null),k(this,Mo,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){mr.initialize(t,n),this._defaultDrawingOptions=new hT,this._defaultDrawnSignatureOptions=new dT(n.viewParameters)}static getDefaultDrawingOptions(t){let n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Mo)}}static computeTelemetryFinalData(t){let n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n,{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,fu)){let{lines:o,mustSmooth:s,areContours:a,description:u,uuid:c,heightInPage:f}=l(this,fu),{rawDims:{pageWidth:h,pageHeight:d},rotation:m}=this.parent.viewport,b=As.processDrawnLines({lines:o,pageWidth:h,pageHeight:d,rotation:m,innerMargin:Ti._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(b,f,u,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Mo)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){k(this,xf,t),this.addEditToolbar()}getUuid(){return l(this,xf)}get description(){return l(this,Mo)}set description(t){k(this,Mo,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:n,thickness:i,width:o,height:s}=l(this,fu),a=Math.max(o,s),u=As.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:o,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,o){let{x:s,y:a}=this,{outline:u}=k(this,fu,t);k(this,cu,u instanceof wm),this.description=i;let c;l(this,cu)?c=Ti.getDefaultDrawingOptions():(c=Ti._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:c});let[,f]=this.pageDimensions,h=n/f;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return As.process(t,n,i,o,Ti._INNER_MARGIN)}getFromText(t,n){let{rawDims:{pageWidth:i,pageHeight:o},rotation:s}=this.parent.viewport;return As.extractContoursFromText(t,n,i,o,s,Ti._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return As.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:o,innerMargin:Ti._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ti.getDefaultDrawingOptions():(this._drawingOptions=Ti._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,cu),color:[0,0,0],thickness:l(this,cu)?0:o});return this.addComment(s),t?(s.paths={lines:n,points:i},s.uuid=l(this,xf),s.isCopy=!0):s.lines=n,l(this,Mo)&&(s.accessibilityData={type:"Figure",alt:l(this,Mo)}),s}static deserializeDraw(t,n,i,o,s,a){return a.areContours?wm.deserialize(t,n,i,o,s,a):kf.deserialize(t,n,i,o,s,a)}static async deserialize(t,n,i){let o=await super.deserialize(t,n,i);return k(o,cu,t.areContours),o.description=t.accessibilityData?.alt||"",k(o,xf,t.uuid),o}};cu=new WeakMap,Mo=new WeakMap,fu=new WeakMap,xf=new WeakMap,Ke(Ti,"_type","signature"),Ke(Ti,"_editorType",vt.SIGNATURE),Ke(Ti,"_defaultDrawingOptions",null);pT=Ti,Qg=class extends mr{constructor(t){super({...t,name:"stampEditor"});q(this,$t);q(this,Ar,null);q(this,vn,null);q(this,hu,null);q(this,Ga,null);q(this,du,null);q(this,fp,"");q(this,Va,null);q(this,Sf,!1);q(this,Bo,null);q(this,Hi,!1);q(this,hp,!1);k(this,Ga,t.bitmapUrl),k(this,du,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){mr.initialize(t,n)}static isHandlingMimeForPasting(t){return cv.includes(t)}static paste(t,n){n.pasteEditor({mode:vt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");let{data:o,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:o,width:s,height:a,channels:o.length/(s*a)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");let c=u.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){l(this,vn)&&(k(this,Ar,null),this._uiManager.imageManager.deleteId(l(this,vn)),l(this,Va)?.remove(),k(this,Va,null),l(this,Bo)&&(clearTimeout(l(this,Bo)),k(this,Bo,null))),super.remove()}rebuild(){if(!this.parent){l(this,vn)&&ee(this,$t,nv).call(this);return}super.rebuild(),this.div!==null&&(l(this,vn)&&l(this,Va)===null&&ee(this,$t,nv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,hu)||l(this,Ar)||l(this,Ga)||l(this,du)||l(this,vn)||l(this,Sf))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Sf)||(l(this,Ar)?ee(this,$t,iv).call(this):ee(this,$t,nv).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){let{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(k(this,vn,i),o&&k(this,Ar,o),k(this,Sf,!1),ee(this,$t,iv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Bo)!==null&&clearTimeout(l(this,Bo)),k(this,Bo,setTimeout(()=>{k(this,Bo,null),ee(this,$t,gT).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);let{width:o,height:s}=l(this,Ar),a=new Fo,u=l(this,Ar),c=o,f=s,h=null;if(n){if(o>n||s>n){let I=Math.min(n/o,n/s);c=Math.floor(o*I),f=Math.floor(s*I)}h=document.createElement("canvas");let m=h.width=Math.ceil(c*a.sx),b=h.height=Math.ceil(f*a.sy);l(this,Hi)||(u=ee(this,$t,sv).call(this,m,b));let v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":XA.isDarkMode&&(w="#8f8f9d",y="#42414d");let _=15,E=_*a.sx,S=_*a.sy,A=new OffscreenCanvas(E*2,S*2),F=A.getContext("2d");F.fillStyle=w,F.fillRect(0,0,E*2,S*2),F.fillStyle=y,F.fillRect(0,0,E,S),F.fillRect(E,S,E,S),v.fillStyle=v.createPattern(A,"repeat"),v.fillRect(0,0,m,b),v.drawImage(u,0,0,u.width,u.height,0,0,m,b)}let d=null;if(i){let m,b;if(a.symmetric&&u.width<t&&u.height<t)m=u.width,b=u.height;else if(u=l(this,Ar),o>t||s>t){let y=Math.min(t/o,t/s);m=Math.floor(o*y),b=Math.floor(s*y),l(this,Hi)||(u=ee(this,$t,sv).call(this,m,b))}let w=new OffscreenCanvas(m,b).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,m,b),d={width:m,height:b,data:w.getImageData(0,0,m,b).data}}return{canvas:h,width:c,height:f,imageData:d}}static async deserialize(t,n,i){let o=null,s=!1;if(t instanceof Lv){let{data:{rect:w,rotation:y,id:_,structParent:E,popupRef:S,richText:A,contentsObj:F,creationDate:I,modificationDate:X},container:Z,parent:{page:{pageNumber:H}},canvas:ne}=t,L,$;ne?(delete t.canvas,{id:L,bitmap:$}=i.imageManager.getFromCanvas(Z.id,ne),ne.remove()):(s=!0,t._hasNoCanvas=!0);let K=(await n._structTree.getAriaAttributes(`${Bh}${_}`))?.get("aria-label")||"";o=t={annotationType:vt.STAMP,bitmapId:L,bitmap:$,pageIndex:H-1,rect:w.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:E,popupRef:S,richText:A,comment:F?.str||null,creationDate:I,modificationDate:X}}let a=await super.deserialize(t,n,i),{rect:u,bitmap:c,bitmapUrl:f,bitmapId:h,isSvg:d,accessibilityData:m}=t;s?(i.addMissingCanvas(t.id,a),k(a,Sf,!0)):h&&i.imageManager.isValidId(h)?(k(a,vn,h),c&&k(a,Ar,c)):k(a,Ga,f),k(a,Hi,d);let[b,v]=a.pageDimensions;return a.width=(u[2]-u[0])/b,a.height=(u[3]-u[1])/v,m&&(a.altTextData=m),a._initialData=o,t.comment&&a.setCommentData(t),k(a,hp,!!o),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(t),{bitmapId:l(this,vn),isSvg:l(this,Hi)});if(this.addComment(i),t)return i.bitmapUrl=ee(this,$t,ov).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:o,altText:s}=this.serializeAltText(!1);if(!o&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let u=ee(this,$t,b3).call(this,i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);let a=l(this,Hi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,vn)))n.stamps.set(l(this,vn),{area:a,serialized:i}),i.bitmap=ee(this,$t,ov).call(this,!1);else if(l(this,Hi)){let u=n.stamps.get(l(this,vn));a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=ee(this,$t,ov).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}};Ar=new WeakMap,vn=new WeakMap,hu=new WeakMap,Ga=new WeakMap,du=new WeakMap,fp=new WeakMap,Va=new WeakMap,Sf=new WeakMap,Bo=new WeakMap,Hi=new WeakMap,hp=new WeakMap,$t=new WeakSet,em=function(t,n=!1){if(!t){this.remove();return}k(this,Ar,t.bitmap),n||(k(this,vn,t.id),k(this,Hi,t.isSvg)),t.file&&k(this,fp,t.file.name),ee(this,$t,iv).call(this)},tm=function(){if(k(this,hu,null),this._uiManager.enableWaiting(!1),!!l(this,Va)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ar)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},nv=function(){if(l(this,vn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,vn)).then(i=>ee(this,$t,em).call(this,i,!0)).finally(()=>ee(this,$t,tm).call(this));return}if(l(this,Ga)){let i=l(this,Ga);k(this,Ga,null),this._uiManager.enableWaiting(!0),k(this,hu,this._uiManager.imageManager.getFromUrl(i).then(o=>ee(this,$t,em).call(this,o)).finally(()=>ee(this,$t,tm).call(this)));return}if(l(this,du)){let i=l(this,du);k(this,du,null),this._uiManager.enableWaiting(!0),k(this,hu,this._uiManager.imageManager.getFromFile(i).then(o=>ee(this,$t,em).call(this,o)).finally(()=>ee(this,$t,tm).call(this)));return}let t=document.createElement("input");t.type="file",t.accept=cv.join(",");let n=this._uiManager._signal;k(this,hu,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ee(this,$t,em).call(this,o)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>ee(this,$t,tm).call(this))),t.click()},iv=function(){let{div:t}=this,{width:n,height:i}=l(this,Ar),[o,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*o,i=this.height*s;else if(n>a*o||i>a*s){let c=Math.min(a*o/n,a*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);let u=k(this,Va,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/o,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),ee(this,$t,gT).call(this),l(this,hp)||(this.parent.addUndoableEditor(this),k(this,hp,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fp)&&this.div.setAttribute("aria-description",l(this,fp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},sv=function(t,n){let{width:i,height:o}=l(this,Ar),s=i,a=o,u=l(this,Ar);for(;s>2*t||a>2*n;){let c=s,f=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(u,0,0,c,f,0,0,s,a),u=h.transferToImageBitmap()}return u},gT=function(){let[t,n]=this.parentDimensions,{width:i,height:o}=this,s=new Fo,a=Math.ceil(i*t*s.sx),u=Math.ceil(o*n*s.sy),c=l(this,Va);if(!c||c.width===a&&c.height===u)return;c.width=a,c.height=u;let f=l(this,Hi)?l(this,Ar):ee(this,$t,sv).call(this,a,u),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(f,0,0,f.width,f.height,0,0,a,u)},ov=function(t){if(t){if(l(this,Hi)){let o=this._uiManager.imageManager.getSvgUrl(l(this,vn));if(o)return o}let n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Ar),n.getContext("2d").drawImage(l(this,Ar),0,0),n.toDataURL()}if(l(this,Hi)){let[n,i]=this.pageDimensions,o=Math.round(this.width*n*tl.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*tl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,s);return a.getContext("2d").drawImage(l(this,Ar),0,0,l(this,Ar).width,l(this,Ar).height,0,0,o,s),a.transferToImageBitmap()}return structuredClone(l(this,Ar))},b3=function(t){let{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=t.pageIndex===n,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&s,isSameAltText:s}},Ke(Qg,"_type","stamp"),Ke(Qg,"_editorType",vt.STAMP);Ps=class Ps{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:s,drawLayer:a,textLayer:u,viewport:c,l10n:f}){q(this,hr);q(this,Tf);q(this,dp,!1);q(this,pu,null);q(this,gu,null);q(this,Ya,null);q(this,wi,new Map);q(this,mu,!1);q(this,pp,!1);q(this,gp,!1);q(this,Gs,null);q(this,Xa,null);q(this,_n,null);q(this,Ka,null);q(this,yu,null);q(this,mp,-1);q(this,ft);let h=[...l(Ps,bu).values()];if(!Ps._initialized){Ps._initialized=!0;for(let d of h)d.initialize(f,e)}e.registerEditorTypes(h),k(this,ft,e),this.pageIndex=t,this.div=n,k(this,Tf,o),k(this,pu,s),this.viewport=c,k(this,_n,u),this.drawLayer=a,this._structTree=i,l(this,ft).addLayer(this)}get isEmpty(){return l(this,wi).size===0}get isInvisible(){return this.isEmpty&&l(this,ft).getMode()===vt.NONE}updateToolbar(e){l(this,ft).updateToolbar(e)}updateMode(e=l(this,ft).getMode()){switch(ee(this,hr,av).call(this),e){case vt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case vt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case vt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===vt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(let n of l(Ps,bu).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===l(this,_n)?.div}setEditingState(e){l(this,ft).setEditingState(e)}addCommands(e){l(this,ft).addCommands(e)}cleanUndoStack(e){l(this,ft).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){l(this,pu)?.togglePointerEvents(e)}async enable(){k(this,gp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),l(this,yu)?.abort(),k(this,yu,null);let e=new Set;for(let n of l(this,hr,mT))n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,ft).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));let t=l(this,pu);if(t)for(let n of t.getEditableAnnotations()){if(n.hide(),l(this,ft).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}k(this,gp,!1),l(this,ft)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(k(this,pp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,_n)&&!l(this,yu)){k(this,yu,new AbortController);let i=l(this,ft).combinedSignal(l(this,yu));l(this,_n).div.addEventListener("pointerdown",o=>{let{clientX:a,clientY:u,timeStamp:c}=o,f=l(this,mp);if(c-f>500){k(this,mp,c);return}k(this,mp,-1);let{classList:h}=this.div;h.toggle("getElements",!0);let d=document.elementsFromPoint(a,u);if(h.toggle("getElements",!1),!this.div.contains(d[0]))return;let m,b=new RegExp(`^${sm}[0-9]+$`);for(let w of d)if(b.test(w.id)){m=w.id;break}if(!m)return;let v=l(this,wi).get(m);v?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),v.dblclick(o))},{signal:i,capture:!0})}let e=l(this,pu),t=[];if(e){let i=new Map,o=new Map;for(let a of l(this,hr,mT)){if(a.disableEditing(),!a.annotationElementId){t.push(a);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else o.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}let s=e.getEditableAnnotations();for(let a of s){let{id:u}=a.data;if(l(this,ft).isDeletedAnnotationElement(u)){a.updateEdited({deleted:!0});continue}let c=o.get(u);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=i.get(u),c&&(l(this,ft).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}ee(this,hr,av).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let i of l(Ps,bu).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),k(this,pp,!1)}getEditableAnnotation(e){return l(this,pu)?.getEditableAnnotation(e)||null}setActiveEditor(e){l(this,ft).getActive()!==e&&l(this,ft).setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,l(this,_n)?.div&&!l(this,Ka)){k(this,Ka,new AbortController);let e=l(this,ft).combinedSignal(l(this,Ka));l(this,_n).div.addEventListener("pointerdown",ee(this,hr,w3).bind(this),{signal:e}),l(this,_n).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,l(this,_n)?.div&&l(this,Ka)&&(l(this,Ka).abort(),k(this,Ka,null),l(this,_n).div.classList.remove("highlighting"))}enableClick(){if(l(this,gu))return;k(this,gu,new AbortController);let e=l(this,ft).combinedSignal(l(this,gu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){l(this,gu)?.abort(),k(this,gu,null)}attach(e){l(this,wi).set(e.id,e);let{annotationElementId:t}=e;t&&l(this,ft).isDeletedAnnotationElement(t)&&l(this,ft).removeDeletedAnnotationElement(e)}detach(e){l(this,wi).delete(e.id),l(this,Tf)?.removePointerInTextLayer(e.contentDiv),!l(this,pp)&&e.annotationElementId&&l(this,ft).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ft).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ft).addDeletedAnnotationElement(e),mr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ft).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,gp)),l(this,ft).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:t}=document;e.div.contains(t)&&!l(this,Ya)&&(e._focusEventsAllowed=!1,k(this,Ya,setTimeout(()=>{k(this,Ya,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ft)._signal}),t.focus())},0))),e._structTreeParentId=l(this,Tf)?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(let t of l(this,wi).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ft).getId()}combinedSignal(e){return l(this,ft).combinedSignal(e)}canCreateNewEmptyEditor(){return l(this,hr,go)?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ft).updateMode(e.mode);let{offsetX:n,offsetY:i}=ee(this,hr,bT).call(this),o=this.getNextId(),s=ee(this,hr,yT).call(this,{parent:this,id:o,x:n,y:i,uiManager:l(this,ft),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){return await l(Ps,bu).get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,l(this,ft))||null}createAndAddNewEditor(e,t,n={}){let i=this.getNextId(),o=ee(this,hr,yT).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:l(this,ft),isCentered:t,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(ee(this,hr,bT).call(this),!0,e)}setSelected(e){l(this,ft).setSelected(e)}toggleSelected(e){l(this,ft).toggleSelected(e)}unselect(e){l(this,ft).unselect(e)}pointerup(e){let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,mu)||(k(this,mu,!1),l(this,hr,go)?.isDrawer&&l(this,hr,go).supportMultipleDrawings))return;if(!l(this,dp)){k(this,dp,!0);return}let n=l(this,ft).getMode();if(n===vt.STAMP||n===vt.SIGNATURE){l(this,ft).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(l(this,ft).getMode()===vt.HIGHLIGHT&&this.enableTextSelection(),l(this,mu)){k(this,mu,!1);return}let{isMac:t}=Ur.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(k(this,mu,!0),l(this,hr,go)?.isDrawer){this.startDrawingSession(e);return}let n=l(this,ft).getActive();k(this,dp,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Gs)){l(this,hr,go).startDrawing(this,l(this,ft),!1,e);return}l(this,ft).setCurrentDrawingSession(this),k(this,Gs,new AbortController);let t=l(this,ft).combinedSignal(l(this,Gs));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(k(this,Xa,null),this.commitOrRemove())},{signal:t}),l(this,hr,go).startDrawing(this,l(this,ft),!1,e)}pause(e){if(e){let{activeElement:t}=document;this.div.contains(t)&&k(this,Xa,t);return}l(this,Xa)&&setTimeout(()=>{l(this,Xa)?.focus(),k(this,Xa,null)},0)}endDrawingSession(e=!1){return l(this,Gs)?(l(this,ft).setCurrentDrawingSession(null),l(this,Gs).abort(),k(this,Gs,null),k(this,Xa,null),l(this,hr,go).endDrawing(e)):null}findNewParent(e,t,n){let i=l(this,ft).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return l(this,Gs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Gs)&&l(this,hr,go).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),l(this,ft).getActive()?.parent===this&&(l(this,ft).commitOrRemove(),l(this,ft).setActiveEditor(null)),l(this,Ya)&&(clearTimeout(l(this,Ya)),k(this,Ya,null));for(let e of l(this,wi).values())l(this,Tf)?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,l(this,wi).clear(),l(this,ft).removeLayer(this)}render({viewport:e}){this.viewport=e,wu(this.div,e);for(let t of l(this,ft).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ft).commitOrRemove(),ee(this,hr,av).call(this);let t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,wu(this.div,{rotation:n}),t!==n)for(let i of l(this,wi).values())i.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ft).viewParameters.realScale}};Tf=new WeakMap,dp=new WeakMap,pu=new WeakMap,gu=new WeakMap,Ya=new WeakMap,wi=new WeakMap,mu=new WeakMap,pp=new WeakMap,gp=new WeakMap,Gs=new WeakMap,Xa=new WeakMap,_n=new WeakMap,Ka=new WeakMap,yu=new WeakMap,mp=new WeakMap,ft=new WeakMap,bu=new WeakMap,hr=new WeakSet,mT=function(){return l(this,wi).size!==0?l(this,wi).values():l(this,ft).getEditors(this.pageIndex)},w3=function(e){l(this,ft).unselectAll();let{target:t}=e;if(t===l(this,_n).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,_n).div.contains(t)){let{isMac:n}=Ur.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,ft).showAllEditors("highlight",!0,!0),l(this,_n).div.classList.add("free"),this.toggleDrawing(),Fv.startHighlighting(this,l(this,ft).direction==="ltr",{target:l(this,_n).div,x:e.x,y:e.y}),l(this,_n).div.addEventListener("pointerup",()=>{l(this,_n).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ft)._signal}),e.preventDefault()}},go=function(){return l(Ps,bu).get(l(this,ft).getMode())},yT=function(e){let t=l(this,hr,go);return t?new t.prototype.constructor(e):null},bT=function(){let{x:e,y:t,width:n,height:i}=this.boundingClientRect,o=Math.max(0,e),s=Math.max(0,t),a=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+i),c=(o+a)/2-e,f=(s+u)/2-t,[h,d]=this.viewport.rotation%180===0?[c,f]:[f,c];return{offsetX:h,offsetY:d}},av=function(){for(let e of l(this,wi).values())e.isEmpty()&&e.remove()},Ke(Ps,"_initialized",!1),q(Ps,bu,new Map([KS,aT,Qg,Fv,pT].map(e=>[e._editorType,e])));zv=Ps,an=class an{constructor({pageIndex:e}){q(this,Uo);q(this,Vs,null);q(this,Jn,new Map);q(this,Cf,new Map);this.pageIndex=e}setParent(e){if(!l(this,Vs)){k(this,Vs,e);return}if(l(this,Vs)!==e){if(l(this,Jn).size>0)for(let t of l(this,Jn).values())t.remove(),e.append(t);k(this,Vs,e)}}static get _svgFactory(){return wt(this,"_svgFactory",new Of)}draw(e,t=!1,n=!1){let i=tn(an,u0)._++,o=ee(this,Uo,wT).call(this),s=an._svgFactory.createElement("defs");o.append(s);let a=an._svgFactory.createElement("path");s.append(a);let u=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",u),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Cf).set(i,a);let c=n?ee(this,Uo,_3).call(this,s,u):null,f=an._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(o,e),l(this,Jn).set(i,o),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){let n=tn(an,u0)._++,i=ee(this,Uo,wT).call(this),o=an._svgFactory.createElement("defs");i.append(o);let s=an._svgFactory.createElement("path");o.append(s);let a=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",a),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){let h=an._svgFactory.createElement("mask");o.append(h),u=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",u),h.setAttribute("maskUnits","objectBoundingBox");let d=an._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let m=an._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}let c=an._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),u&&c.setAttribute("mask",`url(#${u})`);let f=c.cloneNode();return i.append(f),c.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),l(this,Jn).set(n,i),n}finalizeDraw(e,t){l(this,Cf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;let{root:n,bbox:i,rootClass:o,path:s}=t,a=typeof e=="number"?l(this,Jn).get(e):e;if(a){if(n&&ee(this,Uo,vT).call(this,a,n),i&&ee(u=an,l_,v3).call(u,a,i),o){let{classList:c}=a;for(let[f,h]of Object.entries(o))c.toggle(f,h)}if(s){let f=a.firstElementChild.firstElementChild;ee(this,Uo,vT).call(this,f,s)}}}updateParent(e,t){if(t===this)return;let n=l(this,Jn).get(e);n&&(l(t,Vs).append(n),l(this,Jn).delete(e),l(t,Jn).set(e,n))}remove(e){l(this,Cf).delete(e),l(this,Vs)!==null&&(l(this,Jn).get(e).remove(),l(this,Jn).delete(e))}destroy(){k(this,Vs,null);for(let e of l(this,Jn).values())e.remove();l(this,Jn).clear(),l(this,Cf).clear()}};Vs=new WeakMap,Jn=new WeakMap,Cf=new WeakMap,u0=new WeakMap,l_=new WeakSet,v3=function(e,[t,n,i,o]){let{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*o}%`},Uo=new WeakSet,wT=function(){let e=an._svgFactory.create(1,1,!0);return l(this,Vs).append(e),e.setAttribute("aria-hidden",!0),e},_3=function(e,t){let n=an._svgFactory.createElement("clipPath");e.append(n);let i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");let o=an._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i},vT=function(e,t){for(let[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},q(an,l_),q(an,u0,0);Wv=an;globalThis._pdfjsTestingUtils={HighlightOutliner:ym};globalThis.pdfjsLib={AbortException:Xs,AnnotationEditorLayer:zv,AnnotationEditorParamsType:Mt,AnnotationEditorType:vt,AnnotationEditorUIManager:vu,AnnotationLayer:Pv,AnnotationMode:Za,AnnotationType:qr,applyOpacity:DB,build:DF,ColorPicker:dm,createValidAbsoluteUrl:_T,CSSConstants:fv,DOMSVGFactory:Of,DrawLayer:Wv,FeatureTest:Ur,fetchData:Ep,findContrastColor:IB,getDocument:SF,getFilenameFromUrl:TB,getPdfFilenameFromUrl:CB,getRGB:Ap,getUuid:AT,getXfaPageViewport:RB,GlobalWorkerOptions:Es,ImageKind:rm,InvalidPDFException:bp,isDataScheme:h0,isPdfFile:f_,isValidExplicitDest:cF,MathClamp:Wn,noContextMenu:Ki,normalizeUnicode:xB,OPS:yp,OutputScale:Fo,PasswordResponses:EB,PDFDataRangeTransport:hm,PDFDateString:Rf,PDFWorker:_p,PermissionFlag:_B,PixelsPerInch:tl,RenderingCancelledException:wp,renderRichText:xT,ResponseException:Df,setLayerDimensions:wu,shadow:wt,SignatureExtractor:As,stopEvent:Cr,SupportedImageMimeTypes:cv,TextLayer:vp,TouchManager:um,updateUrlHash:ET,Util:it,VerbosityLevel:c0,version:RF,XfaLayer:am}});var UV={};jo(UV,{OfficeParser:()=>Pf,default:()=>BV,parseOffice:()=>MV});Ce();De();Re();Ce();De();Re();var P3=es(yN());Gp();Ce();De();Re();Ce();De();Re();Ce();De();Re();var fk=es(Ob()),Wt=r=>new fk.DOMParser().parseFromString(r,"text/xml"),Le=(r,e)=>Array.from(r.getElementsByTagName(e)),En=(r,e)=>{let t=[];if(!r.childNodes)return t;for(let n=0;n<r.childNodes.length;n++){let i=r.childNodes[n];i.nodeType===1&&i.tagName===e&&t.push(i)}return t},wl=r=>{let e=Wt(r),t={},n=Le(e,"cp:coreProperties")[0];if(n){let o=Le(n,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Le(n,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Le(n,"cp:lastModifiedBy")[0];a&&a.textContent&&(t.lastModifiedBy=a.textContent);let u=Le(n,"dcterms:created")[0];u&&u.textContent&&(t.created=new Date(u.textContent));let c=Le(n,"dcterms:modified")[0];return c&&c.textContent&&(t.modified=new Date(c.textContent)),t}let i=Le(e,"office:meta")[0];if(i){let o=Le(i,"dc:title")[0];o&&o.textContent&&(t.title=o.textContent);let s=Le(i,"dc:creator")[0];s&&s.textContent&&(t.author=s.textContent);let a=Le(i,"dc:description")[0];a&&a.textContent&&(t.description=a.textContent);let u=Le(i,"dc:subject")[0];u&&u.textContent&&(t.subject=u.textContent);let c=Le(i,"meta:creation-date")[0];c&&c.textContent&&(t.created=new Date(c.textContent));let f=Le(i,"dc:date")[0];f&&f.textContent&&(t.modified=new Date(f.textContent))}return t};var og=(r,e)=>{let t=r.localName===e||r.tagName===e?r:r.getElementsByTagName(e)[0];if(!t)return;let n=t.getElementsByTagName("c:rich"),i=t.getElementsByTagName("a:p"),o=n.length>0?Array.from(n):Array.from(i);if(o.length>0){let a="";for(let u of o){let c=u.getElementsByTagName("a:t");for(let f=0;f<c.length;f++)a+=(c[f].textContent||"")+" "}if(a.trim())return a.trim()}let s=t.getElementsByTagName("c:v")[0];if(s&&s.textContent)return s.textContent.trim()||void 0},G9=r=>{let e=r.toString("utf8"),n=Wt(e).documentElement,i=og(n,"c:title"),o,s,a=n.getElementsByTagName("c:catAx");a.length>0&&(o=og(a[0],"c:title"));let u=n.getElementsByTagName("c:valAx");u.length>0&&(s=og(u[0],"c:title"));let c=n.getElementsByTagName("c:ser"),f=[],h=[];for(let m=0;m<c.length;m++){let b=c[m],v=og(b,"c:tx"),w=[],y=b.getElementsByTagName("c:val")[0]||b.getElementsByTagName("c:yVal")[0];if(y){let A=y.getElementsByTagName("c:v");for(let F=0;F<A.length;F++){let I=A[F].textContent?.trim();I&&w.push(I)}}let _=[],E=b.getElementsByTagName("c:dLbl");for(let A=0;A<E.length;A++){let F=og(E[A],"c:tx");F&&_.push(F)}let S=b.getElementsByTagName("c:cat")[0]||b.getElementsByTagName("c:xVal")[0];if(S){let A=S.getElementsByTagName("c:v"),F=[];for(let I=0;I<A.length;I++){let X=A[I].textContent?.trim();X&&F.push(X)}F.length>0&&h.length===0&&h.push(...F)}f.push({name:v,values:w,pointLabels:_})}let d=[];for(let m of f)m.name&&d.push(m.name),d.push(...h),d.push(...m.values);return{title:i,xAxisTitle:o,yAxisTitle:s,dataSets:f,labels:h,rawTexts:d}},V9=r=>{let e=r.toString("utf8"),t=Wt(e),n=Le(t,"chart:chart")[0]||t.documentElement,i=Le(n,"chart:title")[0],o=i&&Le(i,"text:p")[0]?.textContent||void 0,s=Le(n,"table:table")[0],a=[],u=[],c=[];if(s){let m=[],b=En(s,"table:table-header-rows")[0];if(b&&m.push(...En(b,"table:table-row")),m.push(...En(s,"table:table-row")),m.length>0){let v=En(m[0],"table:table-cell");for(let w=1;w<v.length;w++){let y=parseInt(v[w].getAttribute("table:number-columns-repeated")||"1"),_=En(v[w],"text:p")[0]?.textContent||void 0;for(let E=0;E<y;E++)a.push({name:_,values:[],pointLabels:[]})}for(let w=1;w<m.length;w++){let y=En(m[w],"table:table-cell");if(y.length>0){let _=En(y[0],"text:p")[0]?.textContent||void 0;_&&u.push(_);let E=0;for(let S=1;S<y.length;S++){let A=parseInt(y[S].getAttribute("table:number-columns-repeated")||"1"),F=y[S].getAttribute("office:value")||En(y[S],"text:p")[0]?.textContent||"";for(let I=0;I<A;I++)a[E]&&a[E].values.push(F),E++}}}}}else{let m=Le(n,"chart:series");for(let v of m){let w=v.getAttribute("chart:label-cell-address"),y=v.getAttribute("chart:values-cell-range-address"),_,E=Le(v,"text:p");E.length>0&&(_=E[0].textContent||void 0),!_&&w&&(_=`Series ${w.split(".").pop()?.replace(/\$/g,"")||w}`);let S={name:_,values:[],pointLabels:[]};y&&S.values.push(`[${y}]`),a.push(S)}let b=Le(n,"chart:categories")[0];if(b){let v=b.getAttribute("table:cell-range-address");v&&u.push(`[${v}]`)}}let f=Le(t,"chart:axis"),h,d;for(let m of f){let b=m.getAttribute("chart:dimension"),v=Le(m,"chart:title")[0],w=v&&Le(v,"text:p")[0]?.textContent||void 0;b==="x"?h=w:b==="y"&&(d=w)}o&&c.push(o);for(let m of a)m.name&&c.push(m.name),c.push(...u),c.push(...m.values);return{title:o,xAxisTitle:h,yAxisTitle:d,dataSets:a,labels:u,rawTexts:c}},Yu=r=>r.toString("utf8",0,500).includes("urn:oasis:names:tc:opendocument:xmlns:chart:1.0")?V9(r):G9(r);Ce();De();Re();var mh="[OfficeParser]: ";var Y9={EXTENSION_UNSUPPORTED:r=>`Sorry, OfficeParser currently supports docx, pptx, xlsx, odt, odp, ods, pdf, rtf files only. Create a ticket in Issues on github to add support for ${r} files. Stay tuned for further updates.`,FILE_CORRUPTED:r=>`Your file ${r} seems to be corrupted. If you are sure it is fine, please create a ticket in Issues on github with the file to reproduce error.`,FILE_DOES_NOT_EXIST:r=>`File ${r} could not be found! Check if the file exists or verify if the relative path to the file is correct from your terminal's location.`,LOCATION_NOT_FOUND:r=>`Entered location ${r} is not reachable! Please make sure that the entered directory location exists. Check relative paths and reenter.`,IMPROPER_ARGUMENTS:"Improper arguments",IMPROPER_BUFFERS:"Error occured while reading the file buffers",INVALID_INPUT:"Invalid input type: Expected a Buffer or a valid file path",PDF_WORKER_MISSING:'Missing PDF worker configuration. PDF parsing in browser environments requires a worker source. Please provide "pdfWorkerSrc" in your configuration.'},hk=(r,e)=>{let t=Y9[r];return typeof t=="function"?t(e):t},ia=(r,e,t)=>{let n=hk(r,t);return e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},dk=(r,e,t)=>{let n=r.message||r;return t&&(n.includes("end of central directory record")||n.includes("invalid XML")||n.includes("Failed to open zip file")||n.includes("invalid distance too far back"))&&(n=hk("FILE_CORRUPTED",t)),e.outputErrorToConsole&&console.error(mh+n),new Error(mh+n)},ci=(r,e,t)=>{e.outputErrorToConsole&&(t?console.warn(mh+r,t):console.warn(mh+r))};Ce();De();Re();var X9=r=>{switch(r.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";default:return"application/octet-stream"}},K9=r=>{if(!(r.length<4)){if(r[0]===137&&r[1]===80&&r[2]===78&&r[3]===71)return"image/png";if(r[0]===255&&r[1]===216&&r[2]===255)return"image/jpeg";if(r[0]===71&&r[1]===73&&r[2]===70&&r[3]===56)return"image/gif";if(r[0]===66&&r[1]===77)return"image/bmp";if(r[0]===73&&r[1]===73&&r[2]===42&&r[3]===0||r[0]===77&&r[1]===77&&r[2]===0&&r[3]===42)return"image/tiff";if(r.length>=12&&r[0]===82&&r[1]===73&&r[2]===70&&r[3]===70&&r[8]===87&&r[9]===69&&r[10]===66&&r[11]===80)return"image/webp"}},Os=(r,e)=>{let t=r.split(".").pop()||"",n=K9(e);return n||(n=X9(t)),{type:"image",mimeType:n,data:e.toString("base64"),name:r,extension:t}};Ce();De();Re();var is=async(r,e)=>{let t=r;return typeof window<"u"&&typeof Blob<"u"&&Buffer.isBuffer(r)&&(t=new Blob([r],{type:"image/bmp"})),(await e.recognize(t)).data.text};Ce();De();Re();var lM=es(GL()),uM=es(aM()),Cl=(r,e)=>new Promise((t,n)=>{lM.default.fromBuffer(r,{lazyEntries:!0},(i,o)=>{if(i)return n(i);if(!o)return n(new Error("Failed to open zip file"));let s=[];o.readEntry(),o.on("entry",a=>{e(a.fileName)?o.openReadStream(a,(u,c)=>{if(u)return n(u);if(!c)return n(new Error("Failed to open read stream"));c.pipe((0,uM.default)(f=>{s.push({path:a.fileName,content:f}),o.readEntry()}))}):o.readEntry()}),o.on("end",()=>t(s)),o.on("error",n)})});var JM=es(ic()),QM=async(r,e)=>{let t=/xl\/worksheets\/sheet\d+.xml/g,n=/xl\/drawings\/drawing\d+.xml/g,i=/xl\/charts\/chart\d+.xml/g,o="xl/sharedStrings.xml",s=/xl\/media\/.*/,a=/docProps\/core\.xml/,u=/xl\/worksheets\/_rels\/sheet\d+\.xml\.rels/g,c=/xl\/drawings\/_rels\/drawing\d+\.xml\.rels/g,f=await Cl(r,L=>!!L.match(t)||!!L.match(n)||!!L.match(i)||L===o||L==="xl/styles.xml"||L==="xl/workbook.xml"||L==="xl/_rels/workbook.xml.rels"||!!L.match(a)||!!e.extractAttachments&&(!!L.match(s)||!!L.match(u)||!!L.match(c))),h=f.find(L=>L.path===o),d=[];if(h){let L=Wt(h.content.toString()),$=Le(L,"si");for(let K of $){let le=Le(K,"r");if(le.length>0){let te=[];for(let N of le){let x=Le(N,"t")[0];if(x){let P=x.textContent||"",C=Le(N,"rPr")[0],U={};if(C){Le(C,"b").length>0&&(U.bold=!0),Le(C,"i").length>0&&(U.italic=!0),Le(C,"u").length>0&&(U.underline=!0),Le(C,"strike").length>0&&(U.strikethrough=!0);let j=Le(C,"sz")[0];j&&(U.size=j.getAttribute("val")+"pt");let M=Le(C,"color")[0];if(M){let _e=M.getAttribute("rgb");_e&&(U.color="#"+_e.substring(2))}let Q=Le(C,"rFont")[0];Q&&(U.font=Q.getAttribute("val")||void 0);let ce=Le(C,"vertAlign")[0];if(ce){let _e=ce.getAttribute("val");_e==="subscript"&&(U.subscript=!0),_e==="superscript"&&(U.superscript=!0)}}te.push({type:"text",text:P,formatting:Object.keys(U).length>0?U:void 0})}}d.push(te)}else{let te=Le(K,"t"),N="";for(let x of te)N+=x.textContent||"";d.push(N)}}}let m=f.find(L=>L.path==="xl/styles.xml"),b={};if(m){let L=Wt(m.content.toString()),$=Le(L,"fonts")[0],K=[];if($){let x=Le($,"font");for(let P of x){let C={};Le(P,"b").length>0&&(C.bold=!0),Le(P,"i").length>0&&(C.italic=!0),Le(P,"u").length>0&&(C.underline=!0),Le(P,"strike").length>0&&(C.strikethrough=!0);let U=Le(P,"sz")[0];if(U){let ce=U.getAttribute("val");ce&&(C.size=ce+"pt")}let j=Le(P,"color")[0];if(j){let ce=j.getAttribute("rgb");ce&&(C.color="#"+ce.substring(2))}let M=Le(P,"name")[0];if(M){let ce=M.getAttribute("val");ce&&(C.font=ce)}let Q=Le(P,"vertAlign")[0];if(Q){let ce=Q.getAttribute("val");ce==="subscript"&&(C.subscript=!0),ce==="superscript"&&(C.superscript=!0)}K.push(C)}}let le=Le(L,"fills")[0],te=[];if(le){let x=Le(le,"fill");for(let P of x){let C={},U=Le(P,"patternFill")[0];if(U){let j=Le(U,"fgColor")[0];if(j){let M=j.getAttribute("rgb"),Q=j.getAttribute("theme");if(M&&M!=="00000000")C.backgroundColor="#"+M.substring(2);else if(Q){let ce=parseInt(Q);ce===0?C.backgroundColor="#FFFFFF":ce===1?C.backgroundColor="#000000":ce===2?C.backgroundColor="#EEECE1":ce===3&&(C.backgroundColor="#1F497D")}}}te.push(C)}}let N=Le(L,"cellXfs")[0];if(N){let x=Le(N,"xf");for(let P=0;P<x.length;P++){let C=x[P],U={},j=C.getAttribute("fontId");if(j){let ce=parseInt(j);K[ce]&&Object.assign(U,K[ce])}let M=C.getAttribute("fillId");if(M){let ce=parseInt(M);te[ce]&&te[ce].backgroundColor&&(U.backgroundColor=te[ce].backgroundColor)}let Q=Le(C,"alignment")[0];if(Q){let ce=Q.getAttribute("horizontal");(ce==="center"||ce==="right"||ce==="justify"||ce==="left")&&(U.alignment=ce)}b[P]=U}}}let v=[],w=f.filter(L=>L.path.match(/xl\/media\/.*/)),y=f.filter(L=>L.path.match(i)),_={};if(e.extractAttachments){let L=f.filter(te=>te.path.match(c));for(let te of L){let x=`xl/drawings/${te.path.split("/").pop()?.replace(".rels","")||""}`,P=Wt(te.content.toString()),C=Le(P,"Relationship");_[x]||(_[x]={});for(let U of C){let j=U.getAttribute("Id"),M=U.getAttribute("Target");if(j&&M&&M.includes("media/")){let Q="xl/"+M.replace("../","");_[x][j]={path:Q}}}}let $=f.filter(te=>te.path.match(n));for(let te of $){let N=Wt(te.content.toString()),x=Le(N,"xdr:pic"),P=_[te.path]||{};for(let C of x){let U=Le(C,"xdr:blipFill")[0],j=U?Le(U,"a:blip")[0]:null,M=j?j.getAttribute("r:embed"):null,Q=Le(C,"xdr:nvPicPr")[0],ce=Q?Le(Q,"xdr:cNvPr")[0]:null,_e=ce?ce.getAttribute("descr")||ce.getAttribute("name"):void 0;M&&P[M]&&(P[M].altText=_e||"")}}let K=e.ocrLanguage||"eng",le=e.ocr&&w.length>0?await(0,JM.createWorker)(K,1,{logger:()=>{}}):void 0;try{for(let te of w){let N=Os(te.path.split("/").pop()||"image",te.content),x="";for(let P in _){for(let C in _[P])if(_[P][C].path===te.path){x=_[P][C].altText||"";break}if(x)break}if(x&&(N.altText=x),v.push(N),e.ocr&&N.mimeType.startsWith("image/"))try{let P=await is(te.content,le);P.trim()&&(N.ocrText=P.trim())}catch(P){ci(`OCR failed for ${N.name}:`,e,P)}}}finally{le&&await le.terminate()}for(let te of y){let N={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:te.content.toString("base64"),name:te.path.split("/").pop()||"",extension:"xml"};try{let x=Yu(te.content);N.chartData=x}catch(x){ci(`Failed to extract chart data from ${te.path}:`,e,x)}v.push(N)}}let E={};if(e.extractAttachments){let L=f.filter($=>$.path.match(c));for(let $ of L){let le=`xl/drawings/${$.path.split("/").pop()?.replace(".rels","")||""}`,te=Wt($.content.toString()),N=Le(te,"Relationship");E[le]||(E[le]={});for(let x of N){let P=x.getAttribute("Id"),C=x.getAttribute("Target"),U=x.getAttribute("Type");if(P&&C&&U&&U.includes("chart")){let j=C.split("/").pop()||"";E[le][P]=j}}}}let S={},A=f.find(L=>L.path==="xl/workbook.xml"),F=f.find(L=>L.path==="xl/_rels/workbook.xml.rels");if(A&&F){let L=Wt(F.content.toString()),$=Le(L,"Relationship"),K={};for(let N of $){let x=N.getAttribute("Id"),P=N.getAttribute("Target");if(x&&P){let C=P.split("/").pop()||"";K[x]=C}}let le=Wt(A.content.toString()),te=Le(le,"sheet");for(let N of te){let x=N.getAttribute("name"),P=N.getAttribute("r:id");x&&P&&K[P]&&(S[K[P]]=x)}}let I=[],X=[];for(let L of f)if(!L.path.match(s)&&L.path!==o&&L.path!=="xl/styles.xml"&&!L.path.match(n)&&!L.path.match(i)&&!L.path.match(u)&&!L.path.match(c)&&L.path.match(t)){e.includeRawContent&&X.push(L.content.toString());let $=[],K=/<row.*?>[\s\S]*?<\/row>/g,le=L.content.toString().match(K);if(le)for(let x of le){let P=[],C=/<c.*?>[\s\S]*?<\/c>/g,U=x.match(C),j=x.match(/r="(\d+)"/),M=j?parseInt(j[1])-1:0;if(U)for(let Q of U){let ce=Q.match(/t="([a-z]+)"/),_e=ce?ce[1]:"n",re=Q.match(/<v>(.*?)<\/v>/),W=Q.match(/<t>(.*?)<\/t>/),oe="",we=[];if(_e==="s"&&re){let se=parseInt(re[1]),ge=d[se];Array.isArray(ge)?(we=JSON.parse(JSON.stringify(ge)),oe=we.map(Se=>Se.text).join("")):oe=ge||""}else _e==="inlineStr"&&W?oe=W[1]:re&&(oe=re[1]);let xe=Q.match(/r="([A-Z]+)(\d+)"/),B=(xe?xe[1]:"").charCodeAt(0)-65;if(oe||we.length>0){let se=Q.match(/s="(\d+)"/),ge=se?parseInt(se[1]):void 0,Se=ge!==void 0&&b[ge]?b[ge]:{};if(we.length>0)for(let pe of we)pe.formatting||(pe.formatting={}),Se.backgroundColor&&(pe.formatting.backgroundColor=Se.backgroundColor),Se.alignment&&(pe.formatting.alignment=Se.alignment),!pe.formatting.font&&Se.font&&(pe.formatting.font=Se.font),!pe.formatting.size&&Se.size&&(pe.formatting.size=Se.size);else we.push({type:"text",text:oe,formatting:Se});let be={type:"cell",text:oe,children:we,metadata:{row:M,col:B}};e.includeRawContent&&(be.rawContent=Q),P.push(be)}}if(P.length>0){let Q={type:"row",children:P,metadata:void 0};e.includeRawContent&&(Q.rawContent=x),$.push(Q)}}if(e.extractAttachments){let P=`xl/worksheets/_rels/${L.path.split("/").pop()||""}.rels`,C=f.find(M=>M.path===P),U={};if(C){let M=Wt(C.content.toString()),Q=Le(M,"Relationship");for(let ce of Q){let _e=ce.getAttribute("Id"),re=ce.getAttribute("Target"),W=ce.getAttribute("Type");_e&&re&&W&&W.includes("drawing")&&(U[_e]="xl/drawings/"+re.replace("../drawings/",""))}}let j=L.content.toString().match(/<drawing r:id="(.*?)"/g);if(j)for(let M of j){let Q=M.match(/r:id="(.*?)"/),ce=Q?Q[1]:null;if(ce&&U[ce]){let _e=U[ce],re=_[_e];if(re)for(let oe in re){let we=re[oe],xe=v.find(V=>V.name===we.path.split("/").pop());if(xe){let V={type:"image",text:"",children:[],metadata:{attachmentName:xe.name||"unknown",altText:we.altText||void 0}};$.push(V)}}let W=E[_e];if(W)for(let oe in W){let we=W[oe];if(v.find(V=>V.name===we)){let V={type:"chart",text:"",children:[],metadata:{attachmentName:we}};$.push(V)}}}}}let te=L.path.split("/").pop()||"Sheet",N=S[te]||te;I.push({type:"sheet",children:$,metadata:{sheetName:N},rawContent:e.includeRawContent?L.content.toString():void 0})}let Z=f.find(L=>L.path.match(a)),H=Z?wl(Z.content.toString()):{},ne=L=>{for(let $ of L){if("attachmentName"in($.metadata||{})){let K=$.metadata,le=v.find(te=>te.name===K.attachmentName);le&&($.type==="image"&&(le.ocrText&&($.text=le.ocrText),K.altText&&(le.altText=K.altText)),$.type==="chart"&&le.chartData&&($.text=le.chartData.rawTexts.join(e.newlineDelimiter||`
`)))}$.children&&ne($.children)}};return ne(I),{type:"xlsx",metadata:H,content:I,attachments:v,toText:()=>I.map(L=>{let $=K=>{let le="";return K.children?le+=K.children.map($).filter(te=>te!="").join(K.children[0]?.children?e.newlineDelimiter??`
`:""):le+=K.text||"",le};return $(L)}).filter(L=>L!="").join(e.newlineDelimiter??`
`)}};Ce();De();Re();var eB=es(ic());var tB=async(r,e)=>{let t=/content\.xml/,n=/Object \d+\/content\.xml/,i=/(Pictures|media)\/.*/,o=/meta\.xml/,s=/styles\.xml/,a=/mimetype/,u=await Cl(r,K=>!!K.match(t)||!!K.match(n)||!!K.match(o)||!!K.match(s)||!!K.match(a)||!!e.extractAttachments&&!!K.match(i)),c=u.find(K=>K.path==="mimetype"),f="odt";if(c){let K=c.content.toString().trim();K.includes("spreadsheet")?f="ods":K.includes("presentation")?f="odp":K.includes("text")&&(f="odt")}let h=u.find(K=>K.path==="content.xml")||u.find(K=>K.path.match(t)),d=u.find(K=>K.path==="styles.xml"),m=[],b=[],v={},w={},y={};d&&(K=>{let le=Wt(K),te=Le(le,"style:style");for(let N of te){let x=N.getAttribute("style:name");if(!x)continue;let P={},C=Le(N,"style:paragraph-properties")[0];if(C){let Q=C.getAttribute("fo:text-align");if(Q){let _e={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};_e[Q]&&(P.alignment=_e[Q])}Le(C,"style:drop-cap")[0]&&(P.dropCap=!0)}Object.keys(P).length>0&&(w[x]=P);let U=Le(N,"style:text-properties")[0],j=Le(N,"style:table-cell-properties")[0],M={};if(j){let Q=j.getAttribute("fo:background-color");Q&&Q!=="transparent"&&(M.backgroundColor=Q)}if(U){(U.getAttribute("fo:font-weight")==="bold"||U.getAttribute("style:font-weight-asian")==="bold")&&(M.bold=!0),(U.getAttribute("fo:font-style")==="italic"||U.getAttribute("style:font-style-asian")==="italic")&&(M.italic=!0),U.getAttribute("style:text-underline-style")==="solid"&&(M.underline=!0),U.getAttribute("style:text-line-through-style")==="solid"&&(M.strikethrough=!0);let Q=U.getAttribute("fo:font-size")||U.getAttribute("style:font-size-asian");Q&&(M.size=Q);let ce=U.getAttribute("fo:color");ce&&(M.color=ce);let _e=U.getAttribute("fo:background-color");_e&&_e!=="transparent"&&(M.backgroundColor=_e);let re=U.getAttribute("style:font-name")||U.getAttribute("fo:font-family");re&&(M.font=re);let W=U.getAttribute("style:text-position");W&&(W.startsWith("sub")&&(M.subscript=!0),W.startsWith("super")&&(M.superscript=!0)),Object.keys(M).length>0&&(v[x]=M)}}})(d.content.toString());let E=(K,le,te,N,x,P={},C)=>{let U=[],j="";if(!K.childNodes)return{text:"",children:[]};for(let M=0;M<K.childNodes.length;M++){let Q=K.childNodes[M];if(Q.nodeType===3){let ce=Q.textContent||"";ce&&(j+=ce,U.push({type:"text",text:ce,formatting:P,metadata:C?{...C}:void 0}))}else if(Q.nodeType===1){let ce=Q,_e=ce.tagName;if(_e==="text:s"){let re=parseInt(ce.getAttribute("text:c")||"1"),W=" ".repeat(re);j+=W,U.push({type:"text",text:W,formatting:P,metadata:C?{...C}:void 0})}else if(_e==="text:tab")j+="	",U.push({type:"text",text:"	",formatting:P,metadata:C?{...C}:void 0});else if(_e==="text:line-break")j+=`
`,U.push({type:"text",text:`
`,formatting:P,metadata:C?{...C}:void 0});else if(_e==="text:span"){let re=ce.getAttribute("text:style-name"),W=re?{...P,...le[re]}:P,oe=E(ce,le,te,N,x,W,C);j+=oe.text,U.push(...oe.children)}else if(_e==="text:a"){let re=ce.getAttribute("xlink:href")||"",W=re.startsWith("#")?"internal":"external",we=E(ce,le,te,N,x,P,{link:re,linkType:W});j+=we.text,U.push(...we.children)}else if(_e==="text:note"&&!te.ignoreNotes){let re=ce.getAttribute("text:note-class")||"footnote",W=ce.getAttribute("text:id")||ce.getAttribute("xml:id")||void 0,oe=Le(ce,"text:note-body")[0];if(oe){let we=Le(oe,"text:p"),xe=[],V="";for(let se of we){let ge=S(se,x,le,te);V+=(V?" ":"")+ge.text;let Se={type:"paragraph",text:ge.text,children:ge.children,metadata:ge.alignment?{alignment:ge.alignment}:void 0};xe.push(Se)}let B={type:"note",text:V,children:xe,metadata:{noteType:re,noteId:W}};te.putNotesAtLast?N.push(B):U.push(B)}}else if(_e==="draw:frame"){let re=ce,W="",oe=Le(re,"svg:title")[0],we=Le(re,"svg:desc")[0];oe&&oe.textContent?W=oe.textContent:we&&we.textContent&&(W=we.textContent);let xe="",V=Le(re,"draw:image");if(V.length>0&&(xe=V[0].getAttribute("xlink:href")||"",xe)){let se=xe.split("/");xe=se[se.length-1]}let B={type:"image",text:"",children:[],metadata:{attachmentName:xe,...W?{altText:W}:{}}};te.includeRawContent&&(B.rawContent=re.toString()),U.push(B)}}}return{text:j,children:U}},S=(K,le,te,N)=>{let x=K.getAttribute("text:style-name"),P=x?le[x]:void 0,C=P?.alignment,U=P?.dropCap,j=E(K,te,N,b,le);if(x&&j.children.forEach(M=>{if(M.type==="text"){M.metadata||(M.metadata={});let Q=M.metadata;Q.style||(Q.style=x)}}),j.children.length===0&&K.textContent){let M=K.textContent;M.trim()&&(j.text=M,j.children.push({type:"text",text:M}))}if(U&&j.children.length>0){let M=j.children[0];if(M.type==="text"&&M.text)if(M.text.length===1)M.formatting={...M.formatting,size:"58.5pt"};else{let Q=M.text[0],ce=M.text.substring(1),_e={type:"text",text:Q,formatting:{...M.formatting,size:"58.5pt"},metadata:M.metadata};M.text=ce,j.children.unshift(_e)}}return{text:j.text,children:j.children,alignment:C,style:x||void 0}},A=(K,le,te,N)=>{let x=[],P=En(K,"table:table-row"),C=0;for(let U of P){let j=[],M=En(U,"table:table-cell"),Q=parseInt(U.getAttribute("table:number-rows-repeated")||"1"),ce=0;for(let _e of M){let re=[],W={value:""},oe=parseInt(_e.getAttribute("table:number-columns-repeated")||"1"),we=parseInt(_e.getAttribute("table:number-columns-spanned")||"1"),xe=parseInt(_e.getAttribute("table:number-rows-spanned")||"1"),V=se=>{if(se.childNodes)for(let ge=0;ge<se.childNodes.length;ge++){let Se=se.childNodes[ge];if(Se.nodeType===1){let be=Se;if(be.tagName==="text:p"||be.tagName==="text:h"){let pe=S(be,le,te,N),Ae={type:be.tagName==="text:h"?"heading":"paragraph",text:pe.text,children:pe.children,metadata:{...pe.alignment?{alignment:pe.alignment}:{},...pe.style?{style:pe.style}:{}}};Object.keys(Ae.metadata||{}).length===0&&delete Ae.metadata,be.tagName==="text:h"&&(Ae.metadata||(Ae.metadata={}),Ae.metadata.level=parseInt(be.getAttribute("text:outline-level")||"1")),N.includeRawContent&&(Ae.rawContent=be.toString()),re.push(Ae),W.value+=pe.text,W.value&&!W.value.endsWith(`
`)&&(W.value+=`
`)}else if(be.tagName==="table:table"){let pe=A(be,le,te,N);re.push(pe)}else(be.tagName==="draw:frame"||be.tagName==="draw:text-box")&&V(be)}}};V(_e);let B=W.value;B.endsWith(`
`)&&(B=B.slice(0,-1));for(let se=0;se<oe;se++){let ge={type:"cell",text:B,children:re.length>0?se===0?re:JSON.parse(JSON.stringify(re)):[],metadata:{row:C,col:ce}},Se=ge.metadata;we>1&&(Se.colSpan=we),xe>1&&(Se.rowSpan=xe),N.includeRawContent&&(ge.rawContent=_e.toString()),j.push(ge),ce++}}for(let _e=0;_e<Q;_e++){let re={type:"row",children:_e===0?j:JSON.parse(JSON.stringify(j))};_e>0&&re.children?.forEach(W=>{W.metadata&&"row"in W.metadata&&(W.metadata.row=C)}),N.includeRawContent&&(re.rawContent=U.toString()),x.push(re),C++}}return{type:"table",children:x}};h&&(K=>{let le=Wt(K),te=Le(le,"office:body")[0],N=Le(le,"office:automatic-styles")[0];if(N){let P=Le(N,"style:style");for(let C of P){let U=C.getAttribute("style:name");if(!U)continue;let j=Le(C,"style:paragraph-properties")[0],M={};if(j){let ce=j.getAttribute("fo:text-align");if(ce){let re={start:"left",left:"left",center:"center",end:"right",right:"right",justify:"justify"};re[ce]&&(M.alignment=re[ce])}Le(j,"style:drop-cap")[0]&&(M.dropCap=!0)}Object.keys(M).length>0&&(w[U]=M);let Q=Le(C,"style:text-properties")[0];if(Q){let ce={};(Q.getAttribute("fo:font-weight")==="bold"||Q.getAttribute("style:font-weight-asian")==="bold")&&(ce.bold=!0),(Q.getAttribute("fo:font-style")==="italic"||Q.getAttribute("style:font-style-asian")==="italic")&&(ce.italic=!0),Q.getAttribute("style:text-underline-style")==="solid"&&(ce.underline=!0),Q.getAttribute("style:text-line-through-style")==="solid"&&(ce.strikethrough=!0);let _e=Q.getAttribute("fo:font-size")||Q.getAttribute("style:font-size-asian");_e&&(ce.size=_e);let re=Q.getAttribute("fo:color");re&&(ce.color=re);let W=Q.getAttribute("fo:background-color");W&&W!=="transparent"&&(ce.backgroundColor=W);let oe=Q.getAttribute("style:font-name")||Q.getAttribute("fo:font-family");oe&&(ce.font=oe);let we=Q.getAttribute("style:text-position");we&&(we.startsWith("sub")&&(ce.subscript=!0),we.startsWith("super")&&(ce.superscript=!0)),Object.keys(ce).length>0&&(v[U]=ce)}}}let x=(P,C,U=!1)=>{if(P.tagName==="text:p"){let j=S(P,w,v,e),M=U||(P.getAttribute("text:style-name")||"").toLowerCase().includes("title")?"heading":"paragraph",Q={type:M,text:j.text,children:j.children,metadata:{...j.alignment?{alignment:j.alignment}:{},...j.style?{style:j.style}:{}}};M==="heading"&&Q.metadata&&(Q.metadata.level=Q.metadata.level||1),Object.keys(Q.metadata||{}).length===0&&delete Q.metadata,e.includeRawContent&&(Q.rawContent=P.toString()),C.push(Q)}else if(P.tagName==="text:h"){let j=parseInt(P.getAttribute("text:outline-level")||"1"),M=S(P,w,v,e),Q={type:"heading",text:M.text,children:M.children,metadata:{level:j,...M.alignment?{alignment:M.alignment}:{},...M.style?{style:M.style}:{}}};e.includeRawContent&&(Q.rawContent=P.toString()),C.push(Q)}else if(P.tagName==="table:table"){let j=A(P,w,v,e);e.includeRawContent&&(j.rawContent=P.toString()),C.push(j)}else if(P.tagName==="text:list"){let j=En(P,"text:list-item"),M=P.getAttribute("text:style-name")||P.getAttribute("xml:id"),Q=M||`list-${C.length}`,ce="unordered",_e=!1,re=M;if(!re){let xe=P.parentNode;for(;xe&&!re&&!(xe.nodeName==="text:list"&&(re=xe.getAttribute("text:style-name"),re));)xe=xe.parentNode}if(re){let xe=Le(Wt(h?.content.toString()||""),"office:automatic-styles")[0];if(xe){let V=Le(xe,"text:list-style");for(let B of V)if(B.getAttribute("style:name")===re){let se=Le(B,"text:list-level-style-bullet"),ge=Le(B,"text:list-level-style-number"),Se=Le(B,"text:list-level-style-image");ge.length>0?(ce="ordered",_e=ge.some(be=>!!be.getAttribute("style:num-format"))):se.length>0&&(ce="unordered",_e=se.some(be=>!!be.getAttribute("text:bullet-char"))),Se.length>0&&(_e=!0);break}}if(d&&!_e){let V=Wt(d.content.toString()),B=Le(V,"text:list-style");for(let se of B)if(se.getAttribute("style:name")===re){let ge=Le(se,"text:list-level-style-bullet"),Se=Le(se,"text:list-level-style-number"),be=Le(se,"text:list-level-style-image");Se.length>0?(ce="ordered",_e=Se.some(pe=>!!pe.getAttribute("style:num-format"))):ge.length>0&&(ce="unordered",_e=ge.some(pe=>!!pe.getAttribute("text:bullet-char"))),be.length>0&&(_e=!0);break}}}if(!_e){for(let xe=0;xe<j.length;xe++){let V=j[xe];if(V.childNodes)for(let B=0;B<V.childNodes.length;B++){let se=V.childNodes[B];se.nodeType===1&&x(se,C,U)}}return}let W=0,oe=P.parentNode;for(;oe;)oe.nodeName==="text:list"&&W++,oe=oe.parentNode;y[Q]||(y[Q]={});let we=W.toString();y[Q][we]===void 0&&(y[Q][we]=-1);for(let xe=0;xe<j.length;xe++){let V=j[xe];y[Q][we]++;let B=y[Q][we];for(let se=W+1;se<10;se++)y[Q][se.toString()]!==void 0&&(y[Q][se.toString()]=-1);if(V.childNodes)for(let se=0;se<V.childNodes.length;se++){let ge=V.childNodes[se];if(ge.nodeType===1){let Se=ge;if(Se.tagName==="text:p"){let be=S(Se,w,v,e),pe={type:"list",text:be.text,children:be.children,metadata:{listType:ce,indentation:W,itemIndex:B,listId:Q,alignment:be.alignment||"left",style:be.style}};e.includeRawContent&&(pe.rawContent=Se.toString()),C.push(pe)}else if(Se.tagName==="text:h"){let be=parseInt(Se.getAttribute("text:outline-level")||"1"),pe=S(Se,w,v,e),Ae={type:"list",text:pe.text,children:pe.children,metadata:{listType:ce,indentation:W,itemIndex:B,listId:Q,...pe.alignment?{alignment:pe.alignment}:{},style:pe.style}};e.includeRawContent&&(Ae.rawContent=Se.toString()),C.push(Ae)}else Se.tagName==="text:list"&&x(Se,C,U)}}}}else if(P.tagName==="draw:frame"){let j=P.getAttribute("presentation:class"),M=j==="title"||j==="sub-title",Q=Le(P,"draw:text-box")[0],ce=Le(P,"draw:image")[0],_e=Le(P,"table:table")[0],re=Le(P,"draw:object")[0];if(Q)x(Q,C,M||U);else if(_e){let W=A(_e,w,v,e);e.includeRawContent&&(W.rawContent=_e.toString()),C.push(W)}else if(ce){let W="",oe=Le(P,"svg:title")[0],we=Le(P,"svg:desc")[0];oe&&oe.textContent?W=oe.textContent:we&&we.textContent&&(W=we.textContent);let xe=ce.getAttribute("xlink:href")||"";if(xe){let B=xe.split("/");xe=B[B.length-1]}let V={type:"image",text:"",children:[],metadata:{attachmentName:xe,...W?{altText:W}:{}}};e.includeRawContent&&(V.rawContent=P.toString()),C.push(V)}else if(re){let W=re.getAttribute("xlink:href");if(W){let oe=W.split("/")[0],we=`${oe}/content.xml`,xe=u.find(V=>V.path===we||V.path.endsWith(we));if(xe){let V=Yu(xe.content),B={type:"chart",text:V.rawTexts.join(" "),metadata:{attachmentName:oe,chartData:V}};e.includeRawContent&&(B.rawContent=P.toString()),C.push(B)}else{let V={type:"chart",text:"",metadata:{attachmentName:oe}};e.includeRawContent&&(V.rawContent=P.toString()),C.push(V)}}}}else if(P.childNodes)for(let j=0;j<P.childNodes.length;j++){let M=P.childNodes[j];M.nodeType===1&&x(M,C,U)}};if(f==="ods"){let P=Le(te,"office:spreadsheet")[0];if(P){let C=Le(P,"table:table");for(let U=0;U<C.length;U++){let j=C[U],M=j.getAttribute("table:name")||`Sheet${U+1}`,Q=[],ce=Le(j,"table:table-row"),_e=0;for(let W=0;W<ce.length;W++){let oe=ce[W],we=[],xe=Le(oe,"table:table-cell"),V=0,B=parseInt(oe.getAttribute("table:number-rows-repeated")||"1");for(let se=0;se<xe.length;se++){let ge=xe[se],Se=parseInt(ge.getAttribute("table:number-columns-repeated")||"1"),be="",pe=[],Ae=Le(ge,"text:p");for(let ke=0;ke<Ae.length;ke++){let Oe=Ae[ke],Ve=Le(Oe,"text:span");if(Ve.length>0)for(let Je of Ve){let tt=Je.getAttribute("text:style-name"),T=tt?v[tt]:{},g=Je.textContent||"";be+=g;let p={type:"text",text:g,formatting:T};pe.push(p)}else{let Je=Oe.textContent||"";if(be+=Je,Je.trim()){let tt={type:"text",text:Je,formatting:{}};pe.push(tt)}}ke<Ae.length-1&&(be+=`
`)}let $e=Le(ge,"draw:frame");for(let ke of $e){let Oe="",Ve=Le(ke,"svg:title")[0],Je=Le(ke,"svg:desc")[0];Ve&&Ve.textContent?Oe=Ve.textContent:Je&&Je.textContent&&(Oe=Je.textContent);let tt="",T=Le(ke,"draw:image");if(T.length>0){let R=T[0].getAttribute("xlink:href");if(R){let J=R.split("/");tt=J[J.length-1]}}let g="",p=Le(ke,"draw:object");if(p.length>0){let R=p[0].getAttribute("xlink:href");R&&(g=R.split("/")[0])}if(T.length>0){let R={type:"image",text:"",children:[],metadata:{attachmentName:tt,...Oe?{altText:Oe}:{}}};e.includeRawContent&&(R.rawContent=ke.toString()),pe.push(R)}else if(g){let R={type:"chart",text:"",children:[],metadata:{attachmentName:g}};pe.push(R)}}for(let ke=0;ke<Se;ke++){if(be||pe.length>0||f!=="ods"){let Oe={type:"cell",text:be,children:pe,metadata:{row:_e,col:V}};e.includeRawContent&&(Oe.rawContent=ge.toString()),we.push(Oe)}V++}}if(we.length>0)for(let se=0;se<B;se++){let ge={type:"row",children:JSON.parse(JSON.stringify(we)),metadata:void 0};se>0&&ge.children?.forEach(Se=>{Se.metadata&&"row"in Se.metadata&&(Se.metadata.row=_e)}),e.includeRawContent&&(ge.rawContent=oe.toString()),Q.push(ge),_e++}else _e+=B}let re={type:"sheet",children:Q,metadata:{sheetName:M}};e.includeRawContent&&(re.rawContent=j.toString()),m.push(re)}}}else if(f==="odp"){let P=Le(te,"office:presentation")[0];if(P){let C=En(P,"draw:page"),U=[];for(let j=0;j<C.length;j++){let M=C[j],Q={type:"slide",children:[],metadata:{slideNumber:j+1}},ce,_e=M.childNodes;if(_e)for(let re=0;re<_e.length;re++){let W=_e[re];if(W.nodeType===1){let oe=W;if(oe.tagName==="presentation:notes"){e.ignoreNotes||(ce={type:"note",children:[],metadata:{slideNumber:j+1,noteId:`slide-note-${j+1}`}},x(oe,ce.children));continue}x(oe,Q.children)}}e.includeRawContent&&(Q.rawContent=M.toString()),m.push(Q),ce&&ce.children&&ce.children.length>0&&(e.putNotesAtLast?U.push(ce):m.push(ce))}U.length>0&&m.push(...U)}}else{let P=Le(te,"office:text")[0];P&&x(P,m)}})(h.content.toString());let I=[],X=u.filter(K=>K.path.match(/(Pictures|media)\/.*/));if(e.extractAttachments){let K=u.filter(le=>le.path.match(/Object \d+\/content\.xml/));for(let le of K){let te=Wt(le.content.toString());if(Le(te,"chart:chart").length>0){let x=le.path.split("/")[0],P={type:"chart",mimeType:"application/vnd.oasis.opendocument.chart",data:le.content.toString("base64"),name:x,extension:"xml"},C=Yu(le.content);C.rawTexts.length>0&&(P.chartData=C),I.push(P)}}}if(e.extractAttachments){let K=e.ocrLanguage||"eng",le=e.ocr&&X.length>0?await(0,eB.createWorker)(K,1,{logger:()=>{}}):void 0;try{for(let te of X){let N=Os(te.path.split("/").pop()||"image",te.content);if(I.push(N),e.ocr&&N.mimeType.startsWith("image/"))try{N.ocrText=(await is(te.content,le)).trim()}catch(x){ci(`OCR failed for ${N.name}:`,e,x)}}}finally{le&&await le.terminate()}}let Z=u.find(K=>K.path.match(o)),H=Z?wl(Z.content.toString()):{},ne=(K,le)=>{let te=x=>{let P=x.replace(/^\[|\]$/g,""),[C,U]=P.split(":"),j=C.lastIndexOf(".");if(j===-1)return[x];let M=C.substring(0,j).replace(/^'|'$/g,""),Q=C.substring(j+1).replace(/\$/g,""),ce=Q;if(U)if(U.startsWith("."))ce=U.substring(1).replace(/\$/g,"");else{let xe=U.lastIndexOf(".");ce=U.substring(xe+1).replace(/\$/g,"")}let _e=xe=>{let V=xe.match(/[A-Z]+/),B=xe.match(/\d+/);if(!V||!B)return null;let se=V[0],ge=0;for(let be=0;be<se.length;be++)ge=ge*26+(se.charCodeAt(be)-65+1);return ge-=1,{r:parseInt(B[0])-1,c:ge}},re=_e(Q),W=_e(ce);if(!re||!W)return[x];let oe=le.find(xe=>xe.type==="sheet"&&xe.metadata?.sheetName===M);if(!oe||!oe.children)return[x];let we=[];for(let xe of oe.children)if(xe.children)for(let V of xe.children){let B=V.metadata;B&&B.row>=re.r&&B.row<=W.r&&B.col>=re.c&&B.col<=W.c&&we.push(V.text||"")}return we.length>0?we:[]};for(let x of K.dataSets){let P=[];for(let C of x.values)C.startsWith("[")?P.push(...te(C)):P.push(C);x.values=P}let N=[];for(let x of K.labels)x.startsWith("[")?N.push(...te(x)):N.push(x);K.labels=N,K.rawTexts=[],K.title&&K.rawTexts.push(K.title);for(let x of K.dataSets)x.name&&K.rawTexts.push(x.name),K.rawTexts.push(...K.labels),K.rawTexts.push(...x.values)};for(let K of I)K.type==="chart"&&K.chartData&&ne(K.chartData,m);(K=>{let le=new Set,te=C=>{for(let U of C){if(U.metadata&&"attachmentName"in U.metadata){let j=U.metadata.attachmentName;j&&le.add(j)}U.children&&te(U.children)}};te(K);let N=I.filter(C=>C.type==="image"&&C.name&&!le.has(C.name)),x=0,P=C=>{if((C.type==="image"||C.type==="chart")&&C.metadata&&"attachmentName"in C.metadata){let U=C.metadata.attachmentName;if(!U&&C.type==="image"&&x<N.length&&(U=N[x++].name,C.metadata.attachmentName=U),U){let j=I.find(M=>M.name===U);j&&(j.ocrText&&(C.text=j.ocrText),j.chartData&&C.type==="chart"&&(C.text=j.chartData.rawTexts.join(e.newlineDelimiter??`
`)))}}C.children&&C.children.forEach(P)};K.forEach(P)})(m);let $={};for(let K in v)$[K]={formatting:v[K],alignment:w[K]?.alignment};for(let K in w)$[K]||($[K]={formatting:{},alignment:w[K]?.alignment});return e.putNotesAtLast&&b.length>0&&m.push(...b),{type:f,metadata:{...H,styleMap:$},content:m,attachments:I,toText:()=>m.map(K=>{let le=te=>{let N="";if(te.children&&te.children.length>0){let P=te.children.some(C=>C.children&&C.children.length>0)?e.newlineDelimiter??`
`:"";N+=te.children.map(le).filter(C=>C!="").join(P)}else N+=te.text||"";return N};return le(K)}).filter(K=>K!="").join(e.newlineDelimiter??`
`)}};Ce();De();Re();var S3=es(ic());function x3(r){if(r)try{let e=r.startsWith("D:")?r.slice(2):r,t=parseInt(e.slice(0,4),10),n=parseInt(e.slice(4,6),10)-1,i=parseInt(e.slice(6,8),10)||1,o=parseInt(e.slice(8,10),10)||0,s=parseInt(e.slice(10,12),10)||0,a=parseInt(e.slice(12,14),10)||0,u=e.slice(14).match(/([+-Z])(\d{2})'?(\d{2})?'?/);if(u){let c=u[1]==="-"?-1:1,f=parseInt(u[2],10)||0,h=parseInt(u[3],10)||0,d=c*(f*60+h),m=Date.UTC(t,n,i,o,s,a);return new Date(m-d*6e4)}return new Date(t,n,i,o,s,a)}catch{try{return new Date(r)}catch{return}}}function TV(r){let e=[];for(let i of r)for(let o of i)o.type==="text"&&o.height>0&&e.push(o.height);if(e.length===0)return{median:12,max:12};e.sort((i,o)=>i-o);let t=e[Math.floor(e.length/2)],n=e[e.length-1];return{median:t,max:n}}function CV(r,e){if(r<=e.median*1.2)return 0;let t=r/e.median;return t>=2?1:t>=1.7?2:t>=1.5?3:t>=1.35?4:t>=1.2?5:0}function RV(r,e){let t=r.x+r.width/2,n=r.y+r.height/2;for(let i of e){let[o,s,a,u]=i.rect,c=Math.min(o,a),f=Math.max(o,a),h=Math.min(s,u),d=Math.max(s,u);if(t>=c&&t<=f&&n>=h&&n<=d)return i}}function DV(r,e,t){let n=Math.floor((24*r+31)/32)*4,i=n-r*3,o=54,s=n*e,a=o+s,u=Buffer.alloc(a);u.write("BM",0),u.writeUInt32LE(a,2),u.writeUInt32LE(0,6),u.writeUInt32LE(o,10),u.writeUInt32LE(40,14),u.writeInt32LE(r,18),u.writeInt32LE(-e,22),u.writeUInt16LE(1,26),u.writeUInt16LE(24,28),u.writeUInt32LE(0,30),u.writeUInt32LE(s,34),u.writeInt32LE(2835,38),u.writeInt32LE(2835,42),u.writeUInt32LE(0,46),u.writeUInt32LE(0,50);let c=o;for(let f=0;f<e;f++){for(let h=0;h<r;h++){let d=(f*r+h)*4,m=t[d+0],b=t[d+1],v=t[d+2],y=t[d+3]/255,_=Math.round(m*y+255*(1-y)),E=Math.round(b*y+255*(1-y)),S=Math.round(v*y+255*(1-y));u[c+0]=S,u[c+1]=E,u[c+2]=_,c+=3}for(let h=0;h<i;h++)u[c]=0,c++}return u}function IV(r,e,t,n){let i;if(n===1){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++){let s=r[o];i[o*4]=s,i[o*4+1]=s,i[o*4+2]=s,i[o*4+3]=255}}else if(n===2||r.length===e*t*3){i=new Uint8ClampedArray(e*t*4);for(let o=0;o<e*t;o++)i[o*4]=r[o*3],i[o*4+1]=r[o*3+1],i[o*4+2]=r[o*3+2],i[o*4+3]=255}else i=r instanceof Uint8ClampedArray?r:new Uint8ClampedArray(r);return Buffer.from(i.buffer,i.byteOffset,i.byteLength)}var T3=async(r,e)=>{let t;if(typeof window>"u"){let b=new Function("specifier","return import(specifier)");try{t=await b("pdfjs-dist/legacy/build/pdf.mjs")}catch{t=await b("pdfjs-dist")}}else t=await Promise.resolve().then(()=>(A3(),E3));if(e.pdfWorkerSrc)t.GlobalWorkerOptions.workerSrc=e.pdfWorkerSrc;else if(typeof window<"u")t.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";else try{let b=xu.resolve("pdfjs-dist/legacy/build/pdf.worker.mjs");t.GlobalWorkerOptions.workerSrc=b}catch(b){e.outputErrorToConsole&&console.warn("[PdfParser] Could not auto-resolve local worker path:",b)}let n=new Uint8Array(r),i=t.getDocument({data:n,verbosity:0}),o;try{o=await i.promise}catch(b){throw b.message?.includes("workerSrc")||b.message?.includes('No "GlobalWorkerOptions.workerSrc" specified')?ia("PDF_WORKER_MISSING",e):b}let s=[],a=[],u=o.numPages,c=[],h=(await o.getMetadata().catch(()=>({info:{}}))).info,d={pages:u,title:h?.Title||void 0,author:h?.Author||void 0,subject:h?.Subject||void 0,description:h?.Keywords||void 0,created:x3(h?.CreationDate),modified:x3(h?.ModDate)};try{let b=await o.getAttachments();if(b&&e.extractAttachments)for(let v in b){let w=b[v],y=Buffer.from(w.content),_=Os(w.filename,y);a.push(_)}}catch(b){e.outputErrorToConsole&&console.error("Error extracting embedded attachments:",b)}for(let b=1;b<=u;b++){let v,w,y=[];try{v=await o.getPage(b),w=await v.getTextContent()}catch(E){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${b}:`,E),c.push(y);continue}let _=v.commonObjs;for(let E of w.items){let S=E.transform,A=S[4],F=S[5],I=E.width||0,X=E.height||Math.abs(S[3])||12,Z={},H;if(E.fontName&&_)try{if(_.has(E.fontName)){let ne=await new Promise(L=>{_.get(E.fontName,$=>L($))});if(ne?.name){H=ne.name.replace(/^[A-Z]{6}\+/,""),Z.font=H;let L=ne.name.toLowerCase();L.includes("bold")&&(Z.bold=!0),(L.includes("italic")||L.includes("oblique"))&&(Z.italic=!0)}}}catch{}X>0&&(Z.size=Math.round(X).toString()),y.push({type:"text",x:A,y:F,width:I,height:X,text:E.str,fontName:H,formatting:Z})}if(e.extractAttachments||e.ocr)try{let E=await v.getOperatorList(),S=E.fnArray,A=E.argsArray;for(let F=0;F<S.length;F++){let I=S[F];if(I===t.OPS.dependency){let X=A[F];for(let Z of X)try{if(v.objs.has(Z))continue;await new Promise(H=>{let ne=setTimeout(()=>{H()},500);v.objs.get(Z,L=>{clearTimeout(ne),H()})})}catch(H){e.outputErrorToConsole&&console.error(`[PdfParser] Failed to load dependency ${Z}:`,H)}}if(I===t.OPS.paintImageXObject||I===t.OPS.paintXObject){let X=A[F][0];try{let Z=v.objs.has(X),H=v.objs;if(!Z&&v.commonObjs.has(X)&&(Z=!0,H=v.commonObjs),Z){let L=await new Promise($=>{H.get(X,K=>$(K))});if(typeof window<"u"&&!L.data&&L.bitmap)try{let $=document.createElement("canvas");$.width=L.width,$.height=L.height;let K=$.getContext("2d");K&&(K.drawImage(L.bitmap,0,0),L.data=K.getImageData(0,0,L.width,L.height).data,L.kind=3)}catch($){e.outputErrorToConsole&&console.error("[PdfParser] Failed to extract from ImageBitmap:",$)}if(L?.data&&L.width>0&&L.height>0){let $=0,K=0;for(let le=F-1;le>=0;le--)if(S[le]===t.OPS.transform){$=A[le][4],K=A[le][5];break}y.push({type:"image",x:$,y:K,name:X,data:L.data,width:L.width,height:L.height,kind:L.kind})}}}catch{}}}}catch(E){e.outputErrorToConsole&&console.error(`Error extracting images from page ${b}:`,E)}c.push(y)}let m=TV(c);for(let b=0;b<c.length;b++){let v=b+1,w;try{w=await o.getPage(v)}catch(Z){e.outputErrorToConsole&&console.warn(`[PdfParser] Error loading page ${v} in second pass:`,Z);continue}let y=c[b],_=[],E=[];try{let Z=await w.getAnnotations();for(let H of Z)H.subtype==="Link"&&H.rect&&E.push({rect:H.rect,url:H.url,dest:H.dest})}catch(Z){e.outputErrorToConsole&&console.error(`Error extracting annotations from page ${v}:`,Z)}y.sort((Z,H)=>Math.abs(H.y-Z.y)>5?H.y-Z.y:Z.x-H.x);let S=null,A=0,F=-1,I=0,X=e.ocr&&y.some(Z=>Z.type==="image")?await(0,S3.createWorker)(e.ocrLanguage||"eng",1,{logger:()=>{}}):void 0;try{for(let Z of y)if(Z.type==="text"){let H=Z.text;if(!H)continue;if(F!==-1&&Math.abs(Z.y-F)>5&&S&&((S.text||"").trim().length>0&&_.push(S),S=null),!S&&H.trim().length===0){F=Z.y;continue}let L=CV(Z.height,m);if(S||(L>0?S={type:"heading",text:"",children:[],metadata:{level:L}}:S={type:"paragraph",text:"",children:[]},A=Z.height),H.trim().length===0){if(S.children&&S.children.length>0){let te=S.children[S.children.length-1];te.type==="text"&&te.text&&(te.text+=H,S.text+=H)}F=Z.y;continue}if(S.text&&S.text.length>0&&!S.text.endsWith(" ")&&(S.text+=" ",S.children&&S.children.length>0)){let te=S.children[S.children.length-1];te.type==="text"&&te.text&&(te.text+=" ")}S.text+=H;let $=RV(Z,E),K;$&&($.url?K={link:$.url,linkType:$.url.startsWith("#")?"internal":"external"}:$.dest&&(K={link:typeof $.dest=="string"?`#${$.dest}`:"#internal",linkType:"internal"}));let le=!1;if(S.children&&S.children.length>0&&!K){let te=S.children[S.children.length-1];te.type==="text"&&OV(te.formatting,Z.formatting)&&!te.metadata&&(te.text=(te.text||"")+H,le=!0)}if(!le){let te={type:"text",text:H,formatting:Object.keys(Z.formatting).length>0?Z.formatting:void 0};K&&(te.metadata=K),S.children?.push(te)}F=Z.y}else if(Z.type==="image"){S&&((S.text||"").trim().length>0&&_.push(S),S=null),I++;let H=`pdf_image_p${v}_${I}.bmp`;if(e.extractAttachments)try{let ne=IV(Z.data,Z.width,Z.height,Z.kind),L=DV(Z.width,Z.height,new Uint8Array(ne)),$=Os(H,L);if($.mimeType="image/bmp",e.ocr)try{Z.width>=10&&Z.height>=10&&($.ocrText=(await is(L,X)).trim())}catch(le){e.outputErrorToConsole&&console.error(`OCR failed for ${H}:`,le)}a.push($);let K={attachmentName:H};_.push({type:"image",text:$.ocrText||"",metadata:{...K}})}catch(ne){ci(`Failed to process image ${H}:`,e,ne)}}}finally{X&&await X.terminate()}S&&(S.text||"").trim().length>0&&_.push(S),s.push({type:"page",children:_,text:_.map(Z=>Z.text).join(e.newlineDelimiter??`

`),metadata:{pageNumber:v}})}return{type:"pdf",metadata:d,content:s,attachments:a,toText:()=>s.map(b=>b.text).join(e.newlineDelimiter??`

`)}};function OV(r,e){if(!r&&!e)return!0;if(!r||!e)return!1;let t=Object.keys(r).sort(),n=Object.keys(e).sort();if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(t[i]!==n[i]||r[o]!==e[o])return!1}return!0}Ce();De();Re();var C3=es(Ob());var R3=es(ic()),D3=async(r,e)=>{let t=/ppt\/(notesSlides|slides)\/(notesSlide|slide)\d+.xml/g,n=/ppt\/slides\/slide\d+.xml/g,i=/ppt\/slides\/_rels\/slide\d+\.xml\.rels/,o=/lide(\d+)\.xml/,s=/ppt\/media\/.*/,a=/ppt\/charts\/chart\d+\.xml/,u=/docProps\/core\.xml/,c=new C3.XMLSerializer,f=await Cl(r,le=>!!le.match(e.ignoreNotes?n:t)||!!le.match(u)||!!le.match(i)||!!e.extractAttachments&&(!!le.match(s)||!!le.match(a))),h=f.find(le=>le.path.match(u)),d=h?wl(h.content.toString()):{};f.sort((le,te)=>{let N=le.path.match(o),x=te.path.match(o),P=N?parseInt(N[1]):0,C=x?parseInt(x[1]):0;return P-C});let m=[],b=[],v={},w=0,y=0,_=!1,E=null,S=0,A={},F=le=>{let te=[],N=Le(le,"a:tr");for(let x=0;x<N.length;x++){let P=N[x],C=[],U=Le(P,"a:tc");for(let M=0;M<U.length;M++){let Q=U[M],ce=[],_e="",re=Le(Q,"a:txBody")[0];if(re){let oe=Le(re,"a:p");for(let we of oe){let xe={type:"paragraph",text:"",children:[],metadata:{}};e.includeRawContent&&(xe.rawContent=we.toString());let V=Le(we,"a:r");for(let B of V){let se=Le(B,"a:t")[0];if(se&&se.childNodes[0]){let ge=se.childNodes[0].nodeValue||"";xe.text+=ge;let Se=Le(B,"a:rPr")[0],be={};if(Se){Se.getAttribute("b")==="1"&&(be.bold=!0),Se.getAttribute("i")==="1"&&(be.italic=!0),Se.getAttribute("u")==="sng"&&(be.underline=!0),Se.getAttribute("strike")==="sngStrike"&&(be.strikethrough=!0);let pe=Se.getAttribute("sz");pe&&(be.size=(parseInt(pe)/100).toString()+"pt");let Ae=Le(Se,"a:solidFill")[0];if(Ae){let ke=Le(Ae,"a:srgbClr")[0];if(ke){let Oe=ke.getAttribute("val");Oe&&(be.color="#"+Oe)}}let $e=Le(Se,"a:latin")[0];if($e){let ke=$e.getAttribute("typeface");ke&&(be.font=ke)}}xe.children?.push({type:"text",text:ge,formatting:be})}}ce.push(xe),_e+=xe.text}}let W={type:"cell",text:_e,children:ce,metadata:{row:x,col:M}};C.push(W)}let j={type:"row",children:C};te.push(j)}return{type:"table",children:te}},I=(le,te)=>{let N=Le(le,"a:blip")[0];if(!N)return null;let x=N.getAttribute("r:embed");if(!x)return null;let P=v[te]?.[x];if(!P||P.type!=="image")return null;let C=P.target,U=Le(le,"p:nvPicPr")[0],M=(U?Le(U,"p:cNvPr")[0]:null)?.getAttribute("descr")||void 0;return{type:"image",text:"",metadata:{attachmentName:C,altText:M}}},X=(le,te)=>{let N=Le(le,"a:graphicData")[0];if(!N||!(N.getAttribute("uri")==="http://schemas.openxmlformats.org/drawingml/2006/chart"))return null;let C=Le(N,"c:chart")[0];if(!C)return null;let U=C.getAttribute("r:id");if(!U)return null;let j=v[te]?.[U];if(!j||j.type!=="chart")return null;let Q={type:"chart",text:"",metadata:{attachmentName:j.target}};return e.includeRawContent&&(Q.rawContent=c.serializeToString(le)),Q},Z=(le,te)=>{let N=Le(le,"a:tbl")[0];if(N){let x=F(N);if(e.includeRawContent&&(x.rawContent=c.serializeToString(le)),x.children&&x.children.length>0)return x}if(le.getElementsByTagName("c:chart").length>0){let x=X(le,te);if(x)return x}return null},H=(le,te)=>{let N=[],x=Le(le,"p:nvSpPr")[0],P=x?Le(x,"p:nvPr")[0]:null,C=P?Le(P,"p:ph")[0]:null,U=C?C.getAttribute("type"):"body",j=U==="title"||U==="ctrTitle",M=Le(le,"p:txBody")[0];if(M){let Q=Le(M,"a:p");for(let ce=0;ce<Q.length;ce++){let _e=Q[ce],re={type:j?"heading":"paragraph",text:"",children:[],metadata:j?{level:1}:{}},W=Le(_e,"a:pPr")[0],oe=!1,we="unordered",xe=0;if(W){let B=W.getAttribute("lvl");B&&(xe=parseInt(B));let se=Le(W,"a:buAutoNum")[0],ge=Le(W,"a:buChar")[0],Se=Le(W,"a:buBlip")[0],be=Le(W,"a:bu")[0];se?(oe=!0,we="ordered"):(ge||Se||be)&&(oe=!0,we="unordered");let pe=W.getAttribute("algn");if(pe){let Ae={l:"left",ctr:"center",r:"right",just:"justify"};Ae[pe]&&(re.metadata.alignment=Ae[pe])}}if(oe){re.type="list";let B=xe;if(!_||we!==E){w++;for(let ge in A)delete A[ge];y=0,A[B]=0}else if(B>S)y=0,A[B]=0;else if(B<S){for(let Se in A){let be=parseInt(Se);be>B&&delete A[be]}y=(A[B]||0)+1,A[B]=y}else y=(A[B]||0)+1,A[B]=y;_=!0,E=we,S=B,re.metadata={...re.metadata,listType:we,indentation:B,listId:w.toString(),itemIndex:y,alignment:re.metadata?.alignment||"left"}}else _=!1,E=null,S=0;j&&(re.metadata={...re.metadata,level:1}),e.includeRawContent&&(re.rawContent=_e.toString());let V=Le(_e,"a:r");for(let B=0;B<V.length;B++){let se=V[B],ge=Le(se,"a:t")[0];if(ge&&ge.childNodes[0]){let Se=ge.childNodes[0].nodeValue||"";re.text+=Se;let be=Le(se,"a:rPr")[0],pe={};if(be){be.getAttribute("b")==="1"&&(pe.bold=!0),be.getAttribute("i")==="1"&&(pe.italic=!0),be.getAttribute("u")==="sng"&&(pe.underline=!0),be.getAttribute("strike")==="sngStrike"&&(pe.strikethrough=!0);let ke=be.getAttribute("sz");ke&&(pe.size=(parseInt(ke)/100).toString()+"pt");let Oe=Le(be,"a:solidFill")[0];if(Oe){let T=Le(Oe,"a:srgbClr")[0];if(T){let g=T.getAttribute("val");g&&(pe.color="#"+g)}}let Ve=Le(be,"a:highlight")[0];if(Ve){let T=Le(Ve,"a:srgbClr")[0];if(T){let g=T.getAttribute("val");g&&(pe.backgroundColor="#"+g)}}let Je=Le(be,"a:latin")[0];if(Je){let T=Je.getAttribute("typeface");T&&(pe.font=T)}let tt=be.getAttribute("baseline");if(tt){let T=parseInt(tt);T<0&&(pe.subscript=!0),T>0&&(pe.superscript=!0)}}let Ae={type:"text",text:Se,formatting:pe},$e=Le(se,"a:hlinkClick")[0];if($e){let ke=$e.getAttribute("r:id"),Oe=$e.getAttribute("action"),Ve,Je;ke&&v[te]&&v[te][ke]&&v[te][ke].type==="hyperlink"?(Ve=v[te][ke].target,Je="external"):ke&&v[te]&&v[te][ke]&&v[te][ke].type==="slide"?(Ve=v[te][ke].target,Je="internal"):Oe&&(Ve=Oe,Je="internal"),Ve&&(Ae.metadata={link:Ve,linkType:Je})}re.children?.push(Ae)}}re.text&&N.push(re)}}return N};function ne(le,te){let N=[];for(let x of Array.from(le?.childNodes||[])){if(x.nodeType!==1)continue;let P=x,C=P.tagName;if(C==="p:sp")N.push(...H(P,te));else if(C==="p:pic"){let U=I(P,te);U&&N.push(U)}else if(C==="p:graphicFrame"){let U=Z(P,te);U&&N.push(U)}else if(C==="p:grpSp"){let U=P.getElementsByTagName("p:spTree")[0];N.push(...ne(U,te))}}return N}for(let le of f)if(le.path.match(i)){let te=le.path.match(/slide(\d+)\.xml\.rels/);if(te){let N=parseInt(te[1]);v[N]={};let x=Wt(le.content.toString()),P=Le(x,"Relationship");for(let C=0;C<P.length;C++){let U=P[C].getAttribute("Id"),j=P[C].getAttribute("Type"),M=P[C].getAttribute("Target");if(U&&j&&M){let Q="other";j.includes("relationships/image")?Q="image":j.includes("relationships/hyperlink")?Q="hyperlink":j.includes("relationships/chart")?Q="chart":j.includes("relationships/slide")?Q="slide":j.includes("relationships/notesSlide")&&(Q="notes");let ce=M;M.startsWith("http://")||M.startsWith("https://")||(ce=ce.split("/").pop()||""),v[N][U]={type:Q,target:ce}}}}}for(let le of f){if(le.path.match(s)||le.path.match(a)||le.path.match(i)||le.path.match(u))continue;let te=le.content.toString(),N=Wt(te);e.includeRawContent&&b.push(te);let x=le.path.match(o),P=x?parseInt(x[1]):0,C=le.path.includes("notesSlide"),U={type:C?"note":"slide",children:[],metadata:{slideNumber:P,...C?{noteId:`slide-note-${P}`}:{}}};e.includeRawContent&&(U.rawContent=le.content.toString());let j=Le(N,"p:spTree")[0];j&&U.children?.push(...ne(j,P)),U.children&&U.children.length>0&&m.push(U)}let L=[],$=f.filter(le=>le.path.match(/ppt\/media\/.*/)),K=f.filter(le=>le.path.match(/ppt\/charts\/chart\d+\.xml/));if(e.extractAttachments){let le=e.ocr&&$.length>0?await(0,R3.createWorker)(e.ocrLanguage||"eng",1,{logger:()=>{}}):void 0;try{for(let N of $){let x=Os(N.path.split("/").pop()||"image",N.content);if(L.push(x),e.ocr&&x.mimeType.startsWith("image/"))try{x.ocrText=(await is(N.content,le)).trim()}catch(P){ci(`OCR failed for ${x.name}:`,e,P)}}}finally{le&&await le.terminate()}for(let N of K){let x={type:"chart",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",data:N.content.toString("base64"),name:N.path.split("/").pop()||"",extension:"xml"};L.push(x);try{let P=await Yu(N.content);x.chartData=P}catch(P){ci(`Failed to extract text from chart ${N.path}:`,e,P)}}let te=N=>{for(let x of N){if("attachmentName"in(x.metadata||{})){let P=x.metadata,C=L.find(U=>U.name===P.attachmentName);C&&(x.type==="image"&&(C.altText=P.altText,C.ocrText&&(x.text=C.ocrText)),x.type==="chart"&&(x.text=C.chartData?.rawTexts.join(e.newlineDelimiter||`
`)))}x.children&&te(x.children)}};te(m)}return!e.ignoreNotes&&e.putNotesAtLast&&m.sort((le,te)=>{let N=le.type==="note"?1:0,x=te.type==="note"?1:0;return N-x}),{type:"pptx",metadata:d,content:m,attachments:L,toText:()=>m.map(le=>{let te=N=>{let x="";return N.children?x+=N.children.map(te).filter(P=>P!="").join(N.children[0]?.children?e.newlineDelimiter??`
`:""):x+=N.text||"",x};return te(le)}).filter(le=>le!="").join(e.newlineDelimiter??`
`)}};Ce();De();Re();var I3=es(ic());var NV={pngblip:"png",jpegblip:"jpeg",gifblip:"gif",tiffblip:"tiff",dibitmap:"bmp",wbitmap:"bmp"},kV={png:"image/png",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",bmp:"image/bmp"},NT=class{constructor(e){this.index=0;this.buffer=e,this.length=e.length}parse(){let e={type:"group",content:[]},t=[e];for(;this.index<this.length;){let n=this.buffer[this.index],i=t[t.length-1];if(n===123){this.index++;let o={type:"group",content:[]};i.content.push(o),t.push(o)}else n===125?(this.index++,t.length>1&&t.pop()):n===92?(this.index++,this.parseControl(i)):n===13||n===10?this.index++:this.parseText(i)}return e}parseControl(e){if(this.index>=this.length)return;let t=this.buffer[this.index];if(t===123||t===125||t===92){e.content.push({type:"text",value:String.fromCharCode(t)}),this.index++;return}if(t===39){if(this.index++,this.index+1<this.length){let a=this.buffer.toString("utf8",this.index,this.index+2),u=parseInt(a,16);if(!isNaN(u)){let f={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}[u]||u;e.content.push({type:"text",value:String.fromCharCode(f)})}this.index+=2}return}if(t===42){e.content.push({type:"control",value:"*"}),this.index++;return}let n="";for(;this.index<this.length;){let a=this.buffer[this.index];if(a>=97&&a<=122||a>=65&&a<=90)n+=String.fromCharCode(a),this.index++;else break}let i,o=!1,s="";for(this.index<this.length&&this.buffer[this.index]===45&&(s+="-",this.index++);this.index<this.length;){let a=this.buffer[this.index];if(a>=48&&a<=57)s+=String.fromCharCode(a),this.index++,o=!0;else break}if(o&&(i=parseInt(s,10)),this.index<this.length&&this.buffer[this.index]===32&&this.index++,n==="bin"&&i!==void 0&&i>0){this.index+=i;return}e.content.push({type:"control",value:n,param:i}),(e.content.length===1&&e.type==="group"||e.content.length===2&&e.content[0].type==="control"&&e.content[0].value==="*")&&(e.destination=n)}parseText(e){let t="";for(;this.index<this.length;){let n=this.buffer[this.index];if(n===123||n===125||n===92||n===13||n===10)break;t+=String.fromCharCode(n),this.index++}t.length>0&&e.content.push({type:"text",value:t})}},O3=async(r,e)=>{try{let n=new NT(r).parse(),i=LV(n),o=PV(n),s=[],a=[],u=[],c="",f=[],h="",d="",m={},b=s,v=0,w="left",y=!1,_,E,S,A,F,I=[],X=0,Z=0,H=()=>I.length>0?I[I.length-1]:void 0,ne=()=>{I.length===0&&I.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})},L=!1,$=!1,K=0,le=[],te={isMergedContinuation:!1},N=0,x=0,P={},C=!1,U=!1,j,M,Q={},ce=!1,_e,re,W={},oe={},we,xe=(p,R)=>p.bold!==R.bold||p.italic!==R.italic||p.underline!==R.underline||p.strikethrough!==R.strikethrough||p.size!==R.size||p.font!==R.font||p.color!==R.color||p.backgroundColor!==R.backgroundColor||p.subscript!==R.subscript||p.superscript!==R.superscript,V=()=>{if(d){let p={type:"text",text:d,formatting:{...m}};we&&(p.metadata={link:we,linkType:Ae(we)}),f.push(p),c+=d,d=""}},B=!1,se=()=>{V();let p=c||f.length>0;if(L&&!$&&!B&&p){let R=c,J=[...f],D=h;c="",f=[],h="",be(),c=R,f=J,h=D}if(p){let R="paragraph",J;if(E!==void 0&&E>0)R="heading",J={level:E},A=void 0,F=void 0;else if(y){R="list";let ae=S||A,fe=_||F||"unordered",Ee=0;ae&&(oe[ae]||(oe[ae]={}),oe[ae][v]===void 0?oe[ae][v]=0:oe[ae][v]++,Ee=oe[ae][v]),J={listType:fe,indentation:v,listId:ae||"",itemIndex:Ee,alignment:w},ae&&(A=ae),fe&&(F=fe)}let D={type:R,text:c,children:f,formatting:void 0,metadata:J};e.includeRawContent&&h&&(D.rawContent=h),L&&$?(ne(),H().currentCellContent.push(D)):b.push(D),c="",f=[],h="",v=0,y=!1,_=void 0,E=void 0,S=void 0}},ge=p=>{se();let R=p||H();if(!R)return;let J={type:"cell",text:R.currentCellContent.map(D=>D.text).join(`
`),children:[...R.currentCellContent],metadata:{row:R.rowIndex,col:R.currentCells.length}};return R.currentCellContent=[],J},Se=p=>{let R=p||H();if(!R)return;let J=ge(R);if(J&&(J.children&&J.children.length>0||J.text)&&R.currentCells.push(J),R.currentCells.length>0){let D={type:"row",text:R.currentCells.map(ae=>ae.text).filter(ae=>ae!=="").join(e.newlineDelimiter??`
`),children:[...R.currentCells]};R.rows.push(D),R.currentCells=[],R.rowIndex++}},be=()=>{if(B)return;B=!0;let p=H();if(!p){B=!1;return}if(Se(p),p.rows.length>0){K++;let R={type:"table",text:p.rows.map(J=>J.text).join(`
`),children:[...p.rows]};I.length>1?I[I.length-2].currentCellContent.push(R):b.push(R)}I.pop(),I.length===0&&(L=!1,$=!1),B=!1},pe=p=>{let R,J=D=>{if(D.type==="text"){let ae=D.value,fe=ae.match(/HYPERLINK\s+"([^"]+)"/i);if(fe)return fe[1];let Ee=ae.match(/"(https?:\/\/[^"]+|mailto:[^"]+|#[^"]+)"/);if(Ee)return Ee[1]}else if(D.type==="group"){let ae=!1,fe;for(let Ee of D.content)if(Ee.type==="text"){Ee.value.toUpperCase().includes("HYPERLINK")&&(ae=!0);let Ie=Ee.value.match(/"([^"]+)"/);Ie&&ae&&(fe=Ie[1])}else if(Ee.type==="group"){let ve=J(Ee);ve&&(fe=ve)}if(fe)return fe}};for(let D of p.content)if(D.type==="group"){let ae=J(D);if(ae)return ae}return R},Ae=p=>{let R=p.trim();return R.startsWith("#")||!/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(R)?"internal":"external"},$e=p=>{let R="",J=D=>{if(D.type==="text")R+=D.value;else if(D.type==="group")for(let ae of D.content)J(ae)};for(let D of p.content)J(D);return R},ke=p=>{let R,J="";for(let ae of p.content)if(ae.type==="control"){let fe=NV[ae.value];fe&&(R=fe)}else ae.type==="text"?J+=ae.value.replace(/[^0-9a-fA-F]/g,""):ae.type;if(!R||J.length===0)return;let D=kV[R];if(D)try{let ae=Buffer.from(J,"hex"),fe=R,Ee=`image_${u.length+1}.${fe}`;return{type:"image",mimeType:D,data:ae.toString("base64"),name:Ee,extension:fe}}catch{return}},Oe=p=>{if(!/^[a-zA-Z]/.test(p.value))return`\\${p.value}`;let R=`\\${p.value}`;return p.param!==void 0&&(R+=p.param),R+=" ",R},Ve=p=>p.value.replace(/([\\{}])/g,"\\$1"),Je=(p,R,J=0)=>{if(p.type==="group"){let D=["fonttbl","colortbl","stylesheet","info","macpict","pmmetafile","wmetafile","dibitmap","bitmap","object","nextGenerator","header","footer","nonshppict","xml","private","upnp","ud","filetbl","operator","author","creatim","revtim","printim","comment","fldinst","listtext","pntext"],ae=!1,fe=!1,Ee=!1,ve=!1;if(p.destination){if(p.destination==="footnote")fe=!0;else if(p.destination==="field"){let Me=pe(p);Me&&(V(),Ee=!0,we=Me)}else if(p.destination==="listtable")C=!0;else if(C&&p.destination==="list")U=!0,j=void 0,M=void 0;else if(p.destination==="listoverridetable")ce=!0;else if(ce&&p.destination==="listoverride")_e=void 0,re=void 0;else if(p.destination==="pict")e.extractAttachments?ve=!0:ae=!0;else if(D.includes(p.destination))ae=!0;else if(p.content.length>0&&p.content[0].type==="control"&&p.content[0].value==="*"){let Me=["fldinst","nesttableprops"];e.extractAttachments&&Me.push("shppict","listpicture"),Me.includes(p.destination||"")||(ae=!0)}}if(p.destination==="listtext"||p.destination==="pntext"){y||(v=0),y=!0;let Me=$e(p);if(Me){let et=Me.trim();["\xB7","\u2022","o","\xA7","\u25A0","\u25A1","\u25CF","\u25CB","\u25C6","\u25C7","\u25BA","\u25B8","\xB7","\u2022","\u25CF","\u25CB"].some(je=>et.includes(je))||et.length===1&&!/[0-9a-zA-Z]/.test(et)?_="unordered":(/^[0-9ivxlcdm]+[\.\)]/i.test(et)||/^[a-z][\.\)]/i.test(et))&&(_="ordered")}ae=!0}if(ae)return;if(h+="{",ve){let Me=ke(p);Me&&(u.push(Me),!C&&!U&&(se(),b.push({type:"image",text:"",metadata:{attachmentName:Me.name||`image_${u.length}`}})));for(let et of p.content)if(et.type==="control")h+=Oe(et);else if(et.type==="text")h+=Ve(et);else if(et.type==="group"){let O=Pe=>{for(let je of Pe.content)je.type==="control"?h+=Oe(je):je.type==="text"?h+=Ve(je):je.type==="group"&&(h+="{",O(je),h+="}")};O(p)}h+="}";return}let Ie=b;if(fe){if(e.ignoreNotes)return;se(),X++;let Me="footnote";Z===1?Me="endnote":Z===2&&(Me=p.content.some(Pe=>Pe.type==="control"&&Pe.value==="ftnalt")?"endnote":"footnote");let et={type:"note",children:[],metadata:{noteId:X.toString(),noteType:Me}};a.push(et),b=et.children}let Y={...R};for(let Me of p.content){if(Me.type==="group"&&Me.destination==="fldinst"){h+="{";let et=O=>{for(let Pe of O.content)Pe.type==="control"?h+=Oe(Pe):Pe.type==="text"?h+=Ve(Pe):Pe.type==="group"&&(h+="{",et(Pe),h+="}")};et(Me),h+="}";continue}Je(Me,Y,J+1)}p.destination==="listtable"?C=!1:p.destination==="list"?(U=!1,j!==void 0&&M!==void 0&&(Q[j]=M)):p.destination==="listoverridetable"?ce=!1:ce&&p.destination==="listoverride"&&re!==void 0&&_e!==void 0&&(W[re]=_e),fe&&(se(),b=Ie),Ee&&(V(),we=void 0),h+="}"}else if(p.type==="text"){if(C||ce){h+=Ve(p);return}xe(m,R)&&(V(),m={...R}),d+=p.value,h+=Ve(p)}else if(p.type==="control"){if(h+=Oe(p),C){if(p.value==="listid")j=p.param;else if(p.value==="levelnfc"||p.value==="levelnfcn"){let D=p.param!==void 0&&(p.param===0||p.param>=0&&p.param<=4);(!M||M==="unordered"&&D)&&(M=D?"ordered":"unordered")}return}if(ce){p.value==="listid"?_e=p.param:p.value==="ls"&&(re=p.param);return}if(p.value==="par")se(),m={...R};else if(p.value==="trowd"){let D=H();L&&D&&D.currentCellContent.length>0?(ne(),I.push({rows:[],currentCells:[],currentCellContent:[],rowIndex:0})):L||(L=!0,ne()),$=!0,le=[],te={isMergedContinuation:!1},N=0}else if(p.value==="clvmrg")te.isMergedContinuation=!0;else if(p.value==="clmgf")te.isMergedContinuation=!1;else if(p.value==="cellx")le.push({...te}),te={isMergedContinuation:!1};else if(p.value==="cell"){$=!0;let D=!1;N<le.length&&(D=le[N].isMergedContinuation),N++;let ae=ge();if(ae&&!D){let fe=H();fe&&fe.currentCells.push(ae)}m={...R}}else if(p.value==="nestcell"){if(I.length>1){let ae=H();ae&&(ae.rows.length>0||ae.currentCells.length>0)&&be()}$=!0;let D=ge();if(D){let ae=H();ae&&ae.currentCells.push(D)}m={...R}}else if(p.value==="row")Se(),m={...R},N=0,$=!1;else if(p.value==="nestrow")I.length>1&&be(),Se(),m={...R},N=0;else if(p.value==="intbl")L=!0,$=!0,ne();else if(p.value==="pard")$=!1,v=0,w="left",y=!1,_=void 0,E=void 0,S=void 0,R.backgroundColor=void 0;else if(p.value==="tab")xe(m,R)&&(V(),m={...R}),d+="	";else if(p.value==="line")xe(m,R)&&(V(),m={...R}),d+=`
`;else if(p.value==="lquote")xe(m,R)&&(V(),m={...R}),d+="\u2018";else if(p.value==="rquote")xe(m,R)&&(V(),m={...R}),d+="\u2019";else if(p.value==="ldblquote")xe(m,R)&&(V(),m={...R}),d+="\u201C";else if(p.value==="rdblquote")xe(m,R)&&(V(),m={...R}),d+="\u201D";else if(p.value==="u"){if(p.param!==void 0){let D=p.param;D<0&&(D+=65536),xe(m,R)&&(V(),m={...R}),d+=String.fromCharCode(D)}}else if(p.value==="b")R.bold=p.param!==0;else if(p.value==="i")R.italic=p.param!==0;else if(p.value==="ul")R.underline=p.param!==0;else if(p.value==="ulnone")R.underline=!1;else if(p.value==="strike")R.strikethrough=p.param!==0;else if(p.value==="plain")R.bold=!1,R.italic=!1,R.underline=!1,R.strikethrough=!1,R.subscript=!1,R.superscript=!1,R.size=void 0,R.font=void 0,R.color=void 0,R.backgroundColor=void 0;else if(p.value==="fs")p.param!==void 0&&(R.size=(p.param/2).toString()+"pt");else if(p.value==="f")p.param!==void 0&&i[p.param]&&(R.font=i[p.param]);else if(p.value==="cf")p.param!==void 0&&o[p.param]&&(R.color=o[p.param]);else if(p.value==="fet")p.param!==void 0&&(Z=p.param);else if(p.value==="cb"||p.value==="highlight"||p.value==="chcbpat"||p.value==="cbpat")p.param!==void 0&&o[p.param]&&(R.backgroundColor=o[p.param]);else if(p.value==="sub")R.subscript=!0,R.superscript=!1;else if(p.value==="super")R.superscript=!0,R.subscript=!1;else if(p.value==="nosupersub")R.subscript=!1,R.superscript=!1;else if(p.value==="li")p.param!==void 0&&(v=Math.floor(p.param/360));else if(p.value==="ls"){if(p.param!==void 0){y||(v=0),y=!0,P[p.param]||(x++,P[p.param]=`rtf-list-${x}`),S=P[p.param];let D=W[p.param]!==void 0?W[p.param]:p.param;Q[D]&&(_=Q[D])}}else p.value==="ilvl"?p.param!==void 0&&(y=!0,v=p.param):p.value==="pnlvl"?(y=!0,p.param!==void 0&&(v=p.param)):p.value==="levelnfc"||p.value==="pnf"?p.param!==void 0&&(y=!0,p.param===23?_="unordered":_="ordered"):p.value==="pndec"||p.value==="pnord"||p.value==="pnlcltr"||p.value==="pnucltr"?(y||(v=0),y=!0,_="ordered"):p.value==="pnbullet"||p.value==="pncard"?(y||(v=0),y=!0,_="unordered"):p.value==="s"?p.param!==void 0&&p.param>=1&&p.param<=9&&(E=p.param):p.value==="ql"?w="left":p.value==="qc"?w="center":p.value==="qr"?w="right":p.value==="qj"&&(w="justify")}};Je(n,{});let tt=H();if((L||tt&&(tt.rows.length>0||tt.currentCells.length>0))&&be(),se(),!e.putNotesAtLast&&a.length>0&&(s.push(...a),a.length=0),e.ocr&&e.extractAttachments){let p=e.ocr&&u.some(J=>J.mimeType.startsWith("image/"))?await(0,I3.createWorker)(e.ocrLanguage||"eng",1,{logger:()=>{}}):void 0;try{for(let J of u)if(J.mimeType.startsWith("image/"))try{let D=Buffer.from(J.data,"base64");J.ocrText=(await is(D,p)).trim()}catch(D){ci(`OCR failed for ${J.name}:`,e,D)}}finally{p&&await p.terminate()}let R=J=>{for(let D of J){if(D.type==="image"&&D.metadata&&"attachmentName"in D.metadata){let ae=D.metadata,fe=u.find(Ee=>Ee.name===ae.attachmentName);fe&&(fe.ocrText&&(D.text=fe.ocrText),fe.altText&&(ae.altText=fe.altText))}D.children&&R(D.children)}};R(s)}let T=p=>{for(let R of p){if(R.type==="note"&&R.children){let J=D=>D.children&&D.children.length>0?D.children.map(J).join(""):D.text||"";R.text=R.children.map(J).join("").trim()}R.children&&T(R.children)}};T(s),T(a);let g={type:"rtf",metadata:{},content:s,attachments:u,toText:()=>{let p=s.map(R=>R.text).join(e.newlineDelimiter??`
`);return e.putNotesAtLast&&a.length>0&&(p+=(e.newlineDelimiter??`
`)+a.map(R=>R.text).join(e.newlineDelimiter??`
`)),p}};return e.putNotesAtLast&&a.length>0&&s.push(...a),g}catch(t){throw t}};function LV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="fonttbl"){for(let o of i.content)if(o.type==="group"){let s,a="";for(let u of o.content)u.type==="control"&&u.value==="f"?s=u.param:u.type==="text"&&(a+=u.value);s!==void 0&&a&&(a=a.replace(/;$/,"").trim(),e[s]=a)}return!0}if(t(i))return!0}return!1};return t(r),e}function PV(r){let e={},t=n=>{for(let i of n.content)if(i.type==="group"){if(i.destination==="colortbl"){let o=0,s=0,a=0,u=0;for(let c of i.content)if(c.type==="control")c.value==="red"&&c.param!==void 0?s=c.param:c.value==="green"&&c.param!==void 0?a=c.param:c.value==="blue"&&c.param!==void 0&&(u=c.param);else if(c.type==="text"&&c.value===";"){let f=`#${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}`;e[o]=f,o++,s=0,a=0,u=0}return!0}if(t(i))return!0}return!1};return t(r),e}Ce();De();Re();var N3=es(Ob());var k3=es(ic()),L3=async(r,e)=>{let t=/word\/document[\d+]?.xml/,n=/word\/footnotes[\d+]?.xml/,i=/word\/endnotes[\d+]?.xml/,o=/word\/numbering[\d+]?.xml/,s=/(word\/)?media\/.*/,a=/docProps\/core[\d+]?.xml/,u=/word\/_rels\/document[\d+]?.xml\.rels/,c=/word\/styles[\d+]?.xml/,f=new N3.XMLSerializer,h=x=>{let P={},C=f.serializeToString(x),U=(B,se)=>{let ge=new RegExp(`<${se}(?:\\s+w:val="([^"]+)")?\\s*\\/?>`),Se=B.match(ge);if(Se){let be=Se[1];return be===void 0?!0:be==="1"||be==="true"||be==="on"}return null},j=U(C,"w:b");j!==null&&(P.bold=j);let M=U(C,"w:i");M!==null&&(P.italic=M);let Q=C.match(/<w:u(?: w:val="([^"]+)")?\/?>/);if(Q){let B=Q[1];(!B||B!=="none")&&(P.underline=!0)}let ce=U(C,"w:strike"),_e=U(C,"w:dstrike");ce!==null?P.strikethrough=ce:_e!==null&&(P.strikethrough=_e);let re=C.match(/<w:sz w:val="(\d+)"/);re&&(P.size=(parseInt(re[1])/2).toString()+"pt");let W=C.match(/<w:color w:val="([^"]+)"/);W&&W[1]!=="auto"&&(P.color="#"+W[1]);let oe=C.match(/<w:shd[^>]*w:fill="([^"]+)"/);oe&&oe[1]!=="auto"&&(P.backgroundColor="#"+oe[1]);let we=C.match(/<w:highlight w:val="([^"]+)"/);if(we&&we[1]!=="none"){let B={yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",magenta:"#FF00FF",blue:"#0000FF",red:"#FF0000",darkBlue:"#00008B",darkCyan:"#008B8B",darkGreen:"#006400",darkMagenta:"#8B008B",darkRed:"#8B0000",darkYellow:"#808000",darkGray:"#A9A9A9",lightGray:"#D3D3D3",black:"#000000"};P.backgroundColor=B[we[1]]||we[1]}let xe=C.match(/<w:rFonts[^>]*w:ascii="([^"]+)"/);if(xe)P.font=xe[1];else{let B=C.match(/<w:rFonts[^>]*w:hAnsi="([^"]+)"/);B&&(P.font=B[1])}let V=C.match(/<w:vertAlign w:val="([^"]+)"/);return V&&(V[1]==="subscript"&&(P.subscript=!0),V[1]==="superscript"&&(P.superscript=!0)),P},d=await Cl(r,x=>!!x.match(t)||!!x.match(n)||!!x.match(i)||!!x.match(o)||!!x.match(a)||!!x.match(u)||!!x.match(c)||!!e.extractAttachments&&!!x.match(s)),m=d.find(x=>x.path.match(a)),b=m?wl(m.content.toString()):{},v=new Map,w=new Map,y=[],_=[],E=d.filter(x=>x.path.match(s)),S=d.find(x=>x.path.match(u)),A={};if(S){let x=Wt(S.content.toString()),P=Le(x,"Relationship");for(let C=0;C<P.length;C++){let U=P[C].getAttribute("Id"),j=P[C].getAttribute("Target");U&&j&&(A[U]=j)}}let F=d.find(x=>x.path.match(o)),I={};if(F){let x=Wt(F.content.toString()),P=Le(x,"w:num"),C=Le(x,"w:abstractNum"),U={};for(let j=0;j<C.length;j++){let M=C[j].getAttribute("w:abstractNumId");M&&(U[M]=C[j])}for(let j=0;j<P.length;j++){let M=P[j].getAttribute("w:numId"),ce=Le(P[j],"w:abstractNumId")[0]?.getAttribute("w:val");if(M&&ce&&U[ce]){I[M]={};let _e=Le(U[ce],"w:lvl");for(let re=0;re<_e.length;re++){let W=_e[re].getAttribute("w:ilvl"),oe=Le(_e[re],"w:numFmt")[0],we=Le(_e[re],"w:lvlText")[0];W&&(I[M][W]={numFmt:oe?.getAttribute("w:val")||"decimal",lvlText:we?.getAttribute("w:val")||""})}}}}let X=d.find(x=>x.path.match(c)),Z={};if(X){let x=Wt(X.content.toString()),P=Le(x,"w:style");for(let C=0;C<P.length;C++){let U=P[C].getAttribute("w:styleId");if(U){let j=Le(P[C],"w:rPr")[0],M=Le(P[C],"w:pPr")[0],Q=j?h(j):{},ce,_e;if(M){let re=Le(M,"w:jc")[0];if(re){let oe=re.getAttribute("w:val");(oe==="left"||oe==="center"||oe==="right"||oe==="justify")&&(ce=oe)}let W=Le(M,"w:shd")[0];if(W){let oe=W.getAttribute("w:fill");oe&&oe!=="auto"&&(_e="#"+oe)}}Z[U]={formatting:Q,alignment:ce,backgroundColor:_e}}}}let H={};if(X){let x=Wt(X.content.toString()),P=Le(x,"w:docDefaults")[0];if(P){let C=Le(P,"w:rPrDefault")[0];if(C){let U=Le(C,"w:rPr")[0];U&&(H=h(U))}}}let ne;if(X){let x=Wt(X.content.toString()),P=Le(x,"w:style");for(let C=0;C<P.length;C++){let U=P[C].getAttribute("w:type"),j=P[C].getAttribute("w:default"),M=P[C].getAttribute("w:styleId");if(U==="paragraph"&&j==="1"&&M){ne=M;break}}!ne&&Z.Normal&&(ne="Normal")}let L=[],$=[],K={},le={},te=x=>{let P=f.serializeToString(x),C=Le(x,"w:numPr")[0],U=!!C,j=Le(x,"w:pPr")[0],M=j?Le(j,"w:pStyle")[0]:null,Q=M?M.getAttribute("w:val"):null,ce=Q?Q.startsWith("Heading")||Q==="Title":!1,_e=Q&&Z[Q]?Z[Q]:{formatting:{}},re=_e.alignment;if(j){let se=Le(j,"w:jc")[0];if(se){let ge=se.getAttribute("w:val");(ge==="left"||ge==="center"||ge==="right"||ge==="justify")&&(re=ge)}}let W=_e.backgroundColor;if(j){let se=Le(j,"w:shd")[0];if(se){let ge=se.getAttribute("w:fill");ge&&ge!=="auto"&&(W="#"+ge)}}let oe={..._e.formatting};if(j){let se=Le(j,"w:rPr")[0];if(se){let ge=h(se);for(let Se in ge){let be=ge[Se];be===!1?delete oe[Se]:be!==void 0&&(oe[Se]=be)}}}let we="",xe=[],V=se=>{if(se.nodeName==="w:r"){let ge=se,Se=Le(ge,"w:rPr")[0],be={};for(let ke in oe)be[ke]=oe[ke];let pe=Se?Le(Se,"w:rStyle")[0]:null,Ae=pe?pe.getAttribute("w:val"):Q;if(Ae&&Z[Ae])for(let ke in Z[Ae].formatting)be[ke]=Z[Ae].formatting[ke];if(Se){let ke=h(Se);for(let Oe in ke){let Ve=ke[Oe];Ve===!1?delete be[Oe]:Ve!==void 0&&(be[Oe]=Ve)}}!be.backgroundColor&&W&&(be.backgroundColor=W);let $e=Le(ge,"w:t");for(let ke of $e){let Oe=ke.textContent||"";we+=Oe;let Ve={type:"text",text:Oe,formatting:be};e.includeRawContent&&(Ve.rawContent=f.serializeToString(ke));let Je=Ae||Q||ne;Je&&(Ve.metadata={style:Je}),xe.push(Ve)}if(e.extractAttachments){let ke=Le(ge,"w:drawing"),Oe=Le(ge,"w:pict"),Ve=[...ke,...Oe];for(let Je of Ve){let tt=f.serializeToString(Je),T="",g=Le(Je,"wp:docPr")[0];g&&(T=g.getAttribute("descr")||g.getAttribute("title")||"");let p="",R=Le(Je,"a:blip")[0];if(R)p=R.getAttribute("r:embed")||"";else{let J=Le(Je,"v:imagedata")[0];J&&(p=J.getAttribute("r:id")||"")}if(p&&A[p]){let D=A[p].split("/").pop();if(D){let ae={type:"image",text:"",metadata:{attachmentName:D,altText:T}};e.includeRawContent&&(ae.rawContent=tt),xe.push(ae)}}else{let J={type:"image",text:""};e.includeRawContent&&(J.rawContent=tt),xe.push(J)}}}if(!e.ignoreNotes){let ke=Le(ge,"w:footnoteReference")[0];if(ke){let Ve=ke.getAttribute("w:id");if(Ve&&v.has(Ve)){let Je=v.get(Ve),tt={type:"note",text:Je.map(T=>T.text).join(" "),children:Je,metadata:{noteType:"footnote",noteId:Ve}};e.putNotesAtLast?y.push(tt):xe.push(tt)}}let Oe=Le(ge,"w:endnoteReference")[0];if(Oe){let Ve=Oe.getAttribute("w:id");if(Ve&&w.has(Ve)){let Je=w.get(Ve),tt={type:"note",text:Je.map(T=>T.text).join(" "),children:Je,metadata:{noteType:"endnote",noteId:Ve}};e.putNotesAtLast?y.push(tt):xe.push(tt)}}}}else if(se.nodeName==="w:hyperlink"){let ge=se,Se=ge.getAttribute("r:id"),be=ge.getAttribute("w:anchor"),pe;be?pe={link:"#"+be,linkType:"internal"}:Se&&A[Se]&&(pe={link:A[Se],linkType:"external"});let Ae=Array.from(ge.childNodes);for(let $e of Ae){let ke=xe.length;if(V($e),pe)for(let Oe=ke;Oe<xe.length;Oe++)xe[Oe].type==="text"&&(xe[Oe].metadata={...xe[Oe].metadata??{},...pe})}}},B=Array.from(x.childNodes);for(let se of B)V(se);if(U){let se=Le(C,"w:numId")[0],ge=Le(C,"w:ilvl")[0],Se=se&&se.getAttribute("w:val")||"0",be=ge?parseInt(ge.getAttribute("w:val")||"0"):0,pe="ordered",Ae=0;if(Se&&I[Se]){let ke=be.toString();K[Se]||(K[Se]={}),K[Se][ke]||(K[Se][ke]=0),K[Se][ke]++;for(let Ve=be+1;Ve<10;Ve++)K[Se][Ve.toString()]&&(K[Se][Ve.toString()]=0);pe=(I[Se][ke]?.numFmt||"decimal")==="bullet"?"unordered":"ordered",le[Se]||(le[Se]={}),le[Se][ke]===void 0?le[Se][ke]=0:le[Se][ke]++,Ae=le[Se][ke]}let $e={type:"list",text:we,children:xe,metadata:{listType:pe,indentation:be,alignment:re||"left",listId:Se,itemIndex:Ae,style:Q}};return e.includeRawContent&&($e.rawContent=P),$e}else if(ce){let se=Q&&parseInt(Q.replace("Heading",""))||1,ge={type:"heading",text:we,children:xe,metadata:{level:se,alignment:re,style:Q??void 0}};return e.includeRawContent&&(ge.rawContent=P),ge}else{let se={type:"paragraph",text:we,children:xe,metadata:{alignment:re,style:Q??void 0}};return e.includeRawContent&&(se.rawContent=P),se}},N=x=>{let P=[],C=En(x,"w:tr");for(let U=0;U<C.length;U++){let j=C[U],M=[],Q=En(j,"w:tc");for(let _e=0;_e<Q.length;_e++){let re=Q[_e],W=[],oe="",we=Array.from(re.childNodes);for(let V of we)if(V.nodeName==="w:p"){let B=te(V);W.push(B),oe+=B.text}else if(V.nodeName==="w:tbl"){let B=N(V);W.push(B)}let xe={type:"cell",text:oe,children:W,metadata:{row:U,col:_e}};M.push(xe)}let ce={type:"row",children:M};P.push(ce)}return{type:"table",children:P}};if(!e.ignoreNotes){let x=d.find(C=>C.path.match(n));if(x){let C=Wt(x.content.toString()),U=Le(C,"w:footnote");for(let j of U){let M=j.getAttribute("w:id");if(!M||M==="-1"||M==="0")continue;let Q=Le(j,"w:p");v.set(M,Q.map(ce=>te(ce)))}}let P=d.find(C=>C.path.match(i));if(P){let C=Wt(P.content.toString()),U=Le(C,"w:endnote");for(let j of U){let M=j.getAttribute("w:id");if(!M||M==="-1"||M==="0")continue;let Q=Le(j,"w:p");w.set(M,Q.map(ce=>te(ce)))}}}for(let x of d){if(x.path.match(s)||x.path.match(o)||x.path.match(u)||x.path.match(c)||x.path.match(n)||x.path.match(i))continue;let P=x.content.toString();e.includeRawContent&&$.push(P);let C=Wt(P),U=Le(C,"w:body")[0];if(U){let j=Array.from(U.childNodes);for(let M of j)M.nodeName==="w:p"?L.push(te(M)):M.nodeName==="w:tbl"&&L.push(N(M))}}if(e.extractAttachments){let x=e.ocr&&E.length>0?await(0,k3.createWorker)(e.ocrLanguage||"eng",1,{logger:()=>{}}):void 0;try{for(let P of E){let C=Os(P.path.split("/").pop()||"image",P.content);if(_.push(C),e.ocr&&C.mimeType.startsWith("image/"))try{C.ocrText=(await is(P.content,x)).trim()}catch(U){ci(`OCR failed for ${C.name}:`,e,U)}}}finally{x&&await x.terminate()}if(e.ocr){let P=C=>{for(let U of C){if(U.type==="image"&&"attachmentName"in(U.metadata||{})){let j=U.metadata,M=_.find(Q=>Q.name===j.attachmentName);M&&M.ocrText&&(U.text=M.ocrText,M.altText=j.altText)}U.children&&P(U.children)}};P(L)}}return e.putNotesAtLast&&y.length>0&&L.push(...y),{type:"docx",metadata:{...b,formatting:H,styleMap:Z},content:L,attachments:_,toText:()=>L.map(x=>{let P=C=>{let U="";return C.children?U+=C.children.map(P).filter(j=>j!="").join(C.children[0]?.children?e.newlineDelimiter??`
`:""):U+=C.text||"",U};return P(x)}).filter(x=>x!="").join(e.newlineDelimiter??`
`)}};var Pf=class{static async parseOffice(e,t,n){let i,o={};typeof t=="function"?(i=t,o=n||{}):o=t||{};let s={ignoreNotes:!1,newlineDelimiter:`
`,putNotesAtLast:!1,outputErrorToConsole:!1,extractAttachments:!1,ocr:!1,ocrLanguage:"eng",includeRawContent:!1,pdfWorkerSrc:"",...o},a=Buffer.alloc(0),u="",c;try{if(!e)throw ia("IMPROPER_ARGUMENTS",s);if(e instanceof ArrayBuffer)a=Buffer.from(e);else if(Buffer.isBuffer(e))a=e;else if(typeof e=="string"){if(c=e,!ob(e))throw ia("FILE_DOES_NOT_EXIST",s,e);if(S2(e).isDirectory())throw ia("LOCATION_NOT_FOUND",s,e);a=T2(e),u=e.split(".").pop()?.toLowerCase()||""}else throw ia("INVALID_INPUT",s);if(!u){let h=await P3.fromBuffer(a);if(h)u=h.ext.toLowerCase();else throw ia("IMPROPER_BUFFERS",s)}let f;switch(u){case"docx":f=await L3(a,s);break;case"pptx":f=await D3(a,s);break;case"xlsx":f=await QM(a,s);break;case"odt":case"odp":case"ods":f=await tB(a,s);break;case"pdf":f=await T3(a,s);break;case"rtf":f=await O3(a,s);break;default:throw ia("EXTENSION_UNSUPPORTED",s,u)}return i&&i(f),f}catch(f){let h=dk(f,s,c);throw i&&i(void 0,h),h}}};var MV=Pf.parseOffice;var BV=Pf;if(typeof xu<"u"&&typeof module<"u"&&xu.main===module){let i=function(o){return o.startsWith("--")&&o.includes("=")};FV=i;let r=process.argv.slice(2),e,t=!1,n=[];if(r.forEach(o=>{i(o)?n.push(o):e||(e=o)}),e){let o={};n.forEach(s=>{let[a,u]=s.split("="),c=a.replace("--","");c==="toText"?u.toLowerCase()==="true"?t=!0:u.toLowerCase()==="false"?t=!1:console.log(`Invalid value for toText: ${u}`):u.toLowerCase()==="true"?o[c]=!0:u.toLowerCase()==="false"?o[c]=!1:o[c]=u}),Pf.parseOffice(e,o).then(s=>{console.log(t?s.toText():JSON.stringify(s,null,2))}).catch(console.error)}else console.log("Usage: node officeparser [file] [--option=value]")}var FV;return Ir(UV);})();
/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
@jspm/core/nodelibs/browser/chunk-B738Er4n.js:
ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@jspm/core/nodelibs/browser/chunk-CjPlbOtt.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@jspm/core/nodelibs/browser/chunk-CcCWfKp1.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=officeparser.browser.js.map
